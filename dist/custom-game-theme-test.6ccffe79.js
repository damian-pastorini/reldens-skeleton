!function(e,t,i,r,n,s,a,o){var h="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof global?global:{},c="function"==typeof h[r]&&h[r],l=c.i||{},d=c.cache||{},u="u">typeof module&&"function"==typeof module.require&&module.require.bind(module);function f(t,i){if(!d[t]){if(!e[t]){if(n[t])return n[t];var s="function"==typeof h[r]&&h[r];if(!i&&s)return s(t,!0);if(c)return c(t,!0);if(u&&"string"==typeof t)return u(t);var a=Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}l.resolve=function(i){var r=e[t][1][i];return null!=r?r:i},l.cache={};var o=d[t]=new f.Module(t);e[t][0].call(o.exports,l,o,o.exports,h)}return d[t].exports;function l(e){var t=l.resolve(e);if(!1===t)return{};if(Array.isArray(t)){var i={__esModule:!0};return t.forEach(function(e){var t=e[0],r=e[1],n=e[2]||e[0],s=f(r);"*"===t?Object.keys(s).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return s[e]}})}):"*"===n?Object.defineProperty(i,t,{enumerable:!0,value:s}):Object.defineProperty(i,t,{enumerable:!0,get:function(){return"default"===n?s.__esModule?s.default:s:s[n]}})}),i}return f(t)}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.require=u,this.exports={}},f.modules=e,f.cache=d,f.parent=c,f.distDir=void 0,f.publicUrl=void 0,f.devServer=void 0,f.i=l,f.register=function(t,i){e[t]=[function(e,t){t.exports=i},{}]},Object.defineProperty(f,"root",{get:function(){return h[r]}}),h[r]=f;for(var p=0;p<t.length;p++)f(t[p]);if(i){var g=f(i);"object"==typeof exports&&"u">typeof module?module.exports=g:"function"==typeof define&&define.amd&&define(function(){return g})}}({"1eaQK":[function(e,t,i,r){window.trustedTypes?.createPolicy&&trustedTypes.createPolicy("default",{createHTML:e=>e,createScriptURL:e=>e});let n=new URLSearchParams(window.location.search);window.RELDENS_LOG_LEVEL=n.get("logLevel")||7,window.RELDENS_ENABLE_TRACE_FOR=Number(n.get("traceFor")||"emergency,alert,critical");let{GameManager:s}=e("f6a573e6a894b077"),{ClientPlugin:a}=e("22d25a4cea3c3bc"),o=new s;o.setupCustomClientPlugin("customPluginKey",a),window.addEventListener("DOMContentLoaded",()=>{o.clientStart()}),o.events.on("reldens.afterInitEngineAndStartGame",()=>{o.gameDom.getElement("#current-version").innerHTML=o.config.client.gameEngine.version+" -"}),o.events.on("reldens.startGameAfter",()=>{o.gameDom.getElement(".row-disclaimer")?.remove()}),o.events.on("reldens.activateRoom",e=>{e.onMessage("*",e=>{if("rski.Bc"!==e.act)return;let t=(e.data?.skillKey||"").toString(),i=Number(e.data?.extraData?.sd||0);if(""!==t&&0<i){let e=o.gameDom.getElement(".skill-icon-"+t);if(!e)return;let r=Date.now()+i;e.classList.add("cooldown"),e.style.setProperty("--angle","0deg"),function t(){let n=r-Date.now();if(0>=n){e.style.setProperty("--angle","360deg"),e.classList.remove("cooldown");return}e.style.setProperty("--angle",`${(i-n)/i*360}deg`),requestAnimationFrame(t)}()}})}),window.reldens=o},{f6a573e6a894b077:"ffCbU","22d25a4cea3c3bc":"aHFje"}],ffCbU:[function(e,t,i,r){e("684699bf663c3eb9"),e("8524ab6b767fe50d");let{GameManager:n}=e("163628b93f1bf46b");t.exports.GameManager=n},{"684699bf663c3eb9":"kEVSM","8524ab6b767fe50d":"9C5C7","163628b93f1bf46b":"gFTma"}],kEVSM:[function(e,t,i,r){e("1784995cff40f4ee"),e("3db84f65815009e9"),e("18123b426b639506"),e("eaee9f5716583d73"),e("e65dab60a793f2f1"),e("375d8cdc37856052"),e("b97ac47c987ae87a"),e("a021542673f3dca5"),e("4917cb57871d338e"),e("32b253e39e74d8bb"),e("389e51d5714f687f"),e("f5e993e561fd02cd"),e("bb2bc4d4414bdde6"),e("efe695102c445413"),e("ccd56f09b115e545"),e("fcaf4e6617f043bc"),e("653d106c82dca6c3"),e("e3cead5be66b9f0d"),e("9189e57b3ec04752"),e("f0a4c78fa0016f60"),e("1d68ebee0b3f96f0"),e("af40359e9eb052ec"),e("736a7d0d20ecf3de"),e("b57c55c586369faa"),e("6e929cb8fa33300f"),e("a021c9c924d06b99"),e("c3a2ae3c387d24da"),e("4b806e1bc40e42a5"),e("4e1bbb4edd22e0ae"),e("716f90fa84e1f77c"),e("a4c895062bc52ef"),e("ab8b1e642f069677"),e("1c9c9c4583180611"),e("f74bd522ba638140"),e("161807fa85856503"),e("f48a3c099ac8e2b5"),e("8cf2e5f73ade81b4"),e("a9422cf3f5275913"),e("cc95b5c4842b3cba"),e("d5f0f9adde262121"),e("c2de5cf351f42e3e"),e("9b044f9dbdd9a543"),e("2c6c7828d3cbd4f7"),e("e4df5de4d418cbbb"),e("914cd91ef0bfb6f9"),e("6f128d6969e825b2"),e("f4ead5d4eb2af5d5"),e("b35e2d13cb589276"),e("c410e1b69fdd7adf"),e("312dd5f9138d6e43"),e("38530968f16263a0"),e("14af908df009beac"),e("dcd91f07678eb4c9"),e("c69d702ec59c2500"),e("4725bcb6f24869b3"),e("3cf52eabf83551bf"),e("c9cbfc3b3c78d70d"),e("6b0227180c3df38c"),e("e0fd70d02f07a4a0"),e("31a608e674c817eb"),e("b880a9dbebb02a2e"),e("46b1ee4ddc311f0"),e("8cf2fe9261c818db"),e("52fba706500b4b2d"),e("ffbe65a8f5be01e6"),e("da6de621a6714162"),e("7d69b07dcba2cc9c"),e("e1e627d3acaf8d18"),e("f4d9392585892a5b"),e("b04a1a032c30e8d5"),e("c1de8697c29b0da"),e("16d0f8a09ff973a0"),e("a48b7fc982febaf8"),e("b40fbc8703ed802d"),e("71533dcee95bced0"),e("38d8d405ad51cb0c"),e("c8503c219bf01ed1"),e("bc082cafa79546ad"),e("1160727e54f1c4b"),e("204a0882af55ce2b"),e("a3152d34d8dd7b45"),e("873b1b5c61bcd33"),e("16d6ef4f50e3e6e9"),e("e872f08087c6cb33"),e("657cbbcd48650779"),e("9568aecd38672862"),e("983d78ddb66e0131"),e("4252d65d3677af5a"),e("281c6fd1d9df7324"),e("c31154b4d54b87f"),e("610034140e218c33"),e("1bc59f7bc4d02b94"),e("1ac49ff73550904e"),e("8fd22c15c1dc3fdb"),e("722244e22d484cd4"),e("d7ec35bad14a1f3f"),e("9bb45158b3bb60e5"),e("dbfda47097dcdc05"),e("62df99a6374ea8e7"),e("3e175a332296c2fc"),e("6746b54eee03ffd"),e("95f6415683b99fd7"),e("30f5c44d5b0c5882"),e("fa34aad1a54cb74f"),e("6e7dfd5f426811ae"),e("f6587d23159bb2e"),e("bb688511262fa331"),e("4ba8f97c77fe72fb"),e("d400d9af20e5e158"),e("89eb5ddf4e423e14"),e("cfeb658fb1129c7d"),e("cf52518d7e23221c"),e("593d4e7884fc0918"),e("30b35f30b6dba51d"),e("44d90bd66a2bbd56"),e("24519596b23105e8"),e("69b53c2db51c07c6"),e("cd51cbb6a384e947"),e("b2bec95e117c35ff"),e("e02033538de8d8c6"),e("bb0f24f71db75179"),e("7334e4338273fd72"),e("95aa2ad5425c09f6"),e("a00519108abb0534"),e("2835a3239b6a1bc4"),e("f5faf41ae9cf1c5"),e("5e6fa649046f5df2"),e("84775698f8fef6c0"),e("8c2455e35e11d959"),e("1cee7874e0ff2b2b"),e("6d098447a1b2abdc"),e("7d7d81ff5b818a49"),e("c33461c993e8e491"),e("64a89b8cfcf7ab12"),e("300ca7e5c4ba71de"),e("5ea06ea856112f5d"),e("2f95ea182a42efc3"),e("7e00e0c0121e6a90"),e("43c70c31a61cc402"),e("7f64762e2c0d0f2e"),e("7a6c9bba2845dabe"),e("73d9d26ef5a08f08"),e("f671014547fe0e5e"),e("b36c3c3b6e78e925"),e("a7f5dbf9fb623d0a"),e("465fceaf1bde589b"),e("7766539bc795a94"),e("4faee6716fa8629d"),e("7737fbcafb7ce523"),e("e90b0a3a493c0ede"),e("26317a793dea7e9a"),e("9f5e020a3549a118"),e("9d0bfe01231db1a7"),e("b1221eae0bc5f9b"),e("c5352c47687ac7c"),e("34fe45ae8ed17da0"),e("781c619e0cad12e2"),e("7c6b58bad8dc3b81"),e("736ca46bafb50f8f"),e("4a8b2b3ca7e4d0f0"),e("3fd33a4a9e23fb29"),e("88ad2704384a1a6e"),e("1c6c6da898bf18bb"),e("d239d0cd4a8ca65b"),e("11eae3d8cd132ecd"),e("31d0c33ce951164f"),e("55fc79bd0e9015ff"),e("4c7f59100f9f15df"),e("45eab59e8e26538d"),e("46220f971d58285"),e("37e3f8df977640b7"),e("4449d13eae7996a8"),e("197d7cc5dd2340b0"),e("1ec03223143b45c0"),e("b3160300f21af751"),e("96c40097a27a339d"),e("113487f8ddcf0c0c"),e("d7643c1b9d7a0617"),e("efbae5e5ed53d7a4"),e("78d707d60e5ff2ef"),e("6aa1c963ba0fa26a"),e("29093847653ffb17"),e("b0554b151edd2f4"),e("c5299b37711c29ed"),e("334e6eea450261d0"),e("12c4df9fff4b4031"),e("9121fee042bcac7e"),e("5d62685ef5ad6e57"),e("3e4b4c735ca60ab9"),e("bb7017f5a1be1e59"),e("e8e708482f11c7ff"),e("74095422c65e093c"),e("6d6ea5c3920f0ba9"),e("a9480ffca9552742"),e("3447041b04906440"),e("90c4a005313bad84"),e("4769b7aec07e6de3"),e("925b64021990cd94"),e("6b93322692746037"),e("faa76facff418618"),e("c9933e8bbe42bd93"),e("8689abb82cc2e305"),e("2b087e045ed8c999"),e("5345958572918685"),e("3be5275c466b41f8"),e("8aac76b9f2cbbdb5"),e("be9c14095a58943"),e("43202def26bf6f4d"),e("2d80f533903ef8af"),e("218de58a047e4122"),e("e9c3dc5d87196314"),e("e941f90445a42817"),e("5ec6c25f739e2e3"),e("dcf33a0bfc9dbd80"),e("11e994014f9ea4ef"),e("d3d2c1ecea6b651e"),e("2942bfa075e0734"),e("d33b293dd98ee251"),e("4d67970b1d16e278"),e("ea23a5ff87e419a"),e("a4ec7d06d49f6770"),e("68de4d9a4e90a51d"),e("91a33ef14a8f152c"),e("55178304aaa34b5d"),e("100585ac292d4d0a"),e("11bb9bd5ef85c385"),e("6985fc4c13b8c019"),e("9632a736fdb17734"),e("645f58b86974fd27"),e("679ce5136028bc60"),e("16129f94bb5d1db1"),e("4a20575877b9aa9"),e("f493cf27dec8fda2"),e("9455107212c82097"),e("7abb352823d027e3"),e("23cd38aa92bb5713"),e("7fa171f672c06c5"),e("d6c3f6742b067ddd"),e("687e66ea18227d4f"),e("4be9f7f33ab31972"),e("4b97ceec572fb5ac"),e("6962fb765acff151"),e("1a45d71179cc6824"),e("546ab40a97e46161"),e("b9d67d5f8399a961"),e("4d6a7c1e95ef8439"),e("61fca23ef75aa33f"),e("1c1cdf9b06016701"),e("397bfa6741ea05a1"),e("ec6da7c8737ed287"),e("9a3b23b9904e7580"),e("42c1ca9f44d09740"),e("6c230af164d5e531"),e("a1fd07c504fbd6e2"),e("c5418e31406f900c"),e("6bd1db6cc401cbae"),e("5cc85e0e2e9dc320"),e("e50d5b519a148fce"),e("57eafc4eec0ed5ad"),e("9f4e766b833041e1"),e("51d5ec10d288761f"),e("3df881631b0076c1"),e("6446691a409777d1"),e("65a0e8ac0e64097a"),e("ad09ac1fd0978c3"),e("c80f8d7a3d38c630"),e("c0e2fa2805edb141"),e("52fea7a5cc5e8460"),e("676052465cde8b83"),e("46e3f0ef3febe378"),e("901f94f4ed6ef4d5"),e("2f2afc7fe70ef5f"),e("fa4d7e950018d69e"),e("d0d844c58571e80e"),e("570e34e061eaecd7"),e("557af6dc34fe070e"),e("5dd137372fb5b1ae"),e("812633ee0adaf5e"),e("5be5bf591a25d61c"),e("c98746bc7e199094"),e("52278c0a5be7b19f"),e("fde31c759e8e1c42"),e("5254289c25b91dcf"),e("48ca9e9993ba0327"),e("7981cf076738bed7"),e("2af85dda7402ad4"),e("7c1704ee7f395db2"),e("31b464b3d0584b62"),e("30f0e4525a5de4ed"),e("cea89ed1ef3bc389"),e("72aac35e49a6d4bd"),e("37312397abe6d28c"),e("12be35b2aeed3ca4"),e("647a7c082cca257b"),e("a0e00f30db9559ea"),e("6c3ebd0eef294356"),e("a66668b79822160a"),e("72aa7e00c8a7b68f"),e("b1d489d5f98dd626"),e("687c365e52ca4b5b"),e("eedef7a537267c12"),e("f888c4da93185eae"),e("69fc7ceed4f23a4b"),e("a70b9f7f981f56ed"),e("698834137971c6a0"),e("6cbcff253173613e"),e("2d4e83632877e8a1"),e("1f6030e01de03bb8"),e("9e73dc5e3d85a023"),e("d24e5da7655d31c6"),e("e2c547d0925efa21"),e("9cb64708d269ee4d"),e("bad110743800027a"),t.exports=e("b02006442da3179e")},{"1784995cff40f4ee":"9s3xx","3db84f65815009e9":"iwkeR","18123b426b639506":"5XeCo",eaee9f5716583d73:"1jBmt",e65dab60a793f2f1:"fRVgf","375d8cdc37856052":"7WJcH",b97ac47c987ae87a:"hFyoa",a021542673f3dca5:"gZyon","4917cb57871d338e":"4Ex0c","32b253e39e74d8bb":"lmFPB","389e51d5714f687f":"hTUMG",f5e993e561fd02cd:"iRI65",bb2bc4d4414bdde6:"b2THu",efe695102c445413:"aaynY",ccd56f09b115e545:"ifTQD",fcaf4e6617f043bc:"9nraJ","653d106c82dca6c3":"hpIkk",e3cead5be66b9f0d:"5JJH2","9189e57b3ec04752":"Vqr1m",f0a4c78fa0016f60:"dXX00","1d68ebee0b3f96f0":"4WHG2",af40359e9eb052ec:"dSlcU","736a7d0d20ecf3de":"bdMwq",b57c55c586369faa:"3tTsw","6e929cb8fa33300f":"iYsWa",a021c9c924d06b99:"giWOL",c3a2ae3c387d24da:"ccMio","4b806e1bc40e42a5":"cNy9P","4e1bbb4edd22e0ae":"cIaij","716f90fa84e1f77c":"jy1E5",a4c895062bc52ef:"6lRH6",ab8b1e642f069677:"JZwLb","1c9c9c4583180611":"dOhop",f74bd522ba638140:"5PPXx","161807fa85856503":"6NVU0",f48a3c099ac8e2b5:"2O5oL","8cf2e5f73ade81b4":"cK8Vo",a9422cf3f5275913:"jsVZA",cc95b5c4842b3cba:"57Hkq",d5f0f9adde262121:"23mFl",c2de5cf351f42e3e:"aF8mt","9b044f9dbdd9a543":"a3waX","2c6c7828d3cbd4f7":"aR2WG",e4df5de4d418cbbb:"ffioB","914cd91ef0bfb6f9":"dhWyf","6f128d6969e825b2":"gMszS",f4ead5d4eb2af5d5:"7xAE1",b35e2d13cb589276:"4alw4",c410e1b69fdd7adf:"4BlrJ","312dd5f9138d6e43":"8KJg9","38530968f16263a0":"iMMMY","14af908df009beac":"fOORm",dcd91f07678eb4c9:"jrmgr",c69d702ec59c2500:"hHuad","4725bcb6f24869b3":"j1rbB","3cf52eabf83551bf":"k1odz",c9cbfc3b3c78d70d:"hj3sx","6b0227180c3df38c":"35sOf",e0fd70d02f07a4a0:"kdCBv","31a608e674c817eb":"7sz6w",b880a9dbebb02a2e:"aDXA4","46b1ee4ddc311f0":"3SsIu","8cf2fe9261c818db":"ltMRr","52fba706500b4b2d":"7B9e4",ffbe65a8f5be01e6:"1Q59p",da6de621a6714162:"6xo48","7d69b07dcba2cc9c":"fT2pc",e1e627d3acaf8d18:"3gUSv",f4d9392585892a5b:"ktBUd",b04a1a032c30e8d5:"h7jAY",c1de8697c29b0da:"7w8sx","16d0f8a09ff973a0":"7kYan",a48b7fc982febaf8:"4f0wc",b40fbc8703ed802d:"cO2Tq","71533dcee95bced0":"ksygU","38d8d405ad51cb0c":"l6Va7",c8503c219bf01ed1:"3YoWU",bc082cafa79546ad:"d56Rg","1160727e54f1c4b":"5qPnB","204a0882af55ce2b":"fkNB3",a3152d34d8dd7b45:"1EHpC","873b1b5c61bcd33":"cjF3u","16d6ef4f50e3e6e9":"cJV8l",e872f08087c6cb33:"gF2mq","657cbbcd48650779":"aDf5D","9568aecd38672862":"dmsaK","983d78ddb66e0131":"1dKWm","4252d65d3677af5a":"f6zvs","281c6fd1d9df7324":"bqitu",c31154b4d54b87f:"JN4nd","610034140e218c33":"55Dww","1bc59f7bc4d02b94":"bSgM7","1ac49ff73550904e":"9ABTM","8fd22c15c1dc3fdb":"2LC5t","722244e22d484cd4":"6IHeL",d7ec35bad14a1f3f:"99lnS","9bb45158b3bb60e5":"juGo6",dbfda47097dcdc05:"eFG91","62df99a6374ea8e7":"bj6bx","3e175a332296c2fc":"91yPx","6746b54eee03ffd":"1ldob","95f6415683b99fd7":"hkjqJ","30f5c44d5b0c5882":"94iNS",fa34aad1a54cb74f:"jHAZR","6e7dfd5f426811ae":"lUPBQ",f6587d23159bb2e:"bJ6WD",bb688511262fa331:"kFQMi","4ba8f97c77fe72fb":"ebVA2",d400d9af20e5e158:"eBwxe","89eb5ddf4e423e14":"gAfBI",cfeb658fb1129c7d:"iEhEr",cf52518d7e23221c:"50f80","593d4e7884fc0918":"75MTU","30b35f30b6dba51d":"k3eLb","44d90bd66a2bbd56":"5r7iL","24519596b23105e8":"3LKfQ","69b53c2db51c07c6":"6060h",cd51cbb6a384e947:"fQiw6",b2bec95e117c35ff:"j0e4t",e02033538de8d8c6:"d84QY",bb0f24f71db75179:"aZ18e","7334e4338273fd72":"7dDM8","95aa2ad5425c09f6":"3Z6yZ",a00519108abb0534:"bW7fw","2835a3239b6a1bc4":"aYVCx",f5faf41ae9cf1c5:"dz0qt","5e6fa649046f5df2":"4oge7","84775698f8fef6c0":"8lXek","8c2455e35e11d959":"3dXNg","1cee7874e0ff2b2b":"bGW1a","6d098447a1b2abdc":"8w9zW","7d7d81ff5b818a49":"kku8e",c33461c993e8e491:"czLcQ","64a89b8cfcf7ab12":"hHVfV","300ca7e5c4ba71de":"5mkzp","5ea06ea856112f5d":"g1fVe","2f95ea182a42efc3":"8rHD3","7e00e0c0121e6a90":"19Jfv","43c70c31a61cc402":"jXSo7","7f64762e2c0d0f2e":"8l0BH","7a6c9bba2845dabe":"j7OhH","73d9d26ef5a08f08":"it2Oj",f671014547fe0e5e:"hcPY5",b36c3c3b6e78e925:"eVkoj",a7f5dbf9fb623d0a:"gTKyh","465fceaf1bde589b":"aoQeD","7766539bc795a94":"bacM3","4faee6716fa8629d":"dNyHW","7737fbcafb7ce523":"e34FJ",e90b0a3a493c0ede:"3O3Aj","26317a793dea7e9a":"8Etlb","9f5e020a3549a118":"c69k7","9d0bfe01231db1a7":"ghMRy",b1221eae0bc5f9b:"9zHwr",c5352c47687ac7c:"k77Bz","34fe45ae8ed17da0":"iRrGN","781c619e0cad12e2":"7yczT","7c6b58bad8dc3b81":"gvyo6","736ca46bafb50f8f":"ivizZ","4a8b2b3ca7e4d0f0":"fwluw","3fd33a4a9e23fb29":"4g6h4","88ad2704384a1a6e":"8E3gz","1c6c6da898bf18bb":"kUUzE",d239d0cd4a8ca65b:"f22XF","11eae3d8cd132ecd":"1qlmj","31d0c33ce951164f":"8XahL","55fc79bd0e9015ff":"LALKA","4c7f59100f9f15df":"3ojXI","45eab59e8e26538d":"hbZfg","46220f971d58285":"fZF9a","37e3f8df977640b7":"7iNgk","4449d13eae7996a8":"45os2","197d7cc5dd2340b0":"2WfRA","1ec03223143b45c0":"lOYCT",b3160300f21af751:"8IRHP","96c40097a27a339d":"hNcUL","113487f8ddcf0c0c":"cvTmF",d7643c1b9d7a0617:"02XNU",efbae5e5ed53d7a4:"bd47m","78d707d60e5ff2ef":"aYO1A","6aa1c963ba0fa26a":"4gITF","29093847653ffb17":"8XfJ4",b0554b151edd2f4:"hBrFk",c5299b37711c29ed:"htnHQ","334e6eea450261d0":"5hrAe","12c4df9fff4b4031":"gRtxl","9121fee042bcac7e":"f9sXD","5d62685ef5ad6e57":"dxwO3","3e4b4c735ca60ab9":"4JzUR",bb7017f5a1be1e59:"1Ddgn",e8e708482f11c7ff:"4Nk8B","74095422c65e093c":"gDsyq","6d6ea5c3920f0ba9":"kSPV7",a9480ffca9552742:"4r9Ga","3447041b04906440":"8mUm1","90c4a005313bad84":"iLM0f","4769b7aec07e6de3":"g8RAw","925b64021990cd94":"cM7XZ","6b93322692746037":"ay24n",faa76facff418618:"dsM1G",c9933e8bbe42bd93:"3S9v6","8689abb82cc2e305":"cyXl9","2b087e045ed8c999":"bZHsA","5345958572918685":"jdVdD","3be5275c466b41f8":"aHhSf","8aac76b9f2cbbdb5":"8CDDy",be9c14095a58943:"8bCzz","43202def26bf6f4d":"eCrTm","2d80f533903ef8af":"jsxS0","218de58a047e4122":"8gdBH",e9c3dc5d87196314:"lLxBl",e941f90445a42817:"kdCuo","5ec6c25f739e2e3":"aDOV8",dcf33a0bfc9dbd80:"bYfUN","11e994014f9ea4ef":"asjuk",d3d2c1ecea6b651e:"7Ztdp","2942bfa075e0734":"iTfU2",d33b293dd98ee251:"2rwi6","4d67970b1d16e278":"3RHVC",ea23a5ff87e419a:"lIq1m",a4ec7d06d49f6770:"c39Zx","68de4d9a4e90a51d":"fLhnG","91a33ef14a8f152c":"4PvQ4","55178304aaa34b5d":"9FCzx","100585ac292d4d0a":"8CVDf","11bb9bd5ef85c385":"f94m6","6985fc4c13b8c019":"gyQ5g","9632a736fdb17734":"35eyA","645f58b86974fd27":"lAd52","679ce5136028bc60":"gm3Ac","16129f94bb5d1db1":"6U5ka","4a20575877b9aa9":"9Oy3b",f493cf27dec8fda2:"hKRLi","9455107212c82097":"4dt59","7abb352823d027e3":"fhkH0","23cd38aa92bb5713":"ir9oO","7fa171f672c06c5":"dKi3D",d6c3f6742b067ddd:"ghUr7","687e66ea18227d4f":"hz1m5","4be9f7f33ab31972":"g6z7G","4b97ceec572fb5ac":"64o02","6962fb765acff151":"fucTA","1a45d71179cc6824":"a3meA","546ab40a97e46161":"5o000",b9d67d5f8399a961:"5xmnF","4d6a7c1e95ef8439":"hBGXl","61fca23ef75aa33f":"iqVLF","1c1cdf9b06016701":"jvoCj","397bfa6741ea05a1":"lyvq7",ec6da7c8737ed287:"9L4aP","9a3b23b9904e7580":"boEcL","42c1ca9f44d09740":"hKdE1","6c230af164d5e531":"bVeLM",a1fd07c504fbd6e2:"1tEuC",c5418e31406f900c:"j5D2s","6bd1db6cc401cbae":"bCmiv","5cc85e0e2e9dc320":"3K06C",e50d5b519a148fce:"e83dQ","57eafc4eec0ed5ad":"giBYv","9f4e766b833041e1":"c98Se","51d5ec10d288761f":"lWfxh","3df881631b0076c1":"1MLi3","6446691a409777d1":"gzM9H","65a0e8ac0e64097a":"jM2fb",ad09ac1fd0978c3:"dyqx7",c80f8d7a3d38c630:"ivnSQ",c0e2fa2805edb141:"kW4B8","52fea7a5cc5e8460":"781fg","676052465cde8b83":"8eoRT","46e3f0ef3febe378":"g6waC","901f94f4ed6ef4d5":"85ox0","2f2afc7fe70ef5f":"lCjaL",fa4d7e950018d69e:"2VrRi",d0d844c58571e80e:"2Aepe","570e34e061eaecd7":"dedNk","557af6dc34fe070e":"g6kQb","5dd137372fb5b1ae":"fKO9L","812633ee0adaf5e":"aD2tC","5be5bf591a25d61c":"dw62W",c98746bc7e199094:"bLia5","52278c0a5be7b19f":"2773R",fde31c759e8e1c42:"hlU21","5254289c25b91dcf":"if7Z2","48ca9e9993ba0327":"6WCjW","7981cf076738bed7":"kvPB5","2af85dda7402ad4":"ee5SN","7c1704ee7f395db2":"fh0FN","31b464b3d0584b62":"7PJs9","30f0e4525a5de4ed":"eIJhJ",cea89ed1ef3bc389:"5w1XH","72aac35e49a6d4bd":"hHRFV","37312397abe6d28c":"e1XD1","12be35b2aeed3ca4":"7TMTo","647a7c082cca257b":"eIy4h",a0e00f30db9559ea:"bM30L","6c3ebd0eef294356":"IWcld",a66668b79822160a:"8WBxe","72aa7e00c8a7b68f":"e6jVu",b1d489d5f98dd626:"gXYN4","687c365e52ca4b5b":"dzmPI",eedef7a537267c12:"an3zb",f888c4da93185eae:"8bxeS","69fc7ceed4f23a4b":"31pHR",a70b9f7f981f56ed:"bezSF","698834137971c6a0":"a80Su","6cbcff253173613e":"9ZF8O","2d4e83632877e8a1":"iWBfV","1f6030e01de03bb8":"e3ULL","9e73dc5e3d85a023":"aaFAV",d24e5da7655d31c6:"73jhE",e2c547d0925efa21:"5RKmG","9cb64708d269ee4d":"eahs4",bad110743800027a:"g0WVc",b02006442da3179e:"cytiq"}],"9s3xx":[function(e,t,i,r){e("9907e25c4a0aca96"),e("6ca7b218a3c5142b"),e("733763f50161f4ff"),e("c7e8ec39e8a501c2"),e("c7f11a8d456724")},{"9907e25c4a0aca96":"SkeHi","6ca7b218a3c5142b":"cDG3h","733763f50161f4ff":"eSm4f",c7e8ec39e8a501c2:"94iNS",c7f11a8d456724:"934uv"}],SkeHi:[function(e,t,i,r){var n=e("aa5b0a4df7071e1c"),s=e("8c408afdfdfd6dab"),a=e("ec29447784c0114a"),o=e("2ae82c68e0ae40f"),h=e("33b2452838c11281"),c=e("fe806d898b4ac536"),l=e("22d83c4d1a79086a"),d=e("4d2b1c3a38702ef3"),u=e("e759feb93fde3dec"),f=e("5787c74359c86565"),p=e("cb32a2177bbbabaa"),g=e("20c01e2a38c99bca"),m=e("db20fe52e48e74e7"),v=e("62c50d67351dd58a"),y=e("22cebb6457d12409"),b=e("31dc62cd3a5d2fda"),x=e("14509c82c4f3e2e9"),E=e("e62ee144604e88fa"),T=e("d7fe574b8ddea4e9"),A=e("fc2b88a87581c564"),w=e("7260979738a18766"),S=e("c58a10205146713c"),C=e("a86b1c2861165466"),I=e("dfca683f72250bcc"),_=e("55a26bb040d83918"),O=e("97712bd669b06ccf"),P=e("b2130786c0cb0f80"),M=e("aaac558287b5aa94"),R=e("c6ea7d7218c4c1f0"),L=e("f4a251fc6a0ec32a"),D=e("2d3c3a8ae405672f"),k=e("a99e55c559023f8b"),N=e("baa63ea979fa51ca"),F=e("ecef47c4fbdd606b"),B=e("f57a8c7fd7d84ffb"),U=e("37236ad9fe95a3e"),G=e("c50230ad6eef7275").forEach,V=M("hidden"),Y="Symbol",j="prototype",W=U.set,z=U.getterFor(Y),H=Object[j],X=s.Symbol,q=X&&X[j],K=s.RangeError,J=s.TypeError,Q=s.QObject,$=w.f,Z=S.f,ee=T.f,et=I.f,ei=o([].push),er=P("symbols"),en=P("op-symbols"),es=P("wks"),ea=!Q||!Q[j]||!Q[j].findChild,eo=function(e,t,i){var r=$(H,t);r&&delete H[t],Z(e,t,i),r&&e!==H&&Z(H,t,r)},eh=c&&d(function(){return 7!==b(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a})?eo:Z,ec=function(e,t){var i=er[e]=b(q);return W(i,{type:Y,tag:e,description:t}),c||(i.description=t),i},el=function(e,t,i){e===H&&el(en,t,i),p(e);var r=m(t);return(p(i),u(er,r))?(i.enumerable?(u(e,V)&&e[V][r]&&(e[V][r]=!1),i=b(i,{enumerable:y(0,!1)})):(u(e,V)||Z(e,V,y(1,b(null))),e[V][r]=!0),eh(e,r,i)):Z(e,r,i)},ed=function(e,t){p(e);var i=g(t);return G(x(i).concat(eg(i)),function(t){(!c||a(eu,i,t))&&el(e,t,i[t])}),e},eu=function(e){var t=m(e),i=a(et,this,t);return(!(this===H&&u(er,t))||!!u(en,t))&&(!(i||!u(this,t)||!u(er,t)||u(this,V)&&this[V][t])||i)},ef=function(e,t){var i=g(e),r=m(t);if(!(i===H&&u(er,r))||u(en,r)){var n=$(i,r);return n&&u(er,r)&&!(u(i,V)&&i[V][r])&&(n.enumerable=!0),n}},ep=function(e){var t=ee(g(e)),i=[];return G(t,function(e){u(er,e)||u(R,e)||ei(i,e)}),i},eg=function(e){var t=e===H,i=ee(t?en:g(e)),r=[];return G(i,function(e){u(er,e)&&(!t||u(H,e))&&ei(r,er[e])}),r};!l&&(_(q=(X=function(){if(f(q,this))throw new J("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=L(e),i=function(e){var r=void 0===this?s:this;r===H&&a(i,en,e),u(r,V)&&u(r[V],t)&&(r[V][t]=!1);var n=y(1,e);try{eh(r,t,n)}catch(e){if(!(e instanceof K))throw e;eo(r,t,n)}};return c&&ea&&eh(H,t,{configurable:!0,set:i}),ec(t,e)})[j],"toString",function(){return z(this).tag}),_(X,"withoutSetter",function(e){return ec(L(e),e)}),I.f=eu,S.f=el,C.f=ed,w.f=ef,E.f=T.f=ep,A.f=eg,k.f=function(e){return ec(D(e),e)},c&&(O(q,"description",{configurable:!0,get:function(){return z(this).description}}),h||_(H,"propertyIsEnumerable",eu,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:X}),G(x(es),function(e){N(e)}),n({target:Y,stat:!0,forced:!l},{useSetter:function(){ea=!0},useSimple:function(){ea=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(e,t){return void 0===t?b(e):ed(b(e),t)},defineProperty:el,defineProperties:ed,getOwnPropertyDescriptor:ef}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ep}),F(),B(X,Y),R[V]=!0},{aa5b0a4df7071e1c:"b7GrG","8c408afdfdfd6dab":"5ygRS",ec29447784c0114a:"kiToe","2ae82c68e0ae40f":"cfIox","33b2452838c11281":"lssMj",fe806d898b4ac536:"dqiQp","22d83c4d1a79086a":"cWqkU","4d2b1c3a38702ef3":"45J7X",e759feb93fde3dec:"45yko","5787c74359c86565":"3Igu8",cb32a2177bbbabaa:"5dGJN","20c01e2a38c99bca":"cVp2Q",db20fe52e48e74e7:"2y7C0","62c50d67351dd58a":"2QNq8","22cebb6457d12409":"enYsZ","31dc62cd3a5d2fda":"gg5Dl","14509c82c4f3e2e9":"ajJNK",e62ee144604e88fa:"e91mZ",d7fe574b8ddea4e9:"8Yp8E",fc2b88a87581c564:"9WKax","7260979738a18766":"lYlYP",c58a10205146713c:"34YKB",a86b1c2861165466:"QEHTu",dfca683f72250bcc:"ayF8n","55a26bb040d83918":"2UU83","97712bd669b06ccf":"l5KAt",b2130786c0cb0f80:"7Karo",aaac558287b5aa94:"jImqO",c6ea7d7218c4c1f0:"jWdGP",f4a251fc6a0ec32a:"8wvVb","2d3c3a8ae405672f":"eG9HO",a99e55c559023f8b:"4Hj2H",baa63ea979fa51ca:"gyJ1o",ecef47c4fbdd606b:"4FIC8",f57a8c7fd7d84ffb:"ksXqH","37236ad9fe95a3e":"fuP4a",c50230ad6eef7275:"bmbdL"}],b7GrG:[function(e,t,i,r){var n=e("23dea28abc8414d1"),s=e("2ec751f39e500b85").f,a=e("b4567636b28a3b3a"),o=e("50460aa43dd4048a"),h=e("581238c99f8c2c30"),c=e("566a383894c688bc"),l=e("f0e2e697f04e8ad9");t.exports=function(e,t){var i,r,d,u,f,p=e.target,g=e.global,m=e.stat;if(i=g?n:m?n[p]||h(p,{}):n[p]&&n[p].prototype)for(r in t){if(u=t[r],d=e.dontCallGetSet?(f=s(i,r))&&f.value:i[r],!l(g?r:p+(m?".":"#")+r,e.forced)&&void 0!==d){if(typeof u==typeof d)continue;c(u,d)}(e.sham||d&&d.sham)&&a(u,"sham",!0),o(i,r,u,e)}}},{"23dea28abc8414d1":"5ygRS","2ec751f39e500b85":"lYlYP",b4567636b28a3b3a:"mcZBn","50460aa43dd4048a":"2UU83","581238c99f8c2c30":"ld7K4","566a383894c688bc":"2DlL2",f0e2e697f04e8ad9:"c9nTu"}],"5ygRS":[function(e,t,i,r){var n=arguments[3],s=function(e){return e&&e.Math===Math&&e};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof n&&n)||s("object"==typeof this&&this)||function(){return this}()||Function("return this")()},{}],lYlYP:[function(e,t,i,r){var n=e("c04e6fb248689dba"),s=e("553ec943aa2a4554"),a=e("bbc5e69071aa2fbd"),o=e("1d2ffbfd99e01f41"),h=e("c4ea69a78a643d87"),c=e("8ab18ff766aa2ab9"),l=e("3761c5d34b7aa48f"),d=e("c4dfcc26308f1b4a"),u=Object.getOwnPropertyDescriptor;i.f=n?u:function(e,t){if(e=h(e),t=c(t),d)try{return u(e,t)}catch(e){}if(l(e,t))return o(!s(a.f,e,t),e[t])}},{c04e6fb248689dba:"dqiQp","553ec943aa2a4554":"kiToe",bbc5e69071aa2fbd:"ayF8n","1d2ffbfd99e01f41":"enYsZ",c4ea69a78a643d87:"cVp2Q","8ab18ff766aa2ab9":"2y7C0","3761c5d34b7aa48f":"45yko",c4dfcc26308f1b4a:"1zzZy"}],dqiQp:[function(e,t,i,r){t.exports=!e("735b783268fd06c0")(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"735b783268fd06c0":"45J7X"}],"45J7X":[function(e,t,i,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],kiToe:[function(e,t,i,r){var n=e("44e025d030d66023"),s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},{"44e025d030d66023":"sTOmG"}],sTOmG:[function(e,t,i,r){t.exports=!e("2642aa7619056f20")(function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},{"2642aa7619056f20":"45J7X"}],ayF8n:[function(e,t,i,r){var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor;i.f=s&&!n.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:n},{}],enYsZ:[function(e,t,i,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],cVp2Q:[function(e,t,i,r){var n=e("9d8f8f50ac9468eb"),s=e("f7224aed72953ac4");t.exports=function(e){return n(s(e))}},{"9d8f8f50ac9468eb":"a89ET",f7224aed72953ac4:"1ZNa0"}],a89ET:[function(e,t,i,r){var n=e("7ba7e65983d7b662"),s=e("df551e12a7c872dd"),a=e("1d34ea813cebff9c"),o=Object,h=n("".split);t.exports=s(function(){return!o("z").propertyIsEnumerable(0)})?function(e){return"String"===a(e)?h(e,""):o(e)}:o},{"7ba7e65983d7b662":"cfIox",df551e12a7c872dd:"45J7X","1d34ea813cebff9c":"aQekt"}],cfIox:[function(e,t,i,r){var n=e("829dd7a4e960cf9e"),s=Function.prototype,a=s.call,o=n&&s.bind.bind(a,a);t.exports=n?o:function(e){return function(){return a.apply(e,arguments)}}},{"829dd7a4e960cf9e":"sTOmG"}],aQekt:[function(e,t,i,r){var n=e("1c71c3f6daac476c"),s=n({}.toString),a=n("".slice);t.exports=function(e){return a(s(e),8,-1)}},{"1c71c3f6daac476c":"cfIox"}],"1ZNa0":[function(e,t,i,r){var n=e("74607922ed30019f"),s=TypeError;t.exports=function(e){if(n(e))throw new s("Can't call method on "+e);return e}},{"74607922ed30019f":"9RtqE"}],"9RtqE":[function(e,t,i,r){t.exports=function(e){return null==e}},{}],"2y7C0":[function(e,t,i,r){var n=e("53a3a67ac381c4e8"),s=e("b992ca9cdcf7937b");t.exports=function(e){var t=n(e,"string");return s(t)?t:t+""}},{"53a3a67ac381c4e8":"5Zs4D",b992ca9cdcf7937b:"izbIT"}],"5Zs4D":[function(e,t,i,r){var n=e("70235907dc93b4b0"),s=e("46fb53dace408c8e"),a=e("677bdc4d74d2f983"),o=e("80395bcde336a28b"),h=e("49552a7324952190"),c=e("aea01c71276624bf"),l=TypeError,d=c("toPrimitive");t.exports=function(e,t){if(!s(e)||a(e))return e;var i,r=o(e,d);if(r){if(void 0===t&&(t="default"),!s(i=n(r,e,t))||a(i))return i;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),h(e,t)}},{"70235907dc93b4b0":"kiToe","46fb53dace408c8e":"adFpz","677bdc4d74d2f983":"izbIT","80395bcde336a28b":"7cH9N","49552a7324952190":"lcudK",aea01c71276624bf:"eG9HO"}],adFpz:[function(e,t,i,r){var n=e("f87cee1cb79cbcca");t.exports=function(e){return"object"==typeof e?null!==e:n(e)}},{f87cee1cb79cbcca:"2Pprm"}],"2Pprm":[function(e,t,i,r){var n="object"==typeof document&&document.all;t.exports=void 0===n&&void 0!==n?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}},{}],izbIT:[function(e,t,i,r){var n=e("6b6c481cdfb7df35"),s=e("2af44fcbdbf14c83"),a=e("76e903e830c40e7c"),o=e("7e2fe930b3598e22"),h=Object;t.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return s(t)&&a(t.prototype,h(e))}},{"6b6c481cdfb7df35":"2MF6I","2af44fcbdbf14c83":"2Pprm","76e903e830c40e7c":"3Igu8","7e2fe930b3598e22":"bmKR1"}],"2MF6I":[function(e,t,i,r){var n=e("e057fc33d60763c1"),s=e("f1d62079325906cb");t.exports=function(e,t){var i;return arguments.length<2?s(i=n[e])?i:void 0:n[e]&&n[e][t]}},{e057fc33d60763c1:"5ygRS",f1d62079325906cb:"2Pprm"}],"3Igu8":[function(e,t,i,r){t.exports=e("83f14842ef67e16a")({}.isPrototypeOf)},{"83f14842ef67e16a":"cfIox"}],bmKR1:[function(e,t,i,r){t.exports=e("da4a972af0214ea0")&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{da4a972af0214ea0:"cWqkU"}],cWqkU:[function(e,t,i,r){var n=e("53b951dfb9de4d22"),s=e("b37df495bcdc1d99"),a=e("e5929e9affd2affc").String;t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},{"53b951dfb9de4d22":"jarVK",b37df495bcdc1d99:"45J7X",e5929e9affd2affc:"5ygRS"}],jarVK:[function(e,t,i,r){var n,s,a=e("d049c1c2aa0eee5b"),o=e("4eb5796bbafe334d"),h=a.process,c=a.Deno,l=h&&h.versions||c&&c.version,d=l&&l.v8;d&&(s=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(s=+n[1]),t.exports=s},{d049c1c2aa0eee5b:"5ygRS","4eb5796bbafe334d":"cXzrn"}],cXzrn:[function(e,t,i,r){var n=e("888bcb4c75dc4ad").navigator,s=n&&n.userAgent;t.exports=s?String(s):""},{"888bcb4c75dc4ad":"5ygRS"}],"7cH9N":[function(e,t,i,r){var n=e("bbfed17b24e215f4"),s=e("492a86e2970f6a26");t.exports=function(e,t){var i=e[t];return s(i)?void 0:n(i)}},{bbfed17b24e215f4:"3m7Aa","492a86e2970f6a26":"9RtqE"}],"3m7Aa":[function(e,t,i,r){var n=e("4094667126ecac05"),s=e("fce2a7573db493fa"),a=TypeError;t.exports=function(e){if(n(e))return e;throw new a(s(e)+" is not a function")}},{"4094667126ecac05":"2Pprm",fce2a7573db493fa:"dr0ui"}],dr0ui:[function(e,t,i,r){var n=String;t.exports=function(e){try{return n(e)}catch(e){return"Object"}}},{}],lcudK:[function(e,t,i,r){var n=e("abe9ca006f56626e"),s=e("c96b3a89fec6248a"),a=e("551615fda0214f1b"),o=TypeError;t.exports=function(e,t){var i,r;if("string"===t&&s(i=e.toString)&&!a(r=n(i,e))||s(i=e.valueOf)&&!a(r=n(i,e))||"string"!==t&&s(i=e.toString)&&!a(r=n(i,e)))return r;throw new o("Can't convert object to primitive value")}},{abe9ca006f56626e:"kiToe",c96b3a89fec6248a:"2Pprm","551615fda0214f1b":"adFpz"}],eG9HO:[function(e,t,i,r){var n=e("ad5ef4474219c101"),s=e("6a2cda01df6b4c79"),a=e("dccc28ffa5beeb54"),o=e("48d6af1225853d44"),h=e("9f762329148684"),c=e("1ce268781e409df2"),l=n.Symbol,d=s("wks"),u=c?l.for||l:l&&l.withoutSetter||o;t.exports=function(e){return a(d,e)||(d[e]=h&&a(l,e)?l[e]:u("Symbol."+e)),d[e]}},{ad5ef4474219c101:"5ygRS","6a2cda01df6b4c79":"7Karo",dccc28ffa5beeb54:"45yko","48d6af1225853d44":"8wvVb","9f762329148684":"cWqkU","1ce268781e409df2":"bmKR1"}],"7Karo":[function(e,t,i,r){var n=e("84eeed9891aafe14");t.exports=function(e,t){return n[e]||(n[e]=t||{})}},{"84eeed9891aafe14":"8EvDv"}],"8EvDv":[function(e,t,i,r){var n=e("7b43004672b1879f"),s=e("bc8329e77dc2c1cc"),a=e("dfb72a1d809f7b02"),o="__core-js_shared__",h=t.exports=s[o]||a(o,{});(h.versions||(h.versions=[])).push({version:"3.47.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"7b43004672b1879f":"lssMj",bc8329e77dc2c1cc:"5ygRS",dfb72a1d809f7b02:"ld7K4"}],lssMj:[function(e,t,i,r){t.exports=!1},{}],ld7K4:[function(e,t,i,r){var n=e("2d1c29655635b9ea"),s=Object.defineProperty;t.exports=function(e,t){try{s(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},{"2d1c29655635b9ea":"5ygRS"}],"45yko":[function(e,t,i,r){var n=e("f5dcaa60a713971f"),s=e("ab17c4f45fcf0841"),a=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return a(s(e),t)}},{f5dcaa60a713971f:"cfIox",ab17c4f45fcf0841:"eHl90"}],eHl90:[function(e,t,i,r){var n=e("f45a7b5dcdc4a410"),s=Object;t.exports=function(e){return s(n(e))}},{f45a7b5dcdc4a410:"1ZNa0"}],"8wvVb":[function(e,t,i,r){var n=e("5da0fe4507da20a3"),s=0,a=Math.random(),o=n(1.1.toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+a,36)}},{"5da0fe4507da20a3":"cfIox"}],"1zzZy":[function(e,t,i,r){var n=e("9b4278b13c076bf"),s=e("8aee5d88a5f9b6b5"),a=e("1db4d60148afcf21");t.exports=!n&&!s(function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},{"9b4278b13c076bf":"dqiQp","8aee5d88a5f9b6b5":"45J7X","1db4d60148afcf21":"6Up9x"}],"6Up9x":[function(e,t,i,r){var n=e("845bcece0e6d354"),s=e("824df78b2e007250"),a=n.document,o=s(a)&&s(a.createElement);t.exports=function(e){return o?a.createElement(e):{}}},{"845bcece0e6d354":"5ygRS","824df78b2e007250":"adFpz"}],mcZBn:[function(e,t,i,r){var n=e("a8753383ef98ee18"),s=e("189ab650b8f71085"),a=e("1168c8162aa30435");t.exports=n?function(e,t,i){return s.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},{a8753383ef98ee18:"dqiQp","189ab650b8f71085":"34YKB","1168c8162aa30435":"enYsZ"}],"34YKB":[function(e,t,i,r){var n=e("ca50eb9163928400"),s=e("d482f9e5478795e8"),a=e("b6ad7537efb06f4b"),o=e("16365a73399e7fe7"),h=e("fab1d366c47796d9"),c=TypeError,l=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",f="configurable",p="writable";i.f=n?a?function(e,t,i){if(o(e),t=h(t),o(i),"function"==typeof e&&"prototype"===t&&"value"in i&&p in i&&!i[p]){var r=d(e,t);r&&r[p]&&(e[t]=i.value,i={configurable:f in i?i[f]:r[f],enumerable:u in i?i[u]:r[u],writable:!1})}return l(e,t,i)}:l:function(e,t,i){if(o(e),t=h(t),o(i),s)try{return l(e,t,i)}catch(e){}if("get"in i||"set"in i)throw new c("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},{ca50eb9163928400:"dqiQp",d482f9e5478795e8:"1zzZy",b6ad7537efb06f4b:"aOVWx","16365a73399e7fe7":"5dGJN",fab1d366c47796d9:"2y7C0"}],aOVWx:[function(e,t,i,r){var n=e("b22a5a2de93e3ad2"),s=e("249a5b857c2dfccd");t.exports=n&&s(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},{b22a5a2de93e3ad2:"dqiQp","249a5b857c2dfccd":"45J7X"}],"5dGJN":[function(e,t,i,r){var n=e("2b6c6258a0a6082f"),s=String,a=TypeError;t.exports=function(e){if(n(e))return e;throw new a(s(e)+" is not an object")}},{"2b6c6258a0a6082f":"adFpz"}],"2UU83":[function(e,t,i,r){var n=e("99ee13632b3fa68"),s=e("9ebb3e3004fccc0a"),a=e("f10cc812a3094053"),o=e("d354802d852d9c2b");t.exports=function(e,t,i,r){r||(r={});var h=r.enumerable,c=void 0!==r.name?r.name:t;if(n(i)&&a(i,c,r),r.global)h?e[t]=i:o(t,i);else{try{r.unsafe?e[t]&&(h=!0):delete e[t]}catch(e){}h?e[t]=i:s.f(e,t,{value:i,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}},{"99ee13632b3fa68":"2Pprm","9ebb3e3004fccc0a":"34YKB",f10cc812a3094053:"jn6p6",d354802d852d9c2b:"ld7K4"}],jn6p6:[function(e,t,i,r){var n=e("ca84677f1ebd1804"),s=e("13360f2842eba261"),a=e("103e488c0928755a"),o=e("cbf9b0e0779cc368"),h=e("3f2eb7efeae2f72b"),c=e("548b10f284264c72").CONFIGURABLE,l=e("358f00f3103bd55b"),d=e("9b2ce14119fd2412"),u=d.enforce,f=d.get,p=String,g=Object.defineProperty,m=n("".slice),v=n("".replace),y=n([].join),b=h&&!s(function(){return 8!==g(function(){},"length",{value:8}).length}),x=String(String).split("String"),E=t.exports=function(e,t,i){"Symbol("===m(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!o(e,"name")||c&&e.name!==t)&&(h?g(e,"name",{value:t,configurable:!0}):e.name=t),b&&i&&o(i,"arity")&&e.length!==i.arity&&g(e,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?h&&g(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=u(e);return o(r,"source")||(r.source=y(x,"string"==typeof t?t:"")),e};Function.prototype.toString=E(function(){return a(this)&&f(this).source||l(this)},"toString")},{ca84677f1ebd1804:"cfIox","13360f2842eba261":"45J7X","103e488c0928755a":"2Pprm",cbf9b0e0779cc368:"45yko","3f2eb7efeae2f72b":"dqiQp","548b10f284264c72":"dGPBk","358f00f3103bd55b":"6EwKy","9b2ce14119fd2412":"fuP4a"}],dGPBk:[function(e,t,i,r){var n=e("8ad2bacb0e20b95c"),s=e("4eabfd8f83afc9d5"),a=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,h=s(a,"name"),c=h&&(!n||n&&o(a,"name").configurable);t.exports={EXISTS:h,PROPER:h&&"something"===(function(){}).name,CONFIGURABLE:c}},{"8ad2bacb0e20b95c":"dqiQp","4eabfd8f83afc9d5":"45yko"}],"6EwKy":[function(e,t,i,r){var n=e("26e26db98367212e"),s=e("40ed9a4f6ae66648"),a=e("485d48d6f4c6739e"),o=n(Function.toString);s(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),t.exports=a.inspectSource},{"26e26db98367212e":"cfIox","40ed9a4f6ae66648":"2Pprm","485d48d6f4c6739e":"8EvDv"}],fuP4a:[function(e,t,i,r){var n,s,a,o=e("d3f0c9f3327b2fd6"),h=e("28c3574d0c39fe7e"),c=e("f82e6cc0ac249fa5"),l=e("c0ae163eea4ef97"),d=e("6dea7358344877bb"),u=e("3e035a1241da2f0"),f=e("88d6ccc27e779e5a"),p=e("d40b9b3abdbb956e"),g="Object already initialized",m=h.TypeError,v=h.WeakMap;if(o||u.state){var y=u.state||(u.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,n=function(e,t){if(y.has(e))throw new m(g);return t.facade=e,y.set(e,t),t},s=function(e){return y.get(e)||{}},a=function(e){return y.has(e)}}else{var b=f("state");p[b]=!0,n=function(e,t){if(d(e,b))throw new m(g);return t.facade=e,l(e,b,t),t},s=function(e){return d(e,b)?e[b]:{}},a=function(e){return d(e,b)}}t.exports={set:n,get:s,has:a,enforce:function(e){return a(e)?s(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!c(t)||(i=s(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return i}}}},{d3f0c9f3327b2fd6:"bYNMK","28c3574d0c39fe7e":"5ygRS",f82e6cc0ac249fa5:"adFpz",c0ae163eea4ef97:"mcZBn","6dea7358344877bb":"45yko","3e035a1241da2f0":"8EvDv","88d6ccc27e779e5a":"jImqO",d40b9b3abdbb956e:"jWdGP"}],bYNMK:[function(e,t,i,r){var n=e("8b1a8c1dbfd18eb5"),s=e("aa77fff8d5ef0565"),a=n.WeakMap;t.exports=s(a)&&/native code/.test(String(a))},{"8b1a8c1dbfd18eb5":"5ygRS",aa77fff8d5ef0565:"2Pprm"}],jImqO:[function(e,t,i,r){var n=e("dbc8182adeb8c92f"),s=e("90b4ffb58508a6e5"),a=n("keys");t.exports=function(e){return a[e]||(a[e]=s(e))}},{dbc8182adeb8c92f:"7Karo","90b4ffb58508a6e5":"8wvVb"}],jWdGP:[function(e,t,i,r){t.exports={}},{}],"2DlL2":[function(e,t,i,r){var n=e("d91d786cc71453ce"),s=e("88cb809f98beddc6"),a=e("10ea642aad5f7c21"),o=e("39ff598ce822187e");t.exports=function(e,t,i){for(var r=s(t),h=o.f,c=a.f,l=0;l<r.length;l++){var d=r[l];n(e,d)||i&&n(i,d)||h(e,d,c(t,d))}}},{d91d786cc71453ce:"45yko","88cb809f98beddc6":"i9P3q","10ea642aad5f7c21":"lYlYP","39ff598ce822187e":"34YKB"}],i9P3q:[function(e,t,i,r){var n=e("3cc1e4329d869e34"),s=e("2b8e77cbdbe3db7a"),a=e("d703bcb62fcda216"),o=e("157674bad2772c6d"),h=e("a09e060b9cae3c6c"),c=s([].concat);t.exports=n("Reflect","ownKeys")||function(e){var t=a.f(h(e)),i=o.f;return i?c(t,i(e)):t}},{"3cc1e4329d869e34":"2MF6I","2b8e77cbdbe3db7a":"cfIox",d703bcb62fcda216:"e91mZ","157674bad2772c6d":"9WKax",a09e060b9cae3c6c:"5dGJN"}],e91mZ:[function(e,t,i,r){var n=e("6d8591e17a49376c"),s=e("2c933f93dd98f385").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},{"6d8591e17a49376c":"gSWUp","2c933f93dd98f385":"ibuKF"}],gSWUp:[function(e,t,i,r){var n=e("363ee0e6bb4f46a7"),s=e("3183fe0b0bf6f6ac"),a=e("28192ac12e934672"),o=e("a5f9c5d8e993ccd6").indexOf,h=e("57775908f1581bc6"),c=n([].push);t.exports=function(e,t){var i,r=a(e),n=0,l=[];for(i in r)!s(h,i)&&s(r,i)&&c(l,i);for(;t.length>n;)s(r,i=t[n++])&&(~o(l,i)||c(l,i));return l}},{"363ee0e6bb4f46a7":"cfIox","3183fe0b0bf6f6ac":"45yko","28192ac12e934672":"cVp2Q",a5f9c5d8e993ccd6:"8UbLy","57775908f1581bc6":"jWdGP"}],"8UbLy":[function(e,t,i,r){var n=e("d5dcbcd68ac5acd0"),s=e("212b13aecfa48226"),a=e("e5a8b3e1da4c5637"),o=function(e){return function(t,i,r){var o,h=n(t),c=a(h);if(0===c)return!e&&-1;var l=s(r,c);if(e&&i!=i){for(;c>l;)if((o=h[l++])!=o)return!0}else for(;c>l;l++)if((e||l in h)&&h[l]===i)return e||l||0;return!e&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},{d5dcbcd68ac5acd0:"cVp2Q","212b13aecfa48226":"65oaN",e5a8b3e1da4c5637:"fuf58"}],"65oaN":[function(e,t,i,r){var n=e("72fe0a53ad43912c"),s=Math.max,a=Math.min;t.exports=function(e,t){var i=n(e);return i<0?s(i+t,0):a(i,t)}},{"72fe0a53ad43912c":"lOYVA"}],lOYVA:[function(e,t,i,r){var n=e("3403cba02b5f61d8");t.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},{"3403cba02b5f61d8":"lMqnZ"}],lMqnZ:[function(e,t,i,r){var n=Math.ceil,s=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?s:n)(t)}},{}],fuf58:[function(e,t,i,r){var n=e("23d9716c54a2ab90");t.exports=function(e){return n(e.length)}},{"23d9716c54a2ab90":"5nsMT"}],"5nsMT":[function(e,t,i,r){var n=e("c48d3a8b8ac52b0b"),s=Math.min;t.exports=function(e){var t=n(e);return t>0?s(t,0x1fffffffffffff):0}},{c48d3a8b8ac52b0b:"lOYVA"}],ibuKF:[function(e,t,i,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],"9WKax":[function(e,t,i,r){i.f=Object.getOwnPropertySymbols},{}],c9nTu:[function(e,t,i,r){var n=e("10299561ea0c7870"),s=e("8b1ecdaf59f07210"),a=/#|\.prototype\./,o=function(e,t){var i=c[h(e)];return i===d||i!==l&&(s(t)?n(t):!!t)},h=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",d=o.POLYFILL="P";t.exports=o},{"10299561ea0c7870":"45J7X","8b1ecdaf59f07210":"2Pprm"}],"2QNq8":[function(e,t,i,r){var n=e("3e4265f3f6994add"),s=String;t.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},{"3e4265f3f6994add":"bAgVp"}],bAgVp:[function(e,t,i,r){var n=e("397e535b3976d304"),s=e("eebd8012c2d2c3ae"),a=e("8da113eeaf06c4ba"),o=e("df252844008f634")("toStringTag"),h=Object,c="Arguments"===a(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(e){}};t.exports=n?a:function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=l(t=h(e),o))?i:c?a(t):"Object"===(r=a(t))&&s(t.callee)?"Arguments":r}},{"397e535b3976d304":"gMxt3",eebd8012c2d2c3ae:"2Pprm","8da113eeaf06c4ba":"aQekt",df252844008f634:"eG9HO"}],gMxt3:[function(e,t,i,r){var n=e("6306cd4835715127")("toStringTag"),s={};s[n]="z",t.exports="[object z]"===String(s)},{"6306cd4835715127":"eG9HO"}],gg5Dl:[function(e,t,i,r){var n,s=e("3bbe31d8f504111f"),a=e("a9712f03fc468b49"),o=e("d9e0c389f84efa79"),h=e("8a43b6a211717cde"),c=e("78d31e3a50d79c6e"),l=e("e29f7e32a0583f3"),d=e("a6edaba97f293fc9"),u="prototype",f="script",p=d("IE_PROTO"),g=function(){},m=function(e){return"<"+f+">"+e+"</"+f+">"},v=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe");return t.style.display="none",c.appendChild(t),t.src=String("java"+f+":"),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F},b=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}b="u">typeof document?document.domain&&n?v(n):y():v(n);for(var e=o.length;e--;)delete b[u][o[e]];return b()};h[p]=!0,t.exports=Object.create||function(e,t){var i;return null!==e?(g[u]=s(e),i=new g,g[u]=null,i[p]=e):i=b(),void 0===t?i:a.f(i,t)}},{"3bbe31d8f504111f":"5dGJN",a9712f03fc468b49:"QEHTu",d9e0c389f84efa79:"ibuKF","8a43b6a211717cde":"jWdGP","78d31e3a50d79c6e":"9BU2I",e29f7e32a0583f3:"6Up9x",a6edaba97f293fc9:"jImqO"}],QEHTu:[function(e,t,i,r){var n=e("aa39c539d0a1ec3f"),s=e("2e9118dcee7eb93e"),a=e("d88f5f00164c2da2"),o=e("12ac356c5e06e57d"),h=e("3cbdc44082c2f8b8"),c=e("634da70e74fce29b");i.f=n&&!s?Object.defineProperties:function(e,t){o(e);for(var i,r=h(t),n=c(t),s=n.length,l=0;s>l;)a.f(e,i=n[l++],r[i]);return e}},{aa39c539d0a1ec3f:"dqiQp","2e9118dcee7eb93e":"aOVWx",d88f5f00164c2da2:"34YKB","12ac356c5e06e57d":"5dGJN","3cbdc44082c2f8b8":"cVp2Q","634da70e74fce29b":"ajJNK"}],ajJNK:[function(e,t,i,r){var n=e("fb982c683f43ec98"),s=e("7cabc30df1982d48");t.exports=Object.keys||function(e){return n(e,s)}},{fb982c683f43ec98:"gSWUp","7cabc30df1982d48":"ibuKF"}],"9BU2I":[function(e,t,i,r){t.exports=e("14cb391fa4a0dda8")("document","documentElement")},{"14cb391fa4a0dda8":"2MF6I"}],"8Yp8E":[function(e,t,i,r){var n=e("279dbc8649868a7a"),s=e("430d7ab8977dd85e"),a=e("a5a6278a4291e239").f,o=e("a0e199be640bf61f"),h="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return a(e)}catch(e){return o(h)}};t.exports.f=function(e){return h&&"Window"===n(e)?c(e):a(s(e))}},{"279dbc8649868a7a":"aQekt","430d7ab8977dd85e":"cVp2Q",a5a6278a4291e239:"e91mZ",a0e199be640bf61f:"lUArJ"}],lUArJ:[function(e,t,i,r){t.exports=e("5250b5c9324ccbe")([].slice)},{"5250b5c9324ccbe":"cfIox"}],l5KAt:[function(e,t,i,r){var n=e("5bd1cd8472955124"),s=e("1413185c6323bbbc");t.exports=function(e,t,i){return i.get&&n(i.get,t,{getter:!0}),i.set&&n(i.set,t,{setter:!0}),s.f(e,t,i)}},{"5bd1cd8472955124":"jn6p6","1413185c6323bbbc":"34YKB"}],"4Hj2H":[function(e,t,i,r){i.f=e("2e34ececd06658d9")},{"2e34ececd06658d9":"eG9HO"}],gyJ1o:[function(e,t,i,r){var n=e("8d5159b7d317832f"),s=e("42a3ea18819bfbb"),a=e("7ec639749e279eeb"),o=e("cbbe4becefd5c21c").f;t.exports=function(e){var t=n.Symbol||(n.Symbol={});s(t,e)||o(t,e,{value:a.f(e)})}},{"8d5159b7d317832f":"cytiq","42a3ea18819bfbb":"45yko","7ec639749e279eeb":"4Hj2H",cbbe4becefd5c21c:"34YKB"}],cytiq:[function(e,t,i,r){t.exports=e("34c09090b9638032")},{"34c09090b9638032":"5ygRS"}],"4FIC8":[function(e,t,i,r){var n=e("b56ca5a55bb4c0e1"),s=e("f5359b167e9be384"),a=e("e7eef3415c62682d"),o=e("8cc59229c8e85f40");t.exports=function(){var e=s("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,r=a("toPrimitive");t&&!t[r]&&o(t,r,function(e){return n(i,this)},{arity:1})}},{b56ca5a55bb4c0e1:"kiToe",f5359b167e9be384:"2MF6I",e7eef3415c62682d:"eG9HO","8cc59229c8e85f40":"2UU83"}],ksXqH:[function(e,t,i,r){var n=e("93a3d85da48077c").f,s=e("2ebf7179e87d878f"),a=e("5b1eb5d1639e9eb7")("toStringTag");t.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!s(e,a)&&n(e,a,{configurable:!0,value:t})}},{"93a3d85da48077c":"34YKB","2ebf7179e87d878f":"45yko","5b1eb5d1639e9eb7":"eG9HO"}],bmbdL:[function(e,t,i,r){var n=e("13e0747865316a42"),s=e("99224cc18a4a792e"),a=e("57aaeabd9d30911"),o=e("3acffc809f3b03fb"),h=e("1fc4c4e55871562c"),c=e("76c922b575fbf7bd"),l=s([].push),d=function(e){var t=1===e,i=2===e,r=3===e,s=4===e,d=6===e,u=7===e,f=5===e||d;return function(p,g,m,v){for(var y,b,x=o(p),E=a(x),T=h(E),A=n(g,m),w=0,S=v||c,C=t?S(p,T):i||u?S(p,0):void 0;T>w;w++)if((f||w in E)&&(b=A(y=E[w],w,x),e))if(t)C[w]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return w;case 2:l(C,y)}else switch(e){case 4:return!1;case 7:l(C,y)}return d?-1:r||s?s:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},{"13e0747865316a42":"gWc3u","99224cc18a4a792e":"cfIox","57aaeabd9d30911":"a89ET","3acffc809f3b03fb":"eHl90","1fc4c4e55871562c":"fuf58","76c922b575fbf7bd":"8T16N"}],gWc3u:[function(e,t,i,r){var n=e("92f6f475baa85665"),s=e("547ee4f9dab0cc76"),a=e("5acd31cba656d393"),o=n(n.bind);t.exports=function(e,t){return s(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},{"92f6f475baa85665":"dAU5H","547ee4f9dab0cc76":"3m7Aa","5acd31cba656d393":"sTOmG"}],dAU5H:[function(e,t,i,r){var n=e("8e77093015e1e67f"),s=e("9daa4dbbca634c9e");t.exports=function(e){if("Function"===n(e))return s(e)}},{"8e77093015e1e67f":"aQekt","9daa4dbbca634c9e":"cfIox"}],"8T16N":[function(e,t,i,r){var n=e("4580767bbbe40f0b");t.exports=function(e,t){return new(n(e))(0===t?0:t)}},{"4580767bbbe40f0b":"gWt5w"}],gWt5w:[function(e,t,i,r){var n=e("a9e5b9af57e551f6"),s=e("2b4d84c184e08f4f"),a=e("f4bec83e8d6008c9"),o=e("4a13cf47b259a825")("species"),h=Array;t.exports=function(e){var t;return n(e)&&(s(t=e.constructor)&&(t===h||n(t.prototype))?t=void 0:a(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?h:t}},{a9e5b9af57e551f6:"8hZ2S","2b4d84c184e08f4f":"7c2zg",f4bec83e8d6008c9:"adFpz","4a13cf47b259a825":"eG9HO"}],"8hZ2S":[function(e,t,i,r){var n=e("ccb261b2d73a4fca");t.exports=Array.isArray||function(e){return"Array"===n(e)}},{ccb261b2d73a4fca:"aQekt"}],"7c2zg":[function(e,t,i,r){var n=e("3b3e7fa8cfe4b3ac"),s=e("84df2127d2d40501"),a=e("ae35eceee587c4bc"),o=e("7bd40df22601ee7e"),h=e("271ff92378cbc486"),c=e("74840ba4357c1c30"),l=function(){},d=h("Reflect","construct"),u=/^\s*(?:class|function)\b/,f=n(u.exec),p=!u.test(l),g=function(e){if(!a(e))return!1;try{return d(l,[],e),!0}catch(e){return!1}},m=function(e){if(!a(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(u,c(e))}catch(e){return!0}};m.sham=!0,t.exports=!d||s(function(){var e;return g(g.call)||!g(Object)||!g(function(){e=!0})||e})?m:g},{"3b3e7fa8cfe4b3ac":"cfIox","84df2127d2d40501":"45J7X",ae35eceee587c4bc:"2Pprm","7bd40df22601ee7e":"bAgVp","271ff92378cbc486":"2MF6I","74840ba4357c1c30":"6EwKy"}],cDG3h:[function(e,t,i,r){var n=e("5bb0291a1de27cc2"),s=e("8e0d0366f8700097"),a=e("1d19a51e347c2d9e"),o=e("eab6cb58642f38b1"),h=e("41937bc543544e22"),c=e("8877198f0deded1d"),l=h("string-to-symbol-registry"),d=h("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=o(e);if(a(l,t))return l[t];var i=s("Symbol")(t);return l[t]=i,d[i]=t,i}})},{"5bb0291a1de27cc2":"b7GrG","8e0d0366f8700097":"2MF6I","1d19a51e347c2d9e":"45yko",eab6cb58642f38b1:"2QNq8","41937bc543544e22":"7Karo","8877198f0deded1d":"9oZJw"}],"9oZJw":[function(e,t,i,r){t.exports=e("a735884940a2eb73")&&!!Symbol.for&&!!Symbol.keyFor},{a735884940a2eb73:"cWqkU"}],eSm4f:[function(e,t,i,r){var n=e("8dbad7485118eaf8"),s=e("9fce8a9af4b186a4"),a=e("4e16fd56c67f82fb"),o=e("59b7b3dea7d1b71d"),h=e("77b2ea800463b7d6"),c=e("ca42326fb3cb6e68"),l=h("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!a(e))throw TypeError(o(e)+" is not a symbol");if(s(l,e))return l[e]}})},{"8dbad7485118eaf8":"b7GrG","9fce8a9af4b186a4":"45yko","4e16fd56c67f82fb":"izbIT","59b7b3dea7d1b71d":"dr0ui","77b2ea800463b7d6":"7Karo",ca42326fb3cb6e68:"9oZJw"}],"94iNS":[function(e,t,i,r){var n=e("c758539029f56af9"),s=e("cd08b356bcae0b47"),a=e("2f13fa715711850"),o=e("4cfb95fb9a0e28fc"),h=e("50b40a77c21daf7f"),c=e("56cf5d4bc1afd666"),l=e("851a2bb5c7360645"),d=e("42bed86e3e73f3d2"),u=e("f2f0a112793af3b9"),f=e("bca8b9ce5f71243b"),p=e("b0d81bb9ea308c9"),g=e("9b9a326e5c96de72"),m=e("1bb05f05134df4c2"),v=e("65353c73815d3eed"),y=e("6db5d6f0eddbd197"),b=e("d8156a48adf3010b"),x=e("8906b0c482dc2ffd"),E=String,T=s("JSON","stringify"),A=h(/./.exec),w=h("".charAt),S=h("".charCodeAt),C=h("".replace),I=h("".slice),_=h([].push),O=h(1.1.toString),P=/[\uD800-\uDFFF]/g,M=/^[\uD800-\uDBFF]$/,R=/^[\uDC00-\uDFFF]$/,L=y(),D=L.length,k=!b||c(function(){var e=s("Symbol")("stringify detection");return"[null]"!==T([e])||"{}"!==T({a:e})||"{}"!==T(Object(e))}),N=c(function(){return'"\\udf06\\ud834"'!==T("\uDF06\uD834")||'"\\udead"'!==T("\uDEAD")}),F=k?function(e,t){var i=m(arguments),r=U(t);if(!(!d(r)&&(void 0===e||f(e))))return i[1]=function(e,t){if(d(r)&&(t=o(r,this,E(e),t)),!f(t))return t},a(T,null,i)}:T,B=function(e,t,i){var r=w(i,t-1),n=w(i,t+1);return A(M,e)&&!A(R,n)||A(R,e)&&!A(M,r)?"\\u"+O(S(e,0),16):e},U=function(e){if(d(e))return e;if(l(e)){for(var t=e.length,i=[],r=0;r<t;r++){var n=e[r];"string"==typeof n?_(i,n):("number"==typeof n||"Number"===p(n)||"String"===p(n))&&_(i,g(n))}var s=i.length,a=!0;return function(e,t){if(a)return a=!1,t;if(l(this))return t;for(var r=0;r<s;r++)if(i[r]===e)return t}}};T&&n({target:"JSON",stat:!0,arity:3,forced:k||N||!x},{stringify:function(e,t,i){var r=U(t),n=[],s=F(e,function(e,t){var i=d(r)?o(r,this,E(e),t):t;return!x&&u(i)?L+(_(n,i.rawJSON)-1):i},i);if("string"!=typeof s||(N&&(s=C(s,P,B)),x))return s;for(var a="",h=s.length,c=0;c<h;c++){var l=w(s,c);if('"'===l){var f=v(s,++c).end-1,p=I(s,c,f);a+=I(p,0,D)===L?n[I(p,D)]:'"'+p+'"',c=f}else a+=l}return a}})},{c758539029f56af9:"b7GrG",cd08b356bcae0b47:"2MF6I","2f13fa715711850":"72fZp","4cfb95fb9a0e28fc":"kiToe","50b40a77c21daf7f":"cfIox","56cf5d4bc1afd666":"45J7X","851a2bb5c7360645":"8hZ2S","42bed86e3e73f3d2":"2Pprm",f2f0a112793af3b9:"doZuh",bca8b9ce5f71243b:"izbIT",b0d81bb9ea308c9:"aQekt","9b9a326e5c96de72":"2QNq8","1bb05f05134df4c2":"lUArJ","65353c73815d3eed":"b9SUN","6db5d6f0eddbd197":"8wvVb",d8156a48adf3010b:"cWqkU","8906b0c482dc2ffd":"4rGDr"}],"72fZp":[function(e,t,i,r){var n=e("d07466971ded2aca"),s=Function.prototype,a=s.apply,o=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(a):function(){return o.apply(a,arguments)})},{d07466971ded2aca:"sTOmG"}],doZuh:[function(e,t,i,r){var n=e("2101d41f05e4ae7b"),s=e("6c5cfba9be867c70").get;t.exports=function(e){if(!n(e))return!1;var t=s(e);return!!t&&"RawJSON"===t.type}},{"2101d41f05e4ae7b":"adFpz","6c5cfba9be867c70":"fuP4a"}],b9SUN:[function(e,t,i,r){var n=e("6552e38511e9d752"),s=e("8bb4bbfae92870fb"),a=SyntaxError,o=parseInt,h=String.fromCharCode,c=n("".charAt),l=n("".slice),d=n(/./.exec),u={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	"},f=/^[\da-f]{4}$/i,p=/^[\u0000-\u001F]$/;t.exports=function(e,t){for(var i=!0,r="";t<e.length;){var n=c(e,t);if("\\"===n){var g=l(e,t,t+2);if(s(u,g))r+=u[g],t+=2;else if("\\u"===g){var m=l(e,t+=2,t+4);if(!d(f,m))throw new a("Bad Unicode escape at: "+t);r+=h(o(m,16)),t+=4}else throw new a('Unknown escape sequence: "'+g+'"')}else if('"'===n){i=!1,t++;break}else{if(d(p,n))throw new a("Bad control character in string literal at: "+t);r+=n,t++}}if(i)throw new a("Unterminated string at: "+t);return{value:r,end:t}}},{"6552e38511e9d752":"cfIox","8bb4bbfae92870fb":"45yko"}],"4rGDr":[function(e,t,i,r){t.exports=!e("7035e25c4f08a786")(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})},{"7035e25c4f08a786":"45J7X"}],"934uv":[function(e,t,i,r){var n=e("840946d70e8a2143"),s=e("ab5e4f7a7726b049"),a=e("dbf1e55f293c4447"),o=e("52dfb60ffa243118"),h=e("7dd92ded8a0ad49a");n({target:"Object",stat:!0,forced:!s||a(function(){o.f(1)})},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(h(e)):[]}})},{"840946d70e8a2143":"b7GrG",ab5e4f7a7726b049:"cWqkU",dbf1e55f293c4447:"45J7X","52dfb60ffa243118":"9WKax","7dd92ded8a0ad49a":"eHl90"}],iwkeR:[function(e,t,i,r){var n=e("97b172d75b2d24d2"),s=e("f4d7d8fd842c0756"),a=e("5eee5f2c9436b192"),o=e("3168cbf7cd0b9882"),h=e("a16d92d5b8266639"),c=e("c20ab10c7fc8df3c"),l=e("f1577de30367373a"),d=e("a801f47d1f3aec6"),u=e("4040e115390d9ece"),f=e("76bfc13417714c00"),p=a.Symbol,g=p&&p.prototype;if(s&&c(p)&&(!("description"in g)||void 0!==p().description)){var m={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=l(g,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};f(v,p),v.prototype=g,g.constructor=v;var y="Symbol(description detection)"===String(p("description detection")),b=o(g.valueOf),x=o(g.toString),E=/^Symbol\((.*)\)[^)]+$/,T=o("".replace),A=o("".slice);u(g,"description",{configurable:!0,get:function(){var e=b(this);if(h(m,e))return"";var t=x(e),i=y?A(t,7,-1):T(t,E,"$1");return""===i?void 0:i}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},{"97b172d75b2d24d2":"b7GrG",f4d7d8fd842c0756:"dqiQp","5eee5f2c9436b192":"5ygRS","3168cbf7cd0b9882":"cfIox",a16d92d5b8266639:"45yko",c20ab10c7fc8df3c:"2Pprm",f1577de30367373a:"3Igu8",a801f47d1f3aec6:"2QNq8","4040e115390d9ece":"l5KAt","76bfc13417714c00":"2DlL2"}],"5XeCo":[function(e,t,i,r){var n=e("41a7a3191d858319"),s=e("fc97fedaeda8a578"),a=e("7e884c7192385a82").f,o=e("77cc243a575e5d96").f,h=n.Symbol;if(s("asyncDispose"),h){var c=o(h,"asyncDispose");c.enumerable&&c.configurable&&c.writable&&a(h,"asyncDispose",{value:c.value,enumerable:!1,configurable:!1,writable:!1})}},{"41a7a3191d858319":"5ygRS",fc97fedaeda8a578:"gyJ1o","7e884c7192385a82":"34YKB","77cc243a575e5d96":"lYlYP"}],"1jBmt":[function(e,t,i,r){e("2d360c40368e9a3")("asyncIterator")},{"2d360c40368e9a3":"gyJ1o"}],fRVgf:[function(e,t,i,r){var n=e("add364a3528fced5"),s=e("37803d7d6a462653"),a=e("85c8c6cafea43f5e").f,o=e("fd14df1ab8806f1a").f,h=n.Symbol;if(s("dispose"),h){var c=o(h,"dispose");c.enumerable&&c.configurable&&c.writable&&a(h,"dispose",{value:c.value,enumerable:!1,configurable:!1,writable:!1})}},{add364a3528fced5:"5ygRS","37803d7d6a462653":"gyJ1o","85c8c6cafea43f5e":"34YKB",fd14df1ab8806f1a:"lYlYP"}],"7WJcH":[function(e,t,i,r){e("81bebfae66866813")("hasInstance")},{"81bebfae66866813":"gyJ1o"}],hFyoa:[function(e,t,i,r){e("ccf6a8a73e56cd3a")("isConcatSpreadable")},{ccf6a8a73e56cd3a:"gyJ1o"}],gZyon:[function(e,t,i,r){e("1c415af53b28a6ea")("iterator")},{"1c415af53b28a6ea":"gyJ1o"}],"4Ex0c":[function(e,t,i,r){e("d4aa350c591898c3")("match")},{d4aa350c591898c3:"gyJ1o"}],lmFPB:[function(e,t,i,r){e("8f030c55b2f81e57")("matchAll")},{"8f030c55b2f81e57":"gyJ1o"}],hTUMG:[function(e,t,i,r){e("120ed8f933c050ae")("replace")},{"120ed8f933c050ae":"gyJ1o"}],iRI65:[function(e,t,i,r){e("e61fe26d945e7ea9")("search")},{e61fe26d945e7ea9:"gyJ1o"}],b2THu:[function(e,t,i,r){e("9202fdf8a23f6674")("species")},{"9202fdf8a23f6674":"gyJ1o"}],aaynY:[function(e,t,i,r){e("75b48d0f3b5ea4e1")("split")},{"75b48d0f3b5ea4e1":"gyJ1o"}],ifTQD:[function(e,t,i,r){var n=e("66e19094d20833e6"),s=e("24c2fb6481a71c59");n("toPrimitive"),s()},{"66e19094d20833e6":"gyJ1o","24c2fb6481a71c59":"4FIC8"}],"9nraJ":[function(e,t,i,r){var n=e("79fc56cab59273aa"),s=e("f48b67430238cd9f"),a=e("94b18c3989610f3b");s("toStringTag"),a(n("Symbol"),"Symbol")},{"79fc56cab59273aa":"2MF6I",f48b67430238cd9f:"gyJ1o","94b18c3989610f3b":"ksXqH"}],hpIkk:[function(e,t,i,r){e("37a7f6188e0dd54c")("unscopables")},{"37a7f6188e0dd54c":"gyJ1o"}],"5JJH2":[function(e,t,i,r){var n=e("c0a4dac4d644e47f"),s=e("b489e7fad8c9deb0"),a=e("3d203ffd073cb1e2"),o=e("1e58971abde3215a"),h="WebAssembly",c=s[h],l=7!==Error("e",{cause:7}).cause,d=function(e,t){var i={};i[e]=o(e,t,l),n({global:!0,constructor:!0,arity:1,forced:l},i)},u=function(e,t){if(c&&c[e]){var i={};i[e]=o(h+"."+e,t,l),n({target:h,stat:!0,constructor:!0,arity:1,forced:l},i)}};d("Error",function(e){return function(t){return a(e,this,arguments)}}),d("EvalError",function(e){return function(t){return a(e,this,arguments)}}),d("RangeError",function(e){return function(t){return a(e,this,arguments)}}),d("ReferenceError",function(e){return function(t){return a(e,this,arguments)}}),d("SyntaxError",function(e){return function(t){return a(e,this,arguments)}}),d("TypeError",function(e){return function(t){return a(e,this,arguments)}}),d("URIError",function(e){return function(t){return a(e,this,arguments)}}),u("CompileError",function(e){return function(t){return a(e,this,arguments)}}),u("LinkError",function(e){return function(t){return a(e,this,arguments)}}),u("RuntimeError",function(e){return function(t){return a(e,this,arguments)}})},{c0a4dac4d644e47f:"b7GrG",b489e7fad8c9deb0:"5ygRS","3d203ffd073cb1e2":"72fZp","1e58971abde3215a":"hQ0Fg"}],hQ0Fg:[function(e,t,i,r){var n=e("a06eacb797618572"),s=e("665a8da8d6942429"),a=e("1eafe025967456f7"),o=e("56a7065490020014"),h=e("4950e85505e95dbc"),c=e("6c7bc1a190dc31c1"),l=e("84e57d08170f4fac"),d=e("a85bdac1120897b"),u=e("efb60f912a162fda"),f=e("30c8c4978beb6a3c"),p=e("f4c1a33f96dc17e0"),g=e("9afe587c962877da"),m=e("74e210db508a9809");t.exports=function(e,t,i,r){var v="stackTraceLimit",y=r?2:1,b=e.split("."),x=b[b.length-1],E=n.apply(null,b);if(E){var T=E.prototype;if(!m&&s(T,"cause")&&delete T.cause,!i)return E;var A=n("Error"),w=t(function(e,t){var i=u(r?t:e,void 0),n=r?new E(e):new E;return void 0!==i&&a(n,"message",i),p(n,w,n.stack,2),this&&o(T,this)&&d(n,this,w),arguments.length>y&&f(n,arguments[y]),n});if(w.prototype=T,"Error"!==x?h?h(w,A):c(w,A,{name:!0}):g&&v in E&&(l(w,E,v),l(w,E,"prepareStackTrace")),c(w,E),!m)try{T.name!==x&&a(T,"name",x),T.constructor=w}catch(e){}return w}}},{a06eacb797618572:"2MF6I","665a8da8d6942429":"45yko","1eafe025967456f7":"mcZBn","56a7065490020014":"3Igu8","4950e85505e95dbc":"i41Eo","6c7bc1a190dc31c1":"2DlL2","84e57d08170f4fac":"knn4r",a85bdac1120897b:"kzdOP",efb60f912a162fda:"2jDro","30c8c4978beb6a3c":"cX4gZ",f4c1a33f96dc17e0:"gob6L","9afe587c962877da":"dqiQp","74e210db508a9809":"lssMj"}],i41Eo:[function(e,t,i,r){var n=e("995a94425a563d6"),s=e("caa27fe2635f1f44"),a=e("a751660a0fcdf70"),o=e("6e2c833ee2a62cf6");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.prototype,"__proto__","set"))(i,[]),t=i instanceof Array}catch(e){}return function(i,r){return a(i),o(r),s(i)&&(t?e(i,r):i.__proto__=r),i}}():void 0)},{"995a94425a563d6":"1BKbJ",caa27fe2635f1f44:"adFpz",a751660a0fcdf70:"1ZNa0","6e2c833ee2a62cf6":"a1RWN"}],"1BKbJ":[function(e,t,i,r){var n=e("27a2d181325e1926"),s=e("36b26076b1e2fac1");t.exports=function(e,t,i){try{return n(s(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(e){}}},{"27a2d181325e1926":"cfIox","36b26076b1e2fac1":"3m7Aa"}],a1RWN:[function(e,t,i,r){var n=e("fcc5bbb526d602c6"),s=String,a=TypeError;t.exports=function(e){if(n(e))return e;throw new a("Can't set "+s(e)+" as a prototype")}},{fcc5bbb526d602c6:"15sCU"}],"15sCU":[function(e,t,i,r){var n=e("a504c97d35bacd6c");t.exports=function(e){return n(e)||null===e}},{a504c97d35bacd6c:"adFpz"}],knn4r:[function(e,t,i,r){var n=e("e52fa9ee07db5896").f;t.exports=function(e,t,i){i in e||n(e,i,{configurable:!0,get:function(){return t[i]},set:function(e){t[i]=e}})}},{e52fa9ee07db5896:"34YKB"}],kzdOP:[function(e,t,i,r){var n=e("9f474ed504af79a9"),s=e("bd2a6951ff768696"),a=e("972057e738a2788f");t.exports=function(e,t,i){var r,o;return a&&n(r=t.constructor)&&r!==i&&s(o=r.prototype)&&o!==i.prototype&&a(e,o),e}},{"9f474ed504af79a9":"2Pprm",bd2a6951ff768696:"adFpz","972057e738a2788f":"i41Eo"}],"2jDro":[function(e,t,i,r){var n=e("c9fe0c0d0cc00953");t.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},{c9fe0c0d0cc00953:"2QNq8"}],cX4gZ:[function(e,t,i,r){var n=e("b476c95c984a6a8d"),s=e("3c6bf72ab0382560");t.exports=function(e,t){n(t)&&"cause"in t&&s(e,"cause",t.cause)}},{b476c95c984a6a8d:"adFpz","3c6bf72ab0382560":"mcZBn"}],gob6L:[function(e,t,i,r){var n=e("6a8c56dba61494ec"),s=e("a58d6d3fbc24091c"),a=e("13a68d58956ea123"),o=Error.captureStackTrace;t.exports=function(e,t,i,r){a&&(o?o(e,t):n(e,"stack",s(i,r)))}},{"6a8c56dba61494ec":"mcZBn",a58d6d3fbc24091c:"guIMI","13a68d58956ea123":"2wtir"}],guIMI:[function(e,t,i,r){var n=e("eabcb03034bf2114"),s=Error,a=n("".replace),o=String(new s("zxcasd").stack),h=/\n\s*at [^:]*:[^\n]*/,c=h.test(o);t.exports=function(e,t){if(c&&"string"==typeof e&&!s.prepareStackTrace)for(;t--;)e=a(e,h,"");return e}},{eabcb03034bf2114:"cfIox"}],"2wtir":[function(e,t,i,r){var n=e("89db331f671f42e0"),s=e("df11a3c4166c3491");t.exports=!n(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",s(1,7)),7!==e.stack)})},{"89db331f671f42e0":"45J7X",df11a3c4166c3491:"enYsZ"}],Vqr1m:[function(e,t,i,r){var n=e("f19e15da235f194"),s=e("bd98f53107b23c9e"),a=e("9ee99271249b5205"),o=e("f03e6dc8d1451380"),h=e("c4bfba551fb626dc"),c="Error",l="DOMException",d=Object.setPrototypeOf||({}).__proto__,u=s(l),f=Error,p=f.isError;n({target:"Error",stat:!0,sham:!0,forced:!p||!d||h(function(){return u&&!p(new u(l))||!p(new f(c,{cause:function(){}}))||p(s("Object","create")(f.prototype))})},{isError:function(e){if(!a(e))return!1;var t=o(e);return t===c||t===l}})},{f19e15da235f194:"b7GrG",bd98f53107b23c9e:"2MF6I","9ee99271249b5205":"adFpz",f03e6dc8d1451380:"bAgVp",c4bfba551fb626dc:"45J7X"}],dXX00:[function(e,t,i,r){var n=e("f781bd5f2d18cfa7"),s=e("3eb4aef2f58a6fea"),a=Error.prototype;a.toString!==s&&n(a,"toString",s)},{f781bd5f2d18cfa7:"2UU83","3eb4aef2f58a6fea":"gUZak"}],gUZak:[function(e,t,i,r){var n=e("ea2a4236860a8cd8"),s=e("e3d0938fe2af7a6b"),a=e("10baca5ba543cdd8"),o=e("b4dc1328db6268c"),h=Error.prototype.toString;t.exports=s(function(){if(n){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==h.call(e))return!0}return"2: 1"!==h.call({message:1,name:2})||"Error"!==h.call({})})?function(){var e=a(this),t=o(e.name,"Error"),i=o(e.message);return t?i?t+": "+i:t:i}:h},{ea2a4236860a8cd8:"dqiQp",e3d0938fe2af7a6b:"45J7X","10baca5ba543cdd8":"5dGJN",b4dc1328db6268c:"2jDro"}],"4WHG2":[function(e,t,i,r){e("84cae8994b2a2f5")},{"84cae8994b2a2f5":"1QzWg"}],"1QzWg":[function(e,t,i,r){var n=e("c0cc68e328095af5"),s=e("faa2bddf0ac478ea"),a=e("4413a40f7d436a10"),o=e("6bef4cb0d407baac"),h=e("16d669a6cb07e14c"),c=e("44313d9c6ae01d88"),l=e("fa987207071f401e"),d=e("e46f2df37a9caee7"),u=e("6f34595d479a3d16"),f=e("971d0ec70b5cd696"),p=e("8cb104a68ce09b9a"),g=e("57c5336285df243"),m=e("2e2daca8a25d7233")("toStringTag"),v=Error,y=[].push,b=function(e,t){var i,r=s(x,this);o?i=o(new v,r?a(this):x):l(i=r?this:c(x),m,"Error"),void 0!==t&&l(i,"message",g(t)),f(i,b,i.stack,1),arguments.length>2&&u(i,arguments[2]);var n=[];return p(e,y,{that:n}),l(i,"errors",n),i};o?o(b,v):h(b,v,{name:!0});var x=b.prototype=c(v.prototype,{constructor:d(1,b),message:d(1,""),name:d(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:b})},{c0cc68e328095af5:"b7GrG",faa2bddf0ac478ea:"3Igu8","4413a40f7d436a10":"6P7xV","6bef4cb0d407baac":"i41Eo","16d669a6cb07e14c":"2DlL2","44313d9c6ae01d88":"gg5Dl",fa987207071f401e:"mcZBn",e46f2df37a9caee7:"enYsZ","6f34595d479a3d16":"cX4gZ","971d0ec70b5cd696":"gob6L","8cb104a68ce09b9a":"5ZCpM","57c5336285df243":"2jDro","2e2daca8a25d7233":"eG9HO"}],"6P7xV":[function(e,t,i,r){var n=e("da54a59ea207dd"),s=e("71ab2a7bcc8c8fc8"),a=e("7a3afd2bb40b0292"),o=e("296d7a2db8e23969"),h=e("58de29d5e883862f"),c=o("IE_PROTO"),l=Object,d=l.prototype;t.exports=h?l.getPrototypeOf:function(e){var t=a(e);if(n(t,c))return t[c];var i=t.constructor;return s(i)&&t instanceof i?i.prototype:t instanceof l?d:null}},{da54a59ea207dd:"45yko","71ab2a7bcc8c8fc8":"2Pprm","7a3afd2bb40b0292":"eHl90","296d7a2db8e23969":"jImqO","58de29d5e883862f":"lYEaN"}],lYEaN:[function(e,t,i,r){t.exports=!e("85ffc28af2e8afc1")(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"85ffc28af2e8afc1":"45J7X"}],"5ZCpM":[function(e,t,i,r){var n=e("2f267ed50e670495"),s=e("c0af58bb1ef1cc62"),a=e("7fa6542c03ca9239"),o=e("fa596d1a4c07b72a"),h=e("fd753cc641a6f10a"),c=e("2a15dee148d3db96"),l=e("417f9a13deeb58a6"),d=e("43af53be1b24dae5"),u=e("bf7ad32b21aed0b4"),f=e("5241389e1d6eeb73"),p=TypeError,g=function(e,t){this.stopped=e,this.result=t},m=g.prototype;t.exports=function(e,t,i){var r,v,y,b,x,E,T,A=i&&i.that,w=!!(i&&i.AS_ENTRIES),S=!!(i&&i.IS_RECORD),C=!!(i&&i.IS_ITERATOR),I=!!(i&&i.INTERRUPTED),_=n(t,A),O=function(e){return r&&f(r,"normal"),new g(!0,e)},P=function(e){return w?(a(e),I?_(e[0],e[1],O):_(e[0],e[1])):I?_(e,O):_(e)};if(S)r=e.iterator;else if(C)r=e;else{if(!(v=u(e)))throw new p(o(e)+" is not iterable");if(h(v)){for(y=0,b=c(e);b>y;y++)if((x=P(e[y]))&&l(m,x))return x;return new g(!1)}r=d(e,v)}for(E=S?e.next:r.next;!(T=s(E,r)).done;){try{x=P(T.value)}catch(e){f(r,"throw",e)}if("object"==typeof x&&x&&l(m,x))return x}return new g(!1)}},{"2f267ed50e670495":"gWc3u",c0af58bb1ef1cc62:"kiToe","7fa6542c03ca9239":"5dGJN",fa596d1a4c07b72a:"dr0ui",fd753cc641a6f10a:"8SN6F","2a15dee148d3db96":"fuf58","417f9a13deeb58a6":"3Igu8","43af53be1b24dae5":"7mfF2",bf7ad32b21aed0b4:"2JETE","5241389e1d6eeb73":"4rTZx"}],"8SN6F":[function(e,t,i,r){var n=e("85b004b6ab4bc5da"),s=e("6de391ad2976ca02"),a=n("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||o[a]===e)}},{"85b004b6ab4bc5da":"eG9HO","6de391ad2976ca02":"cvS1X"}],cvS1X:[function(e,t,i,r){t.exports={}},{}],"7mfF2":[function(e,t,i,r){var n=e("132ebf774107ae29"),s=e("e248489b4825ceb7"),a=e("18a343d2ef625577"),o=e("7e576a1564cef99e"),h=e("4a7b0311be0471b2"),c=TypeError;t.exports=function(e,t){var i=arguments.length<2?h(e):t;if(s(i))return a(n(i,e));throw new c(o(e)+" is not iterable")}},{"132ebf774107ae29":"kiToe",e248489b4825ceb7:"3m7Aa","18a343d2ef625577":"5dGJN","7e576a1564cef99e":"dr0ui","4a7b0311be0471b2":"2JETE"}],"2JETE":[function(e,t,i,r){var n=e("32d61dafd81dde78"),s=e("84e24a6ac7559d3a"),a=e("f0707282c0d93eeb"),o=e("1c181d5c49efd5d1"),h=e("d10d0e0ae49498c5")("iterator");t.exports=function(e){if(!a(e))return s(e,h)||s(e,"@@iterator")||o[n(e)]}},{"32d61dafd81dde78":"bAgVp","84e24a6ac7559d3a":"7cH9N",f0707282c0d93eeb:"9RtqE","1c181d5c49efd5d1":"cvS1X",d10d0e0ae49498c5:"eG9HO"}],"4rTZx":[function(e,t,i,r){var n=e("a4a3a7d4a45c4219"),s=e("feb876e7da2df7bd"),a=e("2e660cdfabd9c61f");t.exports=function(e,t,i){var r,o;s(e);try{if(!(r=a(e,"return"))){if("throw"===t)throw i;return i}r=n(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw i;if(o)throw r;return s(r),i}},{a4a3a7d4a45c4219:"kiToe",feb876e7da2df7bd:"5dGJN","2e660cdfabd9c61f":"7cH9N"}],dSlcU:[function(e,t,i,r){var n=e("1051ab5946792444"),s=e("901806552daaa9d1"),a=e("c2da5f9111ec0d0d"),o=e("bbf9283d8426dd54"),h=e("2df6383956d55950"),c="AggregateError",l=s(c),d=!o(function(){return 1!==l([1]).errors[0]})&&o(function(){return 7!==l([1],c,{cause:7}).cause});n({global:!0,constructor:!0,arity:2,forced:d},{AggregateError:h(c,function(e){return function(t,i){return a(e,this,arguments)}},d,!0)})},{"1051ab5946792444":"b7GrG","901806552daaa9d1":"2MF6I",c2da5f9111ec0d0d:"72fZp",bbf9283d8426dd54:"45J7X","2df6383956d55950":"hQ0Fg"}],bdMwq:[function(e,t,i,r){var n=e("bc53fcc1609bc7ec"),s=e("cca7189e2f5cc28a"),a=e("bb695daac57e170a"),o=e("45328a77a577bf30"),h=e("aec96d2c18dcd3eb"),c=e("a31cc6f1a082fc6b"),l=e("edae508da47f3c27"),d=e("8e9b499634a29203"),u=e("60366e53f929c2c4"),f=e("9ed969fef5522541"),p=e("1fb518ac54708dbc"),g=e("b48f8a83d74ac8c4"),m=e("dc0fa33628c7785e"),v=e("1dc43917c41c289d"),y=s.SuppressedError,b=g("toStringTag"),x=Error,E=!!y&&3!==y.length,T=!!y&&m(function(){return 4===new y(1,2,3,{cause:4}).cause}),A=E||T,w=function(e,t,i){var r,n=a(S,this);return h?r=A&&(!n||o(this)===S)?new y:h(new x,n?o(this):S):d(r=n?this:l(S),b,"Error"),void 0!==i&&d(r,"message",p(i)),f(r,w,r.stack,1),d(r,"error",e),d(r,"suppressed",t),r};h?h(w,x):c(w,x,{name:!0});var S=w.prototype=A?y.prototype:l(x.prototype,{constructor:u(1,w),message:u(1,""),name:u(1,"SuppressedError")});A&&!v&&(S.constructor=w),n({global:!0,constructor:!0,arity:3,forced:A},{SuppressedError:w})},{bc53fcc1609bc7ec:"b7GrG",cca7189e2f5cc28a:"5ygRS",bb695daac57e170a:"3Igu8","45328a77a577bf30":"6P7xV",aec96d2c18dcd3eb:"i41Eo",a31cc6f1a082fc6b:"2DlL2",edae508da47f3c27:"gg5Dl","8e9b499634a29203":"mcZBn","60366e53f929c2c4":"enYsZ","9ed969fef5522541":"gob6L","1fb518ac54708dbc":"2jDro",b48f8a83d74ac8c4:"eG9HO",dc0fa33628c7785e:"45J7X","1dc43917c41c289d":"lssMj"}],"3tTsw":[function(e,t,i,r){var n=e("17b6274b31efea6a"),s=e("bd1f09a15df9c54b"),a=e("aeeef420262f9436"),o=e("d3a5a5518b6afdf1"),h=e("a3c99fc0a91390b5");n({target:"Array",proto:!0},{at:function(e){var t=s(this),i=a(t),r=o(e),n=r>=0?r:i+r;return n<0||n>=i?void 0:t[n]}}),h("at")},{"17b6274b31efea6a":"b7GrG",bd1f09a15df9c54b:"eHl90",aeeef420262f9436:"fuf58",d3a5a5518b6afdf1:"lOYVA",a3c99fc0a91390b5:"kNZ2V"}],kNZ2V:[function(e,t,i,r){var n=e("d4032cdcc50314e7"),s=e("3ca2a6909ac2dcef"),a=e("545ab457bf71d338").f,o=n("unscopables"),h=Array.prototype;void 0===h[o]&&a(h,o,{configurable:!0,value:s(null)}),t.exports=function(e){h[o][e]=!0}},{d4032cdcc50314e7:"eG9HO","3ca2a6909ac2dcef":"gg5Dl","545ab457bf71d338":"34YKB"}],iYsWa:[function(e,t,i,r){var n=e("ae9bcc3c886d2e43"),s=e("320b7f8f99977d72"),a=e("c9c4d35908c64a9b"),o=e("e40ffb4fd8cdd6ef"),h=e("600c6b55241cb08d"),c=e("c35064fc908d412e"),l=e("d3e233a6dd5508d7"),d=e("4da7fb5e70719532"),u=e("706ee6e3130d3c44"),f=e("76c3a5d37e98bd2f"),p=e("210a9ec1468bd8f4"),g=e("64448af9c74a3ff5"),m=p("isConcatSpreadable"),v=g>=51||!s(function(){var e=[];return e[m]=!1,e.concat()[0]!==e}),y=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)};n({target:"Array",proto:!0,arity:1,forced:!v||!f("concat")},{concat:function(e){var t,i,r,n,s,a=h(this),o=u(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?a:arguments[t],y(s))for(l(f+(n=c(s))),i=0;i<n;i++,f++)i in s&&d(o,f,s[i]);else l(f+1),d(o,f++,s);return o.length=f,o}})},{ae9bcc3c886d2e43:"b7GrG","320b7f8f99977d72":"45J7X",c9c4d35908c64a9b:"8hZ2S",e40ffb4fd8cdd6ef:"adFpz","600c6b55241cb08d":"eHl90",c35064fc908d412e:"fuf58",d3e233a6dd5508d7:"ldHs0","4da7fb5e70719532":"fb5iK","706ee6e3130d3c44":"8T16N","76c3a5d37e98bd2f":"kPmx3","210a9ec1468bd8f4":"eG9HO","64448af9c74a3ff5":"jarVK"}],ldHs0:[function(e,t,i,r){var n=TypeError;t.exports=function(e){if(e>0x1fffffffffffff)throw n("Maximum allowed index exceeded");return e}},{}],fb5iK:[function(e,t,i,r){var n=e("667a2d5a858194a6"),s=e("2daa2f41b7310fd4"),a=e("7bb9efd811e3f83f");t.exports=function(e,t,i){n?s.f(e,t,a(0,i)):e[t]=i}},{"667a2d5a858194a6":"dqiQp","2daa2f41b7310fd4":"34YKB","7bb9efd811e3f83f":"enYsZ"}],kPmx3:[function(e,t,i,r){var n=e("bbe4de7ca7a1c6be"),s=e("6cb3e4ca309911dc"),a=e("4d1dd9e6baf7a81f"),o=s("species");t.exports=function(e){return a>=51||!n(function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},{bbe4de7ca7a1c6be:"45J7X","6cb3e4ca309911dc":"eG9HO","4d1dd9e6baf7a81f":"jarVK"}],giWOL:[function(e,t,i,r){var n=e("4890937a7e7c636b"),s=e("7256897b95da01b3"),a=e("4c4cc4b0d9ea98ec");n({target:"Array",proto:!0},{copyWithin:s}),a("copyWithin")},{"4890937a7e7c636b":"b7GrG","7256897b95da01b3":"b5uFH","4c4cc4b0d9ea98ec":"kNZ2V"}],b5uFH:[function(e,t,i,r){var n=e("67e19c72f7fbebd0"),s=e("5063d303bf924d87"),a=e("e3d01b6d6197aedd"),o=e("6ffaf2643c0abf62"),h=Math.min;t.exports=[].copyWithin||function(e,t){var i=n(this),r=a(i),c=s(e,r),l=s(t,r),d=arguments.length>2?arguments[2]:void 0,u=h((void 0===d?r:s(d,r))-l,r-c),f=1;for(l<c&&c<l+u&&(f=-1,l+=u-1,c+=u-1);u-- >0;)l in i?i[c]=i[l]:o(i,c),c+=f,l+=f;return i}},{"67e19c72f7fbebd0":"eHl90","5063d303bf924d87":"65oaN",e3d01b6d6197aedd:"fuf58","6ffaf2643c0abf62":"bslid"}],bslid:[function(e,t,i,r){var n=e("49f65044bb4dad7f"),s=TypeError;t.exports=function(e,t){if(!delete e[t])throw new s("Cannot delete property "+n(t)+" of "+n(e))}},{"49f65044bb4dad7f":"dr0ui"}],ccMio:[function(e,t,i,r){var n=e("c1238b63d9c8719e"),s=e("f6644a21f0f5983").every;n({target:"Array",proto:!0,forced:!e("8bc22f42d8ee353c")("every")},{every:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{c1238b63d9c8719e:"b7GrG",f6644a21f0f5983:"bmbdL","8bc22f42d8ee353c":"lK6NN"}],lK6NN:[function(e,t,i,r){var n=e("77f0d106558781f");t.exports=function(e,t){var i=[][e];return!!i&&n(function(){i.call(null,t||function(){return 1},1)})}},{"77f0d106558781f":"45J7X"}],cNy9P:[function(e,t,i,r){var n=e("52cb142d804aabd3"),s=e("daf335b8230cfcc7"),a=e("3e31c661bed82a2d");n({target:"Array",proto:!0},{fill:s}),a("fill")},{"52cb142d804aabd3":"b7GrG",daf335b8230cfcc7:"83otQ","3e31c661bed82a2d":"kNZ2V"}],"83otQ":[function(e,t,i,r){var n=e("45e35cf118865951"),s=e("ae17acf5d72570ed"),a=e("94aaef7256431b15");t.exports=function(e){for(var t=n(this),i=a(t),r=arguments.length,o=s(r>1?arguments[1]:void 0,i),h=r>2?arguments[2]:void 0,c=void 0===h?i:s(h,i);c>o;)t[o++]=e;return t}},{"45e35cf118865951":"eHl90",ae17acf5d72570ed:"65oaN","94aaef7256431b15":"fuf58"}],cIaij:[function(e,t,i,r){var n=e("a465bc55e057d26f"),s=e("fa9926c68c33923f").filter;n({target:"Array",proto:!0,forced:!e("9232c94be2f9c639")("filter")},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{a465bc55e057d26f:"b7GrG",fa9926c68c33923f:"bmbdL","9232c94be2f9c639":"kPmx3"}],jy1E5:[function(e,t,i,r){var n=e("a6cb3a492b52d21c"),s=e("ad97e1511b32e588").find,a=e("62fd950aac3d5249"),o="find",h=!0;o in[]&&[,][o](function(){h=!1}),n({target:"Array",proto:!0,forced:h},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},{a6cb3a492b52d21c:"b7GrG",ad97e1511b32e588:"bmbdL","62fd950aac3d5249":"kNZ2V"}],"6lRH6":[function(e,t,i,r){var n=e("dcce3e96aeb32c26"),s=e("25f2fe0b92321096").findIndex,a=e("1c93cc746ac8ffb1"),o="findIndex",h=!0;o in[]&&[,][o](function(){h=!1}),n({target:"Array",proto:!0,forced:h},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},{dcce3e96aeb32c26:"b7GrG","25f2fe0b92321096":"bmbdL","1c93cc746ac8ffb1":"kNZ2V"}],JZwLb:[function(e,t,i,r){var n=e("7c9570dd28371e00"),s=e("43d20d51fd072b05").findLast,a=e("8c5f13eb9efbfd84");n({target:"Array",proto:!0},{findLast:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("findLast")},{"7c9570dd28371e00":"b7GrG","43d20d51fd072b05":"c8JOf","8c5f13eb9efbfd84":"kNZ2V"}],c8JOf:[function(e,t,i,r){var n=e("c1d87d2297f1acca"),s=e("e5df4a29c897e724"),a=e("42c314ae435e3665"),o=e("a64fff03b4e929f6"),h=function(e){var t=1===e;return function(i,r,h){for(var c,l=a(i),d=s(l),u=o(d),f=n(r,h);u-- >0;)if(f(c=d[u],u,l))switch(e){case 0:return c;case 1:return u}return t?-1:void 0}};t.exports={findLast:h(0),findLastIndex:h(1)}},{c1d87d2297f1acca:"gWc3u",e5df4a29c897e724:"a89ET","42c314ae435e3665":"eHl90",a64fff03b4e929f6:"fuf58"}],dOhop:[function(e,t,i,r){var n=e("bba50227ea399df7"),s=e("c196d65aab15955b").findLastIndex,a=e("5f02d29251865622");n({target:"Array",proto:!0},{findLastIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("findLastIndex")},{bba50227ea399df7:"b7GrG",c196d65aab15955b:"c8JOf","5f02d29251865622":"kNZ2V"}],"5PPXx":[function(e,t,i,r){var n=e("eea83811f9bf5b44"),s=e("d9157408980dcae4"),a=e("1603b1d7d71c6d78"),o=e("95d7017c9e9cedeb"),h=e("9b0770c8bd20c0f9"),c=e("4c36764bcb49234f");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),i=o(t),r=c(t,0);return r.length=s(r,t,t,i,0,void 0===e?1:h(e)),r}})},{eea83811f9bf5b44:"b7GrG",d9157408980dcae4:"eDgnI","1603b1d7d71c6d78":"eHl90","95d7017c9e9cedeb":"fuf58","9b0770c8bd20c0f9":"lOYVA","4c36764bcb49234f":"8T16N"}],eDgnI:[function(e,t,i,r){var n=e("ebb82f00ac94e25c"),s=e("d2ce61b77ec49b3f"),a=e("d3f4210cd620e3d6"),o=e("a7c8b8651480c6c9"),h=function(e,t,i,r,c,l,d,u){for(var f,p,g=c,m=0,v=!!d&&o(d,u);m<r;)m in i&&(f=v?v(i[m],m,t):i[m],l>0&&n(f)?(p=s(f),g=h(e,t,f,p,g,l-1)-1):(a(g+1),e[g]=f),g++),m++;return g};t.exports=h},{ebb82f00ac94e25c:"8hZ2S",d2ce61b77ec49b3f:"fuf58",d3f4210cd620e3d6:"ldHs0",a7c8b8651480c6c9:"gWc3u"}],"6NVU0":[function(e,t,i,r){var n=e("e4ee3b9d2bc1ffb2"),s=e("378c1e23131cdaae"),a=e("74e7f70118e2a778"),o=e("1a2d0561d09775b8"),h=e("f7bbb0ab5ee7446c"),c=e("51d35c0066e59cdb");n({target:"Array",proto:!0},{flatMap:function(e){var t,i=o(this),r=h(i);return a(e),(t=c(i,0)).length=s(t,i,i,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},{e4ee3b9d2bc1ffb2:"b7GrG","378c1e23131cdaae":"eDgnI","74e7f70118e2a778":"3m7Aa","1a2d0561d09775b8":"eHl90",f7bbb0ab5ee7446c:"fuf58","51d35c0066e59cdb":"8T16N"}],"2O5oL":[function(e,t,i,r){var n=e("214b5a111591d046"),s=e("658aa5ae0eee38b0");n({target:"Array",proto:!0,forced:[].forEach!==s},{forEach:s})},{"214b5a111591d046":"b7GrG","658aa5ae0eee38b0":"lTQM4"}],lTQM4:[function(e,t,i,r){var n=e("1a0535b754110eb5").forEach;t.exports=e("df61bc1b7a92de0f")("forEach")?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},{"1a0535b754110eb5":"bmbdL",df61bc1b7a92de0f:"lK6NN"}],cK8Vo:[function(e,t,i,r){var n=e("76f1b3b688a029fa"),s=e("55358907c05b685d");n({target:"Array",stat:!0,forced:!e("98fd99047e51c8be")(function(e){Array.from(e)})},{from:s})},{"76f1b3b688a029fa":"b7GrG","55358907c05b685d":"7utuf","98fd99047e51c8be":"67emE"}],"7utuf":[function(e,t,i,r){var n=e("c006aee3ec90867f"),s=e("bdaed06b86eeb767"),a=e("ca05db7523b31410"),o=e("47fe223c8f6c2dd5"),h=e("75eba7673a242ae6"),c=e("188dc0b37c140076"),l=e("32c4effc8b33b2c2"),d=e("a6ed280c439df9d0"),u=e("3faaa09a63a90825"),f=e("13cbec27e4dd055f"),p=Array;t.exports=function(e){var t,i,r,g,m,v,y=a(e),b=c(this),x=arguments.length,E=x>1?arguments[1]:void 0,T=void 0!==E;T&&(E=n(E,x>2?arguments[2]:void 0));var A=f(y),w=0;if(A&&!(this===p&&h(A)))for(i=b?new this:[],m=(g=u(y,A)).next;!(r=s(m,g)).done;w++)v=T?o(g,E,[r.value,w],!0):r.value,d(i,w,v);else for(t=l(y),i=b?new this(t):p(t);t>w;w++)v=T?E(y[w],w):y[w],d(i,w,v);return i.length=w,i}},{c006aee3ec90867f:"gWc3u",bdaed06b86eeb767:"kiToe",ca05db7523b31410:"eHl90","47fe223c8f6c2dd5":"hX41f","75eba7673a242ae6":"8SN6F","188dc0b37c140076":"7c2zg","32c4effc8b33b2c2":"fuf58",a6ed280c439df9d0:"fb5iK","3faaa09a63a90825":"7mfF2","13cbec27e4dd055f":"2JETE"}],hX41f:[function(e,t,i,r){var n=e("4afbb4be48dcf066"),s=e("d24fa1ffea48fa52");t.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(t){s(e,"throw",t)}}},{"4afbb4be48dcf066":"5dGJN",d24fa1ffea48fa52:"4rTZx"}],"67emE":[function(e,t,i,r){var n=e("a5154de5c7fcf21e")("iterator"),s=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){s=!0}};o[n]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){try{if(!t&&!s)return!1}catch(e){return!1}var i=!1;try{var r={};r[n]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch(e){}return i}},{a5154de5c7fcf21e:"eG9HO"}],jsVZA:[function(e,t,i,r){var n=e("ffa5d46bdab873f9"),s=e("abe71b6f5a2c149").includes,a=e("119354898116a770"),o=e("9a828f869e1adf81");n({target:"Array",proto:!0,forced:a(function(){return![,].includes()})},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},{ffa5d46bdab873f9:"b7GrG",abe71b6f5a2c149:"8UbLy","119354898116a770":"45J7X","9a828f869e1adf81":"kNZ2V"}],"57Hkq":[function(e,t,i,r){var n=e("9d4bf984c01e8ef7"),s=e("ff94ec157dbe45f"),a=e("84db9b100b66a9f4").indexOf,o=e("928c12f9f760e965"),h=s([].indexOf),c=!!h&&1/h([1],1,-0)<0;n({target:"Array",proto:!0,forced:c||!o("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?h(this,e,t)||0:a(this,e,t)}})},{"9d4bf984c01e8ef7":"b7GrG",ff94ec157dbe45f:"dAU5H","84db9b100b66a9f4":"8UbLy","928c12f9f760e965":"lK6NN"}],"23mFl":[function(e,t,i,r){e("e1a67b4aafecad9a")({target:"Array",stat:!0},{isArray:e("1fa49986380c79ad")})},{e1a67b4aafecad9a:"b7GrG","1fa49986380c79ad":"8hZ2S"}],aF8mt:[function(e,t,i,r){var n=e("c8e067881939a0cb"),s=e("275b8f0cb65b77aa"),a=e("21f4d3653c90f049"),o=e("85efa8d5848315f6"),h=e("94a17682acfdceb4").f,c=e("bb30bdef31147b17"),l=e("d8384af5151f994c"),d=e("fdcc207797f592fe"),u=e("11e42ff2bbda8d0a"),f="Array Iterator",p=o.set,g=o.getterFor(f);t.exports=c(Array,"Array",function(e,t){p(this,{type:f,target:n(e),index:0,kind:t})},function(){var e=g(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=null,l(void 0,!0);switch(e.kind){case"keys":return l(i,!1);case"values":return l(t[i],!1)}return l([i,t[i]],!1)},"values");var m=a.Arguments=a.Array;if(s("keys"),s("values"),s("entries"),!d&&u&&"values"!==m.name)try{h(m,"name",{value:"values"})}catch(e){}},{c8e067881939a0cb:"cVp2Q","275b8f0cb65b77aa":"kNZ2V","21f4d3653c90f049":"cvS1X","85efa8d5848315f6":"fuP4a","94a17682acfdceb4":"34YKB",bb30bdef31147b17:"6Jy0l",d8384af5151f994c:"k6wXP",fdcc207797f592fe:"lssMj","11e42ff2bbda8d0a":"dqiQp"}],"6Jy0l":[function(e,t,i,r){var n=e("923c1bf4a39ae90c"),s=e("46a3f73465955199"),a=e("c1577e63189cf935"),o=e("dc625e1bb584faf6"),h=e("d55d91c410baca17"),c=e("3e4ae607dbb6e78b"),l=e("48ca4ae1d4998232"),d=e("1263258b63630933"),u=e("9b61caf69f87dfde"),f=e("7f30a3ab1bf5e1c1"),p=e("c027b4da648348d3"),g=e("d4ad91965213ee1"),m=e("b616a206eb405268"),v=e("4f9ec7e9f5d20965"),y=o.PROPER,b=o.CONFIGURABLE,x=v.IteratorPrototype,E=v.BUGGY_SAFARI_ITERATORS,T=g("iterator"),A="keys",w="values",S="entries",C=function(){return this};t.exports=function(e,t,i,r,o,g,v){c(i,t,r);var I,_,O,P=function(e){if(e===o&&k)return k;if(!E&&e&&e in L)return L[e];switch(e){case A:case w:case S:return function(){return new i(this,e)}}return function(){return new i(this)}},M=t+" Iterator",R=!1,L=e.prototype,D=L[T]||L["@@iterator"]||o&&L[o],k=!E&&D||P(o),N="Array"===t&&L.entries||D;if(N&&(I=l(N.call(new e)))!==Object.prototype&&I.next&&(!a&&l(I)!==x&&(d?d(I,x):h(I[T])||p(I,T,C)),u(I,M,!0,!0),a&&(m[M]=C)),y&&o===w&&D&&D.name!==w&&(!a&&b?f(L,"name",w):(R=!0,k=function(){return s(D,this)})),o)if(_={values:P(w),keys:g?k:P(A),entries:P(S)},v)for(O in _)!E&&!R&&O in L||p(L,O,_[O]);else n({target:t,proto:!0,forced:E||R},_);return(!a||v)&&L[T]!==k&&p(L,T,k,{name:o}),m[t]=k,_}},{"923c1bf4a39ae90c":"b7GrG","46a3f73465955199":"kiToe",c1577e63189cf935:"lssMj",dc625e1bb584faf6:"dGPBk",d55d91c410baca17:"2Pprm","3e4ae607dbb6e78b":"9fpII","48ca4ae1d4998232":"6P7xV","1263258b63630933":"i41Eo","9b61caf69f87dfde":"ksXqH","7f30a3ab1bf5e1c1":"mcZBn",c027b4da648348d3:"2UU83",d4ad91965213ee1:"eG9HO",b616a206eb405268:"cvS1X","4f9ec7e9f5d20965":"8Nvhm"}],"9fpII":[function(e,t,i,r){var n=e("6d3197d79123a33d").IteratorPrototype,s=e("f19338a88747fb05"),a=e("cc176dfbf6ea0553"),o=e("bc433e6ab6880430"),h=e("2f833e0e1738e7e0"),c=function(){return this};t.exports=function(e,t,i,r){var l=t+" Iterator";return e.prototype=s(n,{next:a(+!r,i)}),o(e,l,!1,!0),h[l]=c,e}},{"6d3197d79123a33d":"8Nvhm",f19338a88747fb05:"gg5Dl",cc176dfbf6ea0553:"enYsZ",bc433e6ab6880430:"ksXqH","2f833e0e1738e7e0":"cvS1X"}],"8Nvhm":[function(e,t,i,r){var n,s,a,o=e("cdb9dcd93b52b3fc"),h=e("db955145706fc55a"),c=e("83e5df3d56e8834f"),l=e("45d6f1a3c372cdf6"),d=e("a97459767d74fdc3"),u=e("3bdf78f362001d7c"),f=e("d3901e60df7842c9"),p=e("e736fd193ddc96e5"),g=f("iterator"),m=!1;[].keys&&("next"in(a=[].keys())?(s=d(d(a)))!==Object.prototype&&(n=s):m=!0),!c(n)||o(function(){var e={};return n[g].call(e)!==e})?n={}:p&&(n=l(n)),h(n[g])||u(n,g,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},{cdb9dcd93b52b3fc:"45J7X",db955145706fc55a:"2Pprm","83e5df3d56e8834f":"adFpz","45d6f1a3c372cdf6":"gg5Dl",a97459767d74fdc3:"6P7xV","3bdf78f362001d7c":"2UU83",d3901e60df7842c9:"eG9HO",e736fd193ddc96e5:"lssMj"}],k6wXP:[function(e,t,i,r){t.exports=function(e,t){return{value:e,done:t}}},{}],a3waX:[function(e,t,i,r){var n=e("1fd3a81d59354079"),s=e("878a42cfd07db75d"),a=e("c417af28e9abb2b"),o=e("cdcc2dbc58a28c02"),h=e("733e226e143494d1"),c=s([].join);n({target:"Array",proto:!0,forced:a!==Object||!h("join",",")},{join:function(e){return c(o(this),void 0===e?",":e)}})},{"1fd3a81d59354079":"b7GrG","878a42cfd07db75d":"cfIox",c417af28e9abb2b:"a89ET",cdcc2dbc58a28c02:"cVp2Q","733e226e143494d1":"lK6NN"}],aR2WG:[function(e,t,i,r){var n=e("962fe7a81cad1a6"),s=e("9a92cbcc02ff28cd");n({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},{"962fe7a81cad1a6":"b7GrG","9a92cbcc02ff28cd":"i4xhE"}],i4xhE:[function(e,t,i,r){var n=e("4ca7787412cb919d"),s=e("883419ed27232d44"),a=e("ec6d0c7c9b243b67"),o=e("f185a9d11d03524a"),h=e("6d58dcee43d16a4d"),c=Math.min,l=[].lastIndexOf,d=!!l&&1/[1].lastIndexOf(1,-0)<0,u=h("lastIndexOf");t.exports=d||!u?function(e){if(d)return n(l,this,arguments)||0;var t=s(this),i=o(t);if(0===i)return -1;var r=i-1;for(arguments.length>1&&(r=c(r,a(arguments[1]))),r<0&&(r=i+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return -1}:l},{"4ca7787412cb919d":"72fZp","883419ed27232d44":"cVp2Q",ec6d0c7c9b243b67:"lOYVA",f185a9d11d03524a:"fuf58","6d58dcee43d16a4d":"lK6NN"}],ffioB:[function(e,t,i,r){var n=e("5fce1361821ac187"),s=e("a7a3b0905c6ea58c").map;n({target:"Array",proto:!0,forced:!e("869912db050ffcc6")("map")},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{"5fce1361821ac187":"b7GrG",a7a3b0905c6ea58c:"bmbdL","869912db050ffcc6":"kPmx3"}],dhWyf:[function(e,t,i,r){var n=e("c49bbaeadf669473"),s=e("2b7c23018838f50"),a=e("5ca03f92538fd001"),o=e("d87cf2a2bcbb5c2c"),h=Array;n({target:"Array",stat:!0,forced:s(function(){function e(){}return!(h.of.call(e)instanceof e)})},{of:function(){for(var e=0,t=arguments.length,i=new(a(this)?this:h)(t);t>e;)o(i,e,arguments[e++]);return i.length=t,i}})},{c49bbaeadf669473:"b7GrG","2b7c23018838f50":"45J7X","5ca03f92538fd001":"7c2zg",d87cf2a2bcbb5c2c:"fb5iK"}],gMszS:[function(e,t,i,r){var n=e("b6ccafca6520a091"),s=e("617fddde3018a247"),a=e("59103d39edb4650b"),o=e("92e23121d8e92745"),h=e("e72c330067644bc");n({target:"Array",proto:!0,arity:1,forced:e("a33adf7f040c3b17")(function(){return 0x100000001!==[].push.call({length:0x100000000},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=s(this),i=a(t),r=arguments.length;h(i+r);for(var n=0;n<r;n++)t[i]=arguments[n],i++;return o(t,i),i}})},{b6ccafca6520a091:"b7GrG","617fddde3018a247":"eHl90","59103d39edb4650b":"fuf58","92e23121d8e92745":"72uDb",e72c330067644bc:"ldHs0",a33adf7f040c3b17:"45J7X"}],"72uDb":[function(e,t,i,r){var n=e("dc66120e0129528"),s=e("60f73fd41619acc2"),a=TypeError,o=Object.getOwnPropertyDescriptor;t.exports=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(s(e)&&!o(e,"length").writable)throw new a("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},{dc66120e0129528:"dqiQp","60f73fd41619acc2":"8hZ2S"}],"7xAE1":[function(e,t,i,r){var n=e("aa6d80bc3b697f48"),s=e("1ee240c0462acdf8").left,a=e("161424d627b72094"),o=e("bc7f601de74ac73e");n({target:"Array",proto:!0,forced:!e("fbcc11805e216a7d")&&o>79&&o<83||!a("reduce")},{reduce:function(e){var t=arguments.length;return s(this,e,t,t>1?arguments[1]:void 0)}})},{aa6d80bc3b697f48:"b7GrG","1ee240c0462acdf8":"fx2tX","161424d627b72094":"lK6NN",bc7f601de74ac73e:"jarVK",fbcc11805e216a7d:"etN8h"}],fx2tX:[function(e,t,i,r){var n=e("93e7a99f8d3bc817"),s=e("915d05570b61a3c9"),a=e("da310552be96f5db"),o=e("f4209260f2003c23"),h=TypeError,c="Reduce of empty array with no initial value",l=function(e){return function(t,i,r,l){var d=s(t),u=a(d),f=o(d);if(n(i),0===f&&r<2)throw new h(c);var p=e?f-1:0,g=e?-1:1;if(r<2)for(;;){if(p in u){l=u[p],p+=g;break}if(p+=g,e?p<0:f<=p)throw new h(c)}for(;e?p>=0:f>p;p+=g)p in u&&(l=i(l,u[p],p,d));return l}};t.exports={left:l(!1),right:l(!0)}},{"93e7a99f8d3bc817":"3m7Aa","915d05570b61a3c9":"eHl90",da310552be96f5db:"a89ET",f4209260f2003c23:"fuf58"}],etN8h:[function(e,t,i,r){t.exports="NODE"===e("5fac34e3c4c0e043")},{"5fac34e3c4c0e043":"iU9O4"}],iU9O4:[function(e,t,i,r){var n=e("7dc361f46ecde901"),s=e("9f6e24ecbba66a9e"),a=e("a008a59fdc341842"),o=function(e){return s.slice(0,e.length)===e};t.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},{"7dc361f46ecde901":"5ygRS","9f6e24ecbba66a9e":"cXzrn",a008a59fdc341842:"aQekt"}],"4alw4":[function(e,t,i,r){var n=e("fce4aa67eb1fe4da"),s=e("9bb83011bb72081c").right,a=e("86ebd8f03f19e7b"),o=e("c87ecf8f0d069a25");n({target:"Array",proto:!0,forced:!e("ceeda59dcd941a57")&&o>79&&o<83||!a("reduceRight")},{reduceRight:function(e){return s(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},{fce4aa67eb1fe4da:"b7GrG","9bb83011bb72081c":"fx2tX","86ebd8f03f19e7b":"lK6NN",c87ecf8f0d069a25:"jarVK",ceeda59dcd941a57:"etN8h"}],"4BlrJ":[function(e,t,i,r){var n=e("96e1bf170d634a10"),s=e("ccf1d267c2b85a6"),a=e("683c722e26101e35"),o=s([].reverse),h=[1,2];n({target:"Array",proto:!0,forced:String(h)===String(h.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),o(this)}})},{"96e1bf170d634a10":"b7GrG",ccf1d267c2b85a6:"cfIox","683c722e26101e35":"8hZ2S"}],"8KJg9":[function(e,t,i,r){var n=e("f4626508f1e86a5e"),s=e("c55f884cac32042"),a=e("c7ab28f7c42930d4"),o=e("d62f4c68d4a29c88"),h=e("598be77178793bf1"),c=e("f9b9299dc750b2dd"),l=e("ff620c60ded20435"),d=e("49168568b59df51b"),u=e("f02f140688adf449"),f=e("eb9bbc0536d1f202"),p=e("88cb1064f5f88f9e"),g=f("slice"),m=u("species"),v=Array,y=Math.max;n({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var i,r,n,u=l(this),f=c(u),g=h(e,f),b=h(void 0===t?f:t,f);if(s(u)&&(a(i=u.constructor)&&(i===v||s(i.prototype))?i=void 0:o(i)&&null===(i=i[m])&&(i=void 0),i===v||void 0===i))return p(u,g,b);for(n=0,r=new(void 0===i?v:i)(y(b-g,0));g<b;g++,n++)g in u&&d(r,n,u[g]);return r.length=n,r}})},{f4626508f1e86a5e:"b7GrG",c55f884cac32042:"8hZ2S",c7ab28f7c42930d4:"7c2zg",d62f4c68d4a29c88:"adFpz","598be77178793bf1":"65oaN",f9b9299dc750b2dd:"fuf58",ff620c60ded20435:"cVp2Q","49168568b59df51b":"fb5iK",f02f140688adf449:"eG9HO",eb9bbc0536d1f202:"kPmx3","88cb1064f5f88f9e":"lUArJ"}],iMMMY:[function(e,t,i,r){var n=e("7d2f6f3fe52919ae"),s=e("b1828f452e0c06d").some;n({target:"Array",proto:!0,forced:!e("2a793f2ccd9f7f4e")("some")},{some:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{"7d2f6f3fe52919ae":"b7GrG",b1828f452e0c06d:"bmbdL","2a793f2ccd9f7f4e":"lK6NN"}],fOORm:[function(e,t,i,r){var n=e("bcbafe2730da3578"),s=e("45fd6781824a0ecc"),a=e("227e835045b72b76"),o=e("d460a9dbedc2e639"),h=e("eb5d266a4b580e05"),c=e("ab9af39e90a45cab"),l=e("2874e3c4ed670355"),d=e("b077ecec4e3b8790"),u=e("b1c0993c5b4a0232"),f=e("fc67c1f531962716"),p=e("5463fbeb0c308d9"),g=e("44ffda3b5c0f4b25"),m=e("f9fbdc3cf34ed30"),v=e("f4067f6b9a5e38cb"),y=[],b=s(y.sort),x=s(y.push),E=d(function(){y.sort(void 0)}),T=d(function(){y.sort(null)}),A=f("sort"),w=!d(function(){if(m)return m<70;if(!p||!(p>3)){if(g)return!0;if(v)return v<603;var e,t,i,r,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(r=0;r<47;r++)y.push({k:t+r,v:i})}for(y.sort(function(e,t){return t.v-e.v}),r=0;r<y.length;r++)t=y[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}});n({target:"Array",proto:!0,forced:E||!T||!A||!w},{sort:function(e){void 0!==e&&a(e);var t,i,r=o(this);if(w)return void 0===e?b(r):b(r,e);var n=[],s=h(r);for(i=0;i<s;i++)i in r&&x(n,r[i]);for(u(n,function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:l(t)>l(i)?1:-1}),t=h(n),i=0;i<t;)r[i]=n[i++];for(;i<s;)c(r,i++);return r}})},{bcbafe2730da3578:"b7GrG","45fd6781824a0ecc":"cfIox","227e835045b72b76":"3m7Aa",d460a9dbedc2e639:"eHl90",eb5d266a4b580e05:"fuf58",ab9af39e90a45cab:"bslid","2874e3c4ed670355":"2QNq8",b077ecec4e3b8790:"45J7X",b1c0993c5b4a0232:"02Yr0",fc67c1f531962716:"lK6NN","5463fbeb0c308d9":"7pRR7","44ffda3b5c0f4b25":"5pC0x",f9fbdc3cf34ed30:"jarVK",f4067f6b9a5e38cb:"jqVuW"}],"02Yr0":[function(e,t,i,r){var n=e("477ba4a4642e124b"),s=Math.floor,a=function(e,t){var i=e.length;if(i<8)for(var r,o,h=1;h<i;){for(o=h,r=e[h];o&&t(e[o-1],r)>0;)e[o]=e[--o];o!==h++&&(e[o]=r)}else for(var c=s(i/2),l=a(n(e,0,c),t),d=a(n(e,c),t),u=l.length,f=d.length,p=0,g=0;p<u||g<f;)e[p+g]=p<u&&g<f?0>=t(l[p],d[g])?l[p++]:d[g++]:p<u?l[p++]:d[g++];return e};t.exports=a},{"477ba4a4642e124b":"lUArJ"}],"7pRR7":[function(e,t,i,r){var n=e("a5aa79c2b523d5ed").match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},{a5aa79c2b523d5ed:"cXzrn"}],"5pC0x":[function(e,t,i,r){var n=e("e23e24a84dc58074");t.exports=/MSIE|Trident/.test(n)},{e23e24a84dc58074:"cXzrn"}],jqVuW:[function(e,t,i,r){var n=e("b4f554b2b39611d1").match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},{b4f554b2b39611d1:"cXzrn"}],jrmgr:[function(e,t,i,r){e("42da8ff88dc4c1c4")("Array")},{"42da8ff88dc4c1c4":"klUhs"}],klUhs:[function(e,t,i,r){var n=e("b05e11590de6536b"),s=e("5ccd92fa5628281e"),a=e("5145e81a7788c772"),o=e("19428004aa07279c"),h=a("species");t.exports=function(e){var t=n(e);o&&t&&!t[h]&&s(t,h,{configurable:!0,get:function(){return this}})}},{b05e11590de6536b:"2MF6I","5ccd92fa5628281e":"l5KAt","5145e81a7788c772":"eG9HO","19428004aa07279c":"dqiQp"}],hHuad:[function(e,t,i,r){var n=e("fcdd299870ca460d"),s=e("5f536a62c5bdccdf"),a=e("ec98ec63afca6e23"),o=e("d308f711ad345c5e"),h=e("5b3d6eaf0671a489"),c=e("32601ab988fd40d3"),l=e("b495b3fcd17928be"),d=e("f92c3217c97e3529"),u=e("5390d505f7091be7"),f=e("3105e86fb8ab7be"),p=e("68735e235584e669")("splice"),g=Math.max,m=Math.min;n({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var i,r,n,p,v,y,b=s(this),x=h(b),E=a(e,x),T=arguments.length;for(0===T?i=r=0:1===T?(i=0,r=x-E):(i=T-2,r=m(g(o(t),0),x-E)),l(x+i-r),n=d(b,r),p=0;p<r;p++)(v=E+p)in b&&u(n,p,b[v]);if(n.length=r,i<r){for(p=E;p<x-r;p++)v=p+r,y=p+i,v in b?b[y]=b[v]:f(b,y);for(p=x;p>x-r+i;p--)f(b,p-1)}else if(i>r)for(p=x-r;p>E;p--)v=p+r-1,y=p+i-1,v in b?b[y]=b[v]:f(b,y);for(p=0;p<i;p++)b[p+E]=arguments[p+2];return c(b,x-r+i),n}})},{fcdd299870ca460d:"b7GrG","5f536a62c5bdccdf":"eHl90",ec98ec63afca6e23:"65oaN",d308f711ad345c5e:"lOYVA","5b3d6eaf0671a489":"fuf58","32601ab988fd40d3":"72uDb",b495b3fcd17928be:"ldHs0",f92c3217c97e3529:"8T16N","5390d505f7091be7":"fb5iK","3105e86fb8ab7be":"bslid","68735e235584e669":"kPmx3"}],j1rbB:[function(e,t,i,r){var n=e("dcb26709a7ce1aaf"),s=e("9188a72e8fb05720"),a=e("f7666d6cb036e5cf"),o=e("7f063c8e62d2c4bc"),h=Array;n({target:"Array",proto:!0},{toReversed:function(){return s(a(this),h)}}),o("toReversed")},{dcb26709a7ce1aaf:"b7GrG","9188a72e8fb05720":"3AQfx",f7666d6cb036e5cf:"cVp2Q","7f063c8e62d2c4bc":"kNZ2V"}],"3AQfx":[function(e,t,i,r){var n=e("da2f237fc4470694");t.exports=function(e,t){for(var i=n(e),r=new t(i),s=0;s<i;s++)r[s]=e[i-s-1];return r}},{da2f237fc4470694:"fuf58"}],k1odz:[function(e,t,i,r){var n=e("52ce81dc0a9a443d"),s=e("b27df370ae680d78"),a=e("d484118a239a7fe4"),o=e("c5a21e340982153"),h=e("7c8fdece48b2bb2"),c=e("5901404f2d888ec5"),l=e("ad0abff5cc640cb1"),d=Array,u=s(c("Array","sort"));n({target:"Array",proto:!0},{toSorted:function(e){return void 0!==e&&a(e),u(h(d,o(this)),e)}}),l("toSorted")},{"52ce81dc0a9a443d":"b7GrG",b27df370ae680d78:"cfIox",d484118a239a7fe4:"3m7Aa",c5a21e340982153:"cVp2Q","7c8fdece48b2bb2":"a1N3z","5901404f2d888ec5":"6tn3R",ad0abff5cc640cb1:"kNZ2V"}],a1N3z:[function(e,t,i,r){var n=e("2dee1f257e46a7db");t.exports=function(e,t,i){for(var r=0,s=arguments.length>2?i:n(t),a=new e(s);s>r;)a[r]=t[r++];return a}},{"2dee1f257e46a7db":"fuf58"}],"6tn3R":[function(e,t,i,r){var n=e("63ff55de103c0dc5");t.exports=function(e,t){var i=n[e],r=i&&i.prototype;return r&&r[t]}},{"63ff55de103c0dc5":"5ygRS"}],hj3sx:[function(e,t,i,r){var n=e("c44d9276f6e49c66"),s=e("ccd8819e12261215"),a=e("95891e25a6f53375"),o=e("71fb5de0045d079d"),h=e("150c173e099ddbe3"),c=e("bc8453913d7979ca"),l=e("a4502cc79d58ffee"),d=Array,u=Math.max,f=Math.min;n({target:"Array",proto:!0},{toSpliced:function(e,t){var i,r,n,s,p=c(this),g=o(p),m=h(e,g),v=arguments.length,y=0;for(0===v?i=r=0:1===v?(i=0,r=g-m):(i=v-2,r=f(u(l(t),0),g-m)),s=d(n=a(g+i-r));y<m;y++)s[y]=p[y];for(;y<m+i;y++)s[y]=arguments[y-m+2];for(;y<n;y++)s[y]=p[y+r-i];return s}}),s("toSpliced")},{c44d9276f6e49c66:"b7GrG",ccd8819e12261215:"kNZ2V","95891e25a6f53375":"ldHs0","71fb5de0045d079d":"fuf58","150c173e099ddbe3":"65oaN",bc8453913d7979ca:"cVp2Q",a4502cc79d58ffee:"lOYVA"}],"35sOf":[function(e,t,i,r){e("38dfe1dec51aa5e")("flat")},{"38dfe1dec51aa5e":"kNZ2V"}],kdCBv:[function(e,t,i,r){e("a292f2e262c4e9cd")("flatMap")},{a292f2e262c4e9cd:"kNZ2V"}],"7sz6w":[function(e,t,i,r){var n=e("b1f0614c13f2cf4c"),s=e("efdf90907e209c0d"),a=e("7a3a82e1e33fbf71"),o=e("4aef1328332da65a"),h=e("e6ae4b015c0c53de"),c=e("1890691961e2b2d7");n({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=s(this),i=a(t),r=arguments.length;if(r){c(i+r);for(var n=i;n--;){var l=n+r;n in t?t[l]=t[n]:h(t,l)}for(var d=0;d<r;d++)t[d]=arguments[d]}return o(t,i+r)}})},{b1f0614c13f2cf4c:"b7GrG",efdf90907e209c0d:"eHl90","7a3a82e1e33fbf71":"fuf58","4aef1328332da65a":"72uDb",e6ae4b015c0c53de:"bslid","1890691961e2b2d7":"ldHs0"}],aDXA4:[function(e,t,i,r){var n=e("d86bc3b82a987bfe"),s=e("61402c55343416de"),a=e("bc0327accd7b18f0"),o=Array;n({target:"Array",proto:!0,forced:function(){try{[].with({valueOf:function(){throw 4}},null)}catch(e){return 4!==e}}()},{with:function(e,t){return s(a(this),o,e,t)}})},{d86bc3b82a987bfe:"b7GrG","61402c55343416de":"15yPl",bc0327accd7b18f0:"cVp2Q"}],"15yPl":[function(e,t,i,r){var n=e("304f31a5544e0a3a"),s=e("639b509ec45617c8"),a=RangeError;t.exports=function(e,t,i,r){var o=n(e),h=s(i),c=h<0?o+h:h;if(c>=o||c<0)throw new a("Incorrect index");for(var l=new t(o),d=0;d<o;d++)l[d]=d===c?r:e[d];return l}},{"304f31a5544e0a3a":"fuf58","639b509ec45617c8":"lOYVA"}],"3SsIu":[function(e,t,i,r){var n=e("b5b7367238f03d69"),s=e("c579499e0a76aa10"),a=e("e47ed91aa3516c0b"),o=e("933de36f1a956134"),h="ArrayBuffer",c=a[h];n({global:!0,constructor:!0,forced:s[h]!==c},{ArrayBuffer:c}),o(h)},{b5b7367238f03d69:"b7GrG",c579499e0a76aa10:"5ygRS",e47ed91aa3516c0b:"gohOQ","933de36f1a956134":"klUhs"}],gohOQ:[function(e,t,i,r){var n=e("b2866645d252be10"),s=e("6f1278f8f2a16115"),a=e("82c590a9dd8cc3ac"),o=e("923679fae99d4d2f"),h=e("9840ef06cc46dddb"),c=e("78ca6eb037349755"),l=e("e693d9164e48343"),d=e("649a7a39c0607d74"),u=e("57aab94a1cd1d913"),f=e("7333f43e52f40b38"),p=e("1fd77d2940b4fd75"),g=e("8739fe5c743af579"),m=e("e3fc7a8bc754578a"),v=e("93dd6846d2a65063"),y=e("d85071d33c34155a"),b=e("eae7b83555f02284"),x=e("fd01028813b4814f"),E=e("8fdeb7296fb95696"),T=e("c0dac2bdd3636e95"),A=e("3606a69f7ceacab3"),w=e("5a0e685d057e2415"),S=e("dd3d1adef426fc5"),C=e("ea12fbd2f22b2f25"),I=h.PROPER,_=h.CONFIGURABLE,O="ArrayBuffer",P="DataView",M="prototype",R="Wrong index",L=C.getterFor(O),D=C.getterFor(P),k=C.set,N=n[O],F=N,B=F&&F[M],U=n[P],G=U&&U[M],V=Object.prototype,Y=n.Array,j=n.RangeError,W=s(E),z=s([].reverse),H=y.pack,X=y.unpack,q=function(e){return[255&e]},K=function(e){return[255&e,e>>8&255]},J=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Q=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},$=function(e){return H(v(e),23,4)},Z=function(e){return H(e,52,8)},ee=function(e,t,i){l(e[M],t,{configurable:!0,get:function(){return i(this)[t]}})},et=function(e,t,i,r){var n=D(e),s=m(i);if(s+t>n.byteLength)throw new j(R);var a=n.bytes,o=s+n.byteOffset,h=T(a,o,o+t);return r?h:z(h)},ei=function(e,t,i,r,n,s){var a=D(e),o=m(i),h=r(+n),c=!!s;if(o+t>a.byteLength)throw new j(R);for(var l=a.bytes,d=o+a.byteOffset,u=0;u<t;u++)l[d+u]=h[c?u:t-u-1]};if(o){var er=I&&N.name!==O;!u(function(){N(1)})||!u(function(){new N(-1)})||u(function(){return new N,new N(1.5),new N(NaN),1!==N.length||er&&!_})?((F=function(e){return f(this,B),A(new N(m(e)),this,F)})[M]=B,B.constructor=F,w(F,N)):er&&_&&c(N,"name",O),x&&b(G)!==V&&x(G,V);var en=new U(new F(2)),es=s(G.setInt8);en.setInt8(0,0x80000000),en.setInt8(1,0x80000001),(en.getInt8(0)||!en.getInt8(1))&&d(G,{setInt8:function(e,t){es(this,e,t<<24>>24)},setUint8:function(e,t){es(this,e,t<<24>>24)}},{unsafe:!0})}else B=(F=function(e){f(this,B);var t=m(e);k(this,{type:O,bytes:W(Y(t),0),byteLength:t}),a||(this.byteLength=t,this.detached=!1)})[M],G=(U=function(e,t,i){f(this,G),f(e,B);var r=L(e),n=r.byteLength,s=p(t);if(s<0||s>n)throw new j("Wrong offset");if(i=void 0===i?n-s:g(i),s+i>n)throw new j("Wrong length");k(this,{type:P,buffer:e,byteLength:i,byteOffset:s,bytes:r.bytes}),a||(this.buffer=e,this.byteLength=i,this.byteOffset=s)})[M],a&&(ee(F,"byteLength",L),ee(U,"buffer",D),ee(U,"byteLength",D),ee(U,"byteOffset",D)),d(G,{getInt8:function(e){return et(this,1,e)[0]<<24>>24},getUint8:function(e){return et(this,1,e)[0]},getInt16:function(e){var t=et(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=et(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return Q(et(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return Q(et(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return X(et(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return X(et(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){ei(this,1,e,q,t)},setUint8:function(e,t){ei(this,1,e,q,t)},setInt16:function(e,t){ei(this,2,e,K,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){ei(this,2,e,K,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){ei(this,4,e,J,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){ei(this,4,e,J,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){ei(this,4,e,$,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){ei(this,8,e,Z,t,arguments.length>2&&arguments[2])}});S(F,O),S(U,P),t.exports={ArrayBuffer:F,DataView:U}},{b2866645d252be10:"5ygRS","6f1278f8f2a16115":"cfIox","82c590a9dd8cc3ac":"dqiQp","923679fae99d4d2f":"kjMtE","9840ef06cc46dddb":"dGPBk","78ca6eb037349755":"mcZBn",e693d9164e48343:"l5KAt","649a7a39c0607d74":"8DWpB","57aab94a1cd1d913":"45J7X","7333f43e52f40b38":"cYIbs","1fd77d2940b4fd75":"lOYVA","8739fe5c743af579":"5nsMT",e3fc7a8bc754578a:"6zoys","93dd6846d2a65063":"eiLkP",d85071d33c34155a:"9gce7",eae7b83555f02284:"6P7xV",fd01028813b4814f:"i41Eo","8fdeb7296fb95696":"83otQ",c0dac2bdd3636e95:"lUArJ","3606a69f7ceacab3":"kzdOP","5a0e685d057e2415":"2DlL2",dd3d1adef426fc5:"ksXqH",ea12fbd2f22b2f25:"fuP4a"}],kjMtE:[function(e,t,i,r){t.exports="u">typeof ArrayBuffer&&"u">typeof DataView},{}],"8DWpB":[function(e,t,i,r){var n=e("e34e683e23dcb4bb");t.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},{e34e683e23dcb4bb:"2UU83"}],cYIbs:[function(e,t,i,r){var n=e("55f8840091c5bf21"),s=TypeError;t.exports=function(e,t){if(n(t,e))return e;throw new s("Incorrect invocation")}},{"55f8840091c5bf21":"3Igu8"}],"6zoys":[function(e,t,i,r){var n=e("10a259b760ce2864"),s=e("f24767d66362404d"),a=RangeError;t.exports=function(e){if(void 0===e)return 0;var t=n(e),i=s(t);if(t!==i)throw new a("Wrong length or index");return i}},{"10a259b760ce2864":"lOYVA",f24767d66362404d:"5nsMT"}],eiLkP:[function(e,t,i,r){var n=e("8f9dfe0502a74d7");t.exports=Math.fround||function(e){return n(e,11920928955078125e-23,34028234663852886e22,11754943508222875e-54)}},{"8f9dfe0502a74d7":"9WT1d"}],"9WT1d":[function(e,t,i,r){var n=e("9113322676fa66ef"),s=e("2ac89d49b59361af"),a=Math.abs;t.exports=function(e,t,i,r){var o=+e,h=a(o),c=n(o);if(h<r)return c*s(h/r/t)*r*t;var l=(1+t/2220446049250313e-31)*h,d=l-(l-h);return d>i||d!=d?1/0*c:c*d}},{"9113322676fa66ef":"fJ6MV","2ac89d49b59361af":"1BPCt"}],fJ6MV:[function(e,t,i,r){t.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},{}],"1BPCt":[function(e,t,i,r){t.exports=function(e){return e+0x10000000000000-0x10000000000000}},{}],"9gce7":[function(e,t,i,r){var n=Array,s=Math.abs,a=Math.pow,o=Math.floor,h=Math.log,c=Math.LN2;t.exports={pack:function(e,t,i){var r,l,d,u=n(i),f=8*i-t-1,p=(1<<f)-1,g=p>>1,m=23===t?a(2,-24)-a(2,-77):0,v=+(e<0||0===e&&1/e<0),y=0;for((e=s(e))!=e||e===1/0?(l=+(e!=e),r=p):(d=a(2,-(r=o(h(e)/c))),e*d<1&&(r--,d*=2),r+g>=1?e+=m/d:e+=m*a(2,1-g),e*d>=2&&(r++,d/=2),r+g>=p?(l=0,r=p):r+g>=1?(l=(e*d-1)*a(2,t),r+=g):(l=e*a(2,g-1)*a(2,t),r=0));t>=8;)u[y++]=255&l,l/=256,t-=8;for(r=r<<t|l,f+=t;f>0;)u[y++]=255&r,r/=256,f-=8;return u[y-1]|=128*v,u},unpack:function(e,t){var i,r=e.length,n=8*r-t-1,s=(1<<n)-1,o=s>>1,h=n-7,c=r-1,l=e[c--],d=127&l;for(l>>=7;h>0;)d=256*d+e[c--],h-=8;for(i=d&(1<<-h)-1,d>>=-h,h+=t;h>0;)i=256*i+e[c--],h-=8;if(0===d)d=1-o;else{if(d===s)return i?NaN:l?-1/0:1/0;i+=a(2,t),d-=o}return(l?-1:1)*i*a(2,d-t)}}},{}],ltMRr:[function(e,t,i,r){var n=e("46c87ab471833e50"),s=e("3efc956d746e3978");n({target:"ArrayBuffer",stat:!0,forced:!s.NATIVE_ARRAY_BUFFER_VIEWS},{isView:s.isView})},{"46c87ab471833e50":"b7GrG","3efc956d746e3978":"6CGVt"}],"6CGVt":[function(e,t,i,r){var n,s,a,o=e("4142cc1b1f950662"),h=e("fa237bbf2050dd6d"),c=e("9603af1373955d3d"),l=e("1b44b7e19e6f660d"),d=e("af39713fe0cf7587"),u=e("dd5eec94b1519471"),f=e("b9eebb2d4c13b0d6"),p=e("36a2290066710aa0"),g=e("fdfbb82e20f81a19"),m=e("81ef6d90bc6acdce"),v=e("96421c541af03be5"),y=e("ab8263bb2af6274"),b=e("ba5da2480b30b79"),x=e("b6e4d282cbe3e34a"),E=e("3d5af0d43aa6e42b"),T=e("8007fa7370557b8e"),A=e("82848943f937d383"),w=A.enforce,S=A.get,C=c.Int8Array,I=C&&C.prototype,_=c.Uint8ClampedArray,O=_&&_.prototype,P=C&&b(C),M=I&&b(I),R=Object.prototype,L=c.TypeError,D=E("toStringTag"),k=T("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",F=o&&!!x&&"Opera"!==f(c.opera),B=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},G={BigInt64Array:8,BigUint64Array:8},V=function(e){var t=b(e);if(d(t)){var i=S(t);return i&&u(i,N)?i[N]:V(t)}},Y=function(e){if(!d(e))return!1;var t=f(e);return u(U,t)||u(G,t)};for(n in U)(a=(s=c[n])&&s.prototype)?w(a)[N]=s:F=!1;for(n in G)(a=(s=c[n])&&s.prototype)&&(w(a)[N]=s);if((!F||!l(P)||P===Function.prototype)&&(P=function(){throw new L("Incorrect invocation")},F))for(n in U)c[n]&&x(c[n],P);if((!F||!M||M===R)&&(M=P.prototype,F))for(n in U)c[n]&&x(c[n].prototype,M);if(F&&b(O)!==M&&x(O,M),h&&!u(M,D))for(n in B=!0,v(M,D,{configurable:!0,get:function(){return d(this)?this[k]:void 0}}),U)c[n]&&g(c[n],k,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:B&&k,aTypedArray:function(e){if(Y(e))return e;throw new L("Target is not a typed array")},aTypedArrayConstructor:function(e){if(l(e)&&(!x||y(P,e)))return e;throw new L(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,r){if(h){if(i)for(var n in U){var s=c[n];if(s&&u(s.prototype,e))try{delete s.prototype[e]}catch(i){try{s.prototype[e]=t}catch(e){}}}(!M[e]||i)&&m(M,e,i?t:F&&I[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,i){var r,n;if(h){if(x){if(i){for(r in U)if((n=c[r])&&u(n,e))try{delete n[e]}catch(e){}}if(P[e]&&!i)return;try{return m(P,e,i?t:F&&P[e]||t)}catch(e){}}for(r in U)(n=c[r])&&(!n[e]||i)&&m(n,e,t)}},getTypedArrayConstructor:V,isView:function(e){if(!d(e))return!1;var t=f(e);return"DataView"===t||u(U,t)||u(G,t)},isTypedArray:Y,TypedArray:P,TypedArrayPrototype:M}},{"4142cc1b1f950662":"kjMtE",fa237bbf2050dd6d:"dqiQp","9603af1373955d3d":"5ygRS","1b44b7e19e6f660d":"2Pprm",af39713fe0cf7587:"adFpz",dd5eec94b1519471:"45yko",b9eebb2d4c13b0d6:"bAgVp","36a2290066710aa0":"dr0ui",fdfbb82e20f81a19:"mcZBn","81ef6d90bc6acdce":"2UU83","96421c541af03be5":"l5KAt",ab8263bb2af6274:"3Igu8",ba5da2480b30b79:"6P7xV",b6e4d282cbe3e34a:"i41Eo","3d5af0d43aa6e42b":"eG9HO","8007fa7370557b8e":"8wvVb","82848943f937d383":"fuP4a"}],"7B9e4":[function(e,t,i,r){var n=e("de35f4868f3fe074"),s=e("41f3b5783dddf1cc"),a=e("da813d2481635a75"),o=e("7ac9e92946b0cbd8"),h=e("d8dca2550bf1cdc9"),c=e("881de7865554c8ed"),l=e("9f7b0710000cb4e4"),d=o.ArrayBuffer,u=o.DataView,f=u.prototype,p=s(d.prototype.slice),g=s(f.getUint8),m=s(f.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:a(function(){return!new d(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(p&&void 0===t)return p(h(this),e);for(var i=h(this).byteLength,r=c(e,i),n=c(void 0===t?i:t,i),s=new d(l(n-r)),a=new u(this),o=new u(s),f=0;r<n;)m(o,f++,g(a,r++));return s}})},{de35f4868f3fe074:"b7GrG","41f3b5783dddf1cc":"dAU5H",da813d2481635a75:"45J7X","7ac9e92946b0cbd8":"gohOQ",d8dca2550bf1cdc9:"5dGJN","881de7865554c8ed":"65oaN","9f7b0710000cb4e4":"5nsMT"}],"1Q59p":[function(e,t,i,r){e("74f4b981aa6411a3")},{"74f4b981aa6411a3":"3oaHk"}],"3oaHk":[function(e,t,i,r){var n=e("664345bb7fe8c61e"),s=e("d2e56c5b87c54234");n({global:!0,constructor:!0,forced:!e("dcfbe8d3aa29ed0c")},{DataView:s.DataView})},{"664345bb7fe8c61e":"b7GrG",d2e56c5b87c54234:"gohOQ",dcfbe8d3aa29ed0c:"kjMtE"}],"6xo48":[function(e,t,i,r){var n=e("4fd5448dd8eb9cf0"),s=e("792b2b454d77100e"),a=Math.pow,o=a(2,-24),h=function(e){var t=e>>>15,i=e>>>10&31,r=1023&e;return 31===i?0===r?0===t?1/0:-1/0:NaN:0===i?r*(0===t?o:-o):a(2,i-15)*(0===t?1+9765625e-10*r:-1-9765625e-10*r)},c=s(DataView.prototype.getUint16);n({target:"DataView",proto:!0},{getFloat16:function(e){return h(c(this,e,arguments.length>1&&arguments[1]))}})},{"4fd5448dd8eb9cf0":"b7GrG","792b2b454d77100e":"cfIox"}],fT2pc:[function(e,t,i,r){var n=e("1ae6b224724e45d3"),s=e("f97b35a324f40e7c"),a=e("e86be420a2bf6183"),o=e("f85ec34be3d084d6"),h=e("890cc4967056e864"),c=e("afc36492c76557e"),l=Math.pow,d=function(e){if(e!=e)return 32256;if(0===e)return(1/e==-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=65520)return t<<15|31744;if(e<61005353927612305e-21)return t<<15|c(0x1000000*e);var i=0|h(e);if(-15===i)return t<<15|1024;var r=c((e*l(2,-i)-1)*1024);return 1024===r?t<<15|i+16<<10:t<<15|i+15<<10|r},u=s(DataView.prototype.setUint16);n({target:"DataView",proto:!0},{setFloat16:function(e,t){u(a(this),o(e),d(+t),arguments.length>2&&arguments[2])}})},{"1ae6b224724e45d3":"b7GrG",f97b35a324f40e7c:"cfIox",e86be420a2bf6183:"cGEug",f85ec34be3d084d6:"6zoys","890cc4967056e864":"leLzY",afc36492c76557e:"1BPCt"}],cGEug:[function(e,t,i,r){var n=e("6b22770cacc7549e"),s=TypeError;t.exports=function(e){if("DataView"===n(e))return e;throw new s("Argument is not a DataView")}},{"6b22770cacc7549e":"bAgVp"}],leLzY:[function(e,t,i,r){var n=Math.log,s=Math.LN2;t.exports=Math.log2||function(e){return n(e)/s}},{}],"3gUSv":[function(e,t,i,r){var n=e("4afad0ffba0997fe"),s=e("1f38b2f20cea2b57"),a=e("29214d0da9dcf89c"),o=ArrayBuffer.prototype;!n||"detached"in o||s(o,"detached",{configurable:!0,get:function(){return a(this)}})},{"4afad0ffba0997fe":"dqiQp","1f38b2f20cea2b57":"l5KAt","29214d0da9dcf89c":"fchrL"}],fchrL:[function(e,t,i,r){var n=e("a74f81ec628a755"),s=e("74cc8ed2c35dbce5"),a=e("1c879a4d774c0dbe"),o=n.DataView;t.exports=function(e){if(!s||0!==a(e))return!1;try{return new o(e),!1}catch(e){return!0}}},{a74f81ec628a755:"5ygRS","74cc8ed2c35dbce5":"kjMtE","1c879a4d774c0dbe":"34MeC"}],"34MeC":[function(e,t,i,r){var n=e("2df4c54bd722cbda"),s=e("e04982d3381ad895"),a=e("84928aa3dada9bb9"),o=n.ArrayBuffer,h=n.TypeError;t.exports=o&&s(o.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==a(e))throw new h("ArrayBuffer expected");return e.byteLength}},{"2df4c54bd722cbda":"5ygRS",e04982d3381ad895:"1BKbJ","84928aa3dada9bb9":"aQekt"}],ktBUd:[function(e,t,i,r){var n=e("68caecfc7f5f7898"),s=e("d4a059abed0e4bb2");s&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return s(this,arguments.length?arguments[0]:void 0,!0)}})},{"68caecfc7f5f7898":"b7GrG",d4a059abed0e4bb2:"3Pmxp"}],"3Pmxp":[function(e,t,i,r){var n=e("4a8d7e5bc585b76c"),s=e("da801b8a4e994b05"),a=e("d5239d81e98572fe"),o=e("536abebf9b00d3c9"),h=e("6d56209f1ad0e293"),c=e("8284bf21b869bbef"),l=e("7c07da0902b0024e"),d=e("c1c7dc990138d726"),u=n.structuredClone,f=n.ArrayBuffer,p=n.DataView,g=Math.min,m=f.prototype,v=p.prototype,y=s(m.slice),b=a(m,"resizable","get"),x=a(m,"maxByteLength","get"),E=s(v.getInt8),T=s(v.setInt8);t.exports=(d||l)&&function(e,t,i){var r,n=c(e),s=void 0===t?n:o(t),a=!b||!b(e);if(h(e),d&&(e=u(e,{transfer:[e]}),n===s&&(i||a)))return e;if(n>=s&&(!i||a))r=y(e,0,s);else{r=new f(s,i&&!a&&x?{maxByteLength:x(e)}:void 0);for(var m=new p(e),v=new p(r),A=g(s,n),w=0;w<A;w++)T(v,w,E(m,w))}return d||l(e),r}},{"4a8d7e5bc585b76c":"5ygRS",da801b8a4e994b05:"cfIox",d5239d81e98572fe:"1BKbJ","536abebf9b00d3c9":"6zoys","6d56209f1ad0e293":"l6j3Z","8284bf21b869bbef":"34MeC","7c07da0902b0024e":"gUreV",c1c7dc990138d726:"3FbCI"}],l6j3Z:[function(e,t,i,r){var n=e("331ab6556e4f0237"),s=TypeError;t.exports=function(e){if(n(e))throw new s("ArrayBuffer is detached");return e}},{"331ab6556e4f0237":"fchrL"}],gUreV:[function(e,t,i,r){var n,s,a,o,h=e("10167170de3921f0"),c=e("67902e2e85fa971d"),l=e("6c97418dfff24f84"),d=h.structuredClone,u=h.ArrayBuffer,f=h.MessageChannel,p=!1;if(l)p=function(e){d(e,{transfer:[e]})};else if(u)try{!f&&(n=c("worker_threads"))&&(f=n.MessageChannel),f&&(s=new f,a=new u(2),o=function(e){s.port1.postMessage(null,[e])},2===a.byteLength&&(o(a),0===a.byteLength&&(p=o)))}catch(e){}t.exports=p},{"10167170de3921f0":"5ygRS","67902e2e85fa971d":"73D5C","6c97418dfff24f84":"3FbCI"}],"73D5C":[function(e,t,i,r){var n=e("2c41f757a82b8a84"),s=e("bdcfef2315326ccc");t.exports=function(e){if(s){try{return n.process.getBuiltinModule(e)}catch(e){}try{return Function('return require("'+e+'")')()}catch(e){}}}},{"2c41f757a82b8a84":"5ygRS",bdcfef2315326ccc:"etN8h"}],"3FbCI":[function(e,t,i,r){var n=e("6bcfdfa15a0af40c"),s=e("5bfa734fa18d01bd"),a=e("504e63b697c2418c"),o=e("2f39a8269e626373"),h=n.structuredClone;t.exports=!!h&&!s(function(){if("DENO"===o&&a>92||"NODE"===o&&a>94||"BROWSER"===o&&a>97)return!1;var e=new ArrayBuffer(8),t=h(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},{"6bcfdfa15a0af40c":"5ygRS","5bfa734fa18d01bd":"45J7X","504e63b697c2418c":"jarVK","2f39a8269e626373":"iU9O4"}],h7jAY:[function(e,t,i,r){var n=e("2ee97e669ed348d2"),s=e("6010ab662274272a");s&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return s(this,arguments.length?arguments[0]:void 0,!1)}})},{"2ee97e669ed348d2":"b7GrG","6010ab662274272a":"3Pmxp"}],"7w8sx":[function(e,t,i,r){var n=e("cf63881ba58455e7"),s=e("712c5b724e238772"),a=e("9542983db09542aa")(function(){return 120!==new Date(16e11).getYear()}),o=s(Date.prototype.getFullYear);n({target:"Date",proto:!0,forced:a},{getYear:function(){return o(this)-1900}})},{cf63881ba58455e7:"b7GrG","712c5b724e238772":"cfIox","9542983db09542aa":"45J7X"}],"7kYan":[function(e,t,i,r){var n=e("1b76219dfd05b069"),s=e("9cd428d337baa08f"),a=Date,o=s(a.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return o(new a)}})},{"1b76219dfd05b069":"b7GrG","9cd428d337baa08f":"cfIox"}],"4f0wc":[function(e,t,i,r){var n=e("45b3958e6ed27545"),s=e("bb0b969d98296e93"),a=e("1bfaa736b448a80b"),o=Date.prototype,h=s(o.getTime),c=s(o.setFullYear);n({target:"Date",proto:!0},{setYear:function(e){h(this);var t=a(e);return c(this,t>=0&&t<=99?t+1900:t)}})},{"45b3958e6ed27545":"b7GrG",bb0b969d98296e93:"cfIox","1bfaa736b448a80b":"lOYVA"}],cO2Tq:[function(e,t,i,r){e("382df40000aa3419")({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},{"382df40000aa3419":"b7GrG"}],ksygU:[function(e,t,i,r){var n=e("ce28eb9d99ee133e"),s=e("f6428e9a2d433b20");n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==s},{toISOString:s})},{ce28eb9d99ee133e:"b7GrG",f6428e9a2d433b20:"j5pTn"}],j5pTn:[function(e,t,i,r){var n=e("8ef03d8aa78a1a05"),s=e("d77f9603e3197abc"),a=e("de264358de0ee0b0").start,o=RangeError,h=isFinite,c=Math.abs,l=Date.prototype,d=l.toISOString,u=n(l.getTime),f=n(l.getUTCDate),p=n(l.getUTCFullYear),g=n(l.getUTCHours),m=n(l.getUTCMilliseconds),v=n(l.getUTCMinutes),y=n(l.getUTCMonth),b=n(l.getUTCSeconds);t.exports=s(function(){return"0385-07-25T07:06:39.999Z"!==d.call(new Date(-0x2d79883d2001))})||!s(function(){d.call(new Date(NaN))})?function(){if(!h(u(this)))throw new o("Invalid time value");var e=p(this),t=m(this),i=e<0?"-":e>9999?"+":"";return i+a(c(e),i?6:4,0)+"-"+a(y(this)+1,2,0)+"-"+a(f(this),2,0)+"T"+a(g(this),2,0)+":"+a(v(this),2,0)+":"+a(b(this),2,0)+"."+a(t,3,0)+"Z"}:d},{"8ef03d8aa78a1a05":"cfIox",d77f9603e3197abc:"45J7X",de264358de0ee0b0:"ISKOw"}],ISKOw:[function(e,t,i,r){var n=e("3f3ae64f3613324a"),s=e("86f2220ab33aea88"),a=e("ce16e4ba37e115ac"),o=e("3fe5759e7801b635"),h=e("3c8ec8ea0d5bc9c"),c=n(o),l=n("".slice),d=Math.ceil,u=function(e){return function(t,i,r){var n,o,u=a(h(t)),f=s(i),p=u.length,g=void 0===r?" ":a(r);return f<=p||""===g?u:((o=c(g,d((n=f-p)/g.length))).length>n&&(o=l(o,0,n)),e?u+o:o+u)}};t.exports={start:u(!1),end:u(!0)}},{"3f3ae64f3613324a":"cfIox","86f2220ab33aea88":"5nsMT",ce16e4ba37e115ac:"2QNq8","3fe5759e7801b635":"9SY1f","3c8ec8ea0d5bc9c":"1ZNa0"}],"9SY1f":[function(e,t,i,r){var n=e("810ed4f57c077da5"),s=e("f870ae4664ae9b8c"),a=e("b05eac101d7c2112"),o=RangeError;t.exports=function(e){var t=s(a(this)),i="",r=n(e);if(r<0||r===1/0)throw new o("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(i+=t);return i}},{"810ed4f57c077da5":"lOYVA",f870ae4664ae9b8c:"2QNq8",b05eac101d7c2112:"1ZNa0"}],l6Va7:[function(e,t,i,r){var n=e("a9ca9c4e2bd47ff4"),s=e("b11d0c7c0b2675d5"),a=e("60b061d7c8f57ad8"),o=e("e362bf7168d77860");n({target:"Date",proto:!0,arity:1,forced:s(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})},{toJSON:function(e){var t=a(this),i=o(t,"number");return"number"!=typeof i||isFinite(i)?t.toISOString():null}})},{a9ca9c4e2bd47ff4:"b7GrG",b11d0c7c0b2675d5:"45J7X","60b061d7c8f57ad8":"eHl90",e362bf7168d77860:"5Zs4D"}],"3YoWU":[function(e,t,i,r){var n=e("af14b1f4d994a127"),s=e("53d6ff102d14faf"),a=e("5ca81c5eeb540a34"),o=e("5e5f3eb0bfd879e9")("toPrimitive"),h=Date.prototype;n(h,o)||s(h,o,a)},{af14b1f4d994a127:"45yko","53d6ff102d14faf":"2UU83","5ca81c5eeb540a34":"dsxpa","5e5f3eb0bfd879e9":"eG9HO"}],dsxpa:[function(e,t,i,r){var n=e("38c74c72615b5acf"),s=e("474ad3f08d0bd65b"),a=TypeError;t.exports=function(e){if(n(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw new a("Incorrect hint");return s(this,e)}},{"38c74c72615b5acf":"5dGJN","474ad3f08d0bd65b":"lcudK"}],d56Rg:[function(e,t,i,r){var n=e("be835518f2abbc78"),s=e("7997503c8dda7ce0"),a=Date.prototype,o="Invalid Date",h="toString",c=n(a[h]),l=n(a.getTime);String(new Date(NaN))!==o&&s(a,h,function(){var e=l(this);return e==e?c(this):o})},{be835518f2abbc78:"cfIox","7997503c8dda7ce0":"2UU83"}],"5qPnB":[function(e,t,i,r){var n=e("b0ad7ecb3cffa7ff"),s=e("dc9f04342c0b7b20"),a=e("ff22e50e8694f5e8"),o=e("28e15b0c25e3585b"),h=e("7c9554be10aea9a9"),c=e("33f181cb2abde186"),l=e("85c653ac469ee735"),d=e("645e795b7cc5fcf4"),u=e("b8af0e1ab4bf2f09"),f=e("29ac23becf470d42"),p=e("498857ae0480652a"),g=a("SuppressedError"),m=ReferenceError,v=u("dispose"),y=u("toStringTag"),b="DisposableStack",x=f.set,E=f.getterFor(b),T="sync-dispose",A="disposed",w=function(e){var t=E(e);if(t.state===A)throw new m(b+" already disposed");return t},S=function(){x(h(this,C),{type:b,state:"pending",stack:[]}),s||(this.disposed=!1)},C=S.prototype;l(C,{dispose:function(){var e,t=E(this);if(t.state!==A){t.state=A,s||(this.disposed=!0);for(var i=t.stack,r=i.length,n=!1;r;){var a=i[--r];i[r]=null;try{a()}catch(t){n?e=new g(t,e):(n=!0,e=t)}}if(t.stack=null,n)throw e}},use:function(e){return p(w(this),e,T),e},adopt:function(e,t){var i=w(this);return o(t),p(i,void 0,T,function(){t(e)}),e},defer:function(e){var t=w(this);o(e),p(t,void 0,T,e)},move:function(){var e=w(this),t=new S;return E(t).stack=e.stack,e.stack=[],e.state=A,s||(this.disposed=!0),t}}),s&&d(C,"disposed",{configurable:!0,get:function(){return E(this).state===A}}),c(C,v,C.dispose,{name:"dispose"}),c(C,y,b,{nonWritable:!0}),n({global:!0,constructor:!0},{DisposableStack:S})},{b0ad7ecb3cffa7ff:"b7GrG",dc9f04342c0b7b20:"dqiQp",ff22e50e8694f5e8:"2MF6I","28e15b0c25e3585b":"3m7Aa","7c9554be10aea9a9":"cYIbs","33f181cb2abde186":"2UU83","85c653ac469ee735":"8DWpB","645e795b7cc5fcf4":"l5KAt",b8af0e1ab4bf2f09:"eG9HO","29ac23becf470d42":"fuP4a","498857ae0480652a":"7w0mp"}],"7w0mp":[function(e,t,i,r){var n=e("959ce9443beafb23"),s=e("cba84b8061f0ab3f"),a=e("d109e30f0c28b00e"),o=e("f82cca2a0c48e586"),h=e("9d736c7f01a0f173"),c=e("318048ed59dbe331"),l=e("222b8c96fad8b8c0"),d=e("cc5bb1e5cf68268d"),u=e("a7e3479916f228f3"),f=u("asyncDispose"),p=u("dispose"),g=a([].push),m=function(e,t){if("async-dispose"===t){var i=d(e,f);return void 0!==i||void 0===(i=d(e,p))?i:function(){var e=this;return new(n("Promise"))(function(t){s(i,e),t(void 0)})}}return d(e,p)},v=function(e,t,i){return arguments.length<3&&!l(e)&&(i=c(m(h(e),t))),void 0===i?function(){}:o(i,e)};t.exports=function(e,t,i,r){var n;if(arguments.length<4){if(l(t)&&"sync-dispose"===i)return;n=v(t,i)}else n=v(void 0,i,r);g(e.stack,n)}},{"959ce9443beafb23":"2MF6I",cba84b8061f0ab3f:"kiToe",d109e30f0c28b00e:"cfIox",f82cca2a0c48e586:"gWc3u","9d736c7f01a0f173":"5dGJN","318048ed59dbe331":"3m7Aa","222b8c96fad8b8c0":"9RtqE",cc5bb1e5cf68268d:"7cH9N",a7e3479916f228f3:"eG9HO"}],fkNB3:[function(e,t,i,r){var n=e("ffabd3103ccbbe88"),s=e("3b0c6b91d4084705"),a=e("9544189b2ef4f6a8"),o=s("".charAt),h=s("".charCodeAt),c=s(/./.exec),l=s(1.1.toString),d=s("".toUpperCase),u=/[\w*+\-./@]/,f=function(e,t){for(var i=l(e,16);i.length<t;)i="0"+i;return i};n({global:!0},{escape:function(e){for(var t,i,r=a(e),n="",s=r.length,l=0;l<s;)c(u,t=o(r,l++))?n+=t:(i=h(t,0))<256?n+="%"+f(i,2):n+="%u"+d(f(i,4));return n}})},{ffabd3103ccbbe88:"b7GrG","3b0c6b91d4084705":"cfIox","9544189b2ef4f6a8":"2QNq8"}],"1EHpC":[function(e,t,i,r){var n=e("fe3dd044856b4976"),s=e("3cdb7fad3340a2a");n({target:"Function",proto:!0,forced:Function.bind!==s},{bind:s})},{fe3dd044856b4976:"b7GrG","3cdb7fad3340a2a":"7R8IK"}],"7R8IK":[function(e,t,i,r){var n=e("94a95e8ae25b0044"),s=e("4072cb1aa6784cb2"),a=e("16c540423602bd07"),o=e("2a423fe0321fe359"),h=e("29b660c46e7d5c44"),c=e("14cd4065b37036f8"),l=Function,d=n([].concat),u=n([].join),f={},p=function(e,t,i){if(!o(f,t)){for(var r=[],n=0;n<t;n++)r[n]="a["+n+"]";f[t]=l("C,a","return new C("+u(r,",")+")")}return f[t](e,i)};t.exports=c?l.bind:function(e){var t=s(this),i=t.prototype,r=h(arguments,1),n=function(){var i=d(r,h(arguments));return this instanceof n?p(t,i.length,i):t.apply(e,i)};return a(i)&&(n.prototype=i),n}},{"94a95e8ae25b0044":"cfIox","4072cb1aa6784cb2":"3m7Aa","16c540423602bd07":"adFpz","2a423fe0321fe359":"45yko","29b660c46e7d5c44":"lUArJ","14cd4065b37036f8":"sTOmG"}],cjF3u:[function(e,t,i,r){var n=e("b12e30f0adef9477"),s=e("bd77085fbbf1d61e"),a=e("cd75990201b9bb5"),o=e("753d0304b6cfae74"),h=e("96031184f21018fc"),c=e("ac5dcf87aefc69c2"),l=h("hasInstance"),d=Function.prototype;l in d||a.f(d,l,{value:c(function(e){if(!n(this)||!s(e))return!1;var t=this.prototype;return s(t)?o(t,e):e instanceof this},l)})},{b12e30f0adef9477:"2Pprm",bd77085fbbf1d61e:"adFpz",cd75990201b9bb5:"34YKB","753d0304b6cfae74":"3Igu8","96031184f21018fc":"eG9HO",ac5dcf87aefc69c2:"jn6p6"}],cJV8l:[function(e,t,i,r){var n=e("b7ae6c9060bb031e"),s=e("dbb3f5c37b15a691").EXISTS,a=e("ba7e18d66fc2fe0e"),o=e("c4fdf1e400153454"),h=Function.prototype,c=a(h.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(l.exec);n&&!s&&o(h,"name",{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(e){return""}}})},{b7ae6c9060bb031e:"dqiQp",dbb3f5c37b15a691:"dGPBk",ba7e18d66fc2fe0e:"cfIox",c4fdf1e400153454:"l5KAt"}],gF2mq:[function(e,t,i,r){var n=e("dafde8a742696c07"),s=e("74e2eda3b2fe749e");n({global:!0,forced:s.globalThis!==s},{globalThis:s})},{dafde8a742696c07:"b7GrG","74e2eda3b2fe749e":"5ygRS"}],aDf5D:[function(e,t,i,r){var n=e("3ea4519fe8d8767c"),s=e("f682905cf0777dea"),a=e("28d64d466101e260"),o=e("77697c6189ac1592"),h=e("b92a35f8afc3ecab"),c=e("4f05e88be4d3e1a4"),l=e("296b3b975849b32b"),d=e("fe7b26b4bf7a3bbc"),u=e("475636f76be5c6eb"),f=e("d8cf3503bdfeb1ab"),p=e("57c42e38adcdb685"),g=e("b8e8bc57f3f386ac").IteratorPrototype,m=e("6302500f1ed70985"),v=e("589f3cf5b5197a9"),y="constructor",b="Iterator",x=p("toStringTag"),E=TypeError,T=s[b],A=v||!h(T)||T.prototype!==g||!u(function(){T({})}),w=function(){if(a(this,g),c(this)===g)throw new E("Abstract class Iterator not directly constructable")},S=function(e,t){m?l(g,e,{configurable:!0,get:function(){return t},set:function(t){if(o(this),this===g)throw new E("You can't redefine this property");f(this,e)?this[e]=t:d(this,e,t)}}):g[e]=t};f(g,x)||S(x,b),(A||!f(g,y)||g[y]===Object)&&S(y,w),w.prototype=g,n({global:!0,constructor:!0,forced:A},{Iterator:w})},{"3ea4519fe8d8767c":"b7GrG",f682905cf0777dea:"5ygRS","28d64d466101e260":"cYIbs","77697c6189ac1592":"5dGJN",b92a35f8afc3ecab:"2Pprm","4f05e88be4d3e1a4":"6P7xV","296b3b975849b32b":"l5KAt",fe7b26b4bf7a3bbc:"fb5iK","475636f76be5c6eb":"45J7X",d8cf3503bdfeb1ab:"45yko","57c42e38adcdb685":"eG9HO",b8e8bc57f3f386ac:"8Nvhm","6302500f1ed70985":"dqiQp","589f3cf5b5197a9":"lssMj"}],dmsaK:[function(e,t,i,r){var n=e("4f20f892c08046e5"),s=e("bd3d1f4fb7c6ef1c"),a=e("9c8c1df4d88d210f"),o=e("4a3ad7b57138d608"),h=e("40c233bca9ca784b"),c=e("7632dd73c9adfecc"),l=Array,d=c(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,i=this.iterables;if(t>=i.length){this.done=!0;return}var r=i[t];this.iterables[t]=null,e=this.iterator=s(r.method,r.iterable),this.next=e.next}var n=o(s(this.next,e));if(n.done){this.iterator=null,this.next=null;continue}return n.value}});n({target:"Iterator",stat:!0},{concat:function(){for(var e=arguments.length,t=l(e),i=0;i<e;i++){var r=o(arguments[i]);t[i]={iterable:r,method:a(h(r))}}return new d({iterables:t,nextIterableIndex:0,iterator:null,next:null})}})},{"4f20f892c08046e5":"b7GrG",bd3d1f4fb7c6ef1c:"kiToe","9c8c1df4d88d210f":"3m7Aa","4a3ad7b57138d608":"5dGJN","40c233bca9ca784b":"2JETE","7632dd73c9adfecc":"8RtYA"}],"8RtYA":[function(e,t,i,r){var n=e("bf7dea94b378e4d2"),s=e("9f20471f1112427e"),a=e("aedd7124ed29fad6"),o=e("3b52621b4d406534"),h=e("dc75c601d893b189"),c=e("224190bbaa70528d"),l=e("6855d0e1c14cdf36"),d=e("4ae15a9804697ee").IteratorPrototype,u=e("496e21b03d32048e"),f=e("2d23aab286123e49"),p=e("23e45b621da7b270"),g=h("toStringTag"),m="IteratorHelper",v="WrapForValidIterator",y="normal",b="throw",x=c.set,E=function(e){var t=c.getterFor(e?v:m);return o(s(d),{next:function(){var i=t(this);if(e)return i.nextHandler();if(i.done)return u(void 0,!0);try{var r=i.nextHandler();return i.returnHandlerResult?r:u(r,i.done)}catch(e){throw i.done=!0,e}},return:function(){var i=t(this),r=i.iterator;if(i.done=!0,e){var s=l(r,"return");return s?n(s,r):u(void 0,!0)}if(i.inner)try{f(i.inner.iterator,y)}catch(e){return f(r,b,e)}if(i.openIters)try{p(i.openIters,y)}catch(e){return f(r,b,e)}return r&&f(r,y),u(void 0,!0)}})},T=E(!0),A=E(!1);a(A,g,"Iterator Helper"),t.exports=function(e,t,i){var r=function(r,n){n?(n.iterator=r.iterator,n.next=r.next):n=r,n.type=t?v:m,n.returnHandlerResult=!!i,n.nextHandler=e,n.counter=0,n.done=!1,x(this,n)};return r.prototype=t?T:A,r}},{bf7dea94b378e4d2:"kiToe","9f20471f1112427e":"gg5Dl",aedd7124ed29fad6:"mcZBn","3b52621b4d406534":"8DWpB",dc75c601d893b189:"eG9HO","224190bbaa70528d":"fuP4a","6855d0e1c14cdf36":"7cH9N","4ae15a9804697ee":"8Nvhm","496e21b03d32048e":"k6wXP","2d23aab286123e49":"4rTZx","23e45b621da7b270":"2gaOO"}],"2gaOO":[function(e,t,i,r){var n=e("4b0d686a769f9946");t.exports=function(e,t,i){for(var r=e.length-1;r>=0;r--)if(void 0!==e[r])try{i=n(e[r].iterator,t,i)}catch(e){t="throw",i=e}if("throw"===t)throw i;return i}},{"4b0d686a769f9946":"4rTZx"}],"1dKWm":[function(e,t,i,r){var n=e("22475535e51073e6"),s=e("e233823be506d31b"),a=e("607572b669b5e247"),o=e("b4c40545ff65c964"),h=e("be27a5be9c8e365e"),c=e("69d118983ef06eb7").IteratorPrototype,l=h("dispose");o(c,l)||s(c,l,function(){var e=a(this,"return");e&&n(e,this)})},{"22475535e51073e6":"kiToe",e233823be506d31b:"2UU83","607572b669b5e247":"7cH9N",b4c40545ff65c964:"45yko",be27a5be9c8e365e:"eG9HO","69d118983ef06eb7":"8Nvhm"}],f6zvs:[function(e,t,i,r){var n=e("4e75fe663bd8178c"),s=e("8ba1fb01c65279f3"),a=e("4f0b8c20b948eb0f"),o=e("5eb6363ab600a764"),h=e("84d37b676cdd3bca"),c=e("31599b8af07552c0"),l=e("9b6b11023bbc405e"),d=e("8c5a9cd7160d5977"),u=e("88081dfb88619f9e"),f=e("b64d1a9d78fdc444"),p=e("e7721f8a5d24ac7b"),g=!p&&!u("drop",0),m=!p&&!g&&f("drop",RangeError),v=p||g||m,y=d(function(){for(var e,t,i=this.iterator,r=this.next;this.remaining;)if(this.remaining--,e=a(s(r,i)),this.done=!!e.done)return;if(e=a(s(r,i)),!(this.done=!!e.done))return e.value});n({target:"Iterator",proto:!0,real:!0,forced:v},{drop:function(e){var t;a(this);try{t=c(h(+e))}catch(e){l(this,"throw",e)}return m?s(m,this,t):new y(o(this),{remaining:t})}})},{"4e75fe663bd8178c":"b7GrG","8ba1fb01c65279f3":"kiToe","4f0b8c20b948eb0f":"5dGJN","5eb6363ab600a764":"3AYN9","84d37b676cdd3bca":"fTIqo","31599b8af07552c0":"etxmb","9b6b11023bbc405e":"4rTZx","8c5a9cd7160d5977":"8RtYA","88081dfb88619f9e":"3PKYA",b64d1a9d78fdc444:"k0qqZ",e7721f8a5d24ac7b:"lssMj"}],"3AYN9":[function(e,t,i,r){t.exports=function(e){return{iterator:e,next:e.next,done:!1}}},{}],fTIqo:[function(e,t,i,r){var n=RangeError;t.exports=function(e){if(e==e)return e;throw new n("NaN is not allowed")}},{}],etxmb:[function(e,t,i,r){var n=e("e509d82728a7abb4"),s=RangeError;t.exports=function(e){var t=n(e);if(t<0)throw new s("The argument can't be less than 0");return t}},{e509d82728a7abb4:"lOYVA"}],"3PKYA":[function(e,t,i,r){t.exports=function(e,t){var i="function"==typeof Iterator&&Iterator.prototype[e];if(i)try{i.call({next:null},t).next()}catch(e){return!0}}},{}],k0qqZ:[function(e,t,i,r){var n=e("1310554753815607");t.exports=function(e,t){var i=n.Iterator,r=i&&i.prototype,s=r&&r[e],a=!1;if(s)try{s.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(e){e instanceof t||(a=!1)}if(!a)return s}},{"1310554753815607":"5ygRS"}],bqitu:[function(e,t,i,r){var n=e("4315c3f51744b7cf"),s=e("844434eebaaac224"),a=e("d201a83eb0c4d7c"),o=e("4efc7a663e425a34"),h=e("37d29fd3e7b0ef2e"),c=e("54533d53c2a484bf"),l=e("6bef53c843df3fb2"),d=e("2889264ddc6f593c")("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(e){h(this);try{o(e)}catch(e){l(this,"throw",e)}if(d)return s(d,this,e);var t=c(this),i=0;return!a(t,function(t,r){if(!e(t,i++))return r()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},{"4315c3f51744b7cf":"b7GrG","844434eebaaac224":"kiToe",d201a83eb0c4d7c:"5ZCpM","4efc7a663e425a34":"3m7Aa","37d29fd3e7b0ef2e":"5dGJN","54533d53c2a484bf":"3AYN9","6bef53c843df3fb2":"4rTZx","2889264ddc6f593c":"k0qqZ"}],JN4nd:[function(e,t,i,r){var n=e("1c857da99ae8bb2b"),s=e("aade04ff380cb917"),a=e("587bdbef575ae864"),o=e("30bdbec130771621"),h=e("76d1ed5422ec7f95"),c=e("7f4c9fc2e1a8e7c9"),l=e("99faecf35edd6597"),d=e("c5ccec8d40439f96"),u=e("23ee9c378b637360"),f=e("421e62af3e1cf1d4"),p=e("20ac34c2b45abb67"),g=!d&&!f("filter",function(){}),m=!d&&!g&&p("filter",TypeError),v=d||g||m,y=c(function(){for(var e,t,i=this.iterator,r=this.predicate,n=this.next;;){if(e=o(s(n,i)),this.done=!!e.done)return;if(l(i,r,[t=e.value,this.counter++],!0))return t}});n({target:"Iterator",proto:!0,real:!0,forced:v},{filter:function(e){o(this);try{a(e)}catch(e){u(this,"throw",e)}return m?s(m,this,e):new y(h(this),{predicate:e})}})},{"1c857da99ae8bb2b":"b7GrG",aade04ff380cb917:"kiToe","587bdbef575ae864":"3m7Aa","30bdbec130771621":"5dGJN","76d1ed5422ec7f95":"3AYN9","7f4c9fc2e1a8e7c9":"8RtYA","99faecf35edd6597":"hX41f",c5ccec8d40439f96:"lssMj","23ee9c378b637360":"4rTZx","421e62af3e1cf1d4":"3PKYA","20ac34c2b45abb67":"k0qqZ"}],"55Dww":[function(e,t,i,r){var n=e("aa4968967d90e4ac"),s=e("ad5ff66b07e382cc"),a=e("5366bf21fa382adc"),o=e("b8d21b3590d17c7e"),h=e("5674492c0746f03e"),c=e("433d457a030b10f4"),l=e("5d93865d9be6d60d"),d=e("174e154d77a02b47")("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){h(this);try{o(e)}catch(e){l(this,"throw",e)}if(d)return s(d,this,e);var t=c(this),i=0;return a(t,function(t,r){if(e(t,i++))return r(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},{aa4968967d90e4ac:"b7GrG",ad5ff66b07e382cc:"kiToe","5366bf21fa382adc":"5ZCpM",b8d21b3590d17c7e:"3m7Aa","5674492c0746f03e":"5dGJN","433d457a030b10f4":"3AYN9","5d93865d9be6d60d":"4rTZx","174e154d77a02b47":"k0qqZ"}],bSgM7:[function(e,t,i,r){var n=e("4d0e03a037a98e89"),s=e("cb18884046ea41a8"),a=e("278ed3595a63063d"),o=e("8758e8b66a3beedc"),h=e("f465c313ac2d5808"),c=e("a76822f099914d65"),l=e("b571de05f6c7c1ec"),d=e("e7658123d7aa579f"),u=e("2930358c681fa2c1"),f=e("23a1c3c03c05f77b"),p=e("6f1f660ef320b635"),g=!u&&!f("flatMap",function(){}),m=!u&&!g&&p("flatMap",TypeError),v=u||g||m,y=l(function(){for(var e,t,i=this.iterator,r=this.mapper;;){if(t=this.inner)try{if(!(e=o(s(t.next,t.iterator))).done)return e.value;this.inner=null}catch(e){d(i,"throw",e)}if(e=o(s(this.next,i)),this.done=!!e.done)return;try{this.inner=c(r(e.value,this.counter++),!1)}catch(e){d(i,"throw",e)}}});n({target:"Iterator",proto:!0,real:!0,forced:v},{flatMap:function(e){o(this);try{a(e)}catch(e){d(this,"throw",e)}return m?s(m,this,e):new y(h(this),{mapper:e,inner:null})}})},{"4d0e03a037a98e89":"b7GrG",cb18884046ea41a8:"kiToe","278ed3595a63063d":"3m7Aa","8758e8b66a3beedc":"5dGJN",f465c313ac2d5808:"3AYN9",a76822f099914d65:"hoF1a",b571de05f6c7c1ec:"8RtYA",e7658123d7aa579f:"4rTZx","2930358c681fa2c1":"lssMj","23a1c3c03c05f77b":"3PKYA","6f1f660ef320b635":"k0qqZ"}],hoF1a:[function(e,t,i,r){var n=e("a862e3595fb5874a"),s=e("64a05f853433115b"),a=e("d8c75db7f7e68949"),o=e("b2126f347761d3c8");t.exports=function(e,t){t&&"string"==typeof e||s(e);var i=o(e);return a(s(void 0!==i?n(i,e):e))}},{a862e3595fb5874a:"kiToe","64a05f853433115b":"5dGJN",d8c75db7f7e68949:"3AYN9",b2126f347761d3c8:"2JETE"}],"9ABTM":[function(e,t,i,r){var n=e("b633004da54a8c74"),s=e("91a286a73edbb64e"),a=e("be2e1e5cf8a93b81"),o=e("7d84ec8cb27009ca"),h=e("e7dd2855750a78f2"),c=e("3d252b15d6e4ed62"),l=e("1e9870aba456a0ba"),d=e("ae5930dc2f8daabc")("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){h(this);try{o(e)}catch(e){l(this,"throw",e)}if(d)return s(d,this,e);var t=c(this),i=0;a(t,function(t){e(t,i++)},{IS_RECORD:!0})}})},{b633004da54a8c74:"b7GrG","91a286a73edbb64e":"kiToe",be2e1e5cf8a93b81:"5ZCpM","7d84ec8cb27009ca":"3m7Aa",e7dd2855750a78f2:"5dGJN","3d252b15d6e4ed62":"3AYN9","1e9870aba456a0ba":"4rTZx",ae5930dc2f8daabc:"k0qqZ"}],"2LC5t":[function(e,t,i,r){var n=e("3e198fbdc6ce7880"),s=e("bc1a872728468a62"),a=e("d456c64771e0a27a"),o=e("79b23655149c44c7"),h=e("2b4b2d854a48f64e").IteratorPrototype,c=e("684540af8b4032d"),l=e("de05d6fd587bf1cd"),d=e("775b408350f57cdf")||function(){try{Iterator.from({return:null}).return()}catch(e){return!0}}(),u=c(function(){return s(this.next,this.iterator)},!0);n({target:"Iterator",stat:!0,forced:d},{from:function(e){var t=l("string"==typeof e?a(e):e,!0);return o(h,t.iterator)?t.iterator:new u(t)}})},{"3e198fbdc6ce7880":"b7GrG",bc1a872728468a62:"kiToe",d456c64771e0a27a:"eHl90","79b23655149c44c7":"3Igu8","2b4b2d854a48f64e":"8Nvhm","684540af8b4032d":"8RtYA",de05d6fd587bf1cd:"hoF1a","775b408350f57cdf":"lssMj"}],"6IHeL":[function(e,t,i,r){var n=e("fecdb119c8fdc954"),s=e("ef9a68fdf70417d2"),a=e("d224e2e6a76d3b49"),o=e("1e48bc0500a49fcc"),h=e("7534bf5097287f32"),c=e("88d5c3cfd3593cd5"),l=e("e5a26af0eb3c7ff7"),d=e("4c22aee9db61bd07"),u=e("867a22b7785d406f"),f=e("8ade69e6889f0aee"),p=e("552047c6b328f2ea"),g=!p&&!u("map",function(){}),m=!p&&!g&&f("map",TypeError),v=p||g||m,y=c(function(){var e=this.iterator,t=o(s(this.next,e));if(!(this.done=!!t.done))return l(e,this.mapper,[t.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(e){o(this);try{a(e)}catch(e){d(this,"throw",e)}return m?s(m,this,e):new y(h(this),{mapper:e})}})},{fecdb119c8fdc954:"b7GrG",ef9a68fdf70417d2:"kiToe",d224e2e6a76d3b49:"3m7Aa","1e48bc0500a49fcc":"5dGJN","7534bf5097287f32":"3AYN9","88d5c3cfd3593cd5":"8RtYA",e5a26af0eb3c7ff7:"hX41f","4c22aee9db61bd07":"4rTZx","867a22b7785d406f":"3PKYA","8ade69e6889f0aee":"k0qqZ","552047c6b328f2ea":"lssMj"}],"99lnS":[function(e,t,i,r){var n=e("5f64a2bb084982f3"),s=e("c2bdf15d1ea0293e"),a=e("9bf3beec603be4e6"),o=e("23550e7aa2b24cca"),h=e("80e58cb70f81d0f8"),c=e("ff550f25a4917b4"),l=e("266b5bdb1b1d3faa"),d=e("b9c533e59d4ae961"),u=e("a1d816c383d6193c"),f=TypeError,p=u(function(){[].keys().reduce(function(){},void 0)}),g=!p&&l("reduce",f);n({target:"Iterator",proto:!0,real:!0,forced:p||g},{reduce:function(e){o(this);try{a(e)}catch(e){c(this,"throw",e)}var t=arguments.length<2,i=t?void 0:arguments[1];if(g)return d(g,this,t?[e]:[e,i]);var r=h(this),n=0;if(s(r,function(r){t?(t=!1,i=r):i=e(i,r,n),n++},{IS_RECORD:!0}),t)throw new f("Reduce of empty iterator with no initial value");return i}})},{"5f64a2bb084982f3":"b7GrG",c2bdf15d1ea0293e:"5ZCpM","9bf3beec603be4e6":"3m7Aa","23550e7aa2b24cca":"5dGJN","80e58cb70f81d0f8":"3AYN9",ff550f25a4917b4:"4rTZx","266b5bdb1b1d3faa":"k0qqZ",b9c533e59d4ae961:"72fZp",a1d816c383d6193c:"45J7X"}],juGo6:[function(e,t,i,r){var n=e("4a4df0c55b14d56f"),s=e("dc68a4a8ece079e0"),a=e("bd336241c9e2c96a"),o=e("c63636511b47d95d"),h=e("aaf9d7279420e97e"),c=e("4beb129a5fea4112"),l=e("309d4cd88f314bab"),d=e("207dedb11ff461f7")("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(e){h(this);try{o(e)}catch(e){l(this,"throw",e)}if(d)return s(d,this,e);var t=c(this),i=0;return a(t,function(t,r){if(e(t,i++))return r()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},{"4a4df0c55b14d56f":"b7GrG",dc68a4a8ece079e0:"kiToe",bd336241c9e2c96a:"5ZCpM",c63636511b47d95d:"3m7Aa",aaf9d7279420e97e:"5dGJN","4beb129a5fea4112":"3AYN9","309d4cd88f314bab":"4rTZx","207dedb11ff461f7":"k0qqZ"}],eFG91:[function(e,t,i,r){var n=e("eaceea009f896c4f"),s=e("6fd19d75ae436db4"),a=e("804225007e9ca124"),o=e("354c4550199b6b57"),h=e("c05a497a3952d08f"),c=e("d0d526d061df4e4f"),l=e("3985c1c78ac216f4"),d=e("d994c2939d1a301d"),u=e("8d68f41adefc36f3"),f=e("473113b8f68a663c"),p=!f&&u("take",RangeError),g=l(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,d(e,"normal",void 0);var t=a(s(this.next,e));if(!(this.done=!!t.done))return t.value});n({target:"Iterator",proto:!0,real:!0,forced:f||p},{take:function(e){var t;a(this);try{t=c(h(+e))}catch(e){d(this,"throw",e)}return p?s(p,this,t):new g(o(this),{remaining:t})}})},{eaceea009f896c4f:"b7GrG","6fd19d75ae436db4":"kiToe","804225007e9ca124":"5dGJN","354c4550199b6b57":"3AYN9",c05a497a3952d08f:"fTIqo",d0d526d061df4e4f:"etxmb","3985c1c78ac216f4":"8RtYA",d994c2939d1a301d:"4rTZx","8d68f41adefc36f3":"k0qqZ","473113b8f68a663c":"lssMj"}],bj6bx:[function(e,t,i,r){var n=e("e1dca2b7da04a9a8"),s=e("41a975f004dd39fe"),a=e("d63b62918b0f6e07"),o=e("99fc12b50172a5fb"),h=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return a(o(s(this)),h,{that:e,IS_RECORD:!0}),e}})},{e1dca2b7da04a9a8:"b7GrG","41a975f004dd39fe":"5dGJN",d63b62918b0f6e07:"5ZCpM","99fc12b50172a5fb":"3AYN9"}],"91yPx":[function(e,t,i,r){e("3d7c6fd45bc69f46")({target:"JSON",stat:!0,forced:!e("e71906f1bb328e60")},{isRawJSON:e("1574ebb9294e1020")})},{"3d7c6fd45bc69f46":"b7GrG",e71906f1bb328e60:"4rGDr","1574ebb9294e1020":"doZuh"}],"1ldob":[function(e,t,i,r){var n=e("176ed5cd47d55194"),s=e("f3b8b9ed16253aed"),a=e("1264ab55423277f0"),o=e("fd03e7b18e58f424"),h=e("b211fe9a5401c9e6"),c=e("4f62df586c6de29a"),l=e("3eac7673688c9603"),d=e("8a093bd1f28c92dc"),u=e("6a7ef2d27521b165"),f=e("bd1fb16ded24d55"),p=e("c3ba6937cf661fb7"),g=e("8e2e1bed9ff0bb2d"),m=e("a1718dbdb4cf9293"),v=e("d4bd8fd84531996c"),y=e("3b7ec61cb83d6bba"),b=e("cb7b421933eb27f4"),x=a.JSON,E=a.Number,T=a.SyntaxError,A=x&&x.parse,w=o("Object","keys"),S=Object.getOwnPropertyDescriptor,C=h("".charAt),I=h("".slice),_=h(/./.exec),O=h([].push),P=/^\d$/,M=/^[1-9]$/,R=/^[\d-]$/,L=/^[\t\n\r ]$/,D=function(e,t){var i=new B(e=p(e),0,""),r=i.parse(),n=r.value,s=i.skip(L,r.end);if(s<e.length)throw new T('Unexpected extra character: "'+C(e,s)+'" after the parsed data at: '+s);return l(t)?k({"":n},"",t,r):n},k=function(e,t,i,r){var n,s,a,o,h,l=e[t],p=r&&l===r.value,m=p&&"string"==typeof r.source?{source:r.source}:{};if(d(l)){var v=u(l),y=p?r.nodes:v?[]:{};if(v)for(o=0,n=y.length,a=g(l);o<a;o++)N(l,o,k(l,""+o,i,o<n?y[o]:void 0));else for(o=0,a=g(s=w(l));o<a;o++)N(l,h=s[o],k(l,h,i,f(y,h)?y[h]:void 0))}return c(i,e,t,l,m)},N=function(e,t,i){if(s){var r=S(e,t);if(r&&!r.configurable)return}void 0===i?delete e[t]:m(e,t,i)},F=function(e,t,i,r){this.value=e,this.end=t,this.source=i,this.nodes=r},B=function(e,t){this.source=e,this.index=t};B.prototype={fork:function(e){return new B(this.source,e)},parse:function(){var e=this.source,t=this.skip(L,this.index),i=this.fork(t),r=C(e,t);if(_(R,r))return i.number();switch(r){case"{":return i.object();case"[":return i.array();case'"':return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new T('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,i,r,n){return new F(t,r,e?null:I(this.source,i,r),n)},object:function(){for(var e=this.source,t=this.index+1,i=!1,r={},n={};t<e.length;){if("}"===C(e,t=this.until(['"',"}"],t))&&!i){t++;break}var s=this.fork(t).string(),a=s.value;t=s.end,t=this.until([":"],t)+1,t=this.skip(L,t),m(n,a,s=this.fork(t).parse()),m(r,a,s.value);var o=C(e,t=this.until([",","}"],s.end));if(","===o)i=!0,t++;else if("}"===o){t++;break}}return this.node(1,r,this.index,t,n)},array:function(){for(var e=this.source,t=this.index+1,i=!1,r=[],n=[];t<e.length;){if("]"===C(e,t=this.skip(L,t))&&!i){t++;break}var s=this.fork(t).parse();if(O(n,s),O(r,s.value),","===C(e,t=this.until([",","]"],s.end)))i=!0,t++;else if("]"===C(e,t)){t++;break}}return this.node(1,r,this.index,t,n)},string:function(){var e=this.index,t=y(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,i=t;if("-"===C(e,i)&&i++,"0"===C(e,i))i++;else if(_(M,C(e,i)))i=this.skip(P,i+1);else throw new T("Failed to parse number at: "+i);if("."===C(e,i)&&(i=this.skip(P,i+1)),("e"===C(e,i)||"E"===C(e,i))&&(("+"===C(e,++i)||"-"===C(e,i))&&i++,i===(i=this.skip(P,i))))throw new T("Failed to parse number's exponent value at: "+i);return this.node(0,E(I(e,t,i)),t,i)},keyword:function(e){var t=""+e,i=this.index,r=i+t.length;if(I(this.source,i,r)!==t)throw new T("Failed to parse value at: "+i);return this.node(0,e,i,r)},skip:function(e,t){for(var i=this.source;t<i.length&&_(e,C(i,t));t++);return t},until:function(e,t){t=this.skip(L,t);for(var i=C(this.source,t),r=0;r<e.length;r++)if(e[r]===i)return t;throw new T('Unexpected character: "'+i+'" at: '+t)}};var U=v(function(){var e,t="9007199254740993";return A(t,function(t,i,r){e=r.source}),e!==t}),G=b&&!v(function(){return 1/A("-0 	")!=-1/0});n({target:"JSON",stat:!0,forced:U},{parse:function(e,t){return G&&!l(t)?A(e):D(e,t)}})},{"176ed5cd47d55194":"b7GrG",f3b8b9ed16253aed:"dqiQp","1264ab55423277f0":"5ygRS",fd03e7b18e58f424:"2MF6I",b211fe9a5401c9e6:"cfIox","4f62df586c6de29a":"kiToe","3eac7673688c9603":"2Pprm","8a093bd1f28c92dc":"adFpz","6a7ef2d27521b165":"8hZ2S",bd1fb16ded24d55:"45yko",c3ba6937cf661fb7:"2QNq8","8e2e1bed9ff0bb2d":"fuf58",a1718dbdb4cf9293:"fb5iK",d4bd8fd84531996c:"45J7X","3b7ec61cb83d6bba":"b9SUN",cb7b421933eb27f4:"cWqkU"}],hkjqJ:[function(e,t,i,r){var n=e("cd6659203d5d5c0"),s=e("d5ffd89d1c2763cb"),a=e("3945bcfc3ae9eed1"),o=e("22497c813ece4297"),h=e("bb6364a822ba8fa8"),c=e("dc9173282be14c55"),l=e("64c4b8fe99d20ba6"),d=e("e251ba2a824540ae").set,u=SyntaxError,f=o("JSON","parse"),p=o("Object","create"),g=o("Object","freeze"),m=h("".charAt),v="Unacceptable as raw JSON",y=function(e){return" "===e||"	"===e||"\n"===e||"\r"===e};n({target:"JSON",stat:!0,forced:!a},{rawJSON:function(e){var t=c(e);if(""===t||y(m(t,0))||y(m(t,t.length-1)))throw new u(v);var i=f(t);if("object"==typeof i&&null!==i)throw new u(v);var r=p(null);return d(r,{type:"RawJSON"}),l(r,"rawJSON",t),s?g(r):r}})},{cd6659203d5d5c0:"b7GrG",d5ffd89d1c2763cb:"bk8fh","3945bcfc3ae9eed1":"4rGDr","22497c813ece4297":"2MF6I",bb6364a822ba8fa8:"cfIox",dc9173282be14c55:"2QNq8","64c4b8fe99d20ba6":"fb5iK",e251ba2a824540ae:"fuP4a"}],bk8fh:[function(e,t,i,r){t.exports=!e("388690d33020cebb")(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"388690d33020cebb":"45J7X"}],jHAZR:[function(e,t,i,r){var n=e("66109b3bb99843e");e("925145db661479ea")(n.JSON,"JSON",!0)},{"66109b3bb99843e":"5ygRS","925145db661479ea":"ksXqH"}],lUPBQ:[function(e,t,i,r){e("569f941c898a31a4")},{"569f941c898a31a4":"h8bgJ"}],h8bgJ:[function(e,t,i,r){e("d6ad832f14f0fa71")("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},e("bfbad00b2e97bcca"))},{d6ad832f14f0fa71:"1e2fN",bfbad00b2e97bcca:"5M7mx"}],"1e2fN":[function(e,t,i,r){var n=e("7f7d2ffaf036b70c"),s=e("23fed902470e3d4c"),a=e("58d7b96f0152237"),o=e("30876c2e1f5df872"),h=e("b827fda460342f0d"),c=e("6163d338080ca134"),l=e("f05c3889843e7603"),d=e("38cbb680894f59a3"),u=e("799d274b4fe226e7"),f=e("36192c2af1f673a1"),p=e("9e3db26fb26723ec"),g=e("f5cb548db0e3391e"),m=e("80e8f5144d6954d9"),v=e("4fbd135f98af11c4"),y=e("585a6aeda8432eb3");t.exports=function(e,t,i){var r=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),x=r?"set":"add",E=s[e],T=E&&E.prototype,A=E,w={},S=function(e){var t=a(T[e]);h(T,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return(!b||!!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return b&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return(!b||!!p(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})};if(o(e,!u(E)||!(b||T.forEach&&!g(function(){new E().entries().next()}))))A=i.getConstructor(t,e,r,x),c.enable();else if(o(e,!0)){var C=new A,I=C[x](b?{}:-0,1)!==C,_=g(function(){C.has(1)}),O=m(function(e){new E(e)}),P=!b&&g(function(){for(var e=new E,t=5;t--;)e[x](t,t);return!e.has(-0)});O||((A=t(function(e,t){d(e,T);var i=y(new E,e,A);return f(t)||l(t,i[x],{that:i,AS_ENTRIES:r}),i})).prototype=T,T.constructor=A),(_||P)&&(S("delete"),S("has"),r&&S("get")),(P||I)&&S(x),b&&T.clear&&delete T.clear}return w[e]=A,n({global:!0,constructor:!0,forced:A!==E},w),v(A,e),b||i.setStrong(A,e,r),A}},{"7f7d2ffaf036b70c":"b7GrG","23fed902470e3d4c":"5ygRS","58d7b96f0152237":"cfIox","30876c2e1f5df872":"c9nTu",b827fda460342f0d:"2UU83","6163d338080ca134":"5D5Ei",f05c3889843e7603:"5ZCpM","38cbb680894f59a3":"cYIbs","799d274b4fe226e7":"2Pprm","36192c2af1f673a1":"9RtqE","9e3db26fb26723ec":"adFpz",f5cb548db0e3391e:"45J7X","80e8f5144d6954d9":"67emE","4fbd135f98af11c4":"ksXqH","585a6aeda8432eb3":"kzdOP"}],"5D5Ei":[function(e,t,i,r){var n=e("3242fc68c548334b"),s=e("d7dc323978454584"),a=e("33c7a5cefcfa8a48"),o=e("949cc173e657f4a8"),h=e("e6764a7848fbe604"),c=e("77d05ce7ff38a94f").f,l=e("491415e519a00a7c"),d=e("1a3edc3a1e92ccaf"),u=e("1f8f4e666c381f6"),f=e("2f09fd9212a3372e"),p=e("858ced62f45384ee"),g=!1,m=f("meta"),v=0,y=function(e){c(e,m,{value:{objectID:"O"+v++,weakData:{}}})},b=t.exports={enable:function(){b.enable=function(){},g=!0;var e=l.f,t=s([].splice),i={};i[m]=1,e(i).length&&(l.f=function(i){for(var r=e(i),n=0,s=r.length;n<s;n++)if(r[n]===m){t(r,n,1);break}return r},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!h(e,m)){if(!u(e))return"F";if(!t)return"E";y(e)}return e[m].objectID},getWeakData:function(e,t){if(!h(e,m)){if(!u(e))return!0;if(!t)return!1;y(e)}return e[m].weakData},onFreeze:function(e){return p&&g&&u(e)&&!h(e,m)&&y(e),e}};a[m]=!0},{"3242fc68c548334b":"b7GrG",d7dc323978454584:"cfIox","33c7a5cefcfa8a48":"jWdGP","949cc173e657f4a8":"adFpz",e6764a7848fbe604:"45yko","77d05ce7ff38a94f":"34YKB","491415e519a00a7c":"e91mZ","1a3edc3a1e92ccaf":"8Yp8E","1f8f4e666c381f6":"fuhX5","2f09fd9212a3372e":"8wvVb","858ced62f45384ee":"bk8fh"}],fuhX5:[function(e,t,i,r){var n=e("de1e0227a248bfd3"),s=e("68a5b2cef468256c"),a=e("cb8542af391c6b0e"),o=e("79d81d484af31adc"),h=Object.isExtensible;t.exports=n(function(){h(1)})||o?function(e){return!!s(e)&&(!o||"ArrayBuffer"!==a(e))&&(!h||h(e))}:h},{de1e0227a248bfd3:"45J7X","68a5b2cef468256c":"adFpz",cb8542af391c6b0e:"aQekt","79d81d484af31adc":"b2O4w"}],b2O4w:[function(e,t,i,r){t.exports=e("5bca09ebe0e39932")(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})},{"5bca09ebe0e39932":"45J7X"}],"5M7mx":[function(e,t,i,r){var n=e("4087699e0041f387"),s=e("1731ca06a03e84a3"),a=e("c048d7069b65e14b"),o=e("5aecbe8fa3c5a74e"),h=e("d3ad95b3aaf27c8a"),c=e("cac009f0bbf34bb8"),l=e("a9a2814559569c97"),d=e("eb2045e367047a1c"),u=e("14b36f47f4e70181"),f=e("dfd8ed3bea972a50"),p=e("b83fb10f1c8587e6"),g=e("77d5ccb3a2fbc893").fastKey,m=e("79afb9c26314edc8"),v=m.set,y=m.getterFor;t.exports={getConstructor:function(e,t,i,r){var d=e(function(e,s){h(e,u),v(e,{type:t,index:n(null),first:null,last:null,size:0}),p||(e.size=0),c(s)||l(s,e[r],{that:e,AS_ENTRIES:i})}),u=d.prototype,f=y(t),m=function(e,t,i){var r,n,s=f(e),a=b(e,t);return a?a.value=i:(s.last=a={index:n=g(t,!0),key:t,value:i,previous:r=s.last,next:null,removed:!1},s.first||(s.first=a),r&&(r.next=a),p?s.size++:e.size++,"F"!==n&&(s.index[n]=a)),e},b=function(e,t){var i,r=f(e),n=g(t);if("F"!==n)return r.index[n];for(i=r.first;i;i=i.next)if(i.key===t)return i};return a(u,{clear:function(){for(var e=f(this),t=e.first;t;)t.removed=!0,t.previous&&(t.previous=t.previous.next=null),t=t.next;e.first=e.last=null,e.index=n(null),p?e.size=0:this.size=0},delete:function(e){var t=f(this),i=b(this,e);if(i){var r=i.next,n=i.previous;delete t.index[i.index],i.removed=!0,n&&(n.next=r),r&&(r.previous=n),t.first===i&&(t.first=r),t.last===i&&(t.last=n),p?t.size--:this.size--}return!!i},forEach:function(e){for(var t,i=f(this),r=o(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:i.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),a(u,i?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),p&&s(u,"size",{configurable:!0,get:function(){return f(this).size}}),d},setStrong:function(e,t,i){var r=t+" Iterator",n=y(t),s=y(r);d(e,t,function(e,t){v(this,{type:r,target:e,state:n(e),kind:t,last:null})},function(){for(var e=s(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"===t?u(i.key,!1):"values"===t?u(i.value,!1):u([i.key,i.value],!1):(e.target=null,u(void 0,!0))},i?"entries":"values",!i,!0),f(t)}}},{"4087699e0041f387":"gg5Dl","1731ca06a03e84a3":"l5KAt",c048d7069b65e14b:"8DWpB","5aecbe8fa3c5a74e":"gWc3u",d3ad95b3aaf27c8a:"cYIbs",cac009f0bbf34bb8:"9RtqE",a9a2814559569c97:"5ZCpM",eb2045e367047a1c:"6Jy0l","14b36f47f4e70181":"k6wXP",dfd8ed3bea972a50:"klUhs",b83fb10f1c8587e6:"dqiQp","77d5ccb3a2fbc893":"5D5Ei","79afb9c26314edc8":"fuP4a"}],bJ6WD:[function(e,t,i,r){var n=e("6567f4dade5d8960"),s=e("f35d7393646ad055"),a=e("c4503f7eb1018306"),o=e("d7c6ba4f404b5360"),h=e("ff883ec9010d6328"),c=e("f9f796f22480c881"),l=e("dc5cfe657d3f962b"),d=e("59f5d275c85c76"),u=c.Map,f=c.has,p=c.get,g=c.set,m=s([].push),v=l||d(function(){return 1!==u.groupBy("ab",function(e){return e}).get("a").length});n({target:"Map",stat:!0,forced:l||v},{groupBy:function(e,t){o(e),a(t);var i=new u,r=0;return h(e,function(e){var n=t(e,r++);f(i,n)?m(p(i,n),e):g(i,n,[e])}),i}})},{"6567f4dade5d8960":"b7GrG",f35d7393646ad055:"cfIox",c4503f7eb1018306:"3m7Aa",d7c6ba4f404b5360:"1ZNa0",ff883ec9010d6328:"5ZCpM",f9f796f22480c881:"9XOsT",dc5cfe657d3f962b:"lssMj","59f5d275c85c76":"45J7X"}],"9XOsT":[function(e,t,i,r){var n=e("89734044d2e98b8d"),s=Map.prototype;t.exports={Map:Map,set:n(s.set),get:n(s.get),has:n(s.has),remove:n(s.delete),proto:s}},{"89734044d2e98b8d":"cfIox"}],kFQMi:[function(e,t,i,r){var n=e("902411673b5fb2fc"),s=e("a4cfbc2e86c91e88"),a=Math.acosh,o=Math.log,h=Math.sqrt,c=Math.LN2;n({target:"Math",stat:!0,forced:!a||710!==Math.floor(a(Number.MAX_VALUE))||a(1/0)!==1/0},{acosh:function(e){var t=+e;return t<1?NaN:t>94906265.62425156?o(t)+c:s(t-1+h(t-1)*h(t+1))}})},{"902411673b5fb2fc":"b7GrG",a4cfbc2e86c91e88:"3X7zM"}],"3X7zM":[function(e,t,i,r){var n=Math.log;t.exports=Math.log1p||function(e){var t=+e;return t>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},{}],ebVA2:[function(e,t,i,r){var n=e("7dffb6067574667e"),s=Math.asinh,a=Math.log,o=Math.sqrt;n({target:"Math",stat:!0,forced:!(s&&1/s(0)>0)},{asinh:function e(t){var i=+t;return isFinite(i)&&0!==i?i<0?-e(-i):a(i+o(i*i+1)):i}})},{"7dffb6067574667e":"b7GrG"}],eBwxe:[function(e,t,i,r){var n=e("852dfc47c3d9c449"),s=Math.atanh,a=Math.log;n({target:"Math",stat:!0,forced:!(s&&1/s(-0)<0)},{atanh:function(e){var t=+e;return 0===t?t:a((1+t)/(1-t))/2}})},{"852dfc47c3d9c449":"b7GrG"}],gAfBI:[function(e,t,i,r){var n=e("387aa8b70c72a94d"),s=e("dac8a302b6d1f627"),a=Math.abs,o=Math.pow;n({target:"Math",stat:!0},{cbrt:function(e){var t=+e;return s(t)*o(a(t),1/3)}})},{"387aa8b70c72a94d":"b7GrG",dac8a302b6d1f627:"fJ6MV"}],iEhEr:[function(e,t,i,r){var n=e("2c4d345d25b6d18c"),s=Math.floor,a=Math.log,o=Math.LOG2E;n({target:"Math",stat:!0},{clz32:function(e){var t=e>>>0;return t?31-s(a(t+.5)*o):32}})},{"2c4d345d25b6d18c":"b7GrG"}],"50f80":[function(e,t,i,r){var n=e("f8f6f4e4d2e4cfe0"),s=e("c0bbc641191a15a9"),a=Math.cosh,o=Math.abs,h=Math.E;n({target:"Math",stat:!0,forced:!a||a(710)===1/0},{cosh:function(e){var t=s(o(e)-1)+1;return h/2*(t+1/(t*h*h))}})},{f8f6f4e4d2e4cfe0:"b7GrG",c0bbc641191a15a9:"1vOI2"}],"1vOI2":[function(e,t,i,r){var n=Math.expm1,s=Math.exp;t.exports=!n||n(10)>22025.465794806718||22025.465794806718>n(10)||-2e-17!==n(-2e-17)?function(e){var t=+e;return 0===t?t:t>-1e-6&&t<1e-6?t+t*t/2:s(t)-1}:n},{}],"75MTU":[function(e,t,i,r){var n=e("54b4d24b57e9de25"),s=e("5648f7662bee3fb6");n({target:"Math",stat:!0,forced:s!==Math.expm1},{expm1:s})},{"54b4d24b57e9de25":"b7GrG","5648f7662bee3fb6":"1vOI2"}],k3eLb:[function(e,t,i,r){e("1c1b96b0ca7c4a89")({target:"Math",stat:!0},{fround:e("47950f9c73209332")})},{"1c1b96b0ca7c4a89":"b7GrG","47950f9c73209332":"eiLkP"}],"5r7iL":[function(e,t,i,r){var n=e("3de4268a64f8eb15"),s=e("4b50500e4ce4d7f7");n({target:"Math",stat:!0},{f16round:function(e){return s(e,9765625e-10,65504,6103515625e-14)}})},{"3de4268a64f8eb15":"b7GrG","4b50500e4ce4d7f7":"9WT1d"}],"3LKfQ":[function(e,t,i,r){var n=e("bf5ef278fe0c2a2d"),s=Math.hypot,a=Math.abs,o=Math.sqrt;n({target:"Math",stat:!0,arity:2,forced:!!s&&s(1/0,NaN)!==1/0},{hypot:function(e,t){for(var i,r,n=0,s=0,h=arguments.length,c=0;s<h;)i=a(arguments[s++]),c<i?(n=n*(r=c/i)*r+1,c=i):i>0?n+=(r=i/c)*r:n+=i;return c===1/0?1/0:c*o(n)}})},{bf5ef278fe0c2a2d:"b7GrG"}],"6060h":[function(e,t,i,r){var n=e("26821e3060ae31ef"),s=e("4ae16bb469711695"),a=Math.imul;n({target:"Math",stat:!0,forced:s(function(){return -5!==a(0xffffffff,5)||2!==a.length})},{imul:function(e,t){var i=+e,r=+t,n=65535&i,s=65535&r;return 0|n*s+((65535&i>>>16)*s+n*(65535&r>>>16)<<16>>>0)}})},{"26821e3060ae31ef":"b7GrG","4ae16bb469711695":"45J7X"}],fQiw6:[function(e,t,i,r){e("e28aca710c97445a")({target:"Math",stat:!0},{log10:e("e386fc2f96575e54")})},{e28aca710c97445a:"b7GrG",e386fc2f96575e54:"fB7xz"}],fB7xz:[function(e,t,i,r){var n=Math.log,s=Math.LOG10E;t.exports=Math.log10||function(e){return n(e)*s}},{}],j0e4t:[function(e,t,i,r){e("ec799bb6317cd425")({target:"Math",stat:!0},{log1p:e("a686ef564d9d2882")})},{ec799bb6317cd425:"b7GrG",a686ef564d9d2882:"3X7zM"}],d84QY:[function(e,t,i,r){e("266355161c4f030d")({target:"Math",stat:!0},{log2:e("45835955de973243")})},{"266355161c4f030d":"b7GrG","45835955de973243":"leLzY"}],aZ18e:[function(e,t,i,r){e("69e2ea3a560b4a42")({target:"Math",stat:!0},{sign:e("22dfbc4f803ce611")})},{"69e2ea3a560b4a42":"b7GrG","22dfbc4f803ce611":"fJ6MV"}],"7dDM8":[function(e,t,i,r){var n=e("ebfcc20cba7b1e4e"),s=e("e96ed0b70941abe1"),a=e("cfb0aa3c75dc889"),o=Math.abs,h=Math.exp,c=Math.E;n({target:"Math",stat:!0,forced:s(function(){return -2e-17!==Math.sinh(-2e-17)})},{sinh:function(e){var t=+e;return 1>o(t)?(a(t)-a(-t))/2:(h(t-1)-h(-t-1))*(c/2)}})},{ebfcc20cba7b1e4e:"b7GrG",e96ed0b70941abe1:"45J7X",cfb0aa3c75dc889:"1vOI2"}],"3Z6yZ":[function(e,t,i,r){var n=e("724c2a392b8044cd"),s=e("fa1efef72d679085"),a=e("f608a0b8edaf899c"),o=RangeError,h=TypeError,c=1/0,l=NaN,d=Math.abs,u=Math.pow,f=s([].push),p=u(2,1023),g=u(2,53)-1,m=Number.MAX_VALUE,v=u(2,971),y={},b={},x={},E={},T={},A=function(e,t){var i=e+t;return{hi:i,lo:t-(i-e)}};n({target:"Math",stat:!0},{sumPrecise:function(e){var t,i,r,n,s,u,w=[],S=0,C=E;switch(a(e,function(e){if(++S>=g)throw new o("Maximum allowed index exceeded");if("number"!=typeof e)throw new h("Value is not a number");C!==y&&(e!=e?C=y:e===c?C=C===b?y:x:e===-c?C=C===x?y:b:(0!==e||1/e===c)&&(C===E||C===T)&&(C=T,f(w,e)))}),C){case y:return l;case b:return-c;case x:return c;case E:return -0}for(var I=[],_=0,O=0;O<w.length;O++){t=w[O];for(var P=0,M=0;M<I.length;M++){if(i=I[M],d(t)<d(i)&&(u=t,t=i,i=u),n=(r=A(t,i)).hi,s=r.lo,d(n)===c){var R=n===c?1:-1;_+=R,d(t=t-R*p-R*p)<d(i)&&(u=t,t=i,i=u),n=(r=A(t,i)).hi,s=r.lo}0!==s&&(I[P++]=s),t=n}I.length=P,0!==t&&f(I,t)}var L=I.length-1;if(n=0,s=0,0!==_){var D=L>=0?I[L]:0;if(L--,d(_)>1||_>0&&D>0||_<0&&D<0)return _>0?c:-c;if(n=(r=A(_*p,D/2)).hi,s=2*r.lo,d(2*n)===c)return n>0?n===p&&s===-(v/2)&&L>=0&&I[L]<0?m:c:n===-p&&s===v/2&&L>=0&&I[L]>0?-m:-c;0!==s&&(I[++L]=s,s=0),n*=2}for(;L>=0&&(n=(r=A(n,I[L--])).hi,0===(s=r.lo)););return L>=0&&(s<0&&I[L]<0||s>0&&I[L]>0)&&(t=n+(i=2*s),i===t-n&&(n=t)),n}})},{"724c2a392b8044cd":"b7GrG",fa1efef72d679085:"cfIox",f608a0b8edaf899c:"5ZCpM"}],bW7fw:[function(e,t,i,r){var n=e("75ca6aa3ab3c490c"),s=e("fbda4dec68bbb02f"),a=Math.exp;n({target:"Math",stat:!0},{tanh:function(e){var t=+e,i=s(t),r=s(-t);return i===1/0?1:r===1/0?-1:(i-r)/(a(t)+a(-t))}})},{"75ca6aa3ab3c490c":"b7GrG",fbda4dec68bbb02f:"1vOI2"}],aYVCx:[function(e,t,i,r){e("8c4fc1e6a65b6d2f")(Math,"Math",!0)},{"8c4fc1e6a65b6d2f":"ksXqH"}],dz0qt:[function(e,t,i,r){e("f97de92e01c210b9")({target:"Math",stat:!0},{trunc:e("15d9fc8fa50b9dc3")})},{f97de92e01c210b9:"b7GrG","15d9fc8fa50b9dc3":"lMqnZ"}],"4oge7":[function(e,t,i,r){var n=e("6a137a118d1bb06a"),s=e("6befc110db857fa5"),a=e("dac0f49ddd258f02"),o=e("be627f07e88786cb"),h=e("2945e9e965681f9c"),c=e("d6ad03f4a8d178a7"),l=e("b7d12a59a0877cf0"),d=e("a63fe8ba771ddd66"),u=e("1fa70215a385f43f"),f=e("ac9a98828b299940"),p=e("a2f71c36cf1dfa06"),g=e("1398c779e833098a"),m=e("58c10e766b715db4"),v=e("eae30770a8520200").f,y=e("a3f2314ca43c8870").f,b=e("673bf972e777267f").f,x=e("dc2cfe6c86ab9553"),E=e("27f6d5a76060ef23").trim,T="Number",A=o[T],w=h[T],S=A.prototype,C=o.TypeError,I=c("".slice),_=c("".charCodeAt),O=function(e){var t=g(e,"number");return"bigint"==typeof t?t:P(t)},P=function(e){var t,i,r,n,s,a,o,h,c=g(e,"number");if(p(c))throw new C("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2){if(43===(t=_(c=E(c),0))||45===t){if(88===(i=_(c,2))||120===i)return NaN}else if(48===t){switch(_(c,1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(o=0,a=(s=I(c,2)).length;o<a;o++)if((h=_(s,o))<48||h>n)return NaN;return parseInt(s,r)}}return+c},M=l(T,!A(" 0o1")||!A("0b1")||A("+0x1")),R=function(e){var t,i=arguments.length<1?0:A(O(e));return(t=this,f(S,t)&&m(function(){x(t)}))?u(Object(i),this,R):i};R.prototype=S,M&&!s&&(S.constructor=R),n({global:!0,constructor:!0,wrap:!0,forced:M},{Number:R});var L=function(e,t){for(var i,r=a?v(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0;r.length>n;n++)d(t,i=r[n])&&!d(e,i)&&b(e,i,y(t,i))};s&&w&&L(h[T],w),(M||s)&&L(h[T],A)},{"6a137a118d1bb06a":"b7GrG","6befc110db857fa5":"lssMj",dac0f49ddd258f02:"dqiQp",be627f07e88786cb:"5ygRS","2945e9e965681f9c":"cytiq",d6ad03f4a8d178a7:"cfIox",b7d12a59a0877cf0:"c9nTu",a63fe8ba771ddd66:"45yko","1fa70215a385f43f":"kzdOP",ac9a98828b299940:"3Igu8",a2f71c36cf1dfa06:"izbIT","1398c779e833098a":"5Zs4D","58c10e766b715db4":"45J7X",eae30770a8520200:"e91mZ",a3f2314ca43c8870:"lYlYP","673bf972e777267f":"34YKB",dc2cfe6c86ab9553:"g2OvA","27f6d5a76060ef23":"eqZJN"}],g2OvA:[function(e,t,i,r){t.exports=e("4875831adea9aec3")(1.1.valueOf)},{"4875831adea9aec3":"cfIox"}],eqZJN:[function(e,t,i,r){var n=e("17f5a3ff1a1c6ce6"),s=e("56083d5e0450dab9"),a=e("3c5616504c7d56e9"),o=e("eacd32ca91d3c555"),h=n("".replace),c=RegExp("^["+o+"]+"),l=RegExp("(^|[^"+o+"])["+o+"]+$"),d=function(e){return function(t){var i=a(s(t));return 1&e&&(i=h(i,c,"")),2&e&&(i=h(i,l,"$1")),i}};t.exports={start:d(1),end:d(2),trim:d(3)}},{"17f5a3ff1a1c6ce6":"cfIox","56083d5e0450dab9":"1ZNa0","3c5616504c7d56e9":"2QNq8",eacd32ca91d3c555:"7OygN"}],"7OygN":[function(e,t,i,r){t.exports="	\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF"},{}],"8lXek":[function(e,t,i,r){e("6a152397506f58aa")({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:2220446049250313e-31})},{"6a152397506f58aa":"b7GrG"}],"3dXNg":[function(e,t,i,r){e("1cd8bc612ab8a9aa")({target:"Number",stat:!0},{isFinite:e("2741aaae50f5c5db")})},{"1cd8bc612ab8a9aa":"b7GrG","2741aaae50f5c5db":"3kHrs"}],"3kHrs":[function(e,t,i,r){var n=e("7a63d25015bc275e").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&n(e)}},{"7a63d25015bc275e":"5ygRS"}],bGW1a:[function(e,t,i,r){e("ce2c3fa51ce7a2b6")({target:"Number",stat:!0},{isInteger:e("3e3a085edc93c707")})},{ce2c3fa51ce7a2b6:"b7GrG","3e3a085edc93c707":"fI16a"}],fI16a:[function(e,t,i,r){var n=e("de18539dea9401a"),s=Math.floor;t.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&s(e)===e}},{de18539dea9401a:"adFpz"}],"8w9zW":[function(e,t,i,r){e("677c53d72f4dc4b5")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},{"677c53d72f4dc4b5":"b7GrG"}],kku8e:[function(e,t,i,r){var n=e("dab33bcdb73caa98"),s=e("3e8bd2979ca91bb4"),a=Math.abs;n({target:"Number",stat:!0},{isSafeInteger:function(e){return s(e)&&0x1fffffffffffff>=a(e)}})},{dab33bcdb73caa98:"b7GrG","3e8bd2979ca91bb4":"fI16a"}],czLcQ:[function(e,t,i,r){e("f08cf5dcc31074a6")({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:0x1fffffffffffff})},{f08cf5dcc31074a6:"b7GrG"}],hHVfV:[function(e,t,i,r){e("d7c9fce3c9d3d189")({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-0x1fffffffffffff})},{d7c9fce3c9d3d189:"b7GrG"}],"5mkzp":[function(e,t,i,r){var n=e("6edfd3b7fb98ea3e"),s=e("bae0a47a096d7522");n({target:"Number",stat:!0,forced:Number.parseFloat!==s},{parseFloat:s})},{"6edfd3b7fb98ea3e":"b7GrG",bae0a47a096d7522:"6RTTC"}],"6RTTC":[function(e,t,i,r){var n=e("69bd3378e63391c8"),s=e("842d738e09e8ac6b"),a=e("1779e25eab454452"),o=e("a6c37474f58f0739"),h=e("595d7b3426fbca88").trim,c=e("3acff994bd3a41b1"),l=a("".charAt),d=n.parseFloat,u=n.Symbol,f=u&&u.iterator;t.exports=1/d(c+"-0")!=-1/0||f&&!s(function(){d(Object(f))})?function(e){var t=h(o(e)),i=d(t);return 0===i&&"-"===l(t,0)?-0:i}:d},{"69bd3378e63391c8":"5ygRS","842d738e09e8ac6b":"45J7X","1779e25eab454452":"cfIox",a6c37474f58f0739:"2QNq8","595d7b3426fbca88":"eqZJN","3acff994bd3a41b1":"7OygN"}],g1fVe:[function(e,t,i,r){var n=e("3882f0ce9a7bc56f"),s=e("f2f29cbfccb05e47");n({target:"Number",stat:!0,forced:Number.parseInt!==s},{parseInt:s})},{"3882f0ce9a7bc56f":"b7GrG",f2f29cbfccb05e47:"9oLll"}],"9oLll":[function(e,t,i,r){var n=e("272fde501e24d305"),s=e("48c528ae508d02e"),a=e("7e7198f2f1540a47"),o=e("dd517d0a64474028"),h=e("b0ec8b6ceac29d85").trim,c=e("5252068313c033be"),l=n.parseInt,d=n.Symbol,u=d&&d.iterator,f=/^[+-]?0x/i,p=a(f.exec);t.exports=8!==l(c+"08")||22!==l(c+"0x16")||u&&!s(function(){l(Object(u))})?function(e,t){var i=h(o(e));return l(i,t>>>0||(p(f,i)?16:10))}:l},{"272fde501e24d305":"5ygRS","48c528ae508d02e":"45J7X","7e7198f2f1540a47":"cfIox",dd517d0a64474028:"2QNq8",b0ec8b6ceac29d85:"eqZJN","5252068313c033be":"7OygN"}],"8rHD3":[function(e,t,i,r){var n=e("8acff5e43ec1ac00"),s=e("a791fae730bb52f8"),a=e("eaaedcaf85694da0"),o=e("5cfce35661f01b6f"),h=e("6c8e5def45c211a1"),c=e("876da316e0a42221"),l=e("2c3e63cad4b974da"),d=RangeError,u=String,f=isFinite,p=Math.abs,g=Math.floor,m=Math.pow,v=Math.round,y=s(1.1.toExponential),b=s(h),x=s("".slice),E="-6.9000e-11"===y(-69e-12,4)&&"1.25e+0"===y(1.255,2)&&"1.235e+4"===y(12345,3)&&"3e+1"===y(25,0);n({target:"Number",proto:!0,forced:!E||!(l(function(){y(1,1/0)})&&l(function(){y(1,-1/0)}))||!!l(function(){y(1/0,1/0),y(NaN,1/0)})},{toExponential:function(e){var t,i,r,n,s=o(this);if(void 0===e)return y(s);var h=a(e);if(!f(s))return String(s);if(h<0||h>20)throw new d("Incorrect fraction digits");if(E)return y(s,h);var l="";if(s<0&&(l="-",s=-s),0===s)i=0,t=b("0",h+1);else{var T=m(10,(i=g(c(s)))-h),A=v(s/T);2*s>=(2*A+1)*T&&(A+=1),A>=m(10,h+1)&&(A/=10,i+=1),t=u(A)}return 0!==h&&(t=x(t,0,1)+"."+x(t,1)),0===i?(r="+",n="0"):(r=i>0?"+":"-",n=u(p(i))),l+(t+="e"+r+n)}})},{"8acff5e43ec1ac00":"b7GrG",a791fae730bb52f8:"cfIox",eaaedcaf85694da0:"lOYVA","5cfce35661f01b6f":"g2OvA","6c8e5def45c211a1":"9SY1f","876da316e0a42221":"fB7xz","2c3e63cad4b974da":"45J7X"}],"19Jfv":[function(e,t,i,r){var n=e("cd4f6c8df33e40b4"),s=e("46d8af161e2dc0d6"),a=e("fb6b6174bcfa90f"),o=e("a88d9905e1f83adc"),h=e("9b93ef6d7f240c15"),c=e("d57e63cfa5cbb68e"),l=RangeError,d=String,u=Math.floor,f=s(h),p=s("".slice),g=s(1.1.toFixed),m=function(e,t,i){return 0===t?i:t%2==1?m(e,t-1,i*e):m(e*e,t/2,i)},v=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t},y=function(e,t,i){for(var r=-1,n=i;++r<6;)n+=t*e[r],e[r]=n%1e7,n=u(n/1e7)},b=function(e,t){for(var i=6,r=0;--i>=0;)r+=e[i],e[i]=u(r/t),r=r%t*1e7},x=function(e){for(var t=6,i="";--t>=0;)if(""!==i||0===t||0!==e[t]){var r=d(e[t]);i=""===i?r:i+f("0",7-r.length)+r}return i};n({target:"Number",proto:!0,forced:c(function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)})||!c(function(){g({})})},{toFixed:function(e){var t,i,r,n,s=o(this),h=a(e),c=[0,0,0,0,0,0],u="",g="0";if(h<0||h>20)throw new l("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return d(s);if(s<0&&(u="-",s=-s),s>1e-21)if(i=((t=v(s*m(2,69,1))-69)<0?s*m(2,-t,1):s/m(2,t,1))*0x10000000000000,(t=52-t)>0){for(y(c,0,i),r=h;r>=7;)y(c,1e7,0),r-=7;for(y(c,m(10,r,1),0),r=t-1;r>=23;)b(c,8388608),r-=23;b(c,1<<r),y(c,1,1),b(c,2),g=x(c)}else y(c,0,i),y(c,1<<-t,0),g=x(c)+f("0",h);return h>0?u+((n=g.length)<=h?"0."+f("0",h-n)+g:p(g,0,n-h)+"."+p(g,n-h)):u+g}})},{cd4f6c8df33e40b4:"b7GrG","46d8af161e2dc0d6":"cfIox",fb6b6174bcfa90f:"lOYVA",a88d9905e1f83adc:"g2OvA","9b93ef6d7f240c15":"9SY1f",d57e63cfa5cbb68e:"45J7X"}],jXSo7:[function(e,t,i,r){var n=e("a8898a73ab91d290"),s=e("ce4a637ab8de47ca"),a=e("4308932cb74d1989"),o=e("b09e8a0929dbee09"),h=s(1.1.toPrecision);n({target:"Number",proto:!0,forced:a(function(){return"1"!==h(1,void 0)})||!a(function(){h({})})},{toPrecision:function(e){return void 0===e?h(o(this)):h(o(this),e)}})},{a8898a73ab91d290:"b7GrG",ce4a637ab8de47ca:"cfIox","4308932cb74d1989":"45J7X",b09e8a0929dbee09:"g2OvA"}],"8l0BH":[function(e,t,i,r){var n=e("9e39c36176ea9027"),s=e("eca15ea3e03a62cf");n({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"9e39c36176ea9027":"b7GrG",eca15ea3e03a62cf:"QzhpP"}],QzhpP:[function(e,t,i,r){var n=e("6bef1f1b71c0d15f"),s=e("d01fdbe6acf1dc69"),a=e("152344c6f1cc0727"),o=e("e500b6660dae4ed2"),h=e("a51f09aa538cbbc9"),c=e("1e00e3b82b1b3cb6"),l=e("df8aa13044dccc97"),d=e("fb90ba2f91e5c029"),u=e("33842bab271c4900"),f=Object.assign,p=Object.defineProperty,g=s([].concat);t.exports=!f||o(function(){if(n&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach(function(e){t[e]=e}),7!==f({},e)[i]||h(f({},t)).join("")!==r})?function(e,t){for(var i=d(e),r=arguments.length,s=1,o=c.f,f=l.f;r>s;)for(var p,m=u(arguments[s++]),v=o?g(h(m),o(m)):h(m),y=v.length,b=0;y>b;)p=v[b++],(!n||a(f,m,p))&&(i[p]=m[p]);return i}:f},{"6bef1f1b71c0d15f":"dqiQp",d01fdbe6acf1dc69:"cfIox","152344c6f1cc0727":"kiToe",e500b6660dae4ed2:"45J7X",a51f09aa538cbbc9:"ajJNK","1e00e3b82b1b3cb6":"9WKax",df8aa13044dccc97:"ayF8n",fb90ba2f91e5c029:"eHl90","33842bab271c4900":"a89ET"}],j7OhH:[function(e,t,i,r){e("17cb8072b960d33f")({target:"Object",stat:!0,sham:!e("b7e43977f87f28a2")},{create:e("af73c0503e5e2dd8")})},{"17cb8072b960d33f":"b7GrG",b7e43977f87f28a2:"dqiQp",af73c0503e5e2dd8:"gg5Dl"}],it2Oj:[function(e,t,i,r){var n=e("8f6b558a4e940099"),s=e("96523e310a3fe908"),a=e("67741c7cd2815bff"),o=e("60e72fdc0dc9cee8"),h=e("81722f8311309945"),c=e("e74b2be534174483");s&&n({target:"Object",proto:!0,forced:a},{__defineGetter__:function(e,t){c.f(h(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},{"8f6b558a4e940099":"b7GrG","96523e310a3fe908":"dqiQp","67741c7cd2815bff":"dtT9w","60e72fdc0dc9cee8":"3m7Aa","81722f8311309945":"eHl90",e74b2be534174483:"34YKB"}],dtT9w:[function(e,t,i,r){var n=e("8edc7d10fd60cc1f"),s=e("199488e7120262f2"),a=e("67c1b3060370d6f1"),o=e("a7f7bf4b6fabffe9");t.exports=n||!a(function(){if(!o||!(o<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete s[e]}})},{"8edc7d10fd60cc1f":"lssMj","199488e7120262f2":"5ygRS","67c1b3060370d6f1":"45J7X",a7f7bf4b6fabffe9:"jqVuW"}],hcPY5:[function(e,t,i,r){var n=e("79249a239f48e2d4"),s=e("b64da2842e228b05"),a=e("45e48b7437d67551").f;n({target:"Object",stat:!0,forced:Object.defineProperties!==a,sham:!s},{defineProperties:a})},{"79249a239f48e2d4":"b7GrG",b64da2842e228b05:"dqiQp","45e48b7437d67551":"QEHTu"}],eVkoj:[function(e,t,i,r){var n=e("b118adf01477032"),s=e("a3127abbf747d8e2"),a=e("dec8f826adb685fc").f;n({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!s},{defineProperty:a})},{b118adf01477032:"b7GrG",a3127abbf747d8e2:"dqiQp",dec8f826adb685fc:"34YKB"}],gTKyh:[function(e,t,i,r){var n=e("9bd3ca02d43a34c6"),s=e("14adf2205f0de0f1"),a=e("25f3087f814cb2fd"),o=e("8f5516e8b83f7c81"),h=e("1864c5e0fe7b94e4"),c=e("fbfc447cbc7c8274");s&&n({target:"Object",proto:!0,forced:a},{__defineSetter__:function(e,t){c.f(h(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},{"9bd3ca02d43a34c6":"b7GrG","14adf2205f0de0f1":"dqiQp","25f3087f814cb2fd":"dtT9w","8f5516e8b83f7c81":"3m7Aa","1864c5e0fe7b94e4":"eHl90",fbfc447cbc7c8274:"34YKB"}],aoQeD:[function(e,t,i,r){var n=e("f61a79561ef771d5"),s=e("f45db476330e9273").entries;n({target:"Object",stat:!0},{entries:function(e){return s(e)}})},{f61a79561ef771d5:"b7GrG",f45db476330e9273:"4BAdh"}],"4BAdh":[function(e,t,i,r){var n=e("d3708b44f56d5dbe"),s=e("41285041ee215b4b"),a=e("fae894139558d631"),o=e("d1ebe3ffdc898f92"),h=e("8ca7d570e80b9ce7"),c=e("cd0bc0f155d9ce86"),l=a(e("8a6b90d3c1a4843d").f),d=a([].push),u=n&&s(function(){var e=Object.create(null);return e[2]=2,!l(e,2)}),f=function(e){return function(t){for(var i,r=c(t),s=h(r),a=u&&null===o(r),f=s.length,p=0,g=[];f>p;)i=s[p++],(!n||(a?i in r:l(r,i)))&&d(g,e?[i,r[i]]:r[i]);return g}};t.exports={entries:f(!0),values:f(!1)}},{d3708b44f56d5dbe:"dqiQp","41285041ee215b4b":"45J7X",fae894139558d631:"cfIox",d1ebe3ffdc898f92:"6P7xV","8ca7d570e80b9ce7":"ajJNK",cd0bc0f155d9ce86:"cVp2Q","8a6b90d3c1a4843d":"ayF8n"}],bacM3:[function(e,t,i,r){var n=e("41df7dcb1db288e9"),s=e("fff8fcdf7f021ed"),a=e("349eb9a58219946d"),o=e("aba4dbd0c2e0df38"),h=e("83d388d2147293dd").onFreeze,c=Object.freeze;n({target:"Object",stat:!0,forced:a(function(){c(1)}),sham:!s},{freeze:function(e){return c&&o(e)?c(h(e)):e}})},{"41df7dcb1db288e9":"b7GrG",fff8fcdf7f021ed:"bk8fh","349eb9a58219946d":"45J7X",aba4dbd0c2e0df38:"adFpz","83d388d2147293dd":"5D5Ei"}],dNyHW:[function(e,t,i,r){var n=e("48c4d449b4b6a74e"),s=e("ee4e4a7ea4b35347"),a=e("34466cd01816d06a");n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return s(e,function(e,i){a(t,e,i)},{AS_ENTRIES:!0}),t}})},{"48c4d449b4b6a74e":"b7GrG",ee4e4a7ea4b35347:"5ZCpM","34466cd01816d06a":"fb5iK"}],e34FJ:[function(e,t,i,r){var n=e("5e9e720f67356476"),s=e("c8df38aee3cb5769"),a=e("10375c86bad61030"),o=e("3b00a68c12a1896c").f,h=e("76539d9475dc0bf0");n({target:"Object",stat:!0,forced:!h||s(function(){o(1)}),sham:!h},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},{"5e9e720f67356476":"b7GrG",c8df38aee3cb5769:"45J7X","10375c86bad61030":"cVp2Q","3b00a68c12a1896c":"lYlYP","76539d9475dc0bf0":"dqiQp"}],"3O3Aj":[function(e,t,i,r){var n=e("40e7403e4fec8fc5"),s=e("4e8e0ded689e341a"),a=e("ca8e12f795281afd"),o=e("2a0629723aea50a6"),h=e("d8f1f7a76c234914"),c=e("d34666d556a98edd");n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){for(var t,i,r=o(e),n=h.f,s=a(r),l={},d=0;s.length>d;)void 0!==(i=n(r,t=s[d++]))&&c(l,t,i);return l}})},{"40e7403e4fec8fc5":"b7GrG","4e8e0ded689e341a":"dqiQp",ca8e12f795281afd:"i9P3q","2a0629723aea50a6":"cVp2Q",d8f1f7a76c234914:"lYlYP",d34666d556a98edd:"fb5iK"}],"8Etlb":[function(e,t,i,r){var n=e("effeafa72fa4fcc2"),s=e("9f4f815a609d62de"),a=e("4a158a7faad2d27f").f;n({target:"Object",stat:!0,forced:s(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:a})},{effeafa72fa4fcc2:"b7GrG","9f4f815a609d62de":"45J7X","4a158a7faad2d27f":"8Yp8E"}],c69k7:[function(e,t,i,r){var n=e("9b00c005c1d693fb"),s=e("ffe585e19c7a1096"),a=e("a7cc68351642ae12"),o=e("46d7a597f20859a8"),h=e("765be3ffdd1dfa5d");n({target:"Object",stat:!0,forced:s(function(){o(1)}),sham:!h},{getPrototypeOf:function(e){return o(a(e))}})},{"9b00c005c1d693fb":"b7GrG",ffe585e19c7a1096:"45J7X",a7cc68351642ae12:"eHl90","46d7a597f20859a8":"6P7xV","765be3ffdd1dfa5d":"lYEaN"}],ghMRy:[function(e,t,i,r){var n=e("b06b32f47a30ec7f"),s=e("1469039e71955086"),a=e("6a46da92f3f73121"),o=e("af1ec4f8b421ab5c"),h=e("2ef79b8f3bb016c7"),c=e("a668398ad3de0d7d"),l=e("70005dfdb718ef94"),d=e("972dd804937bc18f"),u=e("281c63cf55e8b57b"),f=Object.groupBy,p=a("Object","create"),g=o([].push);n({target:"Object",stat:!0,forced:!f||u(function(){return 1!==f("ab",function(e){return e}).a.length})},{groupBy:function(e,t){c(e),h(t);var i=p(null),r=0;return d(e,function(e){var n=l(t(e,r++));n in i?g(i[n],e):s(i,n,[e])}),i}})},{b06b32f47a30ec7f:"b7GrG","1469039e71955086":"fb5iK","6a46da92f3f73121":"2MF6I",af1ec4f8b421ab5c:"cfIox","2ef79b8f3bb016c7":"3m7Aa",a668398ad3de0d7d:"1ZNa0","70005dfdb718ef94":"2y7C0","972dd804937bc18f":"5ZCpM","281c63cf55e8b57b":"45J7X"}],"9zHwr":[function(e,t,i,r){e("98e893e3166a4362")({target:"Object",stat:!0},{hasOwn:e("12a9e94ed897fcaf")})},{"98e893e3166a4362":"b7GrG","12a9e94ed897fcaf":"45yko"}],k77Bz:[function(e,t,i,r){e("451600d6bdd8e576")({target:"Object",stat:!0},{is:e("56b2e52d42ffd002")})},{"451600d6bdd8e576":"b7GrG","56b2e52d42ffd002":"iwJQ7"}],iwJQ7:[function(e,t,i,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],iRrGN:[function(e,t,i,r){var n=e("435e06d616210775"),s=e("cdaf74e91df56e60");n({target:"Object",stat:!0,forced:Object.isExtensible!==s},{isExtensible:s})},{"435e06d616210775":"b7GrG",cdaf74e91df56e60:"fuhX5"}],"7yczT":[function(e,t,i,r){var n=e("d0fbaa7eb6b5ad4d"),s=e("421049f6c11462a7"),a=e("9ed59196a9b50c30"),o=e("590e67d09aaa38f"),h=e("c1ee6c6b89bec975"),c=Object.isFrozen;n({target:"Object",stat:!0,forced:h||s(function(){c(1)})},{isFrozen:function(e){return!a(e)||!!h&&"ArrayBuffer"===o(e)||!!c&&c(e)}})},{d0fbaa7eb6b5ad4d:"b7GrG","421049f6c11462a7":"45J7X","9ed59196a9b50c30":"adFpz","590e67d09aaa38f":"aQekt",c1ee6c6b89bec975:"b2O4w"}],gvyo6:[function(e,t,i,r){var n=e("e0d9427683afd111"),s=e("8b49b6806ae62eca"),a=e("97ad0f68c00a1ff0"),o=e("7f6c54dd5bc88c64"),h=e("c8a04ae167e7ad37"),c=Object.isSealed;n({target:"Object",stat:!0,forced:h||s(function(){c(1)})},{isSealed:function(e){return!a(e)||!!h&&"ArrayBuffer"===o(e)||!!c&&c(e)}})},{e0d9427683afd111:"b7GrG","8b49b6806ae62eca":"45J7X","97ad0f68c00a1ff0":"adFpz","7f6c54dd5bc88c64":"aQekt",c8a04ae167e7ad37:"b2O4w"}],ivizZ:[function(e,t,i,r){var n=e("928eae3c9269318e"),s=e("bffeb5a63b3d1ddc"),a=e("4e7619f3294f09c8");n({target:"Object",stat:!0,forced:e("16ceb2cf691ec6a8")(function(){a(1)})},{keys:function(e){return a(s(e))}})},{"928eae3c9269318e":"b7GrG",bffeb5a63b3d1ddc:"eHl90","4e7619f3294f09c8":"ajJNK","16ceb2cf691ec6a8":"45J7X"}],fwluw:[function(e,t,i,r){var n=e("3213681dc3c35763"),s=e("4aa54b730f2d3e5b"),a=e("f722ba9b4a4e493a"),o=e("d9187b4f4abc84a2"),h=e("a283188d11fd1310"),c=e("81f1f2335bc409e6"),l=e("73cff62f53644df3").f;s&&n({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(e){var t,i=o(this),r=h(e);do if(t=l(i,r))return t.get;while(i=c(i))}})},{"3213681dc3c35763":"b7GrG","4aa54b730f2d3e5b":"dqiQp",f722ba9b4a4e493a:"dtT9w",d9187b4f4abc84a2:"eHl90",a283188d11fd1310:"2y7C0","81f1f2335bc409e6":"6P7xV","73cff62f53644df3":"lYlYP"}],"4g6h4":[function(e,t,i,r){var n=e("cfcc7acaa30d169a"),s=e("95cf98e445e49077"),a=e("32af9c4b10e71d8a"),o=e("a3a2f8d0bb0d269a"),h=e("fc6f1b0f9f6a3207"),c=e("4f72764854999276"),l=e("940efcd169764424").f;s&&n({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(e){var t,i=o(this),r=h(e);do if(t=l(i,r))return t.set;while(i=c(i))}})},{cfcc7acaa30d169a:"b7GrG","95cf98e445e49077":"dqiQp","32af9c4b10e71d8a":"dtT9w",a3a2f8d0bb0d269a:"eHl90",fc6f1b0f9f6a3207:"2y7C0","4f72764854999276":"6P7xV","940efcd169764424":"lYlYP"}],"8E3gz":[function(e,t,i,r){var n=e("dd30e23e7eea933c"),s=e("16f89a44f17d8f35"),a=e("4ddba3dd9dcca781").onFreeze,o=e("fa786d6ffa5b300e"),h=e("3a7088156a6b24b9"),c=Object.preventExtensions;n({target:"Object",stat:!0,forced:h(function(){c(1)}),sham:!o},{preventExtensions:function(e){return c&&s(e)?c(a(e)):e}})},{dd30e23e7eea933c:"b7GrG","16f89a44f17d8f35":"adFpz","4ddba3dd9dcca781":"5D5Ei",fa786d6ffa5b300e:"bk8fh","3a7088156a6b24b9":"45J7X"}],kUUzE:[function(e,t,i,r){var n=e("12120dafa98cd91b"),s=e("8a5ee5120083625d"),a=e("dacee5d02a7d8660"),o=e("9f80f8e0960690f0"),h=e("f3ab8c15cd26e8b0"),c=e("cf1c31853a2dbd73"),l=Object.getPrototypeOf,d=Object.setPrototypeOf,u=Object.prototype,f="__proto__";if(n&&l&&d&&!(f in u))try{s(u,f,{configurable:!0,get:function(){return l(h(this))},set:function(e){var t=c(this);o(e)&&a(t)&&d(t,e)}})}catch(e){}},{"12120dafa98cd91b":"dqiQp","8a5ee5120083625d":"l5KAt",dacee5d02a7d8660:"adFpz","9f80f8e0960690f0":"15sCU",f3ab8c15cd26e8b0:"eHl90",cf1c31853a2dbd73:"1ZNa0"}],f22XF:[function(e,t,i,r){var n=e("7431c9c36c061192"),s=e("254eb19750975bda"),a=e("2f01f54810b729a0").onFreeze,o=e("f352701af16ccb01"),h=e("c5798f0bf47c2f71"),c=Object.seal;n({target:"Object",stat:!0,forced:h(function(){c(1)}),sham:!o},{seal:function(e){return c&&s(e)?c(a(e)):e}})},{"7431c9c36c061192":"b7GrG","254eb19750975bda":"adFpz","2f01f54810b729a0":"5D5Ei",f352701af16ccb01:"bk8fh",c5798f0bf47c2f71:"45J7X"}],"1qlmj":[function(e,t,i,r){e("9b49024ba2cb31fd")({target:"Object",stat:!0},{setPrototypeOf:e("3492d4712278eb46")})},{"9b49024ba2cb31fd":"b7GrG","3492d4712278eb46":"i41Eo"}],"8XahL":[function(e,t,i,r){var n=e("2f5378debd330ed5"),s=e("5e0718aecf12f1e8"),a=e("6b32f4accffdcba8");n||s(Object.prototype,"toString",a,{unsafe:!0})},{"2f5378debd330ed5":"gMxt3","5e0718aecf12f1e8":"2UU83","6b32f4accffdcba8":"FU0uA"}],FU0uA:[function(e,t,i,r){var n=e("312e54676af41375"),s=e("2dbce13c946fe9d0");t.exports=n?({}).toString:function(){return"[object "+s(this)+"]"}},{"312e54676af41375":"gMxt3","2dbce13c946fe9d0":"bAgVp"}],LALKA:[function(e,t,i,r){var n=e("eb35dc894cb42ba5"),s=e("f1b9830bcb61759d").values;n({target:"Object",stat:!0},{values:function(e){return s(e)}})},{eb35dc894cb42ba5:"b7GrG",f1b9830bcb61759d:"4BAdh"}],"3ojXI":[function(e,t,i,r){var n=e("c1505c05c57d39cb"),s=e("fd7eb946ed597b55");n({global:!0,forced:parseFloat!==s},{parseFloat:s})},{c1505c05c57d39cb:"b7GrG",fd7eb946ed597b55:"6RTTC"}],hbZfg:[function(e,t,i,r){var n=e("3ca2a8550b205bbe"),s=e("f57aad6998179c26");n({global:!0,forced:parseInt!==s},{parseInt:s})},{"3ca2a8550b205bbe":"b7GrG",f57aad6998179c26:"9oLll"}],fZF9a:[function(e,t,i,r){e("71201fb984fca5e2"),e("944d2d67bf4aa279"),e("259dee16b78a9293"),e("bac68e84460cf44d"),e("35807fabff0322bf"),e("8713c69981abff7e")},{"71201fb984fca5e2":"e6z1C","944d2d67bf4aa279":"8ZDp7","259dee16b78a9293":"bODDC",bac68e84460cf44d:"hfAef","35807fabff0322bf":"hQvKp","8713c69981abff7e":"4Ro4a"}],e6z1C:[function(e,t,i,r){var n,s,a,o,h=e("cdd137752c5b4a8e"),c=e("27c8c7e1f0444fd2"),l=e("e9cf171cc5f9ff78"),d=e("d198a89966b49f7a"),u=e("703edd65458bf321"),f=e("643c25bd5b0dfc21"),p=e("76c41f8cfb7124b7"),g=e("6f7c1c1190868f98"),m=e("8b9ff6cd5f4bf470"),v=e("e2d999cd3139e29e"),y=e("37ba5f9496a9ce6f"),b=e("c754acf38f3fbf83"),x=e("f9d3438feb00503"),E=e("eea1cec1753c28d3"),T=e("2b3f8c9a01947fd4"),A=e("d7da4b96347ff949").set,w=e("5967e7e0ab765b55"),S=e("45c77ce65cdfa56e"),C=e("ed2bd3e4981b5b7f"),I=e("67a62e6e19993e50"),_=e("d047e80fbdc4abaf"),O=e("cb21f79465bb7a4f"),P=e("d92ec88829ba956d"),M=e("f518fe10c60b8bee"),R="Promise",L=P.CONSTRUCTOR,D=P.REJECTION_EVENT,k=P.SUBCLASSING,N=_.getterFor(R),F=_.set,B=O&&O.prototype,U=O,G=B,V=d.TypeError,Y=d.document,j=d.process,W=M.f,z=W,H=!!(Y&&Y.createEvent&&d.dispatchEvent),X="unhandledrejection",q=function(e){var t;return!!(x(e)&&b(t=e.then))&&t},K=function(e,t){var i,r,n,s=t.value,a=1===t.state,o=a?e.ok:e.fail,h=e.resolve,c=e.reject,l=e.domain;try{o?(a||(2===t.rejection&&ee(t),t.rejection=1),!0===o?i=s:(l&&l.enter(),i=o(s),l&&(l.exit(),n=!0)),i===e.promise?c(new V("Promise-chain cycle")):(r=q(i))?f(r,i,h,c):h(i)):c(s)}catch(e){l&&!n&&l.exit(),c(e)}},J=function(e,t){e.notified||(e.notified=!0,w(function(){for(var i,r=e.reactions;i=r.get();)K(i,e);e.notified=!1,t&&!e.rejection&&$(e)}))},Q=function(e,t,i){var r,n;H?((r=Y.createEvent("Event")).promise=t,r.reason=i,r.initEvent(e,!1,!0),d.dispatchEvent(r)):r={promise:t,reason:i},!D&&(n=d["on"+e])?n(r):e===X&&S("Unhandled promise rejection",i)},$=function(e){f(A,d,function(){var t,i=e.facade,r=e.value;if(Z(e)&&(t=C(function(){l?j.emit("unhandledRejection",r,i):Q(X,i,r)}),e.rejection=l||Z(e)?2:1,t.error))throw t.value})},Z=function(e){return 1!==e.rejection&&!e.parent},ee=function(e){f(A,d,function(){var t=e.facade;l?j.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)})},et=function(e,t,i){return function(r){e(t,r,i)}},ei=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,J(e,!0))},er=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw new V("Promise can't be resolved itself");var r=q(t);r?w(function(){var i={done:!1};try{f(r,t,et(er,i,e),et(ei,i,e))}catch(t){ei(i,t,e)}}):(e.value=t,e.state=1,J(e,!1))}catch(t){ei({done:!1},t,e)}}};if(L&&(G=(U=function(e){E(this,G),y(e),f(n,this);var t=N(this);try{e(et(er,t),et(ei,t))}catch(e){ei(t,e)}}).prototype,(n=function(e){F(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:null})}).prototype=p(G,"then",function(e,t){var i=N(this),r=W(T(this,U));return i.parent=!0,r.ok=!b(e)||e,r.fail=b(t)&&t,r.domain=l?j.domain:void 0,0===i.state?i.reactions.add(r):w(function(){K(r,i)}),r.promise}),s=function(){var e=new n,t=N(e);this.promise=e,this.resolve=et(er,t),this.reject=et(ei,t)},M.f=W=function(e){return e===U||e===a?new s(e):z(e)},!c&&b(O)&&B!==Object.prototype)){o=B.then,k||p(B,"then",function(e,t){var i=this;return new U(function(e,t){f(o,i,e,t)}).then(e,t)},{unsafe:!0});try{delete B.constructor}catch(e){}g&&g(B,G)}h({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:U}),a=u.Promise,m(U,R,!1,!0),v(R)},{cdd137752c5b4a8e:"b7GrG","27c8c7e1f0444fd2":"lssMj",e9cf171cc5f9ff78:"etN8h",d198a89966b49f7a:"5ygRS","703edd65458bf321":"cytiq","643c25bd5b0dfc21":"kiToe","76c41f8cfb7124b7":"2UU83","6f7c1c1190868f98":"i41Eo","8b9ff6cd5f4bf470":"ksXqH",e2d999cd3139e29e:"klUhs","37ba5f9496a9ce6f":"3m7Aa",c754acf38f3fbf83:"2Pprm",f9d3438feb00503:"adFpz",eea1cec1753c28d3:"cYIbs","2b3f8c9a01947fd4":"hp0ju",d7da4b96347ff949:"2zcFI","5967e7e0ab765b55":"hEzOI","45c77ce65cdfa56e":"ioCHV",ed2bd3e4981b5b7f:"1KEKE","67a62e6e19993e50":"fpniJ",d047e80fbdc4abaf:"fuP4a",cb21f79465bb7a4f:"hL2yv",d92ec88829ba956d:"ksy7O",f518fe10c60b8bee:"ccQJ3"}],hp0ju:[function(e,t,i,r){var n=e("1dd3546388607f52"),s=e("1407b26f20411731"),a=e("e59a7a10597b8e96"),o=e("16c256a8cc3c03fd")("species");t.exports=function(e,t){var i,r=n(e).constructor;return void 0===r||a(i=n(r)[o])?t:s(i)}},{"1dd3546388607f52":"5dGJN","1407b26f20411731":"6tYWC",e59a7a10597b8e96:"9RtqE","16c256a8cc3c03fd":"eG9HO"}],"6tYWC":[function(e,t,i,r){var n=e("f0753b26326019c1"),s=e("8e6a26f37529644e"),a=TypeError;t.exports=function(e){if(n(e))return e;throw new a(s(e)+" is not a constructor")}},{f0753b26326019c1:"7c2zg","8e6a26f37529644e":"dr0ui"}],"2zcFI":[function(e,t,i,r){var n,s,a,o,h=e("629a4d99f4fe5b2e"),c=e("e574be68c288c7c8"),l=e("df212787338802d3"),d=e("afdf018c2d01bbc6"),u=e("35a3e849940fd612"),f=e("b8bf5434d2248ca7"),p=e("731f9370cc21fc3b"),g=e("ec358060964e4bde"),m=e("907adb6d219da7a3"),v=e("f398561ebd49a798"),y=e("8a8e342aaad83bb"),b=e("6eef8b4e43dd6731"),x=h.setImmediate,E=h.clearImmediate,T=h.process,A=h.Dispatch,w=h.Function,S=h.MessageChannel,C=h.String,I=0,_={},O="onreadystatechange";f(function(){n=h.location});var P=function(e){if(u(_,e)){var t=_[e];delete _[e],t()}},M=function(e){return function(){P(e)}},R=function(e){P(e.data)},L=function(e){h.postMessage(C(e),n.protocol+"//"+n.host)};x&&E||(x=function(e){v(arguments.length,1);var t=d(e)?e:w(e),i=g(arguments,1);return _[++I]=function(){c(t,void 0,i)},s(I),I},E=function(e){delete _[e]},b?s=function(e){T.nextTick(M(e))}:A&&A.now?s=function(e){A.now(M(e))}:S&&!y?(o=(a=new S).port2,a.port1.onmessage=R,s=l(o.postMessage,o)):h.addEventListener&&d(h.postMessage)&&!h.importScripts&&n&&"file:"!==n.protocol&&!f(L)?(s=L,h.addEventListener("message",R,!1)):s=O in m("script")?function(e){p.appendChild(m("script"))[O]=function(){p.removeChild(this),P(e)}}:function(e){setTimeout(M(e),0)}),t.exports={set:x,clear:E}},{"629a4d99f4fe5b2e":"5ygRS",e574be68c288c7c8:"72fZp",df212787338802d3:"gWc3u",afdf018c2d01bbc6:"2Pprm","35a3e849940fd612":"45yko",b8bf5434d2248ca7:"45J7X","731f9370cc21fc3b":"9BU2I",ec358060964e4bde:"lUArJ","907adb6d219da7a3":"6Up9x",f398561ebd49a798:"9kaRM","8a8e342aaad83bb":"gR7W9","6eef8b4e43dd6731":"etN8h"}],"9kaRM":[function(e,t,i,r){var n=TypeError;t.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},{}],gR7W9:[function(e,t,i,r){var n=e("88313d0d5d3e28c");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},{"88313d0d5d3e28c":"cXzrn"}],hEzOI:[function(e,t,i,r){var n,s,a,o,h,c=e("f872aba82a3b0b65"),l=e("d65d53880ca448da"),d=e("c6f841b26dc6586e"),u=e("e7b8d665c6b82c12").set,f=e("78ca3b778736fc30"),p=e("e694c6aea443b084"),g=e("b0a0e151fbd36f02"),m=e("d48f26179ef02c02"),v=e("e809fd0b68a5879f"),y=c.MutationObserver||c.WebKitMutationObserver,b=c.document,x=c.process,E=c.Promise,T=l("queueMicrotask");if(!T){var A=new f,w=function(){var e,t;for(v&&(e=x.domain)&&e.exit();t=A.get();)try{t()}catch(e){throw A.head&&n(),e}e&&e.enter()};p||v||m||!y||!b?!g&&E&&E.resolve?((o=E.resolve(void 0)).constructor=E,h=d(o.then,o),n=function(){h(w)}):v?n=function(){x.nextTick(w)}:(u=d(u,c),n=function(){u(w)}):(s=!0,a=b.createTextNode(""),new y(w).observe(a,{characterData:!0}),n=function(){a.data=s=!s}),T=function(e){A.head||n(),A.add(e)}}t.exports=T},{f872aba82a3b0b65:"5ygRS",d65d53880ca448da:"6YRTf",c6f841b26dc6586e:"gWc3u",e7b8d665c6b82c12:"2zcFI","78ca3b778736fc30":"fpniJ",e694c6aea443b084:"gR7W9",b0a0e151fbd36f02:"j1RHZ",d48f26179ef02c02:"gD0yN",e809fd0b68a5879f:"etN8h"}],"6YRTf":[function(e,t,i,r){var n=e("fea114a3220626fd"),s=e("8329936952af7ff"),a=Object.getOwnPropertyDescriptor;t.exports=function(e){if(!s)return n[e];var t=a(n,e);return t&&t.value}},{fea114a3220626fd:"5ygRS","8329936952af7ff":"dqiQp"}],fpniJ:[function(e,t,i,r){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},t.exports=n},{}],j1RHZ:[function(e,t,i,r){var n=e("6993865deab208b1");t.exports=/ipad|iphone|ipod/i.test(n)&&"u">typeof Pebble},{"6993865deab208b1":"cXzrn"}],gD0yN:[function(e,t,i,r){var n=e("c48e030879980deb");t.exports=/web0s(?!.*chrome)/i.test(n)},{c48e030879980deb:"cXzrn"}],ioCHV:[function(e,t,i,r){t.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},{}],"1KEKE":[function(e,t,i,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],hL2yv:[function(e,t,i,r){t.exports=e("5c31330fc800d47f").Promise},{"5c31330fc800d47f":"5ygRS"}],ksy7O:[function(e,t,i,r){var n=e("858d6f549d7f3b06"),s=e("914dda54bcca9f98"),a=e("9560dd8306c037cf"),o=e("dc1381594b318fd4"),h=e("f6b84f5d53cc51bf"),c=e("28acb9f62af6dfc2"),l=e("45a29d2d770fea8"),d=e("c00f2fe103f19409"),u=e("dc99ee072f0f0ef8"),f=s&&s.prototype,p=c("species"),g=!1,m=a(n.PromiseRejectionEvent);t.exports={CONSTRUCTOR:o("Promise",function(){var e=h(s),t=e!==String(s);if(!t&&66===u||d&&!(f.catch&&f.finally))return!0;if(!u||u<51||!/native code/.test(e)){var i=new s(function(e){e(1)}),r=function(e){e(function(){},function(){})};if((i.constructor={})[p]=r,!(g=i.then(function(){})instanceof r))return!0}return!t&&("BROWSER"===l||"DENO"===l)&&!m}),REJECTION_EVENT:m,SUBCLASSING:g}},{"858d6f549d7f3b06":"5ygRS","914dda54bcca9f98":"hL2yv","9560dd8306c037cf":"2Pprm",dc1381594b318fd4:"c9nTu",f6b84f5d53cc51bf:"6EwKy","28acb9f62af6dfc2":"eG9HO","45a29d2d770fea8":"iU9O4",c00f2fe103f19409:"lssMj",dc99ee072f0f0ef8:"jarVK"}],ccQJ3:[function(e,t,i,r){var n=e("b85cb5089dafddf1"),s=TypeError,a=function(e){var t,i;this.promise=new e(function(e,r){if(void 0!==t||void 0!==i)throw new s("Bad Promise constructor");t=e,i=r}),this.resolve=n(t),this.reject=n(i)};t.exports.f=function(e){return new a(e)}},{b85cb5089dafddf1:"3m7Aa"}],"8ZDp7":[function(e,t,i,r){var n=e("5fe91bc37669c5a0"),s=e("f3e846242a85204b"),a=e("b44cc3ada152502d"),o=e("598afe33e3f52cb1"),h=e("e989f176969dcec5"),c=e("3f72073566ddc960");n({target:"Promise",stat:!0,forced:e("881fce5de451c4fe")},{all:function(e){var t=this,i=o.f(t),r=i.resolve,n=i.reject,l=h(function(){var i=a(t.resolve),o=[],h=0,l=1;c(e,function(e){var a=h++,c=!1;l++,s(i,t,e).then(function(e){!c&&(c=!0,o[a]=e,--l||r(o))},n)}),--l||r(o)});return l.error&&n(l.value),i.promise}})},{"5fe91bc37669c5a0":"b7GrG",f3e846242a85204b:"kiToe",b44cc3ada152502d:"3m7Aa","598afe33e3f52cb1":"ccQJ3",e989f176969dcec5:"1KEKE","3f72073566ddc960":"5ZCpM","881fce5de451c4fe":"i4b0m"}],i4b0m:[function(e,t,i,r){var n=e("d3fcaf55cfa61757"),s=e("27318831369e2a7e");t.exports=e("a7dca7fabf4d8c44").CONSTRUCTOR||!s(function(e){n.all(e).then(void 0,function(){})})},{d3fcaf55cfa61757:"hL2yv","27318831369e2a7e":"67emE",a7dca7fabf4d8c44:"ksy7O"}],bODDC:[function(e,t,i,r){var n=e("f9109f39e0c1eace"),s=e("b0f691f2694fd89e"),a=e("f07c13c93306bd7f").CONSTRUCTOR,o=e("31561c9d3d855c60"),h=e("1ba3086b4a897ac4"),c=e("7dd264a6360c2a5a"),l=e("baa11ffea0878c3e"),d=o&&o.prototype;if(n({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(e){return this.then(void 0,e)}}),!s&&c(o)){var u=h("Promise").prototype.catch;d.catch!==u&&l(d,"catch",u,{unsafe:!0})}},{f9109f39e0c1eace:"b7GrG",b0f691f2694fd89e:"lssMj",f07c13c93306bd7f:"ksy7O","31561c9d3d855c60":"hL2yv","1ba3086b4a897ac4":"2MF6I","7dd264a6360c2a5a":"2Pprm",baa11ffea0878c3e:"2UU83"}],hfAef:[function(e,t,i,r){var n=e("4068f648151c1330"),s=e("658417f940db2db2"),a=e("5199435aa17f3955"),o=e("f7224a0a89bb6794"),h=e("477a19c99b10aa32"),c=e("970f1b07d9125958");n({target:"Promise",stat:!0,forced:e("d71553795a1298b8")},{race:function(e){var t=this,i=o.f(t),r=i.reject,n=h(function(){var n=a(t.resolve);c(e,function(e){s(n,t,e).then(i.resolve,r)})});return n.error&&r(n.value),i.promise}})},{"4068f648151c1330":"b7GrG","658417f940db2db2":"kiToe","5199435aa17f3955":"3m7Aa",f7224a0a89bb6794:"ccQJ3","477a19c99b10aa32":"1KEKE","970f1b07d9125958":"5ZCpM",d71553795a1298b8:"i4b0m"}],hQvKp:[function(e,t,i,r){var n=e("ec46f4bb3616ad7b"),s=e("3f8b88f93499a7cd");n({target:"Promise",stat:!0,forced:e("2ae203822949c331").CONSTRUCTOR},{reject:function(e){var t=s.f(this);return(0,t.reject)(e),t.promise}})},{ec46f4bb3616ad7b:"b7GrG","3f8b88f93499a7cd":"ccQJ3","2ae203822949c331":"ksy7O"}],"4Ro4a":[function(e,t,i,r){var n=e("a4f3ef37c946dd2b"),s=e("2794b78b0ca3694f"),a=e("c6e440c7abf54a3a"),o=e("c3eef09c8272b2fa"),h=e("ca944314fb589e9b").CONSTRUCTOR,c=e("95f41bf564123591"),l=s("Promise"),d=a&&!h;n({target:"Promise",stat:!0,forced:a||h},{resolve:function(e){return c(d&&this===l?o:this,e)}})},{a4f3ef37c946dd2b:"b7GrG","2794b78b0ca3694f":"2MF6I",c6e440c7abf54a3a:"lssMj",c3eef09c8272b2fa:"hL2yv",ca944314fb589e9b:"ksy7O","95f41bf564123591":"2Qjzu"}],"2Qjzu":[function(e,t,i,r){var n=e("5304a07f7517b45f"),s=e("6179ead91f16d16e"),a=e("1e7f70c2e43192d5");t.exports=function(e,t){if(n(e),s(t)&&t.constructor===e)return t;var i=a.f(e);return(0,i.resolve)(t),i.promise}},{"5304a07f7517b45f":"5dGJN","6179ead91f16d16e":"adFpz","1e7f70c2e43192d5":"ccQJ3"}],"7iNgk":[function(e,t,i,r){var n=e("e5702b0a0c888663"),s=e("c674cde3c52a264d"),a=e("9971716fd3458e4e"),o=e("bd9c4f444b889d5a"),h=e("fd38269508aa0f80"),c=e("dba73c07712c5034");n({target:"Promise",stat:!0,forced:e("a353491caf893cee")},{allSettled:function(e){var t=this,i=o.f(t),r=i.resolve,n=i.reject,l=h(function(){var i=a(t.resolve),n=[],o=0,h=1;c(e,function(e){var a=o++,c=!1;h++,s(i,t,e).then(function(e){!c&&(c=!0,n[a]={status:"fulfilled",value:e},--h||r(n))},function(e){!c&&(c=!0,n[a]={status:"rejected",reason:e},--h||r(n))})}),--h||r(n)});return l.error&&n(l.value),i.promise}})},{e5702b0a0c888663:"b7GrG",c674cde3c52a264d:"kiToe","9971716fd3458e4e":"3m7Aa",bd9c4f444b889d5a:"ccQJ3",fd38269508aa0f80:"1KEKE",dba73c07712c5034:"5ZCpM",a353491caf893cee:"i4b0m"}],"45os2":[function(e,t,i,r){var n=e("a747ecea7d98f8cc"),s=e("1a07897007696e7b"),a=e("a5273ad346d39602"),o=e("a85aacc5cf0c49f5"),h=e("938d82de91b73028"),c=e("a5742b79e80fe93f"),l=e("455d48516e9f58ad"),d=e("a1a0e57d4b83e832"),u="No one promise resolved";n({target:"Promise",stat:!0,forced:d},{any:function(e){var t=this,i=o("AggregateError"),r=h.f(t),n=r.resolve,d=r.reject,f=c(function(){var r=a(t.resolve),o=[],h=0,c=1,f=!1;l(e,function(e){var a=h++,l=!1;c++,s(r,t,e).then(function(e){l||f||(f=!0,n(e))},function(e){!l&&!f&&(l=!0,o[a]=e,--c||d(new i(o,u)))})}),--c||d(new i(o,u))});return f.error&&d(f.value),r.promise}})},{a747ecea7d98f8cc:"b7GrG","1a07897007696e7b":"kiToe",a5273ad346d39602:"3m7Aa",a85aacc5cf0c49f5:"2MF6I","938d82de91b73028":"ccQJ3",a5742b79e80fe93f:"1KEKE","455d48516e9f58ad":"5ZCpM",a1a0e57d4b83e832:"i4b0m"}],"2WfRA":[function(e,t,i,r){var n=e("5967530d4e981375"),s=e("ea0758f982664c1b"),a=e("252abba36f7f031b"),o=e("672a58147e86eb31"),h=e("5ba40ea71aea909"),c=e("ea376840732ca40e"),l=e("83b04bdccb7f39e2"),d=e("a624c6d6ecebe4ab"),u=e("7367d4d000a0f3e2"),f=a&&a.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!a&&o(function(){f.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=l(this,h("Promise")),i=c(e);return this.then(i?function(i){return d(t,e()).then(function(){return i})}:e,i?function(i){return d(t,e()).then(function(){throw i})}:e)}}),!s&&c(a)){var p=h("Promise").prototype.finally;f.finally!==p&&u(f,"finally",p,{unsafe:!0})}},{"5967530d4e981375":"b7GrG",ea0758f982664c1b:"lssMj","252abba36f7f031b":"hL2yv","672a58147e86eb31":"45J7X","5ba40ea71aea909":"2MF6I",ea376840732ca40e:"2Pprm","83b04bdccb7f39e2":"hp0ju",a624c6d6ecebe4ab:"2Qjzu","7367d4d000a0f3e2":"2UU83"}],lOYCT:[function(e,t,i,r){var n=e("e891936b921586ce"),s=e("be55d0d9787f386c"),a=e("53a5a11417313428"),o=e("b6f9059ddb81e98b"),h=e("4e74861c17e890c3"),c=e("7900efa3cdb7a624"),l=e("1fb2dc6087d1e9d5"),d=s.Promise,u=!1;n({target:"Promise",stat:!0,forced:!d||!d.try||l(function(){d.try(function(e){u=8===e},8)}).error||!u},{try:function(e){var t=arguments.length>1?o(arguments,1):[],i=h.f(this),r=l(function(){return a(c(e),void 0,t)});return(r.error?i.reject:i.resolve)(r.value),i.promise}})},{e891936b921586ce:"b7GrG",be55d0d9787f386c:"5ygRS","53a5a11417313428":"72fZp",b6f9059ddb81e98b:"lUArJ","4e74861c17e890c3":"ccQJ3","7900efa3cdb7a624":"3m7Aa","1fb2dc6087d1e9d5":"1KEKE"}],"8IRHP":[function(e,t,i,r){var n=e("c539d5627c4a86aa"),s=e("f3ae7f423c78fd60");n({target:"Promise",stat:!0},{withResolvers:function(){var e=s.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})},{c539d5627c4a86aa:"b7GrG",f3ae7f423c78fd60:"ccQJ3"}],hNcUL:[function(e,t,i,r){var n=e("a5abd83eeb3a4403"),s=e("e2a3fb59370a2bec"),a=e("51d547b828784168"),o=Array.fromAsync;n({target:"Array",stat:!0,forced:!o||a(function(){var e=0;return o.call(function(){return e++,[]},{length:0}),1!==e})},{fromAsync:s})},{a5abd83eeb3a4403:"b7GrG",e2a3fb59370a2bec:"15pnA","51d547b828784168":"45J7X"}],"15pnA":[function(e,t,i,r){var n=e("12013bcad5d3a684"),s=e("290a47d6639df067"),a=e("43934c3451ef1eb2"),o=e("d28a88653e34f63"),h=e("da734474d5635cb"),c=e("6285d16978a51fd"),l=e("5b02dfef32bf8965"),d=e("fcc856a1c8fb8ad4"),u=e("393b7e54b003ceca"),f=e("fa39bc162f393b44"),p=e("ce1a497bf12535a9"),g=e("c80aada59b2a51c3"),m=e("b49f4f8a831833e"),v=e("747373e155dee136").toArray,y=g("asyncIterator"),b=s(p("Array","values")),x=s(b([]).next),E=function(){return new T(this)},T=function(e){this.iterator=b(e)};T.prototype.next=function(){return x(this.iterator)},t.exports=function(e){var t=this,i=arguments.length,r=i>1?arguments[1]:void 0,s=i>2?arguments[2]:void 0;return new(f("Promise"))(function(i){var f=a(e);void 0!==r&&(r=n(r,s));var p=u(f,y),g=p?void 0:d(f)||E,b=o(t)?new t:[];i(v(p?h(f,p):new m(l(c(f,g))),r,b))})}},{"12013bcad5d3a684":"gWc3u","290a47d6639df067":"cfIox","43934c3451ef1eb2":"eHl90",d28a88653e34f63:"7c2zg",da734474d5635cb:"66AWu","6285d16978a51fd":"7mfF2","5b02dfef32bf8965":"3AYN9",fcc856a1c8fb8ad4:"2JETE","393b7e54b003ceca":"7cH9N",fa39bc162f393b44:"2MF6I",ce1a497bf12535a9:"6tn3R",c80aada59b2a51c3:"eG9HO",b49f4f8a831833e:"4G4wB","747373e155dee136":"b04Ks"}],"66AWu":[function(e,t,i,r){var n=e("2cc87e7aa81c7fde"),s=e("b7e768e292912f58"),a=e("432cbbcd937cbbae"),o=e("6cb418e27435c0b5"),h=e("2deceb67f8d8d19f"),c=e("1289543572f3360b"),l=e("9d7883479eb77a55")("asyncIterator");t.exports=function(e,t){var i=arguments.length<2?c(e,l):t;return i?a(n(i,e)):new s(h(o(e)))}},{"2cc87e7aa81c7fde":"kiToe",b7e768e292912f58:"4G4wB","432cbbcd937cbbae":"5dGJN","6cb418e27435c0b5":"7mfF2","2deceb67f8d8d19f":"3AYN9","1289543572f3360b":"7cH9N","9d7883479eb77a55":"eG9HO"}],"4G4wB":[function(e,t,i,r){var n=e("b3fab4288f00866d"),s=e("f1701aaea5390f7b"),a=e("a472e027f5fe2386"),o=e("9427f5c62a883392"),h=e("698544cf62ccbadf"),c=e("420c47c9c6c17e11"),l=e("4e9580a48378dc9e"),d=e("3803519b477f288b"),u=e("a8231d3916c24b63"),f=e("f23ce934e5a8775b"),p=d("Promise"),g="AsyncFromSyncIterator",m=c.set,v=c.getterFor(g),y=function(e,t,i,r,n){var s=e.done;p.resolve(e.value).then(function(e){t(f(e,s))},function(e){if(!s&&n)try{l(r,"throw",e)}catch(t){e=t}i(e)})},b=function(e){e.type=g,m(this,e)};b.prototype=h(a(u),{next:function(){var e=v(this);return new p(function(t,i){y(s(n(e.next,e.iterator)),t,i,e.iterator,!0)})},return:function(){var e=v(this).iterator;return new p(function(t,i){var r=o(e,"return");if(void 0===r)return t(f(void 0,!0));y(s(n(r,e)),t,i,e)})}}),t.exports=b},{b3fab4288f00866d:"kiToe",f1701aaea5390f7b:"5dGJN",a472e027f5fe2386:"gg5Dl","9427f5c62a883392":"7cH9N","698544cf62ccbadf":"8DWpB","420c47c9c6c17e11":"fuP4a","4e9580a48378dc9e":"4rTZx","3803519b477f288b":"2MF6I",a8231d3916c24b63:"cyjNT",f23ce934e5a8775b:"k6wXP"}],cyjNT:[function(e,t,i,r){var n,s,a=e("25bf829a90db72e6"),o=e("54384634f4ff1d63"),h=e("f4750921cb5cf511"),c=e("355aad949761f565"),l=e("135c9709cf8a8885"),d=e("f53a14ceccf8ed7a"),u=e("bfb53aee21e4e29e"),f=e("ccab4b73b48fa5d5"),p="USE_FUNCTION_CONSTRUCTOR",g=u("asyncIterator"),m=a.AsyncIterator,v=o.AsyncIteratorPrototype;if(v)n=v;else if(h(m))n=m.prototype;else if(o[p]||a[p])try{s=l(l(l(Function("return async function*(){}()")()))),l(s)===Object.prototype&&(n=s)}catch(e){}n?f&&(n=c(n)):n={},h(n[g])||d(n,g,function(){return this}),t.exports=n},{"25bf829a90db72e6":"5ygRS","54384634f4ff1d63":"8EvDv",f4750921cb5cf511:"2Pprm","355aad949761f565":"gg5Dl","135c9709cf8a8885":"6P7xV",f53a14ceccf8ed7a:"2UU83",bfb53aee21e4e29e:"eG9HO",ccab4b73b48fa5d5:"lssMj"}],b04Ks:[function(e,t,i,r){var n=e("d8fcaf2525d89a05"),s=e("9742588ef09b79a8"),a=e("39c6dbc28502cc65"),o=e("5afe43ff84f643b0"),h=e("d25cd4b558b435f"),c=e("46cec221d2362a38"),l=e("75b25f9d2739ead7"),d=e("bc6b0ca4e895b18a"),u=function(e){var t=0===e,i=1===e,r=2===e,u=3===e;return function(e,f,p){a(e);var g=void 0!==f;(g||!t)&&s(f);var m=l(e),v=c("Promise"),y=m.iterator,b=m.next,x=0;return new v(function(e,s){var c=function(e){d(y,s,e,s)},l=function(){try{if(g)try{h(x)}catch(e){c(e)}v.resolve(a(n(b,y))).then(function(n){try{if(a(n).done)t?(p.length=x,e(p)):e(!u&&(r||void 0));else{var h=n.value;try{if(g){var m=f(h,x),b=function(n){if(i)l();else if(r)n?l():d(y,e,!1,s);else if(t)try{p[x++]=n,l()}catch(e){c(e)}else n?d(y,e,u||h,s):l()};o(m)?v.resolve(m).then(b,c):b(m)}else p[x++]=h,l()}catch(e){c(e)}}}catch(e){s(e)}},s)}catch(e){s(e)}};l()})}};t.exports={toArray:u(0),forEach:u(1),every:u(2),some:u(3),find:u(4)}},{d8fcaf2525d89a05:"kiToe","9742588ef09b79a8":"3m7Aa","39c6dbc28502cc65":"5dGJN","5afe43ff84f643b0":"adFpz",d25cd4b558b435f:"ldHs0","46cec221d2362a38":"2MF6I","75b25f9d2739ead7":"3AYN9",bc6b0ca4e895b18a:"fkYvu"}],fkYvu:[function(e,t,i,r){var n=e("93224699973c41e4"),s=e("d7052620a391e37f"),a=e("fdb0868d16cda672");t.exports=function(e,t,i,r){try{var o=a(e,"return");if(o)return s("Promise").resolve(n(o,e)).then(function(){t(i)},function(e){r(e)})}catch(e){return r(e)}t(i)}},{"93224699973c41e4":"kiToe",d7052620a391e37f:"2MF6I",fdb0868d16cda672:"7cH9N"}],cvTmF:[function(e,t,i,r){var n=e("b82e75eb6e0f2a38"),s=e("5f48957f23a13cbb"),a=e("fc728d16c5e6186b"),o=e("e58820e6547cd0b"),h=e("e01f5861b06b612a"),c=e("ff5c52e098295496"),l=e("d91a7587fe91d00a"),d=e("f74bfc4526f3787e"),u=e("cd38f2cd44c0f003"),f=e("15b5616de7e03a3a"),p=e("3a1b0f621998c487"),g=e("e94f4daf48a0632e"),m=a("Promise"),v=a("SuppressedError"),y=ReferenceError,b=u("asyncDispose"),x=u("toStringTag"),E="AsyncDisposableStack",T=f.set,A=f.getterFor(E),w="async-dispose",S="disposed",C=function(e){var t=A(e);if(t.state===S)throw new y(E+" already disposed");return t},I=function(){T(h(this,_),{type:E,state:"pending",stack:[]}),s||(this.disposed=!1)},_=I.prototype;l(_,{disposeAsync:function(){var e=this;return new m(function(t,i){var r,n=A(e);if(n.state===S)return t(void 0);n.state=S,s||(e.disposed=!0);var a=n.stack,o=a.length,h=!1,c=function(e){h?r=new v(e,r):(h=!0,r=e),l()},l=function(){if(o){var e=a[--o];a[o]=null;try{m.resolve(e()).then(l,c)}catch(e){c(e)}}else n.stack=null,h?i(r):t(void 0)};l()})},use:function(e){return p(C(this),e,w),e},adopt:function(e,t){var i=C(this);return o(t),p(i,void 0,w,function(){return t(e)}),e},defer:function(e){var t=C(this);o(e),p(t,void 0,w,e)},move:function(){var e=C(this),t=new I;return A(t).stack=e.stack,e.stack=[],e.state=S,s||(this.disposed=!0),t}}),s&&d(_,"disposed",{configurable:!0,get:function(){return A(this).state===S}}),c(_,b,_.disposeAsync,{name:"disposeAsync"}),c(_,x,E,{nonWritable:!0}),n({global:!0,constructor:!0,forced:g&&g<136},{AsyncDisposableStack:I})},{b82e75eb6e0f2a38:"b7GrG","5f48957f23a13cbb":"dqiQp",fc728d16c5e6186b:"2MF6I",e58820e6547cd0b:"3m7Aa",e01f5861b06b612a:"cYIbs",ff5c52e098295496:"2UU83",d91a7587fe91d00a:"8DWpB",f74bfc4526f3787e:"l5KAt",cd38f2cd44c0f003:"eG9HO","15b5616de7e03a3a":"fuP4a","3a1b0f621998c487":"7w0mp",e94f4daf48a0632e:"jarVK"}],"02XNU":[function(e,t,i,r){var n=e("d918cf0540a5a113"),s=e("579528b07a9badc5"),a=e("1d8eea94594ea6c"),o=e("21c9e763f9867ab9"),h=e("702de17ab9cc33e3"),c=e("6ed31ff270eb8d3c"),l=e("2e4d0920a6569993"),d=c("asyncDispose"),u=a("Promise");h(l,d)||s(l,d,function(){var e=this;return new u(function(t,i){var r=o(e,"return");r?u.resolve(n(r,e)).then(function(){t(void 0)},i):t(void 0)})})},{d918cf0540a5a113:"kiToe","579528b07a9badc5":"2UU83","1d8eea94594ea6c":"2MF6I","21c9e763f9867ab9":"7cH9N","702de17ab9cc33e3":"45yko","6ed31ff270eb8d3c":"eG9HO","2e4d0920a6569993":"cyjNT"}],bd47m:[function(e,t,i,r){var n=e("1c621266486af366"),s=e("8dc2c7c905c7079"),a=e("65b541dabe35d529"),o=e("536113b176a05b60");n({target:"Reflect",stat:!0,forced:!e("e032bfdb61e2620b")(function(){Reflect.apply(function(){})})},{apply:function(e,t,i){return s(a(e),t,o(i))}})},{"1c621266486af366":"b7GrG","8dc2c7c905c7079":"72fZp","65b541dabe35d529":"3m7Aa","536113b176a05b60":"5dGJN",e032bfdb61e2620b:"45J7X"}],aYO1A:[function(e,t,i,r){var n=e("df593a7c66399ae2"),s=e("aa786cd255199284"),a=e("c585a7fc86970645"),o=e("d05ce57b271ff568"),h=e("488fff441ba5bfef"),c=e("688b651555d83b8f"),l=e("c7a921b7c24a97c"),d=e("2ff4acc7df7eb046"),u=e("2ad48193afce6a95"),f=s("Reflect","construct"),p=Object.prototype,g=[].push,m=u(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),v=!u(function(){f(function(){})}),y=m||v;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(e,t){h(e),c(t);var i=arguments.length<3?e:h(arguments[2]);if(v&&!m)return f(e,t,i);if(e===i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return a(g,r,t),new(a(o,e,r))}var n=i.prototype,s=d(l(n)?n:p),u=a(e,s,t);return l(u)?u:s}})},{df593a7c66399ae2:"b7GrG",aa786cd255199284:"2MF6I",c585a7fc86970645:"72fZp",d05ce57b271ff568:"7R8IK","488fff441ba5bfef":"6tYWC","688b651555d83b8f":"5dGJN",c7a921b7c24a97c:"adFpz","2ff4acc7df7eb046":"gg5Dl","2ad48193afce6a95":"45J7X"}],"4gITF":[function(e,t,i,r){var n=e("dc2eaf4c122f82d4"),s=e("55416992b3cdb7ec"),a=e("c2c755875e2adbfa"),o=e("578d27629d28889e"),h=e("426724837dbcc1e9");n({target:"Reflect",stat:!0,forced:e("71d0ba7a21c21fc7")(function(){Reflect.defineProperty(h.f({},1,{value:1}),1,{value:2})}),sham:!s},{defineProperty:function(e,t,i){a(e);var r=o(t);a(i);try{return h.f(e,r,i),!0}catch(e){return!1}}})},{dc2eaf4c122f82d4:"b7GrG","55416992b3cdb7ec":"dqiQp",c2c755875e2adbfa:"5dGJN","578d27629d28889e":"2y7C0","426724837dbcc1e9":"34YKB","71d0ba7a21c21fc7":"45J7X"}],"8XfJ4":[function(e,t,i,r){var n=e("6dcb929d30bdbfde"),s=e("3dedf4d14121a863"),a=e("fbd53ec455a05b95").f;n({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var i=a(s(e),t);return(!i||!!i.configurable)&&delete e[t]}})},{"6dcb929d30bdbfde":"b7GrG","3dedf4d14121a863":"5dGJN",fbd53ec455a05b95:"lYlYP"}],hBrFk:[function(e,t,i,r){var n=e("36af64a139a04a9f"),s=e("2b0e8e0105e0ccfb"),a=e("c12275a56fb80891"),o=e("8afae34daed2ddfd"),h=e("a0fe3971b7cb6675"),c=e("64fb71955ccea62a"),l=e("42f515e0257c869d");n({target:"Reflect",stat:!0},{get:function e(t,i){var r,n,d=arguments.length<3?t:arguments[2];return o(t)===d?t[i]:(r=c.f(t,i))?h(r)?r.value:void 0===r.get?void 0:s(r.get,d):a(n=l(t))?e(n,i,d):void 0}})},{"36af64a139a04a9f":"b7GrG","2b0e8e0105e0ccfb":"kiToe",c12275a56fb80891:"adFpz","8afae34daed2ddfd":"5dGJN",a0fe3971b7cb6675:"liaBM","64fb71955ccea62a":"lYlYP","42f515e0257c869d":"6P7xV"}],liaBM:[function(e,t,i,r){var n=e("50fb4bd8f6d0c370");t.exports=function(e){return void 0!==e&&(n(e,"value")||n(e,"writable"))}},{"50fb4bd8f6d0c370":"45yko"}],htnHQ:[function(e,t,i,r){var n=e("d7bd54e98aaffcc7"),s=e("7232f0c071c940d0"),a=e("10cdead7a28df296"),o=e("de341026ceb57ac3");n({target:"Reflect",stat:!0,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},{d7bd54e98aaffcc7:"b7GrG","7232f0c071c940d0":"dqiQp","10cdead7a28df296":"5dGJN",de341026ceb57ac3:"lYlYP"}],"5hrAe":[function(e,t,i,r){var n=e("e0d7bd3b2cd5e427"),s=e("28c21999f76acbe2"),a=e("5d4e809754fe7c85");n({target:"Reflect",stat:!0,sham:!e("b7b6a27574b33ffc")},{getPrototypeOf:function(e){return a(s(e))}})},{e0d7bd3b2cd5e427:"b7GrG","28c21999f76acbe2":"5dGJN","5d4e809754fe7c85":"6P7xV",b7b6a27574b33ffc:"lYEaN"}],gRtxl:[function(e,t,i,r){e("f5a4987d6328de60")({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},{f5a4987d6328de60:"b7GrG"}],f9sXD:[function(e,t,i,r){var n=e("f1cf95331dac0a5c"),s=e("6ffd352ee2b78315"),a=e("ec1223a1980707d0");n({target:"Reflect",stat:!0},{isExtensible:function(e){return s(e),a(e)}})},{f1cf95331dac0a5c:"b7GrG","6ffd352ee2b78315":"5dGJN",ec1223a1980707d0:"fuhX5"}],dxwO3:[function(e,t,i,r){e("e6256b53ff8e7ff7")({target:"Reflect",stat:!0},{ownKeys:e("62694a198a2d39f1")})},{e6256b53ff8e7ff7:"b7GrG","62694a198a2d39f1":"i9P3q"}],"4JzUR":[function(e,t,i,r){var n=e("21a794712b7c3b28"),s=e("b2540e28cfeb7421"),a=e("5c89b74916f5e3f1");n({target:"Reflect",stat:!0,sham:!e("368dee480fe6c03a")},{preventExtensions:function(e){a(e);try{var t=s("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},{"21a794712b7c3b28":"b7GrG",b2540e28cfeb7421:"2MF6I","5c89b74916f5e3f1":"5dGJN","368dee480fe6c03a":"bk8fh"}],"1Ddgn":[function(e,t,i,r){var n=e("ecfb0dd8a941692d"),s=e("ff301a827b8a1848"),a=e("2c02940a559ef1bc"),o=e("7a2e80973762c50c"),h=e("21efaf46e8fea96f"),c=e("8f78be83a230ea4a"),l=e("acf3c26369354b83"),d=e("4893e43c9a11fc63"),u=e("48482fa6862b803a"),f=e("de1987fde7f85915");n({target:"Reflect",stat:!0,forced:c(function(){var e=function(){},t=l.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)})},{set:function e(t,i,r){var n,c,p,g=arguments.length<4?t:arguments[3],m=d.f(a(t),i);if(!m){if(o(c=u(t)))return e(c,i,r,g);m=f(0)}if(h(m)){if(!1===m.writable||!o(g))return!1;if(n=d.f(g,i)){if(n.get||n.set||!1===n.writable)return!1;n.value=r,l.f(g,i,n)}else l.f(g,i,f(0,r))}else{if(void 0===(p=m.set))return!1;s(p,g,r)}return!0}})},{ecfb0dd8a941692d:"b7GrG",ff301a827b8a1848:"kiToe","2c02940a559ef1bc":"5dGJN","7a2e80973762c50c":"adFpz","21efaf46e8fea96f":"liaBM","8f78be83a230ea4a":"45J7X",acf3c26369354b83:"34YKB","4893e43c9a11fc63":"lYlYP","48482fa6862b803a":"6P7xV",de1987fde7f85915:"enYsZ"}],"4Nk8B":[function(e,t,i,r){var n=e("1901fc8accbc2376"),s=e("1c4ec63b43256656"),a=e("2fee865898c5ee13"),o=e("f549073ca7dfb3d2");o&&n({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){s(e),a(t);try{return o(e,t),!0}catch(e){return!1}}})},{"1901fc8accbc2376":"b7GrG","1c4ec63b43256656":"5dGJN","2fee865898c5ee13":"a1RWN",f549073ca7dfb3d2:"i41Eo"}],gDsyq:[function(e,t,i,r){var n=e("9aa7ab2c6cbf6701"),s=e("28bf5c0ba6cfd67b"),a=e("717556d45c34d721");n({global:!0},{Reflect:{}}),a(s.Reflect,"Reflect",!0)},{"9aa7ab2c6cbf6701":"b7GrG","28bf5c0ba6cfd67b":"5ygRS","717556d45c34d721":"ksXqH"}],kSPV7:[function(e,t,i,r){var n=e("c8639d3a74e6bb07"),s=e("31e10ac977d93a17"),a=e("7f079a60fe35f235"),o=e("66b0d772c6e443af"),h=e("11d7cdfa8687037e"),c=e("5fcf789712ec006"),l=e("488fe57e39be2d0d"),d=e("8b1d3e9ebc10b376").f,u=e("6c4ec99bc7b85243"),f=e("28b4ed60c7ffe147"),p=e("f00c99d31179ed39"),g=e("867ea555b957a0aa"),m=e("86e9756a5a6a0176"),v=e("438bf11983e20900"),y=e("818c2b1aecf93017"),b=e("5b540f0dbf00266f"),x=e("5cfbf10059a84a33"),E=e("2ff319236881379d").enforce,T=e("7f2183994b17a7e8"),A=e("7edc7513ec6ac4d0"),w=e("fbaf905791cdbfe"),S=e("28f5087d79ccd92a"),C=A("match"),I=s.RegExp,_=I.prototype,O=s.SyntaxError,P=a(_.exec),M=a("".charAt),R=a("".replace),L=a("".indexOf),D=a("".slice),k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,F=/a/g,B=new I(N)!==N,U=m.MISSED_STICKY,G=m.UNSUPPORTED_Y,V=n&&(!B||U||w||S||b(function(){return F[C]=!1,I(N)!==N||I(F)===F||"/a/i"!==String(I(N,"i"))})),Y=function(e){for(var t,i=e.length,r=0,n="",s=!1;r<=i;r++){if("\\"===(t=M(e,r))){n+=t+M(e,++r);continue}s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),n+=t):n+="[\\s\\S]"}return n},j=function(e){for(var t,i=e.length,r=0,n="",s=[],a=l(null),o=!1,h=!1,c=0,d="";r<=i;r++){if("\\"===(t=M(e,r)))t+=M(e,++r);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:if(n+=t,"?:"===D(e,r+1,r+3))continue;P(k,D(e,r+1))&&(r+=2,h=!0),c++;continue;case">"===t&&h:if(""===d||x(a,d))throw new O("Invalid capture group name");a[d]=!0,s[s.length]=[d,c],h=!1,d="";continue}h?d+=t:n+=t}return[n,s]};if(o("RegExp",V)){for(var W=function(e,t){var i,r,n,s,a,o,l=u(_,this),d=f(e),m=void 0===t,v=[],y=e;if(!l&&d&&m&&e.constructor===W)return e;if((d||u(_,e))&&(e=e.source,m&&(t=g(y))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),y=e,w&&"dotAll"in N&&(r=!!t&&L(t,"s")>-1)&&(t=R(t,/s/g,"")),i=t,U&&"sticky"in N&&(n=!!t&&L(t,"y")>-1)&&G&&(t=R(t,/y/g,"")),S&&(e=(s=j(e))[0],v=s[1]),a=h(I(e,t),l?this:_,W),(r||n||v.length)&&(o=E(a),r&&(o.dotAll=!0,o.raw=W(Y(e),i)),n&&(o.sticky=!0),v.length&&(o.groups=v)),e!==y)try{c(a,"source",""===y?"(?:)":y)}catch(e){}return a},z=d(I),H=0;z.length>H;)v(W,I,z[H++]);_.constructor=W,W.prototype=_,y(s,"RegExp",W,{constructor:!0})}T("RegExp")},{c8639d3a74e6bb07:"dqiQp","31e10ac977d93a17":"5ygRS","7f079a60fe35f235":"cfIox","66b0d772c6e443af":"c9nTu","11d7cdfa8687037e":"kzdOP","5fcf789712ec006":"mcZBn","488fe57e39be2d0d":"gg5Dl","8b1d3e9ebc10b376":"e91mZ","6c4ec99bc7b85243":"3Igu8","28b4ed60c7ffe147":"4jZ6D",f00c99d31179ed39:"2QNq8","867ea555b957a0aa":"5f4vy","86e9756a5a6a0176":"lxpCg","438bf11983e20900":"knn4r","818c2b1aecf93017":"2UU83","5b540f0dbf00266f":"45J7X","5cfbf10059a84a33":"45yko","2ff319236881379d":"fuP4a","7f2183994b17a7e8":"klUhs","7edc7513ec6ac4d0":"eG9HO",fbaf905791cdbfe:"ezhiR","28f5087d79ccd92a":"91LWg"}],"4jZ6D":[function(e,t,i,r){var n=e("4ca57df9821dbfa3"),s=e("b867bee476fc5018"),a=e("42cd33b6dbd61bee")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"===s(e))}},{"4ca57df9821dbfa3":"adFpz",b867bee476fc5018:"aQekt","42cd33b6dbd61bee":"eG9HO"}],"5f4vy":[function(e,t,i,r){var n=e("fd54476372f3a204"),s=e("a12d2126c329f45"),a=e("815509f48e0b1e36"),o=e("586a9e5bee9cf7ef"),h=e("37fba4854c4ab846"),c=RegExp.prototype;t.exports=o.correct?function(e){return e.flags}:function(e){return!o.correct&&a(c,e)&&!s(e,"flags")?n(h,e):e.flags}},{fd54476372f3a204:"kiToe",a12d2126c329f45:"45yko","815509f48e0b1e36":"3Igu8","586a9e5bee9cf7ef":"6ql2M","37fba4854c4ab846":"3dU5B"}],"6ql2M":[function(e,t,i,r){var n=e("e604b58e4400a5a9"),s=e("c7e788cbac482e2"),a=n.RegExp;t.exports={correct:!s(function(){var e=!0;try{a(".","d")}catch(t){e=!1}var t={},i="",r=e?"dgimsy":"gimsy",n=function(e,r){Object.defineProperty(t,e,{get:function(){return i+=r,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(s.hasIndices="d"),s)n(o,s[o]);return Object.getOwnPropertyDescriptor(a.prototype,"flags").get.call(t)!==r||i!==r})}},{e604b58e4400a5a9:"5ygRS",c7e788cbac482e2:"45J7X"}],"3dU5B":[function(e,t,i,r){var n=e("136abace0aec2b5c");t.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},{"136abace0aec2b5c":"5dGJN"}],lxpCg:[function(e,t,i,r){var n=e("797bef35e651cb5e"),s=e("d87f6288614c07bc").RegExp,a=n(function(){var e=s("a","y");return e.lastIndex=2,null!==e.exec("abcd")}),o=a||n(function(){return!s("a","y").sticky});t.exports={BROKEN_CARET:a||n(function(){var e=s("^r","gy");return e.lastIndex=2,null!==e.exec("str")}),MISSED_STICKY:o,UNSUPPORTED_Y:a}},{"797bef35e651cb5e":"45J7X",d87f6288614c07bc:"5ygRS"}],ezhiR:[function(e,t,i,r){var n=e("e4784e58ea762065"),s=e("ea51a856230c58ac").RegExp;t.exports=n(function(){var e=s(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)})},{e4784e58ea762065:"45J7X",ea51a856230c58ac:"5ygRS"}],"91LWg":[function(e,t,i,r){var n=e("b9b1a0fbdd999ded"),s=e("f47a97b0c4cfeafc").RegExp;t.exports=n(function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})},{b9b1a0fbdd999ded:"45J7X",f47a97b0c4cfeafc:"5ygRS"}],"4r9Ga":[function(e,t,i,r){var n=e("55b850c40417628d"),s=e("6d1c082db0d3aa2"),a=e("9ffe31c5b20db47d"),o=e("ed65b9839a5ee92d"),h=e("6b220bb3234ffa29").start,c=e("be20e0dfd23ff6bc"),l=Array,d=RegExp.escape,u=s("".charAt),f=s("".charCodeAt),p=s(1.1.toString),g=s([].join),m=/^[0-9a-z]/i,v=/^[$()*+./?[\\\]^{|}]/,y=RegExp("^[!\"#%&',\\-:;<=>@`~"+c+"]"),b=s(m.exec),x={"	":"t","\n":"n","\v":"v","\f":"f","\r":"r"},E=function(e){var t=p(f(e,0),16);return t.length<3?"\\x"+h(t,2,"0"):"\\u"+h(t,4,"0")};n({target:"RegExp",stat:!0,forced:!d||"\\x61b"!==d("ab")},{escape:function(e){a(e);for(var t=e.length,i=l(t),r=0;r<t;r++){var n=u(e,r);if(0===r&&b(m,n))i[r]=E(n);else if(o(x,n))i[r]="\\"+x[n];else if(b(v,n))i[r]="\\"+n;else if(b(y,n))i[r]=E(n);else{var s=f(n,0);(63488&s)!=55296?i[r]=n:s>=56320||r+1>=t||(64512&f(e,r+1))!=56320?i[r]=E(n):(i[r]=n,i[++r]=u(e,r))}}return g(i,"")}})},{"55b850c40417628d":"b7GrG","6d1c082db0d3aa2":"cfIox","9ffe31c5b20db47d":"kSy9K",ed65b9839a5ee92d:"45yko","6b220bb3234ffa29":"ISKOw",be20e0dfd23ff6bc:"7OygN"}],kSy9K:[function(e,t,i,r){var n=TypeError;t.exports=function(e){if("string"==typeof e)return e;throw new n("Argument is not a string")}},{}],"8mUm1":[function(e,t,i,r){var n=e("a9f8f60f2f751fb4"),s=e("f4bf414038137d54"),a=e("f6019dcdb547562c"),o=e("ca788245c2356b08"),h=e("ff536bd90d3c7c05").get,c=RegExp.prototype,l=TypeError;n&&s&&o(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!h(this).dotAll;throw new l("Incompatible receiver, RegExp required")}}})},{a9f8f60f2f751fb4:"dqiQp",f4bf414038137d54:"ezhiR",f6019dcdb547562c:"aQekt",ca788245c2356b08:"l5KAt",ff536bd90d3c7c05:"fuP4a"}],iLM0f:[function(e,t,i,r){var n=e("72ba4de9841213e"),s=e("d4ebaff1663cc5b9");n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},{"72ba4de9841213e":"b7GrG",d4ebaff1663cc5b9:"Hdtna"}],Hdtna:[function(e,t,i,r){var n,s,a=e("698f504b4733b02d"),o=e("6d0d2df39383a10b"),h=e("382af5492ddc18e6"),c=e("96e0244464229d3"),l=e("3bd1d72d4987e0ff"),d=e("12c3e6e355312395"),u=e("38d060dff8e4ab54"),f=e("aec1e11e2cd92d19").get,p=e("7d9db6b4177b833a"),g=e("b26a8ca5152d0a8d"),m=d("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,y=v,b=o("".charAt),x=o("".indexOf),E=o("".replace),T=o("".slice),A=(s=/b*/g,a(v,n=/a/,"a"),a(v,s,"a"),0!==n.lastIndex||0!==s.lastIndex),w=l.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(A||S||w||p||g)&&(y=function(e){var t,i,r,n,s,o,l,d=f(this),p=h(e),g=d.raw;if(g)return g.lastIndex=this.lastIndex,t=a(y,g,p),this.lastIndex=g.lastIndex,t;var C=d.groups,I=w&&this.sticky,_=a(c,this),O=this.source,P=0,M=p;if(I&&(-1===x(_=E(_,"y",""),"g")&&(_+="g"),M=T(p,this.lastIndex),this.lastIndex>0&&(!this.multiline||this.multiline&&"\n"!==b(p,this.lastIndex-1))&&(O="(?: "+O+")",M=" "+M,P++),i=RegExp("^(?:"+O+")",_)),S&&(i=RegExp("^"+O+"$(?!\\s)",_)),A&&(r=this.lastIndex),n=a(v,I?i:this,M),I?n?(n.input=T(n.input,P),n[0]=T(n[0],P),n.index=this.lastIndex,this.lastIndex+=n[0].length):this.lastIndex=0:A&&n&&(this.lastIndex=this.global?n.index+n[0].length:r),S&&n&&n.length>1&&a(m,n[0],i,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)}),n&&C)for(s=0,n.groups=o=u(null);s<C.length;s++)o[(l=C[s])[0]]=n[l[1]];return n}),t.exports=y},{"698f504b4733b02d":"kiToe","6d0d2df39383a10b":"cfIox","382af5492ddc18e6":"2QNq8","96e0244464229d3":"3dU5B","3bd1d72d4987e0ff":"lxpCg","12c3e6e355312395":"7Karo","38d060dff8e4ab54":"gg5Dl",aec1e11e2cd92d19:"fuP4a","7d9db6b4177b833a":"ezhiR",b26a8ca5152d0a8d:"91LWg"}],g8RAw:[function(e,t,i,r){var n=e("32574bd865b8e6e5"),s=e("ba3ead2b02aa5c9b"),a=e("96553d00a5729583"),o=e("67e6b6bed174b69b");n&&!a.correct&&(s(RegExp.prototype,"flags",{configurable:!0,get:o}),a.correct=!0)},{"32574bd865b8e6e5":"dqiQp",ba3ead2b02aa5c9b:"l5KAt","96553d00a5729583":"6ql2M","67e6b6bed174b69b":"3dU5B"}],cM7XZ:[function(e,t,i,r){var n=e("839e979af15a366"),s=e("d0c922fd145e5f90").MISSED_STICKY,a=e("cb543508cda32a6c"),o=e("d7d8fe8dec1d28c0"),h=e("1e7ca2eaeb60428c").get,c=RegExp.prototype,l=TypeError;n&&s&&o(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!h(this).sticky;throw new l("Incompatible receiver, RegExp required")}}})},{"839e979af15a366":"dqiQp",d0c922fd145e5f90:"lxpCg",cb543508cda32a6c:"aQekt",d7d8fe8dec1d28c0:"l5KAt","1e7ca2eaeb60428c":"fuP4a"}],ay24n:[function(e,t,i,r){e("6e04c0b04ddbb543");var n,s,a=e("52d681bf3a581a4c"),o=e("8fa0c085224dbb3c"),h=e("1f62d1883ea485a3"),c=e("c2ab39386469cfbd"),l=e("3706d41ea2ecbd2c"),d=(n=!1,(s=/[ac]/).exec=function(){return n=!0,/./.exec.apply(this,arguments)},!0===s.test("abc")&&n),u=/./.test;a({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=c(this),i=l(e),r=t.exec;if(!h(r))return o(u,t,i);var n=o(r,t,i);return null!==n&&(c(n),!0)}})},{"6e04c0b04ddbb543":"iLM0f","52d681bf3a581a4c":"b7GrG","8fa0c085224dbb3c":"kiToe","1f62d1883ea485a3":"2Pprm",c2ab39386469cfbd:"5dGJN","3706d41ea2ecbd2c":"2QNq8"}],dsM1G:[function(e,t,i,r){var n=e("9e28bead644082e").PROPER,s=e("ffafe1474cec37ac"),a=e("3135197806fbedfd"),o=e("ce5dcf9b5e077a79"),h=e("577ada37101f923c"),c=e("7011e05c0011871a"),l="toString",d=RegExp.prototype,u=d[l],f=h(function(){return"/a/b"!==u.call({source:"a",flags:"b"})}),p=n&&u.name!==l;(f||p)&&s(d,l,function(){var e=a(this);return"/"+o(e.source)+"/"+o(c(e))},{unsafe:!0})},{"9e28bead644082e":"dGPBk",ffafe1474cec37ac:"2UU83","3135197806fbedfd":"5dGJN",ce5dcf9b5e077a79:"2QNq8","577ada37101f923c":"45J7X","7011e05c0011871a":"5f4vy"}],"3S9v6":[function(e,t,i,r){e("24fec2aa1f17259b")},{"24fec2aa1f17259b":"g7nkt"}],g7nkt:[function(e,t,i,r){e("7bd19ab966686a7d")("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},e("f40aa2253a9ed039"))},{"7bd19ab966686a7d":"1e2fN",f40aa2253a9ed039:"5M7mx"}],cyXl9:[function(e,t,i,r){var n=e("e921ae86d472f40f"),s=e("28283dca83d7d01b"),a=e("aabe59ab2a54dbcf");n({target:"Set",proto:!0,real:!0,forced:!e("6f343c4a5fac5e02")("difference",function(e){return 0===e.size})||a(function(){var e=new Set([1,2,3,4]);return 3!==e.difference({size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var i=t++>1;return e.has(1)&&e.clear(),{done:i,value:2}}}}}).size})},{difference:s})},{e921ae86d472f40f:"b7GrG","28283dca83d7d01b":"53qsm",aabe59ab2a54dbcf:"45J7X","6f343c4a5fac5e02":"iHRiy"}],"53qsm":[function(e,t,i,r){var n=e("ec0d44734dab0403"),s=e("b4855e9cfab8701"),a=e("b6954c8e5feaff94"),o=e("8ae2bb1c1a1eacfa"),h=e("84412f2f5173669e"),c=e("dad3e6b443049db7"),l=e("536831185696be90"),d=s.has,u=s.remove;t.exports=function(e){var t=n(this),i=h(e),r=a(t);return o(t)<=i.size?c(t,function(e){i.includes(e)&&u(r,e)}):l(i.getIterator(),function(e){d(r,e)&&u(r,e)}),r}},{ec0d44734dab0403:"eZ6L7",b4855e9cfab8701:"iA4Ll",b6954c8e5feaff94:"7yCL6","8ae2bb1c1a1eacfa":"j9V3B","84412f2f5173669e":"llXaH",dad3e6b443049db7:"7gyYI","536831185696be90":"8ZmRG"}],eZ6L7:[function(e,t,i,r){var n=e("e82793b35d0d33bd").has;t.exports=function(e){return n(e),e}},{e82793b35d0d33bd:"iA4Ll"}],iA4Ll:[function(e,t,i,r){var n=e("3a3f549900b15404"),s=Set.prototype;t.exports={Set:Set,add:n(s.add),has:n(s.has),remove:n(s.delete),proto:s}},{"3a3f549900b15404":"cfIox"}],"7yCL6":[function(e,t,i,r){var n=e("15a786dc75d7889"),s=e("af105951c9af0e22"),a=n.Set,o=n.add;t.exports=function(e){var t=new a;return s(e,function(e){o(t,e)}),t}},{"15a786dc75d7889":"iA4Ll",af105951c9af0e22:"7gyYI"}],"7gyYI":[function(e,t,i,r){var n=e("6448566e03294b57"),s=e("4921ce3df6e8e1b7"),a=e("f743b36da0cdad72"),o=a.Set,h=a.proto,c=n(h.forEach),l=n(h.keys),d=l(new o).next;t.exports=function(e,t,i){return i?s({iterator:l(e),next:d},t):c(e,t)}},{"6448566e03294b57":"cfIox","4921ce3df6e8e1b7":"8ZmRG",f743b36da0cdad72:"iA4Ll"}],"8ZmRG":[function(e,t,i,r){var n=e("dc8dfab8e54c39fa");t.exports=function(e,t,i){for(var r,s,a=i?e:e.iterator,o=e.next;!(r=n(o,a)).done;)if(void 0!==(s=t(r.value)))return s}},{dc8dfab8e54c39fa:"kiToe"}],j9V3B:[function(e,t,i,r){t.exports=e("1f54d9442eb70bc7")(e("7360aed981f2cb98").proto,"size","get")||function(e){return e.size}},{"1f54d9442eb70bc7":"1BKbJ","7360aed981f2cb98":"iA4Ll"}],llXaH:[function(e,t,i,r){var n=e("1494208b7487a44b"),s=e("78b24b19c3e70eb0"),a=e("630185f5ea81254"),o=e("97e9ac6718f385e0"),h=e("55d32d30f2725124"),c="Invalid size",l=RangeError,d=TypeError,u=Math.max,f=function(e,t){this.set=e,this.size=u(t,0),this.has=n(e.has),this.keys=n(e.keys)};f.prototype={getIterator:function(){return h(s(a(this.keys,this.set)))},includes:function(e){return a(this.has,this.set,e)}},t.exports=function(e){s(e);var t=+e.size;if(t!=t)throw new d(c);var i=o(t);if(i<0)throw new l(c);return new f(e,i)}},{"1494208b7487a44b":"3m7Aa","78b24b19c3e70eb0":"5dGJN","630185f5ea81254":"kiToe","97e9ac6718f385e0":"lOYVA","55d32d30f2725124":"3AYN9"}],iHRiy:[function(e,t,i,r){var n=e("473913f09479627b"),s=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},a=function(e){return{size:e,has:function(){return!0},keys:function(){throw Error("e")}}};t.exports=function(e,t){var i=n("Set");try{new i()[e](s(0));try{return new i()[e](s(-1)),!1}catch(n){if(!t)return!0;try{return new i()[e](a(-1/0)),!1}catch(n){var r=new i([1,2]);return t(r[e](a(1/0)))}}}catch(e){return!1}}},{"473913f09479627b":"2MF6I"}],bZHsA:[function(e,t,i,r){var n=e("b348ceca77b5cb8b"),s=e("552280ceade58f6b"),a=e("8b6d7e32e6ef4853");n({target:"Set",proto:!0,real:!0,forced:!e("aa4edc17d28cfd3c")("intersection",function(e){return 2===e.size&&e.has(1)&&e.has(2)})||s(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:a})},{b348ceca77b5cb8b:"b7GrG","552280ceade58f6b":"45J7X","8b6d7e32e6ef4853":"7gZ24",aa4edc17d28cfd3c:"iHRiy"}],"7gZ24":[function(e,t,i,r){var n=e("7bfb130f16b8292a"),s=e("47146aea8f1cd561"),a=e("d1a604e694f4d1c9"),o=e("cd0f29a36bce3c77"),h=e("569d3010c2a051bc"),c=e("f15171665078c946"),l=s.Set,d=s.add,u=s.has;t.exports=function(e){var t=n(this),i=o(e),r=new l;return a(t)>i.size?c(i.getIterator(),function(e){u(t,e)&&d(r,e)}):h(t,function(e){i.includes(e)&&d(r,e)}),r}},{"7bfb130f16b8292a":"eZ6L7","47146aea8f1cd561":"iA4Ll",d1a604e694f4d1c9:"j9V3B",cd0f29a36bce3c77:"llXaH","569d3010c2a051bc":"7gyYI",f15171665078c946:"8ZmRG"}],jdVdD:[function(e,t,i,r){var n=e("a1707a0c61f5a536"),s=e("cb8bc5c7a60da2c0");n({target:"Set",proto:!0,real:!0,forced:!e("d245d89a0dca71e2")("isDisjointFrom",function(e){return!e})},{isDisjointFrom:s})},{a1707a0c61f5a536:"b7GrG",cb8bc5c7a60da2c0:"iUr42",d245d89a0dca71e2:"iHRiy"}],iUr42:[function(e,t,i,r){var n=e("4bcf2c126f0ee7e9"),s=e("5f2538d74cbdf8b3").has,a=e("edcd27260fbf6ef5"),o=e("9b207c4104d5301c"),h=e("bae422673873a59e"),c=e("ba88aed3f0227034"),l=e("11af6bfd4840cc69");t.exports=function(e){var t=n(this),i=o(e);if(a(t)<=i.size)return!1!==h(t,function(e){if(i.includes(e))return!1},!0);var r=i.getIterator();return!1!==c(r,function(e){if(s(t,e))return l(r,"normal",!1)})}},{"4bcf2c126f0ee7e9":"eZ6L7","5f2538d74cbdf8b3":"iA4Ll",edcd27260fbf6ef5:"j9V3B","9b207c4104d5301c":"llXaH",bae422673873a59e:"7gyYI",ba88aed3f0227034:"8ZmRG","11af6bfd4840cc69":"4rTZx"}],aHhSf:[function(e,t,i,r){var n=e("67c95d67210a1f28"),s=e("ad07e334c2be4c40");n({target:"Set",proto:!0,real:!0,forced:!e("87c6020e8c27ff9d")("isSubsetOf",function(e){return e})},{isSubsetOf:s})},{"67c95d67210a1f28":"b7GrG",ad07e334c2be4c40:"3yowS","87c6020e8c27ff9d":"iHRiy"}],"3yowS":[function(e,t,i,r){var n=e("3d5a277c60f35ee0"),s=e("8b5056cb353b9363"),a=e("5c8afb92d90a7afe"),o=e("5d0efb34cef239d0");t.exports=function(e){var t=n(this),i=o(e);return!(s(t)>i.size)&&!1!==a(t,function(e){if(!i.includes(e))return!1},!0)}},{"3d5a277c60f35ee0":"eZ6L7","8b5056cb353b9363":"j9V3B","5c8afb92d90a7afe":"7gyYI","5d0efb34cef239d0":"llXaH"}],"8CDDy":[function(e,t,i,r){var n=e("709d88585366e67"),s=e("56957227e511c32f");n({target:"Set",proto:!0,real:!0,forced:!e("96eae72d49b9b957")("isSupersetOf",function(e){return!e})},{isSupersetOf:s})},{"709d88585366e67":"b7GrG","56957227e511c32f":"4VqaT","96eae72d49b9b957":"iHRiy"}],"4VqaT":[function(e,t,i,r){var n=e("93254e314b2e5736"),s=e("be41c371321728ce").has,a=e("95f22a3e4ec3e3cd"),o=e("3cd91641e66e9eeb"),h=e("9565d7b14e850c29"),c=e("9f7dd30215d71bc9");t.exports=function(e){var t=n(this),i=o(e);if(a(t)<i.size)return!1;var r=i.getIterator();return!1!==h(r,function(e){if(!s(t,e))return c(r,"normal",!1)})}},{"93254e314b2e5736":"eZ6L7",be41c371321728ce:"iA4Ll","95f22a3e4ec3e3cd":"j9V3B","3cd91641e66e9eeb":"llXaH","9565d7b14e850c29":"8ZmRG","9f7dd30215d71bc9":"4rTZx"}],"8bCzz":[function(e,t,i,r){var n=e("2c2704a456ce062b"),s=e("c576fb0c60e4e9dc"),a=e("b6efc87e67e8cf3");n({target:"Set",proto:!0,real:!0,forced:!e("89d1a7beaf40a773")("symmetricDifference")||!a("symmetricDifference")},{symmetricDifference:s})},{"2c2704a456ce062b":"b7GrG",c576fb0c60e4e9dc:"67xGb",b6efc87e67e8cf3:"jYwlA","89d1a7beaf40a773":"iHRiy"}],"67xGb":[function(e,t,i,r){var n=e("dab2a171f413970b"),s=e("18fe914ee6a1f0ac"),a=e("32aa48293534b256"),o=e("46559677b3afd997"),h=e("5dd78207eddb62ab"),c=s.add,l=s.has,d=s.remove;t.exports=function(e){var t=n(this),i=o(e).getIterator(),r=a(t);return h(i,function(e){l(t,e)?d(r,e):c(r,e)}),r}},{dab2a171f413970b:"eZ6L7","18fe914ee6a1f0ac":"iA4Ll","32aa48293534b256":"7yCL6","46559677b3afd997":"llXaH","5dd78207eddb62ab":"8ZmRG"}],jYwlA:[function(e,t,i,r){t.exports=function(e){try{var t=new Set,i=t[e]({size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}});return 1===i.size&&4===i.values().next().value}catch(e){return!1}}},{}],eCrTm:[function(e,t,i,r){var n=e("66ae8a0aa9ca9433"),s=e("d88c9d764ca4f47a"),a=e("72c97071b4f012c0");n({target:"Set",proto:!0,real:!0,forced:!e("9e1080e1b19a2de4")("union")||!a("union")},{union:s})},{"66ae8a0aa9ca9433":"b7GrG",d88c9d764ca4f47a:"2GQaC","72c97071b4f012c0":"jYwlA","9e1080e1b19a2de4":"iHRiy"}],"2GQaC":[function(e,t,i,r){var n=e("38363458c91094b3"),s=e("6e5bf4ccb8ffe6a8").add,a=e("7f8233497dc912d4"),o=e("e59670e7577f7070"),h=e("1ba5273f52dc856b");t.exports=function(e){var t=n(this),i=o(e).getIterator(),r=a(t);return h(i,function(e){s(r,e)}),r}},{"38363458c91094b3":"eZ6L7","6e5bf4ccb8ffe6a8":"iA4Ll","7f8233497dc912d4":"7yCL6",e59670e7577f7070:"llXaH","1ba5273f52dc856b":"8ZmRG"}],jsxS0:[function(e,t,i,r){var n=e("473defaa8915e9e4"),s=e("dd4afa154631abab"),a=e("d699b04e9a9f7a28"),o=e("df1114985710f2b3"),h=e("3b247286b7d8c4d5"),c=e("da5b773a057f92aa"),l=s("".charAt);n({target:"String",proto:!0,forced:c(function(){return"\uD842"!=="ð ®·".at(-2)})},{at:function(e){var t=h(a(this)),i=t.length,r=o(e),n=r>=0?r:i+r;return n<0||n>=i?void 0:l(t,n)}})},{"473defaa8915e9e4":"b7GrG",dd4afa154631abab:"cfIox",d699b04e9a9f7a28:"1ZNa0",df1114985710f2b3:"lOYVA","3b247286b7d8c4d5":"2QNq8",da5b773a057f92aa:"45J7X"}],"8gdBH":[function(e,t,i,r){var n=e("4793fe8f86582840"),s=e("785f7a78d0dffe20").codeAt;n({target:"String",proto:!0},{codePointAt:function(e){return s(this,e)}})},{"4793fe8f86582840":"b7GrG","785f7a78d0dffe20":"kaJ9P"}],kaJ9P:[function(e,t,i,r){var n=e("8b9beff9818f042"),s=e("d3e375e7697978fb"),a=e("545a72c28133c459"),o=e("5bafa9e5b372669c"),h=n("".charAt),c=n("".charCodeAt),l=n("".slice),d=function(e){return function(t,i){var r,n,d=a(o(t)),u=s(i),f=d.length;return u<0||u>=f?e?"":void 0:(r=c(d,u))<55296||r>56319||u+1===f||(n=c(d,u+1))<56320||n>57343?e?h(d,u):r:e?l(d,u,u+2):(r-55296<<10)+(n-56320)+65536}};t.exports={codeAt:d(!1),charAt:d(!0)}},{"8b9beff9818f042":"cfIox",d3e375e7697978fb:"lOYVA","545a72c28133c459":"2QNq8","5bafa9e5b372669c":"1ZNa0"}],lLxBl:[function(e,t,i,r){var n,s=e("b3cd31deb9d32a8c"),a=e("c719ddda901eac13"),o=e("e75304a6599a5e3c").f,h=e("99883df659b0f5cb"),c=e("e5d8defa036db553"),l=e("4c78f4ce8264459e"),d=e("da4ce5f132e95194"),u=e("58da9c5323c25a0f"),f=e("e85ff4c5cebafc14"),p=a("".slice),g=Math.min,m=u("endsWith");s({target:"String",proto:!0,forced:!(!f&&!m&&(n=o(String.prototype,"endsWith"))&&!n.writable)&&!m},{endsWith:function(e){var t=c(d(this));l(e);var i=arguments.length>1?arguments[1]:void 0,r=t.length,n=void 0===i?r:g(h(i),r),s=c(e);return p(t,n-s.length,n)===s}})},{b3cd31deb9d32a8c:"b7GrG",c719ddda901eac13:"dAU5H",e75304a6599a5e3c:"lYlYP","99883df659b0f5cb":"5nsMT",e5d8defa036db553:"2QNq8","4c78f4ce8264459e":"jsNfN",da4ce5f132e95194:"1ZNa0","58da9c5323c25a0f":"8nz0I",e85ff4c5cebafc14:"lssMj"}],jsNfN:[function(e,t,i,r){var n=e("7b932b7711b6ae16"),s=TypeError;t.exports=function(e){if(n(e))throw new s("The method doesn't accept regular expressions");return e}},{"7b932b7711b6ae16":"4jZ6D"}],"8nz0I":[function(e,t,i,r){var n=e("303b9f26f388462e")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},{"303b9f26f388462e":"eG9HO"}],kdCuo:[function(e,t,i,r){var n=e("f7ab90f668dfed5f"),s=e("f19d1a907413c68d"),a=e("6914a342ea61c319"),o=RangeError,h=String.fromCharCode,c=String.fromCodePoint,l=s([].join);n({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(e){for(var t,i=[],r=arguments.length,n=0;r>n;){if(t=+arguments[n++],a(t,1114111)!==t)throw new o(t+" is not a valid code point");i[n]=t<65536?h(t):h(((t-=65536)>>10)+55296,t%1024+56320)}return l(i,"")}})},{f7ab90f668dfed5f:"b7GrG",f19d1a907413c68d:"cfIox","6914a342ea61c319":"65oaN"}],aDOV8:[function(e,t,i,r){var n=e("1cde7a4fbe24deb1"),s=e("d9ff51b37cd276ef"),a=e("b1c9b74814a0e4ee"),o=e("36f262aff4650984"),h=e("c6f2de0a65cb2a09"),c=e("30dec888dfe829e2"),l=s("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(h(o(this)),h(a(e)),arguments.length>1?arguments[1]:void 0)}})},{"1cde7a4fbe24deb1":"b7GrG",d9ff51b37cd276ef:"cfIox",b1c9b74814a0e4ee:"jsNfN","36f262aff4650984":"1ZNa0",c6f2de0a65cb2a09:"2QNq8","30dec888dfe829e2":"8nz0I"}],bYfUN:[function(e,t,i,r){var n=e("119056f2894f6d80"),s=e("5d2e4bc1718ad78f"),a=e("9410272c8796c548"),o=e("8f81c73916cb66a4"),h=s("".charCodeAt);n({target:"String",proto:!0},{isWellFormed:function(){for(var e=o(a(this)),t=e.length,i=0;i<t;i++){var r=h(e,i);if((63488&r)==55296&&(r>=56320||++i>=t||(64512&h(e,i))!=56320))return!1}return!0}})},{"119056f2894f6d80":"b7GrG","5d2e4bc1718ad78f":"cfIox","9410272c8796c548":"1ZNa0","8f81c73916cb66a4":"2QNq8"}],asjuk:[function(e,t,i,r){var n=e("e8b36e9e8f60deb1").charAt,s=e("99724183e9ac759e"),a=e("75c45c226da41a58"),o=e("5bce8e62b9ff7984"),h=e("cab4a14c8e102263"),c="String Iterator",l=a.set,d=a.getterFor(c);o(String,"String",function(e){l(this,{type:c,string:s(e),index:0})},function(){var e,t=d(this),i=t.string,r=t.index;return r>=i.length?h(void 0,!0):(e=n(i,r),t.index+=e.length,h(e,!1))})},{e8b36e9e8f60deb1:"kaJ9P","99724183e9ac759e":"2QNq8","75c45c226da41a58":"fuP4a","5bce8e62b9ff7984":"6Jy0l",cab4a14c8e102263:"k6wXP"}],"7Ztdp":[function(e,t,i,r){var n=e("1a72ba86dc4099cd"),s=e("600d78d4a838dc5"),a=e("3e8300c8dcd37861"),o=e("4e367ba2e602279b"),h=e("cde57a6a8e06b210"),c=e("3ad5c9f9719d1735"),l=e("a1912f278569b4e6"),d=e("d83ac9e10edfa0ef"),u=e("4fa13f5559b9cbba"),f=e("357167b0f8a6ba45"),p=e("3922ca715397933e"),g=e("3b40f00a568e6a6b"),m=s("".indexOf);a("match",function(e,t,i){return[function(t){var i=d(this),r=h(t)?u(t,e):void 0;return r?n(r,t,i):new RegExp(t)[e](l(i))},function(e){var r,n=o(this),s=l(e),a=i(t,n,s);if(a.done)return a.value;var h=l(p(n));if(-1===m(h,"g"))return g(n,s);var d=-1!==m(h,"u");n.lastIndex=0;for(var u=[],v=0;null!==(r=g(n,s));){var y=l(r[0]);u[v]=y,""===y&&(n.lastIndex=f(s,c(n.lastIndex),d)),v++}return 0===v?null:u}]})},{"1a72ba86dc4099cd":"kiToe","600d78d4a838dc5":"cfIox","3e8300c8dcd37861":"6tWfm","4e367ba2e602279b":"5dGJN",cde57a6a8e06b210:"adFpz","3ad5c9f9719d1735":"5nsMT",a1912f278569b4e6:"2QNq8",d83ac9e10edfa0ef:"1ZNa0","4fa13f5559b9cbba":"7cH9N","357167b0f8a6ba45":"hYL1G","3922ca715397933e":"5f4vy","3b40f00a568e6a6b":"3xZZY"}],"6tWfm":[function(e,t,i,r){e("a7057ee05361671");var n=e("771b9a32e3d08596"),s=e("5a9ef6cc43262548"),a=e("b286e3fd8e91d745"),o=e("f56adef42dd3c42"),h=e("39c5bea895574e43"),c=e("1c6881441295e4f4"),l=h("species"),d=RegExp.prototype;t.exports=function(e,t,i,r){var u=h(e),f=!o(function(){var t={};return t[u]=function(){return 7},7!==""[e](t)}),p=f&&!o(function(){var t=!1,i=/a/;if("split"===e){var r={};r[l]=function(){return i},(i={constructor:r,flags:""})[u]=/./[u]}return i.exec=function(){return t=!0,null},i[u](""),!t});if(!f||!p||i){var g=/./[u],m=t(u,""[e],function(e,t,i,r,s){var o=t.exec;return o===a||o===d.exec?f&&!s?{done:!0,value:n(g,t,i,r)}:{done:!0,value:n(e,i,t,r)}:{done:!1}});s(String.prototype,e,m[0]),s(d,u,m[1])}r&&c(d[u],"sham",!0)}},{a7057ee05361671:"iLM0f","771b9a32e3d08596":"kiToe","5a9ef6cc43262548":"2UU83",b286e3fd8e91d745:"Hdtna",f56adef42dd3c42:"45J7X","39c5bea895574e43":"eG9HO","1c6881441295e4f4":"mcZBn"}],hYL1G:[function(e,t,i,r){var n=e("7830b1b106fe9c2f").charAt;t.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},{"7830b1b106fe9c2f":"kaJ9P"}],"3xZZY":[function(e,t,i,r){var n=e("fe012fd0e62b041c"),s=e("953f0ef3a583db2e"),a=e("7b1bebb22aa6d09f"),o=e("41458309d054e6d9"),h=e("2da13aa8500d5870"),c=TypeError;t.exports=function(e,t){var i=e.exec;if(a(i)){var r=n(i,e,t);return null!==r&&s(r),r}if("RegExp"===o(e))return n(h,e,t);throw new c("RegExp#exec called on incompatible receiver")}},{fe012fd0e62b041c:"kiToe","953f0ef3a583db2e":"5dGJN","7b1bebb22aa6d09f":"2Pprm","41458309d054e6d9":"aQekt","2da13aa8500d5870":"Hdtna"}],iTfU2:[function(e,t,i,r){var n=e("ab7506693563188f"),s=e("bc392a1870cac46c"),a=e("518f2de578425815"),o=e("5413f14f6fa8d586"),h=e("b080d5b6d2874bb9"),c=e("500412608beb0fa4"),l=e("d27dba1be9ae2ec7"),d=e("304a5dfbef2eca6a"),u=e("c369a3c8053cdec1"),f=e("beaf3bde21295571"),p=e("f127fd901a8322fa"),g=e("3da774f1ac5cef39"),m=e("5e13bde3b69470d3"),v=e("d67b0fe73b3441f6"),y=e("c3d9a3b5ce1a0134"),b=e("f824fce70460b786"),x=e("fe46150a38a85a5d"),E=e("c158ae31b64e4ec2"),T=e("2eeb2389fe600209"),A=e("a803aed269f0019b"),w=e("e9503db7c8f89e91"),S=e("d919927dacd61c64"),C=x("matchAll"),I="RegExp String",_=I+" Iterator",O=w.set,P=w.getterFor(_),M=RegExp.prototype,R=TypeError,L=a("".indexOf),D=a("".matchAll),k=!!D&&!b(function(){D("a",/./)}),N=o(function(e,t,i,r){O(this,{type:_,regexp:e,string:t,global:i,unicode:r,done:!1})},I,function(){var e=P(this);if(e.done)return h(void 0,!0);var t=e.regexp,i=e.string,r=A(t,i);return null===r?(e.done=!0,h(void 0,!0)):(e.global?""===d(r[0])&&(t.lastIndex=T(i,l(t.lastIndex),e.unicode)):e.done=!0,h(r,!1))}),F=function(e){var t,i,r,n=u(this),s=d(e),a=E(n,RegExp),o=d(m(n));return t=new a(a===RegExp?n.source:n,o),i=!!~L(o,"g"),r=!!~L(o,"u"),t.lastIndex=l(n.lastIndex),new N(t,s,i,r)};n({target:"String",proto:!0,forced:k},{matchAll:function(e){var t,i,r,n=c(this);if(f(e)){if(g(e)&&!~L(d(c(m(e))),"g"))throw new R("`.matchAll` does not allow non-global regexes");if(k)return D(n,e);if(void 0===(i=v(e,C))&&S&&"RegExp"===p(e)&&(i=F),i)return s(i,e,n)}else if(k)return D(n,e);return t=d(n),r=RegExp(e,"g"),S?s(F,r,t):r[C](t)}}),S||C in M||y(M,C,F)},{ab7506693563188f:"b7GrG",bc392a1870cac46c:"kiToe","518f2de578425815":"dAU5H","5413f14f6fa8d586":"9fpII",b080d5b6d2874bb9:"k6wXP","500412608beb0fa4":"1ZNa0",d27dba1be9ae2ec7:"5nsMT","304a5dfbef2eca6a":"2QNq8",c369a3c8053cdec1:"5dGJN",beaf3bde21295571:"adFpz",f127fd901a8322fa:"aQekt","3da774f1ac5cef39":"4jZ6D","5e13bde3b69470d3":"5f4vy",d67b0fe73b3441f6:"7cH9N",c3d9a3b5ce1a0134:"2UU83",f824fce70460b786:"45J7X",fe46150a38a85a5d:"eG9HO",c158ae31b64e4ec2:"hp0ju","2eeb2389fe600209":"hYL1G",a803aed269f0019b:"3xZZY",e9503db7c8f89e91:"fuP4a",d919927dacd61c64:"lssMj"}],"2rwi6":[function(e,t,i,r){var n=e("bde41783ec0f17a4"),s=e("794108b869e92a52").end;n({target:"String",proto:!0,forced:e("271b5f05be76b6dd")},{padEnd:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{bde41783ec0f17a4:"b7GrG","794108b869e92a52":"ISKOw","271b5f05be76b6dd":"e8bOE"}],e8bOE:[function(e,t,i,r){var n=e("ea42f18a4a6e86a9");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},{ea42f18a4a6e86a9:"cXzrn"}],"3RHVC":[function(e,t,i,r){var n=e("31f9b30345fd3179"),s=e("10950b9580001d1d").start;n({target:"String",proto:!0,forced:e("c86924140d1ee1af")},{padStart:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{"31f9b30345fd3179":"b7GrG","10950b9580001d1d":"ISKOw",c86924140d1ee1af:"e8bOE"}],lIq1m:[function(e,t,i,r){var n=e("d77bea9ed21ff4bc"),s=e("7ed823ef2298b758"),a=e("1210aa921fc34970"),o=e("4320a1855b3e38fb"),h=e("c2348ecf591fb82d"),c=e("4b1f320aa7c99da8"),l=s([].push),d=s([].join);n({target:"String",stat:!0},{raw:function(e){var t=a(o(e).raw),i=c(t);if(!i)return"";for(var r=arguments.length,n=[],s=0;;){if(l(n,h(t[s++])),s===i)return d(n,"");s<r&&l(n,h(arguments[s]))}}})},{d77bea9ed21ff4bc:"b7GrG","7ed823ef2298b758":"cfIox","1210aa921fc34970":"cVp2Q","4320a1855b3e38fb":"eHl90",c2348ecf591fb82d:"2QNq8","4b1f320aa7c99da8":"fuf58"}],c39Zx:[function(e,t,i,r){e("b68f16bf09eba421")({target:"String",proto:!0},{repeat:e("12e67b43b198a56f")})},{b68f16bf09eba421:"b7GrG","12e67b43b198a56f":"9SY1f"}],fLhnG:[function(e,t,i,r){var n=e("f8fd16f994f85406"),s=e("b5234e1018cb2916"),a=e("c3560c75b4ad1ef2"),o=e("c4a2369a79c5aaa2"),h=e("daa534dec0372986"),c=e("317f495e148be81e"),l=e("36464dd17d2a7224"),d=e("bdde82227ff40558"),u=e("3847a5ff118f8ebb"),f=e("effd88adfbb6b4bc"),p=e("953b724c90cd8db6"),g=e("154963922e7c9354"),m=e("90f011aa61b831b4"),v=e("af552ab4c89e35be"),y=e("3726cfd8dc51c82c"),b=e("bfd28e5f1d657a68"),x=e("6de55154ce28598"),E=e("4b6a0c7e75a1080a")("replace"),T=Math.max,A=Math.min,w=a([].concat),S=a([].push),C=a("".indexOf),I=a("".slice),_="$0"==="a".replace(/./,"$0"),O=!!/./[E]&&""===/./[E]("a","$0");o("replace",function(e,t,i){var r=O?"$":"$0";return[function(e,i){var r=g(this),n=d(e)?v(e,E):void 0;return n?s(n,e,r,i):s(t,p(r),e,i)},function(e,s){var a=c(this),o=p(e);if("string"==typeof s&&-1===C(s,r)&&-1===C(s,"$<")){var h=i(t,a,o,s);if(h.done)return h.value}var d=l(s);d||(s=p(s));var g=p(b(a)),v=-1!==C(g,"g");v&&(R=-1!==C(g,"u"),a.lastIndex=0);for(var E=[];null!==(D=x(a,o))&&(S(E,D),v);){;""===p(D[0])&&(a.lastIndex=m(o,f(a.lastIndex),R))}for(var _="",O=0,P=0;P<E.length;P++){for(var M,R,L,D=E[P],k=p(D[0]),N=T(A(u(D.index),o.length),0),F=[],B=1;B<D.length;B++)S(F,void 0===(M=D[B])?M:String(M));var U=D.groups;if(d){var G=w([k],F,N,o);void 0!==U&&S(G,U),L=p(n(s,void 0,G))}else L=y(k,o,N,F,U,s);N>=O&&(_+=I(o,O,N)+L,O=N+k.length)}return _+I(o,O)}]},!!h(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!_||O)},{f8fd16f994f85406:"72fZp",b5234e1018cb2916:"kiToe",c3560c75b4ad1ef2:"cfIox",c4a2369a79c5aaa2:"6tWfm",daa534dec0372986:"45J7X","317f495e148be81e":"5dGJN","36464dd17d2a7224":"2Pprm",bdde82227ff40558:"adFpz","3847a5ff118f8ebb":"lOYVA",effd88adfbb6b4bc:"5nsMT","953b724c90cd8db6":"2QNq8","154963922e7c9354":"1ZNa0","90f011aa61b831b4":"hYL1G",af552ab4c89e35be:"7cH9N","3726cfd8dc51c82c":"5vw62",bfd28e5f1d657a68:"5f4vy","6de55154ce28598":"3xZZY","4b6a0c7e75a1080a":"eG9HO"}],"5vw62":[function(e,t,i,r){var n=e("3cf51fea5d34c201"),s=e("999f669befd62c27"),a=Math.floor,o=n("".charAt),h=n("".replace),c=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(e,t,i,r,n,u){var f=i+e.length,p=r.length,g=d;return void 0!==n&&(n=s(n),g=l),h(u,g,function(s,h){var l;switch(o(h,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,i);case"'":return c(t,f);case"<":l=n[c(h,1,-1)];break;default:var d=+h;if(0===d)return s;if(d>p){var u=a(d/10);if(0===u)return s;if(u<=p)return void 0===r[u-1]?o(h,1):r[u-1]+o(h,1);return s}l=r[d-1]}return void 0===l?"":l})}},{"3cf51fea5d34c201":"cfIox","999f669befd62c27":"eHl90"}],"4PvQ4":[function(e,t,i,r){var n=e("69381acad0f1f180"),s=e("be2b5a787b4341ed"),a=e("70979a707458e2bc"),o=e("ede342a754b29b08"),h=e("7b33c58d7c6a633e"),c=e("db6aa460dcc21b16"),l=e("1f633e1cea7bfece"),d=e("5a07dc19106ad672"),u=e("40b88ab8d2a68602"),f=e("c009564a6e08e49f"),p=e("49118a84cede6c94"),g=e("d9c85063e2fa18d1"),m=e("179cb9efb80dcae1"),v=g("replace"),y=TypeError,b=a("".indexOf),x=a("".replace),E=a("".slice),T=Math.max;n({target:"String",proto:!0},{replaceAll:function(e,t){var i,r,n,a,g,A,w,S,C,I=o(this),_=0,O="";if(c(e)){if((i=l(e))&&!~b(d(o(f(e))),"g"))throw new y("`.replaceAll` does not allow non-global regexes");if(r=u(e,v))return s(r,e,I,t);if(m&&i)return x(d(I),e,t)}for(n=d(I),a=d(e),(g=h(t))||(t=d(t)),w=T(1,A=a.length),S=b(n,a);-1!==S;)C=g?d(t(a,S,n)):p(a,n,S,[],void 0,t),O+=E(n,_,S)+C,_=S+A,S=S+w>n.length?-1:b(n,a,S+w);return _<n.length&&(O+=E(n,_)),O}})},{"69381acad0f1f180":"b7GrG",be2b5a787b4341ed:"kiToe","70979a707458e2bc":"cfIox",ede342a754b29b08:"1ZNa0","7b33c58d7c6a633e":"2Pprm",db6aa460dcc21b16:"adFpz","1f633e1cea7bfece":"4jZ6D","5a07dc19106ad672":"2QNq8","40b88ab8d2a68602":"7cH9N",c009564a6e08e49f:"5f4vy","49118a84cede6c94":"5vw62",d9c85063e2fa18d1:"eG9HO","179cb9efb80dcae1":"lssMj"}],"9FCzx":[function(e,t,i,r){var n=e("8d11f7aaad1fe3c1"),s=e("2fc7060ff2c5a42c"),a=e("80bcaa170d414768"),o=e("9a74fce632ea9847"),h=e("87e0667ca38b48b9"),c=e("fc5195de5b8ec5e0"),l=e("ac1a7a91b5d23dc3"),d=e("d51bcc8729521f43"),u=e("d8c3d3bfc882cda6");s("search",function(e,t,i){return[function(t){var i=h(this),r=o(t)?d(t,e):void 0;return r?n(r,t,i):new RegExp(t)[e](l(i))},function(e){var r=a(this),n=l(e),s=i(t,r,n);if(s.done)return s.value;var o=r.lastIndex;c(o,0)||(r.lastIndex=0);var h=u(r,n);return c(r.lastIndex,o)||(r.lastIndex=o),null===h?-1:h.index}]})},{"8d11f7aaad1fe3c1":"kiToe","2fc7060ff2c5a42c":"6tWfm","80bcaa170d414768":"5dGJN","9a74fce632ea9847":"adFpz","87e0667ca38b48b9":"1ZNa0",fc5195de5b8ec5e0:"iwJQ7",ac1a7a91b5d23dc3:"2QNq8",d51bcc8729521f43:"7cH9N",d8c3d3bfc882cda6:"3xZZY"}],"8CVDf":[function(e,t,i,r){var n=e("731f563170e1c210"),s=e("897d2896927b6e02"),a=e("508b20464a6b5517"),o=e("f367d08a248e8be6"),h=e("40548720614fd127"),c=e("9311135c1a422443"),l=e("55e35ece01e7fba0"),d=e("8bb35ae79f87add1"),u=e("49f0536d42765acd"),f=e("b9744dd298874d6b"),p=e("7948c6f9df3714fb"),g=e("2c9f875738c0535c"),m=e("ff11a5dc8ee4e1e9"),v=e("1a700d67237f1f2b"),y=m.UNSUPPORTED_Y,b=Math.min,x=s([].push),E=s("".slice),T=!v(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),A="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;a("split",function(e,t,i){var r="0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:n(t,this,e,i)}:t;return[function(t,i){var s=c(this),a=h(t)?p(t,e):void 0;return a?n(a,t,s,i):n(r,f(s),t,i)},function(e,n){var s=o(this),a=f(e);if(!A){var h=i(r,s,a,n,r!==t);if(h.done)return h.value}var c=l(s,RegExp),p=s.unicode,m=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(y?"g":"y"),v=new c(y?"^(?:"+s.source+")":s,m),T=void 0===n?0xffffffff:n>>>0;if(0===T)return[];if(0===a.length)return null===g(v,a)?[a]:[];for(var w=0,S=0,C=[];S<a.length;){v.lastIndex=y?0:S;var I,_=g(v,y?E(a,S):a);if(null===_||(I=b(u(v.lastIndex+(y?S:0)),a.length))===w)S=d(a,S,p);else{if(x(C,E(a,w,S)),C.length===T)return C;for(var O=1;O<=_.length-1;O++)if(x(C,_[O]),C.length===T)return C;S=w=I}}return x(C,E(a,w)),C}]},A||!T,y)},{"731f563170e1c210":"kiToe","897d2896927b6e02":"cfIox","508b20464a6b5517":"6tWfm",f367d08a248e8be6:"5dGJN","40548720614fd127":"adFpz","9311135c1a422443":"1ZNa0","55e35ece01e7fba0":"hp0ju","8bb35ae79f87add1":"hYL1G","49f0536d42765acd":"5nsMT",b9744dd298874d6b:"2QNq8","7948c6f9df3714fb":"7cH9N","2c9f875738c0535c":"3xZZY",ff11a5dc8ee4e1e9:"lxpCg","1a700d67237f1f2b":"45J7X"}],f94m6:[function(e,t,i,r){var n,s=e("dde854d8a76d436d"),a=e("75ef62d12e51b46c"),o=e("ff3b80c156be6132").f,h=e("573cc620487e2f6b"),c=e("3d6be1b7c00bafd"),l=e("40ed833d044b85cd"),d=e("7b57b8afdd10d7e4"),u=e("80ffa3ecff44b920"),f=e("d76fe9fb1319d805"),p=a("".slice),g=Math.min,m=u("startsWith");s({target:"String",proto:!0,forced:!(!f&&!m&&(n=o(String.prototype,"startsWith"))&&!n.writable)&&!m},{startsWith:function(e){var t=c(d(this));l(e);var i=h(g(arguments.length>1?arguments[1]:void 0,t.length)),r=c(e);return p(t,i,i+r.length)===r}})},{dde854d8a76d436d:"b7GrG","75ef62d12e51b46c":"dAU5H",ff3b80c156be6132:"lYlYP","573cc620487e2f6b":"5nsMT","3d6be1b7c00bafd":"2QNq8","40ed833d044b85cd":"jsNfN","7b57b8afdd10d7e4":"1ZNa0","80ffa3ecff44b920":"8nz0I",d76fe9fb1319d805:"lssMj"}],gyQ5g:[function(e,t,i,r){var n=e("e3f052c25e9ce7a0"),s=e("79d87d02e012ddb6"),a=e("d9b0f8ef34c7f588"),o=e("7684d557cb0eafb9"),h=e("a0c96765c2fd3918"),c=s("".slice),l=Math.max,d=Math.min;n({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var i,r,n=h(a(this)),s=n.length,u=o(e);return(u===1/0&&(u=0),u<0&&(u=l(s+u,0)),(i=void 0===t?s:o(t))<=0||i===1/0)?"":(r=d(u+i,s),u>=r?"":c(n,u,r))}})},{e3f052c25e9ce7a0:"b7GrG","79d87d02e012ddb6":"cfIox",d9b0f8ef34c7f588:"1ZNa0","7684d557cb0eafb9":"lOYVA",a0c96765c2fd3918:"2QNq8"}],"35eyA":[function(e,t,i,r){var n=e("abdac43301199021"),s=e("46e4a85192f95918"),a=e("63c730f9593a416e"),o=e("2fb31922ea5ff27d"),h=e("6f82048edf356822"),c=e("2f2665d060e5f6a1"),l=Array,d=a("".charAt),u=a("".charCodeAt),f=a([].join),p="".toWellFormed,g=p&&c(function(){return"1"!==s(p,1)});n({target:"String",proto:!0,forced:g},{toWellFormed:function(){var e=h(o(this));if(g)return s(p,e);for(var t=e.length,i=l(t),r=0;r<t;r++){var n=u(e,r);(63488&n)!=55296?i[r]=d(e,r):n>=56320||r+1>=t||(64512&u(e,r+1))!=56320?i[r]="ï¿½":(i[r]=d(e,r),i[++r]=d(e,r))}return f(i,"")}})},{abdac43301199021:"b7GrG","46e4a85192f95918":"kiToe","63c730f9593a416e":"cfIox","2fb31922ea5ff27d":"1ZNa0","6f82048edf356822":"2QNq8","2f2665d060e5f6a1":"45J7X"}],lAd52:[function(e,t,i,r){var n=e("4a60febef79e9fd2"),s=e("aa85dc53780a7a31").trim;n({target:"String",proto:!0,forced:e("d62e07fb0a0f0c26")("trim")},{trim:function(){return s(this)}})},{"4a60febef79e9fd2":"b7GrG",aa85dc53780a7a31:"eqZJN",d62e07fb0a0f0c26:"6sITk"}],"6sITk":[function(e,t,i,r){var n=e("9e0c4c0dbddf03dd").PROPER,s=e("92328d780355dc79"),a=e("8c0d7fed4094a2b6"),o="âÂá ";t.exports=function(e){return s(function(){return!!a[e]()||o[e]()!==o||n&&a[e].name!==e})}},{"9e0c4c0dbddf03dd":"dGPBk","92328d780355dc79":"45J7X","8c0d7fed4094a2b6":"7OygN"}],gm3Ac:[function(e,t,i,r){e("251a593a444ed436");var n=e("91f4001402f2b9ee"),s=e("c6b02e29a67a6f26");n({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==s},{trimEnd:s})},{"251a593a444ed436":"3XxjN","91f4001402f2b9ee":"b7GrG",c6b02e29a67a6f26:"f1z4k"}],"3XxjN":[function(e,t,i,r){var n=e("de7842587ae70a42"),s=e("324b25d4226efe2d");n({target:"String",proto:!0,name:"trimEnd",forced:void 0!==s},{trimRight:s})},{de7842587ae70a42:"b7GrG","324b25d4226efe2d":"f1z4k"}],f1z4k:[function(e,t,i,r){var n=e("bc94349b4fc95bb3").end;t.exports=e("71fc76130b4f9a6")("trimEnd")?function(){return n(this)}:"".trimEnd},{bc94349b4fc95bb3:"eqZJN","71fc76130b4f9a6":"6sITk"}],"6U5ka":[function(e,t,i,r){e("654c60d6d97014cd");var n=e("26b6a882a1c5bba9"),s=e("b5f2740011c04718");n({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==s},{trimStart:s})},{"654c60d6d97014cd":"dPWqu","26b6a882a1c5bba9":"b7GrG",b5f2740011c04718:"e2qm4"}],dPWqu:[function(e,t,i,r){var n=e("2da1b55d02d90d4a"),s=e("8b6aefe7df6c88a");n({target:"String",proto:!0,name:"trimStart",forced:void 0!==s},{trimLeft:s})},{"2da1b55d02d90d4a":"b7GrG","8b6aefe7df6c88a":"e2qm4"}],e2qm4:[function(e,t,i,r){var n=e("a3878f82301e4d4").start;t.exports=e("ee8e5c2b54df0ba4")("trimStart")?function(){return n(this)}:"".trimStart},{a3878f82301e4d4:"eqZJN",ee8e5c2b54df0ba4:"6sITk"}],"9Oy3b":[function(e,t,i,r){var n=e("e7d648b06f4dd9c6"),s=e("8b0114ba5e653efc");n({target:"String",proto:!0,forced:e("1caf9e0d6204ce0a")("anchor")},{anchor:function(e){return s(this,"a","name",e)}})},{e7d648b06f4dd9c6:"b7GrG","8b0114ba5e653efc":"hD83w","1caf9e0d6204ce0a":"bph7E"}],hD83w:[function(e,t,i,r){var n=e("427762aaf6075552"),s=e("3a91b63413ffe383"),a=e("515bd1582fb5b4c0"),o=/"/g,h=n("".replace);t.exports=function(e,t,i,r){var n=a(s(e)),c="<"+t;return""!==i&&(c+=" "+i+'="'+h(a(r),o,"&quot;")+'"'),c+">"+n+"</"+t+">"}},{"427762aaf6075552":"cfIox","3a91b63413ffe383":"1ZNa0","515bd1582fb5b4c0":"2QNq8"}],bph7E:[function(e,t,i,r){var n=e("b7fe2964c39bac");t.exports=function(e){return n(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})}},{b7fe2964c39bac:"45J7X"}],hKRLi:[function(e,t,i,r){var n=e("c559cd7b113e236e"),s=e("5a30563bc26230a8");n({target:"String",proto:!0,forced:e("eec66acdfc1a2a7d")("big")},{big:function(){return s(this,"big","","")}})},{c559cd7b113e236e:"b7GrG","5a30563bc26230a8":"hD83w",eec66acdfc1a2a7d:"bph7E"}],"4dt59":[function(e,t,i,r){var n=e("676512d3c55a414"),s=e("7e21be1f712bc51d");n({target:"String",proto:!0,forced:e("46de4ecf79c13e")("blink")},{blink:function(){return s(this,"blink","","")}})},{"676512d3c55a414":"b7GrG","7e21be1f712bc51d":"hD83w","46de4ecf79c13e":"bph7E"}],fhkH0:[function(e,t,i,r){var n=e("48f4b5d0c5a6a4fb"),s=e("e17c07d10b887dd3");n({target:"String",proto:!0,forced:e("5287465832c168a5")("bold")},{bold:function(){return s(this,"b","","")}})},{"48f4b5d0c5a6a4fb":"b7GrG",e17c07d10b887dd3:"hD83w","5287465832c168a5":"bph7E"}],ir9oO:[function(e,t,i,r){var n=e("6490db7677e8f73e"),s=e("e6e19e0e56c49b86");n({target:"String",proto:!0,forced:e("bb7b77345df5335f")("fixed")},{fixed:function(){return s(this,"tt","","")}})},{"6490db7677e8f73e":"b7GrG",e6e19e0e56c49b86:"hD83w",bb7b77345df5335f:"bph7E"}],dKi3D:[function(e,t,i,r){var n=e("138910cd530370a2"),s=e("d72a479e3b3815bd");n({target:"String",proto:!0,forced:e("5690c1466282cf0f")("fontcolor")},{fontcolor:function(e){return s(this,"font","color",e)}})},{"138910cd530370a2":"b7GrG",d72a479e3b3815bd:"hD83w","5690c1466282cf0f":"bph7E"}],ghUr7:[function(e,t,i,r){var n=e("f502df9771a160ae"),s=e("ee2ef8461dec89b6");n({target:"String",proto:!0,forced:e("2a2e9c2933145580")("fontsize")},{fontsize:function(e){return s(this,"font","size",e)}})},{f502df9771a160ae:"b7GrG",ee2ef8461dec89b6:"hD83w","2a2e9c2933145580":"bph7E"}],hz1m5:[function(e,t,i,r){var n=e("24cfbc86c4210c6b"),s=e("e302ce8a79ba595b");n({target:"String",proto:!0,forced:e("3ecf3c8b0c95d02f")("italics")},{italics:function(){return s(this,"i","","")}})},{"24cfbc86c4210c6b":"b7GrG",e302ce8a79ba595b:"hD83w","3ecf3c8b0c95d02f":"bph7E"}],g6z7G:[function(e,t,i,r){var n=e("bab8a92d9901152a"),s=e("252613bc1bb91720");n({target:"String",proto:!0,forced:e("3fb7b9ac770c40c")("link")},{link:function(e){return s(this,"a","href",e)}})},{bab8a92d9901152a:"b7GrG","252613bc1bb91720":"hD83w","3fb7b9ac770c40c":"bph7E"}],"64o02":[function(e,t,i,r){var n=e("d3ac4973e86c28f9"),s=e("8bd5ccba40c1dac2");n({target:"String",proto:!0,forced:e("8a5bdd05bf3f9b34")("small")},{small:function(){return s(this,"small","","")}})},{d3ac4973e86c28f9:"b7GrG","8bd5ccba40c1dac2":"hD83w","8a5bdd05bf3f9b34":"bph7E"}],fucTA:[function(e,t,i,r){var n=e("4d6202cdf03d0d61"),s=e("ec6f6be679741e37");n({target:"String",proto:!0,forced:e("1920bc41bac741db")("strike")},{strike:function(){return s(this,"strike","","")}})},{"4d6202cdf03d0d61":"b7GrG",ec6f6be679741e37:"hD83w","1920bc41bac741db":"bph7E"}],a3meA:[function(e,t,i,r){var n=e("5ac641dbd7ba3f29"),s=e("ef70fadb3bd40f3e");n({target:"String",proto:!0,forced:e("2b14944b2c33ed44")("sub")},{sub:function(){return s(this,"sub","","")}})},{"5ac641dbd7ba3f29":"b7GrG",ef70fadb3bd40f3e:"hD83w","2b14944b2c33ed44":"bph7E"}],"5o000":[function(e,t,i,r){var n=e("783c2c194676a06b"),s=e("bca2bfdd086dcdc1");n({target:"String",proto:!0,forced:e("36843058161d815a")("sup")},{sup:function(){return s(this,"sup","","")}})},{"783c2c194676a06b":"b7GrG",bca2bfdd086dcdc1:"hD83w","36843058161d815a":"bph7E"}],"5xmnF":[function(e,t,i,r){e("6371023cd6dad94a")("Float32",function(e){return function(t,i,r){return e(this,t,i,r)}})},{"6371023cd6dad94a":"f6RXZ"}],f6RXZ:[function(e,t,i,r){var n=e("c9bb9be26763d5d6"),s=e("f3461bcb45a0da3b"),a=e("513171f829dcf492"),o=e("9195003f05246e2"),h=e("5c32747745583fde"),c=e("f129cadcdd085794"),l=e("14a230ba5c5e071a"),d=e("848002acbadbae2c"),u=e("c540a4ec697b43da"),f=e("8248ffc9c9f95531"),p=e("aa784a976357a5bd"),g=e("da59162d19efb47d"),m=e("30e058c823038e07"),v=e("c43d9ac9910fd1d"),y=e("ac65ec03272627eb"),b=e("9477a245724234e7"),x=e("9d37aa52098c7b96"),E=e("361c9958906a5ff0"),T=e("4f80387d0e9c94a2"),A=e("d414fa9976906f9c"),w=e("97d75eb5fba6dc4c"),S=e("c3126acc51f6b7f5"),C=e("402069064923c62e"),I=e("442bd1b967e53ad0").f,_=e("e60d2aff236b9889"),O=e("5464ebf657a71f52").forEach,P=e("e76408bbdddedcb"),M=e("a6c477e34b27b3ce"),R=e("3b65fa2a837fee2b"),L=e("2db4073983cef2bc"),D=e("76805b4ea64de991"),k=e("7ab72b6c1b29c546"),N=e("1d46546a1b5897a9"),F=k.get,B=k.set,U=k.enforce,G=R.f,V=L.f,Y=s.RangeError,j=l.ArrayBuffer,W=j.prototype,z=l.DataView,H=c.NATIVE_ARRAY_BUFFER_VIEWS,X=c.TYPED_ARRAY_TAG,q=c.TypedArray,K=c.TypedArrayPrototype,J=c.isTypedArray,Q="BYTES_PER_ELEMENT",$="Wrong length",Z=function(e,t){M(e,t,{configurable:!0,get:function(){return F(this)[t]}})},ee=function(e){var t;return S(W,e)||"ArrayBuffer"===(t=E(e))||"SharedArrayBuffer"===t},et=function(e,t){return J(e)&&!A(t)&&t in e&&p(+t)&&t>=0},ei=function(e,t){return et(e,t=b(t))?u(2,e[t]):V(e,t)},er=function(e,t,i){return et(e,t=b(t))&&T(i)&&x(i,"value")&&!x(i,"get")&&!x(i,"set")&&!i.configurable&&(!x(i,"writable")||i.writable)&&(!x(i,"enumerable")||i.enumerable)?(e[t]=i.value,e):G(e,t,i)};o?(H||(L.f=ei,R.f=er,Z(K,"buffer"),Z(K,"byteOffset"),Z(K,"byteLength"),Z(K,"length")),n({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:ei,defineProperty:er}),t.exports=function(e,t,i){var r=e.match(/\d+/)[0]/8,o=e+(i?"Clamped":"")+"Array",c="get"+e,l="set"+e,u=s[o],p=u,b=p&&p.prototype,x={},E=function(e,t){var i=F(e);return i.view[c](t*r+i.byteOffset,!0)},A=function(e,t,n){var s=F(e);s.view[l](t*r+s.byteOffset,i?y(n):n,!0)},S=function(e,t){G(e,t,{get:function(){return E(this,t)},set:function(e){return A(this,t,e)},enumerable:!0})};H?h&&(p=t(function(e,t,i,n){return d(e,b),N(T(t)?ee(t)?void 0!==n?new u(t,v(i,r),n):void 0!==i?new u(t,v(i,r)):new u(t):J(t)?D(p,t):a(_,p,t):new u(m(t)),e,p)}),C&&C(p,q),O(I(u),function(e){e in p||f(p,e,u[e])}),p.prototype=b):(p=t(function(e,t,i,n){d(e,b);var s,o,h,c=0,l=0;if(T(t))if(ee(t)){s=t,l=v(i,r);var u=t.byteLength;if(void 0===n){if(u%r||(o=u-l)<0)throw new Y($)}else if((o=g(n)*r)+l>u)throw new Y($);h=o/r}else if(J(t))return D(p,t);else return a(_,p,t);else s=new j(o=(h=m(t))*r);for(B(e,{buffer:s,byteOffset:l,byteLength:o,length:h,view:new z(s)});c<h;)S(e,c++)}),C&&C(p,q),b=p.prototype=w(K)),b.constructor!==p&&f(b,"constructor",p),U(b).TypedArrayConstructor=p,X&&f(b,X,o);var M=p!==u;x[o]=p,n({global:!0,constructor:!0,forced:M,sham:!H},x),Q in p||f(p,Q,r),Q in b||f(b,Q,r),P(o)}):t.exports=function(){}},{c9bb9be26763d5d6:"b7GrG",f3461bcb45a0da3b:"5ygRS","513171f829dcf492":"kiToe","9195003f05246e2":"dqiQp","5c32747745583fde":"6A0Ft",f129cadcdd085794:"6CGVt","14a230ba5c5e071a":"gohOQ","848002acbadbae2c":"cYIbs",c540a4ec697b43da:"enYsZ","8248ffc9c9f95531":"mcZBn",aa784a976357a5bd:"fI16a",da59162d19efb47d:"5nsMT","30e058c823038e07":"6zoys",c43d9ac9910fd1d:"d7Rjg",ac65ec03272627eb:"4M2dc","9477a245724234e7":"2y7C0","9d37aa52098c7b96":"45yko","361c9958906a5ff0":"bAgVp","4f80387d0e9c94a2":"adFpz",d414fa9976906f9c:"izbIT","97d75eb5fba6dc4c":"gg5Dl",c3126acc51f6b7f5:"3Igu8","402069064923c62e":"i41Eo","442bd1b967e53ad0":"e91mZ",e60d2aff236b9889:"jbo1k","5464ebf657a71f52":"bmbdL",e76408bbdddedcb:"klUhs",a6c477e34b27b3ce:"l5KAt","3b65fa2a837fee2b":"34YKB","2db4073983cef2bc":"lYlYP","76805b4ea64de991":"a1N3z","7ab72b6c1b29c546":"fuP4a","1d46546a1b5897a9":"kzdOP"}],"6A0Ft":[function(e,t,i,r){var n=e("891f2fe9b403b8ab"),s=e("6c663a269461a969"),a=e("d8cf3a97649eee7c"),o=e("c788c77daaeab24a").NATIVE_ARRAY_BUFFER_VIEWS,h=n.ArrayBuffer,c=n.Int8Array;t.exports=!o||!s(function(){c(1)})||!s(function(){new c(-1)})||!a(function(e){new c,new c(null),new c(1.5),new c(e)},!0)||s(function(){return 1!==new c(new h(2),1,void 0).length})},{"891f2fe9b403b8ab":"5ygRS","6c663a269461a969":"45J7X",d8cf3a97649eee7c:"67emE",c788c77daaeab24a:"6CGVt"}],d7Rjg:[function(e,t,i,r){var n=e("3d42e5f9448f0334"),s=RangeError;t.exports=function(e,t){var i=n(e);if(i%t)throw new s("Wrong offset");return i}},{"3d42e5f9448f0334":"etxmb"}],"4M2dc":[function(e,t,i,r){var n=Math.round;t.exports=function(e){var t=n(e);return t<0?0:t>255?255:255&t}},{}],jbo1k:[function(e,t,i,r){var n=e("2b6f4dcfa87227c8"),s=e("a99e72870b261c00"),a=e("6fedb000997de8c9"),o=e("5d2230babf0781b0"),h=e("224522d7906614b9"),c=e("fa7f27b53f48b0c9"),l=e("244fea79be1425e4"),d=e("c86f6f22440f76d6"),u=e("a9c73ae28faf529e"),f=e("1213d44fe73ec45d").aTypedArrayConstructor,p=e("17f40af3180f13f6");t.exports=function(e){var t,i,r,g,m,v,y,b,x=a(this),E=o(e),T=arguments.length,A=T>1?arguments[1]:void 0,w=void 0!==A,S=l(E);if(S&&!d(S))for(b=(y=c(E,S)).next,E=[];!(v=s(b,y)).done;)E.push(v.value);for(w&&T>2&&(A=n(A,arguments[2])),i=h(E),g=u(r=new(f(x))(i)),t=0;i>t;t++)m=w?A(E[t],t):E[t],r[t]=g?p(m):+m;return r}},{"2b6f4dcfa87227c8":"gWc3u",a99e72870b261c00:"kiToe","6fedb000997de8c9":"6tYWC","5d2230babf0781b0":"eHl90","224522d7906614b9":"fuf58",fa7f27b53f48b0c9:"7mfF2","244fea79be1425e4":"2JETE",c86f6f22440f76d6:"8SN6F",a9c73ae28faf529e:"akdgy","1213d44fe73ec45d":"6CGVt","17f40af3180f13f6":"c4yR1"}],akdgy:[function(e,t,i,r){var n=e("4eaea61d57855c23");t.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},{"4eaea61d57855c23":"bAgVp"}],c4yR1:[function(e,t,i,r){var n=e("e84ff6c898741836"),s=TypeError;t.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new s("Can't convert number to bigint");return BigInt(t)}},{e84ff6c898741836:"5Zs4D"}],hBGXl:[function(e,t,i,r){e("5afb75924dde7be2")("Float64",function(e){return function(t,i,r){return e(this,t,i,r)}})},{"5afb75924dde7be2":"f6RXZ"}],iqVLF:[function(e,t,i,r){e("f65338540449e43b")("Int8",function(e){return function(t,i,r){return e(this,t,i,r)}})},{f65338540449e43b:"f6RXZ"}],jvoCj:[function(e,t,i,r){e("618af5c93cf1cc05")("Int16",function(e){return function(t,i,r){return e(this,t,i,r)}})},{"618af5c93cf1cc05":"f6RXZ"}],lyvq7:[function(e,t,i,r){e("c7ce36d83e80a30f")("Int32",function(e){return function(t,i,r){return e(this,t,i,r)}})},{c7ce36d83e80a30f:"f6RXZ"}],"9L4aP":[function(e,t,i,r){e("1fba800ad35b335f")("Uint8",function(e){return function(t,i,r){return e(this,t,i,r)}})},{"1fba800ad35b335f":"f6RXZ"}],boEcL:[function(e,t,i,r){e("2cd7a1d58fa59b7d")("Uint8",function(e){return function(t,i,r){return e(this,t,i,r)}},!0)},{"2cd7a1d58fa59b7d":"f6RXZ"}],hKdE1:[function(e,t,i,r){e("ca953ee05f39cdaa")("Uint16",function(e){return function(t,i,r){return e(this,t,i,r)}})},{ca953ee05f39cdaa:"f6RXZ"}],bVeLM:[function(e,t,i,r){e("682a05de60a0a1e1")("Uint32",function(e){return function(t,i,r){return e(this,t,i,r)}})},{"682a05de60a0a1e1":"f6RXZ"}],"1tEuC":[function(e,t,i,r){var n=e("bad3bf9fd10c3d3e"),s=e("f3046f328b82c495"),a=e("6efc916402e96e15"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",function(e){var t=o(this),i=s(t),r=a(e),n=r>=0?r:i+r;return n<0||n>=i?void 0:t[n]})},{bad3bf9fd10c3d3e:"6CGVt",f3046f328b82c495:"fuf58","6efc916402e96e15":"lOYVA"}],j5D2s:[function(e,t,i,r){var n=e("9998fdf0f56ef0da"),s=e("3136ffe0165b4705"),a=n(e("45547c073d8e02f")),o=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(e,t){return a(o(this),e,t,arguments.length>2?arguments[2]:void 0)})},{"9998fdf0f56ef0da":"cfIox","3136ffe0165b4705":"6CGVt","45547c073d8e02f":"b5uFH"}],bCmiv:[function(e,t,i,r){var n=e("cb5a1a9d977d55c8"),s=e("9bc5b51fcf1b899f").every,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{cb5a1a9d977d55c8:"6CGVt","9bc5b51fcf1b899f":"bmbdL"}],"3K06C":[function(e,t,i,r){var n=e("24d20a7fba3c1708"),s=e("3a12c8f811e83e62"),a=e("bec3653efa2d8600"),o=e("ff46ad00880fddaa"),h=e("5e0ee530611ef38d"),c=e("800a47a98b497e55"),l=e("faaaddc6a409cf90"),d=n.aTypedArray,u=n.exportTypedArrayMethod,f=c("".slice);u("fill",function(e){var t=arguments.length;return d(this),h(s,this,"Big"===f(o(this),0,3)?a(e):+e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},l(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}))},{"24d20a7fba3c1708":"6CGVt","3a12c8f811e83e62":"83otQ",bec3653efa2d8600:"c4yR1",ff46ad00880fddaa:"bAgVp","5e0ee530611ef38d":"kiToe","800a47a98b497e55":"cfIox",faaaddc6a409cf90:"45J7X"}],e83dQ:[function(e,t,i,r){var n=e("6846524790b14a7c"),s=e("69eb0f28238e9173").filter,a=e("d404a3c06ca3bb3e"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",function(e){var t=s(o(this),e,arguments.length>1?arguments[1]:void 0);return a(this,t)})},{"6846524790b14a7c":"6CGVt","69eb0f28238e9173":"bmbdL",d404a3c06ca3bb3e:"hba60"}],hba60:[function(e,t,i,r){var n=e("b597c909ed514557"),s=e("671cb65500632ecc").getTypedArrayConstructor;t.exports=function(e,t){return n(s(e),t)}},{b597c909ed514557:"a1N3z","671cb65500632ecc":"6CGVt"}],giBYv:[function(e,t,i,r){var n=e("2ee42d54019723d0"),s=e("f74f952feb3fa9ac").find,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"2ee42d54019723d0":"6CGVt",f74f952feb3fa9ac:"bmbdL"}],c98Se:[function(e,t,i,r){var n=e("8a1e1a9ff0bdb479"),s=e("faaa2d0f518f9401").findIndex,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"8a1e1a9ff0bdb479":"6CGVt",faaa2d0f518f9401:"bmbdL"}],lWfxh:[function(e,t,i,r){var n=e("1d1b09a81097f4c9"),s=e("e815e97cf844ecb").findLast,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"1d1b09a81097f4c9":"6CGVt",e815e97cf844ecb:"c8JOf"}],"1MLi3":[function(e,t,i,r){var n=e("de1e827bc87ccb28"),s=e("1d3fb19f3f3cea6a").findLastIndex,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{de1e827bc87ccb28:"6CGVt","1d3fb19f3f3cea6a":"c8JOf"}],gzM9H:[function(e,t,i,r){var n=e("905afd384f4e3de6"),s=e("d55109422f6a63d3").forEach,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(e){s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"905afd384f4e3de6":"6CGVt",d55109422f6a63d3:"bmbdL"}],jM2fb:[function(e,t,i,r){var n=e("e24f9b87534e32a3");(0,e("9358eeabcbb18f49").exportTypedArrayStaticMethod)("from",e("49819eabcb3ccea1"),n)},{e24f9b87534e32a3:"6A0Ft","9358eeabcbb18f49":"6CGVt","49819eabcb3ccea1":"jbo1k"}],dyqx7:[function(e,t,i,r){var n=e("7cf07194bf630e10"),s=e("6783fff4c8e274ff").includes,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"7cf07194bf630e10":"6CGVt","6783fff4c8e274ff":"8UbLy"}],ivnSQ:[function(e,t,i,r){var n=e("19c9cea2a3392f92"),s=e("728bfde1b6b9fa8c").indexOf,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"19c9cea2a3392f92":"6CGVt","728bfde1b6b9fa8c":"8UbLy"}],kW4B8:[function(e,t,i,r){var n=e("3da36adbfe4f1c5e"),s=e("87513a57210d794"),a=e("ab6b74db00db51f7"),o=e("21e9ae10aded4ff7"),h=e("fe81c4288afbe8ee"),c=e("ddb435c2e5bdfda1")("iterator"),l=n.Uint8Array,d=a(h.values),u=a(h.keys),f=a(h.entries),p=o.aTypedArray,g=o.exportTypedArrayMethod,m=l&&l.prototype,v=!s(function(){m[c].call([1])}),y=!!m&&m.values&&m[c]===m.values&&"values"===m.values.name,b=function(){return d(p(this))};g("entries",function(){return f(p(this))},v),g("keys",function(){return u(p(this))},v),g("values",b,v||!y,{name:"values"}),g(c,b,v||!y,{name:"values"})},{"3da36adbfe4f1c5e":"5ygRS","87513a57210d794":"45J7X",ab6b74db00db51f7:"cfIox","21e9ae10aded4ff7":"6CGVt",fe81c4288afbe8ee:"aF8mt",ddb435c2e5bdfda1:"eG9HO"}],"781fg":[function(e,t,i,r){var n=e("4a1cb40dad4dd1ac"),s=e("68cfb4a8ab57e7b8"),a=n.aTypedArray,o=n.exportTypedArrayMethod,h=s([].join);o("join",function(e){return h(a(this),e)})},{"4a1cb40dad4dd1ac":"6CGVt","68cfb4a8ab57e7b8":"cfIox"}],"8eoRT":[function(e,t,i,r){var n=e("83d52c5c09010d50"),s=e("a5b16a6fc92268b4"),a=e("9b20398976dd53df"),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(e){var t=arguments.length;return s(a,o(this),t>1?[e,arguments[1]]:[e])})},{"83d52c5c09010d50":"6CGVt",a5b16a6fc92268b4:"72fZp","9b20398976dd53df":"i4xhE"}],g6waC:[function(e,t,i,r){var n=e("47e7bb602930e61a"),s=e("8e0cd2bb3fe997bb").map,a=n.aTypedArray,o=n.getTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0,function(e,t){return new(o(e))(t)})})},{"47e7bb602930e61a":"6CGVt","8e0cd2bb3fe997bb":"bmbdL"}],"85ox0":[function(e,t,i,r){var n=e("8205d0df207de27c"),s=e("ff4c68a63e37d828"),a=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",function(){for(var e=0,t=arguments.length,i=new(a(this))(t);t>e;)i[e]=arguments[e++];return i},s)},{"8205d0df207de27c":"6CGVt",ff4c68a63e37d828:"6A0Ft"}],lCjaL:[function(e,t,i,r){var n=e("44c8794ad6be555f"),s=e("1163c739252ce603").left,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(e){var t=arguments.length;return s(a(this),e,t,t>1?arguments[1]:void 0)})},{"44c8794ad6be555f":"6CGVt","1163c739252ce603":"fx2tX"}],"2VrRi":[function(e,t,i,r){var n=e("b70766ffaffbfa51"),s=e("5f58f990e3d5d551").right,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(e){var t=arguments.length;return s(a(this),e,t,t>1?arguments[1]:void 0)})},{b70766ffaffbfa51:"6CGVt","5f58f990e3d5d551":"fx2tX"}],"2Aepe":[function(e,t,i,r){var n=e("2692a9613069388b"),s=n.aTypedArray,a=n.exportTypedArrayMethod,o=Math.floor;a("reverse",function(){for(var e,t=s(this).length,i=o(t/2),r=0;r<i;)e=this[r],this[r++]=this[--t],this[t]=e;return this})},{"2692a9613069388b":"6CGVt"}],dedNk:[function(e,t,i,r){var n=e("3c4f43e566ab7632"),s=e("8bf28e9cdb4b51e7"),a=e("3cf762b146f90585"),o=e("16f38bcdf8d74421"),h=e("4a9c5a15d77842f8"),c=e("e57503c492a0d3da"),l=e("52b307bfea7391a"),d=n.RangeError,u=n.Int8Array,f=u&&u.prototype,p=f&&f.set,g=a.aTypedArray,m=a.exportTypedArrayMethod,v=!l(function(){var e=new Uint8ClampedArray(2);return s(p,e,{length:1,0:3},1),3!==e[1]}),y=v&&a.NATIVE_ARRAY_BUFFER_VIEWS&&l(function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});m("set",function(e){g(this);var t=h(arguments.length>1?arguments[1]:void 0,1),i=c(e);if(v)return s(p,this,i,t);var r=this.length,n=o(i),a=0;if(n+t>r)throw new d("Wrong length");for(;a<n;)this[t+a]=i[a++]},!v||y)},{"3c4f43e566ab7632":"5ygRS","8bf28e9cdb4b51e7":"kiToe","3cf762b146f90585":"6CGVt","16f38bcdf8d74421":"fuf58","4a9c5a15d77842f8":"d7Rjg",e57503c492a0d3da:"eHl90","52b307bfea7391a":"45J7X"}],g6kQb:[function(e,t,i,r){var n=e("d8cf74b619b99d16"),s=e("cde6d683247bdb44"),a=e("a6442c63e141a126"),o=n.aTypedArray,h=n.getTypedArrayConstructor;(0,n.exportTypedArrayMethod)("slice",function(e,t){for(var i=a(o(this),e,t),r=h(this),n=0,s=i.length,c=new r(s);s>n;)c[n]=i[n++];return c},s(function(){new Int8Array(1).slice()}))},{d8cf74b619b99d16:"6CGVt",cde6d683247bdb44:"45J7X",a6442c63e141a126:"lUArJ"}],fKO9L:[function(e,t,i,r){var n=e("78c3191738d81c4d"),s=e("b1ba67becb59f503").some,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0)})},{"78c3191738d81c4d":"6CGVt",b1ba67becb59f503:"bmbdL"}],aD2tC:[function(e,t,i,r){var n=e("1319b11c96d7a212"),s=e("443f315e07e91c29"),a=e("8dc6cee8a97e45cb"),o=e("d6c4034c4939c7d5"),h=e("f3e3e1c809574ce3"),c=e("cab25e21cd947849"),l=e("c53adf7878431ec6"),d=e("90728397db1428a3"),u=e("c20e84b46e983c4f"),f=e("8b919df81d7fcf47"),p=c.aTypedArray,g=c.exportTypedArrayMethod,m=n.Uint16Array,v=m&&s(m.prototype.sort),y=!!v&&!(a(function(){v(new m(2),null)})&&a(function(){v(new m(2),{})})),b=!!v&&!a(function(){if(u)return u<74;if(l)return l<67;if(d)return!0;if(f)return f<602;var e,t,i=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,r[e]=e-2*t+3;for(v(i,function(e,t){return(e/4|0)-(t/4|0)}),e=0;e<516;e++)if(i[e]!==r[e])return!0});g("sort",function(e){return(void 0!==e&&o(e),b)?v(this,e):h(p(this),function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i})},!b||y)},{"1319b11c96d7a212":"5ygRS","443f315e07e91c29":"dAU5H","8dc6cee8a97e45cb":"45J7X",d6c4034c4939c7d5:"3m7Aa",f3e3e1c809574ce3:"02Yr0",cab25e21cd947849:"6CGVt",c53adf7878431ec6:"7pRR7","90728397db1428a3":"5pC0x",c20e84b46e983c4f:"jarVK","8b919df81d7fcf47":"jqVuW"}],dw62W:[function(e,t,i,r){var n=e("d3219a9d813dfae3"),s=e("815a66ab54718368"),a=e("576f4ad682879893"),o=n.aTypedArray,h=n.getTypedArrayConstructor;(0,n.exportTypedArrayMethod)("subarray",function(e,t){var i=o(this),r=i.length,n=a(e,r);return new(h(i))(i.buffer,i.byteOffset+n*i.BYTES_PER_ELEMENT,s((void 0===t?r:a(t,r))-n))})},{d3219a9d813dfae3:"6CGVt","815a66ab54718368":"5nsMT","576f4ad682879893":"65oaN"}],bLia5:[function(e,t,i,r){var n=e("d23c9dad2cb3d012"),s=e("961a14c04c94ca8e"),a=e("aa830556bb66a52b"),o=e("1477df799d469d0c"),h=e("6bdde3bff05f534b"),c=n.Int8Array,l=a.aTypedArray,d=a.exportTypedArrayMethod,u=[].toLocaleString,f=!!c&&o(function(){u.call(new c(1))});d("toLocaleString",function(){return s(u,f?h(l(this)):l(this),h(arguments))},o(function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()})||!o(function(){c.prototype.toLocaleString.call([1,2])}))},{d23c9dad2cb3d012:"5ygRS","961a14c04c94ca8e":"72fZp",aa830556bb66a52b:"6CGVt","1477df799d469d0c":"45J7X","6bdde3bff05f534b":"lUArJ"}],"2773R":[function(e,t,i,r){var n=e("aee14a288ff10704"),s=e("77f370038a7e7dac"),a=s.aTypedArray,o=s.exportTypedArrayMethod,h=s.getTypedArrayConstructor;o("toReversed",function(){return n(a(this),h(this))})},{aee14a288ff10704:"3AQfx","77f370038a7e7dac":"6CGVt"}],hlU21:[function(e,t,i,r){var n=e("7a241707bf041790"),s=e("ab9301a002e94347"),a=e("e1b15c081f5438dc"),o=e("50268bbb02cbbbc4"),h=n.aTypedArray,c=n.getTypedArrayConstructor,l=n.exportTypedArrayMethod,d=s(n.TypedArrayPrototype.sort);l("toSorted",function(e){void 0!==e&&a(e);var t=h(this);return d(o(c(t),t),e)})},{"7a241707bf041790":"6CGVt",ab9301a002e94347:"cfIox",e1b15c081f5438dc:"3m7Aa","50268bbb02cbbbc4":"a1N3z"}],if7Z2:[function(e,t,i,r){var n=e("ba1ad98ce5955ae6").exportTypedArrayMethod,s=e("7fb7589d87925c0e"),a=e("9ae1b5b748ef0512"),o=e("9d0cad3ff385c8e1"),h=a.Uint8Array,c=h&&h.prototype||{},l=[].toString,d=o([].join);s(function(){l.call({})})&&(l=function(){return d(this)});var u=c.toString!==l;n("toString",l,u)},{ba1ad98ce5955ae6:"6CGVt","7fb7589d87925c0e":"45J7X","9ae1b5b748ef0512":"5ygRS","9d0cad3ff385c8e1":"cfIox"}],"6WCjW":[function(e,t,i,r){var n=e("5428fa832663517b"),s=e("472f91950b838d4c"),a=e("cd9beaafe2ae7a70"),o=e("b4b145cf5a7fc46d"),h=e("3cca7f61fa3b5db7"),c=s.aTypedArray,l=s.getTypedArrayConstructor,d=s.exportTypedArrayMethod,u=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}(),f=u&&function(){try{new Int8Array(1).with(-.5,1)}catch(e){return!0}}();d("with",{with:function(e,t){var i=c(this),r=o(e),s=a(i)?h(t):+t;return n(i,l(i),r,s)}}.with,!u||f)},{"5428fa832663517b":"15yPl","472f91950b838d4c":"6CGVt",cd9beaafe2ae7a70:"akdgy",b4b145cf5a7fc46d:"lOYVA","3cca7f61fa3b5db7":"c4yR1"}],kvPB5:[function(e,t,i,r){var n=e("836e62b1ffd74ed3"),s=e("5ce67bcf4914c26f"),a=e("112d9fd3d22d849f"),o=e("6724f893fd3c4021"),h=s.Uint8Array,c=!h||!h.fromBase64||!function(){try{h.fromBase64("a");return}catch(e){}try{h.fromBase64("",null)}catch(e){return!0}}();h&&n({target:"Uint8Array",stat:!0,forced:c},{fromBase64:function(e){var t=o(e,arguments.length>1?arguments[1]:void 0,null,0x1fffffffffffff);return a(h,t.bytes)}})},{"836e62b1ffd74ed3":"b7GrG","5ce67bcf4914c26f":"5ygRS","112d9fd3d22d849f":"a1N3z","6724f893fd3c4021":"actK0"}],actK0:[function(e,t,i,r){var n=e("fe1373a1d763fa94"),s=e("3fdad083a88b4920"),a=e("839814cb1dc6702"),o=e("f2bbab95ffc80bd4"),h=e("77331631e7b18554"),c=e("ddb962de114e18e9"),l=e("797e408149c443dc"),d=e("810c4b1d57118b0e"),u=c.c2i,f=c.c2iUrl,p=n.SyntaxError,g=n.TypeError,m=s("".charAt),v=function(e,t){for(var i=e.length;t<i;t++){var r=m(e,t);if(" "!==r&&"	"!==r&&"\n"!==r&&"\f"!==r&&"\r"!==r)break}return t},y=function(e,t,i){var r=e.length;r<4&&(e+=2===r?"AA":"A");var n=(t[m(e,0)]<<18)+(t[m(e,1)]<<12)+(t[m(e,2)]<<6)+t[m(e,3)],s=[n>>16&255,n>>8&255,255&n];if(2===r){if(i&&0!==s[1])throw new p("Extra bits");return[s[0]]}if(3===r){if(i&&0!==s[2])throw new p("Extra bits");return[s[0],s[1]]}return s},b=function(e,t,i){for(var r=t.length,n=0;n<r;n++)e[i+n]=t[n];return i+r};t.exports=function(e,t,i,r){o(e),a(t);var n="base64"===l(t)?u:f,s=t?t.lastChunkHandling:void 0;if(void 0===s&&(s="loose"),"loose"!==s&&"strict"!==s&&"stop-before-partial"!==s)throw new g("Incorrect `lastChunkHandling` option");i&&d(i.buffer);var c=e.length,x=i||[],E=0,T=0,A="",w=0;if(r)for(;;){if((w=v(e,w))===c){if(A.length>0){if("stop-before-partial"===s)break;if("loose"===s){if(1===A.length)throw new p("Malformed padding: exactly one additional character");E=b(x,y(A,n,!1),E)}else throw new p("Missing padding")}T=c;break}var S=m(e,w);if(++w,"="===S){if(A.length<2)throw new p("Padding is too early");if(w=v(e,w),2===A.length){if(w===c){if("stop-before-partial"===s)break;throw new p("Malformed padding: only one =")}"="===m(e,w)&&(w=v(e,++w))}if(w<c)throw new p("Unexpected character after padding");E=b(x,y(A,n,"strict"===s),E),T=c;break}if(!h(n,S))throw new p("Unexpected character");var C=r-E;if(1===C&&2===A.length||2===C&&3===A.length||4===(A+=S).length&&(E=b(x,y(A,n,!1),E),A="",T=w,E===r))break}return{bytes:x,read:T,written:E}}},{fe1373a1d763fa94:"5ygRS","3fdad083a88b4920":"cfIox","839814cb1dc6702":"1nwrz",f2bbab95ffc80bd4:"kSy9K","77331631e7b18554":"45yko",ddb962de114e18e9:"lPB2Z","797e408149c443dc":"8JjGB","810c4b1d57118b0e":"l6j3Z"}],"1nwrz":[function(e,t,i,r){var n=e("ab139d97fe880857"),s=String,a=TypeError;t.exports=function(e){if(void 0===e||n(e))return e;throw new a(s(e)+" is not an object or undefined")}},{ab139d97fe880857:"adFpz"}],lPB2Z:[function(e,t,i,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=n+"+/",a=n+"-_",o=function(e){for(var t={},i=0;i<64;i++)t[e.charAt(i)]=i;return t};t.exports={i2c:s,c2i:o(s),i2cUrl:a,c2iUrl:o(a)}},{}],"8JjGB":[function(e,t,i,r){var n=TypeError;t.exports=function(e){var t=e&&e.alphabet;if(void 0===t||"base64"===t||"base64url"===t)return t||"base64";throw new n("Incorrect `alphabet` option")}},{}],ee5SN:[function(e,t,i,r){var n=e("7a988633c20d540c"),s=e("64947b551120b68b"),a=e("b0e2b2a1d696bc21"),o=e("4eafe1b566449820");s.Uint8Array&&n({target:"Uint8Array",stat:!0},{fromHex:function(e){return o(a(e)).bytes}})},{"7a988633c20d540c":"b7GrG","64947b551120b68b":"5ygRS",b0e2b2a1d696bc21:"kSy9K","4eafe1b566449820":"3zKKv"}],"3zKKv":[function(e,t,i,r){var n=e("e22acc3af6d2ee16"),s=e("91549e5fc1582f07"),a=n.Uint8Array,o=n.SyntaxError,h=n.parseInt,c=Math.min,l=/[^\da-f]/i,d=s(l.exec),u=s("".slice);t.exports=function(e,t){var i=e.length;if(i%2!=0)throw new o("String should be an even number of characters");for(var r=t?c(t.length,i/2):i/2,n=t||new a(r),s=0,f=0;f<r;){var p=u(e,s,s+=2);if(d(l,p))throw new o("String should only contain hex characters");n[f++]=h(p,16)}return{bytes:n,read:s}}},{e22acc3af6d2ee16:"5ygRS","91549e5fc1582f07":"cfIox"}],fh0FN:[function(e,t,i,r){var n=e("f083143db6a8c259"),s=e("604801bd2e91c7f3"),a=e("5a5a3962827aa59c"),o=e("4745d2fab7a4cb08"),h=s.Uint8Array,c=!h||!h.prototype.setFromBase64||!function(){var e=new h([255,255,255,255,255]);try{e.setFromBase64("",null);return}catch(e){}try{e.setFromBase64("a");return}catch(e){}try{e.setFromBase64("MjYyZg===")}catch(t){return 50===e[0]&&54===e[1]&&50===e[2]&&255===e[3]&&255===e[4]}}();h&&n({target:"Uint8Array",proto:!0,forced:c},{setFromBase64:function(e){o(this);var t=a(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})},{f083143db6a8c259:"b7GrG","604801bd2e91c7f3":"5ygRS","5a5a3962827aa59c":"actK0","4745d2fab7a4cb08":"cm7Cd"}],cm7Cd:[function(e,t,i,r){var n=e("1697321c2530ca0f"),s=TypeError;t.exports=function(e){if("Uint8Array"===n(e))return e;throw new s("Argument is not an Uint8Array")}},{"1697321c2530ca0f":"bAgVp"}],"7PJs9":[function(e,t,i,r){var n=e("deb7783e6eb69a70"),s=e("2e186bd2e13a4ebd"),a=e("c882d38532b1db37"),o=e("235db110d6d192e1"),h=e("985652f353df3a12"),c=e("47e17cd64abf2401");s.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromHex:function(e){o(this),a(e),h(this.buffer);var t=c(e,this).read;return{read:t,written:t/2}}})},{deb7783e6eb69a70:"b7GrG","2e186bd2e13a4ebd":"5ygRS",c882d38532b1db37:"kSy9K","235db110d6d192e1":"cm7Cd","985652f353df3a12":"l6j3Z","47e17cd64abf2401":"3zKKv"}],eIJhJ:[function(e,t,i,r){var n=e("47e2102226587140"),s=e("cb3ef69ebd2258bf"),a=e("a655ee26086a1089"),o=e("79315d7d9fbc8caf"),h=e("1dbb733530e20bbe"),c=e("ddae998f725440a3"),l=e("50f2f972a7d939f8"),d=e("c83d96141d3a242c"),u=l.i2c,f=l.i2cUrl,p=a("".charAt),g=s.Uint8Array,m=!g||!g.prototype.toBase64||!function(){try{new g().toBase64(null)}catch(e){return!0}}();g&&n({target:"Uint8Array",proto:!0,forced:m},{toBase64:function(){var e,t=h(this),i=arguments.length?o(arguments[0]):void 0,r="base64"===d(i)?u:f,n=!!i&&!!i.omitPadding;c(this.buffer);for(var s="",a=0,l=t.length,g=function(t){return p(r,e>>6*t&63)};a+2<l;a+=3)e=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s+=g(3)+g(2)+g(1)+g(0);return a+2===l?(e=(t[a]<<16)+(t[a+1]<<8),s+=g(3)+g(2)+g(1)+(n?"":"=")):a+1===l&&(e=t[a]<<16,s+=g(3)+g(2)+(n?"":"==")),s}})},{"47e2102226587140":"b7GrG",cb3ef69ebd2258bf:"5ygRS",a655ee26086a1089:"cfIox","79315d7d9fbc8caf":"1nwrz","1dbb733530e20bbe":"cm7Cd",ddae998f725440a3:"l6j3Z","50f2f972a7d939f8":"lPB2Z",c83d96141d3a242c:"8JjGB"}],"5w1XH":[function(e,t,i,r){var n=e("38744dbf311aaed2"),s=e("882c157e06527516"),a=e("83f39df8491b348"),o=e("57dafc97385b8a82"),h=e("a9dab1251063ee59"),c=a(1.1.toString),l=s.Uint8Array,d=!l||!l.prototype.toHex||!function(){try{var e=new l([255,255,255,255,255,255,255,255]);return"ffffffffffffffff"===e.toHex()}catch(e){return!1}}();l&&n({target:"Uint8Array",proto:!0,forced:d},{toHex:function(){o(this),h(this.buffer);for(var e="",t=0,i=this.length;t<i;t++){var r=c(this[t],16);e+=1===r.length?"0"+r:r}return e}})},{"38744dbf311aaed2":"b7GrG","882c157e06527516":"5ygRS","83f39df8491b348":"cfIox","57dafc97385b8a82":"cm7Cd",a9dab1251063ee59:"l6j3Z"}],hHRFV:[function(e,t,i,r){var n=e("b25f2dc62f86f185"),s=e("f98894072ee354c2"),a=e("e8f3df77e99ec93e"),o=String.fromCharCode,h=s("".charAt),c=s(/./.exec),l=s("".slice),d=/^[\da-f]{2}$/i,u=/^[\da-f]{4}$/i;n({global:!0},{unescape:function(e){for(var t,i,r=a(e),n="",s=r.length,f=0;f<s;){if("%"===(t=h(r,f++))){if("u"===h(r,f)){if(c(u,i=l(r,f+1,f+5))){n+=o(parseInt(i,16)),f+=5;continue}}else if(c(d,i=l(r,f,f+2))){n+=o(parseInt(i,16)),f+=2;continue}}n+=t}return n}})},{b25f2dc62f86f185:"b7GrG",f98894072ee354c2:"cfIox",e8f3df77e99ec93e:"2QNq8"}],e1XD1:[function(e,t,i,r){e("a8c1e25017437d")},{a8c1e25017437d:"3va5y"}],"3va5y":[function(e,t,i,r){var n,s=e("4e60997043599c68"),a=e("5341adea83e89c0c"),o=e("182f989a492de7c6"),h=e("b41734fbe20d8ad4"),c=e("78ba01528267d962"),l=e("32fff688dc79e50c"),d=e("b362d8e7ff41644e"),u=e("40b9e3e73f50872d"),f=e("e46a6ca6b98d61d0").enforce,p=e("878a9525b93f8113"),g=e("2163c9ee83b27dfc"),m=Object,v=Array.isArray,y=m.isExtensible,b=m.isFrozen,x=m.isSealed,E=m.freeze,T=m.seal,A=!a.ActiveXObject&&"ActiveXObject"in a,w=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},S=l("WeakMap",w,d),C=S.prototype,I=o(C.set);if(g)if(A){n=d.getConstructor(w,"WeakMap",!0),c.enable();var _=o(C.delete),O=o(C.has),P=o(C.get);h(C,{delete:function(e){if(u(e)&&!y(e)){var t=f(this);return t.frozen||(t.frozen=new n),_(this,e)||t.frozen.delete(e)}return _(this,e)},has:function(e){if(u(e)&&!y(e)){var t=f(this);return t.frozen||(t.frozen=new n),O(this,e)||t.frozen.has(e)}return O(this,e)},get:function(e){if(u(e)&&!y(e)){var t=f(this);return t.frozen||(t.frozen=new n),O(this,e)?P(this,e):t.frozen.get(e)}return P(this,e)},set:function(e,t){if(u(e)&&!y(e)){var i=f(this);i.frozen||(i.frozen=new n),O(this,e)?I(this,e,t):i.frozen.set(e,t)}else I(this,e,t);return this}})}else s&&p(function(){var e=E([]);return I(new S,e,1),!b(e)})&&h(C,{set:function(e,t){var i;return v(e)&&(b(e)?i=E:x(e)&&(i=T)),I(this,e,t),i&&i(e),this}})},{"4e60997043599c68":"bk8fh","5341adea83e89c0c":"5ygRS","182f989a492de7c6":"cfIox",b41734fbe20d8ad4:"8DWpB","78ba01528267d962":"5D5Ei","32fff688dc79e50c":"1e2fN",b362d8e7ff41644e:"84zyd","40b9e3e73f50872d":"adFpz",e46a6ca6b98d61d0:"fuP4a","878a9525b93f8113":"45J7X","2163c9ee83b27dfc":"bYNMK"}],"84zyd":[function(e,t,i,r){var n=e("1805cb6220d706e7"),s=e("5263c73c3566f1ef"),a=e("9764e89aab31dc9a").getWeakData,o=e("e632c1106cb00cea"),h=e("602fe1299f06e16c"),c=e("bfb5a8bfdc9265b1"),l=e("211f42379f0813a"),d=e("830bf4bd7bf8261c"),u=e("ffaf20b85e78d82f"),f=e("cef0026b9b05e2"),p=e("96b7fea7b9fcfa28"),g=p.set,m=p.getterFor,v=u.find,y=u.findIndex,b=n([].splice),x=0,E=function(e){return e.frozen||(e.frozen=new T)},T=function(){this.entries=[]},A=function(e,t){return v(e.entries,function(e){return e[0]===t})};T.prototype={get:function(e){var t=A(this,e);if(t)return t[1]},has:function(e){return!!A(this,e)},set:function(e,t){var i=A(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,function(t){return t[0]===e});return~t&&b(this.entries,t,1),!!~t}},t.exports={getConstructor:function(e,t,i,r){var n=e(function(e,n){o(e,u),g(e,{type:t,id:x++,frozen:null}),c(n)||d(n,e[r],{that:e,AS_ENTRIES:i})}),u=n.prototype,p=m(t),v=function(e,t,i){var r=p(e),n=a(h(t),!0);return!0===n?E(r).set(t,i):n[r.id]=i,e};return s(u,{delete:function(e){var t=p(this);if(!l(e))return!1;var i=a(e);return!0===i?E(t).delete(e):i&&f(i,t.id)&&delete i[t.id]},has:function(e){var t=p(this);if(!l(e))return!1;var i=a(e);return!0===i?E(t).has(e):i&&f(i,t.id)}}),s(u,i?{get:function(e){var t=p(this);if(l(e)){var i=a(e);if(!0===i)return E(t).get(e);if(i)return i[t.id]}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),n}}},{"1805cb6220d706e7":"cfIox","5263c73c3566f1ef":"8DWpB","9764e89aab31dc9a":"5D5Ei",e632c1106cb00cea:"cYIbs","602fe1299f06e16c":"5dGJN",bfb5a8bfdc9265b1:"9RtqE","211f42379f0813a":"adFpz","830bf4bd7bf8261c":"5ZCpM",ffaf20b85e78d82f:"bmbdL",cef0026b9b05e2:"45yko","96b7fea7b9fcfa28":"fuP4a"}],"7TMTo":[function(e,t,i,r){e("12401c27bcb73ff5")},{"12401c27bcb73ff5":"25mKP"}],"25mKP":[function(e,t,i,r){e("bb905240cfe53967")("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},e("3bcac50549cb5487"))},{bb905240cfe53967:"1e2fN","3bcac50549cb5487":"84zyd"}],eIy4h:[function(e,t,i,r){var n=e("f57c57075be2f036"),s=e("1beb501bad2a77ab"),a=e("54160fb760cf47b6"),o=e("b8fdd5e59791f323"),h=e("2b6100c225ada6"),c=e("fb00c1d39c9bf14c"),l=e("93407030a6bacce1"),d=e("48ccfe93995f906"),u=e("bed47900de2f9889").c2i,f=/[^\d+/a-z]/i,p=/[\t\n\f\r ]+/g,g=/[=]{1,2}$/,m=a("atob"),v=String.fromCharCode,y=o("".charAt),b=o("".replace),x=o(f.exec),E=!!m&&!c(function(){return"hi"!==m("aGk=")}),T=E&&c(function(){return""!==m(" ")}),A=E&&!c(function(){m("a")}),w=E&&!c(function(){m()}),S=E&&1!==m.length;n({global:!0,bind:!0,enumerable:!0,forced:!E||T||A||w||S},{atob:function(e){if(d(arguments.length,1),E&&!T&&!A)return h(m,s,e);var t,i,r,n=b(l(e),p,""),o="",c=0,w=0;if(n.length%4==0&&(n=b(n,g,"")),(t=n.length)%4==1||x(f,n))throw new(a("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;c<t;)i=y(n,c++),r=w%4?64*r+u[i]:u[i],w++%4&&(o+=v(255&r>>(-2*w&6)));return o}})},{f57c57075be2f036:"b7GrG","1beb501bad2a77ab":"5ygRS","54160fb760cf47b6":"2MF6I",b8fdd5e59791f323:"cfIox","2b6100c225ada6":"kiToe",fb00c1d39c9bf14c:"45J7X","93407030a6bacce1":"2QNq8","48ccfe93995f906":"9kaRM",bed47900de2f9889:"lPB2Z"}],bM30L:[function(e,t,i,r){var n=e("ff535db334027cb3"),s=e("d2af88b3a42b7d50"),a=e("a166328697ff9969"),o=e("ccb7079059953540"),h=e("5424850d1e2e873d"),c=e("61b2b23f28dc6ce7"),l=e("48ec8439e6a9901c"),d=e("96982b02e51db61c"),u=e("e084452184a62fe5").i2c,f=a("btoa"),p=o("".charAt),g=o("".charCodeAt),m=!!f&&!c(function(){return"aGk="!==f("hi")}),v=m&&!c(function(){f()}),y=m&&c(function(){return"bnVsbA=="!==f(null)}),b=m&&1!==f.length;n({global:!0,bind:!0,enumerable:!0,forced:!m||v||y||b},{btoa:function(e){if(d(arguments.length,1),m)return h(f,s,l(e));for(var t,i,r=l(e),n="",o=0,c=u;p(r,o)||(c="=",o%1);){if((i=g(r,o+=3/4))>255)throw new(a("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");n+=p(c,63&(t=t<<8|i)>>8-o%1*8)}return n}})},{ff535db334027cb3:"b7GrG",d2af88b3a42b7d50:"5ygRS",a166328697ff9969:"2MF6I",ccb7079059953540:"cfIox","5424850d1e2e873d":"kiToe","61b2b23f28dc6ce7":"45J7X","48ec8439e6a9901c":"2QNq8","96982b02e51db61c":"9kaRM",e084452184a62fe5:"lPB2Z"}],IWcld:[function(e,t,i,r){var n=e("f2983879ab6ef4f"),s=e("74a037ab8118876"),a=e("a3359ffcd052df79"),o=e("9e6862fbf1bc54d2"),h=e("833a1c6e8a10b1ff"),c=function(e){if(e&&e.forEach!==o)try{h(e,"forEach",o)}catch(t){e.forEach=o}};for(var l in s)s[l]&&c(n[l]&&n[l].prototype);c(a)},{f2983879ab6ef4f:"5ygRS","74a037ab8118876":"fDRDa",a3359ffcd052df79:"5sIhr","9e6862fbf1bc54d2":"lTQM4","833a1c6e8a10b1ff":"mcZBn"}],fDRDa:[function(e,t,i,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],"5sIhr":[function(e,t,i,r){var n=e("a6fc44eba1875331")("span").classList,s=n&&n.constructor&&n.constructor.prototype;t.exports=s===Object.prototype?void 0:s},{a6fc44eba1875331:"6Up9x"}],"8WBxe":[function(e,t,i,r){var n=e("c051336c9ece485c"),s=e("b1dd6223fec045b2"),a=e("2927608065790e8a"),o=e("107ef5eaf95c92b0"),h=e("2f02b421bbdb9eb4"),c=e("46e3db6eb678f758"),l=e("6a4d2091548e6557")("iterator"),d=o.values,u=function(e,t){if(e){if(e[l]!==d)try{h(e,l,d)}catch(t){e[l]=d}if(c(e,t,!0),s[t]){for(var i in o)if(e[i]!==o[i])try{h(e,i,o[i])}catch(t){e[i]=o[i]}}}};for(var f in s)u(n[f]&&n[f].prototype,f);u(a,"DOMTokenList")},{c051336c9ece485c:"5ygRS",b1dd6223fec045b2:"fDRDa","2927608065790e8a":"5sIhr","107ef5eaf95c92b0":"aF8mt","2f02b421bbdb9eb4":"mcZBn","46e3db6eb678f758":"ksXqH","6a4d2091548e6557":"eG9HO"}],e6jVu:[function(e,t,i,r){var n=e("3d0510e49183901c"),s=e("63b7b93fc4a7238a"),a=e("1c5b62f756d3eaff"),o=e("eb1c50ea6315321b"),h=e("4ca71918e5a2016a"),c=e("c21d001acfae7cd"),l=e("75fac16725379a32").f,d=e("b34fbc760b0520d4"),u=e("ed9170165790e778"),f=e("f6f97990397d9c00"),p=e("9b1e92218f8d993"),g=e("fdfe3ed8e9adb72c"),m=e("9c0ec21dd5e9a70b"),v=e("5a4b6c79c088bdfe"),y=e("b32d1eeacf68845c"),b=e("8ef37a97ffa6fa2e"),x=e("fc770dee153f9182"),E=e("617636ad1c3548bd"),T=e("391d43a74d1595a0"),A="DOMException",w="DATA_CLONE_ERR",S=s("Error"),C=s(A)||function(){try{new(s("MessageChannel")||a("worker_threads").MessageChannel)().port1.postMessage(new WeakMap)}catch(e){if(e.name===w&&25===e.code)return e.constructor}}(),I=C&&C.prototype,_=S.prototype,O=x.set,P=x.getterFor(A),M="stack"in new S(A),R=function(e){return f(y,e)&&y[e].m?y[e].c:0},L=function(){p(this,D);var e=arguments.length,t=v(e<1?void 0:arguments[0]),i=v(e<2?void 0:arguments[1],"Error"),r=R(i);if(O(this,{type:A,name:i,message:t,code:r}),E||(this.name=i,this.message=t,this.code=r),M){var n=new S(t);n.name=A,l(this,"stack",c(1,b(n.stack,1)))}},D=L.prototype=h(_),k=function(e){return{enumerable:!0,configurable:!0,get:e}},N=function(e){return k(function(){return P(this)[e]})};E&&(u(D,"code",N("code")),u(D,"message",N("message")),u(D,"name",N("name"))),l(D,"constructor",c(1,L));var F=o(function(){return!(new C instanceof S)}),B=F||o(function(){return _.toString!==m||"2: 1"!==String(new C(1,2))}),U=F||o(function(){return 25!==new C(1,"DataCloneError").code}),G=F||25!==C[w]||25!==I[w],V=T?B||U||G:F;n({global:!0,constructor:!0,forced:V},{DOMException:V?L:C});var Y=s(A),j=Y.prototype;for(var W in B&&(T||C===Y)&&d(j,"toString",m),U&&E&&C===Y&&u(j,"code",k(function(){return R(g(this).name)})),y)if(f(y,W)){var z=y[W],H=z.s,X=c(6,z.c);f(Y,H)||l(Y,H,X),f(j,H)||l(j,H,X)}},{"3d0510e49183901c":"b7GrG","63b7b93fc4a7238a":"2MF6I","1c5b62f756d3eaff":"73D5C",eb1c50ea6315321b:"45J7X","4ca71918e5a2016a":"gg5Dl",c21d001acfae7cd:"enYsZ","75fac16725379a32":"34YKB",b34fbc760b0520d4:"2UU83",ed9170165790e778:"l5KAt",f6f97990397d9c00:"45yko","9b1e92218f8d993":"cYIbs",fdfe3ed8e9adb72c:"5dGJN","9c0ec21dd5e9a70b":"gUZak","5a4b6c79c088bdfe":"2jDro",b32d1eeacf68845c:"jwbJK","8ef37a97ffa6fa2e":"guIMI",fc770dee153f9182:"fuP4a","617636ad1c3548bd":"dqiQp","391d43a74d1595a0":"lssMj"}],jwbJK:[function(e,t,i,r){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},{}],gXYN4:[function(e,t,i,r){var n=e("5538d4aa2e26797c"),s=e("15f622cde07e3e8f"),a=e("6dca64203ef6b4d1"),o=e("30cb5b59df4e77c6"),h=e("64c91a24ef31e303").f,c=e("a56ea2d80c8496ae"),l=e("e54ce0361d637752"),d=e("5e15de01309c5057"),u=e("fccd891af3c8103d"),f=e("2db1f0a6b3bd6dfd"),p=e("176edbe2885d9f01"),g=e("3f4d27281e93627e"),m=e("95f892709744ad29"),v="DOMException",y=a("Error"),b=a(v),x=function(){l(this,E);var e=arguments.length,t=u(e<1?void 0:arguments[0]),i=u(e<2?void 0:arguments[1],"Error"),r=new b(t,i),n=new y(t);return n.name=v,h(r,"stack",o(1,p(n.stack,1))),d(r,this,x),r},E=x.prototype=b.prototype,T="stack"in new y(v),A="stack"in new b(1,2),w=b&&g&&Object.getOwnPropertyDescriptor(s,v),S=!!w&&!(w.writable&&w.configurable),C=T&&!S&&!A;n({global:!0,constructor:!0,forced:m||C},{DOMException:C?x:b});var I=a(v),_=I.prototype;if(_.constructor!==I){for(var O in m||h(_,"constructor",o(1,I)),f)if(c(f,O)){var P=f[O],M=P.s;c(I,M)||h(I,M,o(6,P.c))}}},{"5538d4aa2e26797c":"b7GrG","15f622cde07e3e8f":"5ygRS","6dca64203ef6b4d1":"2MF6I","30cb5b59df4e77c6":"enYsZ","64c91a24ef31e303":"34YKB",a56ea2d80c8496ae:"45yko",e54ce0361d637752:"cYIbs","5e15de01309c5057":"kzdOP",fccd891af3c8103d:"2jDro","2db1f0a6b3bd6dfd":"jwbJK","176edbe2885d9f01":"guIMI","3f4d27281e93627e":"dqiQp","95f892709744ad29":"lssMj"}],dzmPI:[function(e,t,i,r){var n=e("db380432183a20e4"),s=e("9f1a1fb33df853f"),a="DOMException";s(n(a),a)},{db380432183a20e4:"2MF6I","9f1a1fb33df853f":"ksXqH"}],an3zb:[function(e,t,i,r){e("52e9b3eefbbce1ed"),e("292fa64716f5b39e")},{"52e9b3eefbbce1ed":"9ySMb","292fa64716f5b39e":"lOC7a"}],"9ySMb":[function(e,t,i,r){var n=e("79389288a80b279c"),s=e("e4d64249a0133d14"),a=e("84ba5ca62b8b14c9").clear;n({global:!0,bind:!0,enumerable:!0,forced:s.clearImmediate!==a},{clearImmediate:a})},{"79389288a80b279c":"b7GrG",e4d64249a0133d14:"5ygRS","84ba5ca62b8b14c9":"2zcFI"}],lOC7a:[function(e,t,i,r){var n=e("33581c362196ed1f"),s=e("503bb555249cad41"),a=e("4219ce460223bd08").set,o=e("738dc378e6a94c64"),h=s.setImmediate?o(a,!1):a;n({global:!0,bind:!0,enumerable:!0,forced:s.setImmediate!==h},{setImmediate:h})},{"33581c362196ed1f":"b7GrG","503bb555249cad41":"5ygRS","4219ce460223bd08":"2zcFI","738dc378e6a94c64":"1htTR"}],"1htTR":[function(e,t,i,r){var n,s=e("aa6765693e58a0fe"),a=e("a68ecfcbf29c46f6"),o=e("7087588d33667af2"),h=e("864edee099e8affb"),c=e("3a3a5a2cfab86f21"),l=e("cff2c830bdea4f24"),d=e("58a74f00cee1ac64"),u=s.Function,f=/MSIE .\./.test(c)||"BUN"===h&&((n=s.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));t.exports=function(e,t){var i=t?2:1;return f?function(r,n){var s=d(arguments.length,1)>i,h=o(r)?r:u(r),c=s?l(arguments,i):[],f=s?function(){a(h,this,c)}:h;return t?e(f,n):e(f)}:e}},{aa6765693e58a0fe:"5ygRS",a68ecfcbf29c46f6:"72fZp","7087588d33667af2":"2Pprm","864edee099e8affb":"iU9O4","3a3a5a2cfab86f21":"cXzrn",cff2c830bdea4f24:"lUArJ","58a74f00cee1ac64":"9kaRM"}],"8bxeS":[function(e,t,i,r){var n=e("6f7278673cd963e5"),s=e("4f851b5e5b332d48"),a=e("b80db4539abf09d9"),o=e("889c274f5e23b39"),h=e("15983ab5c2fbc059"),c=e("c36112b7edfed618"),l=e("74b26aee0ae17038");n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:c(function(){return l&&1!==Object.getOwnPropertyDescriptor(s,"queueMicrotask").value.length})},{queueMicrotask:function(e){h(arguments.length,1),a(o(e))}})},{"6f7278673cd963e5":"b7GrG","4f851b5e5b332d48":"5ygRS",b80db4539abf09d9:"hEzOI","889c274f5e23b39":"3m7Aa","15983ab5c2fbc059":"9kaRM",c36112b7edfed618:"45J7X","74b26aee0ae17038":"dqiQp"}],"31pHR":[function(e,t,i,r){var n=e("9a97a510092b7d72"),s=e("bfbbd7ba4e233a15"),a=e("dadc1a7ad6bec203"),o=e("8d7f4453ff13e12d"),h=TypeError,c=Object.defineProperty,l=s.self!==s;try{if(o){var d=Object.getOwnPropertyDescriptor(s,"self");!l&&d&&d.get&&d.enumerable||a(s,"self",{get:function(){return s},set:function(e){if(this!==s)throw new h("Illegal invocation");c(s,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else n({global:!0,simple:!0,forced:l},{self:s})}catch(e){}},{"9a97a510092b7d72":"b7GrG",bfbbd7ba4e233a15:"5ygRS",dadc1a7ad6bec203:"l5KAt","8d7f4453ff13e12d":"dqiQp"}],bezSF:[function(e,t,i,r){var n=e("46a94df747165a08"),s=e("3e04e2f4e7f87918"),a=e("6e1ac61205678af6"),o=e("c95079dcb9321b5f"),h=e("b30c4be405e55cd1"),c=e("d2759cd31961ec5f"),l=e("b28324366ed35694"),d=e("51b2af7ff9e786d2"),u=e("dbc30081dcfdeb22"),f=e("88e551d63448111"),p=e("748c1e7b84b5d0b6"),g=e("9b6dd1d113f04b93"),m=e("5236c862010bd4cc"),v=e("47c7a4ba5ff3ba9"),y=e("ea5539f8b43d1a17"),b=e("64004e8c5f5d0ef3"),x=e("9971f98ded0a259"),E=e("66bbcc11f1e948a"),T=e("a9cdcd120539bbe8"),A=e("be347fa71d60a5eb"),w=e("4868328f7e546c6"),S=e("1e6645abd1a2b421"),C=e("d0363fc9d9cfdd8c"),I=e("3275f5da850ac759"),_=e("3feae2e57ec01a12"),O=e("9575a353cf8e050f"),P=e("a675c54ae6442127"),M=a.Object,R=a.Array,L=a.Date,D=a.Error,k=a.TypeError,N=a.PerformanceMark,F=o("DOMException"),B=S.Map,U=S.has,G=S.get,V=S.set,Y=C.Set,j=C.add,W=C.has,z=o("Object","keys"),H=h([].push),X=h((!0).valueOf),q=h(1.1.valueOf),K=h("".valueOf),J=h(L.prototype.getTime),Q=l("structuredClone"),$="DataCloneError",Z="Transferring",ee=function(e){return!c(function(){var t=new a.Set([7]),i=e(t),r=e(M(7));return i===t||!i.has(7)||!p(r)||7!=+r})&&e},et=function(e,t){return!c(function(){var i=new t,r=e({a:i,b:i});return!(r&&r.a===r.b&&r.a instanceof t&&r.a.stack===i.stack)})},ei=a.structuredClone,er=n||!et(ei,D)||!et(ei,F)||!!c(function(){var e=ei(new a.AggregateError([1],Q,{cause:3}));return"AggregateError"!==e.name||1!==e.errors[0]||e.message!==Q||3!==e.cause}),en=!ei&&ee(function(e){return new N(Q,{detail:e}).detail}),es=ee(ei)||en,ea=function(e){throw new F("Uncloneable type: "+e,$)},eo=function(e,t){throw new F((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",$)},eh=function(e,t){return es||eo(t),es(e)},ec=function(){var e;try{e=new a.DataTransfer}catch(t){try{e=new a.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null},el=function(e,t,i){if(U(t,e))return G(t,e);if("SharedArrayBuffer"===(i||y(e)))r=es?es(e):e;else{var r,n,s,o,h,c,l=a.DataView;l||d(e.slice)||eo("ArrayBuffer");try{if(d(e.slice)&&!e.resizable)r=e.slice(0);else for(c=0,n=e.byteLength,s=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,r=new ArrayBuffer(n,s),o=new l(e),h=new l(r);c<n;c++)h.setUint8(c,o.getUint8(c))}catch(e){throw new F("ArrayBuffer is detached",$)}}return V(t,e,r),r},ed=function(e,t,i,r,n){var s=a[t];return p(s)||eo(t),new s(el(e.buffer,n),i,r)},eu=function(e,t){if(g(e)&&ea("Symbol"),!p(e))return e;if(t){if(U(t,e))return G(t,e)}else t=new B;var i,r,n,s,h,c,l,u,f=y(e);switch(f){case"Array":n=R(T(e));break;case"Object":n={};break;case"Map":n=new B;break;case"Set":n=new Y;break;case"RegExp":n=new RegExp(e.source,w(e));break;case"Error":switch(r=e.name){case"AggregateError":n=new(o(r))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":n=new(o(r));break;case"CompileError":case"LinkError":case"RuntimeError":n=new(o("WebAssembly",r));break;default:n=new D}break;case"DOMException":n=new F(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":n=el(e,t,f);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":c="DataView"===f?e.byteLength:e.length,n=ed(e,f,e.byteOffset,c,t);break;case"DOMQuad":try{n=new DOMQuad(eu(e.p1,t),eu(e.p2,t),eu(e.p3,t),eu(e.p4,t))}catch(t){n=eh(e,f)}break;case"File":if(es)try{n=es(e),y(n)!==f&&(n=void 0)}catch(e){}if(!n)try{n=new File([e],e.name,e)}catch(e){}n||eo(f);break;case"FileList":if(s=ec()){for(h=0,c=T(e);h<c;h++)s.items.add(eu(e[h],t));n=s.files}else n=eh(e,f);break;case"ImageData":try{n=new ImageData(eu(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){n=eh(e,f)}break;default:if(es)n=es(e);else switch(f){case"BigInt":n=M(e.valueOf());break;case"Boolean":n=M(X(e));break;case"Number":n=M(q(e));break;case"String":n=M(K(e));break;case"Date":n=new L(J(e));break;case"Blob":try{n=e.slice(0,e.size,e.type)}catch(e){eo(f)}break;case"DOMPoint":case"DOMPointReadOnly":i=a[f];try{n=i.fromPoint?i.fromPoint(e):new i(e.x,e.y,e.z,e.w)}catch(e){eo(f)}break;case"DOMRect":case"DOMRectReadOnly":i=a[f];try{n=i.fromRect?i.fromRect(e):new i(e.x,e.y,e.width,e.height)}catch(e){eo(f)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=a[f];try{n=i.fromMatrix?i.fromMatrix(e):new i(e)}catch(e){eo(f)}break;case"AudioData":case"VideoFrame":d(e.clone)||eo(f);try{n=e.clone()}catch(e){ea(f)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":eo(f);default:ea(f)}}switch(V(t,e,n),f){case"Array":case"Object":for(h=0,c=T(l=z(e));h<c;h++)u=l[h],x(n,u,eu(e[u],t));break;case"Map":e.forEach(function(e,i){V(n,eu(i,t),eu(e,t))});break;case"Set":e.forEach(function(e){j(n,eu(e,t))});break;case"Error":E(n,"message",eu(e.message,t)),b(e,"cause")&&E(n,"cause",eu(e.cause,t)),"AggregateError"===r?n.errors=eu(e.errors,t):"SuppressedError"===r&&(n.error=eu(e.error,t),n.suppressed=eu(e.suppressed,t));case"DOMException":O&&E(n,"stack",eu(e.stack,t))}return n},ef=function(e,t){if(!p(e))throw new k("Transfer option cannot be converted to a sequence");var i,r,n,s,o,h=[];m(e,function(e){H(h,v(e))});for(var c=0,l=T(h),f=new Y;c<l;){if("ArrayBuffer"===(r=y(i=h[c++]))?W(f,i):U(t,i))throw new F("Duplicate transferable",$);if("ArrayBuffer"===r){j(f,i);continue}if(P)s=ei(i,{transfer:[i]});else switch(r){case"ImageBitmap":u(n=a.OffscreenCanvas)||eo(r,Z);try{(o=new n(i.width,i.height)).getContext("bitmaprenderer").transferFromImageBitmap(i),s=o.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":d(i.clone)&&d(i.close)||eo(r,Z);try{s=i.clone(),i.close()}catch(e){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":eo(r,Z)}if(void 0===s)throw new F("This object cannot be transferred: "+r,$);V(t,i,s)}return f},ep=function(e){I(e,function(e){P?es(e,{transfer:[e]}):d(e.transfer)?e.transfer():_?_(e):eo("ArrayBuffer",Z)})};s({global:!0,enumerable:!0,sham:!P,forced:er},{structuredClone:function(e){var t,i,r=A(arguments.length,1)>1&&!f(arguments[1])?v(arguments[1]):void 0,n=r?r.transfer:void 0;void 0!==n&&(i=ef(n,t=new B));var s=eu(e,t);return i&&ep(i),s}})},{"46a94df747165a08":"lssMj","3e04e2f4e7f87918":"b7GrG","6e1ac61205678af6":"5ygRS",c95079dcb9321b5f:"2MF6I",b30c4be405e55cd1:"cfIox",d2759cd31961ec5f:"45J7X",b28324366ed35694:"8wvVb","51b2af7ff9e786d2":"2Pprm",dbc30081dcfdeb22:"7c2zg","88e551d63448111":"9RtqE","748c1e7b84b5d0b6":"adFpz","9b6dd1d113f04b93":"izbIT","5236c862010bd4cc":"5ZCpM","47c7a4ba5ff3ba9":"5dGJN",ea5539f8b43d1a17:"bAgVp","64004e8c5f5d0ef3":"45yko","9971f98ded0a259":"fb5iK","66bbcc11f1e948a":"mcZBn",a9cdcd120539bbe8:"fuf58",be347fa71d60a5eb:"9kaRM","4868328f7e546c6":"5f4vy","1e6645abd1a2b421":"9XOsT",d0363fc9d9cfdd8c:"iA4Ll","3275f5da850ac759":"7gyYI","3feae2e57ec01a12":"gUreV","9575a353cf8e050f":"2wtir",a675c54ae6442127:"3FbCI"}],a80Su:[function(e,t,i,r){e("9453fdd92aad151a"),e("c303d63f9a1c5be5")},{"9453fdd92aad151a":"94LHF",c303d63f9a1c5be5:"dCV8D"}],"94LHF":[function(e,t,i,r){var n=e("a9d1c09227b9596"),s=e("8f238f56192273e4"),a=e("87cb4ec54c39341e")(s.setInterval,!0);n({global:!0,bind:!0,forced:s.setInterval!==a},{setInterval:a})},{a9d1c09227b9596:"b7GrG","8f238f56192273e4":"5ygRS","87cb4ec54c39341e":"1htTR"}],dCV8D:[function(e,t,i,r){var n=e("6060be99991be48a"),s=e("f9d851aba3178e79"),a=e("ae4294be5adb39a1")(s.setTimeout,!0);n({global:!0,bind:!0,forced:s.setTimeout!==a},{setTimeout:a})},{"6060be99991be48a":"b7GrG",f9d851aba3178e79:"5ygRS",ae4294be5adb39a1:"1htTR"}],"9ZF8O":[function(e,t,i,r){e("99544a7edcd747a5")},{"99544a7edcd747a5":"GKr8g"}],GKr8g:[function(e,t,i,r){e("19928ff2abfc3536");var n,s=e("d446e2097c7c2b23"),a=e("cd0458003d61a323"),o=e("592c96d240ad401c"),h=e("2e7550752ce99b71"),c=e("c128b8cb3e38a436"),l=e("9ee66bece60e18c5"),d=e("763c39a8b521ff54"),u=e("1c9277bbea264bc7"),f=e("f0dd676601f7cb0b"),p=e("deee7b2fe3c1e96f"),g=e("ff3437c5b86d6c26"),m=e("3c2f033d1a197fd6"),v=e("9fdfccae2d327739"),y=e("8ba5b2695179827").codeAt,b=e("23751b8f28dcd37"),x=e("5f808b1954b24403"),E=e("f969f30083a50975"),T=e("b15c5243fe0e0f6"),A=e("e8b262dfe3e4c989"),w=e("9a3ca045fbb43248"),S=w.set,C=w.getterFor("URL"),I=A.URLSearchParams,_=A.getState,O=h.URL,P=h.TypeError,M=h.parseInt,R=Math.floor,L=Math.pow,D=l("".charAt),k=l(/./.exec),N=l([].join),F=l(1.1.toString),B=l([].pop),U=l([].push),G=l("".replace),V=l([].shift),Y=l("".split),j=l("".slice),W=l("".toLowerCase),z=l([].unshift),H="Invalid scheme",X="Invalid host",q="Invalid port",K=/[a-z]/i,J=/[\d+-.a-z]/i,Q=/\d/,$=/^0x/i,Z=/^[0-7]+$/,ee=/^\d+$/,et=/^[\da-f]+$/i,ei=/[\0\t\n\r #%/:<>?@[\\\]^|]/,er=/[\0\t\n\r #/:<>?@[\\\]^|]/,en=/^[\u0000-\u0020]+/,es=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ea=/[\t\n\r]/g,eo=function(e){var t,i,r,n,s,a,o,h=Y(e,".");if(h.length&&""===h[h.length-1]&&h.length--,(t=h.length)>4)return e;for(r=0,i=[];r<t;r++){if(""===(n=h[r]))return e;if(s=10,n.length>1&&"0"===D(n,0)&&(s=k($,n)?16:8,n=j(n,8===s?1:2)),""===n)a=0;else{if(!k(10===s?ee:8===s?Z:et,n))return e;a=M(n,s)}U(i,a)}for(r=0;r<t;r++)if(a=i[r],r===t-1){if(a>=L(256,5-t))return null}else if(a>255)return null;for(r=0,o=B(i);r<i.length;r++)o+=i[r]*L(256,3-r);return o},eh=function(e){var t,i,r,n,s,a,o,h=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,u=function(){return D(e,d)};if(":"===u()){if(":"!==D(e,1))return;d+=2,l=++c}for(;u();){if(8===c)return;if(":"===u()){if(null!==l)return;d++,l=++c;continue}for(t=i=0;i<4&&k(et,u());)t=16*t+M(u(),16),d++,i++;if("."===u()){if(0===i||(d-=i,c>6))return;for(r=0;u();){if(n=null,r>0)if("."!==u()||!(r<4))return;else d++;if(!k(Q,u()))return;for(;k(Q,u());){if(s=M(u(),10),null===n)n=s;else{if(0===n)return;n=10*n+s}if(n>255)return;d++}h[c]=256*h[c]+n,(2==++r||4===r)&&c++}if(4!==r)return;break}if(":"===u()){if(d++,!u())return}else if(u())return;h[c++]=t}if(null!==l)for(a=c-l,c=7;0!==c&&a>0;)o=h[c],h[c--]=h[l+a-1],h[l+--a]=o;else if(8!==c)return;return h},ec=function(e){for(var t=null,i=1,r=null,n=0,s=0;s<8;s++)0!==e[s]?(n>i&&(t=r,i=n),r=null,n=0):(null===r&&(r=s),++n);return n>i?r:t},el=function(e){var t,i,r,n;if("number"==typeof e){for(i=0,t=[];i<4;i++)z(t,e%256),e=R(e/256);return N(t,".")}if("object"==typeof e){for(i=0,t="",r=ec(e);i<8;i++)(!n||0!==e[i])&&(n&&(n=!1),r===i?(t+=i?":":"::",n=!0):(t+=F(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},ed={},eu=g({},ed,{" ":1,'"':1,"<":1,">":1,"`":1}),ef=g({},eu,{"#":1,"?":1,"{":1,"}":1}),ep=g({},ef,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),eg=function(e,t){var i=y(e,0);return i>32&&i<127&&!p(t,e)?e:encodeURIComponent(e)},em={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ev=function(e,t){var i;return 2===e.length&&k(K,D(e,0))&&(":"===(i=D(e,1))||!t&&"|"===i)},ey=function(e){var t;return e.length>1&&ev(j(e,0,2))&&(2===e.length||"/"===(t=D(e,2))||"\\"===t||"?"===t||"#"===t)},eb={},ex={},eE={},eT={},eA={},ew={},eS={},eC={},eI={},e_={},eO={},eP={},eM={},eR={},eL={},eD={},ek={},eN={},eF={},eB={},eU={},eG=function(e,t,i){var r,n,s,a=x(e);if(t){if(n=this.parse(a))throw new P(n);this.searchParams=null}else{if(void 0!==i&&(r=new eG(i,!0)),n=this.parse(a,null,r))throw new P(n);(s=_(new I)).bindURL(this),this.searchParams=s}};eG.prototype={type:"URL",parse:function(e,t,i){var r=t||eb,s=0,a="",o=!1,h=!1,c=!1;for(e=x(e),t||(this.scheme="",this.username="",this.password="",this.host=null,this.port=null,this.path=[],this.query=null,this.fragment=null,this.cannotBeABaseURL=!1,e=G(e,en,""),e=G(e,es,"$1")),l=m(e=G(e,ea,""));s<=l.length;){switch(d=l[s],r){case eb:if(d&&k(K,d))a+=W(d),r=ex;else{if(t)return H;r=eE;continue}break;case ex:if(d&&(k(J,d)||"+"===d||"-"===d||"."===d))a+=W(d);else if(":"===d){if(t&&(this.isSpecial()!==p(em,a)||"file"===a&&(this.includesCredentials()||null!==this.port)||"file"===this.scheme&&!this.host))return;if(this.scheme=a,t){this.isSpecial()&&em[this.scheme]===this.port&&(this.port=null);return}a="","file"===this.scheme?r=eR:this.isSpecial()&&i&&i.scheme===this.scheme?r=eT:this.isSpecial()?r=eC:"/"===l[s+1]?(r=eA,s++):(this.cannotBeABaseURL=!0,U(this.path,""),r=eF)}else{if(t)return H;a="",r=eE,s=0;continue}break;case eE:if(!i||i.cannotBeABaseURL&&"#"!==d)return H;if(i.cannotBeABaseURL&&"#"===d){this.scheme=i.scheme,this.path=v(i.path),this.query=i.query,this.fragment="",this.cannotBeABaseURL=!0,r=eU;break}r="file"===i.scheme?eR:ew;continue;case eT:if("/"===d&&"/"===l[s+1])r=eI,s++;else{r=ew;continue}break;case eA:if("/"===d){r=e_;break}r=eN;continue;case ew:if(this.scheme=i.scheme,d===n)this.username=i.username,this.password=i.password,this.host=i.host,this.port=i.port,this.path=v(i.path),this.query=i.query;else if("/"===d||"\\"===d&&this.isSpecial())r=eS;else if("?"===d)this.username=i.username,this.password=i.password,this.host=i.host,this.port=i.port,this.path=v(i.path),this.query="",r=eB;else if("#"===d)this.username=i.username,this.password=i.password,this.host=i.host,this.port=i.port,this.path=v(i.path),this.query=i.query,this.fragment="",r=eU;else{this.username=i.username,this.password=i.password,this.host=i.host,this.port=i.port,this.path=v(i.path),this.path.length--,r=eN;continue}break;case eS:if(this.isSpecial()&&("/"===d||"\\"===d))r=eI;else if("/"===d)r=e_;else{this.username=i.username,this.password=i.password,this.host=i.host,this.port=i.port,r=eN;continue}break;case eC:if(r=eI,"/"!==d||"/"!==D(a,s+1))continue;s++;break;case eI:if("/"!==d&&"\\"!==d){r=e_;continue}break;case e_:if("@"===d){o&&(a="%40"+a),o=!0,u=m(a);for(var l,d,u,f,g,y,b=0;b<u.length;b++){var E=u[b];if(":"===E&&!c){c=!0;continue}var T=eg(E,ep);c?this.password+=T:this.username+=T}a=""}else if(d===n||"/"===d||"?"===d||"#"===d||"\\"===d&&this.isSpecial()){if(o&&""===a)return"Invalid authority";s-=m(a).length+1,a="",r=eO}else a+=d;break;case eO:case eP:if(t&&"file"===this.scheme){r=eD;continue}if(":"!==d||h)if(d===n||"/"===d||"?"===d||"#"===d||"\\"===d&&this.isSpecial()){if(this.isSpecial()&&""===a)return X;if(t&&""===a&&(this.includesCredentials()||null!==this.port))return;if(f=this.parseHost(a))return f;if(a="",r=ek,t)return;continue}else"["===d?h=!0:"]"===d&&(h=!1),a+=d;else{if(""===a)return X;if(f=this.parseHost(a))return f;if(a="",r=eM,t===eP)return}break;case eM:if(k(Q,d))a+=d;else{if(!(d===n||"/"===d||"?"===d||"#"===d||"\\"===d&&this.isSpecial())&&!t)return q;if(""!==a){var A=M(a,10);if(A>65535)return q;this.port=this.isSpecial()&&A===em[this.scheme]?null:A,a=""}if(t)return;r=ek;continue}break;case eR:if(this.scheme="file","/"===d||"\\"===d)r=eL;else if(i&&"file"===i.scheme)switch(d){case n:this.host=i.host,this.path=v(i.path),this.query=i.query;break;case"?":this.host=i.host,this.path=v(i.path),this.query="",r=eB;break;case"#":this.host=i.host,this.path=v(i.path),this.query=i.query,this.fragment="",r=eU;break;default:ey(N(v(l,s),""))||(this.host=i.host,this.path=v(i.path),this.shortenPath()),r=eN;continue}else{r=eN;continue}break;case eL:if("/"===d||"\\"===d){r=eD;break}i&&"file"===i.scheme&&!ey(N(v(l,s),""))&&(ev(i.path[0],!0)?U(this.path,i.path[0]):this.host=i.host),r=eN;continue;case eD:if(d===n||"/"===d||"\\"===d||"?"===d||"#"===d){if(!t&&ev(a))r=eN;else if(""===a){if(this.host="",t)return;r=ek}else{if(f=this.parseHost(a))return f;if("localhost"===this.host&&(this.host=""),t)return;a="",r=ek}continue}a+=d;break;case ek:if(this.isSpecial()){if(r=eN,"/"!==d&&"\\"!==d)continue}else if(t||"?"!==d)if(t||"#"!==d){if(d!==n&&(r=eN,"/"!==d))continue}else this.fragment="",r=eU;else this.query="",r=eB;break;case eN:if(d===n||"/"===d||"\\"===d&&this.isSpecial()||!t&&("?"===d||"#"===d)){if(".."===(g=W(g=a))||"%2e."===g||".%2e"===g||"%2e%2e"===g?(this.shortenPath(),"/"===d||"\\"===d&&this.isSpecial()||U(this.path,"")):"."===(y=a)||"%2e"===W(y)?"/"===d||"\\"===d&&this.isSpecial()||U(this.path,""):("file"===this.scheme&&!this.path.length&&ev(a)&&(this.host&&(this.host=""),a=D(a,0)+":"),U(this.path,a)),a="","file"===this.scheme&&(d===n||"?"===d||"#"===d))for(;this.path.length>1&&""===this.path[0];)V(this.path);"?"===d?(this.query="",r=eB):"#"===d&&(this.fragment="",r=eU)}else a+=eg(d,ef);break;case eF:"?"===d?(this.query="",r=eB):"#"===d?(this.fragment="",r=eU):d!==n&&(this.path[0]+=eg(d,ed));break;case eB:t||"#"!==d?d!==n&&("'"===d&&this.isSpecial()?this.query+="%27":"#"===d?this.query+="%23":this.query+=eg(d,ed)):(this.fragment="",r=eU);break;case eU:d!==n&&(this.fragment+=eg(d,eu))}s++}},parseHost:function(e){var t,i,r;if("["===D(e,0)){if("]"!==D(e,e.length-1)||!(t=eh(j(e,1,-1))))return X;this.host=t}else if(this.isSpecial()){if(k(ei,e=b(e))||null===(t=eo(e)))return X;this.host=t}else{if(k(er,e))return X;for(r=0,t="",i=m(e);r<i.length;r++)t+=eg(i[r],ed);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(em,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&("file"!==this.scheme||1!==t||!ev(e[0],!0))&&e.length--},serialize:function(){var e=this.scheme,t=this.username,i=this.password,r=this.host,n=this.port,s=this.path,a=this.query,o=this.fragment,h=e+":";return null!==r?(h+="//",this.includesCredentials()&&(h+=t+(i?":"+i:"")+"@"),h+=el(r),null!==n&&(h+=":"+n)):"file"===e&&(h+="//"),h+=this.cannotBeABaseURL?s[0]:s.length?"/"+N(s,"/"):"",null!==a&&(h+="?"+a),null!==o&&(h+="#"+o),h},setHref:function(e){var t=this.parse(e);if(t)throw new P(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new eV(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+el(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(x(e)+":",eb)},getUsername:function(){return this.username},setUsername:function(e){var t=m(x(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=eg(t[i],ep)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(x(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=eg(t[i],ep)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?el(e):el(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,eO)},getHostname:function(){var e=this.host;return null===e?"":el(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,eP)},getPort:function(){var e=this.port;return null===e?"":x(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=x(e))?this.port=null:this.parse(e,eM))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+N(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,ek))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=x(e))?this.query=null:("?"===D(e,0)&&(e=j(e,1)),this.query="",this.parse(e,eB)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(""===(e=x(e))){this.fragment=null;return}"#"===D(e,0)&&(e=j(e,1)),this.fragment="",this.parse(e,eU)},update:function(){this.query=this.searchParams.serialize()||null}};var eV=function(e){var t=f(this,eY),i=T(arguments.length,1)>1?arguments[1]:void 0,r=S(t,new eG(e,!1,i));a||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},eY=eV.prototype,ej=function(e,t){return{get:function(){return C(this)[e]()},set:t&&function(e){return C(this)[t](e)},configurable:!0,enumerable:!0}};if(a&&(u(eY,"href",ej("serialize","setHref")),u(eY,"origin",ej("getOrigin")),u(eY,"protocol",ej("getProtocol","setProtocol")),u(eY,"username",ej("getUsername","setUsername")),u(eY,"password",ej("getPassword","setPassword")),u(eY,"host",ej("getHost","setHost")),u(eY,"hostname",ej("getHostname","setHostname")),u(eY,"port",ej("getPort","setPort")),u(eY,"pathname",ej("getPathname","setPathname")),u(eY,"search",ej("getSearch","setSearch")),u(eY,"searchParams",ej("getSearchParams")),u(eY,"hash",ej("getHash","setHash"))),d(eY,"toJSON",function(){return C(this).serialize()},{enumerable:!0}),d(eY,"toString",function(){return C(this).serialize()},{enumerable:!0}),O){var eW=O.createObjectURL,ez=O.revokeObjectURL;eW&&d(eV,"createObjectURL",c(eW,O)),ez&&d(eV,"revokeObjectURL",c(ez,O))}E(eV,"URL"),s({global:!0,constructor:!0,forced:!o,sham:!a},{URL:eV})},{"19928ff2abfc3536":"asjuk",d446e2097c7c2b23:"b7GrG",cd0458003d61a323:"dqiQp","592c96d240ad401c":"9qrxy","2e7550752ce99b71":"5ygRS",c128b8cb3e38a436:"gWc3u","9ee66bece60e18c5":"cfIox","763c39a8b521ff54":"2UU83","1c9277bbea264bc7":"l5KAt",f0dd676601f7cb0b:"cYIbs",deee7b2fe3c1e96f:"45yko",ff3437c5b86d6c26:"QzhpP","3c2f033d1a197fd6":"7utuf","9fdfccae2d327739":"lUArJ","8ba5b2695179827":"kaJ9P","23751b8f28dcd37":"6lL9p","5f808b1954b24403":"2QNq8",f969f30083a50975:"ksXqH",b15c5243fe0e0f6:"9kaRM",e8b262dfe3e4c989:"111Rs","9a3ca045fbb43248":"fuP4a"}],"9qrxy":[function(e,t,i,r){var n=e("b638e4b55492b349"),s=e("d3a18943af316a4c"),a=e("f39eaf2672eb61e1"),o=e("f816319c57ebd10b"),h=s("iterator");t.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach(function(e,i){t.delete("b"),r+=i+e}),i.delete("a",2),i.delete("b",void 0),o&&(!e.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!t.size&&(o||!a)||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[h]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("https://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})},{b638e4b55492b349:"45J7X",d3a18943af316a4c:"eG9HO",f39eaf2672eb61e1:"dqiQp",f816319c57ebd10b:"lssMj"}],"6lL9p":[function(e,t,i,r){var n=e("5fc1d380e4ee310c"),s=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",h=RangeError,c=n(a.exec),l=Math.floor,d=String.fromCharCode,u=n("".charCodeAt),f=n([].join),p=n([].push),g=n("".replace),m=n("".split),v=n("".toLowerCase),y=function(e){for(var t=[],i=0,r=e.length;i<r;){var n=u(e,i++);if(n>=55296&&n<=56319&&i<r){var s=u(e,i++);(64512&s)==56320?p(t,((1023&n)<<10)+(1023&s)+65536):(p(t,n),i--)}else p(t,n)}return t},b=function(e){return e+22+75*(e<26)},x=function(e,t,i){var r=0;for(e=i?l(e/700):e>>1,e+=l(e/t);e>455;)e=l(e/35),r+=36;return l(r+36*e/(e+38))},E=function(e){var t,i,r=[],n=(e=y(e)).length,s=128,a=0,c=72;for(t=0;t<e.length;t++)(i=e[t])<128&&p(r,d(i));var u=r.length,g=u;for(u&&p(r,"-");g<n;){var m=0x7fffffff;for(t=0;t<e.length;t++)(i=e[t])>=s&&i<m&&(m=i);var v=g+1;if(m-s>l((0x7fffffff-a)/v))throw new h(o);for(a+=(m-s)*v,s=m,t=0;t<e.length;t++){if((i=e[t])<s&&++a>0x7fffffff)throw new h(o);if(i===s){for(var E=a,T=36;;){var A=T<=c?1:T>=c+26?26:T-c;if(E<A)break;var w=E-A,S=36-A;p(r,d(b(A+w%S))),E=l(w/S),T+=36}p(r,d(b(E))),c=x(a,v,g===u),a=0,g++}}a++,s++}return f(r,"")};t.exports=function(e){var t,i,r=[],n=m(g(v(e),a,"."),".");for(t=0;t<n.length;t++)p(r,c(s,i=n[t])?"xn--"+E(i):i);return f(r,".")}},{"5fc1d380e4ee310c":"cfIox"}],"111Rs":[function(e,t,i,r){e("12e7a75121005a18"),e("aed1dbd908154980");var n=e("2c283453b2df07f7"),s=e("f8300b17f61c07ea"),a=e("c6afc8e42ff4d861"),o=e("c5226e6ac6c1a4ca"),h=e("c70bfc3d71513918"),c=e("a30c0c0ecacbf883"),l=e("9dc980ea97e54f2d"),d=e("34e5e214071de9f5"),u=e("d5c866a8dfde6bfe"),f=e("cfb67c7a1a4f1af9"),p=e("f0c2290e210049d5"),g=e("c7a2f88a5440a541"),m=e("fb2d9f4ac91c2856"),v=e("5e8fcf76ef17aca5"),y=e("486653683495e4a1"),b=e("34563d35f35f9929"),x=e("b866aa0bde936df4"),E=e("b5970b9126e1d395"),T=e("71cd06e9ca4a93a2"),A=e("7e16c364467ce62d"),w=e("9a0912d2261bbada"),S=e("9d062cdf188403bf"),C=e("1caa2aad22025751"),I=e("bf766970034bde82"),_=e("c6d4d2a85cdef35a"),O=e("6668155f748c33e9"),P=e("982e5845e606dff7"),M=e("9a407fe1b80ba6f5"),R=e("778323e4214f089d"),L=e("83b87fb1800baf72"),D=R("iterator"),k="URLSearchParams",N=k+"Iterator",F=v.set,B=v.getterFor(k),U=v.getterFor(N),G=a("fetch"),V=a("Request"),Y=a("Headers"),j=V&&V.prototype,W=Y&&Y.prototype,z=s.TypeError,H=s.encodeURIComponent,X=String.fromCharCode,q=o("String","fromCodePoint"),K=parseInt,J=c("".charAt),Q=c([].join),$=c([].push),Z=c("".replace),ee=c([].shift),et=c([].splice),ei=c("".split),er=c("".slice),en=c(/./.exec),es=/\+/g,ea=/^[0-9a-f]+$/i,eo=function(e,t){var i=er(e,t,t+2);return en(ea,i)?K(i,16):NaN},eh=function(e){for(var t=0,i=128;i>0&&(e&i)!=0;i>>=1)t++;return t},ec=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},el=function(e){for(var t=(e=Z(e,es," ")).length,i="",r=0;r<t;){var n=J(e,r);if("%"===n){if("%"===J(e,r+1)||r+3>t){i+="%",r++;continue}var s=eo(e,r+1);if(s!=s){i+=n,r++;continue}r+=2;var a=eh(s);if(0===a)n=X(s);else{if(1===a||a>4){i+="ï¿½",r++;continue}for(var o=[s],h=1;h<a&&!(++r+3>t)&&"%"===J(e,r);){var c=eo(e,r+1);if(c!=c){r+=3;break}if(c>191||c<128)break;$(o,c),r+=2,h++}if(o.length!==a){i+="ï¿½";continue}var l=ec(o);null===l?i+="ï¿½":n=q(l)}}i+=n,r++}return i},ed=/[!'()~]|%20/g,eu={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ef=function(e){return eu[e]},ep=function(e){return Z(H(e),ed,ef)},eg=m(function(e,t){F(this,{type:N,target:B(e).entries,index:0,kind:t})},k,function(){var e=U(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=null,P(void 0,!0);var r=t[i];switch(e.kind){case"keys":return P(r.key,!1);case"values":return P(r.value,!1)}return P([r.key,r.value],!1)},!0),em=function(e){this.entries=[],this.url=null,void 0!==e&&(w(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===J(e,0)?er(e,1):e:S(e)))};em.prototype={type:k,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,r,n,s,a,o,c=this.entries,l=O(e);if(l)for(i=(t=_(e,l)).next;!(r=h(i,t)).done;){if((a=h(s=(n=_(A(r.value))).next,n)).done||(o=h(s,n)).done||!h(s,n).done)throw new z("Expected sequence with length 2");$(c,{key:S(a.value),value:S(o.value)})}else for(var d in e)x(e,d)&&$(c,{key:d,value:S(e[d])})},parseQuery:function(e){if(e)for(var t,i,r=this.entries,n=ei(e,"&"),s=0;s<n.length;)(t=n[s++]).length&&$(r,{key:el(ee(i=ei(t,"="))),value:el(Q(i,"="))})},serialize:function(){for(var e,t=this.entries,i=[],r=0;r<t.length;)$(i,ep((e=t[r++]).key)+"="+ep(e.value));return Q(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ev=function(){y(this,ey);var e=arguments.length>0?arguments[0]:void 0,t=F(this,new em(e));l||(this.size=t.entries.length)},ey=ev.prototype;if(p(ey,{append:function(e,t){var i=B(this);M(arguments.length,2),$(i.entries,{key:S(e),value:S(t)}),!l&&this.size++,i.updateURL()},delete:function(e){for(var t=B(this),i=M(arguments.length,1),r=t.entries,n=S(e),s=i<2?void 0:arguments[1],a=void 0===s?s:S(s),o=0;o<r.length;){var h=r[o];if(h.key===n&&(void 0===a||h.value===a)){if(et(r,o,1),void 0!==a)break}else o++}l||(this.size=r.length),t.updateURL()},get:function(e){var t=B(this).entries;M(arguments.length,1);for(var i=S(e),r=0;r<t.length;r++)if(t[r].key===i)return t[r].value;return null},getAll:function(e){var t=B(this).entries;M(arguments.length,1);for(var i=S(e),r=[],n=0;n<t.length;n++)t[n].key===i&&$(r,t[n].value);return r},has:function(e){for(var t=B(this).entries,i=M(arguments.length,1),r=S(e),n=i<2?void 0:arguments[1],s=void 0===n?n:S(n),a=0;a<t.length;){var o=t[a++];if(o.key===r&&(void 0===s||o.value===s))return!0}return!1},set:function(e,t){var i,r=B(this);M(arguments.length,1);for(var n=r.entries,s=!1,a=S(e),o=S(t),h=0;h<n.length;h++)(i=n[h]).key===a&&(s?et(n,h--,1):(s=!0,i.value=o));s||$(n,{key:a,value:o}),l||(this.size=n.length),r.updateURL()},sort:function(){var e=B(this);L(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,i=B(this).entries,r=E(e,arguments.length>1?arguments[1]:void 0),n=0;n<i.length;)r((t=i[n++]).value,t.key,this)},keys:function(){return new eg(this,"keys")},values:function(){return new eg(this,"values")},entries:function(){return new eg(this,"entries")}},{enumerable:!0}),u(ey,D,ey.entries,{name:"entries"}),u(ey,"toString",function(){return B(this).serialize()},{enumerable:!0}),l&&f(ey,"size",{get:function(){return B(this).entries.length},configurable:!0,enumerable:!0}),g(ev,k),n({global:!0,constructor:!0,forced:!d},{URLSearchParams:ev}),!d&&b(Y)){var eb=c(W.has),ex=c(W.set),eE=function(e){if(w(e)){var t,i=e.body;if(T(i)===k)return eb(t=e.headers?new Y(e.headers):new Y,"content-type")||ex(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),C(e,{body:I(0,S(i)),headers:I(0,t)})}return e};if(b(G)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return G(e,arguments.length>1?eE(arguments[1]):{})}}),b(V)){var eT=function(e){return y(this,j),new V(e,arguments.length>1?eE(arguments[1]):{})};j.constructor=eT,eT.prototype=j,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:eT})}}t.exports={URLSearchParams:ev,getState:B}},{"12e7a75121005a18":"aF8mt",aed1dbd908154980:"kdCuo","2c283453b2df07f7":"b7GrG",f8300b17f61c07ea:"5ygRS",c6afc8e42ff4d861:"6YRTf",c5226e6ac6c1a4ca:"2MF6I",c70bfc3d71513918:"kiToe",a30c0c0ecacbf883:"cfIox","9dc980ea97e54f2d":"dqiQp","34e5e214071de9f5":"9qrxy",d5c866a8dfde6bfe:"2UU83",cfb67c7a1a4f1af9:"l5KAt",f0c2290e210049d5:"8DWpB",c7a2f88a5440a541:"ksXqH",fb2d9f4ac91c2856:"9fpII","5e8fcf76ef17aca5":"fuP4a","486653683495e4a1":"cYIbs","34563d35f35f9929":"2Pprm",b866aa0bde936df4:"45yko",b5970b9126e1d395:"gWc3u","71cd06e9ca4a93a2":"bAgVp","7e16c364467ce62d":"5dGJN","9a0912d2261bbada":"adFpz","9d062cdf188403bf":"2QNq8","1caa2aad22025751":"gg5Dl",bf766970034bde82:"enYsZ",c6d4d2a85cdef35a:"7mfF2","6668155f748c33e9":"2JETE","982e5845e606dff7":"k6wXP","9a407fe1b80ba6f5":"9kaRM","778323e4214f089d":"eG9HO","83b87fb1800baf72":"02Yr0"}],iWBfV:[function(e,t,i,r){var n=e("e013012b2638fef2"),s=e("9496ef9db0f82491"),a=e("21b7d0d94de855c8"),o=e("8147b48bed1193b9"),h=e("209fab1bb25c54f1"),c=e("fc6b642936976470"),l=s("URL"),d=c&&a(function(){l.canParse()}),u=a(function(){return 1!==l.canParse.length});n({target:"URL",stat:!0,forced:!d||u},{canParse:function(e){var t=o(arguments.length,1),i=h(e),r=t<2||void 0===arguments[1]?void 0:h(arguments[1]);try{return new l(i,r),!0}catch(e){return!1}}})},{e013012b2638fef2:"b7GrG","9496ef9db0f82491":"2MF6I","21b7d0d94de855c8":"45J7X","8147b48bed1193b9":"9kaRM","209fab1bb25c54f1":"2QNq8",fc6b642936976470:"9qrxy"}],e3ULL:[function(e,t,i,r){var n=e("ca194031c7296753"),s=e("349abd465922c360"),a=e("4631d0a34bc5d157"),o=e("aa32995cacd33b44"),h=e("be99ff6f8e610b1"),c=s("URL");n({target:"URL",stat:!0,forced:!h},{parse:function(e){var t=a(arguments.length,1),i=o(e),r=t<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return new c(i,r)}catch(e){return null}}})},{ca194031c7296753:"b7GrG","349abd465922c360":"2MF6I","4631d0a34bc5d157":"9kaRM",aa32995cacd33b44:"2QNq8",be99ff6f8e610b1:"9qrxy"}],aaFAV:[function(e,t,i,r){var n=e("bfa898e24eaaf3ba"),s=e("f2e0e6e15a74c3f4");n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return s(URL.prototype.toString,this)}})},{bfa898e24eaaf3ba:"b7GrG",f2e0e6e15a74c3f4:"kiToe"}],"73jhE":[function(e,t,i,r){e("d31c1e63d588cf96")},{d31c1e63d588cf96:"111Rs"}],"5RKmG":[function(e,t,i,r){var n=e("5e6ccc0840d93f4d"),s=e("cef48d325e9fb1df"),a=e("669131fee6eafcca"),o=e("1de5920376d9b739"),h=URLSearchParams,c=h.prototype,l=s(c.append),d=s(c.delete),u=s(c.forEach),f=s([].push),p=new h("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&n(c,"delete",function(e){var t,i=arguments.length,r=i<2?void 0:arguments[1];if(i&&void 0===r)return d(this,e);var n=[];u(this,function(e,t){f(n,{key:t,value:e})}),o(i,1);for(var s=a(e),h=a(r),c=0,p=0,g=!1,m=n.length;c<m;)t=n[c++],g||t.key===s?(g=!0,d(this,t.key)):p++;for(;p<m;)((t=n[p++]).key!==s||t.value!==h)&&l(this,t.key,t.value)},{enumerable:!0,unsafe:!0})},{"5e6ccc0840d93f4d":"2UU83",cef48d325e9fb1df:"cfIox","669131fee6eafcca":"2QNq8","1de5920376d9b739":"9kaRM"}],eahs4:[function(e,t,i,r){var n=e("846e6a6a465eda2c"),s=e("a872c874b5a03eca"),a=e("33bc1e4c3ed39c52"),o=e("f19f0d564c1047bd"),h=URLSearchParams,c=h.prototype,l=s(c.getAll),d=s(c.has),u=new h("a=1");(u.has("a",2)||!u.has("a",void 0))&&n(c,"has",function(e){var t=arguments.length,i=t<2?void 0:arguments[1];if(t&&void 0===i)return d(this,e);var r=l(this,e);o(t,1);for(var n=a(i),s=0;s<r.length;)if(r[s++]===n)return!0;return!1},{enumerable:!0,unsafe:!0})},{"846e6a6a465eda2c":"2UU83",a872c874b5a03eca:"cfIox","33bc1e4c3ed39c52":"2QNq8",f19f0d564c1047bd:"9kaRM"}],g0WVc:[function(e,t,i,r){var n=e("12f474df670119"),s=e("4e0abd277a1d8126"),a=e("9470ae398f726300"),o=URLSearchParams.prototype,h=s(o.forEach);!n||"size"in o||a(o,"size",{get:function(){var e=0;return h(this,function(){e++}),e},configurable:!0,enumerable:!0})},{"12f474df670119":"dqiQp","4e0abd277a1d8126":"cfIox","9470ae398f726300":"l5KAt"}],"9C5C7":[function(e,t,i,r){var n=function(e){var t,i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function l(e,i,r,s){var a,o,h,c,l=Object.create((i&&i.prototype instanceof m?i:m).prototype);return n(l,"_invoke",{value:(a=e,o=r,h=new I(s||[]),c=u,function(e,i){if(c===f)throw Error("Generator is already running");if(c===p){if("throw"===e)throw i;return{value:t,done:!0}}for(h.method=e,h.arg=i;;){var r=h.delegate;if(r){var n=function e(i,r){var n=r.method,s=i.iterator[n];if(s===t)return(r.delegate=null,"throw"===n&&i.iterator.return&&(r.method="return",r.arg=t,e(i,r),"throw"===r.method))?g:("return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),g);var a=d(s,i.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var o=a.arg;return o?o.done?(r[i.resultName]=o.value,r.next=i.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):o:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,g)}(r,h);if(n){if(n===g)continue;return n}}if("next"===h.method)h.sent=h._sent=h.arg;else if("throw"===h.method){if(c===u)throw c=p,h.arg;h.dispatchException(h.arg)}else"return"===h.method&&h.abrupt("return",h.arg);c=f;var s=d(a,o,h);if("normal"===s.type){if(c=h.done?p:"suspendedYield",s.arg===g)continue;return{value:s.arg,done:h.done}}"throw"===s.type&&(c=p,h.method="throw",h.arg=s.arg)}})}),l}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u="suspendedStart",f="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,E=x&&x(x(_([])));E&&E!==i&&r.call(E,a)&&(b=E);var T=y.prototype=m.prototype=Object.create(b);function A(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var i;n(this,"_invoke",{value:function(n,s){function a(){return new t(function(i,a){!function i(n,s,a,o){var h=d(e[n],e,s);if("throw"===h.type)o(h.arg);else{var c=h.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){i("next",e,a,o)},function(e){i("throw",e,a,o)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return i("throw",e,a,o)})}}(n,s,i,a)})}return i=i?i.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(null!=e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}throw TypeError(typeof e+" is not iterable")}return v.prototype=y,n(T,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:v,configurable:!0}),v.displayName=c(y,h,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,h,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(w.prototype),c(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,i,r,n,s){void 0===s&&(s=Promise);var a=new w(l(t,i,r,n),s);return e.isGeneratorFunction(i)?a:a.next().then(function(e){return e.done?e.value:a.next()})},A(T),c(T,h,"Generator"),c(T,a,function(){return this}),c(T,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(r,n){return o.type="throw",o.arg=e,i.next=r,n&&(i.method="next",i.arg=t),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var h=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(h&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);else if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else if(c){if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return(a.type=e,a.arg=t,s)?(this.method="next",this.next=s.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;C(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:_(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(t.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},{}],gFTma:[function(e,t,i,r){let{GameClient:n}=e("c0142d4e41395f84"),{GameEngine:s}=e("18a1ed1c4bf17b4d"),{RoomEvents:a}=e("dceef5f4a6a9e8ba"),{ClientStartHandler:o}=e("ec0d66055e408699"),{FeaturesManager:h}=e("7e4eea7c2d38167d"),{FirebaseConnector:c}=e("96ad1970faff6b57"),{ConfigManager:l}=e("f699c89d645cbfaf"),{TranslationsMapper:d}=e("92bd008077187dc5"),u=e("5f809829afd075a"),{GameDom:f}=e("aeb0ac1bb4c645c8"),{RoomsConst:p}=e("b21bf1f3f93cb5d9"),{GameConst:g}=e("f6b922b1a92a11c2"),{ErrorManager:m,EventsManagerSingleton:v,Logger:y,sc:b}=e("33884cbf240ef975");t.exports.GameManager=class{constructor(){this.gameEngine=!1,this.activeRoomEvents=null,this.events=v,this.gameDom=f,this.config=new l;let e=this.gameDom.getWindow()?.reldensInitialConfig||{};b.deepMergeProperties(this.config,e),this.features=new h({gameManager:this,events:this.events}),this.firebase=new c(this),this.joinedRooms={},this.userData={},this.plugins={},this.services={},this.elements={},this.playerData=!1,this.gameOver=!1,this.forcedDisconnection=!1,this.isChangingScene=!1,this.canInitEngine=!0,this.appServerUrl="",this.gameServerUrl="",this.locale="",d.forConfig(this.config.client,u,g.MESSAGE.DATA_VALUES),this.createdAnimations={}}setChangingScene(e){this.isChangingScene=e;let t=this.gameDom.getElement("#reldens div");if(t){if(e)return void t.classList.add("hidden-forced");t.classList.remove("hidden-forced")}}setupCustomClientPlugin(e,t){this.plugins[e]=new t,this.plugins[e].setup({gameManager:this,events:this.events})}clientStart(){this.events.emitSync("reldens.clientStartBefore",this),this.startHandler=new o(this),this.startHandler.clientStart()}async startGame(e,t){return(this.events.emitSync("reldens.startGameBefore",this),await this.joinGame(e,t))?(this.handleLoginSuccess(),!0):(this.handleLoginError(e),!1)}handleLoginSuccess(){let e=this.gameDom.getElement(g.SELECTORS.BODY);e.classList.add(g.CLASSES.GAME_STARTED),e.classList.remove(g.CLASSES.GAME_ERROR),this.gameDom.getElement(g.SELECTORS.FORMS_CONTAINER).remove(),this.events.emitSync("reldens.startGameAfter",this)}handleLoginError(e){let t=this.gameDom.getElement(g.SELECTORS.BODY);t.classList.remove(g.CLASSES.GAME_STARTED),t.classList.add(g.CLASSES.GAME_ERROR),this.submitedForm=!1,this.events.emitSync("reldens.gameRoomError",this),this.firebase&&"firebase-login"===e.formId&&this.firebase.app.auth().signOut()}async joinGame(e,t=!1){return(this.userData={},await this.events.emit("reldens.beforeJoinGame",{gameManager:this,formData:e,isNewUser:t}),this.mapFormDataToUserData(e,t),this.gameRoom=await this.gameClient.joinOrCreate(g.ROOM_GAME,this.userData),this.gameRoom)?(await this.events.emit("reldens.beforeJoinGameRoom",this.gameRoom),this.handleGameRoomMessages(),this.activateResponsiveBehavior(),this.gameRoom):(this.displayFormError("#"+e.formId,this.gameClient.lastErrorMessage),!1)}mapFormDataToUserData(e,t){b.hasOwn(e,"forgot")&&(this.userData.forgot=1,this.userData.email=e.email),this.initializeClient(),e.isGuest&&(this.userData.isGuest=!0,this.userData.isNewUser=!0),t&&(this.userData.isNewUser=!0,this.userData.email=e.email),this.userData.username=e.username,this.userData.password=e.password}handleGameRoomMessages(){this.gameRoom.onMessage("*",async e=>{if(e.error)return y.error("Game Room message error.",e.message),this.displayFormError(g.SELECTORS.PLAYER_CREATE_FORM,e.message),!1;if(g.START_GAME===e.act)return this.initialGameData=e,await this.beforeStartGame();if(g.CREATE_PLAYER_RESULT!==e.act)return!1;this.initialGameData.player=e.player;let t=this.gameDom.getElement(g.SELECTORS.PLAYER_SELECTION);t&&t.classList.add("hidden"),await this.initEngine()})}activateResponsiveBehavior(){this.events.on("reldens.afterSceneDynamicCreate",async()=>{this.config.getWithoutLogs("client/ui/screen/responsive",!0)&&(this.gameEngine.updateGameSize(this),this.gameDom.getWindow().addEventListener("resize",()=>{this.gameEngine.updateGameSize(this)}))})}displayFormError(e,t){let i=this.gameDom.getElement(e+" "+g.SELECTORS.RESPONSE_ERROR);if(!i)return!1;i.innerHTML=t;let r=this.gameDom.getElement(e+" "+g.SELECTORS.LOADING_CONTAINER);return r&&r?.classList.add(g.CLASSES.HIDDEN),!0}initializeClient(){this.appServerUrl=this.getAppServerUrl(),this.gameServerUrl=this.getGameServerUrl(),this.gameClient=new n(this.gameServerUrl,this.config)}async beforeStartGame(){return await this.events.emit("reldens.beforeInitEngineAndStartGame",this.initialGameData,this),b.hasOwn(this.initialGameData,"gameConfig")||m.error("Missing game configuration."),b.deepMergeProperties(this.config,this.initialGameData?.gameConfig||{}),await this.features.loadFeatures(this.initialGameData?.features||{}),await this.events.emit("reldens.beforeCreateEngine",this.initialGameData,this),!!this.canInitEngine&&await this.initEngine()}async initEngine(){if(this.playerData=this.initialGameData?.player||!1,!this.playerData||!this.playerData.state)return this.gameDom.alertReload(this.services?.translator.t("game.errors.missingPlayerData"));this.userData.selectedPlayer=this.playerData.id;let e=this.initialGameData?.selectedScene||"";this.userData.selectedScene=e;let t=this.initialGameData?.gameConfig||{};this.gameEngine=new s({config:t.client.gameEngine,events:this.events}),this.userData.isNewUser=!1,this.userData.isGuest&&(this.initialGameData?.guestPassword&&(this.userData.password=this.initialGameData.guestPassword),this.initialGameData?.userName&&(this.userData.username=this.initialGameData.userName)),await this.joinFeaturesRooms();let i=""!==e&&e!==p.ROOM_LAST_LOCATION_KEY?e:this.playerData.state.scene;this.playerData.state.scene=i;let r=await this.gameClient.joinOrCreate(i,this.userData);if(!r)return this.gameDom.alertReload(this.services?.translator.t("game.errors.joiningRoom",{joinRoomName:i}));this.gameDom.getElement(g.SELECTORS.BODY).classList.add(g.CLASSES.GAME_ENGINE_STARTED),this.gameDom.getElement(g.SELECTORS.GAME_CONTAINER).classList.remove(g.CLASSES.HIDDEN);let n=this.gameDom.getElement(g.SELECTORS.PLAYER_SELECTION);return n&&n.classList.add(g.CLASSES.HIDDEN),delete this.initialGameData.selectedScene,delete this.userData.selectedScene,await this.emitJoinedRoom(r,i),this.activeRoomEvents=this.createRoomEventsInstance(i),await this.events.emit("reldens.createdRoomsEventsInstance",r,this),await this.activeRoomEvents.activateRoom(r),await this.emitActivatedRoom(r,i),await this.events.emit("reldens.afterInitEngineAndStartGame",this.initialGameData,r),r}async joinFeaturesRooms(){let e=Object.keys(this.features.featuresList);if(0===e.length)return;let t=[];for(let i of e){let e=this.features.featuresList[i];if(b.hasOwn(e,"joinRooms"))for(let i of e.joinRooms){let e=await this.gameClient.joinOrCreate(i,this.userData);if(!e)return this.gameDom.alertReload(this.services.translator.t("game.errors.joiningFeatureRoom",{joinRoomName:i}));this.joinedRooms[i]=e,await this.emitJoinedRoom(e,i),t.push(i)}}b.deepMergeProperties(this.config,{client:{rooms:{featuresRoomsNames:t}}})}async reconnectGameClient(e,t){this.setChangingScene(!0);let i=this.createRoomEventsInstance(e.player.state.scene);this.gameClient.joinOrCreate(i.roomName,this.userData).then(async r=>{t.leave(),this.activeRoomEvents=i,this.room=r,await this.emitJoinedRoom(r,e.player.state.scene),await i.activateRoom(r,e.prev),await this.emitActivatedRoom(r,e.player.state.scene)}).catch(i=>{y.error("Reconnect Game Client error.",{error:i,message:e,previousRoom:t}),this.gameDom.alertReload(this.services.translator.t("game.errors.reconnectClient"))})}async emitActivatedRoom(e,t){await this.events.emit("reldens.activatedRoom",e,this),await this.events.emit("reldens.activatedRoom_"+t,e,this)}async emitJoinedRoom(e,t){await this.events.emit("reldens.joinedRoom",e,this),await this.events.emit("reldens.joinedRoom_"+t,e,this)}createRoomEventsInstance(e){return new a(e,this)}getAppServerUrl(){return""===this.appServerUrl&&(this.appServerUrl=this.getUrlFromCurrentReferer()),this.appServerUrl}getGameServerUrl(){return""===this.gameServerUrl&&(this.gameServerUrl=this.getUrlFromCurrentReferer(!0)),this.gameServerUrl}getUrlFromCurrentReferer(e=!1){let t=this.gameDom.getWindow().location,i=t.protocol;return e&&(i=0===i.indexOf("https")?"wss:":"ws:"),i+"//"+t.hostname+(t.port?":"+t.port:"")}getActiveScene(){return this.activeRoomEvents.getActiveScene()}getActiveScenePreloader(){return this.gameEngine.scene.getScene(g.SCENE_PRELOADER+this.getActiveScene().key)}getCurrentPlayer(){let e=this.getActiveScene();return!!e&&e.player}currentPlayerName(){let e=this.getCurrentPlayer();return e?e.player_id+" - "+e.playerName:""}getCurrentPlayerAnimation(){let e=this.getCurrentPlayer();return e.players[e.playerId]}getUiElement(e,t=!0){let i=b.get(this.gameEngine,"uiScene",!1);return i?i.getUiElement(e,t):(t&&y.error("UI Scene not defined."),!1)}getFeature(e){let t=this.features.featuresList;return b.hasOwn(t,e)?t[e]:(y.error("Feature key not defined.",e),!1)}getAnimationByKey(e){return this.getActiveScene().getAnimationByKey(e)}}},{c0142d4e41395f84:"jW5je","18a1ed1c4bf17b4d":"ltHIn",dceef5f4a6a9e8ba:"1LMb5",ec0d66055e408699:"k6yGF","7e4eea7c2d38167d":"4y5zd","96ad1970faff6b57":"7w641",f699c89d645cbfaf:"2nxjP","92bd008077187dc5":"62bet","5f809829afd075a":"5RyyZ",aeb0ac1bb4c645c8:"4CxZf",b21bf1f3f93cb5d9:"glvjH",f6b922b1a92a11c2:"z0nmL","33884cbf240ef975":"ijd9L"}],jW5je:[function(e,t,i,r){let{Client:n}=e("7318eff88b436af1"),{RoomsConst:s}=e("25de65df7e751073"),{GameConst:a}=e("6f1338761bdf0493"),{Logger:o}=e("c4efa48e92b2f02b");t.exports.GameClient=class{constructor(e,t){this.serverUrl=e,this.config=t,this.autoConnectServerGameRoom=this.config.getWithoutLogs("client/rooms/autoConnectServerGameRoom",!0),this.autoConnectServerFeatureRooms=this.config.getWithoutLogs("client/rooms/autoConnectServerFeatureRooms",!0),this.roomsUrls={},this.roomClients={},this.gameRoomsByServer={},this.featuresByServerFlag={},this.featuresRoomsByServer={},this.lastErrorMessage=""}async joinOrCreate(e,t){this.lastErrorMessage="";try{let i=this.roomClient(e);if(!i)return o.error('Client not found for room name "'+e+'".'),!1;let r=this.roomsUrls[e];return await this.connectToGlobalGameRoom(r,i,t),await this.connectToGlobalFeaturesRooms(r,i,t),await i.joinOrCreate(e,t)}catch(i){if(s.ERRORS.CREATING_ROOM_AWAIT===i.message)return await new Promise(e=>setTimeout(e,500)),await this.joinOrCreate(e,t);this.lastErrorMessage=i.message,o.error("Joining room error: "+i.message)}return!1}async connectToGlobalGameRoom(e,t,i){!this.autoConnectServerGameRoom||(""===e||this.serverUrl===e?o.debug("Avoid connect to global game room.",this.serverUrl,e):this.gameRoomsByServer[e]||(o.debug("Registering GameRoom for server: "+e),this.gameRoomsByServer[e]=await t.joinOrCreate(a.ROOM_GAME,i),this.gameRoomsByServer[e].onMessage("*",()=>{})))}async connectToGlobalFeaturesRooms(e,t,i){if(!this.autoConnectServerFeatureRooms)return;if(""===e||this.serverUrl===e)return void o.debug("Avoid connect to features rooms.",this.serverUrl,e);if(this.featuresByServerFlag[e])return;o.debug("Registering features rooms for server: "+e),this.featuresByServerFlag[e]=!0;let r=this.config.getWithoutLogs("client/rooms/featuresRoomsNames",[]);if(!(0<r.length))for(let n of(this.featuresRoomsByServer[e]={},r))this.featuresRoomsByServer[e][n]=await t.joinOrCreate(n,i)}roomClient(e){return this.roomClients[e]||(this.roomsUrls[e]=this.config.getWithoutLogs("client/rooms/servers/"+e,this.serverUrl),o.debug('Creating client with URL "'+this.roomsUrls[e]+'" for room "'+e+'".'),this.roomClients[e]=new n(this.roomsUrls[e])),this.roomClients[e]}}},{"7318eff88b436af1":"aVDM4","25de65df7e751073":"glvjH","6f1338761bdf0493":"z0nmL",c4efa48e92b2f02b:"ijd9L"}],aVDM4:[function(e,t,i,r){var n=e("62394090e3d8ae5f").Buffer;(function(e){let t,i,r,s,a,o,h,c,l;function d(e,t,i,r){return new(i||(i=Promise))(function(n,s){function a(e){try{h(r.next(e))}catch(e){s(e)}}function o(e){try{h(r.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,o)}h((r=r.apply(e,t||[])).next())})}function u(e,t,i,r){if("a"===i&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)}function f(e,t,i,r,n){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i}ArrayBuffer.isView||(ArrayBuffer.isView=e=>null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer),"u"<typeof globalThis&&"u">typeof window&&(window.globalThis=window),"u"<typeof FormData&&(globalThis.FormData=class{}),"function"==typeof SuppressedError&&SuppressedError,(x=E||(E={}))[x.CONSENTED=4e3]="CONSENTED",x[x.DEVMODE_RESTART=4010]="DEVMODE_RESTART";class p extends Error{constructor(e,t){super(t),this.name="ServerError",this.code=e}}class g extends Error{constructor(e){super(e),this.name="AbortError"}}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v,y,b,x,E,T,A,w,S,C,I,_,O,P,M,R,L,D,k,N,F,B,U,G={},V=function(){return T?G:(T=1,function(e){var t,i,r,s,a,o,h,c,l,d,u;e.OPERATION=void 0,(u=e.OPERATION||(e.OPERATION={}))[u.ADD=128]="ADD",u[u.REPLACE=0]="REPLACE",u[u.DELETE=64]="DELETE",u[u.DELETE_AND_MOVE=96]="DELETE_AND_MOVE",u[u.MOVE_AND_ADD=160]="MOVE_AND_ADD",u[u.DELETE_AND_ADD=192]="DELETE_AND_ADD",u[u.CLEAR=10]="CLEAR",u[u.REVERSE=15]="REVERSE",u[u.MOVE=32]="MOVE",u[u.DELETE_BY_REFID=33]="DELETE_BY_REFID",u[u.ADD_BY_REFID=129]="ADD_BY_REFID",Symbol.metadata??=Symbol.for("Symbol.metadata");let f="~track",p="~encoder",g="~decoder",m="~filter",v="~getByIndex",y="~deleteByIndex",b="~changes",x="~childType",E="~onEncodeEnd",T="~onDecodeEnd",A="~descriptors",w="~__numFields",S="~__refTypeFieldIndexes",C="~__viewFieldIndexes",I="$__fieldIndexesByViewTag";try{new TextEncoder}catch(e){}let _=new ArrayBuffer(8),O=new Int32Array(_),P=new Float32Array(_),M=new Float64Array(_),R=new BigInt64Array(_),L=void 0!==n&&n.byteLength?n.byteLength:function(e,t){for(var i=0,r=0,n=0,s=e.length;n<s;n++)(i=e.charCodeAt(n))<128?r+=1:i<2048?r+=2:i<55296||i>=57344?r+=3:(n++,r+=4);return r};function D(e,t,i){for(var r=0,n=0,s=t.length;n<s;n++)(r=t.charCodeAt(n))<128?e[i.offset++]=r:r<2048?(e[i.offset]=192|r>>6,e[i.offset+1]=128|63&r,i.offset+=2):r<55296||r>=57344?(e[i.offset]=224|r>>12,e[i.offset+1]=128|r>>6&63,e[i.offset+2]=128|63&r,i.offset+=3):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e[i.offset]=240|r>>18,e[i.offset+1]=128|r>>12&63,e[i.offset+2]=128|r>>6&63,e[i.offset+3]=128|63&r,i.offset+=4)}function k(e,t,i){e[i.offset++]=255&t}function N(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255}function F(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255}function B(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255,e[i.offset++]=t>>16&255,e[i.offset++]=t>>24&255}function U(e,t,i){e[i.offset++]=255&t,e[i.offset++]=255&t>>8,e[i.offset++]=255&t>>16,e[i.offset++]=255&t>>24}function G(e,t,i){let r=Math.floor(t/0x100000000);U(e,t>>>0,i),U(e,r,i)}function V(e,t,i){U(e,t>>>0,i),U(e,t/0x100000000|0,i)}function Y(e,t,i){P[0]=t,B(e,O[0],i)}function j(e,t,i){M[0]=t,B(e,O[0],i),B(e,O[1],i)}let W={int8:k,uint8:function(e,t,i){e[i.offset++]=255&t},int16:N,uint16:F,int32:B,uint32:U,int64:G,uint64:V,bigint64:function(e,t,i){R[0]=BigInt.asIntN(64,t),B(e,O[0],i),B(e,O[1],i)},biguint64:function(e,t,i){R[0]=BigInt.asIntN(64,t),B(e,O[0],i),B(e,O[1],i)},float32:Y,float64:j,boolean:function(e,t,i){e[i.offset++]=+!!t},string:function(e,t,i){t||(t="");let r=L(t,"utf8"),n=0;if(r<32)e[i.offset++]=160|r,n=1;else if(r<256)e[i.offset++]=217,e[i.offset++]=r%255,n=2;else if(r<65536)e[i.offset++]=218,F(e,r,i),n=3;else if(r<0x100000000)e[i.offset++]=219,U(e,r,i),n=5;else throw Error("String too long");return D(e,t,i),n+r},number:function e(t,i,r){if(isNaN(i))return e(t,0,r);if(!isFinite(i))return e(t,i>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER,r);if(i!==(0|i))return 34028235e31>=Math.abs(i)&&(P[0]=i,1e-4>Math.abs(Math.abs(P[0])-Math.abs(i)))?(t[r.offset++]=202,Y(t,i,r),5):(t[r.offset++]=203,j(t,i,r),9);return i>=0?i<128?(t[r.offset++]=255&i,1):i<256?(t[r.offset++]=204,t[r.offset++]=255&i,2):i<65536?(t[r.offset++]=205,F(t,i,r),3):i<0x100000000?(t[r.offset++]=206,U(t,i,r),5):(t[r.offset++]=207,V(t,i,r),9):i>=-32?(t[r.offset++]=224|i+32,1):i>=-128?(t[r.offset++]=208,k(t,i,r),2):i>=-32768?(t[r.offset++]=209,N(t,i,r),3):i>=-0x80000000?(t[r.offset++]=210,B(t,i,r),5):(t[r.offset++]=211,G(t,i,r),9)},utf8Write:D,utf8Length:L},z=new ArrayBuffer(8),H=new Int32Array(z),X=new Float32Array(z),q=new Float64Array(z),K=new BigUint64Array(z),J=new BigInt64Array(z);function Q(e,t,i){for(var r="",n=0,s=t.offset,a=t.offset+i;s<a;s++){var o=e[s];if((128&o)==0){r+=String.fromCharCode(o);continue}if((224&o)==192){r+=String.fromCharCode((31&o)<<6|63&e[++s]);continue}if((240&o)==224){r+=String.fromCharCode((15&o)<<12|(63&e[++s])<<6|63&e[++s]);continue}if((248&o)==240){(n=(7&o)<<18|(63&e[++s])<<12|(63&e[++s])<<6|63&e[++s])>=65536?(n-=65536,r+=String.fromCharCode((n>>>10)+55296,(1023&n)+56320)):r+=String.fromCharCode(n);continue}console.error("Invalid byte "+o.toString(16))}return t.offset+=i,r}function $(e,t){return Z(e,t)<<24>>24}function Z(e,t){return e[t.offset++]}function ee(e,t){return et(e,t)<<16>>16}function et(e,t){return e[t.offset++]|e[t.offset++]<<8}function ei(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function er(e,t){return ei(e,t)>>>0}function en(e,t){return H[0]=ei(e,t),X[0]}function es(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),q[0]}function ea(e,t){let i=er(e,t);return 0x100000000*ei(e,t)+i}function eo(e,t){let i=er(e,t);return 0x100000000*er(e,t)+i}let eh={utf8Read:Q,int8:$,uint8:Z,int16:ee,uint16:et,int32:ei,uint32:er,float32:en,float64:es,int64:ea,uint64:eo,bigint64:function(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),J[0]},biguint64:function(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),K[0]},boolean:function(e,t){return Z(e,t)>0},string:function(e,t){let i,r=e[t.offset++];return r<192?i=31&r:217===r?i=Z(e,t):218===r?i=et(e,t):219===r&&(i=er(e,t)),Q(e,t,i)},number:function(e,t){let i=e[t.offset++];if(i<128)return i;if(202===i)return en(e,t);if(203===i)return es(e,t);if(204===i)return Z(e,t);if(205===i)return et(e,t);else if(206===i)return er(e,t);else if(207===i)return eo(e,t);else if(208===i)return $(e,t);else if(209===i)return ee(e,t);else if(210===i)return ei(e,t);else if(211===i)return ea(e,t);else if(i>223)return-((255-i+1)*1)},stringCheck:function(e,t){let i=e[t.offset];return i<192&&i>160||217===i||218===i||219===i}},ec={},el=new Map;function ed(e,t){t.constructor&&(el.set(t.constructor,e),ec[e]=t),t.encode&&(W[e]=t.encode),t.decode&&(eh[e]=t.decode)}class eu{static{this.inheritedTypes=new Map}static{this.cachedContexts=new Map}static register(e){let t=Object.getPrototypeOf(e);if(t!==eU){let i=eu.inheritedTypes.get(t);i||(i=new Set,eu.inheritedTypes.set(t,i)),i.add(e)}}static cache(e){let t=eu.cachedContexts.get(e);return t||(t=new eu(e),eu.cachedContexts.set(e,t)),t}constructor(e){this.types={},this.schemas=new Map,this.hasFilters=!1,this.parentFiltered={},e&&this.discoverTypes(e)}has(e){return this.schemas.has(e)}get(e){return this.types[e]}add(e,t=this.schemas.size){return!this.schemas.has(e)&&(this.types[t]=e,void 0===e[Symbol.metadata]&&ep.initialize(e),this.schemas.set(e,t),!0)}getTypeId(e){return this.schemas.get(e)}discoverTypes(e,t,i,r){if(r&&this.registerFilteredByParent(e,t,i),!this.add(e))return;eu.inheritedTypes.get(e)?.forEach(e=>{this.discoverTypes(e,t,i,r)});let n=e;for(;(n=Object.getPrototypeOf(n))&&n!==eU&&n!==Function.prototype;)this.discoverTypes(n);let s=e[Symbol.metadata]??={};for(let t in s[C]&&(this.hasFilters=!0),s){let i=s[t].type,n=void 0!==s[t].tag;if("string"!=typeof i)if("function"==typeof i)this.discoverTypes(i,e,t,r||n);else{let s=Object.values(i)[0];if("string"==typeof s)continue;this.discoverTypes(s,e,t,r||n)}}}registerFilteredByParent(e,t,i){let r=this.schemas.get(e)??this.schemas.size,n=`${r}`;t&&(n+=`-${this.schemas.get(t)}`),n+=`-${i}`,this.parentFiltered[n]=!0}debug(){let e="";for(let t in this.parentFiltered){let i=t.split("-").map(Number),r=i.pop();e+=`
		${t}: ${i.reverse().map((e,t)=>{let i=this.types[e],n=i[Symbol.metadata],s=i.name;return 0===t&&(s+=`[${n[r].name}]`),`${s}`}).join(" -> ")}`}return`TypeContext ->
	Schema types: ${this.schemas.size}
	hasFilters: ${this.hasFilters}
	parentFiltered:${e}`}}function ef(e){if(Array.isArray(e))return{array:ef(e[0])};if(void 0!==e.type)return e.type;if(function(e){if("function"==typeof e&&e[Symbol.metadata])return!1;let t=Object.keys(e),i=t.filter(e=>/\d+/.test(e));return!!(i.length>0&&i.length===t.length/2&&e[e[i[0]]]==i[0]||t.length>0&&t.every(t=>"string"==typeof e[t]&&e[t]===t))}(e))return Object.keys(e).every(t=>"string"==typeof e[t])?"string":"number";if("object"==typeof e&&null!==e){let t=Object.keys(e).find(e=>void 0!==ec[e]);t&&(e[t]=ef(e[t]))}return e}let ep={addField(e,t,i,r,n){if(t>64)throw Error(`Can't define field '${i}'.
Schema instances may only have up to 64 fields.`);e[t]=Object.assign(e[t]||{},{type:ef(r),index:t,name:i}),Object.defineProperty(e,A,{value:e[A]||{},enumerable:!1,configurable:!0}),n?(e[A][i]=n,e[A][`_${i}`]={value:void 0,writable:!0,enumerable:!1,configurable:!0}):e[A][i]={value:void 0,writable:!0,enumerable:!0,configurable:!0},Object.defineProperty(e,w,{value:t,enumerable:!1,configurable:!0}),Object.defineProperty(e,i,{value:t,enumerable:!1,configurable:!0}),"string"!=typeof e[t].type&&(void 0===e[S]&&Object.defineProperty(e,S,{value:[],enumerable:!1,configurable:!0}),e[S].push(t))},setTag(e,t,i){let r=e[t];e[r].tag=i,e[C]||(Object.defineProperty(e,C,{value:[],enumerable:!1,configurable:!0}),Object.defineProperty(e,I,{value:{},enumerable:!1,configurable:!0})),e[C].push(r),e[I][i]||(e[I][i]=[]),e[I][i].push(r)},setFields(e,t){let i=e.prototype.constructor;eu.register(i);let r=Object.getPrototypeOf(i),n=r&&r[Symbol.metadata],s=ep.initialize(i);i[f]||(i[f]=eU[f]),i[p]||(i[p]=eU[p]),i[g]||(i[g]=eU[g]),i.prototype.toJSON||(i.prototype.toJSON=eU.prototype.toJSON);let a=s[w]??(n&&n[w])??-1;for(let e in a++,t){let i=ef(t[e]),r="string"==typeof Object.keys(i)[0]&&ec[Object.keys(i)[0]],n=r?Object.values(i)[0]:i;ep.addField(s,a,e,i,eF(`_${e}`,a,n,r)),a++}return e},isDeprecated:(e,t)=>!0===e[t].deprecated,init(e){let t={};e[Symbol.metadata]=t,Object.defineProperty(t,w,{value:0,enumerable:!1,configurable:!0})},initialize(e){let t=Object.getPrototypeOf(e),i=t[Symbol.metadata],r=e[Symbol.metadata]??Object.create(null);return t!==eU&&r===i&&(r=Object.create(null),i&&(Object.setPrototypeOf(r,i),Object.defineProperty(r,w,{value:i[w],enumerable:!1,configurable:!0,writable:!0}),void 0!==i[C]&&(Object.defineProperty(r,C,{value:[...i[C]],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r,I,{value:{...i[I]},enumerable:!1,configurable:!0,writable:!0})),void 0!==i[S]&&Object.defineProperty(r,S,{value:[...i[S]],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r,A,{value:{...i[A]},enumerable:!1,configurable:!0,writable:!0}))),e[Symbol.metadata]=r,r},isValidInstance:e=>e.constructor[Symbol.metadata]&&Object.prototype.hasOwnProperty.call(e.constructor[Symbol.metadata],w),getFields(e){let t=e[Symbol.metadata],i={};for(let e=0;e<=t[w];e++)i[t[e].name]=t[e].type;return i},hasViewTagAtIndex:(e,t)=>e?.[C]?.includes(t)};function eg(e){return{indexes:{},operations:[],queueRootNode:e}}function em(){return{next:void 0,tail:void 0}}function ev(e,t){let i=e.indexes[t];void 0===i?e.indexes[t]=e.operations.push(t)-1:e.operations[i]=t}function ey(e,t){let i=e.indexes[t];void 0===i&&(i=Object.values(e.indexes).at(-1),t=Object.entries(e.indexes).find(([e,t])=>t===i)?.[0]),e.operations[i]=void 0,delete e.indexes[t]}class eb{constructor(e){this.isFiltered=!1,this.indexedOperations={},this.changes={indexes:{},operations:[]},this.allChanges={indexes:{},operations:[]},this.isNew=!0,this.ref=e,this.metadata=e.constructor[Symbol.metadata],this.metadata?.[C]&&(this.allFilteredChanges={indexes:{},operations:[]},this.filteredChanges={indexes:{},operations:[]})}setRoot(e){this.root=e;let t=this.root.add(this);this.checkIsFiltered(this.parent,this.parentIndex,t),t&&this.forEachChild((t,i)=>{t.root!==e?t.setRoot(e):e.add(t)})}setParent(e,t,i){if(this.addParent(e,i),!t)return;let r=t.add(this);t!==this.root&&(this.root=t,this.checkIsFiltered(e,i,r)),r&&this.forEachChild((e,i)=>{if(e.root===t){t.add(e),t.moveNextToParent(e);return}e.setParent(this.ref,t,i)})}forEachChild(e){if(this.ref[x]){if("string"!=typeof this.ref[x])for(let[t,i]of this.ref.entries())e(i[b],this.indexes?.[t]??t)}else for(let t of this.metadata?.[S]??[]){let i=this.metadata[t],r=this.ref[i.name];r&&e(r[b],t)}}operation(e){void 0!==this.filteredChanges?(this.filteredChanges.operations.push(-e),this.root?.enqueueChangeTree(this,"filteredChanges")):(this.changes.operations.push(-e),this.root?.enqueueChangeTree(this,"changes"))}change(t,i=e.OPERATION.ADD){let r=this.isFiltered||this.metadata?.[t]?.tag!==void 0,n=r?this.filteredChanges:this.changes,s=this.indexedOperations[t];if(!s||s===e.OPERATION.DELETE){let r=s&&s===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:i;this.indexedOperations[t]=r}ev(n,t),r?(ev(this.allFilteredChanges,t),this.root&&(this.root.enqueueChangeTree(this,"filteredChanges"),this.root.enqueueChangeTree(this,"allFilteredChanges"))):(ev(this.allChanges,t),this.root?.enqueueChangeTree(this,"changes"))}shiftChangeIndexes(e){let t=this.isFiltered?this.filteredChanges:this.changes,i={},r={};for(let n in this.indexedOperations)i[Number(n)+e]=this.indexedOperations[n],r[Number(n)+e]=t.indexes[n];this.indexedOperations=i,t.indexes=r,t.operations=t.operations.map(t=>t+e)}shiftAllChangeIndexes(e,t=0){void 0!==this.filteredChanges&&this._shiftAllChangeIndexes(e,t,this.allFilteredChanges),this._shiftAllChangeIndexes(e,t,this.allChanges)}_shiftAllChangeIndexes(e,t=0,i){let r={},n=0;for(let e in i.indexes)r[n++]=i.indexes[e];i.indexes=r;for(let r=0;r<i.operations.length;r++){let n=i.operations[r];n>t&&(i.operations[r]=n+e)}}indexedOperation(e,t,i=e){this.indexedOperations[e]=t,void 0!==this.filteredChanges?(ev(this.allFilteredChanges,i),ev(this.filteredChanges,e),this.root?.enqueueChangeTree(this,"filteredChanges")):(ev(this.allChanges,i),ev(this.changes,e),this.root?.enqueueChangeTree(this,"changes"))}getType(e){return this.ref[x]||this.metadata[e].type}getChange(e){return this.indexedOperations[e]}getValue(e,t=!1){return this.ref[v](e,t)}delete(t,i,r=t){if(void 0===t){try{throw Error(`@colyseus/schema ${this.ref.constructor.name}: trying to delete non-existing index '${t}'`)}catch(e){console.warn(e)}return}let n=void 0!==this.filteredChanges?this.filteredChanges:this.changes;this.indexedOperations[t]=i??e.OPERATION.DELETE,ev(n,t),ey(this.allChanges,r);let s=this.getValue(t);return s&&s[b]&&this.root?.remove(s[b]),void 0!==this.filteredChanges?(ey(this.allFilteredChanges,r),this.root?.enqueueChangeTree(this,"filteredChanges")):this.root?.enqueueChangeTree(this,"changes"),s}endEncode(e){this.indexedOperations={},this[e]=eg(),this.ref[E]?.(),this.isNew=!1}discard(e=!1){this.ref[E]?.(),this.indexedOperations={},this.changes=eg(this.changes.queueRootNode),void 0!==this.filteredChanges&&(this.filteredChanges=eg(this.filteredChanges.queueRootNode)),e&&(this.allChanges=eg(this.allChanges.queueRootNode),void 0!==this.allFilteredChanges&&(this.allFilteredChanges=eg(this.allFilteredChanges.queueRootNode)))}discardAll(){let e=Object.keys(this.indexedOperations);for(let t=0,i=e.length;t<i;t++){let i=this.getValue(Number(e[t]));i&&i[b]&&i[b].discardAll()}this.discard()}get changed(){return Object.entries(this.indexedOperations).length>0}checkIsFiltered(e,t,i){this.root.types.hasFilters&&(this._checkFilteredByParent(e,t),void 0!==this.filteredChanges&&(this.root?.enqueueChangeTree(this,"filteredChanges"),i&&this.root?.enqueueChangeTree(this,"allFilteredChanges"))),!this.isFiltered&&(this.root?.enqueueChangeTree(this,"changes"),i&&this.root?.enqueueChangeTree(this,"allChanges"))}_checkFilteredByParent(e,t){let i;if(!e)return;let r=ep.isValidInstance(this.ref)?this.ref.constructor:this.ref[x],n=!ep.isValidInstance(e);n?(e=(i=e[b]).parent,t=i.parentIndex):i=e[b];let s=e.constructor,a=`${this.root.types.getTypeId(r)}`;s&&(a+=`-${this.root.types.schemas.get(s)}`),a+=`-${t}`;let o=ep.hasViewTagAtIndex(s?.[Symbol.metadata],t);this.isFiltered=e[b].isFiltered||this.root.types.parentFiltered[a]||o,this.isFiltered&&(this.isVisibilitySharedWithParent=i.isFiltered&&"string"!=typeof r&&!o&&n,this.filteredChanges||(this.filteredChanges=eg(),this.allFilteredChanges=eg()),this.changes.operations.length>0&&(this.changes.operations.forEach(e=>ev(this.filteredChanges,e)),this.allChanges.operations.forEach(e=>ev(this.allFilteredChanges,e)),this.changes=eg(),this.allChanges=eg()))}get parent(){return this.parentChain?.ref}get parentIndex(){return this.parentChain?.index}addParent(e,t){if(this.hasParent((t,i)=>t[b]===e[b])){this.parentChain.index=t;return}this.parentChain={ref:e,index:t,next:this.parentChain}}removeParent(e=this.parent){let t=this.parentChain,i=null;for(;t;){if(t.ref[b]===e[b])return i?i.next=t.next:this.parentChain=t.next,!0;i=t,t=t.next}return void 0===this.parentChain}findParent(e){let t=this.parentChain;for(;t;){if(e(t.ref,t.index))return t;t=t.next}}hasParent(e){return void 0!==this.findParent(e)}getAllParents(){let e=[],t=this.parentChain;for(;t;)e.push({ref:t.ref,index:t.index}),t=t.next;return e}}function ex(t,i,r,n,s,a){"string"==typeof r?W[r]?.(i,n,a):void 0!==r[Symbol.metadata]?(W.number(i,n[b].refId,a),(s&e.OPERATION.ADD)===e.OPERATION.ADD&&t.tryEncodeTypeId(i,r,n.constructor,a)):W.number(i,n[b].refId,a)}let eE=function(t,i,r,n,s,a,o,h,c){if(i[a.offset++]=(n|s)&255,s===e.OPERATION.DELETE)return;let l=r.ref,d=c[n];ex(t,i,c[n].type,l[d.name],s,a)},eT=function(t,i,r,n,s,a){if(i[a.offset++]=255&s,W.number(i,n,a),s===e.OPERATION.DELETE)return;let o=r.ref;if((s&e.OPERATION.ADD)===e.OPERATION.ADD&&"function"==typeof o.set){let e=r.ref.$indexes.get(n);W.string(i,e,a)}ex(t,i,o[x],o[v](n),s,a)},eA=function(t,i,r,n,s,a,o,h){let c,l=r.ref;if(h&&r.isFiltered&&"string"!=typeof r.getType(n)){let t=l.tmpItems[n];if(!t)return;c=t[b].refId,s===e.OPERATION.DELETE?s=e.OPERATION.DELETE_BY_REFID:s===e.OPERATION.ADD&&(s=e.OPERATION.ADD_BY_REFID)}else c=n;i[a.offset++]=255&s,W.number(i,c,a),s===e.OPERATION.DELETE||s===e.OPERATION.DELETE_BY_REFID||ex(t,i,r.getType(n),r.getValue(n,o),s,a)};function ew(t,i,r,n,s,a,o,h){let c,l=t.root,d=r[v](n);if((i&e.OPERATION.DELETE)===e.OPERATION.DELETE){let t=l.refIds.get(d);void 0!==t&&l.removeRef(t),i!==e.OPERATION.DELETE_AND_ADD&&r[y](n),c=void 0}if(i===e.OPERATION.DELETE);else if(eU.is(s)){let r=eh.number(a,o);if(c=l.refs.get(r),(i&e.OPERATION.ADD)===e.OPERATION.ADD){let n=t.getInstanceType(a,o,s);c||(c=t.createInstanceOfType(n)),l.addRef(r,c,c!==d||i===e.OPERATION.DELETE_AND_ADD&&c===d)}}else if("string"==typeof s)c=eh[s](a,o);else{let t=ec[Object.keys(s)[0]],r=eh.number(a,o),n=l.refs.has(r)?d||l.refs.get(r):new t.constructor;if((c=n.clone(!0))[x]=Object.values(s)[0],d){let t=l.refIds.get(d);if(void 0!==t&&r!==t){let i,r=d.entries();for(;(i=r.next())&&!i.done;){let[r,n]=i.value;"object"==typeof n&&(t=l.refIds.get(n),l.removeRef(t)),h.push({ref:d,refId:t,op:e.OPERATION.DELETE,field:r,value:void 0,previousValue:n})}}}l.addRef(r,c,n!==d||i===e.OPERATION.DELETE_AND_ADD&&n===d)}return{value:c,previousValue:d}}let eS=function(e,t,i,r,n){let s=t[i.offset++],a=r.constructor[Symbol.metadata],o=s>>6<<6,h=s%(o||255),c=a[h];if(void 0===c)return console.warn("@colyseus/schema: field not defined at",{index:h,ref:r.constructor.name,metadata:a}),-1;let{value:l,previousValue:d}=ew(e,o,r,h,c.type,t,i,n);null!=l&&(r[c.name]=l),d!==l&&n.push({ref:r,refId:e.currentRefId,op:o,field:c.name,value:l,previousValue:d})},eC=function(t,i,r,n,s){let a,o=i[r.offset++];if(o===e.OPERATION.CLEAR){t.removeChildRefs(n,s),n.clear();return}let h=eh.number(i,r),c=n[x];(o&e.OPERATION.ADD)===e.OPERATION.ADD?"function"==typeof n.set?(a=eh.string(i,r),n.setIndex(h,a)):a=h:a=n.getIndex(h);let{value:l,previousValue:d}=ew(t,o,n,h,c,i,r,s);if(null!=l){if("function"==typeof n.set)n.$items.set(a,l);else if("function"==typeof n.$setAt)n.$setAt(h,l,o);else if("function"==typeof n.add){let e=n.add(l);"number"==typeof e&&n.setIndex(e,e)}}d!==l&&s.push({ref:n,refId:t.currentRefId,op:o,field:"",dynamicIndex:a,value:l,previousValue:d})},eI=function(t,i,r,n,s){let a,o=i[r.offset++];if(o===e.OPERATION.CLEAR){t.removeChildRefs(n,s),n.clear();return}if(o===e.OPERATION.REVERSE)return void n.reverse();if(o===e.OPERATION.DELETE_BY_REFID){let o=eh.number(i,r),h=t.root.refs.get(o);a=n.findIndex(e=>e===h),n[y](a),s.push({ref:n,refId:t.currentRefId,op:e.OPERATION.DELETE,field:"",dynamicIndex:a,value:void 0,previousValue:h});return}if(o===e.OPERATION.ADD_BY_REFID){let e=eh.number(i,r),s=t.root.refs.get(e);s&&(a=n.findIndex(e=>e===s)),(-1===a||void 0===a)&&(a=n.length)}else a=eh.number(i,r);let h=n[x],c=a,{value:l,previousValue:d}=ew(t,o,n,a,h,i,r,s);null!=l&&l!==d&&n.$setAt(a,l,o),d!==l&&s.push({ref:n,refId:t.currentRefId,op:o,field:"",dynamicIndex:c,value:l,previousValue:d})};class e_ extends Error{}function eO(e,t,i,r){if(!(e instanceof t))throw new e_(`a '${t.name}' was expected, but '${e&&e.constructor.name}' was provided in ${i.constructor.name}#${r}`)}let eP=(e,t)=>{let i=e.toString(),r=t.toString();return i<r?-1:+(i>r)};class eM{static{this[t]=eA}static{this[i]=eI}static[(t=p,i=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible(e.tmpItems[t]?.[b])}static is(e){return Array.isArray(e)||void 0!==e.array}static from(e){return new eM(...Array.from(e))}constructor(...t){this.items=[],this.tmpItems=[],this.deletedIndexes={},this.isMovingItems=!1,Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0});let i=new Proxy(this,{get:(e,t)=>"symbol"==typeof t||isNaN(t)?Reflect.get(e,t):this.items[t],set:(t,i,r)=>{if("symbol"==typeof i||isNaN(i))return Reflect.set(t,i,r);if(null==r)t.$deleteAt(i);else{if(r[b]){eO(r,t[x],t,i);let n=t.items[i];t.isMovingItems?(void 0!==n?r[b].isNew?t[b].indexedOperation(Number(i),e.OPERATION.MOVE_AND_ADD):(t[b].getChange(Number(i))&e.OPERATION.DELETE)===e.OPERATION.DELETE?t[b].indexedOperation(Number(i),e.OPERATION.DELETE_AND_MOVE):t[b].indexedOperation(Number(i),e.OPERATION.MOVE):r[b].isNew&&t[b].indexedOperation(Number(i),e.OPERATION.ADD),r[b].setParent(this,t[b].root,i)):t.$changeAt(Number(i),r),void 0!==n&&n[b].root?.remove(n[b])}else t.$changeAt(Number(i),r);t.items[i]=r,t.tmpItems[i]=r}return!0},deleteProperty:(e,t)=>("number"==typeof t?e.$deleteAt(t):delete e[t],!0),has:(e,t)=>"symbol"==typeof t||isNaN(Number(t))?Reflect.has(e,t):Reflect.has(this.items,t)});return Object.defineProperty(this,b,{value:new eb(i),enumerable:!1,writable:!0}),t.length>0&&this.push(...t),i}set length(e){0===e?this.clear():e<this.items.length?this.splice(e,this.length-e):console.warn("ArraySchema: can't set .length to a higher value than its length.")}get length(){return this.items.length}push(...t){let i=this.tmpItems.length,r=this[b];for(let n=0,s=t.length;n<s;n++,i++){let s=t[n];if(null==s)return;"object"==typeof s&&this[x]&&eO(s,this[x],this,n),r.indexedOperation(i,e.OPERATION.ADD,this.items.length),this.items.push(s),this.tmpItems.push(s),s[b]?.setParent(this,r.root,i)}return i}pop(){let e=-1;for(let t=this.tmpItems.length-1;t>=0;t--)if(!0!==this.deletedIndexes[t]){e=t;break}if(!(e<0))return this[b].delete(e,void 0,this.items.length-1),this.deletedIndexes[e]=!0,this.items.pop()}at(e){return e<0&&(e+=this.length),this.items[e]}$changeAt(t,i){if(null==i)return void console.error("ArraySchema items cannot be null nor undefined; Use `deleteAt(index)` instead.");if(this.items[t]===i)return;let r=void 0!==this.items[t]?"object"==typeof i?e.OPERATION.DELETE_AND_ADD:e.OPERATION.REPLACE:e.OPERATION.ADD,n=this[b];n.change(t,r),i[b]?.setParent(this,n.root,t)}$deleteAt(e,t){this[b].delete(e,t)}$setAt(t,i,r){0===t&&r===e.OPERATION.ADD&&void 0!==this.items[t]?this.items.unshift(i):(r===e.OPERATION.DELETE_AND_MOVE&&this.items.splice(t,1),this.items[t]=i)}clear(){if(0===this.items.length)return;let t=this[b];t.forEachChild((e,i)=>{t.root?.remove(e)}),t.discard(!0),t.operation(e.OPERATION.CLEAR),this.items.length=0,this.tmpItems.length=0}concat(...e){return new eM(...this.items.concat(...e))}join(e){return this.items.join(e)}reverse(){return this[b].operation(e.OPERATION.REVERSE),this.items.reverse(),this.tmpItems.reverse(),this}shift(){if(0===this.items.length)return;let t=this[b],i=this.tmpItems.findIndex(e=>e===this.items[0]),r=this.items.findIndex(e=>e===this.items[0]);return t.delete(i,e.OPERATION.DELETE,r),t.shiftAllChangeIndexes(-1,r),this.deletedIndexes[i]=!0,this.items.shift()}slice(e,t){let i=new eM;return i.push(...this.items.slice(e,t)),i}sort(t=eP){this.isMovingItems=!0;let i=this[b];return this.items.sort(t).forEach((t,r)=>i.change(r,e.OPERATION.REPLACE)),this.tmpItems.sort(t),this.isMovingItems=!1,this}splice(t,i,...r){let n=this[b],s=this.items.length,a=this.tmpItems.length,o=r.length,h=[];for(let e=0;e<a;e++)!0!==this.deletedIndexes[e]&&h.push(e);if(s>t){void 0===i&&(i=s-t);for(let r=t;r<t+i;r++){let t=h[r];n.delete(t,e.OPERATION.DELETE),this.deletedIndexes[t]=!0}}else i=0;if(o>0){if(o>i)throw console.error("Inserting more elements than deleting during ArraySchema#splice()"),Error("ArraySchema#splice(): insertCount must be equal or lower than deleteCount.");for(let i=0;i<o;i++){let a=(h[t]??s)+i;n.indexedOperation(a,this.deletedIndexes[a]?e.OPERATION.DELETE_AND_ADD:e.OPERATION.ADD),r[i][b]?.setParent(this,n.root,a)}}return i>o&&n.shiftAllChangeIndexes(-(i-o),h[t+o]),void 0!==n.filteredChanges?n.root?.enqueueChangeTree(n,"filteredChanges"):n.root?.enqueueChangeTree(n,"changes"),this.items.splice(t,i,...r)}unshift(...t){let i=this[b];return i.shiftChangeIndexes(t.length),i.isFiltered?ev(i.filteredChanges,this.items.length):ev(i.allChanges,this.items.length),t.forEach((t,r)=>{i.change(r,e.OPERATION.ADD)}),this.tmpItems.unshift(...t),this.items.unshift(...t)}indexOf(e,t){return this.items.indexOf(e,t)}lastIndexOf(e,t=this.length-1){return this.items.lastIndexOf(e,t)}every(e,t){return this.items.every(e,t)}some(e,t){return this.items.some(e,t)}forEach(e,t){return this.items.forEach(e,t)}map(e,t){return this.items.map(e,t)}filter(e,t){return this.items.filter(e,t)}reduce(e,t){return this.items.reduce(e,t)}reduceRight(e,t){return this.items.reduceRight(e,t)}find(e,t){return this.items.find(e,t)}findIndex(e,t){return this.items.findIndex(e,t)}fill(e,t,i){throw Error("ArraySchema#fill() not implemented")}copyWithin(e,t,i){throw Error("ArraySchema#copyWithin() not implemented")}toString(){return this.items.toString()}toLocaleString(){return this.items.toLocaleString()}[Symbol.iterator](){return this.items[Symbol.iterator]()}static get[Symbol.species](){return eM}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}includes(e,t){return this.items.includes(e,t)}flatMap(e,t){throw Error("ArraySchema#flatMap() is not supported.")}flat(e){throw Error("ArraySchema#flat() is not supported.")}findLast(){return this.items.findLast.apply(this.items,arguments)}findLastIndex(){return this.items.findLastIndex.apply(this.items,arguments)}with(e,t){let i=this.items.slice();return e<0&&(e+=this.length),i[e]=t,new eM(...i)}toReversed(){return this.items.slice().reverse()}toSorted(e){return this.items.slice().sort(e)}toSpliced(e,t){return this.items.toSpliced.apply(copy,arguments)}shuffle(){return this.move(e=>{let t=this.items.length;for(;0!=t;){let e=Math.floor(Math.random()*t);t--,[this[t],this[e]]=[this[e],this[t]]}})}move(e){return this.isMovingItems=!0,e(this),this.isMovingItems=!1,this}[v](e,t=!1){return t||this.deletedIndexes[e]?this.items[e]:this.tmpItems[e]||this.items[e]}[y](e){this.items[e]=void 0,this.tmpItems[e]=void 0}[E](){this.tmpItems=this.items.slice(),this.deletedIndexes={}}[T](){this.items=this.items.filter(e=>void 0!==e),this.tmpItems=this.items.slice()}toArray(){return this.items.slice(0)}toJSON(){return this.toArray().map(e=>"function"==typeof e.toJSON?e.toJSON():e)}clone(e){let t;return e?(t=new eM).push(...this.items):t=new eM(...this.map(e=>e[b]?e.clone():e)),t}}ed("array",{constructor:eM});class eR{static{this[r]=eT}static{this[s]=eC}static[(r=p,s=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.map}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={};let t=new eb(this);if(t.indexes={},Object.defineProperty(this,b,{value:t,enumerable:!1,writable:!0}),e)if(e instanceof Map||e instanceof eR)e.forEach((e,t)=>this.set(t,e));else for(let t in e)this.set(t,e[t]);Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}[Symbol.iterator](){return this.$items[Symbol.iterator]()}get[Symbol.toStringTag](){return this.$items[Symbol.toStringTag]}static get[Symbol.species](){return eR}set(t,i){let r,n;if(null==i)throw Error(`MapSchema#set('${t}', ${i}): trying to set ${i} value on '${t}'.`);"object"==typeof i&&this[x]&&eO(i,this[x],this,t),t=t.toString();let s=this[b],a=void 0!==i[b];if(void 0!==s.indexes[t]){r=s.indexes[t],n=e.OPERATION.REPLACE;let o=this.$items.get(t);if(o===i)return;a&&(n=e.OPERATION.DELETE_AND_ADD,void 0!==o&&o[b].root?.remove(o[b])),this.deletedItems[r]&&delete this.deletedItems[r]}else r=s.indexes[w]??0,n=e.OPERATION.ADD,this.$indexes.set(r,t),s.indexes[t]=r,s.indexes[w]=r+1;return this.$items.set(t,i),s.change(r,n),a&&i[b].setParent(this,s.root,r),this}get(e){return this.$items.get(e)}delete(e){let t=this[b].indexes[e];return this.deletedItems[t]=this[b].delete(t),this.$items.delete(e)}clear(){let t=this[b];t.discard(!0),t.indexes={},t.forEachChild((e,i)=>{t.root?.remove(e)}),this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){return this.$items.has(e)}forEach(e){this.$items.forEach(e)}entries(){return this.$items.entries()}keys(){return this.$items.keys()}values(){return this.$items.values()}get size(){return this.$items.size}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){let e=this[b];for(let t in this.deletedItems){let i=parseInt(t),r=this.$indexes.get(i);delete e.indexes[r],this.$indexes.delete(i)}this.deletedItems={}}toJSON(){let e={};return this.forEach((t,i)=>{e[i]="function"==typeof t.toJSON?t.toJSON():t}),e}clone(e){let t;return e?t=Object.assign(new eR,this):(t=new eR,this.forEach((e,i)=>{e[b]?t.set(i,e.clone()):t.set(i,e)})),t}}ed("map",{constructor:eR});class eL{static{this[a]=eT}static{this[o]=eC}static[(a=p,o=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.collection}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={},this.$refId=0,this[b]=new eb(this),this[b].indexes={},e&&e.forEach(e=>this.add(e)),Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}add(e){let t=this.$refId++;return void 0!==e[b]&&e[b].setParent(this,this[b].root,t),this[b].indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this[b].change(t),t}at(e){let t=Array.from(this.$items.keys())[e];return this.$items.get(t)}entries(){return this.$items.entries()}delete(e){let t,i,r=this.$items.entries();for(;(i=r.next())&&!i.done;)if(e===i.value[1]){t=i.value[0];break}return void 0!==t&&(this.deletedItems[t]=this[b].delete(t),this.$indexes.delete(t),this.$items.delete(t))}clear(){let t=this[b];t.discard(!0),t.indexes={},t.forEachChild((e,i)=>{t.root?.remove(e)}),this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){return Array.from(this.$items.values()).some(t=>t===e)}forEach(e){this.$items.forEach((t,i,r)=>e(t,i,this))}values(){return this.$items.values()}get size(){return this.$items.size}[Symbol.iterator](){return this.$items.values()}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){this.deletedItems={}}toArray(){return Array.from(this.$items.values())}toJSON(){let e=[];return this.forEach((t,i)=>{e.push("function"==typeof t.toJSON?t.toJSON():t)}),e}clone(e){let t;return e?t=Object.assign(new eL,this):(t=new eL,this.forEach(e=>{e[b]?t.add(e.clone()):t.add(e)})),t}}ed("collection",{constructor:eL});class eD{static{this[h]=eT}static{this[c]=eC}static[(h=p,c=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.visible.has((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.set}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={},this.$refId=0,this[b]=new eb(this),this[b].indexes={},e&&e.forEach(e=>this.add(e)),Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}add(t){if(this.has(t))return!1;let i=this.$refId++;void 0!==t[b]&&t[b].setParent(this,this[b].root,i);let r=this[b].indexes[i]?.op??e.OPERATION.ADD;return this[b].indexes[i]=i,this.$indexes.set(i,i),this.$items.set(i,t),this[b].change(i,r),i}entries(){return this.$items.entries()}delete(e){let t,i,r=this.$items.entries();for(;(i=r.next())&&!i.done;)if(e===i.value[1]){t=i.value[0];break}return void 0!==t&&(this.deletedItems[t]=this[b].delete(t),this.$indexes.delete(t),this.$items.delete(t))}clear(){let t=this[b];t.discard(!0),t.indexes={},this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){let t,i=this.$items.values(),r=!1;for(;(t=i.next())&&!t.done;)if(e===t.value){r=!0;break}return r}forEach(e){this.$items.forEach((t,i,r)=>e(t,i,this))}values(){return this.$items.values()}get size(){return this.$items.size}[Symbol.iterator](){return this.$items.values()}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){this.deletedItems={}}toArray(){return Array.from(this.$items.values())}toJSON(){let e=[];return this.forEach((t,i)=>{e.push("function"==typeof t.toJSON?t.toJSON():t)}),e}clone(e){let t;return e?t=Object.assign(new eD,this):(t=new eD,this.forEach(e=>{e[b]?t.add(e.clone()):t.add(e)})),t}}function ek(e=-1){return function(t,i){let r=t.constructor,n=Object.getPrototypeOf(r)[Symbol.metadata],s=r[Symbol.metadata]??=Object.assign({},r[Symbol.metadata],n??Object.create(null));ep.setTag(s,i,e)}}function eN(e,t){return function(i,r){let n=i.constructor;if(!e)throw Error(`${n.name}: @type() reference provided for "${r}" is undefined. Make sure you don't have any circular dependencies.`);e=ef(e),eu.register(n);let s=Object.getPrototypeOf(n)[Symbol.metadata],a=ep.initialize(n),o=a[r];if(void 0!==a[o]){if(a[o].deprecated)return;else if(void 0!==a[o].type)try{throw Error(`@colyseus/schema: Duplicate '${r}' definition on '${n.name}'.
Check @type() annotation`)}catch(t){let e=t.stack.split("\n")[4].trim();throw Error(`${t.message} ${e}`)}}else o=a[w]??(s&&s[w])??-1,o++;if(t&&t.manual)ep.addField(a,o,r,e,{enumerable:!0,configurable:!0,writable:!0});else{let t="string"==typeof Object.keys(e)[0]&&ec[Object.keys(e)[0]],i=t?Object.values(e)[0]:e;ep.addField(a,o,r,e,eF(`_${r}`,o,i,t))}}}function eF(t,i,r,n){return{get:function(){return this[t]},set:function(s){let a=this[t]??void 0;if(s!==a){if(null!=s){n?(n.constructor!==eM||s instanceof eM||(s=new eM(...s)),n.constructor!==eR||s instanceof eR||(s=new eR(s)),s[x]=r):"string"!=typeof r?eO(s,r,this,t.substring(1)):function(e,t,i,r){let n,s=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":n="number",isNaN(e)&&console.log(`trying to encode "NaN" in ${i.constructor.name}#${r}`);break;case"bigint64":case"biguint64":n="bigint";break;case"string":n="string",s=!0;break;default:return}if(typeof e!==n&&(!s||s&&null!==e)){let t=`'${JSON.stringify(e)}'${e&&e.constructor&&` (${e.constructor.name})`||""}`;throw new e_(`a '${n}' was expected, but ${t} was provided in ${i.constructor.name}#${r}`)}}(s,r,this,t.substring(1));let o=this[b];void 0!==a&&a[b]?(o.root?.remove(a[b]),this.constructor[f](o,i,e.OPERATION.DELETE_AND_ADD)):this.constructor[f](o,i,e.OPERATION.ADD),s[b]?.setParent(this,o.root,i)}else void 0!==a&&this[b].delete(i);this[t]=s}},enumerable:!0,configurable:!0}}function eB(e){return Array(e).fill(0).map((t,i)=>i===e-1?`\u{2514}\u{2500} `:"   ").join("")}ed("set",{constructor:eD});class eU{static{this[l]=eE}static{this[d]=eS}static initialize(e){Object.defineProperty(e,b,{value:new eb(e),enumerable:!1,writable:!0}),Object.defineProperties(e,e.constructor[Symbol.metadata]?.[A]||{})}static is(e){return"object"==typeof e[Symbol.metadata]}static[(l=p,d=g,f)](t,i,r=e.OPERATION.ADD){t.change(i,r)}static[m](e,t,i){let r=e.constructor[Symbol.metadata],n=r[t]?.tag;if(void 0===i)return void 0===n;{if(void 0===n)return!0;if(-1===n)return i.isChangeTreeVisible(e[b]);let t=i.tags?.get(e[b]);return t&&t.has(n)}}constructor(...e){eU.initialize(this),e[0]&&Object.assign(this,e[0])}assign(e){return Object.assign(this,e),this}setDirty(e,t){let i=this.constructor[Symbol.metadata];this[b].change(i[i[e]].index,t)}clone(){let e=new this.constructor,t=this.constructor[Symbol.metadata];for(let i in t){let r=t[i].name;"object"==typeof this[r]&&"function"==typeof this[r]?.clone?e[r]=this[r].clone():e[r]=this[r]}return e}toJSON(){let e={},t=this.constructor[Symbol.metadata];for(let i in t){let r=t[i],n=r.name;r.deprecated||null===this[n]||void 0===this[n]||(e[n]="function"==typeof this[n].toJSON?this[n].toJSON():this[n])}return e}discardAllChanges(){this[b].discardAll()}[v](e){return this[this.constructor[Symbol.metadata][e].name]}[y](e){this[this.constructor[Symbol.metadata][e].name]=void 0}static debugRefIds(e,t=!1,i=0,r,n=""){let s=t?` - ${JSON.stringify(e.toJSON())}`:"",a=e[b],o=r?r.root.refIds.get(e):a.refId,h=r?r.root:a.root,c=h?.refCount?.[o]>1?` [\xd7${h.refCount[o]}]`:"",l=`${eB(i)}${n}${e.constructor.name} (refId: ${o})${c}${s}
`;return a.forEachChild((n,s)=>{let a=s;"number"==typeof s&&e.$indexes&&(a=e.$indexes.get(s)??s);let o=void 0!==e.forEach&&void 0!==a?`["${a}"]: `:"";l+=this.debugRefIds(n.ref,t,i+1,r,o)}),l}static debugRefIdEncodingOrder(e,t="allChanges"){let i=[],r=e[b].root[t].next;for(;r;)r.changeTree&&i.push(r.changeTree.refId),r=r.next;return i}static debugRefIdsFromDecoder(e){return this.debugRefIds(e.state,!1,0,e)}static debugChanges(t,i=!1){let r=t[b],n=i?r.allChanges:r.changes,s=i?"allChanges":"changes",a=`${t.constructor.name} (${r.refId}) -> .${s}:
`;function o(t){t.operations.filter(e=>e).forEach(t=>{let n=r.indexedOperations[t];a+=`- [${t}]: ${e.OPERATION[n]} (${JSON.stringify(r.getValue(Number(t),i))})
`})}return o(n),!i&&r.filteredChanges&&r.filteredChanges.operations.filter(e=>e).length>0&&(a+=`${t.constructor.name} (${r.refId}) -> .filteredChanges:
`,o(r.filteredChanges)),i&&r.allFilteredChanges&&r.allFilteredChanges.operations.filter(e=>e).length>0&&(a+=`${t.constructor.name} (${r.refId}) -> .allFilteredChanges:
`,o(r.allFilteredChanges)),a}static debugChangesDeep(t,i="changes"){let r="",n=t[b],s=n.root,a=new Map,o=[],h=0;for(let[e,r]of Object.entries(s[i])){let i=s.changeTrees[e];if(!i)continue;let c=!1,l=[],d=i.parent?.[b];if(i===n)c=!0;else for(;void 0!==d;){if(l.push(d),d.ref===t){c=!0;break}d=d.parent?.[b]}c&&(o.push(i.refId),h+=Object.keys(r).length,a.set(i,l.reverse()))}r+=`---
root refId: ${n.refId}
Total instances: ${o.length} (refIds: ${o.join(", ")})
Total changes: ${h}
---
`;let c=new WeakSet;for(let[t,i]of a.entries()){i.forEach((e,t)=>{c.has(e)||(r+=`${eB(t)}${e.ref.constructor.name} (refId: ${e.refId})
`,c.add(e))});let n=t.indexedOperations,s=i.length,a=eB(s),o=s>0?`(${t.parentIndex}) `:"";for(let i in r+=`${a}${o}${t.ref.constructor.name} (refId: ${t.refId}) - changes: ${Object.keys(n).length}
`,n){let t=n[i];r+=`${eB(s+1)}${e.OPERATION[t]}: ${i}
`}}return`${r}`}}function eG(e,t,i,r){var n,s=arguments.length,a=s<3?t:r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}"function"==typeof SuppressedError&&SuppressedError;class eV{constructor(e){this.types=e,this.nextUniqueId=0,this.refCount={},this.changeTrees={},this.allChanges=em(),this.allFilteredChanges=em(),this.changes=em(),this.filteredChanges=em()}getNextUniqueId(){return this.nextUniqueId++}add(t){void 0===t.refId&&(t.refId=this.getNextUniqueId());let i=void 0===this.changeTrees[t.refId];i&&(this.changeTrees[t.refId]=t);let r=this.refCount[t.refId];if(0===r){let i=t.allChanges.operations,r=i.length;for(;r--;)t.indexedOperations[i[r]]=e.OPERATION.ADD,ev(t.changes,r)}return this.refCount[t.refId]=(r||0)+1,i}remove(e){let t=this.refCount[e.refId]-1;return t<=0?(e.root=void 0,delete this.changeTrees[e.refId],this.removeChangeFromChangeSet("allChanges",e),this.removeChangeFromChangeSet("changes",e),e.filteredChanges&&(this.removeChangeFromChangeSet("allFilteredChanges",e),this.removeChangeFromChangeSet("filteredChanges",e)),this.refCount[e.refId]=0,e.forEachChild((t,i)=>{t.removeParent(e.ref)&&(void 0===t.parentChain||t.parentChain&&this.refCount[t.refId]>0?this.remove(t):t.parentChain&&this.moveNextToParent(t))})):(this.refCount[e.refId]=t,this.recursivelyMoveNextToParent(e)),t}recursivelyMoveNextToParent(e){this.moveNextToParent(e),e.forEachChild((e,t)=>this.recursivelyMoveNextToParent(e))}moveNextToParent(e){e.filteredChanges?(this.moveNextToParentInChangeTreeList("filteredChanges",e),this.moveNextToParentInChangeTreeList("allFilteredChanges",e)):(this.moveNextToParentInChangeTreeList("changes",e),this.moveNextToParentInChangeTreeList("allChanges",e))}moveNextToParentInChangeTreeList(e,t){let i=this[e],r=t[e].queueRootNode;if(!r)return;let n=t.parent;if(!n||!n[b])return;let s=n[b][e]?.queueRootNode;if(!s||s===r)return;let a=s.position;r.position>a||(r.prev?r.prev.next=r.next:i.next=r.next,r.next?r.next.prev=r.prev:i.tail=r.prev,r.prev=s,r.next=s.next,s.next?s.next.prev=r:i.tail=r,s.next=r,this.updatePositionsAfterMove(i,r,a+1))}enqueueChangeTree(e,t,i=e[t].queueRootNode){i||(e[t].queueRootNode=this.addToChangeTreeList(this[t],e))}addToChangeTreeList(e,t){let i={changeTree:t,next:void 0,prev:void 0,position:e.tail?e.tail.position+1:0};return e.next?(i.prev=e.tail,e.tail.next=i):e.next=i,e.tail=i,i}updatePositionsAfterRemoval(e,t){let i=e.next,r=0;for(;i;)r>=t&&(i.position=r),i=i.next,r++}updatePositionsAfterMove(e,t,i){let r=e.next,n=0;for(;r;)r.position=n,r=r.next,n++}removeChangeFromChangeSet(e,t){let i=this[e],r=t[e].queueRootNode;if(r&&r.changeTree===t){let n=r.position;return r.prev?r.prev.next=r.next:i.next=r.next,r.next?r.next.prev=r.prev:i.tail=r.prev,this.updatePositionsAfterRemoval(i,n),t[e].queueRootNode=void 0,!0}return!1}}class eY{static{this.BUFFER_SIZE=void 0!==n&&n.poolSize||8192}constructor(e){this.sharedBuffer=n.allocUnsafe(eY.BUFFER_SIZE),this.context=eu.cache(e.constructor),this.root=new eV(this.context),this.setState(e)}setState(e){this.state=e,this.state[b].setRoot(this.root)}encode(t={offset:0},i,r=this.sharedBuffer,s="changes",a="allChanges"===s,o=t.offset){let h=void 0!==i,c=this.state[b],l=this.root[s];for(;l=l.next;){let n=l.changeTree;if(h){if(!i.isChangeTreeVisible(n)){i.invisible.add(n);continue}i.invisible.delete(n)}let d=n[s],u=n.ref,f=d.operations.length;if(0===f)continue;let g=u.constructor,v=g[p],y=g[m],b=g[Symbol.metadata];(h||t.offset>o||n!==c)&&(r[t.offset++]=255,W.number(r,n.refId,t));for(let s=0;s<f;s++){let o=d.operations[s];if(o<0){r[t.offset++]=255&Math.abs(o);continue}let c=a?e.OPERATION.ADD:n.indexedOperations[o];void 0!==o&&void 0!==c&&(!y||y(u,o,i))&&v(this,r,n,o,c,t,a,h,b)}}if(!(t.offset>r.byteLength))return r.subarray(0,t.offset);{let e=Math.ceil(t.offset/(n.poolSize??8192))*(n.poolSize??8192);return console.warn(`@colyseus/schema buffer overflow. Encoded state is higher than default BUFFER_SIZE. Use the following to increase default BUFFER_SIZE:

    import { Encoder } from "@colyseus/schema";
    Encoder.BUFFER_SIZE = ${Math.round(e/1024)} * 1024; // ${Math.round(e/1024)} KB
`),(r=n.alloc(e,r))===this.sharedBuffer&&(this.sharedBuffer=r),this.encode({offset:o},i,r,s,a)}}encodeAll(e={offset:0},t=this.sharedBuffer){return this.encode(e,void 0,t,"allChanges",!0)}encodeAllView(e,t,i,r=this.sharedBuffer){let s=i.offset;return this.encode(i,e,r,"allFilteredChanges",!0,s),n.concat([r.subarray(0,t),r.subarray(s,i.offset)])}debugChanges(t){let i=("string"==typeof t?this.root[t]:t).next;for(;i;){let r=i.changeTree,n=r[t],s=r.ref.constructor[Symbol.metadata];for(let t in console.log("->",{ref:r.ref.constructor.name,refId:r.refId,changes:Object.keys(n).length}),n){let i=n[t];console.log("  ->",{index:t,field:s?.[t],op:e.OPERATION[i]})}i=i.next}}encodeView(t,i,r,s=this.sharedBuffer){let a=r.offset;for(let[i,n]of t.changes){let a=this.root.changeTrees[i];if(void 0===a){t.changes.delete(i);continue}let o=Object.keys(n);if(0===o.length)continue;let h=a.ref.constructor,c=h[p],l=h[Symbol.metadata];s[r.offset++]=255,W.number(s,a.refId,r);for(let t=0,i=o.length;t<i;t++){let i=Number(o[t]),h=void 0!==a.ref[v](i)&&n[i]||e.OPERATION.DELETE;c(this,s,a,i,h,r,!1,!0,l)}}return t.changes.clear(),this.encode(r,t,s,"filteredChanges",!1,a),n.concat([s.subarray(0,i),s.subarray(a,r.offset)])}discardChanges(){let e=this.root.changes.next;for(;e;)e.changeTree.endEncode("changes"),e=e.next;for(this.root.changes=em(),e=this.root.filteredChanges.next;e;)e.changeTree.endEncode("filteredChanges"),e=e.next;this.root.filteredChanges=em()}tryEncodeTypeId(e,t,i,r){let n=this.context.getTypeId(t),s=this.context.getTypeId(i);void 0===s?console.warn(`@colyseus/schema WARNING: Class "${i.name}" is not registered on TypeRegistry - Please either tag the class with @entity or define a @type() field.`):n!==s&&(e[r.offset++]=213,W.number(e,s,r))}get hasChanges(){return void 0!==this.root.changes.next||void 0!==this.root.filteredChanges.next}}function ej(e,t){if(-1===t||t>=e.length)return!1;let i=e.length-1;for(let r=t;r<i;r++)e[r]=e[r+1];return e.length=i,!0}class eW extends Error{constructor(e){super(e),this.name="DecodingWarning"}}class ez{constructor(){this.refs=new Map,this.refIds=new WeakMap,this.refCount={},this.deletedRefs=new Set,this.callbacks={},this.nextUniqueId=0}getNextUniqueId(){return this.nextUniqueId++}addRef(e,t,i=!0){this.refs.set(e,t),this.refIds.set(t,e),i&&(this.refCount[e]=(this.refCount[e]||0)+1),this.deletedRefs.has(e)&&this.deletedRefs.delete(e)}removeRef(e){let t=this.refCount[e];if(void 0===t){try{throw new eW("trying to remove refId that doesn't exist: "+e)}catch(e){console.warn(e)}return}if(0===t){try{let t=this.refs.get(e);throw new eW(`trying to remove refId '${e}' with 0 refCount (${t.constructor.name}: ${JSON.stringify(t)})`)}catch(e){console.warn(e)}return}(this.refCount[e]=t-1)<=0&&this.deletedRefs.add(e)}clearRefs(){this.refs.clear(),this.deletedRefs.clear(),this.callbacks={},this.refCount={}}garbageCollectDeletedRefs(){this.deletedRefs.forEach(e=>{if(this.refCount[e]>0)return;let t=this.refs.get(e);if(void 0!==t.constructor[Symbol.metadata]){let e=t.constructor[Symbol.metadata];for(let i in e){let r=e[i].name,n="object"==typeof t[r]&&this.refIds.get(t[r]);n&&!this.deletedRefs.has(n)&&this.removeRef(n)}}else"function"==typeof t[x]&&Array.from(t.values()).forEach(e=>{let t=this.refIds.get(e);this.deletedRefs.has(t)||this.removeRef(t)});this.refs.delete(e),delete this.refCount[e],delete this.callbacks[e]}),this.deletedRefs.clear()}addCallback(t,i,r){if(void 0===t){let t="number"==typeof i?e.OPERATION[i]:i;throw Error(`Can't addCallback on '${t}' (refId is undefined)`)}return this.callbacks[t]||(this.callbacks[t]={}),this.callbacks[t][i]||(this.callbacks[t][i]=[]),this.callbacks[t][i].push(r),()=>this.removeCallback(t,i,r)}removeCallback(e,t,i){let r=this.callbacks?.[e]?.[t]?.indexOf(i);void 0!==r&&-1!==r&&ej(this.callbacks[e][t],r)}}class eH{constructor(e,t){this.currentRefId=0,this.setState(e),this.context=t||new eu(e.constructor)}setState(e){this.state=e,this.root=new ez,this.root.addRef(0,e)}decode(e,t={offset:0},i=this.state){let r=[],n=this.root,s=e.byteLength,a=i.constructor[g];for(this.currentRefId=0;t.offset<s;){if(255==e[t.offset]){t.offset++,i[T]?.();let r=eh.number(e,t),o=n.refs.get(r);o?(a=(i=o).constructor[g],this.currentRefId=r):(console.error(`"refId" not found: ${r}`,{previousRef:i,previousRefId:this.currentRefId}),console.warn("Please report this issue to the developers."),this.skipCurrentStructure(e,t,s));continue}if(-1===a(this,e,t,i,r)){console.warn("@colyseus/schema: definition mismatch"),this.skipCurrentStructure(e,t,s);continue}}return i[T]?.(),this.triggerChanges?.(r),n.garbageCollectDeletedRefs(),r}skipCurrentStructure(e,t,i){let r={offset:t.offset};for(;t.offset<i&&!(255===e[t.offset]&&(r.offset=t.offset+1,this.root.refs.has(eh.number(e,r))));)t.offset++}getInstanceType(e,t,i){let r;if(213===e[t.offset]){t.offset++;let i=eh.number(e,t);r=this.context.get(i)}return r||i}createInstanceOfType(e){return new e}removeChildRefs(t,i){let r="string"!=typeof t[x],n=this.root.refIds.get(t);t.forEach((s,a)=>{i.push({ref:t,refId:n,op:e.OPERATION.DELETE,field:a,value:void 0,previousValue:s}),r&&this.root.removeRef(this.root.refIds.get(s))})}}class eX extends eU{}eG([eN("string")],eX.prototype,"name",void 0),eG([eN("string")],eX.prototype,"type",void 0),eG([eN("number")],eX.prototype,"referencedType",void 0);class eq extends eU{constructor(){super(...arguments),this.fields=new eM}}eG([eN("number")],eq.prototype,"id",void 0),eG([eN("number")],eq.prototype,"extendsId",void 0),eG([eN([eX])],eq.prototype,"fields",void 0);class eK extends eU{constructor(){super(...arguments),this.types=new eM}static encode(e,t={offset:0}){let i=e.context,r=new eK,s=new eY(r),a=i.schemas.get(e.state.constructor);a>0&&(r.rootType=a);let o=new Set,h={},c=e=>{if(void 0===e.extendsId||o.has(e.extendsId)){o.add(e.id),r.types.push(e);let t=h[e.id];void 0!==t&&(delete h[e.id],t.forEach(e=>c(e)))}else void 0===h[e.extendsId]&&(h[e.extendsId]=[]),h[e.extendsId].push(e)};for(let e in i.schemas.forEach((e,t)=>{let r=new eq;r.id=Number(e);let n=Object.getPrototypeOf(t);n!==eU&&(r.extendsId=i.schemas.get(n));let s=t[Symbol.metadata];if(s!==n[Symbol.metadata])for(let e in s){let t,n=Number(e),a=s[n].name;if(!Object.prototype.hasOwnProperty.call(s,a))continue;let o=new eX;o.name=a;let h=s[n];if("string"==typeof h.type)t=h.type;else{let e;eU.is(h.type)?(t="ref",e=h.type):(t=Object.keys(h.type)[0],"string"==typeof h.type[t]?t+=":"+h.type[t]:e=h.type[t]),o.referencedType=e?i.getTypeId(e):-1}o.type=t,r.fields.push(o)}c(r)}),h)h[e].forEach(e=>r.types.push(e));let l=s.encodeAll(t);return n.from(l,0,t.offset)}static decode(e,t){let i=new eK;new eH(i).decode(e,t);let r=new eu;return i.types.forEach(e=>{let t=r.get(e.extendsId)??eU,i=class extends t{};eu.register(i),r.add(i,e.id)},{}),i.types.forEach(e=>{let t=r.get(e.id),n=ep.initialize(t),s=[],a=e;do s.push(a),a=i.types.find(e=>e.id===a.extendsId);while(a)let o=0;s.reverse().forEach(e=>{var t;t=o,e.fields.forEach((e,i)=>{let s=t+i;if(void 0!==e.referencedType){let t=e.type,i=r.get(e.referencedType);if(!i){let r=e.type.split(":");t=r[0],i=r[1]}"ref"===t?ep.addField(n,s,e.name,i):ep.addField(n,s,e.name,{[t]:i})}else ep.addField(n,s,e.name,e.type)}),o+=e.fields.length})}),new eH(new(r.get(i.rootType||0)),r)}}eG([eN([eq])],eK.prototype,"types",void 0),eG([eN("number")],eK.prototype,"rootType",void 0),ed("map",{constructor:eR}),ed("array",{constructor:eM}),ed("set",{constructor:eD}),ed("collection",{constructor:eL}),e.$changes=b,e.$childType=x,e.$decoder=g,e.$deleteByIndex=y,e.$encoder=p,e.$filter=m,e.$getByIndex=v,e.$track=f,e.ArraySchema=eM,e.ChangeTree=eb,e.CollectionSchema=eL,e.Decoder=eH,e.Encoder=eY,e.MapSchema=eR,e.Metadata=ep,e.Reflection=eK,e.ReflectionField=eX,e.ReflectionType=eq,e.Schema=eU,e.SetSchema=eD,e.StateView=class{constructor(e=!1){this.iterable=e,this.visible=new WeakSet,this.invisible=new WeakSet,this.changes=new Map,e&&(this.items=[])}add(t,i=-1,r=!0){let n=t?.[b],s=n.parent;if(!n)return console.warn("StateView#add(), invalid object:",t),!1;if(!s&&0!==n.refId)throw Error(`Cannot add a detached instance to the StateView. Make sure to assign the "${n.ref.constructor.name}" instance to the state before calling view.add()`);let a=t.constructor[Symbol.metadata];this.visible.add(n),this.iterable&&r&&this.items.push(t),r&&s&&this.addParentOf(n,i);let o=this.changes.get(n.refId);void 0===o&&(o={},this.changes.set(n.refId,o));let h=!1;if(n.forEachChild((e,t)=>{(!a||void 0===a[t].tag||a[t].tag===i)&&this.add(e.ref,i,!1)&&(h=!0)}),-1!==i){let t;this.tags||(this.tags=new WeakMap),this.tags.has(n)?t=this.tags.get(n):(t=new Set,this.tags.set(n,t)),t.add(i),a?.[I]?.[i]?.forEach(t=>{n.getChange(t)!==e.OPERATION.DELETE&&(o[t]=e.OPERATION.ADD)})}else if(!n.isNew||h){let t=void 0!==n.filteredChanges?n.allFilteredChanges:n.allChanges,r=this.invisible.has(n);for(let s=0,c=t.operations.length;s<c;s++){let c=t.operations[s];if(void 0===c)continue;let l=n.indexedOperations[c]??e.OPERATION.ADD,d=a?.[c].tag;l!==e.OPERATION.DELETE&&(r||void 0===d||d===i)&&(o[c]=l,h=!0)}}return h}addParentOf(t,i){let r=t.parent[b],n=t.parentIndex;if(!this.visible.has(r)){this.visible.add(r);let e=r.parent?.[b];e&&void 0!==e.filteredChanges&&this.addParentOf(r,i)}if(r.getChange(n)!==e.OPERATION.DELETE){let t,s=this.changes.get(r.refId);void 0===s&&(s={},this.changes.set(r.refId,s)),this.tags||(this.tags=new WeakMap),this.tags.has(r)?t=this.tags.get(r):(t=new Set,this.tags.set(r,t)),t.add(i),s[n]=e.OPERATION.ADD}}remove(t,i=-1,r=!1){let n=t[b];if(!n)return console.warn("StateView#remove(), invalid object:",t),this;this.visible.delete(n),this.iterable&&!r&&ej(this.items,this.items.indexOf(t));let s=n.ref.constructor[Symbol.metadata],a=this.changes.get(n.refId);if(void 0===a&&(a={},this.changes.set(n.refId,a)),-1===i){let t=n.parent;if(t&&!ep.isValidInstance(t)&&n.isFiltered){let i=t[b],r=this.changes.get(i.refId);void 0===r?(r={},this.changes.set(i.refId,r)):r[n.parentIndex]===e.OPERATION.ADD&&this.changes.delete(n.refId),r[n.parentIndex]=e.OPERATION.DELETE,this._recursiveDeleteVisibleChangeTree(n)}else s?.[C]?.forEach(t=>a[t]=e.OPERATION.DELETE)}else s?.[I][i].forEach(t=>a[t]=e.OPERATION.DELETE);if(this.tags&&this.tags.has(n)){let e=this.tags.get(n);void 0===i?this.tags.delete(n):(e.delete(i),0===e.size&&this.tags.delete(n))}return this}has(e){return this.visible.has(e[b])}hasTag(e,t=-1){let i=this.tags?.get(e[b]);return i?.has(t)??!1}clear(){if(!this.iterable)throw Error("StateView#clear() is only available for iterable StateView's. Use StateView(iterable: true) constructor.");for(let e=0,t=this.items.length;e<t;e++)this.remove(this.items[e],-1,!0);this.items.length=0}isChangeTreeVisible(e){let t=this.visible.has(e);return!t&&e.isVisibilitySharedWithParent&&this.visible.has(e.parent[b])&&(this.visible.add(e),t=!0),t}_recursiveDeleteVisibleChangeTree(e){e.forEachChild(e=>{this.visible.delete(e),this._recursiveDeleteVisibleChangeTree(e)})}},e.TypeContext=eu,e.decode=eh,e.decodeKeyValueOperation=eC,e.decodeSchemaOperation=eS,e.defineCustomTypes=function(e){for(let t in e)ed(t,e[t]);return e=>eN(e)},e.defineTypes=function(e,t,i){for(let r in t)eN(t[r],i)(e.prototype,r);return e},e.deprecated=function(e=!0){return function(t,i){let r=t.constructor,n=Object.getPrototypeOf(r)[Symbol.metadata],s=r[Symbol.metadata]??=Object.assign({},r[Symbol.metadata],n??Object.create(null)),a=s[i];s[a].deprecated=!0,e&&(s[A]??={},s[A][i]={get:function(){throw Error(`${i} is deprecated.`)},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(s,a,{value:s[a],enumerable:!1,configurable:!0})}},e.dumpChanges=function(t){let i=t[b].root,r={ops:{},refs:[]},n=i.changes.next;for(;n;){let t=n.changeTree;if(void 0===t){n=n.next;continue}let i=t.indexedOperations;for(let n in r.refs.push(`refId#${t.refId}`),i){let t=i[n],s=e.OPERATION[t];r.ops[s]||(r.ops[s]=0),r.ops[e.OPERATION[t]]++}n=n.next}return r},e.encode=W,e.encodeArray=eA,e.encodeKeyValueOperation=eT,e.encodeSchemaOperation=eE,e.entity=function(e){return eu.register(e),e},e.getDecoderStateCallbacks=function(t){let i,r=t.root,n=r.callbacks,s=new WeakMap;return t.triggerChanges=function(t){let i=new Set;for(let s=0,a=t.length;s<a;s++){let a=t[s],o=a.refId,h=a.ref,c=n[o];if(c){if((a.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&a.previousValue instanceof eU){let t=n[r.refIds.get(a.previousValue)]?.[e.OPERATION.DELETE];for(let e=t?.length-1;e>=0;e--)t[e]()}if(h instanceof eU){if(!i.has(o)){let t=c?.[e.OPERATION.REPLACE];for(let e=t?.length-1;e>=0;e--)t[e]()}if(c.hasOwnProperty(a.field)){let e=c[a.field];for(let t=e?.length-1;t>=0;t--)e[t](a.value,a.previousValue)}}else{if((a.op&e.OPERATION.DELETE)===e.OPERATION.DELETE){if(void 0!==a.previousValue){let t=c[e.OPERATION.DELETE];for(let e=t?.length-1;e>=0;e--)t[e](a.previousValue,a.dynamicIndex??a.field)}if((a.op&e.OPERATION.ADD)===e.OPERATION.ADD){let t=c[e.OPERATION.ADD];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}}else if((a.op&e.OPERATION.ADD)===e.OPERATION.ADD&&a.previousValue!==a.value){let t=c[e.OPERATION.ADD];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}if(a.value!==a.previousValue&&(void 0!==a.value||void 0!==a.previousValue)){let t=c[e.OPERATION.REPLACE];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}}i.add(o)}}},function t(n){return function n(a,o){let h=o.instance?.constructor[Symbol.metadata]||a,c=o.instance&&"function"==typeof o.instance.forEach||a&&void 0===a[Symbol.metadata];if(h&&!c){let a=function(e,t,n,a){return a&&void 0!==o.instance[t]&&!s.has(i)&&n(o.instance[t],void 0),r.addCallback(r.refIds.get(e),t,n)};return new Proxy({listen:function(e,t,r=!0){if(o.instance)return a(o.instance,e,t,r);{let n=()=>{};return o.onInstanceAvailable((o,h)=>{n=a(o,e,t,r&&h&&!s.has(i))}),()=>n()}},onChange:function(t){return r.addCallback(r.refIds.get(o.instance),e.OPERATION.REPLACE,t)},bindTo:function(t,i){return i||(i=Object.keys(h).map(e=>h[e].name)),r.addCallback(r.refIds.get(o.instance),e.OPERATION.REPLACE,()=>{i.forEach(e=>t[e]=o.instance[e])})}},{get(e,i){let s=h[h[i]];if(!s)return e[i];{let e=o.instance?.[i];return n(s.type,{instance:r.refIds.get(e)&&e,parentInstance:o.instance,onInstanceAvailable:n=>{let s=t(o.instance).listen(i,(e,t)=>{n(e,!1),s?.()},!1);void 0!==r.refIds.get(e)&&n(e,!0)}})}},has:(e,t)=>void 0!==h[t],set(e,t,i){throw Error("not allowed")},deleteProperty(e,t){throw Error("not allowed")}})}{let t=function(t,n,a){return a&&t.forEach((e,t)=>n(e,t)),r.addCallback(r.refIds.get(t),e.OPERATION.ADD,(e,t)=>{s.set(n,!0),i=n,n(e,t),s.delete(n),i=void 0})},n=function(t,i){return r.addCallback(r.refIds.get(t),e.OPERATION.DELETE,i)},a=function(t,i){return r.addCallback(r.refIds.get(t),e.OPERATION.REPLACE,i)};return new Proxy({onAdd:function(e,r=!0){if(o.instance)return t(o.instance,e,r&&!s.has(i));if(o.onInstanceAvailable){let n=()=>{};return o.onInstanceAvailable((a,o)=>{n=t(a,e,r&&o&&!s.has(i))}),()=>n()}},onRemove:function(e){if(o.instance)return n(o.instance,e);if(o.onInstanceAvailable){let t=()=>{};return o.onInstanceAvailable(i=>{t=n(i,e)}),()=>t()}},onChange:function(e){if(o.instance)return a(o.instance,e);if(o.onInstanceAvailable){let t=()=>{};return o.onInstanceAvailable(i=>{t=a(i,e)}),()=>t()}}},{get(e,t){if(!e[t])throw Error(`Can't access '${t}' through callback proxy. access the instance directly.`);return e[t]},has:(e,t)=>void 0!==e[t],set(e,t,i){throw Error("not allowed")},deleteProperty(e,t){throw Error("not allowed")}})}}(void 0,{instance:n})}},e.getRawChangesCallback=function(e,t){e.triggerChanges=t},e.registerType=ed,e.schema=function e(t,i,r=eU){let n={},s={},a={},o={};for(let e in t){let i=t[e];"object"==typeof i?(void 0!==i.view&&(o[e]="boolean"==typeof i.view?-1:i.view),n[e]=ef(i),Object.prototype.hasOwnProperty.call(i,"default")?a[e]=i.default:Array.isArray(i)||void 0!==i.array?a[e]=new eM:void 0!==i.map?a[e]=new eR:void 0!==i.collection?a[e]=new eL:void 0!==i.set?a[e]=new eD:void 0!==i.type&&eU.is(i.type)&&(a[e]=new i.type)):"function"==typeof i?eU.is(i)?(a[e]=new i,n[e]=ef(i)):s[e]=i:n[e]=ef(i)}let h=ep.setFields(class extends r{constructor(...e){e[0]=Object.assign({},(()=>{let e={};for(let t in a){let i=a[t];i&&"function"==typeof i.clone?e[t]=i.clone():e[t]=i}return e})(),e[0]),super(...e)}},n);for(let e in o)ek(o[e])(h.prototype,e);for(let e in s)h.prototype[e]=s[e];return i&&Object.defineProperty(h,"name",{value:i}),h.extends=(t,i)=>e(t,i,h),h},e.type=eN,e.view=ek}(G),G)}();class Y{constructor(e){this.events=e,this.isOpen=!1,this.lengthPrefixBuffer=new Uint8Array(9)}connect(e,t={}){let i=t.fingerprint&&{serverCertificateHashes:[{algorithm:"sha-256",value:new Uint8Array(t.fingerprint).buffer}]}||void 0;this.wt=new WebTransport(e,i),this.wt.ready.then(e=>{console.log("WebTransport ready!",e),this.isOpen=!0,this.unreliableReader=this.wt.datagrams.readable.getReader(),this.unreliableWriter=this.wt.datagrams.writable.getWriter(),this.wt.incomingBidirectionalStreams.getReader().read().then(e=>{this.reader=e.value.readable.getReader(),this.writer=e.value.writable.getWriter(),this.sendSeatReservation(t.room.roomId,t.sessionId,t.reconnectionToken),this.readIncomingData(),this.readIncomingUnreliableData()}).catch(e=>{console.error("failed to read incoming stream",e),console.error("TODO: close the connection")})}).catch(e=>{console.log("WebTransport not ready!",e),this._close()}),this.wt.closed.then(e=>{console.log("WebTransport closed w/ success",e),this.events.onclose({code:e.closeCode,reason:e.reason})}).catch(e=>{console.log("WebTransport closed w/ error",e),this.events.onerror(e),this.events.onclose({code:e.closeCode,reason:e.reason})}).finally(()=>{this._close()})}send(e){let t=V.encode.number(this.lengthPrefixBuffer,e.length,{offset:0}),i=new Uint8Array(t+e.length);i.set(this.lengthPrefixBuffer.subarray(0,t),0),i.set(e,t),this.writer.write(i)}sendUnreliable(e){let t=V.encode.number(this.lengthPrefixBuffer,e.length,{offset:0}),i=new Uint8Array(t+e.length);i.set(this.lengthPrefixBuffer.subarray(0,t),0),i.set(e,t),this.unreliableWriter.write(i)}close(e,t){try{this.wt.close({closeCode:e,reason:t})}catch(e){console.error(e)}}readIncomingData(){return d(this,void 0,void 0,function*(){let e;for(;this.isOpen;){try{let t=(e=yield this.reader.read()).value,i={offset:0};do{let e=V.decode.number(t,i);this.events.onmessage({data:t.subarray(i.offset,i.offset+e)}),i.offset+=e}while(i.offset<t.length)}catch(e){-1===e.message.indexOf("session is closed")&&console.error("H3Transport: failed to read incoming data",e);break}if(e.done)break}})}readIncomingUnreliableData(){return d(this,void 0,void 0,function*(){let e;for(;this.isOpen;){try{let t=(e=yield this.unreliableReader.read()).value,i={offset:0};do{let e=V.decode.number(t,i);this.events.onmessage({data:t.subarray(i.offset,i.offset+e)}),i.offset+=e}while(i.offset<t.length)}catch(e){-1===e.message.indexOf("session is closed")&&console.error("H3Transport: failed to read incoming data",e);break}if(e.done)break}})}sendSeatReservation(e,t,i){let r={offset:0},n=[];V.encode.string(n,e,r),V.encode.string(n,t,r),i&&V.encode.string(n,i,r),this.writer.write(new Uint8Array(n).buffer)}_close(){this.isOpen=!1}}var j=m(w?A:(w=1,A=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}));let W=globalThis.WebSocket||j;class z{constructor(e){this.events=e}send(e){this.ws.send(e)}sendUnreliable(e){console.warn("colyseus.js: The WebSocket transport does not support unreliable messages")}connect(e,t){try{this.ws=new W(e,{headers:t,protocols:this.protocols})}catch(t){this.ws=new W(e,this.protocols)}this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror}close(e,t){this.ws.close(e,t)}get isOpen(){return this.ws.readyState===W.OPEN}}class H{constructor(e){this.events={},"h3"===e?this.transport=new Y(this.events):this.transport=new z(this.events)}connect(e,t){this.transport.connect.call(this.transport,e,t)}send(e){this.transport.send(e)}sendUnreliable(e){this.transport.sendUnreliable(e)}close(e,t){this.transport.close(e,t)}get isOpen(){return this.transport.isOpen}}e.Protocol=void 0,(v=e.Protocol||(e.Protocol={}))[v.HANDSHAKE=9]="HANDSHAKE",v[v.JOIN_ROOM=10]="JOIN_ROOM",v[v.ERROR=11]="ERROR",v[v.LEAVE_ROOM=12]="LEAVE_ROOM",v[v.ROOM_DATA=13]="ROOM_DATA",v[v.ROOM_STATE=14]="ROOM_STATE",v[v.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",v[v.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",v[v.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",e.ErrorCode=void 0,(y=e.ErrorCode||(e.ErrorCode={}))[y.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",y[y.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",y[y.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",y[y.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",y[y.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",y[y.AUTH_FAILED=4215]="AUTH_FAILED",y[y.APPLICATION_ERROR=4216]="APPLICATION_ERROR";let X={};function q(e){let t=X[e];if(!t)throw Error("missing serializer: "+e);return t}let K=()=>({emit(e,...t){let i=this.events[e]||[];for(let e=0,r=i.length;e<r;e++)i[e](...t)},events:{},on(e,t){var i;return(null==(i=this.events[e])?void 0:i.push(t))||(this.events[e]=[t]),()=>{var i;this.events[e]=null==(i=this.events[e])?void 0:i.filter(e=>t!==e)}}});class J{constructor(){this.handlers=[]}register(e,t=!1){return this.handlers.push(e),this}invoke(...e){this.handlers.forEach(t=>t.apply(this,e))}invokeAsync(...e){return Promise.all(this.handlers.map(t=>t.apply(this,e)))}remove(e){let t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()}clear(){this.handlers=[]}}function Q(){let e=new J;function t(t){return e.register(t,this===null)}return t.once=t=>{let i=function(...r){t.apply(this,r),e.remove(i)};e.register(i)},t.remove=t=>e.remove(t),t.invoke=(...t)=>e.invoke(...t),t.invokeAsync=(...t)=>e.invokeAsync(...t),t.clear=()=>e.clear(),t}class ${setState(e,t){this.decoder.decode(e,t)}getState(){return this.state}patch(e,t){return this.decoder.decode(e,t)}teardown(){this.decoder.root.clearRefs()}handshake(e,t){this.state?(V.Reflection.decode(e,t),this.decoder=new V.Decoder(this.state)):(this.decoder=V.Reflection.decode(e,t),this.state=this.decoder.state)}}try{S=new TextDecoder}catch(e){}var Z=0,ee={},et=0,ei=0,er=[],en={useRecords:!1,mapsAsObjects:!0};class es{}let ea=new es;ea.name="MessagePack 0xC1";var eo=!1,eh=2;try{Function("")}catch(e){eh=1/0}class ec{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.sequential&&!1!==e.trusted&&(e.trusted=!0,!e.structures&&!1!=e.useRecords&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(C)return eB(()=>(eU(),this?this.unpack(e,t):ec.prototype.unpack.call(en,e,t)));e.buffer||e.constructor!==ArrayBuffer||(e=void 0!==n?n.from(e):new Uint8Array(e)),"object"==typeof t?(I=t.end||e.length,Z=t.start||0):(Z=0,I=t>-1?t:e.length),ei=0,O=null,P=null,C=e;try{R=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(C=null,e instanceof Uint8Array)throw t;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}return this instanceof ec?(ee=this,this.structures?_=this.structures:(!_||_.length>0)&&(_=[])):(ee=en,(!_||_.length>0)&&(_=[])),el(t)}unpackMultiple(e,t){let i,r=0;try{eo=!0;let n=e.length,s=this?this.unpack(e,n):eV.unpack(e,n);if(t){if(!1===t(s,r,Z))return;for(;Z<n;)if(r=Z,!1===t(el(),r,Z))return}else{for(i=[s];Z<n;)r=Z,i.push(el());return i}}catch(e){throw e.lastPosition=r,e.values=i,e}finally{eo=!1,eU()}}_mergeStructures(e,t){Object.isFrozen(e=e||[])&&(e=e.map(e=>e.slice(0)));for(let t=0,i=e.length;t<i;t++){let i=e[t];i&&(i.isShared=!0,t>=32&&(i.highByte=t-32>>5))}for(let i in e.sharedLength=e.length,t||[])if(i>=0){let r=e[i],n=t[i];n&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function el(e){try{let e;if(!ee.trusted&&!eo){let e=_.sharedLength||0;e<_.length&&(_.length=e)}if(ee.randomAccessStructure&&C[Z]<64&&C[Z]>=32&&L||(e=eu()),P&&(Z=P.postBundlePosition,P=null),eo&&(_.restoreStructures=null),Z==I)_&&_.restoreStructures&&ed(),_=null,C=null,M&&(M=null);else if(Z>I)throw Error("Unexpected end of MessagePack data");else if(!eo){let t;try{t=JSON.stringify(e,(e,t)=>"bigint"==typeof t?`${t}n`:t).slice(0,100)}catch(e){t="(JSON view not available "+e+")"}throw Error("Data read, but end of buffer not reached "+t)}return e}catch(e){throw _&&_.restoreStructures&&ed(),eU(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||Z>I)&&(e.incomplete=!0),e}}function ed(){for(let e in _.restoreStructures)_[e]=_.restoreStructures[e];_.restoreStructures=null}function eu(){let e=C[Z++];if(e<160)if(e<128)if(e<64)return e;else{let t=_[63&e]||ee.getStructures&&em()[63&e];return t?(t.read||(t.read=ep(t,63&e)),t.read()):e}else if(e<144){if(e-=128,ee.mapsAsObjects){let t={};for(let i=0;i<e;i++){let e=eM();"__proto__"===e&&(e="__proto_"),t[e]=eu()}return t}{let t=new Map;for(let i=0;i<e;i++)t.set(eu(),eu());return t}}else{let t=Array(e-=144);for(let i=0;i<e;i++)t[i]=eu();return ee.freezeData?Object.freeze(t):t}if(e<192){let t=e-160;if(ei>=Z)return O.slice(Z-et,(Z+=t)-et);if(0==ei&&I<140){let e=t<16?eC(t):eS(t);if(null!=e)return e}return ev(t)}{let t;switch(e){case 192:return null;case 193:if(P){if((t=eu())>0)return P[1].slice(P.position1,P.position1+=t);return P[0].slice(P.position0,P.position0-=t)}return ea;case 194:return!1;case 195:return!0;case 196:if(void 0===(t=C[Z++]))throw Error("Unexpected end of buffer");return e_(t);case 197:return t=R.getUint16(Z),Z+=2,e_(t);case 198:return t=R.getUint32(Z),Z+=4,e_(t);case 199:return eO(C[Z++]);case 200:return t=R.getUint16(Z),Z+=2,eO(t);case 201:return t=R.getUint32(Z),Z+=4,eO(t);case 202:if(t=R.getFloat32(Z),ee.useFloat32>2){let e=eG[(127&C[Z])<<1|C[Z+1]>>7];return Z+=4,(e*t+(t>0?.5:-.5)|0)/e}return Z+=4,t;case 203:return t=R.getFloat64(Z),Z+=8,t;case 204:return C[Z++];case 205:return t=R.getUint16(Z),Z+=2,t;case 206:return t=R.getUint32(Z),Z+=4,t;case 207:return"number"===ee.int64AsType?t=0x100000000*R.getUint32(Z)+R.getUint32(Z+4):"string"===ee.int64AsType?t=R.getBigUint64(Z).toString():"auto"===ee.int64AsType?(t=R.getBigUint64(Z))<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=R.getBigUint64(Z),Z+=8,t;case 208:return R.getInt8(Z++);case 209:return t=R.getInt16(Z),Z+=2,t;case 210:return t=R.getInt32(Z),Z+=4,t;case 211:return"number"===ee.int64AsType?t=0x100000000*R.getInt32(Z)+R.getUint32(Z+4):"string"===ee.int64AsType?t=R.getBigInt64(Z).toString():"auto"===ee.int64AsType?(t=R.getBigInt64(Z))>=BigInt(-2)<<BigInt(52)&&t<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=R.getBigInt64(Z),Z+=8,t;case 212:if(114==(t=C[Z++]))return eL(63&C[Z++]);{let e=er[t];if(e)if(e.read)return Z++,e.read(eu());else if(e.noBuffer)return Z++,e();else return e(C.subarray(Z,++Z));throw Error("Unknown extension "+t)}case 213:if(114==(t=C[Z]))return Z++,eL(63&C[Z++],C[Z++]);return eO(2);case 214:return eO(4);case 215:return eO(8);case 216:return eO(16);case 217:if(t=C[Z++],ei>=Z)return O.slice(Z-et,(Z+=t)-et);return ey(t);case 218:if(t=R.getUint16(Z),Z+=2,ei>=Z)return O.slice(Z-et,(Z+=t)-et);return eb(t);case 219:if(t=R.getUint32(Z),Z+=4,ei>=Z)return O.slice(Z-et,(Z+=t)-et);return ex(t);case 220:return t=R.getUint16(Z),Z+=2,eT(t);case 221:return t=R.getUint32(Z),Z+=4,eT(t);case 222:return t=R.getUint16(Z),Z+=2,eA(t);case 223:return t=R.getUint32(Z),Z+=4,eA(t);default:if(e>=224)return e-256;if(void 0===e){let e=Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw Error("Unknown MessagePack token "+e)}}}let ef=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function ep(e,t){function i(){if(i.count++>eh){let i=e.read=Function("r","return function(){return "+(ee.freezeData?"Object.freeze":"")+"({"+e.map(e=>"__proto__"===e?"__proto_:r()":ef.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"})}")(eu);return 0===e.highByte&&(e.read=eg(t,e.read)),i()}let r={};for(let t=0,i=e.length;t<i;t++){let i=e[t];"__proto__"===i&&(i="__proto_"),r[i]=eu()}return ee.freezeData?Object.freeze(r):r}return(i.count=0,0===e.highByte)?eg(t,i):i}let eg=(e,t)=>function(){let i=C[Z++];if(0===i)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),n=_[r]||em()[r];if(!n)throw Error("Record id is not defined for "+r);return n.read||(n.read=ep(n,e)),n.read()};function em(){let e=eB(()=>(C=null,ee.getStructures()));return _=ee._mergeStructures(e,_)}var ev=eE,ey=eE,eb=eE,ex=eE;function eE(e){let t;if(e<16&&(t=eC(e)))return t;if(e>64&&S)return S.decode(C.subarray(Z,Z+=e));let i=Z+e,r=[];for(t="";Z<i;){let e=C[Z++];if((128&e)==0)r.push(e);else if((224&e)==192){let t=63&C[Z++];r.push((31&e)<<6|t)}else if((240&e)==224){let t=63&C[Z++],i=63&C[Z++];r.push((31&e)<<12|t<<6|i)}else if((248&e)==240){let t=(7&e)<<18|(63&C[Z++])<<12|(63&C[Z++])<<6|63&C[Z++];t>65535&&(t-=65536,r.push(t>>>10&1023|55296),t=56320|1023&t),r.push(t)}else r.push(e);r.length>=4096&&(t+=ew.apply(String,r),r.length=0)}return r.length>0&&(t+=ew.apply(String,r)),t}function eT(e){let t=Array(e);for(let i=0;i<e;i++)t[i]=eu();return ee.freezeData?Object.freeze(t):t}function eA(e){if(ee.mapsAsObjects){let t={};for(let i=0;i<e;i++){let e=eM();"__proto__"===e&&(e="__proto_"),t[e]=eu()}return t}{let t=new Map;for(let i=0;i<e;i++)t.set(eu(),eu());return t}}var ew=String.fromCharCode;function eS(e){let t=Z,i=Array(e);for(let r=0;r<e;r++){let e=C[Z++];if((128&e)>0){Z=t;return}i[r]=e}return ew.apply(String,i)}function eC(e){if(e<4)if(e<2)if(0===e)return"";else{let e=C[Z++];if((128&e)>1){Z-=1;return}return ew(e)}else{let t=C[Z++],i=C[Z++];if((128&t)>0||(128&i)>0){Z-=2;return}if(e<3)return ew(t,i);let r=C[Z++];if((128&r)>0){Z-=3;return}return ew(t,i,r)}{let t=C[Z++],i=C[Z++],r=C[Z++],n=C[Z++];if((128&t)>0||(128&i)>0||(128&r)>0||(128&n)>0){Z-=4;return}if(e<6)if(4===e)return ew(t,i,r,n);else{let e=C[Z++];if((128&e)>0){Z-=5;return}return ew(t,i,r,n,e)}if(e<8){let s=C[Z++],a=C[Z++];if((128&s)>0||(128&a)>0){Z-=6;return}if(e<7)return ew(t,i,r,n,s,a);let o=C[Z++];if((128&o)>0){Z-=7;return}return ew(t,i,r,n,s,a,o)}{let s=C[Z++],a=C[Z++],o=C[Z++],h=C[Z++];if((128&s)>0||(128&a)>0||(128&o)>0||(128&h)>0){Z-=8;return}if(e<10)if(8===e)return ew(t,i,r,n,s,a,o,h);else{let e=C[Z++];if((128&e)>0){Z-=9;return}return ew(t,i,r,n,s,a,o,h,e)}if(e<12){let c=C[Z++],l=C[Z++];if((128&c)>0||(128&l)>0){Z-=10;return}if(e<11)return ew(t,i,r,n,s,a,o,h,c,l);let d=C[Z++];if((128&d)>0){Z-=11;return}return ew(t,i,r,n,s,a,o,h,c,l,d)}{let c=C[Z++],l=C[Z++],d=C[Z++],u=C[Z++];if((128&c)>0||(128&l)>0||(128&d)>0||(128&u)>0){Z-=12;return}if(e<14)if(12===e)return ew(t,i,r,n,s,a,o,h,c,l,d,u);else{let e=C[Z++];if((128&e)>0){Z-=13;return}return ew(t,i,r,n,s,a,o,h,c,l,d,u,e)}{let f=C[Z++],p=C[Z++];if((128&f)>0||(128&p)>0){Z-=14;return}if(e<15)return ew(t,i,r,n,s,a,o,h,c,l,d,u,f,p);let g=C[Z++];if((128&g)>0){Z-=15;return}return ew(t,i,r,n,s,a,o,h,c,l,d,u,f,p,g)}}}}}function eI(){let e,t=C[Z++];if(t<192)e=t-160;else switch(t){case 217:e=C[Z++];break;case 218:e=R.getUint16(Z),Z+=2;break;case 219:e=R.getUint32(Z),Z+=4;break;default:throw Error("Expected string")}return eE(e)}function e_(e){return ee.copyBuffers?Uint8Array.prototype.slice.call(C,Z,Z+=e):C.subarray(Z,Z+=e)}function eO(e){let t=C[Z++];if(er[t]){let i;return er[t](C.subarray(Z,i=Z+=e),e=>{Z=e;try{return eu()}finally{Z=i}})}throw Error("Unknown extension type "+t)}var eP=Array(4096);function eM(){let e,t=C[Z++];if(!(t>=160)||!(t<192))return Z--,eR(eu());if(t-=160,ei>=Z)return O.slice(Z-et,(Z+=t)-et);if(!(0==ei&&I<180))return ev(t);let i=(t<<5^(t>1?R.getUint16(Z):t>0?C[Z]:0))&4095,r=eP[i],n=Z,s=Z+t-3,a=0;if(r&&r.bytes==t){for(;n<s;){if((e=R.getUint32(n))!=r[a++]){n=0x70000000;break}n+=4}for(s+=3;n<s;)if((e=C[n++])!=r[a++]){n=0x70000000;break}if(n===s)return Z=n,r.string;s-=3,n=Z}for(r=[],eP[i]=r,r.bytes=t;n<s;)e=R.getUint32(n),r.push(e),n+=4;for(s+=3;n<s;)e=C[n++],r.push(e);let o=t<16?eC(t):eS(t);return null!=o?r.string=o:r.string=ev(t)}function eR(e){if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return e.toString();if(null==e)return e+"";if(ee.allowArraysInMapKeys&&Array.isArray(e)&&e.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return e.flat().toString();throw Error(`Invalid property type for record: ${typeof e}`)}let eL=(e,t)=>{let i=eu().map(eR),r=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let n=_[e];return n&&(n.isShared||eo)&&((_.restoreStructures||(_.restoreStructures=[]))[e]=n),_[e]=i,i.read=ep(i,r),i.read()};er[0]=()=>{},er[0].noBuffer=!0,er[66]=e=>{let t=e.length,i=BigInt(128&e[0]?e[0]-256:e[0]);for(let r=1;r<t;r++)i<<=BigInt(8),i+=BigInt(e[r]);return i};let eD={Error,TypeError,ReferenceError};er[101]=()=>{let e=eu();return(eD[e[0]]||Error)(e[1],{cause:e[2]})},er[105]=e=>{let t;if(!1===ee.structuredClone)throw Error("Structured clone extension is disabled");let i=R.getUint32(Z-4);M||(M=new Map);let r=C[Z],n={target:t=r>=144&&r<160||220==r||221==r?[]:{}};M.set(i,n);let s=eu();return n.used?Object.assign(t,s):(n.target=s,s)},er[112]=e=>{if(!1===ee.structuredClone)throw Error("Structured clone extension is disabled");let t=R.getUint32(Z-4),i=M.get(t);return i.used=!0,i.target},er[115]=()=>new Set(eu());let ek=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array"),eN="object"==typeof globalThis?globalThis:window;er[116]=e=>{let t=e[0],i=ek[t];if(!i){if(16===t){let t=new ArrayBuffer(e.length-1);return new Uint8Array(t).set(e.subarray(1)),t}throw Error("Could not find typed array for code "+t)}return new eN[i](Uint8Array.prototype.slice.call(e,1).buffer)},er[120]=()=>{let e=eu();return new RegExp(e[0],e[1])};let eF=[];function eB(e){let t=I,i=Z,r=et,n=ei,s=O,a=M,o=P,h=new Uint8Array(C.slice(0,I)),c=_,l=_.slice(0,_.length),d=ee,u=eo,f=e();return I=t,Z=i,et=r,ei=n,O=s,M=a,P=o,C=h,eo=u,(_=c).splice(0,_.length,...l),ee=d,R=new DataView(C.buffer,C.byteOffset,C.byteLength),f}function eU(){C=null,M=null,_=null}er[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=Z;return Z+=t-e.length,P=eF,(P=[eI(),eI()]).position0=0,P.position1=0,P.postBundlePosition=Z,Z=i,eu()},er[255]=e=>4==e.length?new Date((0x1000000*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((3&e[3])*0x100000000+0x1000000*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((128&e[4]?-0x1000000000000:0)+0x10000000000*e[6]+0x100000000*e[7]+0x1000000*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");let eG=Array(147);for(let e=0;e<256;e++)eG[e]=+("1e"+Math.floor(45.15-.30103*e));var eV=new ec({useRecords:!1});let eY=eV.unpack;eV.unpackMultiple,eV.unpack,new Uint8Array(new Float32Array(1).buffer,0,4);try{t=new TextEncoder}catch(e){}let ej=void 0!==n,eW=ej?function(e){return n.allocUnsafeSlow(e)}:Uint8Array,ez=ej?n:Uint8Array,eH=ej?0x100000000:0x7fd00000,eX=0,eq=null,eK=/[\u0080-\uFFFF]/,eJ=Symbol("record-id");class eQ extends ec{constructor(e){let n,l,d,u;super(e),this.offset=0;let f=ez.prototype.utf8Write?function(e,t){return s.utf8Write(e,t,s.byteLength-t)}:!!t&&!!t.encodeInto&&function(e,i){return t.encodeInto(e,s.subarray(i)).written},p=this;e||(e={});let g=e&&e.sequential,m=e.structures||e.saveStructures,v=e.maxSharedStructures;if(null==v&&(v=32*!!m),v>8160)throw Error("Maximum maxSharedStructure is 8160");e.structuredClone&&void 0==e.moreTypes&&(this.moreTypes=!0);let y=e.maxOwnStructures;null==y&&(y=m?32:64),this.structures||!1==e.useRecords||(this.structures=[]);let b=v>32||y+v>64,x=v+64,E=v+y+64;if(E>8256)throw Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let T=[],A=0,w=0;this.pack=this.encode=function(e,t){let i;if(s||(o=(s=new eW(8192)).dataView||(s.dataView=new DataView(s.buffer,0,8192)),eX=0),(h=s.length-10)-eX<2048?(o=(s=new eW(s.length)).dataView||(s.dataView=new DataView(s.buffer,0,s.length)),h=s.length-10,eX=0):eX=eX+7&0x7ffffff8,n=eX,t&e3&&(eX+=255&t),u=p.structuredClone?new Map:null,p.bundleStrings&&"string"!=typeof e?(eq=[]).size=1/0:eq=null,d=p.structures){d.uninitialized&&(d=p._mergeStructures(p.getStructures()));let e=d.sharedLength||0;if(e>v)throw Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+d.sharedLength);if(!d.transitions){d.transitions=Object.create(null);for(let t=0;t<e;t++){let e=d[t];if(!e)continue;let i,r=d.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];(i=r[n])||(i=r[n]=Object.create(null)),r=i}r[eJ]=t+64}this.lastNamedStructuresLength=e}g||(d.nextId=e+64)}l&&(l=!1);try{p.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?k(e):I(e);let i=eq;if(eq&&e0(n,I,0),u&&u.idsToInsert){let e=u.idsToInsert.sort((e,t)=>e.offset>t.offset?1:-1),t=e.length,r=-1;for(;i&&t>0;){let s=e[--t].offset+n;s<i.stringsPosition+n&&-1===r&&(r=0),s>i.position+n?r>=0&&(r+=6):(r>=0&&(o.setUint32(i.position+n,o.getUint32(i.position+n)+r),r=-1),i=i.previous,t++)}r>=0&&i&&o.setUint32(i.position+n,o.getUint32(i.position+n)+r),(eX+=6*e.length)>h&&R(eX),p.offset=eX;let a=function(e,t){let i,r=6*t.length,n=e.length-r;for(;i=t.pop();){let t=i.offset,s=i.id;e.copyWithin(t+r,t,n);let a=t+(r-=6);e[a++]=214,e[a++]=105,e[a++]=s>>24,e[a++]=s>>16&255,e[a++]=s>>8&255,e[a++]=255&s,n=t}return e}(s.subarray(n,eX),e);return u=null,a}if(p.offset=eX,t&e2)return s.start=n,s.end=eX,s;return s.subarray(n,eX)}catch(e){throw i=e,e}finally{if(d&&(S(),l&&p.saveStructures)){var r,a;let o=d.sharedLength||0,h=s.subarray(n,eX),c=(r=d,a=p,r.isCompatible=e=>{let t=!e||(a.lastNamedStructuresLength||0)===e.length;return t||a._mergeStructures(e),t},r);if(!i){if(!1===p.saveStructures(c,c.isCompatible))return p.pack(e,t);return p.lastNamedStructuresLength=o,s.length>0x40000000&&(s=null),h}}s.length>0x40000000&&(s=null),t&e5&&(eX=n)}};let S=()=>{w<10&&w++;let e=d.sharedLength||0;if(d.length>e&&!g&&(d.length=e),A>1e4)d.transitions=null,w=0,A=0,T.length>0&&(T=[]);else if(T.length>0&&!g){for(let e=0,t=T.length;e<t;e++)T[e][eJ]=0;T=[]}},C=e=>{var t=e.length;t<16?s[eX++]=144|t:t<65536?(s[eX++]=220,s[eX++]=t>>8,s[eX++]=255&t):(s[eX++]=221,o.setUint32(eX,t),eX+=4);for(let i=0;i<t;i++)I(e[i])},I=e=>{eX>h&&(s=R(eX));var t,a=typeof e;if("string"===a){let i,r=e.length;if(eq&&r>=4&&r<4096){if((eq.size+=r)>21760){let e,t,i=(eq[0]?3*eq[0].length+eq[1].length:0)+10;eX+i>h&&(s=R(eX+i)),eq.position?(t=eq,s[eX]=200,eX+=3,s[eX++]=98,e=eX-n,eX+=4,e0(n,I,0),o.setUint16(e+n-3,eX-n-e)):(s[eX++]=214,s[eX++]=98,e=eX-n,eX+=4),(eq=["",""]).previous=t,eq.size=0,eq.position=e}let t=eK.test(e);eq[+!t]+=e,s[eX++]=193,I(t?-r:r);return}i=r<32?1:r<256?2:r<65536?3:5;let a=3*r;if(eX+a>h&&(s=R(eX+a)),r<64||!f){let n,a,o,h=eX+i;for(n=0;n<r;n++)(a=e.charCodeAt(n))<128?s[h++]=a:(a<2048?s[h++]=a>>6|192:((64512&a)==55296&&(64512&(o=e.charCodeAt(n+1)))==56320?(a=65536+((1023&a)<<10)+(1023&o),n++,s[h++]=a>>18|240,s[h++]=a>>12&63|128):s[h++]=a>>12|224,s[h++]=a>>6&63|128),s[h++]=63&a|128);t=h-eX-i}else t=f(e,eX+i);t<32?s[eX++]=160|t:t<256?(i<2&&s.copyWithin(eX+2,eX+1,eX+1+t),s[eX++]=217,s[eX++]=t):t<65536?(i<3&&s.copyWithin(eX+3,eX+2,eX+2+t),s[eX++]=218,s[eX++]=t>>8,s[eX++]=255&t):(i<5&&s.copyWithin(eX+5,eX+3,eX+3+t),s[eX++]=219,o.setUint32(eX,t),eX+=4),eX+=t}else if("number"===a)if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?s[eX++]=e:e<256?(s[eX++]=204,s[eX++]=e):e<65536?(s[eX++]=205,s[eX++]=e>>8,s[eX++]=255&e):(s[eX++]=206,o.setUint32(eX,e),eX+=4);else if((0|e)===e)e>=-32?s[eX++]=256+e:e>=-128?(s[eX++]=208,s[eX++]=e+256):e>=-32768?(s[eX++]=209,o.setInt16(eX,e),eX+=2):(s[eX++]=210,o.setInt32(eX,e),eX+=4);else{let t;if((t=this.useFloat32)>0&&e<0x100000000&&e>=-0x80000000){let i;if(s[eX++]=202,o.setFloat32(eX,e),t<4||(0|(i=e*eG[(127&s[eX])<<1|s[eX+1]>>7]))===i){eX+=4;return}eX--}s[eX++]=203,o.setFloat64(eX,e),eX+=8}else if("object"===a||"function"===a)if(e){if(u){let t=u.get(e);if(t){t.id||(t.id=(u.idsToInsert||(u.idsToInsert=[])).push(t)),s[eX++]=214,s[eX++]=112,o.setUint32(eX,t.id),eX+=4;return}u.set(e,{offset:eX-n})}let c=e.constructor;if(c===Object)M(e);else if(c===Array)C(e);else if(c===Map)if(this.mapAsEmptyObject)s[eX++]=128;else for(let[i,r]of((t=e.size)<16?s[eX++]=128|t:t<65536?(s[eX++]=222,s[eX++]=t>>8,s[eX++]=255&t):(s[eX++]=223,o.setUint32(eX,t),eX+=4),e))I(i),I(r);else{for(let t=0,n=i.length;t<n;t++)if(e instanceof r[t]){let r,n=i[t];if(n.write){n.type&&(s[eX++]=212,s[eX++]=n.type,s[eX++]=0);let t=n.write.call(this,e);t===e?Array.isArray(e)?C(e):M(e):I(t);return}let a=s,c=o,l=eX;s=null;try{r=n.pack.call(this,e,e=>(s=a,a=null,(eX+=e)>h&&R(eX),{target:s,targetView:o,position:eX-e}),I)}finally{a&&(s=a,o=c,eX=l,h=s.length-10)}r&&(r.length+eX>h&&R(r.length+eX),eX=function(e,t,i,r){let n=e.length;switch(n){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:n<256?(t[i++]=199,t[i++]=n):(n<65536?(t[i++]=200,t[i++]=n>>8):(t[i++]=201,t[i++]=n>>24,t[i++]=n>>16&255,t[i++]=n>>8&255),t[i++]=255&n)}return t[i++]=r,t.set(e,i),i+=n}(r,s,eX,n.type));return}if(Array.isArray(e))C(e);else{if(e.toJSON){let t=e.toJSON();if(t!==e)return I(t)}if("function"===a)return I(this.writeFunction&&this.writeFunction(e));M(e)}}}else s[eX++]=192;else if("boolean"===a)s[eX++]=e?195:194;else if("bigint"===a){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))s[eX++]=211,o.setBigInt64(eX,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)s[eX++]=207,o.setBigUint64(eX,e);else if(this.largeBigIntToFloat)s[eX++]=203,o.setFloat64(eX,Number(e));else if(this.largeBigIntToString)return I(e.toString());else if(this.useBigIntExtension&&e<BigInt(2)**BigInt(1023)&&e>-(BigInt(2)**BigInt(1023))){let t;s[eX++]=199,eX++,s[eX++]=66;let i=[];do{let r=e&BigInt(255);t=(r&BigInt(128))===(e<BigInt(0)?BigInt(128):BigInt(0)),i.push(r),e>>=BigInt(8)}while(!((e===BigInt(0)||e===BigInt(-1))&&t))s[eX-2]=i.length;for(let e=i.length;e>0;)s[eX++]=Number(i[--e]);return}else throw RangeError(e+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string");eX+=8}else if("undefined"===a)this.encodeUndefinedAsNil?s[eX++]=192:(s[eX++]=212,s[eX++]=0,s[eX++]=0);else throw Error("Unknown type: "+a)},_=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?e=>{let t,i;if(this.skipValues)for(let i in t=[],e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(i))&&!this.skipValues.includes(e[i])&&t.push(i);else t=Object.keys(e);let r=t.length;if(r<16?s[eX++]=128|r:r<65536?(s[eX++]=222,s[eX++]=r>>8,s[eX++]=255&r):(s[eX++]=223,o.setUint32(eX,r),eX+=4),this.coercibleKeyAsNumber)for(let n=0;n<r;n++){let r=Number(i=t[n]);I(isNaN(r)?i:r),I(e[i])}else for(let n=0;n<r;n++)I(i=t[n]),I(e[i])}:e=>{s[eX++]=222;let t=eX-n;eX+=2;let i=0;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(I(t),I(e[t]),i++);if(i>65535)throw Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');s[t+++n]=i>>8,s[t+n]=255&i},O=!1===this.useRecords?_:e.progressiveRecords&&!b?e=>{let t,i,r=d.transitions||(d.transitions=Object.create(null)),a=eX++-n;for(let s in e)if("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(s)){if(i=r[s])r=i;else{let o=Object.keys(e),h=r;r=d.transitions;let c=0;for(let e=0,t=o.length;e<t;e++){let t=o[e];!(i=r[t])&&(i=r[t]=Object.create(null),c++),r=i}a+n+1==eX?(eX--,L(r,o,c)):D(r,o,a,c),t=!0,r=h[s]}I(e[s])}if(!t){let t=r[eJ];t?s[a+n]=t:D(r,Object.keys(e),a,0)}}:e=>{let t,i=d.transitions||(d.transitions=Object.create(null)),r=0;for(let n in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(n))&&(!(t=i[n])&&(t=i[n]=Object.create(null),r++),i=t);let n=i[eJ];for(let t in n?n>=96&&b?(s[eX++]=(31&(n-=96))+96,s[eX++]=n>>5):s[eX++]=n:L(i,i.__keys__||Object.keys(e),r),e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&I(e[t])},P="function"==typeof this.useRecords&&this.useRecords,M=P?e=>{P(e)?O(e):_(e)}:O,R=e=>{let t;if(e>0x1000000){if(e-n>eH)throw Error("Packed buffer would be larger than maximum buffer size");t=Math.min(eH,4096*Math.round(Math.max((e-n)*(e>0x4000000?1.25:2),4194304)/4096))}else t=(Math.max(e-n<<2,s.length-1)>>12)+1<<12;let i=new eW(t);return o=i.dataView||(i.dataView=new DataView(i.buffer,0,t)),e=Math.min(e,s.length),s.copy?s.copy(i,0,n,e):i.set(s.slice(n,e)),eX-=n,n=0,h=i.length-10,s=i},L=(e,t,i)=>{let r=d.nextId;r||(r=64),r<x&&this.shouldShareStructure&&!this.shouldShareStructure(t)?((r=d.nextOwnId)<E||(r=x),d.nextOwnId=r+1):(r>=E&&(r=x),d.nextId=r+1);let n=t.highByte=r>=96&&b?r-96>>5:-1;e[eJ]=r,e.__keys__=t,d[r-64]=t,r<x?(t.isShared=!0,d.sharedLength=r-63,l=!0,n>=0?(s[eX++]=(31&r)+96,s[eX++]=n):s[eX++]=r):(n>=0?(s[eX++]=213,s[eX++]=114,s[eX++]=(31&r)+96,s[eX++]=n):(s[eX++]=212,s[eX++]=114,s[eX++]=r),i&&(A+=w*i),T.length>=y&&(T.shift()[eJ]=0),T.push(e),I(t))},D=(e,t,i,r)=>{let o=s,c=eX,l=h,d=n;eX=0,n=0,(s=a)||(a=s=new eW(8192)),h=s.length-10,L(e,t,r),a=s;let u=eX;if(s=o,eX=c,h=l,n=d,u>1){let e=eX+u-1;e>h&&R(e);let t=i+n;s.copyWithin(t+u,t+1,eX),s.set(a.slice(0,u),t),eX=e}else s[i+n]=a[0]},k=e=>{let t=c(e,s,n,eX,d,R,(e,t,i)=>{if(i)return l=!0;eX=t;let r=s;return(I(e),S(),r!==s)?{position:eX,targetView:o,target:s}:eX},this);if(0===t)return M(e);eX=t}}useBuffer(e){(s=e).dataView||(s.dataView=new DataView(s.buffer,s.byteOffset,s.byteLength)),eX=0}set position(e){eX=e}get position(){return eX}set buffer(e){s=e}get buffer(){return s}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function e$(e,t,i,r){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=i(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=i(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=i(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,e.buffer||(e=new Uint8Array(e)),s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function eZ(e,t){let i=e.byteLength;if(i<256){var r,n,{target:r,position:n}=t(i+2);r[n++]=196,r[n++]=i}else if(i<65536){var{target:r,position:n}=t(i+3);r[n++]=197,r[n++]=i>>8,r[n++]=255&i}else{var{target:r,position:n,targetView:s}=t(i+5);r[n++]=198,s.setUint32(n,i),n+=4}r.set(e,n)}function e0(e,t,i){if(eq.length>0){o.setUint32(eq.position+e,eX+i-eq.position-e),eq.stringsPosition=eX-e;let r=eq;eq=null,t(r[0]),t(r[1])}}r=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,es],i=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<0x100000000){let{target:e,targetView:i,position:n}=t(6);e[n++]=214,e[n++]=255,i.setUint32(n,r)}else if(r>0&&r<0x100000000){let{target:i,targetView:n,position:s}=t(10);i[s++]=215,i[s++]=255,n.setUint32(s,4e6*e.getMilliseconds()+(r/1e3/0x100000000|0)),n.setUint32(s+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:e,targetView:r,position:n}=t(3);e[n++]=212,e[n++]=255,e[n++]=255}else{let{target:i,targetView:n,position:s}=t(15);i[s++]=199,i[s++]=12,i[s++]=255,n.setUint32(s,1e6*e.getMilliseconds()),n.setBigInt64(s+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){if(this.setAsEmptyObject)return t(0),i({});let r=Array.from(e),{target:n,position:s}=t(3*!!this.moreTypes);this.moreTypes&&(n[s++]=212,n[s++]=115,n[s++]=0),i(r)}},{pack(e,t,i){let{target:r,position:n}=t(3*!!this.moreTypes);this.moreTypes&&(r[n++]=212,r[n++]=101,r[n++]=0),i([e.name,e.message,e.cause])}},{pack(e,t,i){let{target:r,position:n}=t(3*!!this.moreTypes);this.moreTypes&&(r[n++]=212,r[n++]=120,r[n++]=0),i([e.source,e.flags])}},{pack(e,t){this.moreTypes?e$(e,16,t):eZ(ej?n.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==ez&&this.moreTypes?e$(e,ek.indexOf(i.name),t):eZ(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];let e1=new eQ({useRecords:!1});e1.pack,e1.pack;let e2=512,e5=1024,e3=2048;class e4{constructor(e,t){this.onStateChange=Q(),this.onError=Q(),this.onLeave=Q(),this.onJoin=Q(),this.hasJoined=!1,this.onMessageHandlers=K(),this.roomId=null,this.name=e,this.packr=new eQ,this.packr.encode(void 0),t&&(this.serializer=new(q("schema")),this.rootSchema=t,this.serializer.state=new t),this.onError((e,t)=>{var i;return null==(i=console.warn)?void 0:i.call(console,`colyseus.js - onError => (${e}) ${t}`)}),this.onLeave(()=>this.removeAllListeners())}connect(e,t,i=this,r,n){let s=new H(r.protocol);if(i.connection=s,s.events.onmessage=e4.prototype.onMessageCallback.bind(i),s.events.onclose=function(e){var r;if(!i.hasJoined){null==(r=console.warn)||r.call(console,`Room connection was closed unexpectedly (${e.code}): ${e.reason}`),i.onError.invoke(e.code,e.reason);return}e.code===E.DEVMODE_RESTART&&t?t():(i.onLeave.invoke(e.code,e.reason),i.destroy())},s.events.onerror=function(e){var t;null==(t=console.warn)||t.call(console,`Room, onError (${e.code}): ${e.reason}`),i.onError.invoke(e.code,e.reason)},"h3"===r.protocol){let t=new URL(e);s.connect(t.origin,r)}else s.connect(e,n)}leave(t=!0){return new Promise(i=>{this.onLeave(e=>i(e)),this.connection?t?(this.packr.buffer[0]=e.Protocol.LEAVE_ROOM,this.connection.send(this.packr.buffer.subarray(0,1))):this.connection.close():this.onLeave.invoke(E.CONSENTED)})}onMessage(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)}send(t,i){let r={offset:1};this.packr.buffer[0]=e.Protocol.ROOM_DATA,"string"==typeof t?V.encode.string(this.packr.buffer,t,r):V.encode.number(this.packr.buffer,t,r),this.packr.position=0;let n=void 0!==i?this.packr.pack(i,2048+r.offset):this.packr.buffer.subarray(0,r.offset);this.connection.send(n)}sendUnreliable(t,i){let r={offset:1};this.packr.buffer[0]=e.Protocol.ROOM_DATA,"string"==typeof t?V.encode.string(this.packr.buffer,t,r):V.encode.number(this.packr.buffer,t,r),this.packr.position=0;let n=void 0!==i?this.packr.pack(i,2048+r.offset):this.packr.buffer.subarray(0,r.offset);this.connection.sendUnreliable(n)}sendBytes(t,i){let r={offset:1};if(this.packr.buffer[0]=e.Protocol.ROOM_DATA_BYTES,"string"==typeof t?V.encode.string(this.packr.buffer,t,r):V.encode.number(this.packr.buffer,t,r),i.byteLength+r.offset>this.packr.buffer.byteLength){let e=new Uint8Array(r.offset+i.byteLength);e.set(this.packr.buffer),this.packr.useBuffer(e)}this.packr.buffer.set(i,r.offset),this.connection.send(this.packr.buffer.subarray(0,r.offset+i.byteLength))}get state(){return this.serializer.getState()}removeAllListeners(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={},this.serializer instanceof $&&(this.serializer.decoder.root.callbacks={})}onMessageCallback(t){let i=new Uint8Array(t.data),r={offset:1},n=i[0];if(n===e.Protocol.JOIN_ROOM){let t=V.decode.utf8Read(i,r,i[r.offset++]);if(this.serializerId=V.decode.utf8Read(i,r,i[r.offset++]),!this.serializer){let e=q(this.serializerId);this.serializer=new e}i.byteLength>r.offset&&this.serializer.handshake&&this.serializer.handshake(i,r),this.reconnectionToken=`${this.roomId}:${t}`,this.hasJoined=!0,this.onJoin.invoke(),this.packr.buffer[0]=e.Protocol.JOIN_ROOM,this.connection.send(this.packr.buffer.subarray(0,1))}else if(n===e.Protocol.ERROR){let e=V.decode.number(i,r),t=V.decode.string(i,r);this.onError.invoke(e,t)}else if(n===e.Protocol.LEAVE_ROOM)this.leave();else if(n===e.Protocol.ROOM_STATE)this.serializer.setState(i,r),this.onStateChange.invoke(this.serializer.getState());else if(n===e.Protocol.ROOM_STATE_PATCH)this.serializer.patch(i,r),this.onStateChange.invoke(this.serializer.getState());else if(n===e.Protocol.ROOM_DATA){let e=V.decode.stringCheck(i,r)?V.decode.string(i,r):V.decode.number(i,r),t=i.byteLength>r.offset?eY(i,{start:r.offset}):void 0;this.dispatchMessage(e,t)}else if(n===e.Protocol.ROOM_DATA_BYTES){let e=V.decode.stringCheck(i,r)?V.decode.string(i,r):V.decode.number(i,r);this.dispatchMessage(e,i.subarray(r.offset))}}dispatchMessage(e,t){var i;let r=this.getMessageHandlerKey(e);this.onMessageHandlers.events[r]?this.onMessageHandlers.emit(r,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):null==(i=console.warn)||i.call(console,`colyseus.js: onMessage() not registered for type '${e}'.`)}destroy(){this.serializer&&this.serializer.teardown()}getMessageHandlerKey(e){switch(typeof e){case"string":return e;case"number":return`i${e}`;default:throw Error("invalid message type.")}}}var e9={},e8=function(){if(D)return e9;function e(e,t){t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.body}function t(t,i,r){var n,s,a,o=!1,h=(r=r||{}).body;return r.method=t,r.headers=r.headers||{},h instanceof FormData||h&&"object"==typeof h&&(r.headers["content-type"]="application/json",r.body=JSON.stringify(h)),r.withCredentials&&(r.credentials="include"),r.timeout&&(r.signal||(a=new AbortController,r.signal=a.signal),n=setTimeout(function(){o=!0,a.signal.dispatchEvent(new Event("abort"))},r.timeout)),r.signal&&r.signal.addEventListener("abort",function(){s=!0}),new Promise((t,a)=>{fetch(i,r).then((i,n)=>{e(i,i),n=i.status>=400?a:t,(h=i.headers.get("content-type"))&&~h.indexOf("application/json")?i.text().then(t=>{try{i.data=JSON.parse(t,r.reviver),n(i)}catch(t){t.headers=i.headers,e(i,t),a(t)}}):n(i)}).catch(e=>{e.timeout=o,e.aborted=s&&!o,a(e)}).finally(()=>{clearTimeout(n)})})}D=1;var i=t.bind(t,"GET"),r=t.bind(t,"POST"),n=t.bind(t,"PATCH"),s=t.bind(t,"DELETE"),a=t.bind(t,"PUT");return e9.del=s,e9.get=i,e9.patch=n,e9.post=r,e9.put=a,e9.send=t,e9}(),e6=(b={__proto__:null,default:m(e8)},[e8].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(t){if("default"!==t&&!(t in b)){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(b,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}})}),Object.freeze(b));class e7{constructor(e,t={}){this.client=e,this.headers=t}get(e,t={}){return this.request("get",e,t)}post(e,t={}){return this.request("post",e,t)}del(e,t={}){return this.request("del",e,t)}put(e,t={}){return this.request("put",e,t)}request(e,t,i={}){return e6[e](this.client.getHttpEndpoint(t),this.getOptions(i)).catch(e=>{var t;if(e.aborted)throw new g("Request aborted");let i=e.statusCode,r=(null==(t=e.data)?void 0:t.error)||e.statusMessage||e.message;if(!i&&!r)throw e;throw new p(i,r)})}getOptions(e){return e.headers=Object.assign({},this.headers,e.headers),this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),"u">typeof cc&&cc.sys&&cc.sys.isNative||(e.withCredentials=!0),e}}function te(){if(!l)try{l="u">typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:window.localStorage}catch(e){}return l||void 0===globalThis.indexedDB||(l=new tt),l||(l={cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),l}class tt{constructor(){this.dbPromise=new Promise(e=>{let t=indexedDB.open("_colyseus_storage",1);t.onupgradeneeded=()=>t.result.createObjectStore("store"),t.onsuccess=()=>e(t.result)})}tx(e,t){return d(this,void 0,void 0,function*(){return t((yield this.dbPromise).transaction("store",e).objectStore("store"))})}setItem(e,t){return this.tx("readwrite",i=>i.put(t,e)).then()}getItem(e){return d(this,void 0,void 0,function*(){let t=yield this.tx("readonly",t=>t.get(e));return new Promise(e=>{t.onsuccess=()=>e(t.result)})})}removeItem(e){return this.tx("readwrite",t=>t.delete(e)).then()}}class ti{constructor(e){var t,i;let r;this.http=e,this.settings={path:"/auth",key:"colyseus-auth-token"},k.set(this,!1),N.set(this,void 0),F.set(this,void 0),B.set(this,K()),t=this.settings.key,i=e=>this.token=e,r=te().getItem(t),!("u"<typeof Promise)&&r instanceof Promise?r.then(e=>i(e)):i(r)}set token(e){this.http.authToken=e}get token(){return this.http.authToken}onChange(e){let t=u(this,B,"f").on("change",e);return u(this,k,"f")||f(this,N,new Promise((e,t)=>{this.getUserData().then(e=>{this.emitChange(Object.assign(Object.assign({},e),{token:this.token}))}).catch(e=>{this.emitChange({user:null,token:void 0})}).finally(()=>{e()})}),"f"),f(this,k,!0,"f"),t}getUserData(){return d(this,void 0,void 0,function*(){if(this.token)return(yield this.http.get(`${this.settings.path}/userdata`)).data;throw Error("missing auth.token")})}registerWithEmailAndPassword(e,t,i){return d(this,void 0,void 0,function*(){let r=(yield this.http.post(`${this.settings.path}/register`,{body:{email:e,password:t,options:i}})).data;return this.emitChange(r),r})}signInWithEmailAndPassword(e,t){return d(this,void 0,void 0,function*(){let i=(yield this.http.post(`${this.settings.path}/login`,{body:{email:e,password:t}})).data;return this.emitChange(i),i})}signInAnonymously(e){return d(this,void 0,void 0,function*(){let t=(yield this.http.post(`${this.settings.path}/anonymous`,{body:{options:e}})).data;return this.emitChange(t),t})}sendPasswordResetEmail(e){return d(this,void 0,void 0,function*(){return(yield this.http.post(`${this.settings.path}/forgot-password`,{body:{email:e}})).data})}signInWithProvider(e){return d(this,arguments,void 0,function*(e,t={}){return new Promise((i,r)=>{let n=t.width||480,s=t.height||768,a=this.token?`?token=${this.token}`:"",o=`Login with ${e[0].toUpperCase()+e.substring(1)}`,h=this.http.client.getHttpEndpoint(`${t.prefix||`${this.settings.path}/provider`}/${e}${a}`),c=screen.width/2-n/2,l=screen.height/2-s/2;f(this,F,window.open(h,o,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+s+", top="+l+", left="+c),"f");let d=e=>{(void 0!==e.data.user||void 0!==e.data.token)&&(clearInterval(p),u(this,F,"f").close(),f(this,F,void 0,"f"),window.removeEventListener("message",d),void 0!==e.data.error?r(e.data.error):(i(e.data),this.emitChange(e.data)))},p=setInterval(()=>{(!u(this,F,"f")||u(this,F,"f").closed)&&(f(this,F,void 0,"f"),r("cancelled"),window.removeEventListener("message",d))},200);window.addEventListener("message",d)})})}signOut(){return d(this,void 0,void 0,function*(){this.emitChange({user:null,token:null})})}emitChange(e){var t,i,r;void 0!==e.token&&((this.token=e.token,null===e.token)?(t=this.settings.key,te().removeItem(t)):(i=this.settings.key,r=e.token,te().setItem(i,r))),u(this,B,"f").emit("change",e)}}function tr(e){var t;let i=(null==(t=null==window?void 0:window.location)?void 0:t.hostname)||"localhost",r=e.hostname.split("."),n=e.hostname.includes("trycloudflare.com")||e.hostname.includes("discordsays.com")||!(r.length>2)?"":`/${r[0]}`;return e.pathname.startsWith("/.proxy")?`${e.protocol}//${i}${n}${e.pathname}${e.search}`:`${e.protocol}//${i}/.proxy/colyseus${n}${e.pathname}${e.search}`}k=new WeakMap,N=new WeakMap,F=new WeakMap,B=new WeakMap;class tn extends Error{constructor(e,t){super(e),this.code=t,this.name="MatchMakeError",Object.setPrototypeOf(this,tn.prototype)}}let ts="u">typeof window&&void 0!==(null==(U=null==window?void 0:window.location)?void 0:U.hostname)?`${window.location.protocol.replace("http","ws")}//${window.location.hostname}${window.location.port&&`:${window.location.port}`}`:"ws://127.0.0.1:2567";class ta{constructor(e=ts,t){var i,r;if("string"==typeof e){let t=e.startsWith("/")?new URL(e,ts):new URL(e),i="https:"===t.protocol||"wss:"===t.protocol,r=Number(t.port||(i?443:80));this.settings={hostname:t.hostname,pathname:t.pathname,port:r,secure:i,searchParams:t.searchParams.toString()||void 0}}else void 0===e.port&&(e.port=e.secure?443:80),void 0===e.pathname&&(e.pathname=""),this.settings=e;this.settings.pathname.endsWith("/")&&(this.settings.pathname=this.settings.pathname.slice(0,-1)),this.http=new e7(this,(null==t?void 0:t.headers)||{}),this.auth=new ti(this.http),this.urlBuilder=null==t?void 0:t.urlBuilder,!this.urlBuilder&&"u">typeof window&&(null==(r=null==(i=null==window?void 0:window.location)?void 0:i.hostname)?void 0:r.includes("discordsays.com"))&&(this.urlBuilder=tr,console.log("Colyseus SDK: Discord Embedded SDK detected. Using custom URL builder."))}joinOrCreate(e){return d(this,arguments,void 0,function*(e,t={},i){return yield this.createMatchMakeRequest("joinOrCreate",e,t,i)})}create(e){return d(this,arguments,void 0,function*(e,t={},i){return yield this.createMatchMakeRequest("create",e,t,i)})}join(e){return d(this,arguments,void 0,function*(e,t={},i){return yield this.createMatchMakeRequest("join",e,t,i)})}joinById(e){return d(this,arguments,void 0,function*(e,t={},i){return yield this.createMatchMakeRequest("joinById",e,t,i)})}reconnect(e,t){return d(this,void 0,void 0,function*(){if("string"==typeof e&&"string"==typeof t)throw Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");let[i,r]=e.split(":");if(!i||!r)throw Error("Invalid reconnection token format.\nThe format should be roomId:reconnectionToken");return yield this.createMatchMakeRequest("reconnect",i,{reconnectionToken:r},t)})}consumeSeatReservation(e,t,i){return d(this,void 0,void 0,function*(){let r=this.createRoom(e.room.name,t);r.roomId=e.room.roomId,r.sessionId=e.sessionId;let n={sessionId:r.sessionId};e.reconnectionToken&&(n.reconnectionToken=e.reconnectionToken);let s=i||r;return r.connect(this.buildEndpoint(e.room,n,e.protocol),e.devMode&&(()=>d(this,void 0,void 0,function*(){console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} Re-establishing connection with room id '${r.roomId}'...`);let i=0,n=()=>d(this,void 0,void 0,function*(){i++;try{yield this.consumeSeatReservation(e,t,s),console.info(`[Colyseus devMode]: ${String.fromCodePoint(9989)} Successfully re-established connection with room '${r.roomId}'`)}catch(e){i<8?(console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} retrying... (${i} out of 8)`),setTimeout(n,2e3)):console.info(`[Colyseus devMode]: ${String.fromCodePoint(10060)} Failed to reconnect. Is your server running? Please check server logs.`)}});setTimeout(n,2e3)})),s,e,this.http.headers),new Promise((e,t)=>{let i=(e,i)=>t(new p(e,i));s.onError.once(i),s.onJoin.once(()=>{s.onError.remove(i),e(s)})})})}createMatchMakeRequest(e,t){return d(this,arguments,void 0,function*(e,t,i={},r,n){let s=(yield this.http.post(`matchmake/${e}/${t}`,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})).data;if(s.error)throw new tn(s.error,s.code);return"reconnect"===e&&(s.reconnectionToken=i.reconnectionToken),yield this.consumeSeatReservation(s,r,n)})}createRoom(e,t){return new e4(e,t)}buildEndpoint(e,t={},i="ws"){let r=this.settings.searchParams||"";for(let e in this.http.authToken&&(t._authToken=this.http.authToken),t)t.hasOwnProperty(e)&&(r+=(r?"&":"")+`${e}=${t[e]}`);"h3"===i&&(i="http");let n=this.settings.secure?`${i}s://`:`${i}://`;e.publicAddress?n+=`${e.publicAddress}`:n+=`${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}`;let s=`${n}/${e.processId}/${e.roomId}?${r}`;return this.urlBuilder?this.urlBuilder(new URL(s)):s}getHttpEndpoint(e=""){let t=e.startsWith("/")?e:`/${e}`,i=`${this.settings.secure?"https":"http"}://${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}${t}`;return this.settings.searchParams&&(i+=`?${this.settings.searchParams}`),this.urlBuilder?this.urlBuilder(new URL(i)):i}getEndpointPort(){return 80!==this.settings.port&&443!==this.settings.port?`:${this.settings.port}`:""}}ta.VERSION="0.16.22",X.schema=$,X.none=class{setState(e){}getState(){return null}patch(e){}teardown(){}handshake(e){}},e.Auth=ti,e.Client=ta,e.MatchMakeError=tn,e.Room=e4,e.SchemaSerializer=$,e.ServerError=p,e.getStateCallbacks=function(e){try{return V.getDecoderStateCallbacks(e.serializer.decoder)}catch(e){return}},e.registerSerializer=function(e,t){X[e]=t}})(i)},{"62394090e3d8ae5f":"4N3Kx"}],"4N3Kx":[function(e,t,i,r){let n=e("9c62938f1dccc73c"),s=e("aceacb6a4531a9d2"),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,i)}function c(e,t,i){if("string"==typeof e){var r=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!h.isEncoding(n))throw TypeError("Unknown encoding: "+n);let i=0|g(r,n),s=o(i),a=s.write(r,n);return a!==i&&(s=s.slice(0,a)),s}if(ArrayBuffer.isView(e)){var s=e;if(B(s,Uint8Array)){let e=new Uint8Array(s);return f(e.buffer,e.byteOffset,e.byteLength)}return u(s)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return f(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return h.from(a,t,i);let c=function(e){if(h.isBuffer(e)){let t=0|p(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(c)return c;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),o(e<0?0:0|p(e))}function u(e){let t=e.length<0?0:0|p(e.length),i=o(t);for(let r=0;r<t;r+=1)i[r]=255&e[r];return i}function f(e,t,i){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),h.prototype),r}function p(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return N(e).length;default:if(n)return r?-1:k(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,i){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){let r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=t;r<i;++r)n+=U[e[r]];return n}(this,t,i);case"utf8":case"utf-8":return x(this,t,i);case"ascii":return function(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":var s,a,o;return s=this,a=t,o=i,0===a&&o===s.length?n.fromByteArray(s):n.fromByteArray(s.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){let r=e.slice(t,i),n="";for(let e=0;e<r.length-1;e+=2)n+=String.fromCharCode(r[e]+256*r[e+1]);return n}(this,t,i);default:if(r)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,i){let r=e[t];e[t]=e[i],e[i]=r}function y(e,t,i,r,n){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(s=i*=1)!=s&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length)if(n)return -1;else i=e.length-1;else if(i<0)if(!n)return -1;else i=0;if("string"==typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:b(e,t,i,r,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,i);else return Uint8Array.prototype.lastIndexOf.call(e,t,i);return b(e,[t],i,r,n)}throw TypeError("val must be string, number or Buffer")}function b(e,t,i,r,n){let s,a=1,o=e.length,h=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,o/=2,h/=2,i/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let r=-1;for(s=i;s<o;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===h)return r*a}else -1!==r&&(s-=s-r),r=-1}else for(i+h>o&&(i=o-h),s=i;s>=0;s--){let i=!0;for(let r=0;r<h;r++)if(c(e,s+r)!==c(t,r)){i=!1;break}if(i)return s}return -1}function x(e,t,i){i=Math.min(e.length,i);let r=[],n=t;for(;n<i;){let t=e[n],s=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=i){let i,r,o,h;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(i=e[n+1]))==128&&(h=(31&t)<<6|63&i)>127&&(s=h);break;case 3:i=e[n+1],r=e[n+2],(192&i)==128&&(192&r)==128&&(h=(15&t)<<12|(63&i)<<6|63&r)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:i=e[n+1],r=e[n+2],o=e[n+3],(192&i)==128&&(192&r)==128&&(192&o)==128&&(h=(15&t)<<18|(63&i)<<12|(63&r)<<6|63&o)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=a}var s=r;let a=s.length;if(a<=4096)return String.fromCharCode.apply(String,s);let o="",h=0;for(;h<a;)o+=String.fromCharCode.apply(String,s.slice(h,h+=4096));return o}function E(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function T(e,t,i,r,n,s){if(!h.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function A(e,t,i,r,n){M(t,r,n,e,i,7);let s=Number(t&BigInt(0xffffffff));e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,i}function w(e,t,i,r,n){M(t,r,n,e,i,7);let s=Number(t&BigInt(0xffffffff));e[i+7]=s,s>>=8,e[i+6]=s,s>>=8,e[i+5]=s,s>>=8,e[i+4]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[i+3]=a,a>>=8,e[i+2]=a,a>>=8,e[i+1]=a,a>>=8,e[i]=a,i+8}function S(e,t,i,r,n,s){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function C(e,t,i,r,n){return t*=1,i>>>=0,n||S(e,t,i,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,i,r,23,4),i+4}function I(e,t,i,r,n){return t*=1,i>>>=0,n||S(e,t,i,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,i,r,52,8),i+8}i.Buffer=h,i.SlowBuffer=function(e){return+e!=e&&(e=0),h.alloc(+e)},i.INSPECT_MAX_BYTES=50,i.kMaxLength=0x7fffffff,h.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!h.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,i){return c(e,t,i)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,i){return(l(e),e<=0)?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)},h.allocUnsafe=function(e){return d(e)},h.allocUnsafeSlow=function(e){return d(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(B(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,r=t.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:+(r<i)},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){let i;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;let r=h.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){let t=e[i];if(B(t,Uint8Array))n+t.length>r.length?(h.isBuffer(t)||(t=h.from(t)),t.copy(r,n)):Uint8Array.prototype.set.call(r,t,n);else if(h.isBuffer(t))t.copy(r,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return r},h.byteLength=g,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},h.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},h.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},h.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?x(this,0,e):m.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){let e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a&&(h.prototype[a]=h.prototype.inspect),h.prototype.compare=function(e,t,i,r,n){if(B(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;let s=n-r,a=i-t,o=Math.min(s,a),c=this.slice(r,n),l=e.slice(t,i);for(let e=0;e<o;++e)if(c[e]!==l[e]){s=c[e],a=l[e];break}return s<a?-1:+(a<s)},h.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},h.prototype.indexOf=function(e,t,i){return y(this,e,t,i,!0)},h.prototype.lastIndexOf=function(e,t,i){return y(this,e,t,i,!1)},h.prototype.write=function(e,t,i,r){var n,s,a,o,h,c,l,d;if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let u=this.length-t;if((void 0===i||i>u)&&(i=u),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let f=!1;for(;;)switch(r){case"hex":return function(e,t,i,r){let n;i=Number(i)||0;let s=e.length-i;r?(r=Number(r))>s&&(r=s):r=s;let a=t.length;for(r>a/2&&(r=a/2),n=0;n<r;++n){var o;let r=parseInt(t.substr(2*n,2),16);if((o=r)!=o)break;e[i+n]=r}return n}(this,e,t,i);case"utf8":case"utf-8":return n=t,s=i,F(k(e,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return a=t,o=i,F(function(e){let t=[];for(let i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(e),this,a,o);case"base64":return h=t,c=i,F(N(e),this,h,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,d=i,F(function(e,t){let i,r,n=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=(i=e.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(e,this.length-l),this,l,d);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(e,t){let i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);let r=this[e],n=1,s=0;for(;++s<t&&(n*=256);)r+=this[e+s]*n;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);let r=this[e+--t],n=1;for(;t>0&&(n*=256);)r+=this[e+--t]*n;return r},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=G(function(e){R(e>>>=0,"offset");let t=this[e],i=this[e+7];(void 0===t||void 0===i)&&L(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*i;return BigInt(r)+(BigInt(n)<<BigInt(32))}),h.prototype.readBigUInt64BE=G(function(e){R(e>>>=0,"offset");let t=this[e],i=this[e+7];(void 0===t||void 0===i)&&L(e,this.length-8);let r=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],n=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),h.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);let r=this[e],n=1,s=0;for(;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||E(e,t,this.length);let r=t,n=1,s=this[e+--r];for(;r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},h.prototype.readInt8=function(e,t){return(e>>>=0,t||E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);let i=this[e]|this[e+1]<<8;return 32768&i?0xffff0000|i:i},h.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);let i=this[e+1]|this[e]<<8;return 32768&i?0xffff0000|i:i},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=G(function(e){R(e>>>=0,"offset");let t=this[e],i=this[e+7];return(void 0===t||void 0===i)&&L(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),h.prototype.readBigInt64BE=G(function(e){R(e>>>=0,"offset");let t=this[e],i=this[e+7];return(void 0===t||void 0===i)&&L(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+i)}),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;T(this,e,t,i,r,0)}let n=1,s=0;for(this[t]=255&e;++s<i&&(n*=256);)this[t+s]=e/n&255;return t+i},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;T(this,e,t,i,r,0)}let n=i-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+i},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=G(function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=G(function(e,t=0){return w(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(e,t,i,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*i-1);T(this,e,t,i,r-1,-r)}let n=0,s=1,a=0;for(this[t]=255&e;++n<i&&(s*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/s|0)-a&255;return t+i},h.prototype.writeIntBE=function(e,t,i,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*i-1);T(this,e,t,i,r-1,-r)}let n=i-1,s=1,a=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/s|0)-a&255;return t+i},h.prototype.writeInt8=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,i){return e*=1,t>>>=0,i||T(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=G(function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=G(function(e,t=0){return w(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(e,t,i){return C(this,e,t,!0,i)},h.prototype.writeFloatBE=function(e,t,i){return C(this,e,t,!1,i)},h.prototype.writeDoubleLE=function(e,t,i){return I(this,e,t,!0,i)},h.prototype.writeDoubleBE=function(e,t,i){return I(this,e,t,!1,i)},h.prototype.copy=function(e,t,i,r){if(!h.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);let n=r-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,r):Uint8Array.prototype.set.call(e,this.subarray(i,r),t),n},h.prototype.fill=function(e,t,i,r){let n;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{let s=h.isBuffer(e)?e:h.from(e,r),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=s[n%a]}return this};let _={};function O(e,t,i){_[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function P(e){let t="",i=e.length,r=+("-"===e[0]);for(;i>=r+4;i-=3)t=`_${e.slice(i-3,i)}${t}`;return`${e.slice(0,i)}${t}`}function M(e,t,i,r,n,s){if(e>i||e<t){let r,n="bigint"==typeof t?"n":"";throw r=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`:`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** ${(s+1)*8-1}${n}`:`>= ${t}${n} and <= ${i}${n}`,new _.ERR_OUT_OF_RANGE("value",r,e)}R(n,"offset"),(void 0===r[n]||void 0===r[n+s])&&L(n,r.length-(s+1))}function R(e,t){if("number"!=typeof e)throw new _.ERR_INVALID_ARG_TYPE(t,"number",e)}function L(e,t,i){if(Math.floor(e)!==e)throw R(e,i),new _.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE(i||"offset",`>= ${+!!i} and <= ${t}`,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),O("ERR_OUT_OF_RANGE",function(e,t,i){let r=`The value of "${e}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>0x100000000?n=P(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=P(n)),n+="n"),r+=` It must be ${t}. Received ${n}`},RangeError);let D=/[^+/0-9A-Za-z-_]/g;function k(e,t){let i;t=t||1/0;let r=e.length,n=null,s=[];for(let a=0;a<r;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319||a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function N(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,i,r){let n;for(n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let i=0;i<16;++i){let r=16*i;for(let n=0;n<16;++n)t[r+n]=e[i]+e[n]}return t}();function G(e){return"u"<typeof BigInt?V:e}function V(){throw Error("BigInt not supported")}},{"9c62938f1dccc73c":"2SeAb",aceacb6a4531a9d2:"goYRW"}],"2SeAb":[function(e,t,i,r){i.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return(i+r)*3/4-r},i.toByteArray=function(e){var t,i,r=l(e),n=r[0],o=r[1],h=new a((n+o)*3/4-o),c=0,d=o>0?n-4:n;for(i=0;i<d;i+=4)t=s[e.charCodeAt(i)]<<18|s[e.charCodeAt(i+1)]<<12|s[e.charCodeAt(i+2)]<<6|s[e.charCodeAt(i+3)],h[c++]=t>>16&255,h[c++]=t>>8&255,h[c++]=255&t;return 2===o&&(t=s[e.charCodeAt(i)]<<2|s[e.charCodeAt(i+1)]>>4,h[c++]=255&t),1===o&&(t=s[e.charCodeAt(i)]<<10|s[e.charCodeAt(i+1)]<<4|s[e.charCodeAt(i+2)]>>2,h[c++]=t>>8&255,h[c++]=255&t),h},i.fromByteArray=function(e){for(var t,i=e.length,r=i%3,s=[],a=0,o=i-r;a<o;a+=16383)s.push(function(e,t,i){for(var r,s=[],a=t;a<i;a+=3)r=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[r>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===r?s.push(n[(t=e[i-1])>>2]+n[t<<4&63]+"=="):2===r&&s.push(n[(t=(e[i-2]<<8)+e[i-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],s=[],a="u">typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,c=o.length;h<c;++h)n[h]=o[h],s[o.charCodeAt(h)]=h;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}s[45]=62,s[95]=63},{}],goYRW:[function(e,t,i,r){i.read=function(e,t,i,r,n){var s,a,o=8*n-r-1,h=(1<<o)-1,c=h>>1,l=-7,d=i?n-1:0,u=i?-1:1,f=e[t+d];for(d+=u,s=f&(1<<-l)-1,f>>=-l,l+=o;l>0;s=256*s+e[t+d],d+=u,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=u,l-=8);if(0===s)s=1-c;else{if(s===h)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=c}return(f?-1:1)*a*Math.pow(2,s-r)},i.write=function(e,t,i,r,n,s){var a,o,h,c=8*s-n-1,l=(1<<c)-1,d=l>>1,u=5960464477539062e-23*(23===n),f=r?0:s-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+d>=1?t+=u/h:t+=u*Math.pow(2,1-d),t*h>=2&&(a++,h/=2),a+d>=l?(o=0,a=l):a+d>=1?(o=(t*h-1)*Math.pow(2,n),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;e[i+f]=255&o,f+=p,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;e[i+f]=255&a,f+=p,a/=256,c-=8);e[i+f-p]|=128*g}},{}],glvjH:[function(e,t,i,r){t.exports.RoomsConst={ROOM_TYPE_SCENE:"scene",ROOM_TYPE_LOGIN:"login",ROOM_TYPE_GAME:"game",TILE_INDEX:"i",NEXT_SCENE:"n",MAPS_BUCKET:"/assets/maps/",ROOM_LAST_LOCATION_KEY:"@lastLocation",RETURN_POINT_KEYS:{DIRECTION:"d",X:"x",Y:"y",DEFAULT:"de",PREVIOUS:"p"},ERRORS:{CREATING_ROOM_AWAIT:"CREATING-ROOM-AWAIT"}}},{}],z0nmL:[function(e,t,i,r){t.exports.GameConst={START_GAME:"s",ACTION_KEY:"act",CREATE_PLAYER:"cp",CREATE_PLAYER_RESULT:"cps",CHANGING_SCENE:"cgs",CHANGED_SCENE:"cs",RECONNECT:"r",ROOM_GAME:"room_game",ROOM_NAME_MAP:"Map",SCENE_PRELOADER:"ScenePreloader",PLAYER_STATS:"ps",ICON_STATS:"player-stats",CLIENT_JOINED:"cj",UI:"ui",CLOSE_UI_ACTION:"closeUi",TYPE_PLAYER:"pj",GAME_OVER:"go",REVIVED:"rv",BUTTON_OPTION:"btn-opt",UI_BOX:"box",UI_CLOSE:"-close",UI_OPEN:"-open",UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right",STOP:"stop",POINTER:"mp",ARROW_DOWN:"ard",IMAGE_PLAYER:"player",IMAGE_PLAYER_BASE:"player-base.png",ACTIONS:{LOGIN_UPDATE_ERROR:"luer"},STATUS:{ACTIVE:1,DISABLED:2,DEATH:3,AVOID_INTERPOLATION:4},STRUCTURE:{DEFAULT:"default",ASSETS:"assets",CSS:"css",DIST:"dist",THEME:"theme",LIB:"lib",SERVER:"server",CLIENT:"client",PLUGINS:"plugins",INDEX:"index.html",SCSS_FILE:"styles.scss",CSS_FILE:"styles.css",ADMIN:"admin",TEMPLATES:"templates",ADMIN_JS_FILE:"reldens-admin-client.js",ADMIN_CSS_FILE:"reldens-admin-client.css",INSTALLER_FOLDER:"install",INSTALL_LOCK:"install.lock"},ROUTE_PATHS:{DISCONNECT_USER:"/reldens-disconnect-user",TERMS_AND_CONDITIONS:"/terms-and-conditions",MAILER:"/reldens-mailer-enabled",FIREBASE:"/reldens-firebase"},SELECTORS:{BODY:"body",CANVAS:"CANVAS",INPUT:"input",FORMS_CONTAINER:".forms-container",REGISTER_FORM:"#register-form",GUEST_FORM:"#guest-form",LOGIN_FORM:"#login-form",FORGOT_PASSWORD_FORM:"#forgot-form",PLAYER_CREATE_FORM:".player-create-form",PLAYER_SELECTION:"#player-selection",PLAYER_SELECTION_FORM:"#player-selector-form",PLAYER_SELECT_ELEMENT:"#player-select-element",PLAYER_SELECTION_ADDITIONAL_INFO:".player-selection-additional-info",FULL_SCREEN_BUTTON:"#full-screen-btn",RESPONSE_ERROR:".response-error",LOADING_CONTAINER:".loading-container",REGISTRATION:{PASSWORD:"#reg-password",RE_PASSWORD:"#reg-re-password",EMAIL:"#reg-email",USERNAME:"#reg-username"},GUEST:{USERNAME:"#guest-username"},LOGIN:{USERNAME:"#username",PASSWORD:"#password"},FORGOT_PASSWORD:{EMAIL:"#forgot-email",CONTAINER:".forgot-password-container"},TERMS:{BOX:"#terms-and-conditions",CONTAINER:".terms-and-conditions-container",LINK_CONTAINER:".terms-and-conditions-link-container",LINK:".terms-and-conditions-link",ACCEPT:"#accept-terms-and-conditions",ACCEPT_LABEL:".accept-terms-and-conditions-label",HEADING:".terms-heading",BODY:".terms-body",CLOSE:"#terms-and-conditions-close"},GAME_CONTAINER:".game-container",BUTTONS_CLOSE:".box-close"},CLASSES:{HIDDEN:"hidden",GAME_STARTED:"game-started",GAME_ERROR:"game-error",GAME_ENGINE_STARTED:"game-engine-started",FULL_SCREEN_ON:"full-screen-on"},MESSAGE:{DATA_VALUES:{NAMESPACE:"game"}},LABELS:{YES:"Yes",NO:"No"},ANIMATIONS_TYPE:{SPRITESHEET:"spritesheet"},FILES:{EXTENSIONS:{PNG:".png"}},GRAPHICS:{FRAME_WIDTH:32,FRAME_HEIGHT:32},SHOW_PLAYER_TIME:{NONE:-1,ONLY_OWN_PLAYER:0,ALL_PLAYERS:2}}},{}],ijd9L:[function(e,t,i,r){let n=e("a4ab2983c9d35fd8");t.exports={EventsManager:n,EventsManagerSingleton:new n,ErrorManager:e("1695e46110f15942"),InteractionArea:e("8fd16851c34338c4"),PageRangeProvider:e("2b0fe04e85d1b04c"),ValidatorInterface:e("18b27c83faddb89b"),SchemaValidator:e("adcc322a4503ef19"),EnvVar:e("8d49b0df03e5eb20"),Logger:e("a5fec30b90d89350"),sc:e("859c680ee2b5bef8")}},{a4ab2983c9d35fd8:"5hWvy","1695e46110f15942":"9OvVh","8fd16851c34338c4":"hOQCQ","2b0fe04e85d1b04c":"c11ix","18b27c83faddb89b":"9woT5",adcc322a4503ef19:"jYzud","8d49b0df03e5eb20":"aMCRr",a5fec30b90d89350:"1pIw5","859c680ee2b5bef8":"96GHa"}],"5hWvy":[function(e,t,i,r){let n=e("53a92d7fd4d1ab5e"),s=e("fb3dac7fa90fc435");t.exports=class{constructor(){this._events={},this.eventsByRemoveKeys={},this.debug=!1,this._listenersCache={},this._validationCache=new Map,this._debugPatterns=null,this.maxEventKeyLength=1e3,this.maxListeners=1e4,this.maxEventArgs=50,this.sensitiveFields=["password","token","secret","auth","credential"],this.hasLoggedMaxListeners=!1,this.symbolString="--[[await-event-emitter]]--",this.typeKeyName=s.isFunction(Symbol)?Symbol.for(this.symbolString):this.symbolString,this.enableSensitiveDataFiltering=!1}assertType(e){if(!s.isString(e)&&!s.isSymbol(e))throw TypeError("type is not type of string or symbol!")}assertFn(e){if(!s.isFunction(e))throw TypeError("fn is not type of Function!")}alwaysListener(e){return{[this.typeKeyName]:"always",fn:e}}onceListener(e){return{[this.typeKeyName]:"once",fn:e}}validateEventKey(e){if(this._validationCache.has(e))return this._validationCache.get(e);if(s.isString(e)&&e.length>this.maxEventKeyLength)return n.critical("Event key exceeds maximum length: "+e.length),this._validationCache.set(e,!1),!1;let t=!s.hasDangerousKeys(null,e);return this._validationCache.set(e,t),t}sanitizeEventArgs(e){return s.isArray(e)?e.length>this.maxEventArgs?(n.warning("Event arguments exceed maximum: "+e.length),[]):this.enableSensitiveDataFiltering?e.map(e=>s.isObject(e)?this.filterSensitiveData(e):e):e:[]}filterSensitiveData(e,t=new WeakSet){if(!s.isObject(e))return e;if(t.has(e))return"[CIRCULAR]";if(e instanceof Map||e instanceof Set||e instanceof Date||e instanceof Array||Object.getPrototypeOf(e)!==Object.prototype)return e;t.add(e);let i={};for(let r of Object.keys(e))if(!s.hasDangerousKeys(null,r)){if(this.sensitiveFields.some(e=>r.toLowerCase().includes(e.toLowerCase()))){i[r]="[FILTERED]";continue}if(s.isObject(e[r])){i[r]=this.filterSensitiveData(e[r],t);continue}if(s.isFunction(e[r])){i[r]=e[r];continue}i[r]=e[r]}return t.delete(e),i}checkMemoryLeaks(){if(this.hasLoggedMaxListeners)return!0;let e=0;for(let t of Object.keys(this._events))e+=this._events[t].length;return e>this.maxListeners&&(n.debug("High listener count detected: "+e+" total listeners"),this.hasLoggedMaxListeners=!0),!0}addListener(e,t){return this.on(e,t)}on(e,t){return(this.assertType(e),this.assertFn(t),this.validateEventKey(e))?(!1!==this.debug&&this.logDebugEvent(e,"Listen"),this._events[e]=this._events[e]||[],this._events[e].push(this.alwaysListener(t)),delete this._listenersCache[e],this.checkMemoryLeaks(),this):(n.critical("Invalid event key detected: "+e),!1)}prependListener(e,t){return this.prepend(e,t)}prepend(e,t){return(this.assertType(e),this.assertFn(t),this.validateEventKey(e))?(this._events[e]=this._events[e]||[],this._events[e].unshift(this.alwaysListener(t)),delete this._listenersCache[e],this.checkMemoryLeaks(),this):(n.critical("Invalid event key detected: "+e),!1)}prependOnceListener(e,t){return this.prependOnce(e,t)}prependOnce(e,t){return(this.assertType(e),this.assertFn(t),this.validateEventKey(e))?(this._events[e]=this._events[e]||[],this._events[e].unshift(this.onceListener(t)),delete this._listenersCache[e],this.checkMemoryLeaks(),this):(n.critical("Invalid event key detected: "+e),!1)}listeners(e){if(this._listenersCache[e])return this._listenersCache[e];let t=(this._events[e]||[]).map(e=>e.fn);return this._listenersCache[e]=t,t}once(e,t){return(this.assertType(e),this.assertFn(t),this.validateEventKey(e))?(this._events[e]=this._events[e]||[],this._events[e].push(this.onceListener(t)),delete this._listenersCache[e],this.checkMemoryLeaks(),this):(n.critical("Invalid event key detected: "+e),!1)}removeAllListeners(){this._events={},this._listenersCache={}}off(e,t){return this.removeListener(e,t)}removeListener(e,t){if(this.assertType(e),!this.validateEventKey(e))return n.critical("Invalid event key detected: "+e),!1;let i=this.listeners(e);if(s.isFunction(t)){let r=-1,n=!1;for(;-1<(r=i.indexOf(t));)i.splice(r,1),this._events[e].splice(r,1),n=!0;return delete this._listenersCache[e],n}return delete this._events[e],delete this._listenersCache[e],!0}async emit(e,...t){if(this.assertType(e),!this.validateEventKey(e))return n.critical("Invalid event key detected: "+e),!1;let i=this.sanitizeEventArgs(t);!1!==this.debug&&this.logDebugEvent(e,"Fire",i),this.checkMemoryLeaks();let r=this.listeners(e),a=[];if(r&&r.length){for(let t=0;t<r.length;t++){let n=r[t],o=n.apply(this,i);s.isPromise(o)&&await o,this._events[e]&&this._events[e][t]&&"once"===this._events[e][t][this.typeKeyName]&&a.push(n)}for(let t of a)this.removeListener(e,t);return!0}return!1}emitSync(e,...t){if(this.assertType(e),!this.validateEventKey(e))return n.critical("Invalid event key detected: "+e),!1;let i=this.sanitizeEventArgs(t),r=this.listeners(e),s=[];if(r&&r.length){for(let t=0;t<r.length;t++){let n=r[t];n.apply(this,i),this._events[e]&&this._events[e][t]&&"once"===this._events[e][t][this.typeKeyName]&&s.push(n)}for(let t of s)this.removeListener(e,t);return!0}return!1}onWithKey(e,t,i,r){if(!this.validateEventKey(e))return n.critical("Invalid event key detected: "+e),!1;if(!this.validateEventKey(i))return n.critical("Invalid remove key detected: "+i),!1;if(r&&!this.validateEventKey(r))return n.critical("Invalid master key detected: "+r),!1;if(s.hasOwn(this.eventsByRemoveKeys,i))return n.debug('Event "'+e+'" exists with key "'+i+'".'),!1;if(r&&s.hasOwn(this.eventsByRemoveKeys,r)&&s.hasOwn(this.eventsByRemoveKeys[r],i))return n.debug('Event "'+e+'" exists with key "'+i+'" and masterKey "'+r+'".'),!1;this.on(e,t);let a=this.listeners(e),o=a.indexOf(t),h=a[o];return r?(s.hasOwn(this.eventsByRemoveKeys,r)||(this.eventsByRemoveKeys[r]={}),this.eventsByRemoveKeys[r][i]={eventName:e,callback:t}):this.eventsByRemoveKeys[i]={eventName:e,callback:t},h}offWithKey(e,t){if(!this.validateEventKey(e))return n.critical("Invalid remove key detected: "+e),!1;if(t&&!this.validateEventKey(t))return n.critical("Invalid master key detected: "+t),!1;if(t&&!s.hasOwn(this.eventsByRemoveKeys,t))return n.debug('Event not found by masterKey "'+t+'".'),!1;if(!t&&!s.hasOwn(this.eventsByRemoveKeys,e))return n.debug('Event not found by removeKey "'+e+'".'),!1;let i=t?this.eventsByRemoveKeys[t][e]:this.eventsByRemoveKeys[e];if(!this.validateEventKey(i.eventName))return n.critical("Invalid event name in stored event: "+i.eventName),!1;let r=this.listeners(i.eventName).indexOf(i.callback);return -1===r?(n.debug("Event listener not found in _events array."),!1):((this._events[i.eventName].splice(r,1),0===this._events[i.eventName].length&&delete this._events[i.eventName],delete this._listenersCache[i.eventName],t)?(delete this.eventsByRemoveKeys[t][e],n.debug('Deleted event by removeKey "'+e+'" and masterKey "'+t+'".')):(delete this.eventsByRemoveKeys[e],n.debug('Deleted event by removeKey "'+e+'".')),!0)}offByMasterKey(e){if(!this.validateEventKey(e))return n.critical("Invalid master key detected: "+e),!1;if(!s.hasOwn(this.eventsByRemoveKeys,e))return n.debug('Events not found by masterKey "'+e+'".'),!1;n.debug("Removing events by masterKey: "+e,Object.keys(this.eventsByRemoveKeys[e]));let t=Object.keys(this.eventsByRemoveKeys[e]),i=new Set;for(let r of t){let t=this.eventsByRemoveKeys[e][r];if(!this.validateEventKey(t.eventName))continue;i.add(t.eventName);let n=this.listeners(t.eventName).indexOf(t.callback);-1!==n&&(this._events[t.eventName].splice(n,1),0===this._events[t.eventName].length&&delete this._events[t.eventName])}for(let e of i)delete this._listenersCache[e];delete this.eventsByRemoveKeys[e]}logDebugEvent(e,t,i=null){if(this._debugPatterns||(this._debugPatterns=new Set(this.debug.split(","))),!this._debugPatterns.has("all")&&!this._debugPatterns.has(e)&&-1===e.indexOf(this.debug))return;let r=t+" Event: "+e;i&&0<i.length&&(r+=" with "+(this.enableSensitiveDataFiltering?i.map(e=>this.filterSensitiveData(e)):i).length+" arguments"),n.debug(r)}}},{"53a92d7fd4d1ab5e":"1pIw5",fb3dac7fa90fc435:"96GHa"}],"1pIw5":[function(e,t,i,r){let n=e("254074c6d27e38f4");t.exports=new class{logLevels={none:0,emergency:1,alert:2,critical:3,error:4,warning:5,notice:6,info:7,debug:8};constructor(){let e=this.context();this.enableTraceBack=n.get(e,"RELDENS_LOGS_ENABLE_TRACE_BACK",""),this.logLevelBack=n.get(e,"RELDENS_LOGS_LEVEL_BACK",3),this.callback=!1,this.forcedDisabled=!!n.get(e,"RELDENS_LOGS_FORCED_DISABLED",!1),this.addTimeStamp=!!n.get(e,"RELDENS_LOGS_INCLUDE_TIMESTAMP",!0),this.maxLogArgLength=n.get(e,"RELDENS_LOGS_MAX_ARGUMENT_LENGTH",0),this.maxStackTraceLength=n.get(e,"RELDENS_LOGS_MAX_STACK_TRACE_LENGTH",0),this.applySanitizer=!!n.get(e,"RELDENS_LOGS_APPLY_SANITIZER",!1),this.activeLogLevels=[],this.customLevels=[]}context(){return"u">typeof window?window:{}}enableTraceAll(){return this.enableTraceBack=this.context().RELDENS_ENABLE_TRACE_FOR,this.context().RELDENS_ENABLE_TRACE_FOR="all",this}restoreTraceFor(){return this.context().RELDENS_ENABLE_TRACE_FOR=this.enableTraceBack,this}setLogLevel(e){return this.logLevelBack=this.context().RELDENS_LOG_LEVEL,this.context().RELDENS_LOG_LEVEL=e,this}restoreLogLevel(){return this.context().RELDENS_LOG_LEVEL=this.logLevelBack,this}setForcedDisabled(e){return this.forcedDisabled=e,this}setAddTimeStamp(e){return this.addTimeStamp=e,this}logLevel(){return this.context().RELDENS_LOG_LEVEL||0}enableTraceFor(){return(this.context().RELDENS_ENABLE_TRACE_FOR||"").split(",")}log(e,t,...i){if(this.forcedDisabled||0<this.activeLogLevels.length&&-1===this.activeLogLevels.indexOf(e)||0===this.activeLogLevels.length&&e>this.logLevel())return this;let r=this.addTimeStamp?new Date().toISOString().slice(0,19).replace("T"," ")+" - ":"",s=i;if(this.applySanitizer&&(s=i.map(e=>n.isString(e)?n.cleanMessage(e,this.maxLogArgLength):e)),this.logWithCallback(r+t.toUpperCase()+" -",...s),-1!==this.enableTraceFor().indexOf("all")||-1!==this.enableTraceFor().indexOf(t)){if("function"!=typeof Error?.captureStackTrace)return this.logWithCallback("Error.captureStackTrace is not available.",typeof Error?.captureStackTrace),this;let e={};Error.captureStackTrace(e,t);let i=e.stack;this.applySanitizer&&(i=n.cleanMessage(e.stack,this.maxStackTraceLength)),this.logWithCallback(i)}return this}logWithCallback(...e){"function"==typeof this.callback&&this.callback(...e),console.log(...e)}debug(...e){return this.log(8,"debug",...e)}info(...e){return this.log(7,"info",...e)}notice(...e){return this.log(6,"notice",...e)}warning(...e){return this.log(5,"warning",...e)}error(...e){return this.log(4,"error",...e)}critical(...e){return this.log(3,"critical",...e)}alert(...e){return this.log(2,"alert",...e)}emergency(...e){return this.log(1,"emergency",...e)}}},{"254074c6d27e38f4":"96GHa"}],"96GHa":[function(e,t,i,r){t.exports=new class{hasOwn(e,t){if(this.isArray(t)&&0<t.length){for(let i of t)if(!(e&&({}).hasOwnProperty.call(e,i)))return!1;return!0}return e&&({}).hasOwnProperty.call(e,t)&&void 0!==e[t]}isTrue(e,t,i){return e&&({}).hasOwnProperty.call(e,t)&&void 0!==e[t]&&(i?!0===e[t]:e[t])}isObject(e){return e&&"object"==typeof e&&!this.isArray(e)}isArray(e){return Array.isArray(e)}inArray(e,t){return!!this.isArray(t)&&-1!==t.indexOf(e)}isNotEmptyArray(e){return this.isArray(e)&&0<e.length}isFunction(e){return e&&"function"==typeof e}isObjectFunction(e,t){return this.isObject(e)&&t&&"function"==typeof e[t]}isSymbol(e){return"symbol"==typeof e}isString(e){return"string"==typeof e}isNumber(e){return"number"==typeof e}isInt(e){return!!this.isNumber(e)&&Number.isInteger(e)}isFloat(e){return!!this.isNumber(e)&&Number(e)===e&&0!=e%1}isBoolean(e){return"boolean"==typeof e}isPromise(e){return e&&"function"==typeof e.then}hasDangerousKeys(e,t=null){let i=["__proto__","constructor","prototype"];if(t)return -1!==i.indexOf(t);if(!this.isObject(e))return!1;for(let t of i)if(this.hasOwn(e,t))return!0;return!1}deepMergeProperties(e,t){if(!this.isObject(e)||!this.isObject(t))return!1;for(let i of Object.keys(t))if(!this.hasDangerousKeys(null,i)){if(this.isObject(t[i])){if(!this.hasOwn(e,i)){e[i]=t[i];continue}this.deepMergeProperties(e[i],t[i]);continue}e[i]=t[i]}return e}length(e){return e?Object.keys(e).length:0}startsWith(e,t){return this.isString(e)&&0===e.indexOf(t)}contains(e,t){return this.isString(e)&&-1!==e.indexOf(t)}convertObjectsArrayToObjectByKeys(e,t){if(!this.isArray(e)||0===e.length)return{};let i={};for(let r of e)i[r[t]]=r;return i}sortObjectKeysBy(e,t){return Object.keys(e).sort((i,r)=>e[i][t]>e[r][t]?1:-1)}arraySort(e,t,i="asc"){if(!e||!t)return e;let r="asc"===i?1:-1,n="asc"===i?-1:1;return e.sort((e,i)=>e[t]>i[t]?r:n)}propsAssign(e,t,i){if(!this.isArray(i))return t;for(let r of i)t[r]=e[r];return t}toJson(e,t=!1){return this.parseJson(e)||t}parseJson(e,t=!1){let i;try{i=JSON.parse(e)}catch(e){return t}return this.hasDangerousKeys(i)?t:i}deepJsonClone(e){return JSON.parse(this.toJsonString(e))}toJsonString(e){return JSON.stringify(e)}get(e,t,i){return this.hasOwn(e,t)?e[t]:i}getByPath(e,t,i){if(!this.isObject(e)||!this.isArray(t))return i;let r=t.shift();return 0===t.length?this.get(e,r,i):this.getByPath(e[r],t,i)}getByPriority(e,t){if(!this.isArray(t))return!1;for(let i of t)if(this.hasOwn(e,i))return e[i];return!1}fetchByProperty(e,t,i){if(!this.isArray(e)||0===e.length)return!1;for(let r of e)if(r[t]===i)return r;return!1}fetchAllByProperty(e,t,i){if(!this.isArray(e)||0===e.length)return[];let r=[];for(let n of e)n[t]===i&&r.push(n);return r}fetchByPropertyOnObject(e,t,i){if(!e)return!1;let r=Object.keys(e);if(0===r.length)return!1;for(let n of r){let r=e[n];if(r[t]===i)return r}return!1}fetchAllByPropertyOnObject(e,t,i){if(!e)return[];let r=Object.keys(e);if(0===r.length)return[];let n=[];for(let s of r){let r=e[s];r[t]===i&&n.push(r)}return n}serializeFormData(e){if(0===e.length)return{};let t={};for(let[i,r]of e)void 0!==t[i]?(this.isArray(t[i])||(t[i]=[t[i]]),t[i].push(r)):t[i]=r;return t}removeFromArray(e,t){return e.filter(e=>-1===t.indexOf(e))}getCurrentDate(){return new Date().toISOString().slice(0,19).replace("T"," ")}getDateForFileName(){return new Date().toISOString().slice(0,19).replace("T","-").replace(/:/g,"-")}formatDate(e,t="Y-m-d H:i:s"){if(!(e instanceof Date))return e;let i={Y:e.getFullYear(),m:(e.getMonth()+1).toString().padStart(2,"0"),d:e.getDate().toString().padStart(2,"0"),H:e.getHours().toString().padStart(2,"0"),i:e.getMinutes().toString().padStart(2,"0"),s:e.getSeconds().toString().padStart(2,"0")};return t.replace(/Y|m|d|H|i|s/g,e=>i[e])}getTime(){return new Date().getTime()}roundToPrecision(e,t=4){return Number(Number(e).toFixed(t))}randomValueFromArray(e){return this.isArray(e)&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null}randomInteger(e,t){return Math.floor(Math.random()*(t-e+1))+e}randomChars(e){return 0>=e?"":this.randomString(e,!1)}randomCharsWithSymbols(e){return 0>=e?"":this.randomString(e,!0)}randomString(e,t=!1){let i="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t&&(r+="!@#$%&*()_-=+[]{}:;<>,./?");let n=r.length;for(let t=0;t<e;t++)i+=r.charAt(Math.floor(Math.random()*n));return i}cleanMessage(e,t){if(!e)return"";let i=e.replace(/\\/g,"").replace(/[\r\n\t]/g," ");return 0<t?i.substring(0,t):i}slugify(e){return(e||"").replace(/&/g," and ").replace(/[^a-zA-Z0-9]/g," ").trim().replace(/\s+/g,"-").toLowerCase()}isValidIsoCode(e){return/^[a-zA-Z]{2}$/.test(e)}sanitize(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;").replace(/\(/g,"&#x28;").replace(/\)/g,"&#x29;"):""}sanitizeUrl(e){if(!e||!this.isString(e)||2048<e.length)return"";let t=e.trim();return/^https?:\/\/(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)*[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)(?::[1-9][0-9]{0,4})?(?:\/(?:[\w\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*(?:\?(?:[\w\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?(?:#(?:[\w\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?$/.test(t)?t.replace(/javascript:/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,""):""}camelCase(e){return this.isString(e)&&0!==e.length?e.replace(/[_\s]+(.)?/g,(e,t)=>t?t.toUpperCase():""):e}capitalizedCamelCase(e){if(!this.isString(e)||0===e.length)return e;let t=this.camelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)}kebabCase(e){return e.replace(/[_\s]+/g,"-")}capitalize(e){return this.isString(e)&&0!==e.length?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e}chunk(e,t){if(!this.isArray(e)||0>=t)return[];let i=[];for(let r=0;r<e.length;r+=t)i.push(e.slice(r,r+t));return i}flatten(e,t=1){return this.isArray(e)?e.flat(t):[]}unique(e){return this.isArray(e)?[...new Set(e)]:[]}clamp(e,t,i){return this.isNumber(e)&&this.isNumber(t)&&this.isNumber(i)?Math.min(Math.max(e,t),i):e}truncate(e,t,i="..."){return!this.isString(e)||e.length<=t?e:e.substring(0,t)+i}pickProps(e,t){if(!this.isObject(e)||!this.isArray(t))return{};let i={};for(let r of t)!this.hasDangerousKeys(null,r)&&this.hasOwn(e,r)&&(i[r]=e[r]);return i}omitProps(e,t){if(!this.isObject(e)||!this.isArray(t))return e;let i={};for(let r of Object.keys(e))-1===t.indexOf(r)&&(i[r]=e[r]);return i}debounce(e,t){let i;return this.isFunction(e)&&this.isNumber(t)?function(...r){let n=()=>{clearTimeout(i),e.apply(this,r)};clearTimeout(i),i=setTimeout(n,t)}:e}throttle(e,t){let i;return this.isFunction(e)&&this.isNumber(t)?function(...r){i||(e.apply(this,r),i=!0,setTimeout(()=>i=!1,t))}:e}isValidUrl(e){return!!this.isString(e)&&!(2048<e.length)&&/^https?:\/\/(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)*[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)(?::[1-9][0-9]{0,4})?(?:\/(?:[\w\-._~!$&'()*+,;=:@]|%[0-9A-Fa-f]{2})*)*(?:\?(?:[\w\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?(?:#(?:[\w\-._~!$&'()*+,;=:@/?]|%[0-9A-Fa-f]{2})*)?$/.test(e)}isValidInteger(e,t,i){return!!this.isNumber(e)&&!!Number.isInteger(e)&&("number"!=typeof t||!(e<t))&&("number"!=typeof i||!(e>i))}parseNumber(e){return isNaN(Number(e))||""===e||null===e?null:Number(e)}splitToArray(e,t=","){return this.isString(e)&&""!==e.trim()?e.split(t).map(e=>e.trim()).filter(e=>""!==e):null}isSecurePath(e,t=[],i=2048){if(!this.isString(e))return!1;let r=e.replace(/\\/g,"/");for(let e of(this.isArray(t)&&0!==t.length||(t=["../","..\\","./",".\\","/etc/","/proc/","/sys/","C:\\Windows\\","C:\\System32\\","%2e%2e%2f","%2e%2e%5c"]),t))if(r.toLowerCase().includes(e.toLowerCase()))return!1;return i>=e.length}validateInput(e,t){if(!this.isString(e))return!1;let i={email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,username:/^[a-zA-Z0-9_-]{3,30}$/,strongPassword:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,alphanumeric:/^[a-zA-Z0-9]+$/,numeric:/^\d+$/,hexColor:/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/};return!!i[t]&&i[t].test(e)}}},{}],"9OvVh":[function(e,t,i,r){t.exports=new class{constructor(){this.enableTrace=!1,this.callback=!1}error(e){if(this.enableTrace&&console.trace(),"function"==typeof this.callback)return this.callback(e);throw Error(e)}}},{}],hOQCQ:[function(e,t,i,r){t.exports=class{constructor(){this.x=!1,this.y=!1,this.interactionArea=!1,this.interactionLimits={}}setupInteractionArea(e=!1,t=!1,i=!1){e&&(this.interactionArea=e),this.interactionArea&&(t&&(this.x=t),i&&(this.y=i),this.interactionLimits.left=this.x-this.interactionArea,this.interactionLimits.right=this.x+this.interactionArea,this.interactionLimits.up=this.y-this.interactionArea,this.interactionLimits.down=this.y+this.interactionArea)}isValidInteraction(e,t){return e>this.interactionLimits.left&&e<this.interactionLimits.right&&t>this.interactionLimits.up&&t<this.interactionLimits.down}getPosition(){return{x:this.x,y:this.y}}}},{}],c11ix:[function(e,t,i,r){t.exports=new class{fetch(e,t,i=5,r="first",n="last"){let s=Math.floor(i/2),a=e-s,o=e+s;a=Math.max(1,a),(o=Math.min(t,o))-a+1<i&&(1===a&&(o=Math.min(t,a+i-1)),a=Math.max(1,o-i+1));let h=[];1<a&&h.push({label:r,value:1});for(let e=a;e<=o;e++)h.push({label:e,value:e});return o<t&&h.push({label:n,value:t-1}),h}}},{}],"9woT5":[function(e,t,i,r){t.exports=class{validate(){return!0}}},{}],jYzud:[function(e,t,i,r){let n=e("925bbe7b60288950"),s=e("323fb244d0666aec"),a=e("67ee8372a6acd243");t.exports=class extends n{constructor(e){super(),this.schema=e}validate(e,t=!1){if(t||(t=this.schema),!s.isObject(t))return a.debug("No schema provided."),!1;for(let i of Object.keys(t)){let r=t[i];if(r.required&&!s.hasOwn(e,i))return a.debug("Required property missing.",i),!1;if((s.hasOwn(e,i)||r.required)&&(!this.isValidSchema(e[i],r,i)||r.nested&&!this.validate(e[i],r.nested)))return!1}return!0}isValidSchema(e,t,i){if(!t||!t.type)return a.debug("No schema type provided.",t,e,i),!1;if(t.custom&&s.isFunction(t.custom)&&!t.custom(e))return a.debug("Custom validation failed.",i,e,t),!1;if(t.enum&&s.isArray(t.enum)&&-1===t.enum.indexOf(e))return a.debug("Value not in enum.",i,e,t.enum),!1;switch(t.type){case"string":if(!s.isString(e))return a.debug("Object is not a string.",i,e,t),!1;if(t.min&&e.length<t.min)return a.debug("String too short.",i,e.length,t.min),!1;if(t.max&&e.length>t.max)return a.debug("String too long.",i,e.length,t.max),!1;if(t.pattern&&!t.pattern.test(e))return a.debug("String pattern mismatch.",i,e,t.pattern),!1;break;case"number":if(!s.isInt(e)&&!s.isFloat(e))return a.debug("Object is not a number.",i,e,t),!1;if(t.min&&e<t.min)return a.debug("Number too small.",i,e,t.min),!1;if(t.max&&e>t.max)return a.debug("Number too large.",i,e,t.max),!1;break;case"int":if(!s.isInt(e))return a.debug("Object is not an integer.",i,e,t),!1;if(t.min&&e<t.min)return a.debug("Integer too small.",i,e,t.min),!1;if(t.max&&e>t.max)return a.debug("Integer too large.",i,e,t.max),!1;break;case"float":if(!s.isFloat(e))return a.debug("Object is not a float.",i,e,t),!1;if(t.min&&e<t.min)return a.debug("Float too small.",i,e,t.min),!1;if(t.max&&e>t.max)return a.debug("Float too large.",i,e,t.max),!1;break;case"boolean":if(!s.isBoolean(e))return a.debug("Object is not a boolean.",i,e,t),!1;break;case"object":if(!s.isObject(e))return a.debug("Object is not an object.",i,e,t),!1;break;case"array":if(!s.isArray(e))return a.debug("Object is not an array.",i,e,t),!1;if(t.min&&e.length<t.min)return a.debug("Array too short.",i,e.length,t.min),!1;if(t.max&&e.length>t.max)return a.debug("Array too long.",i,e.length,t.max),!1;if(t.valuesType){for(let r of e)if(!this.isValidSchema(r,{type:t.valuesType},i))return a.debug("Invalid array value.",r,t),!1}break;default:return a.debug("Invalid schema type provided.",t.type),!1}return!0}}},{"925bbe7b60288950":"9woT5","323fb244d0666aec":"96GHa","67ee8372a6acd243":"1pIw5"}],aMCRr:[function(e,t,i,r){let n=e("27d9742b7d89a551");t.exports=new class{string(e,t,i){let r=e[t];return"string"==typeof r?r:i}nonEmptyString(e,t,i){let r=e[t];return"string"==typeof r&&""!==r.trim()?r:i}number(e,t,i){let r=e[t],s=n.parseNumber(r);return s||i}boolean(e,t,i){let r=e[t];return"true"===r||"1"===r||"false"!==r&&"0"!==r&&i}array(e,t,i,r=","){let s=e[t],a=n.splitToArray(s,r);return a||i}url(e,t,i){let r=e[t];return n.isString(r)&&n.isValidUrl(r)?r:i}json(e,t,i){let r=e[t];return n.isString(r)?n.parseJson(r,i):i}integer(e,t,i,r,s){let a=this.number(e,t,i);return a!==i&&n.isValidInteger(a,r,s)?a:i}port(e,t,i){return this.integer(e,t,i,1,65535)}}},{"27d9742b7d89a551":"96GHa"}],ltHIn:[function(e,t,i,r){let n=e("ba5852f7a848a882"),{Game:s,Input:a}=e("de87093dc78fab7a"),{FPSCounter:o}=e("cb52d956827ba0f7"),{GameConst:h}=e("ef9f208014f49bfb"),{ObjectsConst:c}=e("74f28c3d4fc67c29"),{Logger:l,sc:d}=e("2aadc4f845e0da5b");t.exports.GameEngine=class extends s{constructor(e){super(e.config),l.debug("Game Engine configuration.",e.config),this.uiScene=!1,this.TemplateEngine=n,this.eventsManager=e.events,this.eventsManager.on("reldens.beforeReconnectGameClient",()=>{this.clearTarget()}),this.eventsManager.on("reldens.beforeSceneDynamicCreate",e=>{this.setupTabTarget(e)}),this.fpsCounter=void 0}parseTemplate(e,t,i,r){return this.TemplateEngine.render(e,t,i,r)}updateGameSize(e){let{newWidth:t,newHeight:i,mapWidth:r,mapHeight:n,activeScene:s}=this.getCurrentScreenSize(e),a=s.player;a&&s.cameras.main.setLerp(a.cameraInterpolationX,a.cameraInterpolationY),setTimeout(()=>{for(let a of(this.eventsManager.emit("reldens.updateGameSizeBefore",this,t,i),e.config.getWithoutLogs("client/ui/screen/updateGameSizeEnabled",!1)&&this.scale.setGameSize(t,i),this.centerSmallMapsCamera(e,s,t,r,i,n),Object.keys(this.uiScene.elementsUi))){let e=this.uiScene.elementsUi[a],r=d.get(this.uiScene.userInterfaces[a],"uiPositionKey",a),{uiX:n,uiY:s}=this.uiScene.getUiConfig(r,t,i);e.x=n,e.y=s}this.eventsManager.emit("reldens.updateGameSizeAfter",this,t,i),a&&s.cameras.main.setLerp(a.cameraInterpolationX,a.cameraInterpolationY)},e.config.getWithoutLogs("client/general/gameEngine/updateGameSizeTimeOut",0))}getCurrentScreenSize(e){let t=e.gameDom.getElement(h.SELECTORS.GAME_CONTAINER),i=t.offsetWidth,r=t.offsetHeight,n=i,s=r,a=0,o=0,c=e.getActiveScene();if(c){let t=c.map;t&&(a=t.width*t.tileWidth,o=t.height*t.tileHeight,e.config.getWithoutLogs("client/ui/screen/adjustUiElementsToMapSize",!1)&&0<a&&0<o&&(n=Math.min(i,a),s=Math.min(r,o)))}return e.config.getWithoutLogs("client/ui/maximum/enabled",!0)&&(n=Math.min(n,Number(e.config.get("client/ui/maximum/x"))),s=Math.min(s,Number(e.config.get("client/ui/maximum/y")))),{newWidth:n,newHeight:s,containerWidth:i,containerHeight:r,mapWidth:a,mapHeight:o,activeScene:c}}centerSmallMapsCamera(e,t,i,r,n,s){if(!e.config.getWithoutLogs("client/ui/screen/centerSmallMapsCamera",!0)||!t)return;let a=0,o=0;i>r&&(a=(i-r)/2),n>s&&(o=(n-s)/2),t.cameras.main.setPosition(a,o)}showTarget(e,t,i){d.hasOwn(this.uiScene,"uiTarget")&&(this.uiScene.uiTarget.getChildByID("box-target").style.display="block",this.uiScene.uiTarget.getChildByID("target-container").innerHTML=this.targetDisplay(e,t)),this.eventsManager.emit("reldens.gameEngineShowTarget",this,t,i,e)}targetDisplay(e,t){let i=e;return h.TYPE_PLAYER===t.type&&(i+=this.generateTargetPlayedTime(t)),i}generateTargetPlayedTime(e){let t="",i=this.uiScene.gameManager.config.getWithoutLogs("client/players/playedTime/show",h.SHOW_PLAYER_TIME.ONLY_OWN_PLAYER);if(h.SHOW_PLAYER_TIME.NONE===i)return t;let r=this.uiScene.gameManager.getCurrentPlayer();if(h.SHOW_PLAYER_TIME.ALL_PLAYERS===i||r.playerId===e.id){let i=this.obtainPlayedTime(e,r);t+=this.createPlayedTimeLabel(i)}return t}createPlayedTimeLabel(e){let t=this.uiScene.gameManager.gameDom.createElement("p");return t.innerHTML=this.uiScene.gameManager.config.get("client/players/playedTime/label").replace("%playedTimeInHs",e),t.outerHTML}obtainPlayedTime(e,t){return(t.players[e.id].playedTime/60/60).toFixed(1)}clearTarget(){let e=this.uiScene.gameManager.activeRoomEvents.getActiveScene(),t=Object.assign({},e.player.currentTarget);d.hasOwn(this.uiScene,"uiTarget")&&(e.player.currentTarget=!1,this.uiScene.uiTarget.getChildByID("box-target").style.display="none",this.uiScene.uiTarget.getChildByID("target-container").innerHTML=""),this.eventsManager.emit("reldens.gameEngineClearTarget",this,t)}setupTabTarget(e){e.keyTab=e.input.keyboard.addKey(a.Keyboard.KeyCodes.TAB),e.input.keyboard.addCapture(a.Keyboard.KeyCodes.TAB),e.input.keyboard.on("keydown",e=>{9===e.keyCode&&this.tabTarget()})}tabTarget(){let e=this.uiScene.gameManager.getCurrentPlayer(),t=this.uiScene.gameManager.getActiveScene().objectsAnimations,i=e.players,r=!1,n="",s=!!e.currentTarget&&Object.assign({},e.currentTarget);for(let i of Object.keys(t)){if(!t[i].targetName)continue;let s=Math.hypot(t[i].x-e.state.x,t[i].y-e.state.y);e.currentTarget.id!==t[i].key&&(!r||r.dist>s)&&(r={id:t[i].key,type:c.TYPE_OBJECT,dist:s},n=t[i].targetName)}for(let t of Object.keys(i)){if(e.playerName===i[t].playerName)continue;let s=Math.hypot(i[t].x-e.state.x,i[t].y-e.state.y);e.currentTarget.id!==i[t].id&&(!r||r.dist>s)&&(r={id:t,type:h.TYPE_PLAYER,dist:s},n=i[t].playerName)}e.currentTarget=r,this.showTarget(n,r,s),this.eventsManager.emit("reldens.gameEngineTabTarget",this,r,s)}showFPS(){this.fpsCounter=new o(this.uiScene.gameManager.gameDom),this.fpsCounter.start()}}},{ba5852f7a848a882:"cImTQ",de87093dc78fab7a:"blAEg",cb52d956827ba0f7:"eNDyX",ef9f208014f49bfb:"z0nmL","74f28c3d4fc67c29":"6mDqg","2aadc4f845e0da5b":"ijd9L"}],cImTQ:[function(e,t,i,r){t.exports=function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e,t){return null!=e&&"object"==typeof e&&t in e}var s=RegExp.prototype.test,a=/\S/,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},h=/\s*/,c=/\s+/,l=/\s*=/,d=/\s*\}/,u=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},f.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case -1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var t=this.cache;if(t.hasOwnProperty(e))a=t[e];else{for(var r,s,a,o,h,c,l=this,d=!1;l;){if(e.indexOf(".")>0)for(o=l.view,h=e.split("."),c=0;null!=o&&c<h.length;)c===h.length-1&&(d=n(o,h[c])||(r=o,s=h[c],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(s))),o=o[h[c++]];else o=l.view[e],d=n(l.view,e);if(d){a=o;break}l=l.parent}t[e]=a}return i(a)&&(a=a.call(this.view)),a},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(e,i){var n=this.templateCache,o=e+":"+(i||m.tags).join(":"),p=void 0!==n,g=p?n.get(o):void 0;return void 0==g&&(g=function(e,i){if(!e)return[];var n,o,p,g,v,y,b,x,E,T=!1,A=[],w=[],S=[],C=!1,I=!1,_="",O=0;function P(){if(C&&!I)for(;S.length;)delete w[S.pop()];else S=[];C=!1,I=!1}function M(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw Error("Invalid tags: "+e);n=RegExp(r(e[0])+"\\s*"),o=RegExp("\\s*"+r(e[1])),p=RegExp("\\s*"+r("}"+e[1]))}M(i||m.tags);for(var R=new f(e);!R.eos();){if(g=R.pos,y=R.scanUntil(n))for(var L=0,D=y.length;L<D;++L)!function(e){return!s.call(a,e)}(b=y.charAt(L))?(I=!0,T=!0,_+=" "):(S.push(w.length),_+=b),w.push(["text",b,g,g+1]),g+=1,"\n"===b&&(P(),_="",O=0,T=!1);if(!R.scan(n))break;if(C=!0,v=R.scan(u)||"name",R.scan(h),"="===v?(y=R.scanUntil(l),R.scan(l),R.scanUntil(o)):"{"===v?(y=R.scanUntil(p),R.scan(d),R.scanUntil(o),v="&"):y=R.scanUntil(o),!R.scan(o))throw Error("Unclosed tag at "+R.pos);if(x=">"==v?[v,y,g,R.pos,_,O,T]:[v,y,g,R.pos],O++,w.push(x),"#"===v||"^"===v)A.push(x);else if("/"===v){if(!(E=A.pop()))throw Error('Unopened section "'+y+'" at '+g);if(E[1]!==y)throw Error('Unclosed section "'+E[1]+'" at '+g)}else"name"===v||"{"===v||"&"===v?I=!0:"="===v&&M(y)}if(P(),E=A.pop())throw Error('Unclosed section "'+E[1]+'" at '+R.pos);return function(e){for(var t,i=[],r=i,n=[],s=0,a=e.length;s<a;++s)switch((t=e[s])[0]){case"#":case"^":r.push(t),n.push(t),r=t[4]=[];break;case"/":n.pop()[5]=t[2],r=n.length>0?n[n.length-1][4]:i;break;default:r.push(t)}return i}(function(e){for(var t,i,r=[],n=0,s=e.length;n<s;++n)(t=e[n])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(r.push(t),i=t));return r}(w))}(e,i),p&&n.set(o,g)),g},g.prototype.render=function(e,t,i,r){var n=this.getConfigTags(r),s=this.parse(e,n),a=t instanceof p?t:new p(t,void 0);return this.renderTokens(s,a,i,e,r)},g.prototype.renderTokens=function(e,t,i,r,n){for(var s,a,o,h="",c=0,l=e.length;c<l;++c)o=void 0,"#"===(a=(s=e[c])[0])?o=this.renderSection(s,t,i,r,n):"^"===a?o=this.renderInverted(s,t,i,r,n):">"===a?o=this.renderPartial(s,t,i,n):"&"===a?o=this.unescapedValue(s,t):"name"===a?o=this.escapedValue(s,t,n):"text"===a&&(o=this.rawValue(s)),void 0!==o&&(h+=o);return h},g.prototype.renderSection=function(e,r,n,s,a){var o=this,h="",c=r.lookup(e[1]);if(c){if(t(c))for(var l=0,d=c.length;l<d;++l)h+=this.renderTokens(e[4],r.push(c[l]),n,s,a);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)h+=this.renderTokens(e[4],r.push(c),n,s,a);else if(i(c)){if("string"!=typeof s)throw Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,s.slice(e[3],e[5]),function(e){return o.render(e,r,n,a)}))&&(h+=c)}else h+=this.renderTokens(e[4],r,n,s,a);return h}},g.prototype.renderInverted=function(e,i,r,n,s){var a=i.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],i,r,n,s)},g.prototype.indentPartial=function(e,t,i){for(var r=t.replace(/[^ \t]/g,""),n=e.split("\n"),s=0;s<n.length;s++)n[s].length&&(s>0||!i)&&(n[s]=r+n[s]);return n.join("\n")},g.prototype.renderPartial=function(e,t,r,n){if(r){var s=this.getConfigTags(n),a=i(r)?r(e[1]):r[e[1]];if(null!=a){var o=e[6],h=e[5],c=e[4],l=a;0==h&&c&&(l=this.indentPartial(a,c,o));var d=this.parse(l,s);return this.renderTokens(d,t,r,l,n)}}},g.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},g.prototype.escapedValue=function(e,t,i){var r=this.getConfigEscape(i)||m.escape,n=t.lookup(e[1]);if(null!=n)return"number"==typeof n&&r===m.escape?String(n):r(n)},g.prototype.rawValue=function(e){return e[1]},g.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},g.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(cache){v.templateCache=cache},get templateCache(){return v.templateCache}},v=new g;return m.clearCache=function(){return v.clearCache()},m.parse=function(e,t){return v.parse(e,t)},m.render=function(e,i,r,n){if("string"!=typeof e)throw TypeError('Invalid template! Template should be a "string" but "'+(t(e)?"array":typeof e)+'" was given as the first argument for mustache#render(template, view, partials)');return v.render(e,i,r,n)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return o[e]})},m.Scanner=f,m.Context=p,m.Writer=g,m}()},{}],blAEg:[function(e,t,i,r){var n=e("57a99fe9b8471a10");t.exports=(()=>{var e={50792:e=>{var t=Object.prototype.hasOwnProperty,i="~";function r(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new n(r,s||e,a),h=i?i+t:t;return e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],o]:e._events[h].push(o):(e._events[h]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1)),o.prototype.eventNames=function(){var e,r,n=[];if(0===this._eventsCount)return n;for(r in e=this._events)t.call(e,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,a=Array(s);n<s;n++)a[n]=r[n].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,n,s,a){var o=i?i+e:e;if(!this._events[o])return!1;var h,c,l=this._events[o],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,a),!0}for(c=1,h=Array(d-1);c<d;c++)h[c-1]=arguments[c];l.fn.apply(l.context,h)}else{var u,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,n);break;default:if(!h)for(u=1,h=Array(d-1);u<d;u++)h[u-1]=arguments[u];l[c].fn.apply(l[c].context,h)}}return!0},o.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||a(this,s);else{for(var h=0,c=[],l=o.length;h<l;h++)(o[h].fn!==t||n&&!o[h].once||r&&o[h].context!==r)&&c.push(o[h]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o},11517:(e,t,i)=>{var r=i(38829);e.exports=function(e,t,i,n){for(var s=e[0],a=1;a<e.length;a++){var o=e[a];r(o,s,t,i,n),s=o}return e}},80318:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"angle",t,i,n,s)}},60757:e=>{e.exports=function(e,t,i){for(var r=0;r<e.length;r++){var n=e[r];t.call(i,n)}return e}},69927:e=>{e.exports=function(e,t,i){void 0===i&&(i=0);for(var r=i;r<e.length;r++){var n=e[r],s=!0;for(var a in t)n[a]!==t[a]&&(s=!1);if(s)return n}return null}},32265:e=>{e.exports=function(e,t,i){void 0===i&&(i=0);for(var r=e.length-1;r>=i;r--){var n=e[r],s=!0;for(var a in t)n[a]!==t[a]&&(s=!1);if(s)return n}return null}},94420:(e,t,i)=>{var r=i(11879),n=i(60461),s=i(95540),a=i(29747),o=new(i(41481))({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1).setOrigin(0,0);e.exports=function(e,t){void 0===t&&(t={});var i=t.hasOwnProperty("width"),a=t.hasOwnProperty("height"),h=s(t,"width",-1),c=s(t,"height",-1),l=s(t,"cellWidth",1),d=s(t,"cellHeight",l),u=s(t,"position",n.TOP_LEFT),f=s(t,"x",0),p=s(t,"y",0),g=0,m=0,v=h*l,y=c*d;o.setPosition(f,p),o.setSize(l,d);for(var b=0;b<e.length;b++)if(r(e[b],o,u),i&&-1===h)o.x+=l;else if(a&&-1===c)o.y+=d;else if(a&&!i){if(m+=d,o.y+=d,m===y&&(m=0,g+=l,o.y=p,o.x+=l,g===v))break}else if(g+=l,o.x+=l,g===v&&(g=0,m+=d,o.x=f,o.y+=d,m===y))break;return e}},41721:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"alpha",t,i,n,s)}},67285:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"x",t,i,n,s)}},9074:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"x",t,n,a,o),r(e,"y",i,s,a,o)}},75222:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"y",t,i,n,s)}},22983:e=>{e.exports=function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/e.length,a=t.x,o=t.y,h=t.radius,c=0;c<e.length;c++)e[c].x=a+h*Math.cos(n),e[c].y=o+h*Math.sin(n),n+=s;return e}},95253:e=>{e.exports=function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=6.28);for(var n=i,s=(r-i)/e.length,a=t.width/2,o=t.height/2,h=0;h<e.length;h++)e[h].x=t.x+a*Math.cos(n),e[h].y=t.y+o*Math.sin(n),n+=s;return e}},88505:(e,t,i)=>{var r=i(15258),n=i(26708);e.exports=function(e,t,i){var s;s=i?n(t,i,e.length):r(t,e.length);for(var a=0;a<e.length;a++){var o=e[a],h=s[a];o.x=h.x,o.y=h.y}return e}},41346:(e,t,i)=>{var r=i(14649),n=i(86003),s=i(49498);e.exports=function(e,t,i){void 0===i&&(i=0);var a=r(t,!1,e.length);i>0?n(a,i):i<0&&s(a,Math.abs(i));for(var o=0;o<e.length;o++)e[o].x=a[o].x,e[o].y=a[o].y;return e}},11575:(e,t,i)=>{var r=i(84993);e.exports=function(e,t,i){var n=r({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},i),s=r({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},i),a=r({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},i);n.pop(),s.pop(),a.pop();for(var o=(n=n.concat(s,a)).length/e.length,h=0,c=0;c<e.length;c++){var l=e[c],d=n[Math.floor(h)];l.x=d.x,l.y=d.y,h+=o}return e}},29953:e=>{e.exports=function(e,t,i){for(var r=0;r<e.length;r++){var n=e[r];n.anims&&n.anims.play(t,i)}return e}},66979:e=>{e.exports=function(e,t,i,r,n,s){void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a,o=0,h=e.length;if(1===s)for(a=n;a<h;a++)e[a][t]+=i+o*r,o++;else for(a=n;a>=0;a--)e[a][t]+=i+o*r,o++;return e}},43967:e=>{e.exports=function(e,t,i,r,n,s){void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=1);var a,o=0,h=e.length;if(1===s)for(a=n;a<h;a++)e[a][t]=i+o*r,o++;else for(a=n;a>=0;a--)e[a][t]=i+o*r,o++;return e}},88926:(e,t,i)=>{var r=i(28176);e.exports=function(e,t){for(var i=0;i<e.length;i++)r(t,e[i]);return e}},33286:(e,t,i)=>{var r=i(24820);e.exports=function(e,t){for(var i=0;i<e.length;i++)r(t,e[i]);return e}},96e3:(e,t,i)=>{var r=i(65822);e.exports=function(e,t){for(var i=0;i<e.length;i++)r(t,e[i]);return e}},28789:(e,t,i)=>{var r=i(26597);e.exports=function(e,t){for(var i=0;i<e.length;i++)r(t,e[i]);return e}},97154:(e,t,i)=>{var r=i(90260);e.exports=function(e,t){for(var i=0;i<e.length;i++)r(t,e[i]);return e}},20510:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"rotation",t,i,n,s)}},91051:(e,t,i)=>{var r=i(1163),n=i(20339);e.exports=function(e,t,i){for(var s=t.x,a=t.y,o=0;o<e.length;o++){var h=e[o];r(h,s,a,i,Math.max(1,n(h.x,h.y,s,a)))}return e}},76332:(e,t,i)=>{var r=i(1163);e.exports=function(e,t,i,n){var s=t.x,a=t.y;if(0===n)return e;for(var o=0;o<e.length;o++)r(e[o],s,a,i,n);return e}},61619:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"scaleX",t,i,n,s)}},94868:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"scaleX",t,n,a,o),r(e,"scaleY",i,s,a,o)}},95532:(e,t,i)=>{var r=i(66979);e.exports=function(e,t,i,n,s){return r(e,"scaleY",t,i,n,s)}},8689:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"alpha",t,i,n,s)}},2645:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n){return r(e,"blendMode",t,0,i,n)}},32372:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"depth",t,i,n,s)}},85373:e=>{e.exports=function(e,t,i){for(var r=0;r<e.length;r++)e[r].setInteractive(t,i);return e}},81583:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"originX",t,n,a,o),r(e,"originY",i,s,a,o),e.forEach(function(e){e.updateDisplayOrigin()}),e}},79939:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"rotation",t,i,n,s)}},2699:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"scaleX",t,n,a,o),r(e,"scaleY",i,s,a,o)}},98739:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"scaleX",t,i,n,s)}},98476:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"scaleY",t,i,n,s)}},6207:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"scrollFactorX",t,n,a,o),r(e,"scrollFactorY",i,s,a,o)}},6607:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"scrollFactorX",t,i,n,s)}},72248:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"scrollFactorY",t,i,n,s)}},14036:e=>{e.exports=function(e,t,i,r,n){for(var s=0;s<e.length;s++)e[s].setTint(t,i,r,n);return e}},50159:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n){return r(e,"visible",t,0,i,n)}},77597:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"x",t,i,n,s)}},83194:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s,a,o){return null==i&&(i=t),r(e,"x",t,n,a,o),r(e,"y",i,s,a,o)}},67678:(e,t,i)=>{var r=i(43967);e.exports=function(e,t,i,n,s){return r(e,"y",t,i,n,s)}},35850:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=new r);var a,o,h=e.length;if(1===h)a=e[0].x,o=e[0].y,e[0].x=t,e[0].y=i;else{var c=1,l=0;0===n&&(l=h-1,c=h-2),a=e[l].x,o=e[l].y,e[l].x=t,e[l].y=i;for(var d=0;d<h;d++)if(!(c>=h)&&-1!==c){var u=e[c],f=u.x,p=u.y;u.x=a,u.y=o,a=f,o=p,0===n?c--:c++}}return s.x=a,s.y=o,s}},8628:(e,t,i)=>{var r=i(33680);e.exports=function(e){return r(e)}},21837:(e,t,i)=>{var r=i(7602);e.exports=function(e,t,i,n,s){void 0===s&&(s=!1);var a,o=Math.abs(n-i)/e.length;if(s)for(a=0;a<e.length;a++)e[a][t]+=r(a*o,i,n);else for(a=0;a<e.length;a++)e[a][t]=r(a*o,i,n);return e}},21910:(e,t,i)=>{var r=i(54261);e.exports=function(e,t,i,n,s){void 0===s&&(s=!1);var a,o=Math.abs(n-i)/e.length;if(s)for(a=0;a<e.length;a++)e[a][t]+=r(a*o,i,n);else for(a=0;a<e.length;a++)e[a][t]=r(a*o,i,n);return e}},62054:e=>{e.exports=function(e,t,i,r,n){if(void 0===n&&(n=!1),0===e.length)return e;if(1===e.length)return n?e[0][t]+=(r+i)/2:e[0][t]=(r+i)/2,e;var s,a=Math.abs(r-i)/(e.length-1);if(n)for(s=0;s<e.length;s++)e[s][t]+=s*a+i;else for(s=0;s<e.length;s++)e[s][t]=s*a+i;return e}},79815:e=>{e.exports=function(e){for(var t=0;t<e.length;t++)e[t].visible=!e[t].visible;return e}},39665:(e,t,i)=>{var r=i(15994);e.exports=function(e,t,i){void 0===i&&(i=0);for(var n=0;n<e.length;n++){var s=e[n];s.x=r(s.x,t.left-i,t.right+i),s.y=r(s.y,t.top-i,t.bottom+i)}return e}},61061:(e,t,i)=>{e.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(74943),a=i(81957),o=i(41138),h=i(35154),c=i(90126);e.exports=new n({initialize:function(e,t,i){this.manager=e,this.key=t,this.type="frame",this.frames=this.getFrames(e.textureManager,h(i,"frames",[]),h(i,"defaultTextureKey",null),h(i,"sortFrames",!0)),this.frameRate=h(i,"frameRate",null),this.duration=h(i,"duration",null),this.msPerFrame,this.skipMissedFrames=h(i,"skipMissedFrames",!0),this.delay=h(i,"delay",0),this.repeat=h(i,"repeat",0),this.repeatDelay=h(i,"repeatDelay",0),this.yoyo=h(i,"yoyo",!1),this.showBeforeDelay=h(i,"showBeforeDelay",!1),this.showOnStart=h(i,"showOnStart",!1),this.hideOnComplete=h(i,"hideOnComplete",!1),this.randomFrame=h(i,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,t,i,r){null===i&&null===r?(e.frameRate=24,e.duration=24/t*1e3):i&&null===r?(e.duration=i,e.frameRate=t/(i/1e3)):(e.frameRate=r,e.duration=t/r*1e3),e.msPerFrame=1e3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var i=this.getFrames(this.manager.textureManager,t);if(i.length>0){if(0===e)this.frames=i.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(i);else{var r=this.frames.slice(0,e),n=this.frames.slice(e);this.frames=r.concat(i,n)}this.updateFrameSequence()}return this},checkFrame:function(e){return e>=0&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0,e.nextTick=e.frameRate===e.currentAnim.frameRate&&e.currentFrame.duration||e.msPerFrame},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,t,i,r){void 0===r&&(r=!0);var n,s,a,l,d=[],u=1;if("string"==typeof t){if(l=t,!e.exists(l))return console.warn('Texture "%s" not found',l),d;var f=e.get(l).getFrameNames();r&&c(f),t=[],f.forEach(function(e){t.push({key:l,frame:e})})}if(!Array.isArray(t)||0===t.length)return d;for(a=0;a<t.length;a++){var p=t[a],g=h(p,"key",i);if(g){var m=h(p,"frame",0),v=e.getFrame(g,m);if(!v){console.warn('Texture "%s" not found',g);continue}(s=new o(g,m,u,v)).duration=h(p,"duration",0),s.isFirst=!n,n&&(n.nextFrame=s,s.prevFrame=n),d.push(s),n=s,u++}}if(d.length>0){s.isLast=!0,s.nextFrame=d[0],d[0].prevFrame=s;var y=1/(d.length-1);for(a=0;a<d.length;a++)d[a].progress=a*y}return d},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.frameRate===e.currentAnim.frameRate&&e.currentFrame.duration||e.msPerFrame},getFrameByProgress:function(e){return a(e=r(e,0,1),this.frames,"progress")},nextFrame:function(e){var t=e.currentFrame;t.isLast?e.yoyo?this.handleYoyoFrame(e,!1):e.repeatCounter>0?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,t.nextFrame)},handleYoyoFrame:function(e,t){if(t||(t=!1),!t===e.inReverse&&e.repeatCounter>0){(0===e.repeatDelay||e.pendingRepeat)&&(e.forward=t),this.repeatAnimation(e);return}if(e.inReverse!==t&&0===e.repeatCounter)return void e.complete();e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e.yoyo?this.handleYoyoFrame(e,!0):e.repeatCounter>0?(e.inReverse&&!e.forward||(e.forward=!0),this.repeatAnimation(e)):e.complete():this.updateAndGetNextTick(e,t.prevFrame)},updateAndGetNextTick:function(e,t){e.setCurrentFrame(t),this.getNextTick(e)},removeFrame:function(e){var t=this.frames.indexOf(e);return -1!==t&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){if(2===e._pendingStop)if(0===e._pendingStopValue)return e.stop();else e._pendingStopValue--;e.repeatDelay>0&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.forward?e.setCurrentFrame(e.currentFrame.nextFrame):e.setCurrentFrame(e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e,t=this.frames.length,i=1/(t-1),r=0;r<t;r++)(e=this.frames[r]).index=r+1,e.isFirst=!1,e.isLast=!1,e.progress=r*i,0===r?(e.isFirst=!0,1===t?(e.isLast=!0,e.nextFrame=e,e.prevFrame=e):(e.isLast=!1,e.prevFrame=this.frames[t-1],e.nextFrame=this.frames[r+1])):r===t-1&&t>1?(e.isLast=!0,e.prevFrame=this.frames[t-2],e.nextFrame=this.frames[0]):t>1&&(e.prevFrame=this.frames[r-1],e.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[],this.manager=null}})},41138:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r,n){void 0===n&&(n=!1),this.textureKey=e,this.textureFrame=t,this.index=i,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}})},60848:(e,t,i)=>{var r=i(42099),n=i(83419),s=i(90330),a=i(50792),o=i(74943),h=i(8443),c=i(95540),l=i(35154),d=i(36383),u=i(20283),f=i(41836);e.exports=new n({Extends:a,initialize:function(e){a.call(this),this.game=e,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",e.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(e,t,i){var r=this.anims,n=this.mixes,s="string"==typeof e?e:e.key,a="string"==typeof t?t:t.key;if(r.has(s)&&r.has(a)){var o=n.get(s);o||(o={}),o[a]=i,n.set(s,o)}return this},removeMix:function(e,t){var i=this.mixes,r="string"==typeof e?e:e.key,n=i.get(r);if(n)if(t){var s="string"==typeof t?t:t.key;n.hasOwnProperty(s)&&delete n[s]}else t||i.delete(r);return this},getMix:function(e,t){var i=this.mixes,r="string"==typeof e?e:e.key,n="string"==typeof t?t:t.key,s=i.get(r);return s&&s.hasOwnProperty(n)?s[n]:0},add:function(e,t){return this.anims.has(e)?console.warn("Animation key exists: "+e):(t.key=e,this.anims.set(e,t),this.emit(o.ADD_ANIMATION,e,t)),this},exists:function(e){return this.anims.has(e)},createFromAseprite:function(e,t,i){var r=[],n=this.game.cache.json.get(e);if(!n)return console.warn("No Aseprite data found for: "+e),r;var s=this,a=l(n,"meta",null),o=l(n,"frames",null);return a&&o&&l(a,"frameTags",[]).forEach(function(n){var a=[],h=c(n,"name",null),l=c(n,"from",0),u=c(n,"to",0),f=c(n,"direction","forward");if(h&&(!t||t&&t.indexOf(h)>-1)){for(var p,g=0,m=l;m<=u;m++){var v=m.toString(),y=o[v];if(y){var b=c(y,"duration",d.MAX_SAFE_INTEGER);a.push({key:e,frame:v,duration:b}),g+=b}}"reverse"===f&&(a=a.reverse());var x={key:h,frames:a,duration:g,yoyo:"pingpong"===f};i?i.anims&&(p=i.anims.create(x)):p=s.create(x),p&&r.push(p)}}),r},create:function(e){var t=e.key,i=!1;return t&&((i=this.get(t))?console.warn("AnimationManager key already exists: "+t):(i=new r(this,t,e),this.anims.set(t,i),this.emit(o.ADD_ANIMATION,t,i))),i},fromJSON:function(e,t){void 0===t&&(t=!1),t&&this.anims.clear(),"string"==typeof e&&(e=JSON.parse(e));var i=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var r=0;r<e.anims.length;r++)i.push(this.create(e.anims[r]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&"frame"===e.type&&i.push(this.create(e));return i},generateFrameNames:function(e,t){var i,r=l(t,"prefix",""),n=l(t,"start",0),s=l(t,"end",0),a=l(t,"suffix",""),o=l(t,"zeroPad",0),h=l(t,"outputArray",[]),c=l(t,"frames",!1);if(!this.textureManager.exists(e))return console.warn('Texture "%s" not found',e),h;var d=this.textureManager.get(e);if(!d)return h;if(t)for(c||(c=u(n,s)),i=0;i<c.length;i++){var p=r+f(c[i],o,"0",1)+a;d.has(p)?h.push({key:e,frame:p}):console.warn('Frame "%s" not found in texture "%s"',p,e)}else for(i=0,c=d.getFrameNames();i<c.length;i++)h.push({key:e,frame:c[i]});return h},generateFrameNumbers:function(e,t){var i=l(t,"start",0),r=l(t,"end",-1),n=l(t,"first",!1),s=l(t,"outputArray",[]),a=l(t,"frames",!1);if(!this.textureManager.exists(e))return console.warn('Texture "%s" not found',e),s;var o=this.textureManager.get(e);if(!o)return s;n&&o.has(n)&&s.push({key:e,frame:n}),a||(-1===r&&(r=o.frameTotal-2),a=u(i,r));for(var h=0;h<a.length;h++){var c=a[h];o.has(c)?s.push({key:e,frame:c}):console.warn('Frame "%s" not found in texture "%s"',c,e)}return s},get:function(e){return this.anims.get(e)},getAnimsFromTexture:function(e){for(var t=this.textureManager.get(e).key,i=this.anims.getArray(),r=[],n=0;n<i.length;n++)for(var s=i[n],a=s.frames,o=0;o<a.length;o++)if(a[o].textureKey===t){r.push(s.key);break}return r},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)t[i].anims.play(e);return this},staggerPlay:function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=!0),Array.isArray(t)||(t=[t]);var n=t.length;!r&&n--;for(var s=0;s<t.length;s++){var a=i<0?Math.abs(i)*(n-s):i*s;t[s].anims.playAfterDelay(e,a)}return this},remove:function(e){var t=this.get(e);return t&&(this.emit(o.REMOVE_ANIMATION,e,t),this.anims.delete(e),this.removeMix(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(e){var t={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==e&&""!==e?t.anims.push(this.anims.get(e).toJSON()):this.anims.each(function(e,i){t.anims.push(i.toJSON())}),t},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}})},9674:(e,t,i)=>{var r=i(42099),n=i(30976),s=i(83419),a=i(90330),o=i(74943),h=i(95540);e.exports=new s({initialize:function(e){this.parent=e,this.animationManager=e.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(e){var t=this.parent;if(void 0===e)return this.nextAnimsQueue.length=0,this.nextAnim=null,t;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];this.nextAnim?this.nextAnimsQueue.push(r):this.nextAnim=r}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(e){this.isPlaying&&this.stop();var t=this.animationManager,i="string"==typeof e?e:h(e,"key",null),r=this.exists(i)?this.get(i):t.get(i);if(r){this.currentAnim=r;var s=r.getTotalFrames(),a=h(e,"frameRate",r.frameRate),o=h(e,"duration",r.duration);r.calculateDuration(this,s,o,a),this.delay=h(e,"delay",r.delay),this.repeat=h(e,"repeat",r.repeat),this.repeatDelay=h(e,"repeatDelay",r.repeatDelay),this.yoyo=h(e,"yoyo",r.yoyo),this.showBeforeDelay=h(e,"showBeforeDelay",r.showBeforeDelay),this.showOnStart=h(e,"showOnStart",r.showOnStart),this.hideOnComplete=h(e,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=h(e,"skipMissedFrames",r.skipMissedFrames),this.randomFrame=h(e,"randomFrame",r.randomFrame),this.timeScale=h(e,"timeScale",this.timeScale);var c=h(e,"startFrame",0);c>s&&(c=0),this.randomFrame&&(c=n(0,s-1));var l=r.frames[c];0!==c||this.forward||(l=r.getLastFrame()),this.currentFrame=l}else console.warn("Missing animation: "+i);return this.parent},pause:function(e){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==e&&this.setCurrentFrame(e),this.parent},resume:function(e){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==e&&this.setCurrentFrame(e),this.parent},playAfterDelay:function(e,t){if(this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),this.nextAnim=e,this._pendingStop=1,this._pendingStopValue=t}else this.delayCounter=t,this.play(e,!0);return this.parent},playAfterRepeat:function(e,t){if(void 0===t&&(t=1),this.isPlaying){var i=this.nextAnim,r=this.nextAnimsQueue;i&&r.unshift(i),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this.nextAnim=e,this._pendingStop=2,this._pendingStopValue=t}else this.play(e);return this.parent},play:function(e,t){void 0===t&&(t=!1);var i=this.currentAnim,r=this.parent,n="string"==typeof e?e:e.key;if(t&&this.isPlaying&&i.key===n)return r;if(i&&this.isPlaying){var s=this.animationManager.getMix(i.key,e);if(s>0)return this.playAfterDelay(e,s)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e)},playReverse:function(e,t){void 0===t&&(t=!1);var i="string"==typeof e?e:e.key;return t&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(e))},startAnimation:function(e){this.load(e);var t=this.currentAnim,i=this.parent;return t&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,t.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(e,t){var i=this.currentAnim;if(i){var r=this.currentFrame,n=this.parent,s=r.textureFrame;n.emit(e,i,r,n,s),t&&n.emit(t+i.key,i,r,n,s)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var e=this.currentFrame;if(!e)return 0;var t=e.progress;return this.inReverse&&(t*=-1),t},setProgress:function(e){return this.forward||(e=1-e),this.setCurrentFrame(this.currentAnim.getFrameByProgress(e)),this.parent},setRepeat:function(e){return this.repeatCounter=-1===e?Number.MAX_VALUE:e,this.parent},globalRemove:function(e,t){void 0===t&&(t=this.currentAnim),this.isPlaying&&t.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=this.currentAnim,r=this.parent;return i?(t&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!e,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(e)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var e=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(e)}return this.parent},stopAfterDelay:function(e){return this._pendingStop=1,this._pendingStopValue=e,this.parent},stopAfterRepeat:function(e){return void 0===e&&(e=1),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=e,this.parent},stopOnFrame:function(e){return this._pendingStop=3,this._pendingStopValue=e,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(e,t){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=t*this.timeScale*this.animationManager.globalTimeScale,1===this._pendingStop&&(this._pendingStopValue-=t,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do this.forward?i.nextFrame(this):i.previousFrame(this),r++;while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(e){var t=this.parent;return this.currentFrame=e,t.texture=e.frame.texture,t.frame=e.frame,t.isCropped&&t.frame.updateCropUVs(t._crop,t.flipX,t.flipY),e.setAlpha&&(t.alpha=e.alpha),t.setSizeToFrame(),t._originComponent&&(e.frame.customPivot?t.setOrigin(e.frame.pivotX,e.frame.pivotY):t.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===e&&this.stop()),t},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(e){return this.anims?this.anims.get(e):null},exists:function(e){return!!this.anims&&this.anims.has(e)},create:function(e){var t=e.key,i=!1;return t&&((i=this.get(t))?console.warn("Animation key already exists: "+t):(i=new r(this,t,e),this.anims||(this.anims=new a),this.anims.set(t,i))),i},createFromAseprite:function(e,t){return this.animationManager.createFromAseprite(e,t,this.parent)},generateFrameNames:function(e,t){return this.animationManager.generateFrameNames(e,t)},generateFrameNumbers:function(e,t){return this.animationManager.generateFrameNumbers(e,t)},remove:function(e){var t=this.get(e);return t&&(this.currentAnim===t&&this.stop(),this.anims.delete(e)),t},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}})},57090:e=>{e.exports="add"},25312:e=>{e.exports="animationcomplete"},89580:e=>{e.exports="animationcomplete-"},52860:e=>{e.exports="animationrepeat"},63850:e=>{e.exports="animationrestart"},99085:e=>{e.exports="animationstart"},28087:e=>{e.exports="animationstop"},1794:e=>{e.exports="animationupdate"},52562:e=>{e.exports="pauseall"},57953:e=>{e.exports="remove"},68339:e=>{e.exports="resumeall"},74943:(e,t,i)=>{e.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(e,t,i)=>{e.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(e,t,i)=>{var r=i(83419),n=i(90330),s=i(50792),a=i(24736);e.exports=new r({initialize:function(){this.entries=new n,this.events=new s},add:function(e,t){return this.entries.set(e,t),this.events.emit(a.ADD,this,e,t),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit(a.REMOVE,this,e,t.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}})},24047:(e,t,i)=>{var r=i(2161),n=i(83419),s=i(8443);e.exports=new n({initialize:function(e){this.game=e,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new r),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<e.length;t++)this[e[t]].destroy(),this[e[t]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}})},51464:e=>{e.exports="add"},59261:e=>{e.exports="remove"},24736:(e,t,i)=>{e.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(e,t,i)=>{e.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(39506),a=i(50792),o=i(19715),h=i(87841),c=i(61340),l=i(80333),d=i(26099);e.exports=new r({Extends:a,Mixins:[n.AlphaSingle,n.Visible],initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=e,this._y=t,this._width=i,this._height=r,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=l("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(i/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(e){this.renderList.push(e)},setOrigin:function(e,t){return void 0===e&&(e=.5),void 0===t&&(t=e),this.originX=e,this.originY=t,this},getScroll:function(e,t,i){void 0===i&&(i=new d);var r=.5*this.width,n=.5*this.height;return i.x=e-r,i.y=t-n,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(e){var t=.5*this.width;return this.midPoint.x=e,this.scrollX=e-t,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(e){var t=.5*this.height;return this.midPoint.y=e,this.scrollY=e-t,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(e,t){return this.centerOnX(e),this.centerOnY(t),this},centerToBounds:function(){if(this.useBounds){var e=this._bounds,t=.5*this.width,i=.5*this.height;this.midPoint.set(e.centerX,e.centerY),this.scrollX=e.centerX-t,this.scrollY=e.centerY-i}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(e){if(this.disableCull)return e;var t=this.matrix.matrix,i=t[0],r=t[1],n=t[2],s=t[3],a=i*s-r*n;if(!a)return e;var o=t[4],h=t[5],c=this.scrollX,l=this.scrollY,d=this.width,u=this.height,f=this.y,p=f+u,g=this.x,m=g+d,v=this.culledObjects,y=e.length;a=1/a,v.length=0;for(var b=0;b<y;++b){var x=e[b];if(!x.hasOwnProperty("width")||x.parentContainer){v.push(x);continue}var E=x.width,T=x.height,A=x.x-c*x.scrollFactorX-E*x.originX,w=x.y-l*x.scrollFactorY-T*x.originY,S=A*i+w*n+o,C=A*r+w*s+h,I=(A+E)*i+(w+T)*n+o,_=(A+E)*r+(w+T)*s+h;I>g&&S<m&&_>f&&C<p&&v.push(x)}return v},getWorldPoint:function(e,t,i){void 0===i&&(i=new d);var r=this.matrix.matrix,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],c=r[5],l=n*o-s*a;if(!l)return i.x=e,i.y=t,i;var u=o*(l=1/l),f=-s*l,p=-a*l,g=n*l,m=(a*c-o*h)*l,v=(s*h-n*c)*l,y=Math.cos(this.rotation),b=Math.sin(this.rotation),x=this.zoomX,E=this.zoomY,T=this.scrollX,A=this.scrollY,w=e+(T*y-A*b)*x,S=t+(T*b+A*y)*E;return i.x=w*u+S*p+m,i.y=w*f+S*g+v,i},ignore:function(e){var t=this.id;Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=t}return this},clampX:function(e){var t=this._bounds,i=this.displayWidth,r=t.x+(i-this.width)/2,n=Math.max(r,r+t.width-i);return e<r?e=r:e>n&&(e=n),e},clampY:function(e){var t=this._bounds,i=this.displayHeight,r=t.y+(i-this.height)/2,n=Math.max(r,r+t.height-i);return e<r?e=r:e>n&&(e=n),e},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(e){return void 0===e&&(e=0),this.rotation=s(e),this},setBackgroundColor:function(e){return void 0===e&&(e="rgba(0,0,0,0)"),this.backgroundColor=l(e),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(e,t,i,r,n){return void 0===n&&(n=!1),this._bounds.setTo(e,t,i,r),this.dirty=!0,this.useBounds=!0,n?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(e){void 0===e&&(e=new h);var t=this._bounds;return e.setTo(t.x,t.y,t.width,t.height),e},setName:function(e){return void 0===e&&(e=""),this.name=e,this},setPosition:function(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this},setRotation:function(e){return void 0===e&&(e=0),this.rotation=e,this},setRoundPixels:function(e){return this.roundPixels=e,this},setScene:function(e,t){void 0===t&&(t=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=e,this.isSceneCamera=t;var i=e.sys;return this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras,this.updateSystem(),this},setScroll:function(e,t){return void 0===t&&(t=e),this.scrollX=e,this.scrollY=t,this},setSize:function(e,t){return void 0===t&&(t=e),this.width=e,this.height=t,this},setViewport:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setZoom:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=e),0===e&&(e=.001),0===t&&(t=.001),this.zoomX=e,this.zoomY=t,this},setMask:function(e,t){return void 0===t&&(t=!0),this.mask=e,this._maskCamera=t?this.cameraManager.default:this,this},clearMask:function(e){return void 0===e&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(e.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),e},update:function(){},setIsSceneCamera:function(e){return this.isSceneCamera=e,this},updateSystem:function(){if(this.scaleManager&&this.isSceneCamera){var e=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,t=this.sceneManager;e&&!this._customViewport?t.customViewports++:!e&&this._customViewport&&t.customViewports--,this.dirty=!0,this._customViewport=e}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(e){this._x=e,this.updateSystem()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.updateSystem()}},width:{get:function(){return this._width},set:function(e){this._width=e,this.updateSystem()}},height:{get:function(){return this._height},set:function(e){this._height=e,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(e){e!==this._scrollX&&(this._scrollX=e,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(e){e!==this._scrollY&&(this._scrollY=e,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(e){this._zoomX=e,this._zoomY=e,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(e){this._zoomX=e,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(e){this._zoomY=e,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}})},38058:(e,t,i)=>{var r=i(71911),n=i(67502),s=i(45319),a=i(83419),o=i(31401),h=i(20052),c=i(19715),l=i(28915),d=i(87841),u=i(26099);e.exports=new a({Extends:r,Mixins:[o.PostPipeline],initialize:function(e,t,i,n){r.call(this,e,t,i,n),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new u(1,1),this.followOffset=new u,this.deadzone=null,this._follow=null},setDeadzone:function(e,t){if(void 0===e)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=e,this.deadzone.height=t):this.deadzone=new d(0,0,e,t),this._follow){var i=this.width/2,r=this.height/2,s=this._follow.x-this.followOffset.x,a=this._follow.y-this.followOffset.y;this.midPoint.set(s,a),this.scrollX=s-i,this.scrollY=a-r}n(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(e,t,i,r,n,s){return this.fadeEffect.start(!1,e,t,i,r,!0,n,s)},fadeOut:function(e,t,i,r,n,s){return this.fadeEffect.start(!0,e,t,i,r,!0,n,s)},fadeFrom:function(e,t,i,r,n,s,a){return this.fadeEffect.start(!1,e,t,i,r,n,s,a)},fade:function(e,t,i,r,n,s,a){return this.fadeEffect.start(!0,e,t,i,r,n,s,a)},flash:function(e,t,i,r,n,s,a){return this.flashEffect.start(e,t,i,r,n,s,a)},shake:function(e,t,i,r,n){return this.shakeEffect.start(e,t,i,r,n)},pan:function(e,t,i,r,n,s,a){return this.panEffect.start(e,t,i,r,n,s,a)},rotateTo:function(e,t,i,r,n,s,a){return this.rotateToEffect.start(e,t,i,r,n,s,a)},zoomTo:function(e,t,i,r,n,s){return this.zoomEffect.start(e,t,i,r,n,s)},preRender:function(){this.renderList.length=0;var e=this.width,t=this.height,i=this.zoomX,r=this.zoomY,s=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(i)&&Number.isInteger(r);var a=e*this.originX,o=t*this.originY,h=this._follow,d=this.deadzone,u=this.scrollX,f=this.scrollY;d&&n(d,this.midPoint.x,this.midPoint.y);var p=!1;if(h&&!this.panEffect.isRunning){var g=this.lerp,m=h.x-this.followOffset.x,v=h.y-this.followOffset.y;d?(m<d.x?u=l(u,u-(d.x-m),g.x):m>d.right&&(u=l(u,u+(m-d.right),g.x)),v<d.y?f=l(f,f-(d.y-v),g.y):v>d.bottom&&(f=l(f,f+(v-d.bottom),g.y))):(u=l(u,m-a,g.x),f=l(f,v-o,g.y)),p=!0}this.roundPixels&&(u=Math.floor(u),f=Math.floor(f)),this.useBounds&&(u=this.clampX(u),f=this.clampY(f)),this.scrollX=u,this.scrollY=f;var y=u+.5*e,b=f+.5*t;this.midPoint.set(y,b);var x=Math.floor(e/i+.5),E=Math.floor(t/r+.5),T=Math.floor(y-x/2+.5),A=Math.floor(b-E/2+.5);this.worldView.setTo(T,A,x,E),s.applyITRS(Math.floor(this.x+a+.5),Math.floor(this.y+o+.5),this.rotation,i,r),s.translate(-a,-o),this.shakeEffect.preRender(),p&&this.emit(c.FOLLOW_UPDATE,this,h)},setLerp:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=e),this.lerp.set(e,t),this},setFollowOffset:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.followOffset.set(e,t),this},startFollow:function(e,t,i,r,n,a){void 0===t&&(t=!1),void 0===i&&(i=1),void 0===r&&(r=i),void 0===n&&(n=0),void 0===a&&(a=n),this._follow=e,this.roundPixels=t,i=s(i,0,1),r=s(r,0,1),this.lerp.set(i,r),this.followOffset.set(n,a);var o=this.width/2,h=this.height/2,c=e.x-n,l=e.y-a;return this.midPoint.set(c,l),this.scrollX=c-o,this.scrollY=l-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(e,t){this.visible&&(this.rotateToEffect.update(e,t),this.panEffect.update(e,t),this.zoomEffect.update(e,t),this.shakeEffect.update(e,t),this.flashEffect.update(e,t),this.fadeEffect.update(e,t))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}})},32743:(e,t,i)=>{var r=i(38058),n=i(83419),s=i(95540),a=i(37277),o=i(37303),h=i(97480),c=i(44594),l=new n({initialize:function(e){this.scene=e,this.systems=e.sys,this.roundPixels=e.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,e.sys.events.once(c.BOOT,this.boot,this),e.sys.events.on(c.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,e.scale.width,e.scale.height).setScene(this.scene),e.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add(),this.main=this.cameras[0]}var t=this.systems.events;t.on(c.UPDATE,this.update,this),t.once(c.SHUTDOWN,this.shutdown,this)},add:function(e,t,i,n,s,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===a&&(a="");var o=new r(e,t,i,n);return o.setName(a),o.setScene(this.scene),o.setRoundPixels(this.roundPixels),o.id=this.getNextID(),this.cameras.push(o),s&&(this.main=o),o},addExisting:function(e,t){return(void 0===t&&(t=!1),-1===this.cameras.indexOf(e))?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),t&&(this.main=e),e):null},getNextID:function(){for(var e=this.cameras,t=1,i=0;i<32;i++){for(var r=!1,n=0;n<e.length;n++){var s=e[n];if(s&&s.id===t){r=!0;continue}}if(!r)return t;t<<=1}return 0},getTotal:function(e){void 0===e&&(e=!1);for(var t=0,i=this.cameras,r=0;r<i.length;r++){var n=i[r];(!e||e&&n.visible)&&t++}return t},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var t=this.scene.sys.scale.width,i=this.scene.sys.scale.height,r=0;r<e.length;r++){var n=e[r],a=s(n,"x",0),o=s(n,"y",0),h=s(n,"width",t),c=s(n,"height",i),l=this.add(a,o,h,c);l.name=s(n,"name",""),l.zoom=s(n,"zoom",1),l.rotation=s(n,"rotation",0),l.scrollX=s(n,"scrollX",0),l.scrollY=s(n,"scrollY",0),l.roundPixels=s(n,"roundPixels",!1),l.visible=s(n,"visible",!0);var d=s(n,"backgroundColor",!1);d&&l.setBackgroundColor(d);var u=s(n,"bounds",null);if(u){var f=s(u,"x",0),p=s(u,"y",0),g=s(u,"width",t),m=s(u,"height",i);l.setBounds(f,p,g,m)}}return this},getCamera:function(e){for(var t=this.cameras,i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},getCamerasBelowPointer:function(e){for(var t=this.cameras,i=e.x,r=e.y,n=[],s=0;s<t.length;s++){var a=t[s];a.visible&&a.inputEnabled&&o(a,i,r)&&n.unshift(a)}return n},remove:function(e,t){void 0===t&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0,r=this.cameras,n=0;n<e.length;n++){var s=r.indexOf(e[n]);-1!==s&&(t?r[s].destroy():r[s].renderList=[],r.splice(s,1),i++)}return!this.main&&r[0]&&(this.main=r[0]),i},render:function(e,t){for(var i=this.scene,r=this.cameras,n=0;n<r.length;n++){var s=r[n];if(s.visible&&s.alpha>0){s.preRender();var a=this.getVisibleChildren(t.getChildren(),s);e.render(i,a,s)}}},getVisibleChildren:function(e,t){return e.filter(function(e){return e.willRender(t)})},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(e,t)},onResize:function(e,t,i,r,n){for(var s=0;s<this.cameras.length;s++){var a=this.cameras[s];0===a._x&&0===a._y&&a._width===r&&a._height===n&&a.setSize(t.width,t.height)}},resize:function(e,t){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(e,t)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];var t=this.systems.events;t.off(c.UPDATE,this.update,this),t.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(c.START,this.start,this),this.systems.events.off(c.DESTROY,this.destroy,this),this.systems.game.scale.off(h.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});a.register("CameraManager",l,"cameras"),e.exports=l},5020:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(19715);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,n,a,o,h){if(void 0===e&&(e=!0),void 0===t&&(t=1e3),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),!a&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=t,this.direction=e,this.progress=0,this.red=i,this.green=r,this.blue=n,this.alpha=e?5e-324:1,this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h;var c=e?s.FADE_OUT_START:s.FADE_IN_START;return this.camera.emit(c,this.camera,this,t,i,r,n),this.camera},update:function(e,t){this.isRunning&&(this._elapsed+=t,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=+!!this.direction,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(s,n,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var e=this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}})},10662:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(19715);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,n,a,o){return void 0===e&&(e=250),void 0===t&&(t=255),void 0===i&&(i=255),void 0===r&&(r=255),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===o&&(o=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.red=t,this.green=i,this.blue=r,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=o,this.camera.emit(s.FLASH_START,this.camera,this,e,t,i,r)),this.camera},update:function(e,t){this.isRunning&&(this._elapsed+=t,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var t=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(t.x,t.y,t.width,t.height),!0},postRenderWebGL:function(e,t){if(!this.isRunning)return!1;var i=this.camera,r=this.red/255,n=this.green/255,s=this.blue/255;return e.drawFillRect(i.x,i.y,i.width,i.height,t(s,n,r,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}})},20359:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(62640),a=i(19715),o=i(26099);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,n,o,h){void 0===i&&(i=1e3),void 0===r&&(r=s.Linear),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene);var c=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(c.scrollX,c.scrollY),this.destination.set(e,t),c.getScroll(e,t,this.current),"string"==typeof r&&s.hasOwnProperty(r)?this.ease=s[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.camera.emit(a.PAN_START,this.camera,this,i,e,t)),c},update:function(e,t){if(this.isRunning){this._elapsed+=t;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);n.getScroll(this.destination.x,this.destination.y,this.current);var a=this.source.x+(this.current.x-this.source.x)*s,o=this.source.y+(this.current.y-this.source.y)*s;n.setScroll(a,o),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,a,o)}else n.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,n.scrollX,n.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}})},34208:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(19715),a=i(62640);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,t,i,r,n,o,h){void 0===i&&(i=1e3),void 0===r&&(r=a.Linear),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===h&&(h=this.camera.scene),void 0===t&&(t=!1),this.shortestPath=t;var c=e;e<0?(c=-1*e,this.clockwise=!1):this.clockwise=!0;var l=360*Math.PI/180;c-=Math.floor(c/l)*l;var d=this.camera;if(!n&&this.isRunning)return d;if(this.isRunning=!0,this.duration=i,this.progress=0,this.source=d.rotation,this.destination=c,"string"==typeof r&&a.hasOwnProperty(r)?this.ease=a[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=h,this.shortestPath){var u=0,f=0;(u=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+l)-this.source)<(f=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+l)-this.destination)?this.clockwise=!0:u>f&&(this.clockwise=!1)}return this.camera.emit(s.ROTATE_START,this.camera,this,i,c),d},update:function(e,t){if(this.isRunning){this._elapsed+=t;var i=r(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var s=this.ease(i);this.current=n.rotation;var a=0,o=360*Math.PI/180,h=this.destination,c=this.current;!1===this.clockwise&&(h=this.current,c=this.destination),a=h>=c?Math.abs(h-c):Math.abs(h+o)-c;var l=0;l=this.clockwise?n.rotation+a*s:n.rotation-a*s,n.rotation=l,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,l)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,i,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}})},30330:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(19715),a=i(26099);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,n){return void 0===e&&(e=100),void 0===t&&(t=.05),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,"number"==typeof t?this.intensity.set(t):this.intensity.set(t.x,t.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=n,this.camera.emit(s.SHAKE_START,this.camera,this,e,t)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,t){if(this.isRunning)if(this._elapsed+=t,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var i=this.intensity,n=this.camera.width,s=this.camera.height,a=this.camera.zoom;this._offsetX=(Math.random()*i.x*n*2-i.x*n)*a,this._offsetY=(Math.random()*i.y*s*2-i.y*s)*a,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}})},45641:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(62640),a=i(19715);e.exports=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,t,i,r,n,o){void 0===t&&(t=1e3),void 0===i&&(i=s.Linear),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===o&&(o=this.camera.scene);var h=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.source=h.zoom,this.destination=e,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=o,this.camera.emit(a.ZOOM_START,this.camera,this,t,e)),h},update:function(e,t){this.isRunning&&(this._elapsed+=t,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}})},20052:(e,t,i)=>{e.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:e=>{e.exports="cameradestroy"},32726:e=>{e.exports="camerafadeincomplete"},87807:e=>{e.exports="camerafadeinstart"},45917:e=>{e.exports="camerafadeoutcomplete"},95666:e=>{e.exports="camerafadeoutstart"},47056:e=>{e.exports="cameraflashcomplete"},91261:e=>{e.exports="cameraflashstart"},45047:e=>{e.exports="followupdate"},81927:e=>{e.exports="camerapancomplete"},74264:e=>{e.exports="camerapanstart"},54419:e=>{e.exports="postrender"},79330:e=>{e.exports="prerender"},93183:e=>{e.exports="camerarotatecomplete"},80112:e=>{e.exports="camerarotatestart"},62252:e=>{e.exports="camerashakecomplete"},86017:e=>{e.exports="camerashakestart"},539:e=>{e.exports="camerazoomcomplete"},51892:e=>{e.exports="camerazoomstart"},19715:(e,t,i)=>{e.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(e,t,i)=>{e.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(e,t,i)=>{var r=i(83419),n=i(35154);e.exports=new r({initialize:function(e){this.camera=n(e,"camera",null),this.left=n(e,"left",null),this.right=n(e,"right",null),this.up=n(e,"up",null),this.down=n(e,"down",null),this.zoomIn=n(e,"zoomIn",null),this.zoomOut=n(e,"zoomOut",null),this.zoomSpeed=n(e,"zoomSpeed",.01),this.minZoom=n(e,"minZoom",.001),this.maxZoom=n(e,"maxZoom",1e3),this.speedX=0,this.speedY=0;var t=n(e,"speed",null);"number"==typeof t?(this.speedX=t,this.speedY=t):(this.speedX=n(e,"speed.x",0),this.speedY=n(e,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(this.active){void 0===e&&(e=1);var t=this.camera;this.up&&this.up.isDown?t.scrollY-=this.speedY*e|0:this.down&&this.down.isDown&&(t.scrollY+=this.speedY*e|0),this.left&&this.left.isDown?t.scrollX-=this.speedX*e|0:this.right&&this.right.isDown&&(t.scrollX+=this.speedX*e|0),this.zoomIn&&this.zoomIn.isDown?(t.zoom-=this.zoomSpeed,t.zoom<this.minZoom&&(t.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(t.zoom+=this.zoomSpeed,t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}})},58818:(e,t,i)=>{var r=i(83419),n=i(35154);e.exports=new r({initialize:function(e){this.camera=n(e,"camera",null),this.left=n(e,"left",null),this.right=n(e,"right",null),this.up=n(e,"up",null),this.down=n(e,"down",null),this.zoomIn=n(e,"zoomIn",null),this.zoomOut=n(e,"zoomOut",null),this.zoomSpeed=n(e,"zoomSpeed",.01),this.minZoom=n(e,"minZoom",.001),this.maxZoom=n(e,"maxZoom",1e3),this.accelX=0,this.accelY=0;var t=n(e,"acceleration",null);"number"==typeof t?(this.accelX=t,this.accelY=t):(this.accelX=n(e,"acceleration.x",0),this.accelY=n(e,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=n(e,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=n(e,"drag.x",0),this.dragY=n(e,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=n(e,"maxSpeed",null);"number"==typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=n(e,"maxSpeed.x",0),this.maxSpeedY=n(e,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(this.active){void 0===e&&(e=1);var t=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(t.scrollX-=this._speedX*e|0),0!==this._speedY&&(t.scrollY-=this._speedY*e|0),0!==this._zoom&&(t.zoom+=this._zoom,t.zoom<this.minZoom?t.zoom=this.minZoom:t.zoom>this.maxZoom&&(t.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}})},38865:(e,t,i)=>{e.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(e,t,i)=>{e.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(e,t,i)=>{e.exports={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8}},69547:(e,t,i)=>{var r=i(83419),n=i(8054),s=i(42363),a=i(82264),o=i(95540),h=i(35154),c=i(41212),l=i(29747),d=i(75508),u=i(36060),f=i(80333);e.exports=new r({initialize:function(e){void 0===e&&(e={});var t=h(e,"scale",null);this.width=h(t,"width",1024,e),this.height=h(t,"height",768,e),this.zoom=h(t,"zoom",1,e),this.parent=h(t,"parent",void 0,e),this.scaleMode=h(t,t?"mode":"scaleMode",0,e),this.expandParent=h(t,"expandParent",!0,e),this.autoRound=h(t,"autoRound",!1,e),this.autoCenter=h(t,"autoCenter",0,e),this.resizeInterval=h(t,"resizeInterval",500,e),this.fullscreenTarget=h(t,"fullscreenTarget",null,e),this.minWidth=h(t,"min.width",0,e),this.maxWidth=h(t,"max.width",0,e),this.minHeight=h(t,"min.height",0,e),this.maxHeight=h(t,"max.height",0,e),this.snapWidth=h(t,"snap.width",0,e),this.snapHeight=h(t,"snap.height",0,e),this.renderType=h(e,"type",n.AUTO),this.canvas=h(e,"canvas",null),this.context=h(e,"context",null),this.canvasStyle=h(e,"canvasStyle",null),this.customEnvironment=h(e,"customEnvironment",!1),this.sceneConfig=h(e,"scene",null),this.seed=h(e,"seed",[(Date.now()*Math.random()).toString()]),d.RND=new d.RandomDataGenerator(this.seed),this.gameTitle=h(e,"title",""),this.gameURL=h(e,"url","https://phaser.io/"+n.LOG_VERSION),this.gameVersion=h(e,"version",""),this.autoFocus=h(e,"autoFocus",!0),this.stableSort=h(e,"stableSort",-1),-1===this.stableSort&&(this.stableSort=+!!a.browser.es2019),a.features.stableSort=this.stableSort,this.domCreateContainer=h(e,"dom.createContainer",!1),this.domPointerEvents=h(e,"dom.pointerEvents","none"),this.inputKeyboard=h(e,"input.keyboard",!0),this.inputKeyboardEventTarget=h(e,"input.keyboard.target",window),this.inputKeyboardCapture=h(e,"input.keyboard.capture",[]),this.inputMouse=h(e,"input.mouse",!0),this.inputMouseEventTarget=h(e,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(e,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(e,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(e,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(e,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(e,"input.touch",a.input.touch),this.inputTouchEventTarget=h(e,"input.touch.target",null),this.inputTouchCapture=h(e,"input.touch.capture",!0),this.inputActivePointers=h(e,"input.activePointers",1),this.inputSmoothFactor=h(e,"input.smoothFactor",0),this.inputWindowEvents=h(e,"input.windowEvents",!0),this.inputGamepad=h(e,"input.gamepad",!1),this.inputGamepadEventTarget=h(e,"input.gamepad.target",window),this.disableContextMenu=h(e,"disableContextMenu",!1),this.audio=h(e,"audio",{}),this.hideBanner=!1===h(e,"banner",null),this.hidePhaser=h(e,"banner.hidePhaser",!1),this.bannerTextColor=h(e,"banner.text","#ffffff"),this.bannerBackgroundColor=h(e,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(e,"fps",null),this.disablePreFX=h(e,"disablePreFX",!1),this.disablePostFX=h(e,"disablePostFX",!1);var i=h(e,"render",null);this.pipeline=h(i,"pipeline",null,e),this.autoMobilePipeline=h(i,"autoMobilePipeline",!0,e),this.defaultPipeline=h(i,"defaultPipeline",u.MULTI_PIPELINE,e),this.antialias=h(i,"antialias",!0,e),this.antialiasGL=h(i,"antialiasGL",!0,e),this.mipmapFilter=h(i,"mipmapFilter","",e),this.desynchronized=h(i,"desynchronized",!1,e),this.roundPixels=h(i,"roundPixels",!1,e),this.pixelArt=h(i,"pixelArt",1!==this.zoom,e),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(i,"transparent",!1,e),this.clearBeforeRender=h(i,"clearBeforeRender",!0,e),this.preserveDrawingBuffer=h(i,"preserveDrawingBuffer",!1,e),this.premultipliedAlpha=h(i,"premultipliedAlpha",!0,e),this.failIfMajorPerformanceCaveat=h(i,"failIfMajorPerformanceCaveat",!1,e),this.powerPreference=h(i,"powerPreference","default",e),this.batchSize=h(i,"batchSize",4096,e),this.maxTextures=h(i,"maxTextures",-1,e),this.maxLights=h(i,"maxLights",10,e);var r=h(e,"backgroundColor",0);this.backgroundColor=f(r),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=h(e,"callbacks.preBoot",l),this.postBoot=h(e,"callbacks.postBoot",l),this.physics=h(e,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(e,"loader.baseURL",""),this.loaderPath=h(e,"loader.path",""),this.loaderMaxParallelDownloads=h(e,"loader.maxParallelDownloads",a.os.android?6:32),this.loaderCrossOrigin=h(e,"loader.crossOrigin",void 0),this.loaderResponseType=h(e,"loader.responseType",""),this.loaderAsync=h(e,"loader.async",!0),this.loaderUser=h(e,"loader.user",""),this.loaderPassword=h(e,"loader.password",""),this.loaderTimeout=h(e,"loader.timeout",0),this.loaderMaxRetries=h(e,"loader.maxRetries",2),this.loaderWithCredentials=h(e,"loader.withCredentials",!1),this.loaderImageLoadType=h(e,"loader.imageLoadType","XHR"),this.loaderLocalScheme=h(e,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=h(e,"fx.glow.quality",.1),this.glowFXDistance=h(e,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var p=h(e,"plugins",null),g=s.DefaultScene;p&&(Array.isArray(p)?this.defaultPlugins=p:c(p)&&(this.installGlobalPlugins=o(p,"global",[]),this.installScenePlugins=o(p,"scene",[]),Array.isArray(p.default)?g=p.default:Array.isArray(p.defaultMerge)&&(g=g.concat(p.defaultMerge)))),this.defaultPlugins=g;var m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(e,"images.default",m+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(e,"images.missing",m+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(e,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}})},86054:(e,t,i)=>{var r=i(20623),n=i(27919),s=i(8054),a=i(89357);e.exports=function(e){var t,o,h=e.config;if((h.customEnvironment||h.canvas)&&h.renderType===s.AUTO)throw Error("Must set explicit renderType in custom environment");if(!h.customEnvironment&&!h.canvas&&h.renderType!==s.HEADLESS)if(h.renderType===s.AUTO&&(h.renderType=a.webGL?s.WEBGL:s.CANVAS),h.renderType===s.WEBGL){if(!a.webGL)throw Error("Cannot create WebGL context, aborting.")}else if(h.renderType===s.CANVAS){if(!a.canvas)throw Error("Cannot create Canvas context, aborting.")}else throw Error("Unknown value for renderer type: "+h.renderType);h.antialias||n.disableSmoothing();var c=e.scale.baseSize,l=c.width,d=c.height;h.canvas?(e.canvas=h.canvas,e.canvas.width=l,e.canvas.height=d):e.canvas=n.create(e,l,d,h.renderType),h.canvasStyle&&(e.canvas.style=h.canvasStyle),h.antialias||r.setCrisp(e.canvas),h.renderType!==s.HEADLESS&&(t=i(68627),o=i(74797),h.renderType===s.WEBGL?e.renderer=new o(e):(e.renderer=new t(e),e.context=e.renderer.gameContext))}},96391:(e,t,i)=>{var r=i(8054);e.exports=function(e){var t=e.config;if(!t.hideBanner){var i="WebGL";t.renderType===r.CANVAS?i="Canvas":t.renderType===r.HEADLESS&&(i="Headless");var n=t.audio,s=e.device.audio;if(a=s.webAudio&&!n.disableWebAudio?"Web Audio":!n.noAudio&&(s.webAudio||s.audioData)?"HTML5 Audio":"No Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var a,o,h="",c=[h];Array.isArray(t.bannerBackgroundColor)?(t.bannerBackgroundColor.forEach(function(e){h=h.concat("%c "),c.push("background: "+e),o=e}),c[c.length-1]="color: "+t.bannerTextColor+"; background: "+o):(h=h.concat("%c "),c.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor)),c.push("background: transparent"),t.gameTitle&&(h=h.concat(t.gameTitle),t.gameVersion&&(h=h.concat(" v"+t.gameVersion)),t.hidePhaser||(h=h.concat(" / "))),t.hidePhaser||(h=h.concat("Phaser v"+r.VERSION+" ("+i+" | "+a+")")),h=h.concat(" %c "+t.gameURL),c[0]=h,console.log.apply(console,c)}}}},50127:(e,t,i)=>{var r=i(40366),n=i(60848),s=i(24047),a=i(27919),o=i(83419),h=i(69547),c=i(83719),l=i(86054),d=i(45893),u=i(96391),f=i(82264),p=i(57264),g=i(50792),m=i(8443),v=i(7003),y=i(37277),b=i(77332),x=i(76531),E=i(60903),T=i(69442),A=i(17130),w=i(65898),S=i(51085),C=i(14747);e.exports=new o({initialize:function(e){this.config=new h(e),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new n(this),this.textures=new A(this),this.cache=new s(this),this.registry=new d(this,new g),this.input=new v(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=f,this.scale=new x(this,this.config),this.sound=null,this.sound=C.create(this),this.loop=new w(this,this.config.fps),this.plugins=new b(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,p(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),l(this),c(this),u(this),r(this.canvas,this.config.parent),this.textures.once(T.READY,this.texturesReady,this),this.events.emit(m.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),S(this);var e=this.events;e.on(m.HIDDEN,this.onHidden,this),e.on(m.VISIBLE,this.onVisible,this),e.on(m.BLUR,this.onBlur,this),e.on(m.FOCUS,this.onFocus,this)},step:function(e,t){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var i=this.events;i.emit(m.PRE_STEP,e,t),i.emit(m.STEP,e,t),this.scene.update(e,t),i.emit(m.POST_STEP,e,t);var r=this.renderer;r.preRender(),i.emit(m.PRE_RENDER,r,e,t),this.scene.render(r),r.postRender(),i.emit(m.POST_RENDER,r,e,t)}},headlessStep:function(e,t){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var i=this.events;i.emit(m.PRE_STEP,e,t),i.emit(m.STEP,e,t),this.scene.update(e,t),i.emit(m.POST_STEP,e,t),this.scene.isProcessing=!1,i.emit(m.PRE_RENDER,null,e,t),i.emit(m.POST_RENDER,null,e,t)}},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},pause:function(){var e=this.isPaused;this.isPaused=!0,e||this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME,this.loop.pauseDuration)},resume:function(){var e=this.isPaused;this.isPaused=!1,e&&this.events.emit(m.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(e,t){void 0===t&&(t=!1),this.pendingDestroy=!0,this.removeCanvas=e,this.noReturn=t},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}})},65898:(e,t,i)=>{var r=i(83419),n=i(35154),s=i(29747),a=i(43092);e.exports=new r({initialize:function(e,t){this.game=e,this.raf=new a,this.started=!1,this.running=!1,this.minFps=n(t,"min",5),this.targetFps=n(t,"target",60),this.fpsLimit=n(t,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=n(t,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(t,"deltaHistory",10),this.panicMax=n(t,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(t,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var t=0;t<this.deltaSmoothingMax;t++)this.deltaHistory[t]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e;var i=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(i,this.forceSetTimeOut,this._target)},smoothDelta:function(e){var t=this.deltaIndex,i=this.deltaHistory,r=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,e=Math.min(e,this._target)),e>this._min&&(e=Math.min(e=i[t],this._min)),i[t]=e,this.deltaIndex++,this.deltaIndex>=r&&(this.deltaIndex=0);for(var n=0,s=0;s<r;s++)n+=i[s];return n/r},updateFPS:function(e){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0},stepLimitFPS:function(e){this.now=e;var t=Math.max(0,e-this.lastTime);this.rawDelta=t,this.time+=this.rawDelta,this.smoothStep&&(t=this.smoothDelta(t)),this.delta+=t,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(e,this.delta),this.delta=0),this.lastTime=e,this.frame++},step:function(e){this.now=e;var t=Math.max(0,e-this.lastTime);this.rawDelta=t,this.time+=this.rawDelta,this.smoothStep&&(t=this.smoothDelta(t)),this.delta=t,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.callback(e,t),this.lastTime=e,this.frame++},tick:function(){var e=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(e):this.step(e)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){void 0===e&&(e=!1);var t=window.performance.now();if(!this.running){e&&(this.startTime+=-this.lastTime+(this.lastTime+t));var i=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(i,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}})},51085:(e,t,i)=>{var r=i(8443);e.exports=function(e){var t,i=e.events;void 0!==document.hidden?t="visibilitychange":["webkit","moz","ms"].forEach(function(e){void 0!==document[e+"Hidden"]&&(document.hidden=function(){return document[e+"Hidden"]},t=e+"visibilitychange")}),t&&document.addEventListener(t,function(e){document.hidden||"pause"===e.type?i.emit(r.HIDDEN):i.emit(r.VISIBLE)},!1),window.onblur=function(){i.emit(r.BLUR)},window.onfocus=function(){i.emit(r.FOCUS)},window.focus&&e.config.autoFocus&&window.focus()}},97217:e=>{e.exports="blur"},47548:e=>{e.exports="boot"},19814:e=>{e.exports="contextlost"},68446:e=>{e.exports="destroy"},41700:e=>{e.exports="focus"},25432:e=>{e.exports="hidden"},65942:e=>{e.exports="pause"},59211:e=>{e.exports="postrender"},47789:e=>{e.exports="poststep"},39066:e=>{e.exports="prerender"},460:e=>{e.exports="prestep"},16175:e=>{e.exports="ready"},42331:e=>{e.exports="resume"},11966:e=>{e.exports="step"},32969:e=>{e.exports="systemready"},94830:e=>{e.exports="visible"},8443:(e,t,i)=>{e.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(e,t,i)=>{e.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(e,t,i)=>{var r=i(5290),n=i(27919),s=i(35154);e.exports=function(e){var t=s(e,"data",[]),i=s(e,"canvas",null),a=s(e,"palette",r),o=s(e,"pixelWidth",1),h=s(e,"pixelHeight",o),c=s(e,"resizeCanvas",!0),l=s(e,"clearCanvas",!0),d=s(e,"preRender",null),u=s(e,"postRender",null),f=Math.floor(Math.abs(t[0].length*o)),p=Math.floor(Math.abs(t.length*h));i||(i=n.create2D(this,f,p),c=!1,l=!1),c&&(i.width=f,i.height=p);var g=i.getContext("2d",{willReadFrequently:!0});l&&g.clearRect(0,0,f,p),d&&d(i,g);for(var m=0;m<t.length;m++)for(var v=t[m],y=0;y<v.length;y++){var b=v[y];"."!==b&&" "!==b&&(g.fillStyle=a[b],g.fillRect(y*o,m*h,o,h))}return u&&u(i,g),i}},15822:(e,t,i)=>{e.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:e=>{e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:e=>{e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:e=>{e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:e=>{e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:e=>{e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(e,t,i)=>{e.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(e,t,i)=>{var r=i(83419),n=i(36316),s=i(80021),a=i(26099),o=new r({Extends:s,initialize:function(e,t,i,r){s.call(this,"CubicBezierCurve"),Array.isArray(e)&&(r=new a(e[6],e[7]),i=new a(e[4],e[5]),t=new a(e[2],e[3]),e=new a(e[0],e[1])),this.p0=e,this.p1=t,this.p2=i,this.p3=r},getStartPoint:function(e){return void 0===e&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,t){void 0===t&&(t=new a);var i=this.p0,r=this.p1,s=this.p2,o=this.p3;return t.set(n(e,i.x,r.x,s.x,o.x),n(e,i.y,r.y,s.y,o.y))},draw:function(e,t){void 0===t&&(t=32);var i=this.getPoints(t);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)e.lineTo(i[r].x,i[r].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(e){var t=e.points;return new o(new a(t[0],t[1]),new a(t[2],t[3]),new a(t[4],t[5]),new a(t[6],t[7]))},e.exports=o},80021:(e,t,i)=>{var r=i(83419),n=i(19217),s=i(87841),a=i(26099);e.exports=new r({initialize:function(e){this.type=e,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(e,t){return void 0===t&&(t=32),e.strokePoints(this.getPoints(t))},getBounds:function(e,t){e||(e=new s),void 0===t&&(t=16);var i=this.getLength();t>i&&(t=i/2);var r=Math.max(1,Math.round(i/t));return n(this.getSpacedPoints(r),e)},getDistancePoints:function(e){var t=Math.max(1,this.getLength()/e);return this.getSpacedPoints(t)},getEndPoint:function(e){return void 0===e&&(e=new a),this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],r=this.getPoint(0,this._tmpVec2A),n=0;i.push(0);for(var s=1;s<=e;s++)i.push(n+=(t=this.getPoint(s/e,this._tmpVec2B)).distance(r)),r.copy(t);return this.cacheArcLengths=i,i},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e,t,i){void 0===i&&(i=[]),e||(e=t?this.getLength()/t:this.defaultDivisions);for(var r=0;r<=e;r++)i.push(this.getPoint(r/e));return i},getRandomPoint:function(e){return void 0===e&&(e=new a),this.getPoint(Math.random(),e)},getSpacedPoints:function(e,t,i){void 0===i&&(i=[]),e||(e=t?this.getLength()/t:this.defaultDivisions);for(var r=0;r<=e;r++){var n=this.getUtoTmapping(r/e,null,e);i.push(this.getPoint(n))}return i},getStartPoint:function(e){return void 0===e&&(e=new a),this.getPointAt(0,e)},getTangent:function(e,t){void 0===t&&(t=new a);var i=e-1e-4,r=e+1e-4;return i<0&&(i=0),r>1&&(r=1),this.getPoint(i,this._tmpVec2A),this.getPoint(r,t),t.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,t){var i=this.getUtoTmapping(e);return this.getTangent(i,t)},getTFromDistance:function(e,t){return e<=0?0:this.getUtoTmapping(0,e,t)},getUtoTmapping:function(e,t,i){var r,n,s=this.getLengths(i),a=0,o=s.length;r=t?Math.min(t,s[o-1]):e*s[o-1];for(var h=0,c=o-1;h<=c;)if((n=s[a=Math.floor(h+(c-h)/2)]-r)<0)h=a+1;else if(n>0)c=a-1;else{c=a;break}if(s[a=c]===r)return a/(o-1);var l=s[a],d=s[a+1];return(a+(r-l)/(d-l))/(o-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}})},73825:(e,t,i)=>{var r=i(83419),n=i(80021),s=i(39506),a=i(35154),o=i(43396),h=i(26099),c=new r({Extends:n,initialize:function(e,t,i,r,o,c,l,d){if("object"==typeof e){var u=e;e=a(u,"x",0),t=a(u,"y",0),i=a(u,"xRadius",0),r=a(u,"yRadius",i),o=a(u,"startAngle",0),c=a(u,"endAngle",360),l=a(u,"clockwise",!1),d=a(u,"rotation",0)}else void 0===r&&(r=i),void 0===o&&(o=0),void 0===c&&(c=360),void 0===l&&(l=!1),void 0===d&&(d=0);n.call(this,"EllipseCurve"),this.p0=new h(e,t),this._xRadius=i,this._yRadius=r,this._startAngle=s(o),this._endAngle=s(c),this._clockwise=l,this._rotation=s(d)},getStartPoint:function(e){return void 0===e&&(e=new h),this.getPoint(0,e)},getResolution:function(e){return 2*e},getPoint:function(e,t){void 0===t&&(t=new h);for(var i=2*Math.PI,r=this._endAngle-this._startAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=n?0:i),this._clockwise&&!n&&(r===i?r=-i:r-=i);var s=this._startAngle+e*r,a=this.p0.x+this._xRadius*Math.cos(s),o=this.p0.y+this._yRadius*Math.sin(s);if(0!==this._rotation){var c=Math.cos(this._rotation),l=Math.sin(this._rotation),d=a-this.p0.x,u=o-this.p0.y;a=d*c-u*l+this.p0.x,o=d*l+u*c+this.p0.y}return t.set(a,o)},setXRadius:function(e){return this.xRadius=e,this},setYRadius:function(e){return this.yRadius=e,this},setWidth:function(e){return this.xRadius=e/2,this},setHeight:function(e){return this.yRadius=e/2,this},setStartAngle:function(e){return this.startAngle=e,this},setEndAngle:function(e){return this.endAngle=e,this},setClockwise:function(e){return this.clockwise=e,this},setRotation:function(e){return this.rotation=e,this},x:{get:function(){return this.p0.x},set:function(e){this.p0.x=e}},y:{get:function(){return this.p0.y},set:function(e){this.p0.y=e}},xRadius:{get:function(){return this._xRadius},set:function(e){this._xRadius=e}},yRadius:{get:function(){return this._yRadius},set:function(e){this._yRadius=e}},startAngle:{get:function(){return o(this._startAngle)},set:function(e){this._startAngle=s(e)}},endAngle:{get:function(){return o(this._endAngle)},set:function(e){this._endAngle=s(e)}},clockwise:{get:function(){return this._clockwise},set:function(e){this._clockwise=e}},angle:{get:function(){return o(this._rotation)},set:function(e){this._rotation=s(e)}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});c.fromJSON=function(e){return new c(e)},e.exports=c},33951:(e,t,i)=>{var r=i(83419),n=i(80021),s=i(19217),a=i(87841),o=i(26099),h=new r({Extends:n,initialize:function(e,t){n.call(this,"LineCurve"),Array.isArray(e)&&(t=new o(e[2],e[3]),e=new o(e[0],e[1])),this.p0=e,this.p1=t,this.arcLengthDivisions=1},getBounds:function(e){return void 0===e&&(e=new a),s([this.p0,this.p1],e)},getStartPoint:function(e){return void 0===e&&(e=new o),e.copy(this.p0)},getResolution:function(e){return void 0===e&&(e=1),e},getPoint:function(e,t){return(void 0===t&&(t=new o),1===e)?t.copy(this.p1):(t.copy(this.p1).subtract(this.p0).scale(e).add(this.p0),t)},getPointAt:function(e,t){return this.getPoint(e,t)},getTangent:function(e,t){return void 0===t&&(t=new o),t.copy(this.p1).subtract(this.p0).normalize(),t},getUtoTmapping:function(e,t,i){var r;if(t){var n=this.getLengths(i),s=n[n.length-1];r=Math.min(t,s)/s}else r=e;return r},draw:function(e){return e.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(e){var t=e.points;return new h(new o(t[0],t[1]),new o(t[2],t[3]))},e.exports=h},14744:(e,t,i)=>{var r=i(83419),n=i(80021),s=i(32112),a=i(26099),o=new r({Extends:n,initialize:function(e,t,i){n.call(this,"QuadraticBezierCurve"),Array.isArray(e)&&(i=new a(e[4],e[5]),t=new a(e[2],e[3]),e=new a(e[0],e[1])),this.p0=e,this.p1=t,this.p2=i},getStartPoint:function(e){return void 0===e&&(e=new a),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,t){void 0===t&&(t=new a);var i=this.p0,r=this.p1,n=this.p2;return t.set(s(e,i.x,r.x,n.x),s(e,i.y,r.y,n.y))},draw:function(e,t){void 0===t&&(t=32);var i=this.getPoints(t);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var r=1;r<i.length;r++)e.lineTo(i[r].x,i[r].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(e){var t=e.points;return new o(new a(t[0],t[1]),new a(t[2],t[3]),new a(t[4],t[5]))},e.exports=o},42534:(e,t,i)=>{var r=i(87842),n=i(83419),s=i(80021),a=i(26099),o=new n({Extends:s,initialize:function(e){void 0===e&&(e=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(e)},addPoints:function(e){for(var t=0;t<e.length;t++){var i=new a;"number"==typeof e[t]?(i.x=e[t],i.y=e[t+1],t++):Array.isArray(e[t])?(i.x=e[t][0],i.y=e[t][1]):(i.x=e[t].x,i.y=e[t].y),this.points.push(i)}return this},addPoint:function(e,t){var i=new a(e,t);return this.points.push(i),i},getStartPoint:function(e){return void 0===e&&(e=new a),e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,t){void 0===t&&(t=new a);var i=this.points,n=(i.length-1)*e,s=Math.floor(n),o=n-s,h=i[0===s?s:s-1],c=i[s],l=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return t.set(r(o,h.x,c.x,l.x,d.x),r(o,h.y,c.y,l.y,d.y))},toJSON:function(){for(var e=[],t=0;t<this.points.length;t++)e.push(this.points[t].x),e.push(this.points[t].y);return{type:this.type,points:e}}});o.fromJSON=function(e){return new o(e.points)},e.exports=o},25410:(e,t,i)=>{e.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(e,t,i)=>{var r=i(83419),n=i(26099);e.exports=new r({initialize:function(e,t){this.active=!1,this.p0=new n(e,t)},getPoint:function(e,t){return void 0===t&&(t=new n),t.copy(this.p0)},getPointAt:function(e,t){return this.getPoint(e,t)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}})},46669:(e,t,i)=>{var r=i(83419),n=i(46728),s=i(73825),a=i(39429),o=i(33951),h=i(68618),c=i(14744),l=i(87841),d=i(42534),u=i(26099),f=i(36383),p=new r({initialize:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new u,this._tmpVec2A=new u,this._tmpVec2B=new u,"object"==typeof e?this.fromJSON(e):this.startPoint.set(e,t)},add:function(e){return this.curves.push(e),this},circleTo:function(e,t,i){return void 0===t&&(t=!1),this.ellipseTo(e,e,0,360,t,i)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);return e.equals(t)||this.curves.push(new o(t,e)),this},cubicBezierTo:function(e,t,i,r,s,a){var o,h,c,l=this.getEndPoint();return e instanceof u?(o=e,h=t,c=i):(o=new u(i,r),h=new u(s,a),c=new u(e,t)),this.add(new n(l,o,h,c))},quadraticBezierTo:function(e,t,i,r){var n,s,a=this.getEndPoint();return e instanceof u?(n=e,s=t):(n=new u(i,r),s=new u(e,t)),this.add(new c(a,n,s))},draw:function(e,t){for(var i=0;i<this.curves.length;i++){var r=this.curves[i];r.active&&r.draw(e,t)}return e},ellipseTo:function(e,t,i,r,n,a){var o=new s(0,0,e,t,i,r,n,a),h=this.getEndPoint(this._tmpVec2A),c=o.getStartPoint(this._tmpVec2B);return h.subtract(c),o.x=h.x,o.y=h.y,this.add(o)},fromJSON:function(e){this.curves=[],this.cacheLengths=[],this.startPoint.set(e.x,e.y),this.autoClose=e.autoClose;for(var t=0;t<e.curves.length;t++){var i=e.curves[t];switch(i.type){case"LineCurve":this.add(o.fromJSON(i));break;case"EllipseCurve":this.add(s.fromJSON(i));break;case"SplineCurve":this.add(d.fromJSON(i));break;case"CubicBezierCurve":this.add(n.fromJSON(i));break;case"QuadraticBezierCurve":this.add(c.fromJSON(i))}}return this},getBounds:function(e,t){void 0===e&&(e=new l),void 0===t&&(t=16),e.x=Number.MAX_VALUE,e.y=Number.MAX_VALUE;for(var i=new l,r=f.MIN_SAFE_INTEGER,n=f.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var a=this.curves[s];a.active&&(a.getBounds(i,t),e.x=Math.min(e.x,i.x),e.y=Math.min(e.y,i.y),r=Math.max(r,i.right),n=Math.max(n,i.bottom))}return e.right=r,e.bottom=n,e},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0;i<this.curves.length;i++)e.push(t+=this.curves[i].getLength());return this.cacheLengths=e,e},getCurveAt:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=t)return this.curves[r];r++}return null},getEndPoint:function(e){return void 0===e&&(e=new u),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,e):e.copy(this.startPoint),e},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},getPoint:function(e,t){void 0===t&&(t=new u);for(var i=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,a=this.curves[n],o=a.getLength(),h=0===o?0:1-s/o;return a.getPointAt(h,t)}n++}return null},getPoints:function(e,t){e||t||(e=this.defaultDivisions);for(var i,r=[],n=0;n<this.curves.length;n++){var s=this.curves[n];if(s.active)for(var a=s.getResolution(e),o=s.getPoints(a,t),h=0;h<o.length;h++){var c=o[h];i&&i.equals(c)||(r.push(c),i=c)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},getRandomPoint:function(e){return void 0===e&&(e=new u),this.getPoint(Math.random(),e)},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getStartPoint:function(e){return void 0===e&&(e=new u),e.copy(this.startPoint)},getTangent:function(e,t){void 0===t&&(t=new u);for(var i=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var s=r[n]-i,a=this.curves[n],o=a.getLength(),h=0===o?0:1-s/o;return a.getTangentAt(h,t)}n++}return null},lineTo:function(e,t){e instanceof u?this._tmpVec2B.copy(e):"object"==typeof e?this._tmpVec2B.setFromObject(e):this._tmpVec2B.set(e,t);var i=this.getEndPoint(this._tmpVec2A);return this.add(new o([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(e){return e.unshift(this.getEndPoint()),this.add(new d(e))},moveTo:function(e,t){return e instanceof u?this.add(new h(e.x,e.y)):this.add(new h(e,t))},toJSON:function(){for(var e=[],t=0;t<this.curves.length;t++)e.push(this.curves[t].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:e}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(e,t){return new p(e,t)}),e.exports=p},45893:(e,t,i)=>{var r=i(83419),n=i(24882);e.exports=new r({initialize:function(e,t){this.parent=e,this.events=t,t||(this.events=e.events?e.events:e),this.list={},this.values={},this._frozen=!1,!e.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(e){var t=this.list;if(!Array.isArray(e))return t[e];for(var i=[],r=0;r<e.length;r++)i.push(t[e[r]]);return i},getAll:function(){var e={};for(var t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(e){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(e)&&(t[i]=this.list[i]);return t},set:function(e,t){if(this._frozen)return this;if("string"==typeof e)return this.setValue(e,t);for(var i in e)this.setValue(i,e[i]);return this},inc:function(e,t){if(this._frozen)return this;void 0===t&&(t=1);var i=this.get(e);return void 0===i&&(i=0),this.set(e,i+t),this},toggle:function(e){return this._frozen||this.set(e,!this.get(e)),this},setValue:function(e,t){if(this._frozen)return this;if(this.has(e))this.values[e]=t;else{var i=this,r=this.list,s=this.events,a=this.parent;Object.defineProperty(this.values,e,{enumerable:!0,configurable:!0,get:function(){return r[e]},set:function(t){if(!i._frozen){var o=r[e];r[e]=t,s.emit(n.CHANGE_DATA,a,e,t,o),s.emit(n.CHANGE_DATA_KEY+e,a,t,o)}}}),r[e]=t,s.emit(n.SET_DATA,a,e,t)}return this},each:function(e,t){for(var i=[this.parent,null,void 0],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[1]=n,i[2]=this.list[n],e.apply(t,i);return this},merge:function(e,t){for(var i in void 0===t&&(t=!0),e)e.hasOwnProperty(i)&&(t||!t&&!this.has(i))&&this.setValue(i,e[i]);return this},remove:function(e){if(this._frozen)return this;if(!Array.isArray(e))return this.removeValue(e);for(var t=0;t<e.length;t++)this.removeValue(e[t]);return this},removeValue:function(e){if(this.has(e)){var t=this.list[e];delete this.list[e],delete this.values[e],this.events.emit(n.REMOVE_DATA,this.parent,e,t)}return this},pop:function(e){var t=void 0;return!this._frozen&&this.has(e)&&(t=this.list[e],delete this.list[e],delete this.values[e],this.events.emit(n.REMOVE_DATA,this.parent,e,t)),t},has:function(e){return this.list.hasOwnProperty(e)},setFreeze:function(e){return this._frozen=e,this},reset:function(){for(var e in this.list)delete this.list[e],delete this.values[e];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(e){this._frozen=!!e}},count:{get:function(){var e=0;for(var t in this.list)void 0!==this.list[t]&&e++;return e}}})},63646:(e,t,i)=>{var r=i(83419),n=i(45893),s=i(37277),a=i(44594),o=new r({Extends:n,initialize:function(e){n.call(this,e,e.sys.events),this.scene=e,this.systems=e.sys,e.sys.events.once(a.BOOT,this.boot,this),e.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",o,"data"),e.exports=o},10700:e=>{e.exports="changedata"},93608:e=>{e.exports="changedata-"},60883:e=>{e.exports="destroy"},69780:e=>{e.exports="removedata"},22166:e=>{e.exports="setdata"},24882:(e,t,i)=>{e.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(e,t,i)=>{e.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(e,t,i)=>{var r=i(84148),n={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};e.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!!(window.AudioContext||window.webkitAudioContext);var e=document.createElement("audio"),t=!!e.canPlayType;try{if(t){var i=function(t,i){var r=e.canPlayType("audio/"+t).replace(/^no$/,"");return i?!!(r||e.canPlayType("audio/"+i).replace(/^no$/,"")):!!r};if(n.ogg=i('ogg; codecs="vorbis"'),n.opus=i('ogg; codecs="opus"',"opus"),n.mp3=i("mpeg"),n.wav=i("wav"),n.m4a=i("x-m4a"),n.aac=i("aac"),n.flac=i("flac","x-flac"),n.webm=i('webm; codecs="vorbis"'),""!==e.canPlayType('audio/mp4; codecs="ec-3"')){if(r.edge)n.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(10===s&&a>=11||s>10)&&(n.dolby=!0)}}}}catch(e){}return n}()},84148:(e,t,i)=>{var r,n=i(25892),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};r=navigator.userAgent,/Edg\/\d+/.test(r)?(s.edge=!0,s.es2019=!0):/OPR/.test(r)?(s.opera=!0,s.es2019=!0):/Chrome\/(\d+)/.test(r)&&!n.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10),s.es2019=s.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10),s.es2019=s.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&n.iOS?(s.mobileSafari=!0,s.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!n.windowsPhone?(s.safari=!0,s.safariVersion=parseInt(RegExp.$1,10),s.es2019=s.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(s.silk=!0),e.exports=s},89289:(e,t,i)=>{var r=i(27919),n={supportInverseAlpha:!1,supportNewBlendModes:!1};e.exports=function(){if("function"!=typeof importScripts&&void 0!==document){var e;(e=new Image).onload=function(){var t=new Image;t.onload=function(){var i=r.create2D(t,6).getContext("2d",{willReadFrequently:!0});if(i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0),!i.getImageData(2,0,1,1))return!1;var s=i.getImageData(2,0,1,1).data;r.remove(t),n.supportNewBlendModes=255===s[0]&&0===s[1]&&0===s[2]},t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX//wCKxvRFAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg=="},e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/AP804Oa6AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n.supportNewBlendModes=!1,n.supportInverseAlpha=function(){var e=r.create2D(this,2).getContext("2d",{willReadFrequently:!0});e.fillStyle="rgba(10, 20, 30, 0.5)",e.fillRect(0,0,1,1);var t=e.getImageData(0,0,1,1);if(null===t)return!1;e.putImageData(t,1,0);var i=e.getImageData(1,0,1,1),n=i.data[0]===t.data[0]&&i.data[1]===t.data[1]&&i.data[2]===t.data[2]&&i.data[3]===t.data[3];return r.remove(this),n}()}return n}()},89357:(e,t,i)=>{var r=i(25892),n=i(84148),s=i(27919),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};e.exports=function(){if("function"==typeof importScripts)return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch(e){a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var e,t,i,o=!1;return a.webGL=function(){if(window.WebGLRenderingContext)try{var e=s.createWebGL(this),t=e.getContext("webgl")||e.getContext("experimental-webgl"),i=s.create2D(this);return o=i.getContext("2d",{willReadFrequently:!0}).createImageData(1,1).data instanceof Uint8ClampedArray,s.remove(e),s.remove(i),!!t}catch(e){}return!1}(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(a.getUserMedia=!1),!r.iOS&&(n.ie||n.firefox||n.chrome)&&(a.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),"u">typeof ArrayBuffer&&"u">typeof Uint8Array&&"u">typeof Uint32Array&&(t=new Uint8Array(e=new ArrayBuffer(4)),i=new Uint32Array(e),t[0]=161,t[1]=178,t[2]=195,t[3]=212,a.littleEndian=0xd4c3b2a1===i[0]||0xa1b2c3d4!==i[0]&&null),a.support32bit="u">typeof ArrayBuffer&&"u">typeof Uint8ClampedArray&&"u">typeof Int32Array&&null!==a.littleEndian&&o,a}()},91639:e=>{var t={available:!1,cancel:"",keyboard:!1,request:""};e.exports=function(){if("function"==typeof importScripts)return t;var e,i="Fullscreen",r="FullScreen",n=["request"+i,"request"+r,"webkitRequest"+i,"webkitRequest"+r,"msRequest"+i,"msRequest"+r,"mozRequest"+r,"mozRequest"+i];for(e=0;e<n.length;e++)if(document.documentElement[n[e]]){t.available=!0,t.request=n[e];break}var s=["cancel"+r,"exit"+i,"webkitCancel"+r,"webkitExit"+i,"msCancel"+r,"msExit"+i,"mozCancel"+r,"mozExit"+i];if(t.available){for(e=0;e<s.length;e++)if(document[s[e]]){t.cancel=s[e];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}()},31784:(e,t,i)=>{var r=i(84148),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),e.exports=n},25892:e=>{var t={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};e.exports=function(){if("function"==typeof importScripts)return t;var e=navigator.userAgent;/Windows/.test(e)?t.windows=!0:/Mac OS/.test(e)&&!/like Mac OS/.test(e)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(t.iOS=!0,t.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),t.iOSVersion=parseInt(RegExp.$1,10)):t.macOS=!0:/Android/.test(e)?t.android=!0:/Linux/.test(e)?t.linux=!0:/iP[ao]d|iPhone/i.test(e)?(t.iOS=!0,navigator.appVersion.match(/OS (\d+)/),t.iOSVersion=parseInt(RegExp.$1,10),t.iPhone=-1!==e.toLowerCase().indexOf("iphone"),t.iPad=-1!==e.toLowerCase().indexOf("ipad")):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?t.kindle=!0:/CrOS/.test(e)&&(t.chromeOS=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(t.android=!1,t.iOS=!1,t.macOS=!1,t.windows=!0,t.windowsPhone=!0);var i=/Silk/.test(e);return(t.windows||t.macOS||t.linux&&!i||t.chromeOS)&&(t.desktop=!0),(t.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(t.desktop=!1),navigator.standalone&&(t.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(t.cordova=!0),void 0!==window.ejecta&&(t.ejecta=!0)),t.node&&"object"==typeof n.versions&&(t.nodeWebkit=!!n.versions["node-webkit"],t.electron=!!n.versions.electron),/Crosswalk/.test(e)&&(t.crosswalk=!0),t.pixelRatio=window.devicePixelRatio||1,t}()},43267:(e,t,i)=>{var r=i(95540),n={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};e.exports=function(){if("function"==typeof importScripts)return n;var e=document.createElement("video"),t=!!e.canPlayType,i=/^no$/;try{t&&(e.canPlayType('video/ogg; codecs="theora"').replace(i,"")&&(n.ogg=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(i,"")&&(n.h264=!0,n.mp4=!0),e.canPlayType("video/x-m4v").replace(i,"")&&(n.m4v=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(i,"")&&(n.webm=!0),e.canPlayType('video/webm; codecs="vp9"').replace(i,"")&&(n.vp9=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(i,"")&&(n.hls=!0))}catch(e){}return e.parentNode&&e.parentNode.removeChild(e),n.getVideoURL=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i,s=r(e[t],"url",e[t]);if(0===s.indexOf("blob:"))return{url:s,type:""};if(i=0===s.indexOf("data:")?s.split(",")[0].match(/\/(.*?);/):s.match(/\.([a-zA-Z0-9]+)($|\?)/),n[i=r(e[t],"type",i?i[1]:"").toLowerCase()])return{url:s,type:i}}return null},n}()},82264:(e,t,i)=>{e.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(e,t,i)=>{var r=i(83419),n=new Float32Array(20),s=new r({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(e){return this._matrix.set(e),this._dirty=!0,this},reset:function(){var e=this._matrix;return e.fill(0),e[0]=1,e[6]=1,e[12]=1,e[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var e=this._data;return this._dirty&&(e.set(this._matrix),e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,this._dirty=!1),e},brightness:function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=e;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],t)},saturate:function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=2*e/3+1,r=-((i-1)*.5);return this.multiply([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],t)},desaturate:function(e){return void 0===e&&(e=!1),this.saturate(-1,e)},hue:function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=Math.cos(e=e/180*Math.PI),r=Math.sin(e);return this.multiply([.213+.787*i+-(.213*r),.715+-(.715*i)+-(.715*r),.072+-(.072*i)+.928*r,0,0,.213+-(.213*i)+.143*r,.715+.28500000000000003*i+.14*r,.072+-(.072*i)+-.283*r,0,0,.213+-(.213*i)+-(.787*r),.715+-(.715*i)+.715*r,.072+.928*i+.072*r,0,0,0,0,0,1,0],t)},grayscale:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!1),this.saturate(-e,t)},blackWhite:function(e){return void 0===e&&(e=!1),this.multiply(s.BLACK_WHITE,e)},contrast:function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var i=e+1,r=-.5*(i-1);return this.multiply([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],t)},negative:function(e){return void 0===e&&(e=!1),this.multiply(s.NEGATIVE,e)},desaturateLuminance:function(e){return void 0===e&&(e=!1),this.multiply(s.DESATURATE_LUMINANCE,e)},sepia:function(e){return void 0===e&&(e=!1),this.multiply(s.SEPIA,e)},night:function(e,t){return void 0===e&&(e=.1),void 0===t&&(t=!1),this.multiply([-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],t)},lsd:function(e){return void 0===e&&(e=!1),this.multiply(s.LSD,e)},brown:function(e){return void 0===e&&(e=!1),this.multiply(s.BROWN,e)},vintagePinhole:function(e){return void 0===e&&(e=!1),this.multiply(s.VINTAGE,e)},kodachrome:function(e){return void 0===e&&(e=!1),this.multiply(s.KODACHROME,e)},technicolor:function(e){return void 0===e&&(e=!1),this.multiply(s.TECHNICOLOR,e)},polaroid:function(e){return void 0===e&&(e=!1),this.multiply(s.POLAROID,e)},shiftToBGR:function(e){return void 0===e&&(e=!1),this.multiply(s.SHIFT_BGR,e)},multiply:function(e,t){void 0===t&&(t=!1),t||this.reset();var i=this._matrix;return n.set(i),i.set([n[0]*e[0]+n[1]*e[5]+n[2]*e[10]+n[3]*e[15],n[0]*e[1]+n[1]*e[6]+n[2]*e[11]+n[3]*e[16],n[0]*e[2]+n[1]*e[7]+n[2]*e[12]+n[3]*e[17],n[0]*e[3]+n[1]*e[8]+n[2]*e[13]+n[3]*e[18],n[0]*e[4]+n[1]*e[9]+n[2]*e[14]+n[3]*e[19]+n[4],n[5]*e[0]+n[6]*e[5]+n[7]*e[10]+n[8]*e[15],n[5]*e[1]+n[6]*e[6]+n[7]*e[11]+n[8]*e[16],n[5]*e[2]+n[6]*e[7]+n[7]*e[12]+n[8]*e[17],n[5]*e[3]+n[6]*e[8]+n[7]*e[13]+n[8]*e[18],n[5]*e[4]+n[6]*e[9]+n[7]*e[14]+n[8]*e[19]+n[9],n[10]*e[0]+n[11]*e[5]+n[12]*e[10]+n[13]*e[15],n[10]*e[1]+n[11]*e[6]+n[12]*e[11]+n[13]*e[16],n[10]*e[2]+n[11]*e[7]+n[12]*e[12]+n[13]*e[17],n[10]*e[3]+n[11]*e[8]+n[12]*e[13]+n[13]*e[18],n[10]*e[4]+n[11]*e[9]+n[12]*e[14]+n[13]*e[19]+n[14],n[15]*e[0]+n[16]*e[5]+n[17]*e[10]+n[18]*e[15],n[15]*e[1]+n[16]*e[6]+n[17]*e[11]+n[18]*e[16],n[15]*e[2]+n[16]*e[7]+n[17]*e[12]+n[18]*e[17],n[15]*e[3]+n[16]*e[8]+n[17]*e[13]+n[18]*e[18],n[15]*e[4]+n[16]*e[9]+n[17]*e[14]+n[18]*e[19]+n[19]]),this._dirty=!0,this}});s.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],s.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],s.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],s.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],s.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],s.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],s.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],s.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],s.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],s.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],s.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e.exports=s},51767:(e,t,i)=>{var r=i(83419),n=i(29747);e.exports=new r({initialize:function(e,t,i){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(e,t,i)},set:function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this._rgb=[e,t,i],this.onChange(),this},equals:function(e,t,i){var r=this._rgb;return r[0]===e&&r[1]===t&&r[2]===i},onChange:function(){this.dirty=!0;var e=this._rgb;this.onChangeCallback.call(this,e[0],e[1],e[2])},r:{get:function(){return this._rgb[0]},set:function(e){this._rgb[0]=e,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(e){this._rgb[1]=e,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(e){this._rgb[2]=e,this.onChange()}},destroy:function(){this.onChangeCallback=null}})},60461:e=>{e.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},54312:(e,t,i)=>{var r=i(62235),n=i(35893),s=i(86327),a=i(88417);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)+i),s(e,r(t)+o),e}},46768:(e,t,i)=>{var r=i(62235),n=i(26541),s=i(86327),a=i(385);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)-i),s(e,r(t)+o),e}},35827:(e,t,i)=>{var r=i(62235),n=i(54380),s=i(86327),a=i(40136);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)+i),s(e,r(t)+o),e}},46871:(e,t,i)=>{var r=i(66786),n=i(35893),s=i(7702);e.exports=function(e,t,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),r(e,n(t)+i,s(t)+a),e}},5198:(e,t,i)=>{var r=i(7702),n=i(26541),s=i(20786),a=i(385);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)-i),s(e,r(t)+o),e}},11879:(e,t,i)=>{var r=i(60461),n=[];n[r.BOTTOM_CENTER]=i(54312),n[r.BOTTOM_LEFT]=i(46768),n[r.BOTTOM_RIGHT]=i(35827),n[r.CENTER]=i(46871),n[r.LEFT_CENTER]=i(5198),n[r.RIGHT_CENTER]=i(80503),n[r.TOP_CENTER]=i(89698),n[r.TOP_LEFT]=i(922),n[r.TOP_RIGHT]=i(21373),n[r.LEFT_BOTTOM]=n[r.BOTTOM_LEFT],n[r.LEFT_TOP]=n[r.TOP_LEFT],n[r.RIGHT_BOTTOM]=n[r.BOTTOM_RIGHT],n[r.RIGHT_TOP]=n[r.TOP_RIGHT],e.exports=function(e,t,i,r,s){return n[i](e,t,r,s)}},80503:(e,t,i)=>{var r=i(7702),n=i(54380),s=i(20786),a=i(40136);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)+i),s(e,r(t)+o),e}},89698:(e,t,i)=>{var r=i(35893),n=i(17717),s=i(88417),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,r(t)+i),a(e,n(t)-o),e}},922:(e,t,i)=>{var r=i(26541),n=i(17717),s=i(385),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,r(t)-i),a(e,n(t)-o),e}},21373:(e,t,i)=>{var r=i(54380),n=i(17717),s=i(40136),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,r(t)+i),a(e,n(t)-o),e}},91660:(e,t,i)=>{e.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(e,t,i)=>{var r=i(60461),n=i(79291),s={In:i(91660),To:i(16694)};e.exports=s=n(!1,s,r)},21578:(e,t,i)=>{var r=i(62235),n=i(35893),s=i(88417),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,n(t)+i),a(e,r(t)+o),e}},10210:(e,t,i)=>{var r=i(62235),n=i(26541),s=i(385),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,n(t)-i),a(e,r(t)+o),e}},82341:(e,t,i)=>{var r=i(62235),n=i(54380),s=i(40136),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,n(t)+i),a(e,r(t)+o),e}},87958:(e,t,i)=>{var r=i(62235),n=i(26541),s=i(86327),a=i(40136);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)-i),s(e,r(t)+o),e}},40080:(e,t,i)=>{var r=i(7702),n=i(26541),s=i(20786),a=i(40136);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)-i),s(e,r(t)+o),e}},88466:(e,t,i)=>{var r=i(26541),n=i(17717),s=i(40136),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,r(t)-i),a(e,n(t)-o),e}},38829:(e,t,i)=>{var r=i(60461),n=[];n[r.BOTTOM_CENTER]=i(21578),n[r.BOTTOM_LEFT]=i(10210),n[r.BOTTOM_RIGHT]=i(82341),n[r.LEFT_BOTTOM]=i(87958),n[r.LEFT_CENTER]=i(40080),n[r.LEFT_TOP]=i(88466),n[r.RIGHT_BOTTOM]=i(19211),n[r.RIGHT_CENTER]=i(34609),n[r.RIGHT_TOP]=i(48741),n[r.TOP_CENTER]=i(49440),n[r.TOP_LEFT]=i(81288),n[r.TOP_RIGHT]=i(61323),e.exports=function(e,t,i,r,s){return n[i](e,t,r,s)}},19211:(e,t,i)=>{var r=i(62235),n=i(54380),s=i(86327),a=i(385);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)+i),s(e,r(t)+o),e}},34609:(e,t,i)=>{var r=i(7702),n=i(54380),s=i(20786),a=i(385);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,n(t)+i),s(e,r(t)+o),e}},48741:(e,t,i)=>{var r=i(54380),n=i(17717),s=i(385),a=i(66737);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(e,r(t)+i),a(e,n(t)-o),e}},49440:(e,t,i)=>{var r=i(35893),n=i(17717),s=i(86327),a=i(88417);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,r(t)+i),s(e,n(t)-o),e}},81288:(e,t,i)=>{var r=i(26541),n=i(17717),s=i(86327),a=i(385);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,r(t)-i),s(e,n(t)-o),e}},61323:(e,t,i)=>{var r=i(54380),n=i(17717),s=i(86327),a=i(40136);e.exports=function(e,t,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(e,r(t)+i),s(e,n(t)-o),e}},16694:(e,t,i)=>{e.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(e,t,i)=>{var r=i(88417),n=i(20786);e.exports=function(e,t,i){return r(e,t),n(e,i)}},62235:e=>{e.exports=function(e){return e.y+e.height-e.height*e.originY}},72873:(e,t,i)=>{var r=i(62235),n=i(26541),s=i(54380),a=i(17717),o=i(87841);e.exports=function(e,t){void 0===t&&(t=new o);var i=n(e),h=a(e);return t.x=i,t.y=h,t.width=s(e)-i,t.height=r(e)-h,t}},35893:e=>{e.exports=function(e){return e.x-e.width*e.originX+.5*e.width}},7702:e=>{e.exports=function(e){return e.y-e.height*e.originY+.5*e.height}},26541:e=>{e.exports=function(e){return e.x-e.width*e.originX}},87431:e=>{e.exports=function(e){return e.width*e.originX}},46928:e=>{e.exports=function(e){return e.height*e.originY}},54380:e=>{e.exports=function(e){return e.x+e.width-e.width*e.originX}},17717:e=>{e.exports=function(e){return e.y-e.height*e.originY}},86327:e=>{e.exports=function(e,t){return e.y=t-e.height+e.height*e.originY,e}},88417:e=>{e.exports=function(e,t){var i=e.width*e.originX;return e.x=t+i-.5*e.width,e}},20786:e=>{e.exports=function(e,t){var i=e.height*e.originY;return e.y=t+i-.5*e.height,e}},385:e=>{e.exports=function(e,t){return e.x=t+e.width*e.originX,e}},40136:e=>{e.exports=function(e,t){return e.x=t-e.width+e.width*e.originX,e}},66737:e=>{e.exports=function(e,t){return e.y=t+e.height*e.originY,e}},58724:(e,t,i)=>{e.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:e=>{e.exports={setCrisp:function(e){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(t){e.style["image-rendering"]=t}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}}},27919:(e,t,i)=>{var r,n,s,a=i(8054),o=i(68703),h=[],c=!1;r=function(e,t,i,r,s){void 0===t&&(t=1),void 0===i&&(i=1),void 0===r&&(r=a.CANVAS),void 0===s&&(s=!1);var l,d=n(r);return null===d?(d={parent:e,canvas:document.createElement("canvas"),type:r},r===a.CANVAS&&h.push(d)):d.parent=e,l=d.canvas,s&&(d.parent=l),l.width=t,l.height=i,c&&r===a.CANVAS&&o.disable(l.getContext("2d",{willReadFrequently:!1})),l},n=function(e){if(void 0===e&&(e=a.CANVAS),e===a.WEBGL)return null;for(var t=0;t<h.length;t++){var i=h[t];if(!i.parent&&i.type===e)return i}return null},s=function(){var e=0;return h.forEach(function(t){t.parent&&e++}),e},e.exports={create2D:function(e,t,i){return r(e,t,i,a.CANVAS)},create:r,createWebGL:function(e,t,i){return r(e,t,i,a.WEBGL)},disableSmoothing:function(){c=!0},enableSmoothing:function(){c=!1},first:n,free:function(){return h.length-s()},pool:h,remove:function(e){var t=e instanceof HTMLCanvasElement;h.forEach(function(i){(t&&i.canvas===e||!t&&i.parent===e)&&(i.parent=null,i.canvas.width=1,i.canvas.height=1)})},total:s}},68703:e=>{var t,i="";e.exports={disable:function(e){return""===i&&(i=t(e)),i&&(e[i]=!1),e},enable:function(e){return""===i&&(i=t(e)),i&&(e[i]=!0),e},getPrefix:t=function(e){for(var t=["i","webkitI","msI","mozI","oI"],i=0;i<t.length;i++){var r=t[i]+"mageSmoothingEnabled";if(r in e)return r}return null},isEnabled:function(e){return null!==i?e[i]:null}}},65208:e=>{e.exports=function(e,t){return void 0===t&&(t="none"),e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e}},91610:e=>{e.exports=function(e,t){return void 0===t&&(t="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(i){e.style[i+"user-select"]=t}),e.style["-webkit-touch-callout"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e}},26253:(e,t,i)=>{e.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(e,t,i)=>{var r=i(83419),n=i(37589),s=i(1e3),a=i(7537),o=i(87837),h=new r({initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(e,t,i,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(e,t,i,r,n){return void 0===r&&(r=255),void 0===n&&(n=!0),this._locked=!0,this.red=e,this.green=t,this.blue=i,this.alpha=r,this._locked=!1,this.update(n)},setGLTo:function(e,t,i,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=e,this.greenGL=t,this.blueGL=i,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(e){return this._locked=!0,this.red=e.r,this.green=e.g,this.blue=e.b,e.hasOwnProperty("a")&&(this.alpha=e.a),this._locked=!1,this.update(!0)},setFromHSV:function(e,t,i){return a(e,t,i,this)},update:function(e){if(void 0===e&&(e=!1),this._locked)return this;var t=this.r,i=this.g,r=this.b,a=this.a;return this._color=n(t,i,r),this._color32=s(t,i,r,a),this._rgba="rgba("+t+","+i+","+r+","+a/255+")",e&&o(t,i,r,this),this},updateHSV:function(){return o(this.r,this.g,this.b,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(e){return this.setTo(e,e,e)},random:function(e,t){void 0===e&&(e=0),void 0===t&&(t=255);var i=Math.floor(e+Math.random()*(t-e)),r=Math.floor(e+Math.random()*(t-e)),n=Math.floor(e+Math.random()*(t-e));return this.setTo(i,r,n)},randomGray:function(e,t){void 0===e&&(e=0),void 0===t&&(t=255);var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function(e){return this.s+=e/100,this},desaturate:function(e){return this.s-=e/100,this},lighten:function(e){return this.v+=e/100,this},darken:function(e){return this.v-=e/100,this},brighten:function(e){var t=this.r,i=this.g,r=this.b;return t=Math.max(0,Math.min(255,t-Math.round(-(e/100*255)))),i=Math.max(0,Math.min(255,i-Math.round(-(e/100*255)))),r=Math.max(0,Math.min(255,r-Math.round(-(e/100*255)))),this.setTo(t,i,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(e){this.gl[0]=Math.min(Math.abs(e),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(e){this.gl[1]=Math.min(Math.abs(e),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(e){this.gl[2]=Math.min(Math.abs(e),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(e){this.gl[3]=Math.min(Math.abs(e),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(e){e=Math.floor(Math.abs(e)),this.r=Math.min(e,255),this.gl[0]=e/255,this.update(!0)}},green:{get:function(){return this.g},set:function(e){e=Math.floor(Math.abs(e)),this.g=Math.min(e,255),this.gl[1]=e/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(e){e=Math.floor(Math.abs(e)),this.b=Math.min(e,255),this.gl[2]=e/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(e){e=Math.floor(Math.abs(e)),this.a=Math.min(e,255),this.gl[3]=e/255,this.update()}},h:{get:function(){return this._h},set:function(e){this._h=e,a(e,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(e){this._s=e,a(this._h,e,this._v,this)}},v:{get:function(){return this._v},set:function(e){this._v=e,a(this._h,this._s,e,this)}}});e.exports=h},92728:(e,t,i)=>{var r=i(37589);e.exports=function(e){void 0===e&&(e=1024);var t,i=[],n=255,s=0,a=0;for(t=0;t<=255;t++)i.push({r:n,g:t,b:a,color:r(n,t,a)});for(t=255,s=255;t>=0;t--)i.push({r:t,g:s,b:a,color:r(t,s,a)});for(t=0,n=0;t<=255;t++,s--)i.push({r:n,g:s,b:t,color:r(n,s,t)});for(t=0,s=0,a=255;t<=255;t++,a--,n++)i.push({r:n,g:s,b:a,color:r(n,s,a)});if(1024===e)return i;var o=[],h=0,c=1024/e;for(t=0;t<e;t++)o.push(i[Math.floor(h)]),h+=c;return o}},91588:e=>{e.exports=function(e){var t={r:e>>16&255,g:e>>8&255,b:255&e,a:255};return e>0xffffff&&(t.a=e>>>24),t}},62957:e=>{e.exports=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},37589:e=>{e.exports=function(e,t,i){return e<<16|t<<8|i}},1e3:e=>{e.exports=function(e,t,i,r){return r<<24|e<<16|t<<8|i}},62183:(e,t,i)=>{var r=i(40987),n=i(89528);e.exports=function(e,t,i){var s=i,a=i,o=i;if(0!==t){var h=i<.5?i*(1+t):i+t-i*t,c=2*i-h;s=n(c,h,e+1/3),a=n(c,h,e),o=n(c,h,e-1/3)}return new r().setGLTo(s,a,o,1)}},27939:(e,t,i)=>{var r=i(7537);e.exports=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);for(var i=[],n=0;n<=359;n++)i.push(r(n/359,e,t));return i}},7537:(e,t,i)=>{var r=i(37589);function n(e,t,i,r){var n=(e+6*t)%6;return Math.round(255*(r-r*i*Math.max(0,Math.min(n,4-n,1))))}e.exports=function(e,t,i,s){void 0===t&&(t=1),void 0===i&&(i=1);var a=n(5,e,t,i),o=n(3,e,t,i),h=n(1,e,t,i);return s?s.setTo?s.setTo(a,o,h,s.alpha,!0):(s.r=a,s.g=o,s.b=h,s.color=r(a,o,h),s):{r:a,g:o,b:h,color:r(a,o,h)}}},70238:(e,t,i)=>{var r=i(40987);e.exports=function(e){var t=new r;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,r){return t+t+i+i+r+r});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var n=parseInt(i[1],16),s=parseInt(i[2],16),a=parseInt(i[3],16);t.setTo(n,s,a)}return t}},89528:e=>{e.exports=function(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}},30100:(e,t,i)=>{var r=i(40987),n=i(90664);e.exports=function(e){var t=n(e);return new r(t.r,t.g,t.b,t.a)}},90664:e=>{e.exports=function(e){return e>0xffffff?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:255&e}:{a:255,r:e>>16&255,g:e>>8&255,b:255&e}}},13699:(e,t,i)=>{var r=i(28915),n=i(37589),s=function(e,t,i,s,a,o,h,c){void 0===h&&(h=100),void 0===c&&(c=0);var l=c/h,d=r(e,s,l),u=r(t,a,l),f=r(i,o,l);return{r:d,g:u,b:f,a:255,color:n(d,u,f)}};e.exports={RGBWithRGB:s,ColorWithRGB:function(e,t,i,r,n,a){return void 0===n&&(n=100),void 0===a&&(a=0),s(e.r,e.g,e.b,t,i,r,n,a)},ColorWithColor:function(e,t,i,r){return void 0===i&&(i=100),void 0===r&&(r=0),s(e.r,e.g,e.b,t.r,t.g,t.b,i,r)}}},68957:(e,t,i)=>{var r=i(40987);e.exports=function(e){return new r(e.r,e.g,e.b,e.a)}},87388:(e,t,i)=>{var r=i(40987);e.exports=function(e){var t=new r,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var n=parseInt(i[1],10),s=parseInt(i[2],10),a=parseInt(i[3],10),o=void 0!==i[4]?parseFloat(i[4]):1;t.setTo(n,s,a,255*o)}return t}},87837:e=>{e.exports=function(e,t,i,r){void 0===r&&(r={h:0,s:0,v:0});var n=Math.min(e/=255,t/=255,i/=255),s=Math.max(e,t,i),a=s-n,o=0,h=0===s?0:a/s;return s!==n&&(s===e?o=(t-i)/a+6*(t<i):s===t?o=(i-e)/a+2:s===i&&(o=(e-t)/a+4),o/=6),r.hasOwnProperty("_h")?(r._h=o,r._s=h,r._v=s):(r.h=o,r.s=h,r.v=s),r}},75723:(e,t,i)=>{var r=i(62957);e.exports=function(e,t,i,n,s){return(void 0===n&&(n=255),void 0===s&&(s="#"),"#"===s)?"#"+(0x1000000+(e<<16)+(t<<8)+i).toString(16).slice(1,7):"0x"+r(n)+r(e)+r(t)+r(i)}},85386:(e,t,i)=>{var r=i(30976),n=i(40987);e.exports=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=255),new n(r(e,t),r(e,t),r(e,t))}},80333:(e,t,i)=>{var r=i(70238),n=i(30100),s=i(68957),a=i(87388);e.exports=function(e){switch(typeof e){case"string":if("rgb"===e.substr(0,3).toLowerCase())return a(e);return r(e);case"number":return n(e);case"object":return s(e)}}},3956:(e,t,i)=>{var r=i(40987);r.ColorSpectrum=i(92728),r.ColorToRGBA=i(91588),r.ComponentToHex=i(62957),r.GetColor=i(37589),r.GetColor32=i(1e3),r.HexStringToColor=i(70238),r.HSLToColor=i(62183),r.HSVColorWheel=i(27939),r.HSVToRGB=i(7537),r.HueToComponent=i(89528),r.IntegerToColor=i(30100),r.IntegerToRGB=i(90664),r.Interpolate=i(13699),r.ObjectToColor=i(68957),r.RandomRGB=i(85386),r.RGBStringToColor=i(87388),r.RGBToHSV=i(87837),r.RGBToString=i(75723),r.ValueToColor=i(80333),e.exports=r},27460:(e,t,i)=>{e.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(e,t,i)=>{var r=i(83419),n=i(39429),s=new r({initialize:function(e,t,i,r,n,s){t||(t=e.sys.make.image({x:i,y:r,key:n,frame:s,add:!1})),this.bitmapMask=t,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,t,i)},postRenderWebGL:function(e,t,i){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,t,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});n.register("bitmapMask",function(e,t,i,r,n){return new s(this.scene,e,t,i,r,n)}),e.exports=s},80661:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t){this.geometryMask=t,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(e){return this.geometryMask=e,this},setInvertAlpha:function(e){return void 0===e&&(e=!0),this.invertAlpha=e,this},preRenderWebGL:function(e,t,i){var r=e.gl;e.flush(),0===e.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),e.maskCount=0),e.currentCameraMask.mask!==this&&(e.currentMask.mask=this),e.maskStack.push({mask:this,camera:i}),this.applyStencil(e,i,!0),e.maskCount++},applyStencil:function(e,t,i){var r=e.gl,n=this.geometryMask,s=e.maskCount;r.colorMask(!1,!1,!1,!1),i?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR),s++):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=s,n.renderWebGL(e,n,t),e.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,s,255):r.stencilFunc(r.EQUAL,s,255)},postRenderWebGL:function(e){var t=e.gl;e.maskStack.pop(),e.maskCount--,e.flush();var i=e.currentMask;if(0===e.maskStack.length)i.mask=null,t.disable(t.STENCIL_TEST);else{var r=e.maskStack[e.maskStack.length-1];r.mask.applyStencil(e,r.camera,!1),e.currentCameraMask.mask!==r.mask?(i.mask=r.mask,i.camera=r.camera):i.mask=null}},preRenderCanvas:function(e,t,i){var r=this.geometryMask;e.currentContext.save(),r.renderCanvas(e,r,i,null,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()},destroy:function(){this.geometryMask=null}})},69781:(e,t,i)=>{e.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r){t&&""!==t||(t="precision mediump float;\nuniform vec2 resolution;\nvarying vec2 fragCoord;\nvoid main () {\n    vec2 uv = fragCoord / resolution.xy;\n    gl_FragColor = vec4(uv.xyx, 1.0);\n}"),i&&""!==i||(i="precision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nvarying vec2 fragCoord;\nvarying vec2 outTexCoord;\nvoid main () {\n   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);\n   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);\n   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);\n}"),void 0===r&&(r=null),this.key=e,this.fragmentSrc=t,this.vertexSrc=i,this.uniforms=r}})},40366:e=>{e.exports=function(e,t){var i;if(t)"string"==typeof t?i=document.getElementById(t):"object"==typeof t&&1===t.nodeType&&(i=t);else if(e.parentElement||null===t)return e;return i||(i=document.body),i.appendChild(e),e}},83719:(e,t,i)=>{var r=i(40366);e.exports=function(e){var t=e.config;if(t.parent&&t.domCreateContainer){var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0; position: absolute; overflow: hidden;","pointer-events: "+t.domPointerEvents+";","transform: scale(1); transform-origin: left top;"].join(" "),e.domContainer=i,r(i,t.parent)}}},57264:(e,t,i)=>{var r=i(25892);e.exports=function(e){if("complete"===document.readyState||"interactive"===document.readyState)return void e();var t=function(){document.removeEventListener("deviceready",t,!0),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0),e()};document.body?r.cordova?document.addEventListener("deviceready",t,!1):(document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)):window.setTimeout(t,20)}},57811:e=>{e.exports=function(e){if(!e)return window.innerHeight;var t=Math.abs(window.orientation),i={w:0,h:0},r=document.createElement("div");return(r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),i.w=90===t?r.offsetHeight:window.innerWidth,i.h=90===t?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation))?i.h:i.w}},45818:(e,t,i)=>{var r=i(13560);e.exports=function(e,t){var i=window.screen,n=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return n&&"string"==typeof n.type?n.type:"string"==typeof n?n:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:t>e?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},74403:e=>{e.exports=function(e){var t;return""!==e&&("string"==typeof e?t=document.getElementById(e):e&&1===e.nodeType&&(t=e)),t||(t=document.body),t}},56836:e=>{e.exports=function(e){var t="";try{window.DOMParser?t=new DOMParser().parseFromString(e,"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM")).loadXML(e)}catch(e){t=null}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length?t:null}},35846:e=>{e.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},43092:(e,t,i)=>{var r=i(83419),n=i(29747);e.exports=new r({initialize:function(){this.isRunning=!1,this.callback=n,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var e=this;this.step=function t(i){e.callback(i),e.isRunning&&(e.timeOutID=window.requestAnimationFrame(t))},this.stepTimeout=function t(){e.isRunning&&(e.timeOutID=window.setTimeout(t,e.delay)),e.callback(window.performance.now())}},start:function(e,t,i){this.isRunning||(this.callback=e,this.isSetTimeOut=t,this.delay=i,this.isRunning=!0,this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}})},84902:(e,t,i)=>{e.exports={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)}},47565:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(37277),a=new r({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",a,"events"),e.exports=a},93055:(e,t,i)=>{e.exports={EventEmitter:i(47565)}},20122:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t){void 0===t&&(t=1),n.call(this,s.BARREL,e),this.amount=t}})},32251:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h){void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=1),void 0===o&&(o=1),void 0===h&&(h=4),n.call(this,s.BLOOM,e),this.steps=h,this.offsetX=i,this.offsetY=r,this.blurStrength=a,this.strength=o,this.glcolor=[1,1,1],null!=t&&(this.color=t)},color:{get:function(){var e=this.glcolor;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}}})},9047:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h){void 0===t&&(t=0),void 0===i&&(i=2),void 0===r&&(r=2),void 0===a&&(a=1),void 0===h&&(h=4),n.call(this,s.BLUR,e),this.quality=t,this.x=i,this.y=r,this.steps=h,this.strength=a,this.glcolor=[1,1,1],null!=o&&(this.color=o)},color:{get:function(){var e=this.glcolor;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}}})},27885:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h,c){void 0===t&&(t=.5),void 0===i&&(i=1),void 0===r&&(r=.2),void 0===a&&(a=!1),void 0===o&&(o=1),void 0===h&&(h=1),void 0===c&&(c=1),n.call(this,s.BOKEH,e),this.radius=t,this.amount=i,this.contrast=r,this.isTiltShift=a,this.strength=c,this.blurX=o,this.blurY=h}})},12578:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o){void 0===t&&(t=8),void 0===a&&(a=1),void 0===o&&(o=.005),n.call(this,s.CIRCLE,e),this.scale=a,this.feather=o,this.thickness=t,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=i&&(this.color=i),null!=r&&(this.backgroundColor=r)},color:{get:function(){var e=this.glcolor;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}},backgroundColor:{get:function(){var e=this.glcolor2;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor2;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(e){this.glcolor2[3]=e}}})},15802:(e,t,i)=>{var r=i(83419),n=i(89422),s=i(14811);e.exports=new r({Extends:n,initialize:function(e){n.call(this),this.type=s.COLOR_MATRIX,this.gameObject=e,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}})},72898:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t){this.type=e,this.gameObject=t,this.active=!0},setActive:function(e){return this.active=e,this},destroy:function(){this.gameObject=null,this.active=!1}})},44553:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r){void 0===t&&(t="__WHITE"),void 0===i&&(i=.005),void 0===r&&(r=.005),n.call(this,s.DISPLACEMENT,e),this.x=i,this.y=r,this.glTexture,this.setTexture(t)},setTexture:function(e){var t=this.gameObject.scene.sys.textures.getFrame(e);return t&&(this.glTexture=t.glTexture),this}})},68531:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a){void 0===i&&(i=4),void 0===r&&(r=0),void 0===a&&(a=!1),n.call(this,s.GLOW,e),this.outerStrength=i,this.innerStrength=r,this.knockout=a,this.glcolor=[1,1,1,1],void 0!==t&&(this.color=t)},color:{get:function(){var e=this.glcolor;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}}})},37102:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h,c,l){void 0===r&&(r=.2),void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===l&&(l=0),n.call(this,s.GRADIENT,e),this.alpha=r,this.size=l,this.fromX=a,this.fromY=o,this.toX=h,this.toY=c,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=t&&(this.color1=t),null!=i&&(this.color2=i)},color1:{get:function(){var e=this.glcolor1;return(e[0]<<16)+(e[1]<<8)+(0|e[2])},set:function(e){var t=this.glcolor1;t[0]=e>>16&255,t[1]=e>>8&255,t[2]=255&e}},color2:{get:function(){var e=this.glcolor2;return(e[0]<<16)+(e[1]<<8)+(0|e[2])},set:function(e){var t=this.glcolor2;t[0]=e>>16&255,t[1]=e>>8&255,t[2]=255&e}}})},86886:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t){void 0===t&&(t=1),n.call(this,s.PIXELATE,e),this.amount=t}})},92322:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h,c){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=.1),void 0===a&&(a=1),void 0===h&&(h=6),void 0===c&&(c=1),n.call(this,s.SHADOW,e),this.x=t,this.y=i,this.decay=r,this.power=a,this.glcolor=[0,0,0,1],this.samples=h,this.intensity=c,void 0!==o&&(this.color=o)},color:{get:function(){var e=this.glcolor;return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},set:function(e){var t=this.glcolor;t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255}}})},39563:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a){void 0===t&&(t=.5),void 0===i&&(i=.5),void 0===r&&(r=3),void 0===a&&(a=!1),n.call(this,s.SHINE,e),this.speed=t,this.lineWidth=i,this.gradient=r,this.reveal=a}})},56448:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a){void 0===t&&(t=.5),void 0===i&&(i=.5),void 0===r&&(r=.5),void 0===a&&(a=.5),n.call(this,s.VIGNETTE,e),this.x=t,this.y=i,this.radius=r,this.strength=a}})},38433:(e,t,i)=>{var r=i(83419),n=i(72898),s=i(14811);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a){void 0===t&&(t=.1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=!1),n.call(this,s.WIPE,e),this.progress=0,this.wipeWidth=t,this.direction=i,this.axis=r,this.reveal=a}})},14811:e=>{e.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},66064:(e,t,i)=>{var r=i(79291),n=i(14811),s={Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)};e.exports=s=r(!1,s,n)},25305:(e,t,i)=>{var r=i(10312),n=i(23568);e.exports=function(e,t,i){t.x=n(i,"x",0),t.y=n(i,"y",0),t.depth=n(i,"depth",0),t.flipX=n(i,"flipX",!1),t.flipY=n(i,"flipY",!1);var s=n(i,"scale",null);"number"==typeof s?t.setScale(s):null!==s&&(t.scaleX=n(s,"x",1),t.scaleY=n(s,"y",1));var a=n(i,"scrollFactor",null);"number"==typeof a?t.setScrollFactor(a):null!==a&&(t.scrollFactorX=n(a,"x",1),t.scrollFactorY=n(a,"y",1)),t.rotation=n(i,"rotation",0);var o=n(i,"angle",null);null!==o&&(t.angle=o),t.alpha=n(i,"alpha",1);var h=n(i,"origin",null);if("number"==typeof h)t.setOrigin(h);else if(null!==h){var c=n(h,"x",.5),l=n(h,"y",.5);t.setOrigin(c,l)}return t.blendMode=n(i,"blendMode",r.NORMAL),t.visible=n(i,"visible",!0),n(i,"add",!0)&&e.sys.displayList.add(t),t.preUpdate&&e.sys.updateList.add(t),t}},13059:(e,t,i)=>{var r=i(23568);e.exports=function(e,t){var i=r(t,"anims",null);if(null===i)return e;if("string"==typeof i)e.anims.play(i);else if("object"==typeof i){var n=e.anims,s=r(i,"key",void 0);if(s){var a=r(i,"startFrame",void 0),o=r(i,"delay",0),h=r(i,"repeat",0),c=r(i,"repeatDelay",0),l=r(i,"yoyo",!1),d=r(i,"play",!1),u=r(i,"delayedPlay",0),f={key:s,delay:o,repeat:h,repeatDelay:c,yoyo:l,startFrame:a};d?n.play(f):u>0?n.playAfterDelay(f,u):n.load(f)}}return e}},8050:(e,t,i)=>{var r=i(83419),n=i(73162),s=i(37277),a=i(51708),o=i(44594),h=i(19186),c=new r({Extends:n,initialize:function(e){n.call(this,e),this.sortChildrenFlag=!1,this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(e){e.displayList&&e.displayList!==this&&e.removeFromDisplayList(),e.parentContainer&&e.parentContainer.remove(e),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(a.ADDED_TO_SCENE,e,this.scene),this.events.emit(o.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(a.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,e,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},shutdown:function(){for(var e=this.list,t=e.length;t--;)e[t]&&e[t].destroy(!0);e.length=0,this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",c,"displayList"),e.exports=c},95643:(e,t,i)=>{var r=i(83419),n=i(53774),s=i(45893),a=i(50792),o=i(51708),h=i(44594),c=new r({Extends:a,initialize:function(e,t){a.call(this),this.scene=e,this.displayList=null,this.type=t,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),e.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(e,t){return this.data||(this.data=new s(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new s(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new s(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new s(this)),this.data.get(e)},setInteractive:function(e,t,i){return this.scene.sys.input.enable(this,e,t,i),this},disableInteractive:function(e){return void 0===e&&(e=!1),this.scene.sys.input.disable(this,e),this},removeInteractive:function(e){return void 0===e&&(e=!1),this.scene.sys.input.clear(this),e&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(e){return!(!(!this.displayList||!this.displayList.active||this.displayList.willRender(e))||c.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t;)if(i.unshift(t.getIndex(e)),e=t,t.parentContainer)t=t.parentContainer;else break;return this.displayList?i.unshift(this.displayList.getIndex(e)):i.unshift(this.scene.sys.displayList.getIndex(e)),i},addToDisplayList:function(e){return void 0===e&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),e.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e&&e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var e=null;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e},destroy:function(e){this.scene&&!this.ignoreDestroy&&(void 0===e&&(e=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,e),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,e.exports=c},44603:(e,t,i)=>{var r=i(83419),n=i(37277),s=i(44594),a=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(e,t){a.prototype.hasOwnProperty(e)||(a.prototype[e]=t)},a.remove=function(e){a.prototype.hasOwnProperty(e)&&delete a.prototype[e]},n.register("GameObjectCreator",a,"make"),e.exports=a},39429:(e,t,i)=>{var r=i(83419),n=i(37277),s=i(44594),a=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(e,t){a.prototype.hasOwnProperty(e)||(a.prototype[e]=t)},a.remove=function(e){a.prototype.hasOwnProperty(e)&&delete a.prototype[e]},n.register("GameObjectFactory",a,"add"),e.exports=a},91296:(e,t,i)=>{var r=i(61340),n=new r,s=new r,a=new r,o={camera:n,sprite:s,calc:a};e.exports=function(e,t,i){return s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),n.copyFrom(t.matrix),i?(n.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),s.e=e.x,s.f=e.y):(s.e-=t.scrollX*e.scrollFactorX,s.f-=t.scrollY*e.scrollFactorY),n.multiply(s,a),o}},45027:(e,t,i)=>{var r=i(83419),n=i(25774),s=i(37277),a=i(44594),o=new r({Extends:n,initialize:function(e){n.call(this),this.checkQueue=!0,this.scene=e,this.systems=e.sys,e.sys.events.once(a.BOOT,this.boot,this),e.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(a.PRE_UPDATE,this.update,this),e.on(a.UPDATE,this.sceneUpdate,this),e.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,t){for(var i=this._active,r=i.length,n=0;n<r;n++){var s=i[n];s.active&&s.preUpdate.call(s,e,t)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var t=this.systems.events;t.off(a.PRE_UPDATE,this.update,this),t.off(a.UPDATE,this.sceneUpdate,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",o,"updateList"),e.exports=o},3217:e=>{e.exports=function(e,t,i,r,n,s,a,o,h,c,l,d,u,f,p){var g=i.x-t.displayOriginX+n,m=i.y-t.displayOriginY+s,v=g+i.w,y=m+i.h,b=a.a,x=a.b,E=a.c,T=a.d,A=a.e,w=a.f,S=g*b+m*E+A,C=g*x+m*T+w,I=g*b+y*E+A,_=g*x+y*T+w,O=v*b+y*E+A,P=v*x+y*T+w,M=v*b+m*E+A,R=v*x+m*T+w;o&&(S=Math.round(S),C=Math.round(C),I=Math.round(I),_=Math.round(_),O=Math.round(O),P=Math.round(P),M=Math.round(M),R=Math.round(R)),e.batchQuad(t,S,C,I,_,O,P,M,R,r.u0,r.v0,r.u1,r.v1,h,c,l,d,u,f,p)}},53048:e=>{e.exports=function(e,t,i,r){if(void 0===i&&(i=!1),void 0===r)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,s,a,o=e.text,h=o.length,c=e.maxWidth,l=e.wordWrapCharCode,d=Number.MAX_VALUE,u=Number.MAX_VALUE,f=0,p=0,g=e.fontData.chars,m=e.fontData.lineHeight,v=e.letterSpacing,y=e.lineSpacing,b=0,x=0,E=0,T=null,A=e._align,w=0,S=0,C=e.fontSize/e.fontData.size,I=C*e.scaleX,_=C*e.scaleY,O=null,P=0,M=[],R=Number.MAX_VALUE,L=0,D=0,k=0,N=[],F=[],B=null;if(c>0){a=o.split("\n");var U=[];for(n=0;n<a.length;n++){var G=a[n],V="",Y="",j="",W="";for(s=0;s<G.length;s++)E=G.charCodeAt(s),V+=G[s],(E===l||s===G.length-1)&&(function(e,t){for(var i=0,r=0;r<e.length;r++){var n=e.charCodeAt(r),s=t.chars[n];s&&(i+=s.xAdvance)}return i*I}(W=j+V,e.fontData)<=c?j=W:(Y=Y.slice(0,-1),Y+=(Y?"\n":"")+j,j=V),V="");Y=Y.slice(0,-1),Y+=(Y?"\n":"")+j,U.push(Y)}o=U.join("\n"),r.wrappedText=o,h=o.length}var z=0;for(n=0;n<h;n++){if(10===(E=o.charCodeAt(n))){null!==B&&(N.push({word:B.word,i:B.i,x:B.x*I,y:B.y*_,w:B.w*I,h:B.h*_}),B=null),O=null,M[D]=k,k>L&&(L=k),k<R&&(R=k),k=0,b=0,x=(m+y)*++D;continue}if(T=g[E]){if(w=b,S=x,null!==O){var H=T.kerning[P];w+=void 0!==H?H:0}d>w&&(d=w),u>S&&(u=S);var X=w+T.xAdvance,q=S+m;f<X&&(f=X),p<q&&(p=q);var K=T.xOffset+T.xAdvance+(void 0!==H?H:0);E===l?null!==B&&(N.push({word:B.word,i:B.i,x:B.x*I,y:B.y*_,w:B.w*I,h:B.h*_}),B=null):(null===B&&(B={word:"",i:z,x:b,y:x,w:0,h:m}),B.word=B.word.concat(o[n]),B.w+=K),F.push({i:z,idx:n,char:o[n],code:E,x:(T.xOffset+w)*C,y:(T.yOffset+x)*C,w:T.width*C,h:T.height*C,t:x*C,r:X*C,b:m*C,line:D,glyph:T}),b+=T.xAdvance+v+(void 0!==H?H:0),O=T,P=E,k=X*C,z++}}if(null!==B&&N.push({word:B.word,i:B.i,x:B.x*I,y:B.y*_,w:B.w*I,h:B.h*_}),M[D]=k,k>L&&(L=k),k<R&&(R=k),A>0)for(var J=0;J<F.length;J++){var Q=F[J];if(1===A){var $=(L-M[Q.line])/2;Q.x+=$,Q.r+=$}else if(2===A){var Z=L-M[Q.line];Q.x+=Z,Q.r+=Z}}var ee=r.local,et=r.global;return a=r.lines,ee.x=d*C,ee.y=u*C,ee.width=f*C,ee.height=p*C,et.x=e.x-e._displayOriginX+d*I,et.y=e.y-e._displayOriginY+u*_,et.width=f*I,et.height=p*_,a.shortest=R,a.longest=L,a.lengths=M,t&&(ee.x=Math.ceil(ee.x),ee.y=Math.ceil(ee.y),ee.width=Math.ceil(ee.width),ee.height=Math.ceil(ee.height),et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),a.shortest=Math.ceil(R),a.longest=Math.ceil(L)),i&&(e._displayOriginX=e.originX*ee.width,e._displayOriginY=e.originY*ee.height,et.x=e.x-e._displayOriginX*e.scaleX,et.y=e.y-e._displayOriginY*e.scaleY,t&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y))),r.words=N,r.characters=F,r.lines.height=m,r.scale=C,r.scaleX=e.scaleX,r.scaleY=e.scaleY,r}},61327:(e,t,i)=>{var r=i(21859);e.exports=function(e,t,i,n,s,a,o){var h=e.sys.textures.get(i),c=h.get(n),l=e.sys.cache.xml.get(s);if(!c||!l)return!1;var d=r(l,c,a,o,h);return e.sys.cache.bitmapFont.add(t,{data:d,texture:i,frame:n,fromAtlas:!0}),!0}},6925:(e,t,i)=>{var r=i(35154);e.exports=function(e,t){var i=t.width,n=t.height,s=Math.floor(i/2),a=Math.floor(n/2),o=r(t,"chars","");if(""!==o){var h=r(t,"image",""),c=e.sys.textures.getFrame(h),l=c.cutX,d=c.cutY,u=c.source.width,f=c.source.height,p=r(t,"offset.x",0),g=r(t,"offset.y",0),m=r(t,"spacing.x",0),v=r(t,"spacing.y",0),y=r(t,"lineSpacing",0),b=r(t,"charsPerRow",null);null===b&&(b=u/i)>o.length&&(b=o.length);for(var x=p,E=g,T={retroFont:!0,font:h,size:i,lineHeight:n+y,chars:{}},A=0,w=0;w<o.length;w++){var S=o.charCodeAt(w),C=(l+x)/u,I=(d+E)/f,_=(l+x+i)/u,O=(d+E+n)/f;T.chars[S]={x:x,y:E,width:i,height:n,centerX:s,centerY:a,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:C,v0:I,u1:_,v1:O},++A===b?(A=0,x=p,E+=n+v):x+=i+m}return{data:T,frame:null,texture:h}}}},21859:e=>{function t(e,t){return parseInt(e.getAttribute(t),10)}e.exports=function(e,i,r,n,s){void 0===r&&(r=0),void 0===n&&(n=0);var a=i.cutX,o=i.cutY,h=i.source.width,c=i.source.height,l=i.sourceIndex,d={},u=e.getElementsByTagName("info")[0],f=e.getElementsByTagName("common")[0];d.font=u.getAttribute("face"),d.size=t(u,"size"),d.lineHeight=t(f,"lineHeight")+n,d.chars={};var p=e.getElementsByTagName("char"),g=void 0!==i&&i.trimmed;if(g)var m=i.height,v=i.width;for(var y=0;y<p.length;y++){var b=p[y],x=t(b,"id"),E=String.fromCharCode(x),T=t(b,"x"),A=t(b,"y"),w=t(b,"width"),S=t(b,"height");g&&(T<v&&(v=T),A<m&&(m=A)),g&&0!==m&&0!==v&&(T-=i.x,A-=i.y);var C=(a+T)/h,I=(o+A)/c,_=(a+T+w)/h,O=(o+A+S)/c;if(d.chars[x]={x:T,y:A,width:w,height:S,centerX:Math.floor(w/2),centerY:Math.floor(S/2),xOffset:t(b,"xoffset"),yOffset:t(b,"yoffset"),xAdvance:t(b,"xadvance")+r,data:{},kerning:{},u0:C,v0:I,u1:_,v1:O},s&&0!==w&&0!==S){var P=s.add(E,l,T,A,w,S);P&&P.setUVs(w,S,C,I,_,O)}}var M=e.getElementsByTagName("kerning");for(y=0;y<M.length;y++){var R=M[y],L=t(R,"first"),D=t(R,"second"),k=t(R,"amount");d.chars[D].kerning[L]=k}return d}},196:(e,t,i)=>{var r=i(87662),n=i(79291),s={Parse:i(6925)};e.exports=s=n(!1,s,r)},87662:e=>{e.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},2638:(e,t,i)=>{var r=i(22186);e.exports=new(i(83419))({Extends:r,Mixins:[i(12310)],initialize:function(e,t,i,n,s,a,o){r.call(this,e,t,i,n,s,a,o),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,t){return this.cropWidth=e,this.cropHeight=t,this},setDisplayCallback:function(e){return this.displayCallback=e,this},setScrollX:function(e){return this.scrollX=e,this},setScrollY:function(e){return this.scrollY=e,this}})},86741:(e,t,i)=>{var r=i(20926);e.exports=function(e,t,i,n){var s=t._text,a=s.length,o=e.currentContext;if(0!==a&&r(e,o,t,i,n)){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,c=t.displayCallback,l=t.callbackData,d=t.fontData.chars,u=t.fontData.lineHeight,f=t._letterSpacing,p=0,g=0,m=0,v=null,y=0,b=0,x=0,E=0,T=0,A=0,w=null,S=0,C=t.frame.source.image,I=h.cutX,_=h.cutY,O=0,P=0,M=t._fontSize/t.fontData.size,R=t._align,L=0,D=0;t.getTextBounds(!1);var k=t._bounds.lines;1===R?D=(k.longest-k.lengths[0])/2:2===R&&(D=k.longest-k.lengths[0]),o.translate(-t.displayOriginX,-t.displayOriginY);var N=i.roundPixels;t.cropWidth>0&&t.cropHeight>0&&(o.beginPath(),o.rect(0,0,t.cropWidth,t.cropHeight),o.clip());for(var F=0;F<a;F++){if(P=M,O=0,10===(m=s.charCodeAt(F))){L++,1===R?D=(k.longest-k.lengths[L])/2:2===R&&(D=k.longest-k.lengths[L]),p=0,g+=u,w=null;continue}if(v=d[m]){if(y=I+v.x,b=_+v.y,x=v.width,E=v.height,T=v.xOffset+p-t.scrollX,A=v.yOffset+g-t.scrollY,null!==w){var B=v.kerning[S];T+=void 0!==B?B:0}if(c){l.index=F,l.charCode=m,l.x=T,l.y=A,l.scale=P,l.rotation=O,l.data=v.data;var U=c(l);T=U.x,A=U.y,P=U.scale,O=U.rotation}T*=P,A*=P,T+=D,p+=v.xAdvance+f+(void 0!==B?B:0),w=v,S=m,0!==x&&0!==E&&32!==m&&(N&&(T=Math.round(T),A=Math.round(A)),o.save(),o.translate(T,A),o.rotate(O),o.scale(P,P),o.drawImage(C,y,b,x,E,0,0,x,E),o.restore())}}o.restore()}}},11164:(e,t,i)=>{var r=i(2638),n=i(25305),s=i(44603),a=i(23568);s.register("dynamicBitmapText",function(e,t){void 0===e&&(e={});var i=a(e,"font",""),s=a(e,"text",""),o=a(e,"size",!1),h=new r(this.scene,0,0,i,s,o);return void 0!==t&&(e.add=t),n(this.scene,h,e),h})},72566:(e,t,i)=>{var r=i(2638);i(39429).register("dynamicBitmapText",function(e,t,i,n,s){return this.displayList.add(new r(this.scene,e,t,i,n,s))})},12310:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(73482),renderCanvas:i(86741)}},73482:(e,t,i)=>{var r=i(91296),n=i(61340),s=i(70554),a=new n;e.exports=function(e,t,i,n){var o,h,c=t.text,l=c.length;if(0!==l){i.addToRenderList(t);var d=e.pipelines.set(t.pipeline,t),u=r(t,i,n);e.pipelines.preBatch(t);var f=u.sprite,p=u.calc,g=t.cropWidth>0||t.cropHeight>0;g&&(d.flush(),e.pushScissor(p.tx,p.ty,t.cropWidth*p.scaleX,t.cropHeight*p.scaleY));var m=t.frame.glTexture,v=t.tintFill,y=s.getTintAppendFloatAlpha(t.tintTopLeft,i.alpha*t._alphaTL),b=s.getTintAppendFloatAlpha(t.tintTopRight,i.alpha*t._alphaTR),x=s.getTintAppendFloatAlpha(t.tintBottomLeft,i.alpha*t._alphaBL),E=s.getTintAppendFloatAlpha(t.tintBottomRight,i.alpha*t._alphaBR),T=d.setGameObject(t),A=0,w=0,S=0,C=0,I=t.letterSpacing,_=0,O=0,P=t.scrollX,M=t.scrollY,R=t.fontData,L=R.chars,D=R.lineHeight,k=t.fontSize/R.size,N=0,F=t._align,B=0,U=0,G=t.getTextBounds(!1);t.maxWidth>0&&(l=(c=G.wrappedText).length);var V=t._bounds.lines;1===F?U=(V.longest-V.lengths[0])/2:2===F&&(U=V.longest-V.lengths[0]);for(var Y=i.roundPixels,j=t.displayCallback,W=t.callbackData,z=0;z<l;z++){if(10===(S=c.charCodeAt(z))){B++,1===F?U=(V.longest-V.lengths[B])/2:2===F&&(U=V.longest-V.lengths[B]),A=0,w+=D,h=null;continue}if(o=L[S]){_=o.width,O=o.height;var H=o.xOffset+A-P,X=o.yOffset+w-M;if(null!==h){var q=o.kerning[C]||0;H+=q,A+=q}if(A+=o.xAdvance+I,h=o,C=S,0!==_&&0!==O&&32!==S){if(k=t.fontSize/t.fontData.size,N=0,j){W.color=0,W.tint.topLeft=y,W.tint.topRight=b,W.tint.bottomLeft=x,W.tint.bottomRight=E,W.index=z,W.charCode=S,W.x=H,W.y=X,W.scale=k,W.rotation=N,W.data=o.data;var K=j(W);H=K.x,X=K.y,k=K.scale,N=K.rotation,K.color?(y=K.color,b=K.color,x=K.color,E=K.color):(y=K.tint.topLeft,b=K.tint.topRight,x=K.tint.bottomLeft,E=K.tint.bottomRight),y=s.getTintAppendFloatAlpha(y,i.alpha*t._alphaTL),b=s.getTintAppendFloatAlpha(b,i.alpha*t._alphaTR),x=s.getTintAppendFloatAlpha(x,i.alpha*t._alphaBL),E=s.getTintAppendFloatAlpha(E,i.alpha*t._alphaBR)}H*=k,X*=k,H-=t.displayOriginX,X-=t.displayOriginY,H+=U,a.applyITRS(H,X,N,k,k),p.multiply(a,f);var J=o.u0,Q=o.v0,$=o.u1,Z=o.v1,ee=_,et=O,ei=f.e,er=f.f,en=et*f.c+f.e,es=et*f.d+f.f,ea=ee*f.a+et*f.c+f.e,eo=ee*f.b+et*f.d+f.f,eh=ee*f.a+f.e,ec=ee*f.b+f.f;Y&&(ei=Math.round(ei),er=Math.round(er),en=Math.round(en),es=Math.round(es),ea=Math.round(ea),eo=Math.round(eo),eh=Math.round(eh),ec=Math.round(ec)),d.shouldFlush(6)&&(d.flush(),T=d.setGameObject(t)),d.batchQuad(t,ei,er,en,es,ea,eo,eh,ec,J,Q,$,Z,y,b,x,E,v,m,T)}}}g&&(d.flush(),e.popScissor()),e.pipelines.postBatch(t)}}},22186:(e,t,i)=>{var r=i(83419),n=i(45319),s=i(31401),a=i(95643),o=i(53048),h=i(61327),c=i(21859),l=i(87841),d=i(18658),u=new r({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,d],initialize:function(e,t,i,r,n,s,h){void 0===n&&(n=""),void 0===h&&(h=0),a.call(this,e,"BitmapText"),this.font=r;var c=this.scene.sys.cache.bitmapFont.get(r);if(!c)throw Error("Invalid BitmapText key: "+r);this.fontData=c.data,this._text="",this._fontSize=s||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=h,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=c.fromAtlas,this.setTexture(c.texture,c.frame),this.setPosition(t,i),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=u.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=u.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=u.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(e){return this._fontSize=e,this._dirty=!0,this},setLetterSpacing:function(e){return void 0===e&&(e=0),this._letterSpacing=e,this._dirty=!0,this},setLineSpacing:function(e){return void 0===e&&(e=0),this.lineSpacing=e,this},setText:function(e){return e||0===e||(e=""),Array.isArray(e)&&(e=e.join("\n")),e!==this.text&&(this._text=e.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(e,t,i,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=.5),this.dropShadowX=e,this.dropShadowY=t,this.dropShadowColor=i,this.dropShadowAlpha=r,this},setCharacterTint:function(e,t,i,r,s,a,o){void 0===e&&(e=0),void 0===t&&(t=1),void 0===i&&(i=!1),void 0===r&&(r=-1),void 0===s&&(s=r,a=r,o=r);var h=this.text.length;-1===t&&(t=h),e<0&&(e=h+e),e=n(e,0,h-1);for(var c=n(e+t,e,h),l=this.charColors,d=e;d<c;d++){var u=l[d];if(-1===r)l[d]=null;else{var f=+!!i;u?(u.tintEffect=f,u.tintTL=r,u.tintTR=s,u.tintBL=a,u.tintBR=o):l[d]={tintEffect:f,tintTL:r,tintTR:s,tintBL:a,tintBR:o}}}return this},setWordTint:function(e,t,i,r,n,s,a){void 0===t&&(t=1);for(var o=this.getTextBounds().words,h="number"==typeof e,c=0,l=0;l<o.length;l++){var d=o[l];if((h&&l===e||!h&&d.word===e)&&(this.setCharacterTint(d.i,d.word.length,i,r,n,s,a),++c===t))break}return this},getTextBounds:function(e){var t=this._bounds;return(this._dirty||e||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY)&&(o(this,e,!0,t),this._dirty=!1),t},getCharacterAt:function(e,t,i){for(var r=this.getLocalPoint(e,t,null,i),n=this.getTextBounds().characters,s=new l,a=0;a<n.length;a++){var o=n[a];if(s.setTo(o.x,o.t,o.r-o.x,o.b),s.contains(r.x,r.y))return o}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(e,t,i){void 0===t&&(t=this._fontSize),void 0===i&&(i=this._align);var r=this.scene.sys.cache.bitmapFont.get(e);return r&&(this.font=e,this.fontData=r.data,this._fontSize=t,this._align=i,this.fromAtlas=!0===r.fromAtlas,this.setTexture(r.texture,r.frame),o(this,!1,!0,this._bounds)),this},setMaxWidth:function(e,t){return this._maxWidth=e,this._dirty=!0,void 0!==t&&(this.wordWrapCharCode=t),this},setDisplaySize:function(e,t){this.setScale(1,1),this.getTextBounds(!1);var i=e/this.width,r=t/this.height;return this.setScale(i,r),this},align:{set:function(e){this._align=e,this._dirty=!0},get:function(){return this._align}},text:{set:function(e){this.setText(e)},get:function(){return this._text}},fontSize:{set:function(e){this._fontSize=e,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(e){this._letterSpacing=e,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(e){this._lineSpacing=e,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(e){this._maxWidth=e,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(e){this.setScaleX(1),this.getTextBounds(!1);var t=e/this.width;this.setScaleX(t)},get:function(){return this.width}},displayHeight:{set:function(e){this.setScaleY(1),this.getTextBounds(!1);var t=e/this.height;this.setScaleY(t)},get:function(){return this.height}},toJSON:function(){var e=s.ToJSON(this);return e.data={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align},e},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});u.ALIGN_LEFT=0,u.ALIGN_CENTER=1,u.ALIGN_RIGHT=2,u.ParseFromAtlas=h,u.ParseXMLBitmapFont=c,e.exports=u},37289:(e,t,i)=>{var r=i(20926);e.exports=function(e,t,i,n){var s=t._text,a=s.length,o=e.currentContext;if(0!==a&&r(e,o,t,i,n)){i.addToRenderList(t);var h=t.fromAtlas?t.frame:t.texture.frames.__BASE,c=t.fontData.chars,l=t.fontData.lineHeight,d=t._letterSpacing,u=t._lineSpacing,f=0,p=0,g=0,m=null,v=0,y=0,b=0,x=0,E=0,T=0,A=null,w=0,S=h.source.image,C=h.cutX,I=h.cutY,_=t._fontSize/t.fontData.size,O=t._align,P=0,M=0,R=t.getTextBounds(!1);t.maxWidth>0&&(a=(s=R.wrappedText).length);var L=t._bounds.lines;1===O?M=(L.longest-L.lengths[0])/2:2===O&&(M=L.longest-L.lengths[0]),o.translate(-t.displayOriginX,-t.displayOriginY);for(var D=i.roundPixels,k=0;k<a;k++){if(10===(g=s.charCodeAt(k))){P++,1===O?M=(L.longest-L.lengths[P])/2:2===O&&(M=L.longest-L.lengths[P]),f=0,p+=l+u,A=null;continue}if(m=c[g]){if(v=C+m.x,y=I+m.y,b=m.width,x=m.height,E=m.xOffset+f,T=m.yOffset+p,null!==A){var N=m.kerning[w];E+=void 0!==N?N:0}E*=_,T*=_,E+=M,f+=m.xAdvance+d+(void 0!==N?N:0),A=m,w=g,0!==b&&0!==x&&32!==g&&(D&&(E=Math.round(E),T=Math.round(T)),o.save(),o.translate(E,T),o.scale(_,_),o.drawImage(S,v,y,b,x,0,0,b,x),o.restore())}}o.restore()}}},57336:(e,t,i)=>{var r=i(22186),n=i(25305),s=i(44603),a=i(23568),o=i(35154);s.register("bitmapText",function(e,t){void 0===e&&(e={});var i=o(e,"font",""),s=a(e,"text",""),h=a(e,"size",!1),c=o(e,"align",0),l=new r(this.scene,0,0,i,s,h,c);return void 0!==t&&(e.add=t),n(this.scene,l,e),l})},34914:(e,t,i)=>{var r=i(22186);i(39429).register("bitmapText",function(e,t,i,n,s,a){return this.displayList.add(new r(this.scene,e,t,i,n,s,a))})},18658:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(33590),renderCanvas:i(37289)}},33590:(e,t,i)=>{var r=i(3217),n=i(91296),s=i(70554);e.exports=function(e,t,i,a){var o,h,c;if(0!==t._text.length){i.addToRenderList(t);var l=e.pipelines.set(t.pipeline,t),d=n(t,i,a).calc;e.pipelines.preBatch(t);var u=i.roundPixels,f=i.alpha,p=t.charColors,g=t.tintFill,m=s.getTintAppendFloatAlpha,v=m(t.tintTopLeft,f*t._alphaTL),y=m(t.tintTopRight,f*t._alphaTR),b=m(t.tintBottomLeft,f*t._alphaBL),x=m(t.tintBottomRight,f*t._alphaBR),E=t.frame.glTexture,T=l.setGameObject(t),A=t.getTextBounds(!1).characters,w=t.dropShadowX,S=t.dropShadowY;if(0!==w||0!==S){var C=t.dropShadowColor,I=t.dropShadowAlpha,_=m(C,f*I*t._alphaTL),O=m(C,f*I*t._alphaTR),P=m(C,f*I*t._alphaBL),M=m(C,f*I*t._alphaBR);for(o=0;o<A.length;o++)c=(h=A[o]).glyph,32!==h.code&&0!==c.width&&0!==c.height&&r(l,t,h,c,w,S,d,u,_,O,P,M,1,E,T)}for(o=0;o<A.length;o++)if(c=(h=A[o]).glyph,32!==h.code&&0!==c.width&&0!==c.height)if(l.shouldFlush(6)&&(l.flush(),T=l.setGameObject(t)),p[h.i]){var R=p[h.i],L=R.tintEffect,D=m(R.tintTL,f*t._alphaTL),k=m(R.tintTR,f*t._alphaTR),N=m(R.tintBL,f*t._alphaBL),F=m(R.tintBR,f*t._alphaBR);r(l,t,h,c,0,0,d,u,D,k,N,F,L,E,T)}else r(l,t,h,c,0,0,d,u,v,y,b,x,g,E,T);e.pipelines.postBatch(t)}}},6107:(e,t,i)=>{var r=i(48011),n=i(46590),s=i(83419),a=i(31401),o=i(4327),h=i(95643),c=i(73162);e.exports=new s({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,r],initialize:function(e,t,i,r,n){h.call(this,e,"Blitter"),this.setTexture(r,n),this.setPosition(t,i),this.initPipeline(),this.initPostPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(e,t,i,r,s){void 0===r&&(r=!0),void 0===s&&(s=this.children.length),void 0===i?i=this.frame:i instanceof o||(i=this.texture.get(i));var a=new n(this,e,t,i,r);return this.children.addAt(a,s,!1),this.dirty=!0,a},createFromCallback:function(e,t,i,r){for(var n=this.createMultiple(t,i,r),s=0;s<n.length;s++){var a=n[s];e.call(this,a,s)}return n},createMultiple:function(e,t,i){void 0===t&&(t=this.frame.name),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);var r=[],n=this;return t.forEach(function(t){for(var s=0;s<e;s++)r.push(n.create(0,0,t,i))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}})},72396:e=>{e.exports=function(e,t,i,r){var n=t.getRenderList();if(0!==n.length){var s=e.currentContext,a=i.alpha*t.alpha;if(0!==a){i.addToRenderList(t),s.globalCompositeOperation=e.blendModes[t.blendMode],s.imageSmoothingEnabled=!t.frame.source.scaleMode;var o=t.x-i.scrollX*t.scrollFactorX,h=t.y-i.scrollY*t.scrollFactorY;s.save(),r&&r.copyToContext(s);for(var c=i.roundPixels,l=0;l<n.length;l++){var d=n[l],u=d.flipX||d.flipY,f=d.frame,p=f.canvasData,g=f.x,m=f.y,v=1,y=1,b=d.alpha*a;0!==b&&(s.globalAlpha=b,u?(d.flipX&&(v=-1,g-=p.width),d.flipY&&(y=-1,m-=p.height),p.width>0&&p.height>0&&(s.save(),s.translate(d.x+o,d.y+h),s.scale(v,y),s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g,m,p.width,p.height),s.restore())):(c&&(g=Math.round(g),m=Math.round(m)),p.width>0&&p.height>0&&s.drawImage(f.source.image,p.x,p.y,p.width,p.height,g+d.x+o,m+d.y+h,p.width,p.height)))}s.restore()}}}},9403:(e,t,i)=>{var r=i(6107),n=i(25305),s=i(44603),a=i(23568);s.register("blitter",function(e,t){void 0===e&&(e={});var i=a(e,"key",null),s=a(e,"frame",null),o=new r(this.scene,0,0,i,s);return void 0!==t&&(e.add=t),n(this.scene,o,e),o})},12709:(e,t,i)=>{var r=i(6107);i(39429).register("blitter",function(e,t,i,n){return this.displayList.add(new r(this.scene,e,t,i,n))})},48011:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(99485),renderCanvas:i(72396)}},99485:(e,t,i)=>{var r=i(61340),n=i(70554),s=new r;e.exports=function(e,t,i,r){var a=t.getRenderList(),o=i.alpha*t.alpha;if(0!==a.length&&0!==o){i.addToRenderList(t);var h=e.pipelines.set(this.pipeline,t),c=i.scrollX*t.scrollFactorX,l=i.scrollY*t.scrollFactorY,d=s.copyFrom(i.matrix);r&&(d.multiplyWithOffset(r,-c,-l),c=0,l=0);var u=t.x-c,f=t.y-l,p=-1,g=i.roundPixels;e.pipelines.preBatch(t);for(var m=0;m<a.length;m++){var v=a[m],y=v.frame,b=v.alpha*o;if(0!==b){var x=y.width,E=y.height,T=u+v.x+y.x,A=f+v.y+y.y;v.flipX&&(x*=-1,T+=y.width),v.flipY&&(E*=-1,A+=y.height);var w=d.setQuad(T,A,T+x,A+E,g),S=n.getTintAppendFloatAlpha(v.tint,b);if(y.sourceIndex!==p){var C=h.setGameObject(t,y);p=y.sourceIndex}h.batchQuad(t,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],y.u0,y.v0,y.u1,y.v1,S,S,S,S,!1,y.glTexture,C)&&(p=-1)}}e.pipelines.postBatch(t)}}},46590:(e,t,i)=>{var r=i(83419),n=i(4327);e.exports=new r({initialize:function(e,t,i,r,n){this.parent=e,this.x=t,this.y=i,this.frame=r,this.data={},this.tint=0xffffff,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(e){return void 0===e?this.frame=this.parent.frame:e instanceof n&&e.texture===this.parent.texture?this.frame=e:this.frame=this.parent.texture.get(e),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(e,t,i){return this.x=e,this.y=t,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(e,t){return this.x=e,this.y=t,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},setVisible:function(e){return this.visible=e,this},setAlpha:function(e){return this.alpha=e,this},setTint:function(e){return this.tint=e,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(e){this.parent.dirty|=this._visible!==e,this._visible=e}},alpha:{get:function(){return this._alpha},set:function(e){this.parent.dirty|=this._alpha>0!=e>0,this._alpha=e}}})},16005:(e,t,i)=>{var r=i(45319);e.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e,t,i,n){return void 0===e&&(e=1),void 0===t?this.alpha=e:(this._alphaTL=r(e,0,1),this._alphaTR=r(t,0,1),this._alphaBL=r(i,0,1),this._alphaBR=r(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(e){var t=r(e,0,1);this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,this._alphaBR=t,0===t?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(e){var t=r(e,0,1);this._alphaTL=t,0!==t&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(e){var t=r(e,0,1);this._alphaTR=t,0!==t&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(e){var t=r(e,0,1);this._alphaBL=t,0!==t&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(e){var t=r(e,0,1);this._alphaBR=t,0!==t&&(this.renderFlags|=2)}}}},88509:(e,t,i)=>{var r=i(45319);e.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(e){return void 0===e&&(e=1),this.alpha=e,this},alpha:{get:function(){return this._alpha},set:function(e){var t=r(e,0,1);this._alpha=t,0===t?this.renderFlags&=-3:this.renderFlags|=2}}}},90065:(e,t,i)=>{var r=i(10312);e.exports={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(e){"string"==typeof e&&(e=r[e]),(e|=0)>=-1&&(this._blendMode=e)}},setBlendMode:function(e){return this.blendMode=e,this}}},94215:e=>{e.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}}},61683:e=>{e.exports={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){return void 0===e?this.isCropped=!1:this.frame&&("number"==typeof e?this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,e.x,e.y,e.width,e.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},89272:(e,t,i)=>{var r=i(37105);e.exports={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return void 0===e&&(e=0),this.depth=e,this},setToTop:function(){var e=this.getDisplayList();return e&&r.BringToTop(e,this),this},setToBack:function(){var e=this.getDisplayList();return e&&r.SendToBack(e,this),this},setAbove:function(e){var t=this.getDisplayList();return t&&e&&r.MoveAbove(t,this,e),this},setBelow:function(e){var t=this.getDisplayList();return t&&e&&r.MoveBelow(t,this,e),this}}},47059:(e,t,i)=>{var r=i(83419),n=i(66064),s=i(19133);e.exports=new r({initialize:function(e,t){this.gameObject=e,this.isPost=t,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(e){return void 0===e&&(e=0),this.padding=e,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(e){if(!this.isPost){var t=this.gameObject.scene.sys.renderer;t&&t.pipelines?(this.gameObject.pipeline=t.pipelines.FX_PIPELINE,void 0!==e&&(this.padding=e),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var e=this.list,t=0;t<e.length;t++)e[t].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(e){var t;if(this.isPost){var i=this.gameObject.getPostPipeline(String(e.type));for(Array.isArray(i)||(i=[i]),t=0;t<i.length;t++){var r=i[t];if(r.controller===e){this.gameObject.removePostPipeline(r),e.destroy();break}}}else{var n=this.list;for(t=0;t<n.length;t++)n[t]===e&&(s(n,t),e.destroy())}return this.gameObject},disable:function(e){return void 0===e&&(e=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,e&&this.clear(),this.gameObject},add:function(e,t){if(!this.isPost)return this.enabled||this.enable(),this.list.push(e),e;var i=String(e.type);this.gameObject.setPostPipeline(i,t);var r=this.gameObject.getPostPipeline(i);if(r)return Array.isArray(r)&&(r=r.pop()),r&&(r.controller=e),e},addGlow:function(e,t,i,r,s,a){return this.add(new n.Glow(this.gameObject,e,t,i,r),{quality:s,distance:a})},addShadow:function(e,t,i,r,s,a,o){return this.add(new n.Shadow(this.gameObject,e,t,i,r,s,a,o))},addPixelate:function(e){return this.add(new n.Pixelate(this.gameObject,e))},addVignette:function(e,t,i,r){return this.add(new n.Vignette(this.gameObject,e,t,i,r))},addShine:function(e,t,i,r){return this.add(new n.Shine(this.gameObject,e,t,i,r))},addBlur:function(e,t,i,r,s,a){return this.add(new n.Blur(this.gameObject,e,t,i,r,s,a))},addGradient:function(e,t,i,r,s,a,o,h){return this.add(new n.Gradient(this.gameObject,e,t,i,r,s,a,o,h))},addBloom:function(e,t,i,r,s,a){return this.add(new n.Bloom(this.gameObject,e,t,i,r,s,a))},addColorMatrix:function(){return this.add(new n.ColorMatrix(this.gameObject))},addCircle:function(e,t,i,r,s){return this.add(new n.Circle(this.gameObject,e,t,i,r,s))},addBarrel:function(e){return this.add(new n.Barrel(this.gameObject,e))},addDisplacement:function(e,t,i){return this.add(new n.Displacement(this.gameObject,e,t,i))},addWipe:function(e,t,i){return this.add(new n.Wipe(this.gameObject,e,t,i))},addReveal:function(e,t,i){return this.add(new n.Wipe(this.gameObject,e,t,i,!0))},addBokeh:function(e,t,i){return this.add(new n.Bokeh(this.gameObject,e,t,i))},addTiltShift:function(e,t,i,r,s,a){return this.add(new n.Bokeh(this.gameObject,e,t,i,!0,r,s,a))},destroy:function(){this.clear(),this.gameObject=null}})},54434:e=>{e.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,t){return this.flipX=e,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},8004:(e,t,i)=>{var r=i(87841),n=i(11520),s=i(26099);e.exports={prepareBoundsOutput:function(e,t){return void 0===t&&(t=!1),0!==this.rotation&&n(e,this.x,this.y,this.rotation),t&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(e.x,e.y,e),e},getCenter:function(e,t){return void 0===e&&(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getTopLeft:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopCenter:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getTopRight:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,t)},getLeftCenter:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getRightCenter:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,t)},getBottomLeft:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomCenter:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBottomRight:function(e,t){return e||(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,t)},getBounds:function(e){if(void 0===e&&(e=new r),this.parentContainer){var t,i,n,s,a,o,h,c,l=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e),l.transformPoint(e.x,e.y,e),t=e.x,i=e.y,this.getTopRight(e),l.transformPoint(e.x,e.y,e),n=e.x,s=e.y,this.getBottomLeft(e),l.transformPoint(e.x,e.y,e),a=e.x,o=e.y,this.getBottomRight(e),l.transformPoint(e.x,e.y,e),h=e.x,c=e.y}else this.getTopLeft(e),t=e.x,i=e.y,this.getTopRight(e),n=e.x,s=e.y,this.getBottomLeft(e),a=e.x,o=e.y,this.getBottomRight(e),h=e.x,c=e.y;return e.x=Math.min(t,n,a,h),e.y=Math.min(i,s,o,c),e.width=Math.max(t,n,a,h)-e.x,e.height=Math.max(i,s,o,c)-e.y,e}}},8573:(e,t,i)=>{var r=i(6858),n=i(80661);e.exports={mask:null,setMask:function(e){return this.mask=e,this},clearMask:function(e){return void 0===e&&(e=!1),e&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(e,t,i,n,s){return void 0===e&&(this.texture||this.shader||this.geom)&&(e=this),new r(this.scene,e,t,i,n,s)},createGeometryMask:function(e){return void 0===e&&("Graphics"===this.type||this.geom)&&(e=this),new n(this.scene,e)}}},27387:e=>{e.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,t){return void 0===e&&(e=.5),void 0===t&&(t=e),this.originX=e,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.displayOriginX=e,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},37640:(e,t,i)=>{var r=i(39506),n=i(57355),s=i(35154),a=i(86353),o=i(26099);e.exports={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(e,t){void 0===t&&(t=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=e,t&&this.startFollow(t),this},setRotateToPath:function(e,t){return void 0===t&&(t=0),this.rotateToPath=e,this.pathRotationOffset=t,this},isFollowing:function(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function(e,t){void 0===e&&(e={}),void 0===t&&(t=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof e&&(e={duration:e}),e.from=s(e,"from",0),e.to=s(e,"to",1);var h=n(e,"positionOnPath",!1);this.rotateToPath=n(e,"rotateToPath",!1),this.pathRotationOffset=s(e,"rotationOffset",0);var c=s(e,"startAt",t);if(c&&(e.onStart=function(e){var t=e.data[0];t.progress=c,t.elapsed=t.duration*c;var i=t.ease(t.progress);t.current=t.start+(t.end-t.start)*i,t.setTargetValue()}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),e.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(e),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var l=this.path.getPoint(.1);this.rotation=Math.atan2(l.y-this.y,l.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=e,this},pauseFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.pause(),this},resumeFollow:function(){var e=this.pathTween;return e&&e.isPaused()&&e.resume(),this},stopFollow:function(){var e=this.pathTween;return e&&e.isPlaying()&&e.stop(),this},pathUpdate:function(){var e=this.pathTween;if(e&&e.data){var t=e.data[0],i=this.pathDelta,n=this.pathVector;if(i.copy(n).negate(),t.state===a.COMPLETE){this.path.getPoint(t.end,n),i.add(n),n.add(this.pathOffset),this.setPosition(n.x,n.y);return}if(t.state!==a.PLAYING_FORWARD&&t.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(e.getValue(),n),i.add(n),n.add(this.pathOffset);var s=this.x,o=this.y;this.setPosition(n.x,n.y);var h=this.x-s,c=this.y-o;if(0===h&&0===c)return;if(t.state!==this._prevDirection){this._prevDirection=t.state;return}this.rotateToPath&&(this.rotation=Math.atan2(c,h)+r(this.pathRotationOffset))}}}},72699:(e,t,i)=>{var r=i(62644);e.exports={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(e){this.pipelineData={};var t=this.scene.sys.renderer;if(!t)return!1;var i=t.pipelines;if(i){void 0===e&&(e=i.default);var r=i.get(e);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(e,t,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){var a=s.get(e);a&&(this.pipeline=a),t&&(this.pipelineData=i?r(t):t)}return this},setPipelineData:function(e,t){var i=this.pipelineData;return void 0===t?delete i[e]:i[e]=t,this},resetPipeline:function(e){return void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,e&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return null===this.pipeline?null:this.pipeline.name}}},17581:(e,t,i)=>{var r=i(62644),n=i(47059),s=i(19133);e.exports={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(e){this.postPipelines=[],this.postPipelineData={},this.postFX=new n(this,!0),e&&(this.preFX=new n(this,!1))},setPostPipeline:function(e,t,i){var n=this.scene.sys.renderer;if(!n)return this;var s=n.pipelines;if(s){Array.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++){var o=s.getPostPipeline(e[a],this,t);o&&this.postPipelines.push(o)}t&&(this.postPipelineData=i?r(t):t)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(e,t){var i=this.postPipelineData;return void 0===t?delete i[e]:i[e]=t,this},getPostPipeline:function(e){for(var t="string"==typeof e,i=this.postPipelines,r=[],n=0;n<i.length;n++){var s=i[n];(t&&s.name===e||!t&&s instanceof e)&&r.push(s)}return 1===r.length?r[0]:r},resetPostPipeline:function(e){void 0===e&&(e=!1);for(var t=this.postPipelines,i=0;i<t.length;i++)t[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.postPipelineData={})},removePostPipeline:function(e){for(var t="string"==typeof e,i=this.postPipelines,r=i.length-1;r>=0;r--){var n=i[r];(t&&n.name===e||!t&&n===e)&&(n.destroy(),s(i,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}}},80227:e=>{e.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,t){return void 0===t&&(t=e),this.scrollFactorX=e,this.scrollFactorY=t,this}}},16736:e=>{e.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this}}},37726:(e,t,i)=>{var r=i(4327);e.exports={texture:null,frame:null,isCropped:!1,setTexture:function(e,t,i,r){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t,i,r)},setFrame:function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=!0),e instanceof r?(this.texture=this.scene.sys.textures.get(e.texture.key),this.frame=e):this.frame=this.texture.get(e),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},79812:(e,t,i)=>{var r=i(4327);e.exports={texture:null,frame:null,isCropped:!1,setCrop:function(e,t,i,r){return void 0===e?this.isCropped=!1:this.frame&&("number"==typeof e?this.frame.setCropUVs(this._crop,e,t,i,r,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,e.x,e.y,e.width,e.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=!0),e instanceof r?(this.texture=this.scene.sys.textures.get(e.texture.key),this.frame=e):this.frame=this.texture.get(e),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&t&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},27472:e=>{e.exports={tintTopLeft:0xffffff,tintTopRight:0xffffff,tintBottomLeft:0xffffff,tintBottomRight:0xffffff,tintFill:!1,clearTint:function(){return this.setTint(0xffffff),this},setTint:function(e,t,i,r){return void 0===e&&(e=0xffffff),void 0===t&&(t=e,i=e,r=e),this.tintTopLeft=e,this.tintTopRight=t,this.tintBottomLeft=i,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(e,t,i,r){return this.setTint(e,t,i,r),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){return this.tintFill||0xffffff!==this.tintTopLeft||0xffffff!==this.tintTopRight||0xffffff!==this.tintBottomLeft||0xffffff!==this.tintBottomRight}}}},53774:e=>{e.exports=function(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(t.textureKey=e.texture.key,t.frameKey=e.frame.name),t}},16901:(e,t,i)=>{var r=i(36383),n=i(61340),s=i(85955),a=i(86554),o=i(30954),h=i(26099);e.exports={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleX=e,this._scaleY=e,0===e?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,0===e?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,0===e?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return o(this._rotation*r.RAD_TO_DEG)},set:function(e){this.rotation=o(e)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=a(e)}},setPosition:function(e,t,i,r){return void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=0),void 0===r&&(r=0),this.x=e,this.y=t,this.z=i,this.w=r,this},copyPosition:function(e){return void 0!==e.x&&(this.x=e.x),void 0!==e.y&&(this.y=e.y),void 0!==e.z&&(this.z=e.z),void 0!==e.w&&(this.w=e.w),this},setRandomPosition:function(e,t,i,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=e+Math.random()*i,this.y=t+Math.random()*r,this},setRotation:function(e){return void 0===e&&(e=0),this.rotation=e,this},setAngle:function(e){return void 0===e&&(e=0),this.angle=e,this},setScale:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=e),this.scaleX=e,this.scaleY=t,this},setX:function(e){return void 0===e&&(e=0),this.x=e,this},setY:function(e){return void 0===e&&(e=0),this.y=e,this},setZ:function(e){return void 0===e&&(e=0),this.z=e,this},setW:function(e){return void 0===e&&(e=0),this.w=e,this},getLocalTransformMatrix:function(e){return void 0===e&&(e=new n),e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,t){void 0===e&&(e=new n);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(e);var r=!1;for(t||(t=new n,r=!0),e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),t.multiply(e,e),i=i.parentContainer;return r&&t.destroy(),e},getLocalPoint:function(e,t,i,r){i||(i=new h),r||(r=this.scene.sys.cameras.main);var n=r.scrollX,a=r.scrollY,o=e+n*this.scrollFactorX-n,c=t+a*this.scrollFactorY-a;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(o,c,i):s(o,c,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getWorldPoint:function(e,t,i){if(void 0===e&&(e=new h),!this.parentContainer)return e.x=this.x,e.y=this.y,e;var r=this.getWorldTransformMatrix(t,i);return e.x=r.tx,e.y=r.ty,e},getParentRotation:function(){for(var e=0,t=this.parentContainer;t;)e+=t.rotation,t=t.parentContainer;return e}}},61340:(e,t,i)=>{var r=i(83419),n=i(36383),s=i(26099);e.exports=new r({initialize:function(e,t,i,r,n,s){void 0===e&&(e=1),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.matrix=new Float32Array([e,t,i,r,n,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(0>Math.atan(-this.c/this.a)?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],s=e[3];return t||i?i>0?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX):r||s?n.TAU-(s>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,t){var i=this.matrix;return i[4]=i[0]*e+i[2]*t+i[4],i[5]=i[1]*e+i[3]*t+i[5],this},scale:function(e,t){var i=this.matrix;return i[0]*=e,i[1]*=e,i[2]*=t,i[3]*=t,this},rotate:function(e){var t=Math.sin(e),i=Math.cos(e),r=this.matrix,n=r[0],s=r[1],a=r[2],o=r[3];return r[0]=n*i+a*t,r[1]=s*i+o*t,r[2]=-(n*t)+a*i,r[3]=-(s*t)+o*i,this},multiply:function(e,t){var i=this.matrix,r=e.matrix,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],c=i[5],l=r[0],d=r[1],u=r[2],f=r[3],p=r[4],g=r[5],m=void 0===t?i:t.matrix;return m[0]=l*n+d*a,m[1]=l*s+d*o,m[2]=u*n+f*a,m[3]=u*s+f*o,m[4]=p*n+g*a+h,m[5]=p*s+g*o+c,m},multiplyWithOffset:function(e,t,i){var r=this.matrix,n=e.matrix,s=r[0],a=r[1],o=r[2],h=r[3],c=r[4],l=r[5],d=n[0],u=n[1],f=n[2],p=n[3],g=n[4],m=n[5];return r[0]=d*s+u*o,r[1]=d*a+u*h,r[2]=f*s+p*o,r[3]=f*a+p*h,r[4]=g*s+m*o+(t*s+i*o+c),r[5]=g*a+m*h+(t*a+i*h+l),this},transform:function(e,t,i,r,n,s){var a=this.matrix,o=a[0],h=a[1],c=a[2],l=a[3],d=a[4],u=a[5];return a[0]=e*o+t*c,a[1]=e*h+t*l,a[2]=i*o+r*c,a[3]=i*h+r*l,a[4]=n*o+s*c+d,a[5]=n*h+s*l+u,this},transformPoint:function(e,t,i){void 0===i&&(i={x:0,y:0});var r=this.matrix,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],c=r[5];return i.x=e*n+t*a+h,i.y=e*s+t*o+c,i},invert:function(){var e=this.matrix,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=t*n-i*r;return e[0]=n/o,e[1]=-i/o,e[2]=-r/o,e[3]=t/o,e[4]=(r*a-n*s)/o,e[5]=-(t*a-i*s)/o,this},copyFrom:function(e){var t=this.matrix;return t[0]=e.a,t[1]=e.b,t[2]=e.c,t[3]=e.d,t[4]=e.e,t[5]=e.f,this},copyFromArray:function(e){var t=this.matrix;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this},copyToContext:function(e){var t=this.matrix;return e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e},setToContext:function(e){return e.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),e},copyToArray:function(e){var t=this.matrix;return void 0===e?e=[t[0],t[1],t[2],t[3],t[4],t[5]]:(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]),e},setTransform:function(e,t,i,r,n,s){var a=this.matrix;return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a[4]=n,a[5]=s,this},decomposeMatrix:function(){var e=this.decomposedMatrix,t=this.matrix,i=t[0],r=t[1],n=t[2],s=t[3],a=i*s-r*n;if(e.translateX=t[4],e.translateY=t[5],i||r){var o=Math.sqrt(i*i+r*r);e.rotation=r>0?Math.acos(i/o):-Math.acos(i/o),e.scaleX=o,e.scaleY=a/o}else if(n||s){var h=Math.sqrt(n*n+s*s);e.rotation=.5*Math.PI-(s>0?Math.acos(-n/h):-Math.acos(n/h)),e.scaleX=a/h,e.scaleY=h}else e.rotation=0,e.scaleX=0,e.scaleY=0;return e},applyITRS:function(e,t,i,r,n){var s=this.matrix,a=Math.sin(i),o=Math.cos(i);return s[4]=e,s[5]=t,s[0]=o*r,s[1]=a*r,s[2]=-a*n,s[3]=o*n,this},applyInverse:function(e,t,i){void 0===i&&(i=new s);var r=this.matrix,n=r[0],a=r[1],o=r[2],h=r[3],c=r[4],l=r[5],d=1/(n*h+-(o*a));return i.x=h*d*e+-o*d*t+(l*o-c*h)*d,i.y=n*d*t+-a*d*e+(-l*n+c*a)*d,i},setQuad:function(e,t,i,r,n,s){void 0===n&&(n=!1),void 0===s&&(s=this.quad);var a=this.matrix,o=a[0],h=a[1],c=a[2],l=a[3],d=a[4],u=a[5],f=e*o+t*c+d,p=e*h+t*l+u,g=e*o+r*c+d,m=e*h+r*l+u,v=i*o+r*c+d,y=i*h+r*l+u,b=i*o+t*c+d,x=i*h+t*l+u;if(n){var E=Math.floor(f+.5),T=Math.floor(p+.5),A=E-f,w=T-p;s[0]=E,s[1]=T,s[2]=g+A,s[3]=m+w,s[4]=v+A,s[5]=y+w,s[6]=b+A,s[7]=x+w}else s[0]=f,s[1]=p,s[2]=g,s[3]=m,s[4]=v,s[5]=y,s[6]=b,s[7]=x;return s},getX:function(e,t){return e*this.a+t*this.c+this.e},getY:function(e,t){return e*this.b+t*this.d+this.f},getXRound:function(e,t,i){var r=this.getX(e,t);return i&&(r=Math.floor(r+.5)),r},getYRound:function(e,t,i){var r=this.getY(e,t);return i&&(r=Math.floor(r+.5)),r},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}})},59715:e=>{e.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(e){e?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(e){return this.visible=e,this}}},31401:(e,t,i)=>{e.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(e,t,i)=>{var r=i(37105),n=i(10312),s=i(83419),a=i(31401),o=i(51708),h=i(95643),c=i(87841),l=i(29959),d=i(36899),u=i(26099),f=new a.TransformMatrix;e.exports=new s({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.PostPipeline,a.Transform,a.Visible,l],initialize:function(e,t,i,r){h.call(this,e,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this._sortKey="",this._sysEvents=e.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(t,i),this.setBlendMode(n.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(e){return void 0===e&&(e=!0),this.exclusive=e,this},getBounds:function(e){if(void 0===e&&(e=new c),e.setTo(this.x,this.y,0,0),this.parentContainer){var t=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);e.setTo(t.x,t.y,0,0)}if(this.list.length>0){var i=this.list,r=new c,n=!1;e.setEmpty();for(var s=0;s<i.length;s++){var a=i[s];a.getBounds&&(a.getBounds(r),n?d(r,e,e):(e.setTo(r.x,r.y,r.width,r.height),n=!0))}}return e},addHandler:function(e){e.once(o.DESTROY,this.onChildDestroyed,this),this.exclusive&&(e.parentContainer&&e.parentContainer.remove(e),e.parentContainer=this,e.removeFromDisplayList(),e.addedToScene())},removeHandler:function(e){e.off(o.DESTROY,this.remove,this),this.exclusive&&(e.parentContainer=null,e.removedFromScene(),e.addToDisplayList())},pointToContainer:function(e,t){return void 0===t&&(t=new u),this.parentContainer?this.parentContainer.pointToContainer(e,t):(t.x=e.x,t.y=e.y),f.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),f.invert(),f.transformPoint(e.x,e.y,t),t},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(f,this.localTransform)},add:function(e){return r.Add(this.list,e,this.maxSize,this.addHandler,this),this},addAt:function(e,t){return r.AddAt(this.list,e,t,this.maxSize,this.addHandler,this),this},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e&&(void 0===t&&(t=function(t,i){return t[e]-i[e]}),r.StableSort(this.list,t)),this},getByName:function(e){return r.GetFirst(this.list,"name",e)},getRandom:function(e,t){return r.GetRandom(this.list,e,t)},getFirst:function(e,t,i,n){return r.GetFirst(this.list,e,t,i,n)},getAll:function(e,t,i,n){return r.GetAll(this.list,e,t,i,n)},count:function(e,t,i,n){return r.CountAllMatching(this.list,e,t,i,n)},swap:function(e,t){return r.Swap(this.list,e,t),this},moveTo:function(e,t){return r.MoveTo(this.list,e,t),this},moveAbove:function(e,t){return r.MoveAbove(this.list,e,t),this},moveBelow:function(e,t){return r.MoveBelow(this.list,e,t),this},remove:function(e,t){var i=r.Remove(this.list,e,this.removeHandler,this);if(t&&i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].destroy()}return this},removeAt:function(e,t){var i=r.RemoveAt(this.list,e,this.removeHandler,this);return t&&i&&i.destroy(),this},removeBetween:function(e,t,i){var n=r.RemoveBetween(this.list,e,t,this.removeHandler,this);if(i)for(var s=0;s<n.length;s++)n[s].destroy();return this},removeAll:function(e){var t=this.list;if(e){for(var i=0;i<t.length;i++)t[i]&&t[i].scene&&(t[i].off(o.DESTROY,this.onChildDestroyed,this),t[i].destroy());this.list=[]}else r.RemoveBetween(t,0,t.length,this.removeHandler,this);return this},bringToTop:function(e){return r.BringToTop(this.list,e),this},sendToBack:function(e){return r.SendToBack(this.list,e),this},moveUp:function(e){return r.MoveUp(this.list,e),this},moveDown:function(e){return r.MoveDown(this.list,e),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(e,t,i){return r.Replace(this.list,e,t)&&(this.addHandler(t),this.removeHandler(e),i&&e.destroy()),this},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,n){return r.SetAll(this.list,e,t,i,n),this},each:function(e,t){var i,r=[null],n=this.list.slice(),s=n.length;for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<s;i++)r[0]=n[i],e.apply(t,r);return this},iterate:function(e,t){var i,r=[null];for(i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<this.list.length;i++)r[0]=this.list[i],e.apply(t,r);return this},setScrollFactor:function(e,t,i){return void 0===t&&(t=e),void 0===i&&(i=!1),this.scrollFactorX=e,this.scrollFactorY=t,i&&(r.SetAll(this.list,"scrollFactorX",e),r.SetAll(this.list,"scrollFactorY",t)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0,this.list.length>0)?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(e){r.Remove(this.list,e),this.exclusive&&(e.parentContainer=null,e.removedFromScene())}})},53584:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t);var n=t.list;if(0!==n.length){var s=t.localTransform;r?(s.loadIdentity(),s.multiply(r),s.translate(t.x,t.y),s.rotate(t.rotation),s.scale(t.scaleX,t.scaleY)):s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var a=-1!==t.blendMode;a||e.setBlendMode(0);var o=t._alpha,h=t.scrollFactorX,c=t.scrollFactorY;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var l=0;l<n.length;l++){var d=n[l];if(d.willRender(i)){var u=d.alpha,f=d.scrollFactorX,p=d.scrollFactorY;a||d.blendMode===e.currentBlendMode||e.setBlendMode(d.blendMode),d.setScrollFactor(f*h,p*c),d.setAlpha(u*o),d.renderCanvas(e,d,i,s),d.setAlpha(u),d.setScrollFactor(f,p)}}t.mask&&t.mask.postRenderCanvas(e)}}},77143:(e,t,i)=>{var r=i(25305),n=i(31559),s=i(44603),a=i(23568),o=i(95540);s.register("container",function(e,t){void 0===e&&(e={});var i=a(e,"x",0),s=a(e,"y",0),h=o(e,"children",null),c=new n(this.scene,i,s,h);return void 0!==t&&(e.add=t),r(this.scene,c,e),c})},24961:(e,t,i)=>{var r=i(31559);i(39429).register("container",function(e,t,i){return this.displayList.add(new r(this.scene,e,t,i))})},29959:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(72249),renderCanvas:i(53584)}},72249:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t);var n=t.list,s=n.length;if(0!==s){var a=t.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(t.scaleX,t.scaleY)):a.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),e.pipelines.preBatch(t);var o=-1!==t.blendMode;o||e.setBlendMode(0);for(var h=t.alpha,c=t.scrollFactorX,l=t.scrollFactorY,d=0;d<s;d++){var u,f,p,g,m=n[d];if(m.willRender(i)){if(void 0!==m.alphaTopLeft)u=m.alphaTopLeft,f=m.alphaTopRight,p=m.alphaBottomLeft,g=m.alphaBottomRight;else{var v=m.alpha;u=v,f=v,p=v,g=v}var y=m.scrollFactorX,b=m.scrollFactorY;o||m.blendMode===e.currentBlendMode||e.setBlendMode(m.blendMode);var x=m.mask;x&&x.preRenderWebGL(e,m,i);var E=m.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=d<s-1&&n[d+1].type===e.currentType,m.setScrollFactor(y*c,b*l),m.setAlpha(u*h,f*h,p*h,g*h),m.renderWebGL(e,m,i,a,t),m.setAlpha(u,f,p,g),m.setScrollFactor(y,b),x&&x.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}}},47407:e=>{e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(441),a=i(95643),o=i(41212),h=i(35846),c=i(44594),l=i(61369);e.exports=new r({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,s],initialize:function(e,t,i,r,n,s){if(a.call(this,e,"DOMElement"),this.parent=e.sys.game.domContainer,!this.parent)throw Error("No DOM Container set in game config");this.cache=e.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new l,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(t,i),"string"==typeof r?"#"===r[0]?this.setElement(r.substr(1),n,s):this.createElement(r,n,s):r&&this.setElement(r,n,s),e.sys.events.on(c.SLEEP,this.handleSceneEvent,this),e.sys.events.on(c.WAKE,this.handleSceneEvent,this),e.sys.events.on(c.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(e){var t=this.node,i=t.style;t&&(i.display=e.settings.visible?"block":"none")},setSkew:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.skewX=e,this.skewY=t,this},setPerspective:function(e){return this.parent.style.perspective=e+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(e){this.parent.style.perspective=e+"px"}},addListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.addEventListener(e[t],this.handler,!1)}return this},removeListener:function(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++)this.node.removeEventListener(e[t],this.handler)}return this},dispatchNativeEvent:function(e){this.emit(e.type,e)},createElement:function(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function(e,t,i){var r;if(this.removeElement(),"string"==typeof e?("#"===e[0]&&(e=e.substr(1)),r=document.getElementById(e)):"object"==typeof e&&1===e.nodeType&&(r=e),!r)return this;if(this.node=r,t&&o(t))for(var n in t)r.style[n]=t[n];else"string"==typeof t&&(r.style=t);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent.appendChild(r),i&&(r.innerText=i),this.updateSize()},createFromCache:function(e,t){var i=this.cache.get(e);return i&&this.createFromHTML(i,t),this},createFromHTML:function(e,t){void 0===t&&(t="div"),this.removeElement();var i=document.createElement(t);return this.node=i,i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent.appendChild(i),i.innerHTML=e,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var e=this.node;return this.width=e.clientWidth,this.height=e.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(e,t){if(this.node){for(var i=this.node.querySelectorAll("*"),r=0;r<i.length;r++)if(i[r][e]===t)return i[r]}return null},getChildByID:function(e){return this.getChildByProperty("id",e)},getChildByName:function(e){return this.getChildByProperty("name",e)},setClassName:function(e){return this.node&&(this.node.className=e,this.updateSize()),this},setText:function(e){return this.node&&(this.node.innerText=e,this.updateSize()),this},setHTML:function(e){return this.node&&(this.node.innerHTML=e,this.updateSize()),this},preRender:function(){var e=this.parentContainer,t=this.node;t&&e&&!e.willRender()&&(t.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(c.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(c.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(c.PRE_RENDER,this.preRender,this)}})},49381:(e,t,i)=>{var r=i(47407),n=i(95643),s=i(61340),a=new s,o=new s,h=new s;e.exports=function(e,t,i,s){if(t.node){var c=t.node.style,l=t.scene.sys.settings;if(!c||!l.visible||n.RENDER_MASK!==t.renderFlags||0!==t.cameraFilter&&t.cameraFilter&i.id||t.parentContainer&&!t.parentContainer.willRender()){c.display="none";return}var d=t.parentContainer,u=i.alpha*t.alpha;d&&(u*=d.alpha);var f=0,p=0,g="0%",m="0%";s?(f=t.width*t.scaleX*t.originX,p=t.height*t.scaleY*t.originY,o.applyITRS(t.x-f,t.y-p,t.rotation,t.scaleX,t.scaleY),a.copyFrom(i.matrix),a.multiplyWithOffset(s,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),o.e=t.x-f,o.f=t.y-p,a.multiply(o,h)):(f=t.width*t.originX,p=t.height*t.originY,o.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),a.copyFrom(i.matrix),g=100*t.originX+"%",m=100*t.originY+"%",o.e-=i.scrollX*t.scrollFactorX,o.f-=i.scrollY*t.scrollFactorY,a.multiply(o,h),h.e-=f,h.f-=p),t.transformOnly||(c.display="block",c.opacity=u,c.zIndex=t._depth,c.pointerEvents=t.pointerEvents,c.mixBlendMode=r[t._blendMode]),c.transform=h.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")",c.transformOrigin=g+" "+m}}},2611:(e,t,i)=>{var r=i(3069);i(39429).register("dom",function(e,t,i,n,s){var a=new r(this.scene,e,t,i,n,s);return this.displayList.add(a),a})},441:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(49381),renderCanvas:i(49381)}},62980:e=>{e.exports="addedtoscene"},41337:e=>{e.exports="destroy"},44947:e=>{e.exports="removedfromscene"},49358:e=>{e.exports="complete"},35163:e=>{e.exports="created"},97249:e=>{e.exports="error"},19483:e=>{e.exports="locked"},56059:e=>{e.exports="loop"},26772:e=>{e.exports="metadata"},64437:e=>{e.exports="playing"},83411:e=>{e.exports="play"},75780:e=>{e.exports="seeked"},67799:e=>{e.exports="seeking"},63500:e=>{e.exports="stalled"},55541:e=>{e.exports="stop"},53208:e=>{e.exports="textureready"},4992:e=>{e.exports="unlocked"},12:e=>{e.exports="unsupported"},51708:(e,t,i)=>{e.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(64993);e.exports=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,a],initialize:function(e){s.call(this,e,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}})},70217:()=>{},56315:(e,t,i)=>{var r=i(42421);i(39429).register("extern",function(){var e=new r(this.scene);return this.displayList.add(e),e})},64993:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(80287),renderCanvas:i(70217)}},80287:(e,t,i)=>{var r=i(91296);e.exports=function(e,t,i,n){e.pipelines.clear();var s=r(t,i,n).calc;t.render.call(t,e,i,s),e.pipelines.rebind()}},85592:e=>{e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(e,t,i)=>{var r=i(71911),n=i(83419),s=i(85592),a=i(31401),o=i(8497),h=i(95643),c=i(95540),l=i(35154),d=i(36383),u=i(84503),f=new n({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,u],initialize:function(e,t){var i=l(t,"x",0),r=l(t,"y",0);h.call(this,e,"Graphics"),this.setPosition(i,r),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(t)},setDefaultStyles:function(e){return l(e,"lineStyle",null)&&(this.defaultStrokeWidth=l(e,"lineStyle.width",1),this.defaultStrokeColor=l(e,"lineStyle.color",0xffffff),this.defaultStrokeAlpha=l(e,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),l(e,"fillStyle",null)&&(this.defaultFillColor=l(e,"fillStyle.color",0xffffff),this.defaultFillAlpha=l(e,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(e,t,i){return void 0===i&&(i=1),this.commandBuffer.push(s.LINE_STYLE,e,t,i),this._lineWidth=e,this},fillStyle:function(e,t){return void 0===t&&(t=1),this.commandBuffer.push(s.FILL_STYLE,e,t),this},fillGradientStyle:function(e,t,i,r,n,a,o,h){return void 0===n&&(n=1),void 0===a&&(a=n),void 0===o&&(o=n),void 0===h&&(h=n),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,n,a,o,h,e,t,i,r),this},lineGradientStyle:function(e,t,i,r,n,a){return void 0===a&&(a=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,e,a,t,i,r,n),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,d.PI2),this.fillPath(),this},strokeCircle:function(e,t,i){return this.beginPath(),this.arc(e,t,i,0,d.PI2),this.strokePath(),this},fillRectShape:function(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function(e,t,i,r){return this.commandBuffer.push(s.FILL_RECT,e,t,i,r),this},strokeRect:function(e,t,i,r){var n=this._lineWidth/2,s=e-n,a=e+n;return this.beginPath(),this.moveTo(e,t),this.lineTo(e,t+r),this.strokePath(),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+i,t+r),this.strokePath(),this.beginPath(),this.moveTo(s,t),this.lineTo(a+i,t),this.strokePath(),this.beginPath(),this.moveTo(s,t+r),this.lineTo(a+i,t+r),this.strokePath(),this},fillRoundedRect:function(e,t,i,r,n){void 0===n&&(n=20);var s=n,a=n,o=n,h=n;"number"!=typeof n&&(s=c(n,"tl",20),a=c(n,"tr",20),o=c(n,"bl",20),h=c(n,"br",20));var l=s>=0,u=a>=0,f=o>=0,p=h>=0;return s=Math.abs(s),a=Math.abs(a),o=Math.abs(o),h=Math.abs(h),this.beginPath(),this.moveTo(e+s,t),this.lineTo(e+i-a,t),u?this.arc(e+i-a,t+a,a,-d.TAU,0):this.arc(e+i,t,a,Math.PI,d.TAU,!0),this.lineTo(e+i,t+r-h),p?this.arc(e+i-h,t+r-h,h,0,d.TAU):this.arc(e+i,t+r,h,-d.TAU,Math.PI,!0),this.lineTo(e+o,t+r),f?this.arc(e+o,t+r-o,o,d.TAU,Math.PI):this.arc(e,t+r,o,0,-d.TAU,!0),this.lineTo(e,t+s),l?this.arc(e+s,t+s,s,-Math.PI,-d.TAU):this.arc(e,t,s,d.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(e,t,i,r,n){void 0===n&&(n=20);var s=n,a=n,o=n,h=n,l=Math.min(i,r)/2;"number"!=typeof n&&(s=c(n,"tl",20),a=c(n,"tr",20),o=c(n,"bl",20),h=c(n,"br",20));var u=s>=0,f=a>=0,p=o>=0,g=h>=0;return s=Math.min(Math.abs(s),l),a=Math.min(Math.abs(a),l),o=Math.min(Math.abs(o),l),h=Math.min(Math.abs(h),l),this.beginPath(),this.moveTo(e+s,t),this.lineTo(e+i-a,t),this.moveTo(e+i-a,t),f?this.arc(e+i-a,t+a,a,-d.TAU,0):this.arc(e+i,t,a,Math.PI,d.TAU,!0),this.lineTo(e+i,t+r-h),this.moveTo(e+i,t+r-h),g?this.arc(e+i-h,t+r-h,h,0,d.TAU):this.arc(e+i,t+r,h,-d.TAU,Math.PI,!0),this.lineTo(e+o,t+r),this.moveTo(e+o,t+r),p?this.arc(e+o,t+r-o,o,d.TAU,Math.PI):this.arc(e,t+r,o,0,-d.TAU,!0),this.lineTo(e,t+s),this.moveTo(e,t+s),u?this.arc(e+s,t+s,s,-Math.PI,-d.TAU):this.arc(e,t,s,d.TAU,0,!0),this.strokePath(),this},fillPointShape:function(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function(e,t,i){return!i||i<1?i=1:(e-=i/2,t-=i/2),this.commandBuffer.push(s.FILL_RECT,e,t,i,i),this},fillTriangleShape:function(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function(e,t,i,r,n,a){return this.commandBuffer.push(s.FILL_TRIANGLE,e,t,i,r,n,a),this},strokeTriangle:function(e,t,i,r,n,a){return this.commandBuffer.push(s.STROKE_TRIANGLE,e,t,i,r,n,a),this},strokeLineShape:function(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function(e,t,i,r){return this.beginPath(),this.moveTo(e,t),this.lineTo(i,r),this.strokePath(),this},lineTo:function(e,t){return this.commandBuffer.push(s.LINE_TO,e,t),this},moveTo:function(e,t){return this.commandBuffer.push(s.MOVE_TO,e,t),this},strokePoints:function(e,t,i,r){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===r&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var n=1;n<r;n++)this.lineTo(e[n].x,e[n].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(e,t,i,r){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===r&&(r=e.length),this.beginPath(),this.moveTo(e[0].x,e[0].y);for(var n=1;n<r;n++)this.lineTo(e[n].x,e[n].y);return t&&this.lineTo(e[0].x,e[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(e,t){void 0===t&&(t=32);var i=e.getPoints(t);return this.strokePoints(i,!0)},strokeEllipse:function(e,t,i,r,n){void 0===n&&(n=32);var s=new o(e,t,i,r).getPoints(n);return this.strokePoints(s,!0)},fillEllipseShape:function(e,t){void 0===t&&(t=32);var i=e.getPoints(t);return this.fillPoints(i,!0)},fillEllipse:function(e,t,i,r,n){void 0===n&&(n=32);var s=new o(e,t,i,r).getPoints(n);return this.fillPoints(s,!0)},arc:function(e,t,i,r,n,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(s.ARC,e,t,i,r,n,a,o),this},slice:function(e,t,i,r,n,a,o){return void 0===a&&(a=!1),void 0===o&&(o=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,e,t),this.commandBuffer.push(s.ARC,e,t,i,r,n,a,o),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(e,t){return this.commandBuffer.push(s.TRANSLATE,e,t),this},scaleCanvas:function(e,t){return this.commandBuffer.push(s.SCALE,e,t),this},rotateCanvas:function(e){return this.commandBuffer.push(s.ROTATE,e),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(e,t,i){var r,n,s=this.scene.sys,a=s.game.renderer;void 0===t&&(t=s.scale.width),void 0===i&&(i=s.scale.height),f.TargetCamera.setScene(this.scene),f.TargetCamera.setViewport(0,0,t,i),f.TargetCamera.scrollX=this.x,f.TargetCamera.scrollY=this.y;var o={willReadFrequently:!0};if("string"==typeof e)if(s.textures.exists(e)){var h=(r=s.textures.get(e)).getSourceImage();h instanceof HTMLCanvasElement&&(n=h.getContext("2d",o))}else n=(r=s.textures.createCanvas(e,t,i)).getSourceImage().getContext("2d",o);else e instanceof HTMLCanvasElement&&(n=e.getContext("2d",o));return n&&(this.renderCanvas(a,this,f.TargetCamera,null,n,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});f.TargetCamera=new r,e.exports=f},32768:(e,t,i)=>{var r=i(85592),n=i(20926);e.exports=function(e,t,i,s,a,o){var h=t.commandBuffer,c=h.length,l=a||e.currentContext;if(0!==c&&n(e,l,t,i,s)){i.addToRenderList(t);var d=1,u=1,f=0,p=0,g=1;l.beginPath();for(var m=0;m<c;++m)switch(h[m]){case r.ARC:l.arc(h[m+1],h[m+2],h[m+3],h[m+4],h[m+5],h[m+6]),m+=7;break;case r.LINE_STYLE:g=h[m+1],l.strokeStyle="rgba("+((0xff0000&(f=h[m+2]))>>>16)+","+((65280&f)>>>8)+","+(255&f)+","+(d=h[m+3])+")",l.lineWidth=g,m+=3;break;case r.FILL_STYLE:l.fillStyle="rgba("+((0xff0000&(p=h[m+1]))>>>16)+","+((65280&p)>>>8)+","+(255&p)+","+(u=h[m+2])+")",m+=2;break;case r.BEGIN_PATH:l.beginPath();break;case r.CLOSE_PATH:l.closePath();break;case r.FILL_PATH:o||l.fill();break;case r.STROKE_PATH:o||l.stroke();break;case r.FILL_RECT:o?l.rect(h[m+1],h[m+2],h[m+3],h[m+4]):l.fillRect(h[m+1],h[m+2],h[m+3],h[m+4]),m+=4;break;case r.FILL_TRIANGLE:l.beginPath(),l.moveTo(h[m+1],h[m+2]),l.lineTo(h[m+3],h[m+4]),l.lineTo(h[m+5],h[m+6]),l.closePath(),o||l.fill(),m+=6;break;case r.STROKE_TRIANGLE:l.beginPath(),l.moveTo(h[m+1],h[m+2]),l.lineTo(h[m+3],h[m+4]),l.lineTo(h[m+5],h[m+6]),l.closePath(),o||l.stroke(),m+=6;break;case r.LINE_TO:l.lineTo(h[m+1],h[m+2]),m+=2;break;case r.MOVE_TO:l.moveTo(h[m+1],h[m+2]),m+=2;break;case r.LINE_FX_TO:l.lineTo(h[m+1],h[m+2]),m+=5;break;case r.MOVE_FX_TO:l.moveTo(h[m+1],h[m+2]),m+=5;break;case r.SAVE:l.save();break;case r.RESTORE:l.restore();break;case r.TRANSLATE:l.translate(h[m+1],h[m+2]),m+=2;break;case r.SCALE:l.scale(h[m+1],h[m+2]),m+=2;break;case r.ROTATE:l.rotate(h[m+1]),m+=1;break;case r.GRADIENT_FILL_STYLE:m+=5;break;case r.GRADIENT_LINE_STYLE:m+=6}l.restore()}}},87079:(e,t,i)=>{var r=i(44603),n=i(43831);r.register("graphics",function(e,t){void 0===e&&(e={}),void 0!==t&&(e.add=t);var i=new n(this.scene,e);return e.add&&this.scene.sys.displayList.add(i),i})},1201:(e,t,i)=>{var r=i(43831);i(39429).register("graphics",function(e){return this.displayList.add(new r(this.scene,e))})},84503:(e,t,i)=>{var r=i(29747),n=r;n=i(77545),i(32768),e.exports={renderWebGL:n,renderCanvas:i(32768)}},77545:(e,t,i)=>{var r=i(85592),n=i(91296),s=i(61340),a=i(70554),o=function(e,t,i){this.x=e,this.y=t,this.width=i},h=function(e,t,i){this.points=[],this.pointsLength=1,this.points[0]=new o(e,t,i)},c=[],l=new s;e.exports=function(e,t,i,s){if(0!==t.commandBuffer.length){i.addToRenderList(t);var d=e.pipelines.set(t.pipeline,t);e.pipelines.preBatch(t);for(var u=n(t,i,s).calc,f=l.loadIdentity(),p=t.commandBuffer,g=i.alpha*t.alpha,m=1,v=d.fillTint,y=d.strokeTint,b=0,x=0,E=0,T=2*Math.PI,A=[],w=0,S=!0,C=null,I=a.getTintAppendFloatAlpha,_=0;_<p.length;_++)switch(p[_]){case r.BEGIN_PATH:A.length=0,C=null,S=!0;break;case r.CLOSE_PATH:S=!1,C&&C.points.length&&C.points.push(C.points[0]);break;case r.FILL_PATH:for(w=0;w<A.length;w++)d.batchFillPath(A[w].points,f,u);break;case r.STROKE_PATH:for(w=0;w<A.length;w++)d.batchStrokePath(A[w].points,m,S,f,u);break;case r.LINE_STYLE:m=p[++_];var O=I(p[++_],p[++_]*g);y.TL=O,y.TR=O,y.BL=O,y.BR=O;break;case r.FILL_STYLE:var P=I(p[++_],p[++_]*g);v.TL=P,v.TR=P,v.BL=P,v.BR=P;break;case r.GRADIENT_FILL_STYLE:var M=p[++_]*g,R=p[++_]*g,L=p[++_]*g,D=p[++_]*g;v.TL=I(p[++_],M),v.TR=I(p[++_],R),v.BL=I(p[++_],L),v.BR=I(p[++_],D);break;case r.GRADIENT_LINE_STYLE:m=p[++_];var k=p[++_]*g;y.TL=I(p[++_],k),y.TR=I(p[++_],k),y.BL=I(p[++_],k),y.BR=I(p[++_],k);break;case r.ARC:var N=0,F=p[++_],B=p[++_],U=p[++_],G=p[++_],V=p[++_],Y=p[++_],j=p[++_];for(V-=G,Y?V<-T?V=-T:V>0&&(V=-T+V%T):V>T?V=T:V<0&&(V=T+V%T),null===C&&(C=new h(F+Math.cos(G)*U,B+Math.sin(G)*U,m),A.push(C),N+=.01);N<1+j;)b=F+Math.cos(E=V*N+G)*U,x=B+Math.sin(E)*U,C.points.push(new o(b,x,m)),N+=.01;b=F+Math.cos(E=V+G)*U,x=B+Math.sin(E)*U,C.points.push(new o(b,x,m));break;case r.FILL_RECT:d.batchFillRect(p[++_],p[++_],p[++_],p[++_],f,u);break;case r.FILL_TRIANGLE:d.batchFillTriangle(p[++_],p[++_],p[++_],p[++_],p[++_],p[++_],f,u);break;case r.STROKE_TRIANGLE:d.batchStrokeTriangle(p[++_],p[++_],p[++_],p[++_],p[++_],p[++_],m,f,u);break;case r.LINE_TO:null!==C?C.points.push(new o(p[++_],p[++_],m)):(C=new h(p[++_],p[++_],m),A.push(C));break;case r.MOVE_TO:C=new h(p[++_],p[++_],m),A.push(C);break;case r.SAVE:c.push(f.copyToArray());break;case r.RESTORE:f.copyFromArray(c.pop());break;case r.TRANSLATE:F=p[++_],B=p[++_],f.translate(F,B);break;case r.SCALE:F=p[++_],B=p[++_],f.scale(F,B);break;case r.ROTATE:f.rotate(p[++_])}e.pipelines.postBatch(t)}}},26479:(e,t,i)=>{var r=i(61061),n=i(83419),s=i(51708),a=i(50792),o=i(46710),h=i(95540),c=i(35154),l=i(97022),d=i(41212),u=i(88492),f=i(35072),p=i(68287);e.exports=new n({Extends:a,initialize:function(e,t,i){a.call(this),i?t&&!Array.isArray(t)&&(t=[t]):Array.isArray(t)?d(t[0])&&(i=t,t=null):d(t)&&(i=t,t=null),this.scene=e,this.children=new f,this.isParent=!0,this.type="Group",this.classType=h(i,"classType",p),this.name=h(i,"name",""),this.active=h(i,"active",!0),this.maxSize=h(i,"maxSize",-1),this.defaultKey=h(i,"defaultKey",null),this.defaultFrame=h(i,"defaultFrame",null),this.runChildUpdate=h(i,"runChildUpdate",!1),this.createCallback=h(i,"createCallback",null),this.removeCallback=h(i,"removeCallback",null),this.createMultipleCallback=h(i,"createMultipleCallback",null),this.internalCreateCallback=h(i,"internalCreateCallback",null),this.internalRemoveCallback=h(i,"internalRemoveCallback",null),t&&this.addMultiple(t),i&&this.createMultiple(i),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(e,t,i,r,n,s){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===n&&(n=!0),void 0===s&&(s=!0),this.isFull())return null;var a=new this.classType(this.scene,e,t,i,r);return a.addToDisplayList(this.scene.sys.displayList),a.addToUpdateList(),a.visible=n,a.setActive(s),this.add(a),a},createMultiple:function(e){if(this.isFull())return[];Array.isArray(e)||(e=[e]);var t=[];if(e[0].key)for(var i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(e){if(this.isFull())return[];this.classType=h(e,"classType",this.classType);var t=h(e,"key",void 0),i=h(e,"frame",null),n=h(e,"visible",!0),s=h(e,"active",!0),a=[];if(void 0===t)return a;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);var o=h(e,"repeat",0),d=h(e,"randomKey",!1),f=h(e,"randomFrame",!1),p=h(e,"yoyo",!1),g=h(e,"quantity",!1),m=h(e,"frameQuantity",1),v=u(t,i,{max:h(e,"max",0),qty:g||m,random:d,randomB:f,repeat:o,yoyo:p});e.createCallback&&(this.createCallback=e.createCallback),e.removeCallback&&(this.removeCallback=e.removeCallback),e.internalCreateCallback&&(this.internalCreateCallback=e.internalCreateCallback),e.internalRemoveCallback&&(this.internalRemoveCallback=e.internalRemoveCallback);for(var y=0;y<v.length;y++){var b=this.create(0,0,v[y].a,v[y].b,n,s);if(!b)break;a.push(b)}if(l(e,"setXY")){var x=c(e,"setXY.x",0),E=c(e,"setXY.y",0),T=c(e,"setXY.stepX",0),A=c(e,"setXY.stepY",0);r.SetXY(a,x,E,T,A)}if(l(e,"setRotation")){var w=c(e,"setRotation.value",0),S=c(e,"setRotation.step",0);r.SetRotation(a,w,S)}if(l(e,"setScale")){var C=c(e,"setScale.x",1),I=c(e,"setScale.y",C),_=c(e,"setScale.stepX",0),O=c(e,"setScale.stepY",0);r.SetScale(a,C,I,_,O)}if(l(e,"setOrigin")){var P=c(e,"setOrigin.x",.5),M=c(e,"setOrigin.y",P),R=c(e,"setOrigin.stepX",0),L=c(e,"setOrigin.stepY",0);r.SetOrigin(a,P,M,R,L)}if(l(e,"setAlpha")){var D=c(e,"setAlpha.value",1),k=c(e,"setAlpha.step",0);r.SetAlpha(a,D,k)}if(l(e,"setDepth")){var N=c(e,"setDepth.value",0),F=c(e,"setDepth.step",0);r.SetDepth(a,N,F)}if(l(e,"setScrollFactor")){var B=c(e,"setScrollFactor.x",1),U=c(e,"setScrollFactor.y",B),G=c(e,"setScrollFactor.stepX",0),V=c(e,"setScrollFactor.stepY",0);r.SetScrollFactor(a,B,U,G,V)}var Y=h(e,"hitArea",null),j=h(e,"hitAreaCallback",null);Y&&r.SetHitArea(a,Y,j);var W=h(e,"gridAlign",!1);return W&&r.GridAlign(a,W),this.createMultipleCallback&&this.createMultipleCallback.call(this,a),a},preUpdate:function(e,t){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var n=i[r];n.active&&n.update(e,t)}},add:function(e,t){return void 0===t&&(t=!1),this.isFull()||(this.children.set(e),this.internalCreateCallback&&this.internalCreateCallback.call(this,e),this.createCallback&&this.createCallback.call(this,e),t&&(e.addToDisplayList(this.scene.sys.displayList),e.addToUpdateList()),e.on(s.DESTROY,this.remove,this)),this},addMultiple:function(e,t){if(void 0===t&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.children.contains(e)&&(this.children.delete(e),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,e),this.removeCallback&&this.removeCallback.call(this,e),e.off(s.DESTROY,this.remove,this),i?e.destroy():t&&(e.removeFromDisplayList(),e.removeFromUpdateList())),this},clear:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var i=this.children,r=0;r<i.size;r++){var n=i.entries[r];n.off(s.DESTROY,this.remove,this),t?n.destroy():e&&(n.removeFromDisplayList(),n.removeFromUpdateList())}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(e,t,i,r){return o(this.children.entries,e,t,i,r)},getFirst:function(e,t,i,r,n,s,a){return this.getHandler(!0,1,e,t,i,r,n,s,a)},getFirstNth:function(e,t,i,r,n,s,a,o){return this.getHandler(!0,e,t,i,r,n,s,a,o)},getLast:function(e,t,i,r,n,s,a){return this.getHandler(!1,1,e,t,i,r,n,s,a)},getLastNth:function(e,t,i,r,n,s,a,o){return this.getHandler(!1,e,t,i,r,n,s,a,o)},getHandler:function(e,t,i,r,n,s,a,o,h){void 0===i&&(i=!1),void 0===r&&(r=!1);var c,l,d=0,u=this.children.entries;if(e)for(l=0;l<u.length;l++)if((c=u[l]).active===i){if(++d===t)break}else c=null;else for(l=u.length-1;l>=0;l--)if((c=u[l]).active===i){if(++d===t)break}else c=null;return c?("number"==typeof n&&(c.x=n),"number"==typeof s&&(c.y=s),c):r?this.create(n,s,a,o,h):null},get:function(e,t,i,r,n){return this.getFirst(!1,!0,e,t,i,r,n)},getFirstAlive:function(e,t,i,r,n,s){return this.getFirst(!0,e,t,i,r,n,s)},getFirstDead:function(e,t,i,r,n,s){return this.getFirst(!1,e,t,i,r,n,s)},playAnimation:function(e,t){return r.PlayAnimation(this.children.entries,e,t),this},isFull:function(){return -1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(e){void 0===e&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed();return(-1===this.maxSize?0xe8d4a50fff:this.maxSize)-e},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},propertyValueSet:function(e,t,i,n,s){return r.PropertyValueSet(this.children.entries,e,t,i,n,s),this},propertyValueInc:function(e,t,i,n,s){return r.PropertyValueInc(this.children.entries,e,t,i,n,s),this},setX:function(e,t){return r.SetX(this.children.entries,e,t),this},setY:function(e,t){return r.SetY(this.children.entries,e,t),this},setXY:function(e,t,i,n){return r.SetXY(this.children.entries,e,t,i,n),this},incX:function(e,t){return r.IncX(this.children.entries,e,t),this},incY:function(e,t){return r.IncY(this.children.entries,e,t),this},incXY:function(e,t,i,n){return r.IncXY(this.children.entries,e,t,i,n),this},shiftPosition:function(e,t,i){return r.ShiftPosition(this.children.entries,e,t,i),this},angle:function(e,t){return r.Angle(this.children.entries,e,t),this},rotate:function(e,t){return r.Rotate(this.children.entries,e,t),this},rotateAround:function(e,t){return r.RotateAround(this.children.entries,e,t),this},rotateAroundDistance:function(e,t,i){return r.RotateAroundDistance(this.children.entries,e,t,i),this},setAlpha:function(e,t){return r.SetAlpha(this.children.entries,e,t),this},setTint:function(e,t,i,n){return r.SetTint(this.children.entries,e,t,i,n),this},setOrigin:function(e,t,i,n){return r.SetOrigin(this.children.entries,e,t,i,n),this},scaleX:function(e,t){return r.ScaleX(this.children.entries,e,t),this},scaleY:function(e,t){return r.ScaleY(this.children.entries,e,t),this},scaleXY:function(e,t,i,n){return r.ScaleXY(this.children.entries,e,t,i,n),this},setDepth:function(e,t){return r.SetDepth(this.children.entries,e,t),this},setBlendMode:function(e){return r.SetBlendMode(this.children.entries,e),this},setHitArea:function(e,t){return r.SetHitArea(this.children.entries,e,t),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},setVisible:function(e,t,i){return r.SetVisible(this.children.entries,e,t,i),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.scene&&!this.ignoreDestroy&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(t,e),this.scene=void 0,this.children=void 0)}})},94975:(e,t,i)=>{var r=i(44603),n=i(26479);r.register("group",function(e){return new n(this.scene,null,e)})},3385:(e,t,i)=>{var r=i(26479);i(39429).register("group",function(e,t){return this.updateList.add(new r(this.scene,e,t))})},88571:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(59819);e.exports=new r({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,a],initialize:function(e,t,i,r,n){s.call(this,e,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setPosition(t,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}})},40652:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)}},82459:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(88571);n.register("image",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=s(e,"frame",null),o=new a(this.scene,0,0,i,n);return void 0!==t&&(e.add=t),r(this.scene,o,e),o})},2117:(e,t,i)=>{var r=i(88571);i(39429).register("image",function(e,t,i,n){return this.displayList.add(new r(this.scene,e,t,i,n))})},59819:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(99517),renderCanvas:i(40652)}},99517:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t),this.pipeline.batchSprite(t,i,r)}},77856:(e,t,i)=>{var r={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};r.Shader=i(20071),r.Mesh=i(4703),r.NineSlice=i(28103),r.PointLight=i(80321),r.Plane=i(33663),r.Factories.Shader=i(74177),r.Factories.Mesh=i(9225),r.Factories.NineSlice=i(47521),r.Factories.PointLight=i(71255),r.Factories.Plane=i(30985),r.Creators.Shader=i(54935),r.Creators.Mesh=i(20527),r.Creators.NineSlice=i(28279),r.Creators.PointLight=i(39829),r.Creators.Plane=i(56015),r.Light=i(41432),r.LightsManager=i(61356),r.LightsPlugin=i(88992),e.exports=r},93595:(e,t,i)=>{var r=i(10312),n=i(83419),s=i(31401),a=i(53774),o=i(45893),h=i(50792),c=i(51708),l=i(73162),d=i(33963),u=i(44594),f=i(19186);e.exports=new n({Extends:l,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.PostPipeline,s.Visible,h,d],initialize:function(e,t){l.call(this,e),h.call(this),this.scene=e,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=e.sys,this.events=e.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),t&&this.add(t),e.sys.queueDepthSort()},setActive:function(e){return this.active=e,this},setName:function(e){return this.name=e,this},setState:function(e){return this.state=e,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(e,t){return this.data||(this.data=new o(this)),this.data.set(e,t),this},incData:function(e,t){return this.data||(this.data=new o(this)),this.data.inc(e,t),this},toggleData:function(e){return this.data||(this.data=new o(this)),this.data.toggle(e),this},getData:function(e){return this.data||(this.data=new o(this)),this.data.get(e)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(e){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,t=this.parentContainer,i=[];t;)if(i.unshift(t.getIndex(e)),e=t,t.parentContainer)t=t.parentContainer;else break;return i.unshift(this.displayList.getIndex(e)),i},addChildCallback:function(e){var t=e.displayList;t&&t!==this&&e.removeFromDisplayList(),e.displayList||(this.queueDepthSort(),e.displayList=this,e.emit(c.ADDED_TO_SCENE,e,this.scene),this.events.emit(u.ADDED_TO_SCENE,e,this.scene))},removeChildCallback:function(e){this.queueDepthSort(),e.displayList=null,e.emit(c.REMOVED_FROM_SCENE,e,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,e,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(e,t){return e._depth-t._depth},getChildren:function(){return this.list},addToDisplayList:function(e){return void 0===e&&(e=this.scene.sys.displayList),this.displayList&&this.displayList!==e&&this.removeFromDisplayList(),e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(c.ADDED_TO_SCENE,this,this.scene),e.events.emit(u.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;return e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(c.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(u.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var e=null;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e},destroy:function(e){if(this.scene&&!this.ignoreDestroy){this.emit(c.DESTROY,this);for(var t=this.list;t.length;)t[0].destroy(e);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}})},2956:e=>{e.exports=function(e,t,i){var r=t.list;if(0!==r.length){t.depthSort();var n=-1!==t.blendMode;n||e.setBlendMode(0);var s=t._alpha;t.mask&&t.mask.preRenderCanvas(e,null,i);for(var a=0;a<r.length;a++){var o=r[a];if(o.willRender(i)){var h=o.alpha;n||o.blendMode===e.currentBlendMode||e.setBlendMode(o.blendMode),o.setAlpha(h*s),o.renderCanvas(e,o,i),o.setAlpha(h)}}t.mask&&t.mask.postRenderCanvas(e)}}},25179:(e,t,i)=>{var r=i(25305),n=i(93595),s=i(44603),a=i(23568);s.register("layer",function(e,t){void 0===e&&(e={});var i=a(e,"children",null),s=new n(this.scene,i);return void 0!==t&&(e.add=t),r(this.scene,s,e),s})},20005:(e,t,i)=>{var r=i(93595);i(39429).register("layer",function(e){return this.displayList.add(new r(this.scene,e))})},33963:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(15869),renderCanvas:i(2956)}},15869:e=>{e.exports=function(e,t,i){var r=t.list,n=r.length;if(0!==n){t.depthSort(),e.pipelines.preBatch(t);var s=-1!==t.blendMode;s||e.setBlendMode(0);for(var a=t.alpha,o=0;o<n;o++){var h,c,l,d,u=r[o];if(u.willRender(i)){if(void 0!==u.alphaTopLeft)h=u.alphaTopLeft,c=u.alphaTopRight,l=u.alphaBottomLeft,d=u.alphaBottomRight;else{var f=u.alpha;h=f,c=f,l=f,d=f}s||u.blendMode===e.currentBlendMode||e.setBlendMode(u.blendMode);var p=u.mask;p&&p.preRenderWebGL(e,u,i);var g=u.type;g!==e.currentType&&(e.newType=!0,e.currentType=g),e.nextTypeMatch=o<n-1&&r[o+1].type===e.currentType,u.setAlpha(h*a,c*a,l*a,d*a),u.renderWebGL(e,u,i),u.setAlpha(h,c,l,d),p&&p.postRenderWebGL(e,i),e.newType=!1}}e.pipelines.postBatch(t)}}},41432:(e,t,i)=>{var r=i(96503),n=i(83419),s=i(31401),a=i(51767),o=i(70554),h=new n({Extends:r,Mixins:[s.Origin,s.ScrollFactor,s.Visible],initialize:function(e,t,i,n,s,o,h){r.call(this,e,t,i),this.color=new a(n,s,o),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(i)},displayWidth:{get:function(){return this.diameter},set:function(e){this.diameter=e}},displayHeight:{get:function(){return this.diameter},set:function(e){this.diameter=e}},width:{get:function(){return this.diameter},set:function(e){this.diameter=e}},height:{get:function(){return this.diameter},set:function(e){this.diameter=e}},willRender:function(e){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},setColor:function(e){var t=o.getFloatsFromUintRGB(e);return this.color.set(t[0],t[1],t[2]),this},setIntensity:function(e){return this.intensity=e,this},setRadius:function(e){return this.radius=e,this}});h.RENDER_MASK=15,e.exports=h},61356:(e,t,i)=>{var r=i(81491),n=i(83419),s=i(20339),a=i(41432),o=i(80321),h=i(51767),c=i(19133),l=i(19186),d=i(70554);e.exports=new n({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(e,t,i,r,n,s){return this.systems.displayList.add(new o(this.scene,e,t,i,r,n,s))},enable:function(){return -1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(e){for(var t=this.lights,i=e.worldView,n=[],a=0;a<t.length;a++){var o=t[a];o.willRender(e)&&r(o,i)&&n.push({light:o,distance:s(o.x,o.y,i.centerX,i.centerY)})}return n.length>this.maxLights&&(l(n,this.sortByDistance),n=n.slice(0,this.maxLights)),this.visibleLights=n.length,n},sortByDistance:function(e,t){return e.distance>=t.distance},setAmbientColor:function(e){var t=d.getFloatsFromUintRGB(e);return this.ambientColor.set(t[0],t[1],t[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(e,t,i,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=128),void 0===r&&(r=0xffffff),void 0===n&&(n=1);var s=d.getFloatsFromUintRGB(r),o=new a(e,t,i,s[0],s[1],s[2],n);return this.lights.push(o),o},removeLight:function(e){var t=this.lights.indexOf(e);return t>=0&&c(this.lights,t),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}})},88992:(e,t,i)=>{var r=i(83419),n=i(61356),s=i(37277),a=i(44594),o=new r({Extends:n,initialize:function(e){this.scene=e,this.systems=e.sys,e.sys.settings.isBooted||e.sys.events.once(a.BOOT,this.boot,this),n.call(this)},boot:function(){var e=this.systems.events;e.on(a.SHUTDOWN,this.shutdown,this),e.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",o,"lights"),e.exports=o},4703:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(39506),a=i(83997),o=i(95643),h=i(34684),c=i(92515),l=i(91296),d=i(37867),u=i(29807),f=i(43396),p=i(19186),g=i(25836),m=i(39318);e.exports=new r({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.Texture,n.Transform,n.Visible,u],initialize:function(e,t,i,r,n,s,a,h,c,l,u,f){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r="__WHITE"),o.call(this,e,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var p=e.sys.renderer;this.setPosition(t,i),this.setTexture(r,n),this.setSize(p.width,p.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(p.width,p.height),s&&this.addVertices(s,a,h,c,l,u,f)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(e){return this.viewPosition.addScale(g.LEFT,e),this.dirtyCache[10]=1,this},panY:function(e){return this.viewPosition.y+=g.DOWN.y*e,this.dirtyCache[10]=1,this},panZ:function(e){return this.viewPosition.z+=e,this.dirtyCache[10]=1,this},setPerspective:function(e,t,i,r,n){return void 0===i&&(i=45),void 0===r&&(r=.01),void 0===n&&(n=1e3),this.fov=i,this.projectionMatrix.perspective(s(i),e/t,r,n),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(e,t,i,r){return void 0===e&&(e=this.scene.sys.renderer.getAspectRatio()),void 0===t&&(t=1),void 0===i&&(i=-1e3),void 0===r&&(r=1e3),this.fov=0,this.projectionMatrix.ortho(-e,e,-t,t,i,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(e){e.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(e,t,i,r,n,s,a,o,c){var l,d=this.scene.sys.cache.obj.get(e);return d&&(l=h(d,this,t,i,r,n,s,a,o,c)),l&&0!==l.verts.length||console.warn("Mesh.addVerticesFromObj data empty:",e),this},sortByDepth:function(e,t){return e.depth-t.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(e,t,i,r,n,s,a){var o=new m(e,t,i,r,n,s,a);return this.vertices.push(o),o},addFace:function(e,t,i){var r=new a(e,t,i);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(e,t,i,r,n,s,a){var o=c(e,t,i,r,n,s,a);return o?(this.faces=this.faces.concat(o.faces),this.vertices=this.vertices.concat(o.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(e){return this.faces[e]},hasFaceAt:function(e,t,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var r=l(this,i).calc,n=this.faces,s=0;s<n.length;s++)if(n[s].contains(e,t,r))return!0;return!1},getFaceAt:function(e,t,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var r=l(this,i).calc,n=this.faces,s=[],a=0;a<n.length;a++){var o=n[a];o.contains(e,t,r)&&s.push(o)}return p(s,this.sortByDepth)},setDebug:function(e,t){return this.debugGraphic=e,e||t?t?this.debugCallback=t:this.debugCallback=this.renderDebug:this.debugCallback=null,this},isDirty:function(){var e=this.modelPosition,t=this.modelRotation,i=this.modelScale,r=this.dirtyCache,n=e.x,s=e.y,a=e.z,o=t.x,h=t.y,c=t.z,l=i.x,d=i.y,u=i.z,f=this.getFaceCount(),p=r[0],g=r[1],m=r[2],v=r[3],y=r[4],b=r[5],x=r[6],E=r[7],T=r[8],A=r[9];return r[0]=n,r[1]=s,r[2]=a,r[3]=o,r[4]=h,r[5]=c,r[6]=l,r[7]=d,r[8]=u,r[9]=f,p!==n||g!==s||m!==a||v!==o||y!==h||b!==c||x!==l||E!==d||T!==u||A!==f},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var e=this.dirtyCache;if(this.ignoreDirtyCache||e[10]||this.isDirty()){var t=this.width,i=this.height,r=this.viewMatrix,n=this.viewPosition;e[10]&&(r.identity(),r.translate(n),r.invert(),e[10]=0);var s=this.transformMatrix;s.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var a=n.z,o=this.faces,h=0;h<o.length;h++)o[h].transformCoordinatesLocal(s,t,i,a);this.depthSort()}},renderDebug:function(e,t){for(var i=e.debugGraphic,r=0;r<t.length;r++){var n=t[r],s=n.vertex1.tx,a=n.vertex1.ty,o=n.vertex2.tx,h=n.vertex2.ty,c=n.vertex3.tx,l=n.vertex3.ty;i.strokeTriangle(s,a,o,h,c,l)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(e){void 0===e&&(e={});var t=(function(e,t,i){for(var r=this.faces,n=0;n<r.length;n++)if(r[n].contains(t,i))return!0;return!1}).bind(this);return this.scene.sys.input.enable(this,e,t),this},setTint:function(e){void 0===e&&(e=0xffffff);for(var t=this.vertices,i=0;i<t.length;i++)t[i].color=e;return this},uvScroll:function(e,t){for(var i=this.faces,r=0;r<i.length;r++)i[r].scrollUV(e,t);return this},uvScale:function(e,t){for(var i=this.faces,r=0;r<i.length;r++)i[r].scaleUV(e,t);return this},tint:{set:function(e){this.setTint(e)}},rotateX:{get:function(){return f(this.modelRotation.x)},set:function(e){this.modelRotation.x=s(e)}},rotateY:{get:function(){return f(this.modelRotation.y)},set:function(e){this.modelRotation.y=s(e)}},rotateZ:{get:function(){return f(this.modelRotation.z)},set:function(e){this.modelRotation.z=s(e)}}})},36488:e=>{e.exports=function(){}},20527:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(35154),o=i(4703);n.register("mesh",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=s(e,"frame",null),h=a(e,"vertices",[]),c=a(e,"uvs",[]),l=a(e,"indicies",[]),d=a(e,"containsZ",!1),u=a(e,"normals",[]),f=a(e,"colors",0xffffff),p=a(e,"alphas",1),g=new o(this.scene,0,0,i,n,h,c,l,d,u,f,p);return void 0!==t&&(e.add=t),r(this.scene,g,e),g})},9225:(e,t,i)=>{var r=i(4703);i(39429).register("mesh",function(e,t,i,n,s,a,o,h,c,l,d){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o,h,c,l,d))})},29807:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(48833),renderCanvas:i(36488)}},48833:(e,t,i)=>{var r=i(91296);e.exports=function(e,t,i,n){var s=t.faces,a=s.length;if(0!==a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline,t),h=r(t,i,n).calc;e.pipelines.preBatch(t);for(var c=o.setGameObject(t),l=o.vertexViewF32,d=o.vertexViewU32,u=o.vertexCount*o.currentShader.vertexComponentCount-1,f=t.tintFill,p=[],g=t.debugCallback,m=h.a,v=h.b,y=h.c,b=h.d,x=h.e,E=h.f,T=t.viewPosition.z,A=t.hideCCW,w=i.roundPixels,S=i.alpha*t.alpha,C=0,I=0;I<a;I++){var _=s[I];_.isInView(i,A,T,S,m,v,y,b,x,E,w)&&(o.shouldFlush(3)&&(o.flush(),c=o.setGameObject(t),u=o.vertexCount*o.currentShader.vertexComponentCount-1),u=_.load(l,d,u,c,f),C++,o.vertexCount+=3,o.currentBatch.count=o.vertexCount-o.currentBatch.start,g&&p.push(_))}t.totalFrame+=C,g&&g.call(t,t,p),e.pipelines.postBatch(t)}}},28103:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(78023),o=i(39318);e.exports=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Transform,n.Visible,a],initialize:function(e,t,i,r,n,a,h,c,l,d,u){s.call(this,e,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=0xffffff,this.tintFill=!1;var f=e.textures.getFrame(r,n);this.is3Slice=!d&&!u,f&&f.scale9&&(this.is3Slice=f.is3Slice);for(var p=this.is3Slice?18:54,g=0;g<p;g++)this.vertices.push(new o);this.setPosition(t,i),this.setTexture(r,n),this.setSlices(a,h,c,l,d,u,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(e,t,i,r,n,s,a){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=!1);var o=this.frame,h=!1;if(this.is3Slice&&a&&0!==n&&0!==s&&(h=!0),h)console.warn("Cannot change 9 slice to 3 slice");else{if(o&&o.scale9&&!a){var c=o.data.scale9Borders,l=c.x,d=c.y;i=l,r=o.width-c.w-l,n=d,s=o.height-c.h-d,void 0===e&&(e=o.width),void 0===t&&(t=o.height)}else void 0===e&&(e=256),void 0===t&&(t=256);this._width=e,this._height=t,this.leftWidth=i,this.rightWidth=r,this.topHeight=n,this.bottomHeight=s,this.is3Slice&&(t=o.height,this._height=t,this.topHeight=t,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var e=this.leftWidth,t=this.rightWidth,i=this.topHeight,r=this.bottomHeight,n=this.frame.width,s=this.frame.height;this.updateQuadUVs(0,0,0,e/n,i/s),this.updateQuadUVs(6,e/n,0,1-t/n,i/s),this.updateQuadUVs(12,1-t/n,0,1,i/s),this.is3Slice||(this.updateQuadUVs(18,0,i/s,e/n,1-r/s),this.updateQuadUVs(24,e/n,i/s,1-t/n,1-r/s),this.updateQuadUVs(30,1-t/n,i/s,1,1-r/s),this.updateQuadUVs(36,0,1-r/s,e/n,1),this.updateQuadUVs(42,e/n,1-r/s,1-t/n,1),this.updateQuadUVs(48,1-t/n,1-r/s,1,1))},updateVertices:function(){var e=this.leftWidth,t=this.rightWidth,i=this.topHeight,r=this.bottomHeight,n=this.width,s=this.height;this.updateQuad(0,-.5,.5,-.5+e/n,.5-i/s),this.updateQuad(6,-.5+e/n,.5,.5-t/n,.5-i/s),this.updateQuad(12,.5-t/n,.5,.5,.5-i/s),this.is3Slice||(this.updateQuad(18,-.5,.5-i/s,-.5+e/n,-.5+r/s),this.updateQuad(24,-.5+e/n,.5-i/s,.5-t/n,-.5+r/s),this.updateQuad(30,.5-t/n,.5-i/s,.5,-.5+r/s),this.updateQuad(36,-.5,-.5+r/s,-.5+e/n,-.5),this.updateQuad(42,-.5+e/n,-.5+r/s,.5-t/n,-.5),this.updateQuad(48,.5-t/n,-.5+r/s,.5,-.5))},updateQuad:function(e,t,i,r,n){var s=this.width,a=this.height,o=this.originX,h=this.originY,c=this.vertices;c[e+0].resize(t,i,s,a,o,h),c[e+1].resize(t,n,s,a,o,h),c[e+2].resize(r,i,s,a,o,h),c[e+3].resize(t,n,s,a,o,h),c[e+4].resize(r,n,s,a,o,h),c[e+5].resize(r,i,s,a,o,h)},updateQuadUVs:function(e,t,i,r,n){var s=this.vertices,a=this.frame,o=a.u0,h=a.v0,c=a.u1,l=a.v1;if(0!==o||1!==c){var d=c-o;t=o+t*d,r=o+r*d}if(0!==h||1!==l){var u=l-h;i=h+i*u,n=h+n*u}s[e+0].setUVs(t,i),s[e+1].setUVs(t,n),s[e+2].setUVs(r,i),s[e+3].setUVs(t,n),s[e+4].setUVs(r,n),s[e+5].setUVs(r,i)},clearTint:function(){return this.setTint(0xffffff),this},setTint:function(e){return void 0===e&&(e=0xffffff),this.tint=e,this.tintFill=!1,this},setTintFill:function(e){return this.setTint(e),this.tintFill=!0,this},isTinted:{get:function(){return 0xffffff!==this.tint}},width:{get:function(){return this._width},set:function(e){this._width=Math.max(e,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(e){this.is3Slice||(this._height=Math.max(e,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t){this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},originX:{get:function(){return this._originX},set:function(e){this._originX=e,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(e){this._originY=e,this.updateVertices()}},setOrigin:function(e,t){return void 0===e&&(e=.5),void 0===t&&(t=e),this._originX=e,this._originY=t,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var e=this.frame.height;this._height=e,this.topHeight=e,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}})},28279:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(35154),o=i(28103);n.register("nineslice",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=s(e,"frame",null),h=a(e,"width",256),c=a(e,"height",256),l=a(e,"leftWidth",10),d=a(e,"rightWidth",10),u=a(e,"topHeight",0),f=a(e,"bottomHeight",0),p=new o(this.scene,0,0,i,n,h,c,l,d,u,f);return void 0!==t&&(e.add=t),r(this.scene,p,e),p})},47521:(e,t,i)=>{var r=i(28103);i(39429).register("nineslice",function(e,t,i,n,s,a,o,h,c,l){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o,h,c,l))})},78023:(e,t,i)=>{var r=i(29747);e.exports={renderWebGL:i(52230),renderCanvas:r}},52230:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){var a=t.vertices,o=a.length;if(0!==o){i.addToRenderList(t);var h=e.pipelines.set(t.pipeline,t),c=r(t,i,s,!1).calc;e.pipelines.preBatch(t);var l=h.setGameObject(t),d=h.vertexViewF32,u=h.vertexViewU32,f=h.vertexCount*h.currentShader.vertexComponentCount-1,p=i.roundPixels,g=t.tintFill,m=i.alpha*t.alpha,v=n.getTintAppendFloatAlpha(t.tint,m),y=h.vertexAvailable(),b=-1;y<o&&(b=y);for(var x=0;x<o;x++){var E=a[x];x===b&&(h.flush(),l=h.setGameObject(t),f=0),d[++f]=c.getXRound(E.vx,E.vy,p),d[++f]=c.getYRound(E.vx,E.vy,p),d[++f]=E.u,d[++f]=E.v,d[++f]=l,d[++f]=g,u[++f]=v,h.vertexCount++,h.currentBatch.count=h.vertexCount-h.currentBatch.start}e.pipelines.postBatch(t)}}},76472:(e,t,i)=>{var r=i(83419),n=i(44777),s=i(37589),a=i(6113),o=i(91389),h=i(90664);e.exports=new r({Extends:n,initialize:function(e){n.call(this,e,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return 9*(null!==this.propertyValue)},setMethods:function(){var e=this.propertyValue,t=e,i=this.defaultEmit,r=this.defaultUpdate;if(9===this.method){this.start=e[0],this.ease=a("Linear"),this.interpolation=o("linear"),i=this.easedValueEmit,r=this.easeValueUpdate,t=e[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var n=0;n<e.length;n++){var s=h(e[n]);this.r.push(s.r),this.g.push(s.g),this.b.push(s.b)}}return this.onEmit=i,this.onUpdate=r,this.current=t,this},setEase:function(e){this.easeName=e,this.ease=a(e)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(e,t,i){var r=this.ease(i),n=s(this.interpolation(this.r,r),this.interpolation(this.g,r),this.interpolation(this.b,r));return this.current=n,n}})},44777:(e,t,i)=>{var r=i(30976),n=i(45319),s=i(83419),a=i(99472),o=i(6113),h=i(95540),c=i(91389),l=i(77720),d=i(15994);e.exports=new s({initialize:function(e,t,i){void 0===i&&(i=!1),this.propertyKey=e,this.propertyValue=t,this.defaultValue=t,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=i,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(e,t){void 0===e&&(e={}),t&&(this.propertyKey=t),this.propertyValue=h(e,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(e){var t;switch(this.method){case 1:case 3:case 8:t=e;break;case 2:this.propertyValue.indexOf(e)>=0&&(t=e);break;case 4:t=l(e,(this.end-this.start)/this.steps),this.counter=t;break;case 5:case 6:case 7:t=n(e,this.start,this.end);break;case 9:t=this.start[0]}return this.current=t,this},getMethod:function(){var e=this.propertyValue;if(null===e)return 0;var t=typeof e;if("number"===t)return 1;if(Array.isArray(e))return 2;if("function"===t)return 3;if("object"===t){if(this.hasBoth(e,"start","end"))if(this.has(e,"steps"))return 4;else return 5;else if(this.hasBoth(e,"min","max"))return 6;else if(this.has(e,"random"))return 7;else if(this.hasEither(e,"onEmit","onUpdate"))return 8;else if(this.hasEither(e,"values","interpolation"))return 9}return 0},setMethods:function(){var e=this.propertyValue,t=e,i=this.defaultEmit,r=this.defaultUpdate;switch(this.method){case 1:i=this.staticValueEmit;break;case 2:i=this.randomStaticValueEmit,t=e[0];break;case 3:this._onEmit=e,i=this.proxyEmit,t=this.defaultValue;break;case 4:this.start=e.start,this.end=e.end,this.steps=e.steps,this.counter=this.start,this.yoyo=!!this.has(e,"yoyo")&&e.yoyo,this.direction=0,i=this.steppedEmit,t=this.start;break;case 5:this.start=e.start,this.end=e.end;var n=this.has(e,"ease")?e.ease:"Linear";this.ease=o(n,e.easeParams),i=this.has(e,"random")&&e.random?this.randomRangedValueEmit:this.easedValueEmit,r=this.easeValueUpdate,t=this.start;break;case 6:this.start=e.min,this.end=e.max,i=this.has(e,"int")&&e.int?this.randomRangedIntEmit:this.randomRangedValueEmit,t=this.start;break;case 7:var s=e.random;Array.isArray(s)&&(this.start=s[0],this.end=s[1]),i=this.randomRangedIntEmit,t=this.start;break;case 8:this._onEmit=this.has(e,"onEmit")?e.onEmit:this.defaultEmit,this._onUpdate=this.has(e,"onUpdate")?e.onUpdate:this.defaultUpdate,i=this.proxyEmit,r=this.proxyUpdate,t=this.defaultValue;break;case 9:this.start=e.values;var a=this.has(e,"ease")?e.ease:"Linear";this.ease=o(a,e.easeParams),this.interpolation=c(e.interpolation),i=this.easedValueEmit,r=this.easeValueUpdate,t=this.start[0]}return this.onEmit=i,this.onUpdate=r,this.current=t,this},has:function(e,t){return e.hasOwnProperty(t)},hasBoth:function(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(e,t,i,r){return r},proxyEmit:function(e,t,i){var r=this._onEmit(e,t,i);return this.current=r,r},proxyUpdate:function(e,t,i,r){var n=this._onUpdate(e,t,i,r);return this.current=n,n},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[e],this.current},randomRangedValueEmit:function(e,t){var i=a(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=i,e.data[t].max=this.end),this.current=i,i},randomRangedIntEmit:function(e,t){var i=r(this.start,this.end);return e&&e.data[t]&&(e.data[t].min=i,e.data[t].max=this.end),this.current=i,i},steppedEmit:function(){var e,t=this.counter,i=t,r=(this.end-this.start)/this.steps;return this.yoyo?(0===this.direction?(i+=r)>=this.end&&(e=i-this.end,i=this.end-e,this.direction=1):(i-=r)<=this.start&&(e=this.start-i,i=this.start+e,this.direction=0),this.counter=i):this.counter=d(i+r,this.start,this.end),this.current=t,t},easedValueEmit:function(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start,i.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(e,t,i){var r,n=e.data[t],s=this.ease(i);return r=this.interpolation?this.interpolation(this.start,s):(n.max-n.min)*s+n.min,this.current=r,r},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}})},24502:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(20286);e.exports=new r({Extends:s,initialize:function(e,t,i,r,a){if("object"==typeof e){var o=e;e=n(o,"x",0),t=n(o,"y",0),i=n(o,"power",0),r=n(o,"epsilon",100),a=n(o,"gravity",50)}else void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=100),void 0===a&&(a=50);s.call(this,e,t,!0),this._gravity=a,this._power=i*a,this._epsilon=r*r},update:function(e,t){var i=this.x-e.x,r=this.y-e.y,n=i*i+r*r;if(0!==n){var s=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var a=this._power*t/(n*s)*100;e.velocityX+=i*a,e.velocityY+=r*a}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(e){this._epsilon=e*e}},power:{get:function(){return this._power/this._gravity},set:function(e){this._power=e*this._gravity}},gravity:{get:function(){return this._gravity},set:function(e){var t=this.power;this._gravity=e,this.power=t}}})},56480:(e,t,i)=>{var r=i(9674),n=i(45319),s=i(83419),a=i(39506),o=i(87841),h=i(11520),c=i(26099);e.exports=new s({initialize:function(e){this.emitter=e,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new c,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=0xffffff,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:0xffffff,max:0xffffff},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=e.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new r(this)),this.bounds=new o},emit:function(e,t,i,r,n,s){return this.emitter.emit(e,t,i,r,n,s)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t},fire:function(e,t){var i=this.emitter,r=i.ops,n=i.getAnim();if(n?this.anims.play(n):(this.frame=i.getFrame(),this.texture=this.frame.texture),!this.frame)throw Error("Particle has no texture frame");if(i.getEmitZone(this),void 0===e?this.x+=r.x.onEmit(this,"x"):r.x.steps>0?this.x+=e+r.x.onEmit(this,"x"):this.x+=e,void 0===t?this.y+=r.y.onEmit(this,"y"):r.y.steps>0?this.y+=t+r.y.onEmit(this,"y"):this.y+=t,this.life=r.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=r.delay.onEmit(this,"delay"),this.holdCurrent=r.hold.onEmit(this,"hold"),this.scaleX=r.scaleX.onEmit(this,"scaleX"),this.scaleY=r.scaleY.active?r.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=r.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),i.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),0===this.delayCurrent&&i.getDeathZone(this))return this.lifeCurrent=0,!1;var s=r.speedX.onEmit(this,"speedX"),o=r.speedY.active?r.speedY.onEmit(this,"speedY"):s;if(i.radial){var h=a(r.angle.onEmit(this,"angle"));this.velocityX=Math.cos(h)*Math.abs(s),this.velocityY=Math.sin(h)*Math.abs(o)}else if(i.moveTo){var c=r.moveToX.onEmit(this,"moveToX"),l=r.moveToY.onEmit(this,"moveToY"),d=this.life/1e3;this.velocityX=(c-this.x)/d,this.velocityY=(l-this.y)/d}else this.velocityX=s,this.velocityY=o;return i.acceleration&&(this.accelerationX=r.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=r.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=r.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=r.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=r.bounce.onEmit(this,"bounce"),this.alpha=r.alpha.onEmit(this,"alpha"),r.color.active?this.tint=r.color.onEmit(this,"tint"):this.tint=r.tint.onEmit(this,"tint"),!0},update:function(e,t,i){if(this.lifeCurrent<=0)if(this.holdCurrent>0)return this.holdCurrent-=e,this.holdCurrent<=0;else return!0;if(this.delayCurrent>0)return this.delayCurrent-=e,!1;this.anims&&this.anims.update(0,e);var r=this.emitter,s=r.ops,o=1-this.lifeCurrent/this.life;if(this.lifeT=o,this.x=s.x.onUpdate(this,"x",o,this.x),this.y=s.y.onUpdate(this,"y",o,this.y),r.moveTo){var h=s.moveToX.onUpdate(this,"moveToX",o,r.moveToX),c=s.moveToY.onUpdate(this,"moveToY",o,r.moveToY),l=this.lifeCurrent/1e3;this.velocityX=(h-this.x)/l,this.velocityY=(c-this.y)/l}return(this.computeVelocity(r,e,t,i,o),this.scaleX=s.scaleX.onUpdate(this,"scaleX",o,this.scaleX),s.scaleY.active?this.scaleY=s.scaleY.onUpdate(this,"scaleY",o,this.scaleY):this.scaleY=this.scaleX,this.angle=s.rotate.onUpdate(this,"rotate",o,this.angle),this.rotation=a(this.angle),r.getDeathZone(this))?(this.lifeCurrent=0,!0):(this.alpha=n(s.alpha.onUpdate(this,"alpha",o,this.alpha),0,1),s.color.active?this.tint=s.color.onUpdate(this,"color",o,this.tint):this.tint=s.tint.onUpdate(this,"tint",o,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(e,t,i,r,s){var a=e.ops,o=this.velocityX,h=this.velocityY,c=a.accelerationX.onUpdate(this,"accelerationX",s,this.accelerationX),l=a.accelerationY.onUpdate(this,"accelerationY",s,this.accelerationY),d=a.maxVelocityX.onUpdate(this,"maxVelocityX",s,this.maxVelocityX),u=a.maxVelocityY.onUpdate(this,"maxVelocityY",s,this.maxVelocityY);this.bounce=a.bounce.onUpdate(this,"bounce",s,this.bounce),o+=e.gravityX*i+c*i,h+=e.gravityY*i+l*i,o=n(o,-d,d),h=n(h,-u,u),this.velocityX=o,this.velocityY=h,this.x+=o*i,this.y+=h*i,e.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var f=0;f<r.length;f++){var p=r[f];p.active&&p.update(this,t,i,s)}},setSizeToFrame:function(){},getBounds:function(e){void 0===e&&(e=this.emitter.getWorldTransformMatrix());var t=Math.abs(e.scaleX)*this.scaleX,i=Math.abs(e.scaleY)*this.scaleY,r=this.x,n=this.y,s=this.rotation,a=this.frame.width*t/2,o=this.frame.height*i/2,l=this.bounds,d=new c(r-a,n-o),u=new c(r+a,n-o),f=new c(r-a,n+o),p=new c(r+a,n+o);return 0!==s&&(h(d,r,n,s),h(u,r,n,s),h(f,r,n,s),h(p,r,n,s)),e.transformPoint(d.x,d.y,d),e.transformPoint(u.x,u.y,u),e.transformPoint(f.x,f.y,f),e.transformPoint(p.x,p.y,p),l.x=Math.min(d.x,u.x,f.x,p.x),l.y=Math.min(d.y,u.y,f.y,p.y),l.width=Math.max(d.x,u.x,f.x,p.x)-l.x,l.height=Math.max(d.y,u.y,f.y,p.y)-l.y,l},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}})},69601:(e,t,i)=>{var r=i(83419),n=i(20286),s=i(87841);e.exports=new r({Extends:n,initialize:function(e,t,i,r,a,o,h,c){void 0===a&&(a=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),void 0===c&&(c=!0),n.call(this,e,t,!0),this.bounds=new s(e,t,i,r),this.collideLeft=a,this.collideRight=o,this.collideTop=h,this.collideBottom=c},update:function(e){var t=this.bounds,i=-e.bounce,r=e.worldPosition;r.x<t.x&&this.collideLeft?(e.x+=t.x-r.x,e.velocityX*=i):r.x>t.right&&this.collideRight&&(e.x-=r.x-t.right,e.velocityX*=i),r.y<t.y&&this.collideTop?(e.y+=t.y-r.y,e.velocityY*=i):r.y>t.bottom&&this.collideBottom&&(e.y-=r.y-t.bottom,e.velocityY*=i)}})},31600:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(53774),a=i(43459),o=i(26388),h=i(19909),c=i(76472),l=i(44777),d=i(20696),u=i(95643),f=i(95540),p=i(26546),g=i(24502),m=i(69036),v=i(1985),y=i(97022),b=i(86091),x=i(73162),E=i(20074),T=i(269),A=i(56480),w=i(69601),S=i(68875),C=i(87841),I=i(59996),_=i(72905),O=i(90668),P=i(19186),M=i(61340),R=i(26099),L=i(15994),D=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],k=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"];e.exports=new r({Extends:u,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Transform,n.Visible,O],initialize:function(e,t,i,r,n){u.call(this,e,"ParticleEmitter"),this.particleClass=A,this.config=null,this.ops={accelerationX:new l("accelerationX",0),accelerationY:new l("accelerationY",0),alpha:new l("alpha",1),angle:new l("angle",{min:0,max:360},!0),bounce:new l("bounce",0),color:new c("color"),delay:new l("delay",0,!0),hold:new l("hold",0,!0),lifespan:new l("lifespan",1e3,!0),maxVelocityX:new l("maxVelocityX",1e4),maxVelocityY:new l("maxVelocityY",1e4),moveToX:new l("moveToX",0),moveToY:new l("moveToY",0),quantity:new l("quantity",1,!0),rotate:new l("rotate",0),scaleX:new l("scaleX",1),scaleY:new l("scaleY",1),speedX:new l("speedX",0,!0),speedY:new l("speedY",0,!0),tint:new l("tint",0xffffff),x:new l("x",0),y:new l("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new R,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new M,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new x(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(t,i),this.setTexture(r),n&&this.setConfig(n)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(e){if(!e)return this;this.config=e;var t=0,i="",r=this.ops;for(t=0;t<k.length;t++)r[i=k[t]].loadConfig(e);for(t=0;t<D.length;t++)y(e,i=D[t])&&(this[i]=f(e,i));if(this.acceleration=0!==this.accelerationX||0!==this.accelerationY,this.moveTo=m(e,["moveToX","moveToY"]),y(e,"speed")&&(r.speedX.loadConfig(e,"speed"),r.speedY.active=!1),(v(e,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),y(e,"scale")&&(r.scaleX.loadConfig(e,"scale"),r.scaleY.active=!1),y(e,"callbackScope")){var n=f(e,"callbackScope",null);this.emitCallbackScope=n,this.deathCallbackScope=n}if(y(e,"emitZone")&&this.addEmitZone(e.emitZone),y(e,"deathZone")&&this.addDeathZone(e.deathZone),y(e,"bounds")){var s=this.addParticleBounds(e.bounds);s.collideLeft=f(e,"collideLeft",!0),s.collideRight=f(e,"collideRight",!0),s.collideTop=f(e,"collideTop",!0),s.collideBottom=f(e,"collideBottom",!0)}return y(e,"followOffset")&&this.followOffset.setFromObject(f(e,"followOffset",0)),y(e,"texture")&&this.setTexture(e.texture),y(e,"frame")?this.setEmitterFrame(e.frame):y(e,"anim")&&this.setAnim(e.anim),y(e,"reserve")&&this.reserve(e.reserve),y(e,"advance")&&this.fastForward(e.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(d.START,this),this},updateConfig:function(e){return e&&(this.config?this.setConfig(T(this.config,e)):this.setConfig(e)),this},toJSON:function(){var e=s(this),t=0,i="";for(t=0;t<D.length;t++)e[i=D[t]]=this[i];var r=this.ops;for(t=0;t<k.length;t++)r[i=k[t]]&&(e[i]=r[i].toJSON());return r.speedY.active||(delete e.speedX,e.speed=r.speedX.toJSON()),this.scaleX===this.scaleY&&(delete e.scaleX,delete e.scaleY,e.scale=r.scaleX.toJSON()),e},resetCounters:function(e,t){var i=this.counters;i.fill(0),i[0]=e,t&&(i[5]=1)},startFollow:function(e,t,i,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=!1),this.follow=e,this.followOffset.set(t,i),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var e,t=this.frames,i=t.length;return 1===i?e=t[0]:this.randomFrame?e=p(t):(e=t[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===i&&(this.currentFrame=0))),this.texture.get(e)},setEmitterFrame:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=1),this.randomFrame=t,this.frameQuantity=i,this.currentFrame=0;var r=typeof e;if(this.frames.length=0,Array.isArray(e))this.frames=this.frames.concat(e);else if("string"===r||"number"===r)this.frames.push(e);else if("object"===r){var n=e;(e=f(n,"frames",null))&&(this.frames=this.frames.concat(e));var s=f(n,"cycle",!1);this.randomFrame=!s,this.frameQuantity=f(n,"quantity",i)}return 1===this.frames.length&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var e=this.anims,t=e.length;if(0===t)return null;if(1===t)return e[0];if(this.randomAnim)return p(e);var i=e[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=L(this.currentAnim+1,0,t)),i},setAnim:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=1),this.randomAnim=t,this.animQuantity=i,this.currentAnim=0;var r=typeof e;if(this.anims.length=0,Array.isArray(e))this.anims=this.anims.concat(e);else if("string"===r)this.anims.push(e);else if("object"===r){var n=e;(e=f(n,"anims",null))&&(this.anims=this.anims.concat(e));var s=f(n,"cycle",!1);this.randomAnim=!s,this.animQuantity=f(n,"quantity",i)}return 1===this.anims.length&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(e){return void 0===e&&(e=!0),this.radial=e,this},addParticleBounds:function(e,t,i,r,n,s,a,o){if("object"==typeof e){var h=e;e=h.x,t=h.y,i=y(h,"w")?h.w:h.width,r=y(h,"h")?h.h:h.height}return this.addParticleProcessor(new w(e,t,i,r,n,s,a,o))},setParticleSpeed:function(e,t){return void 0===t&&(t=e),this.ops.speedX.onChange(e),e===t?this.ops.speedY.active=!1:this.ops.speedY.onChange(t),this.radial=!0,this},setParticleScale:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=e),this.ops.scaleX.onChange(e),this.ops.scaleY.onChange(t),this},setParticleGravity:function(e,t){return this.gravityX=e,this.gravityY=t,this},setParticleAlpha:function(e){return this.ops.alpha.onChange(e),this},setParticleTint:function(e){return this.ops.tint.onChange(e),this},setEmitterAngle:function(e){return this.ops.angle.onChange(e),this},setParticleLifespan:function(e){return this.ops.lifespan.onChange(e),this},setQuantity:function(e){return this.quantity=e,this},setFrequency:function(e,t){return this.frequency=e,this.flowCounter=e>0?e:0,t&&(this.quantity=t),this},addDeathZone:function(e){Array.isArray(e)||(e=[e]);for(var t,i=[],r=0;r<e.length;r++)if((t=e[r])instanceof o)i.push(t);else if("function"==typeof t.contains)t=new o(t,!0),i.push(t);else{var n=f(t,"type","onEnter"),s=f(t,"source",null);s&&"function"==typeof s.contains&&(t=new o(s,"onEnter"===n),i.push(t))}return this.deathZones=this.deathZones.concat(i),i},removeDeathZone:function(e){return _(this.deathZones,e),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(e){Array.isArray(e)||(e=[e]);for(var t,i=[],r=0;r<e.length;r++)if((t=e[r])instanceof S||t instanceof h)i.push(t);else{var n=f(t,"source",null);if(n){var s=f(t,"type","random");"random"===s&&"function"==typeof n.getRandomPoint?(t=new S(n),i.push(t)):"edge"===s&&"function"==typeof n.getPoints&&(t=new h(n,f(t,"quantity",1),f(t,"stepRate",0),f(t,"yoyo",!1),f(t,"seamless",!0),f(t,"total",-1)),i.push(t))}}return this.emitZones=this.emitZones.concat(i),i},removeEmitZone:function(e){return _(this.emitZones,e),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(e){var t=this.emitZones,i=t.length;if(0!==i){var r=t[this.zoneIndex];r.getPoint(e),r.total>-1&&(this.zoneTotal++,this.zoneTotal===r.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===i&&(this.zoneIndex=0)))}},getDeathZone:function(e){for(var t=this.deathZones,i=0;i<t.length;i++){var r=t[i];if(r.willKill(e))return this.emit(d.DEATH_ZONE,this,e,r),!0}return!1},setEmitZone:function(e){var t;return(t=isFinite(e)?e:this.emitZones.indexOf(e))>=0&&(this.zoneIndex=t),this},addParticleProcessor:function(e){return this.processors.exists(e)||(e.emitter&&e.emitter.removeParticleProcessor(e),this.processors.add(e),e.emitter=this),e},removeParticleProcessor:function(e){return this.processors.exists(e)&&(this.processors.remove(e,!0),e.emitter=null),e},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(e){return this.addParticleProcessor(new g(e))},reserve:function(e){var t=this.dead;if(this.maxParticles>0){var i=this.getParticleCount();i+e>this.maxParticles&&(e=this.maxParticles-(i+e))}for(var r=0;r<e;r++)t.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return!!(this.maxParticles>0&&this.getParticleCount()>=this.maxParticles)||this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(e,t){return void 0===e?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof e&&(this.emitCallback=e,t&&(this.emitCallbackScope=t)),this},onParticleDeath:function(e,t){return void 0===e?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof e&&(this.deathCallback=e,t&&(this.deathCallbackScope=t)),this},killAll:function(){for(var e=this.dead,t=this.alive;t.length>0;)e.push(t.pop());return this},forEachAlive:function(e,t){for(var i=this.alive,r=i.length,n=0;n<r;n++)e.call(t,i[n],this);return this},forEachDead:function(e,t){for(var i=this.dead,r=i.length,n=0;n<r;n++)e.call(t,i[n],this);return this},start:function(e,t){return void 0===e&&(e=0),this.emitting||(e>0&&this.fastForward(e),this.emitting=!0,this.resetCounters(this.frequency,!0),void 0!==t&&(this.duration=Math.abs(t)),this.emit(d.START,this)),this},stop:function(e){return void 0===e&&(e=!1),this.emitting&&(this.emitting=!1,e&&this.killAll(),this.emit(d.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=this.true),this.sortProperty=e,this.sortOrderAsc=t,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(e){return e=""!==this.sortProperty?this.depthSortCallback:null,this.sortCallback=e,this},depthSort:function(){return P(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(e,t){var i=this.sortProperty;return this.sortOrderAsc?e[i]-t[i]:t[i]-e[i]},flow:function(e,t,i){return void 0===t&&(t=1),this.emitting=!1,this.frequency=e,this.quantity=t,void 0!==i&&(this.stopAfter=i),this.start()},explode:function(e,t,i){this.frequency=-1,this.resetCounters(-1,!0);var r=this.emitParticle(e,t,i);return this.emit(d.EXPLODE,this,r),r},emitParticleAt:function(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function(e,t,i){if(!this.atLimit()){void 0===e&&(e=this.ops.quantity.onEmit());for(var r=this.dead,n=this.stopAfter,s=this.follow?this.follow.x+this.followOffset.x:t,a=this.follow?this.follow.y+this.followOffset.y:i,o=0;o<e;o++){var h=r.pop();if(h||(h=new this.particleClass(this)),h.fire(s,a)?(this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this)):this.dead.push(h),n>0&&(this.stopCounter++,this.stopCounter>=n)||this.atLimit())break}return h}},fastForward:function(e,t){void 0===t&&(t=1e3/60);var i=0;for(this.skipping=!0;i<Math.abs(e);)this.preUpdate(0,t),i+=t;return this.skipping=!1,this},preUpdate:function(e,t){var i=(t*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var r=this.getProcessors(),n=this.alive,s=this.dead,a=0,o=[],h=n.length;for(a=0;a<h;a++){var c=n[a];c.update(t,i,r)&&o.push({index:a,particle:c})}if((h=o.length)>0){var l=this.deathCallback,u=this.deathCallbackScope;for(a=h-1;a>=0;a--){var f=o[a];n.splice(f.index,1),s.push(f.particle),l&&l.call(u,f.particle),f.particle.setPosition()}}if(!this.emitting&&!this.skipping){1===this.completeFlag&&0===n.length&&(this.completeFlag=0,this.emit(d.COMPLETE,this));return}if(0===this.frequency)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=t;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;!this.skipping&&(this.duration>0&&(this.elapsed+=t,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(e){for(var t=this.getWorldTransformMatrix(),i=this.alive,r=i.length,n=[],s=0;s<r;s++){var a=i[s];I(e,a.getBounds(t))&&n.push(a)}return n},getBounds:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=1e3/60),void 0===r&&(r=new C);var n,s,o=this.getWorldTransformMatrix(),h=this.alive,c=!1;if(r.setTo(0,0,0,0),t>0){var l=0;for(this.skipping=!0;l<Math.abs(t);){for(this.preUpdate(0,i),n=0;n<h.length;n++)s=h[n].getBounds(o),c?E(r,s):(c=!0,a(s,r));l+=i}this.skipping=!1}else for(n=0;n<h.length;n++)s=h[n].getBounds(o),c?E(r,s):(c=!0,a(s,r));return e>0&&b(r,e,e),r},createEmitter:function(){throw Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(e){this.ops.x.onChange(e)}},particleY:{get:function(){return this.ops.y.current},set:function(e){this.ops.y.onChange(e)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(e){this.ops.accelerationX.onChange(e)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(e){this.ops.accelerationY.onChange(e)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(e){this.ops.maxVelocityX.onChange(e)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(e){this.ops.maxVelocityY.onChange(e)}},speed:{get:function(){return this.ops.speedX.current},set:function(e){this.ops.speedX.onChange(e),this.ops.speedY.onChange(e)}},speedX:{get:function(){return this.ops.speedX.current},set:function(e){this.ops.speedX.onChange(e)}},speedY:{get:function(){return this.ops.speedY.current},set:function(e){this.ops.speedY.onChange(e)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(e){this.ops.moveToX.onChange(e)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(e){this.ops.moveToY.onChange(e)}},bounce:{get:function(){return this.ops.bounce.current},set:function(e){this.ops.bounce.onChange(e)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(e){this.ops.scaleX.onChange(e)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(e){this.ops.scaleY.onChange(e)}},particleColor:{get:function(){return this.ops.color.current},set:function(e){this.ops.color.onChange(e)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(e){this.ops.color.setEase(e)}},particleTint:{get:function(){return this.ops.tint.current},set:function(e){this.ops.tint.onChange(e)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(e){this.ops.alpha.onChange(e)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(e){this.ops.lifespan.onChange(e)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(e){this.ops.angle.onChange(e)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(e){this.ops.rotate.onChange(e)}},quantity:{get:function(){return this.ops.quantity.current},set:function(e){this.ops.quantity.onChange(e)}},delay:{get:function(){return this.ops.delay.current},set:function(e){this.ops.delay.onChange(e)}},hold:{get:function(){return this.ops.hold.current},set:function(e){this.ops.hold.onChange(e)}},flowCounter:{get:function(){return this.counters[0]},set:function(e){this.counters[0]=e}},frameCounter:{get:function(){return this.counters[1]},set:function(e){this.counters[1]=e}},animCounter:{get:function(){return this.counters[2]},set:function(e){this.counters[2]=e}},elapsed:{get:function(){return this.counters[3]},set:function(e){this.counters[3]=e}},stopCounter:{get:function(){return this.counters[4]},set:function(e){this.counters[4]=e}},completeFlag:{get:function(){return this.counters[5]},set:function(e){this.counters[5]=e}},zoneIndex:{get:function(){return this.counters[6]},set:function(e){this.counters[6]=e}},zoneTotal:{get:function(){return this.counters[7]},set:function(e){this.counters[7]=e}},currentFrame:{get:function(){return this.counters[8]},set:function(e){this.counters[8]=e}},currentAnim:{get:function(){return this.counters[9]},set:function(e){this.counters[9]=e}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var e,t=this.ops;for(e=0;e<k.length;e++)t[k[e]].destroy();for(e=0;e<this.alive.length;e++)this.alive[e].destroy();for(e=0;e<this.dead.length;e++)this.dead[e].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}})},9871:(e,t,i)=>{var r=i(59996),n=i(61340),s=new n,a=new n,o=new n,h=new n;e.exports=function(e,t,i,n){n?(h.loadIdentity(),h.multiply(n),h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.scaleX,t.scaleY)):h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var c=e.currentContext,l=i.roundPixels,d=i.alpha,u=t.alpha,f=t.alive,p=f.length,g=t.viewBounds;if(t.visible&&0!==p&&(!g||r(g,i.worldView))){t.sortCallback&&t.depthSort(),i.addToRenderList(t);var m=t.scrollFactorX,v=t.scrollFactorY;c.save(),c.globalCompositeOperation=e.blendModes[t.blendMode];for(var y=0;y<p;y++){var b=f[y],x=b.alpha*u*d;if(!(x<=0)&&0!==b.scaleX&&0!==b.scaleY){o.applyITRS(b.x,b.y,b.rotation,b.scaleX,b.scaleY),s.copyFrom(i.matrix),s.multiplyWithOffset(h,-i.scrollX*m,-i.scrollY*v),o.e=b.x,o.f=b.y,s.multiply(o,a);var E=b.frame,T=E.canvasData;if(T.width>0&&T.height>0){var A=-E.halfWidth,w=-E.halfHeight;c.globalAlpha=x,c.save(),a.setToContext(c),l&&(A=Math.round(A),w=Math.round(w)),c.imageSmoothingEnabled=!E.source.scaleMode,c.drawImage(E.source.image,T.x,T.y,T.width,T.height,A,w,T.width,T.height),c.restore()}}}c.restore()}}},92730:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(95540),o=i(31600);n.register("particles",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=a(e,"config",null),h=new o(this.scene,0,0,i);return void 0!==t&&(e.add=t),r(this.scene,h,e),n&&h.setConfig(n),h})},676:(e,t,i)=>{var r=i(39429),n=i(31600);r.register("particles",function(e,t,i,r){return void 0!==e&&"string"==typeof e&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new n(this.scene,e,t,i,r))})},90668:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(21188),renderCanvas:i(9871)}},21188:(e,t,i)=>{var r=i(59996),n=i(61340),s=i(70554),a=new n,o=new n,h=new n,c=new n;e.exports=function(e,t,i,n){var l,d,u=e.pipelines.set(t.pipeline);n?(c.loadIdentity(),c.multiply(n),c.translate(t.x,t.y),c.rotate(t.rotation),c.scale(t.scaleX,t.scaleY)):c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);var f=s.getTintAppendFloatAlpha,p=i.alpha,g=t.alpha;e.pipelines.preBatch(t);var m=t.alive,v=m.length,y=t.viewBounds;if(0!==v&&(!y||r(y,i.worldView))){t.sortCallback&&t.depthSort(),i.addToRenderList(t),a.copyFrom(i.matrix),a.multiplyWithOffset(c,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),e.setBlendMode(t.blendMode),t.mask&&(t.mask.preRenderWebGL(e,t,i),e.pipelines.set(t.pipeline));for(var b=t.tintFill,x=0;x<v;x++){var E=m[x],T=E.alpha*g*p;if(!(T<=0)&&0!==E.scaleX&&0!==E.scaleY){h.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY),h.e=E.x,h.f=E.y,a.multiply(h,o);var A=E.frame;A.glTexture!==d&&(d=A.glTexture,l=u.setGameObject(t,A));var w=-A.halfWidth,S=-A.halfHeight,C=o.setQuad(w,S,w+A.width,S+A.height),I=f(E.tint,T);u.shouldFlush(6)&&(u.flush(),l=u.setGameObject(t,A)),u.batchQuad(t,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],A.u0,A.v0,A.u1,A.v1,I,I,I,I,b,d,l)}}t.mask&&t.mask.postRenderWebGL(e,i),e.pipelines.postBatch(t)}}},20286:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!0),this.emitter,this.x=e,this.y=t,this.active=i},update:function(){},destroy:function(){this.emitter=null}})},9774:e=>{e.exports="complete"},812:e=>{e.exports="deathzone"},30522:e=>{e.exports="explode"},96695:e=>{e.exports="start"},18677:e=>{e.exports="stop"},20696:(e,t,i)=>{e.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(e,t,i)=>{e.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t){this.source=e,this.killOnEnter=t},willKill:function(e){var t=e.worldPosition,i=this.source.contains(t.x,t.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}})},19909:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r,n,s){void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===s&&(s=-1),this.source=e,this.points=[],this.quantity=t,this.stepRate=i,this.yoyo=r,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.total=s,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var e=this.points[0],t=this.points[this.points.length-1];e.x===t.x&&e.y===t.y&&this.points.pop()}var i=this._length;return this._length=this.points.length,this._length<i&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(e){return this.source=e,this.updateSource()},getPoint:function(e){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var t=this.points[this.counter];t&&(e.x=t.x,e.y=t.y)}})},68875:(e,t,i)=>{var r=i(83419),n=i(26099);e.exports=new r({initialize:function(e){this.source=e,this._tempVec=new n,this.total=-1},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}})},21024:(e,t,i)=>{e.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(68287);e.exports=new r({Extends:s,Mixins:[n.PathFollower],initialize:function(e,t,i,r,n,a){s.call(this,e,i,r,n,a),this.path=t},preUpdate:function(e,t){this.anims.update(e,t),this.pathUpdate(e)}})},90145:(e,t,i)=>{var r=i(39429),n=i(1159);r.register("follower",function(e,t,i,r,s){var a=new n(this.scene,e,t,i,r,s);return this.displayList.add(a),this.updateList.add(a),a})},33663:(e,t,i)=>{var r=i(9674),n=i(83419),s=i(48803),a=i(90664),o=i(4703),h=i(45650);e.exports=new n({Extends:o,initialize:function(e,t,i,n,s,a,h,c){n||(n="__DEFAULT"),o.call(this,e,t,i,n,s),this.type="Plane",this.anims=new r(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(a,h,c),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(e,t,i){void 0===e&&(e=8),void 0===t&&(t=8),void 0===i&&(i=!1);var r=!1;return i&&(r=!0),this.gridWidth=e,this.gridHeight=t,this.isTiled=i,this.clear(),s({mesh:this,widthSegments:e,heightSegments:t,isOrtho:!1,tile:i,flipY:r}),this},setSizeToFrame:function(e){void 0===e&&(e=!0);var t,i,r=this.frame;if(this.setPerspective(this.width/r.width,this.height/r.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!e)return this;var n=this.gridWidth,s=this.gridHeight,a=this.vertices,o=r.u0,h=r.u1,c=r.v0,l=r.v1,d=0;if(this.isTiled)for(i=0,c=r.v1,l=r.v0;i<s;i++)for(t=0;t<n;t++)a[d++].setUVs(o,l),a[d++].setUVs(o,c),a[d++].setUVs(h,l),a[d++].setUVs(o,c),a[d++].setUVs(h,c),a[d++].setUVs(h,l);else{var u=n+1,f=s+1,p=h-o,g=l-c,m=[];for(i=0;i<f;i++)for(t=0;t<u;t++){var v=o+t/n*p,y=c+i/s*g;m.push(v,y)}for(i=0;i<s;i++)for(t=0;t<n;t++){var b=(t+u*i)*2,x=(t+u*(i+1))*2,E=(t+1+u*(i+1))*2,T=(t+1+u*i)*2;a[d++].setUVs(m[b],m[b+1]),a[d++].setUVs(m[x],m[x+1]),a[d++].setUVs(m[T],m[T+1]),a[d++].setUVs(m[x],m[x+1]),a[d++].setUVs(m[E],m[E+1]),a[d++].setUVs(m[T],m[T+1])}}return this},setViewHeight:function(e){void 0===e&&(e=this.frame.height);var t=this.fov*(Math.PI/180);this.viewPosition.z=this.height/e/Math.tan(t/2),this.dirtyCache[10]=1},createCheckerboard:function(e,t,i,r,n){void 0===e&&(e=0xffffff),void 0===t&&(t=255),void 0===i&&(i=255),void 0===r&&(r=255),void 0===n&&(n=128);for(var s=a(e),o=a(t),c=[],l=0;l<16;l++)for(var d=0;d<16;d++)l<8&&d<8||l>7&&d>7?c.push(s.r,s.g,s.b,i):c.push(o.r,o.g,o.b,r);var u=this.scene.sys.textures.addUint8Array(h(),new Uint8Array(c),16,16);return this.removeCheckerboard(),this.setTexture(u),this.setSizeToFrame(),this.setViewHeight(n),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},preUpdate:function(e,t){o.prototype.preUpdate.call(this,e,t),this.anims.update(e,t)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}})},56015:(e,t,i)=>{var r=i(25305),n=i(13059),s=i(44603),a=i(23568),o=i(35154),h=i(33663);s.register("plane",function(e,t){void 0===e&&(e={});var i=a(e,"key",null),s=a(e,"frame",null),c=o(e,"width",8),l=o(e,"height",8),d=o(e,"tile",!1),u=new h(this.scene,0,0,i,s,c,l,d);void 0!==t&&(e.add=t);var f=o(e,"checkerboard",null);if(f){var p=o(f,"color1",0xffffff),g=o(f,"color2",255),m=o(f,"alpha1",255),v=o(f,"alpha2",255),y=o(f,"height",128);u.createCheckerboard(p,g,m,v,y)}return r(this.scene,u,e),n(u,e),u})},30985:(e,t,i)=>{var r=i(33663);i(39429).register("plane",function(e,t,i,n,s,a,o){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o))})},80321:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(30100),o=i(36060),h=i(67277);e.exports=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Transform,n.Visible,h],initialize:function(e,t,i,r,n,h,c){void 0===r&&(r=0xffffff),void 0===n&&(n=128),void 0===h&&(h=1),void 0===c&&(c=.1),s.call(this,e,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(t,i),this.color=a(r),this.intensity=h,this.attenuation=c,this.width=2*n,this.height=2*n,this._radius=n},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this.width=2*e,this.height=2*e}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}})},39829:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(80321);n.register("pointlight",function(e,t){void 0===e&&(e={});var i=s(e,"color",0xffffff),n=s(e,"radius",128),o=s(e,"intensity",1),h=s(e,"attenuation",.1),c=new a(this.scene,0,0,i,n,o,h);return void 0!==t&&(e.add=t),r(this.scene,c,e),c})},71255:(e,t,i)=>{var r=i(39429),n=i(80321);r.register("pointlight",function(e,t,i,r,s,a){return this.displayList.add(new n(this.scene,e,t,i,r,s,a))})},67277:(e,t,i)=>{var r=i(29747);e.exports={renderWebGL:i(57787),renderCanvas:r}},57787:(e,t,i)=>{var r=i(91296);e.exports=function(e,t,i,n){i.addToRenderList(t);var s=e.pipelines.set(t.pipeline),a=r(t,i,n).calc,o=t.width,h=t.height,c=-t._radius,l=-t._radius,d=c+o,u=l+h,f=a.getX(0,0),p=a.getY(0,0),g=a.getX(c,l),m=a.getY(c,l),v=a.getX(c,u),y=a.getY(c,u),b=a.getX(d,u),x=a.getY(d,u),E=a.getX(d,l),T=a.getY(d,l);e.pipelines.preBatch(t),s.batchPointLight(t,i,g,m,v,y,b,x,E,T,f,p),e.pipelines.postBatch(t)}},591:(e,t,i)=>{var r=i(83419),n=i(81320),s=i(88571);e.exports=new r({Extends:s,initialize:function(e,t,i,r,a,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=32),void 0===a&&(a=32),void 0===o&&(o=!0);var h=new n(e.sys.textures,"",r,a,o);s.call(this,e,t,i,h),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(e,t){this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},resize:function(e,t,i){return this.texture.setSize(e,t,i),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(e){var t=this.texture;return t.key=e,t.manager.addDynamicTexture(t)&&(this._saved=!0),t},fill:function(e,t,i,r,n,s){return this.texture.fill(e,t,i,r,n,s),this},clear:function(){return this.texture.clear(),this},stamp:function(e,t,i,r,n){return this.texture.stamp(e,t,i,r,n),this},erase:function(e,t,i){return this.texture.erase(e,t,i),this},draw:function(e,t,i,r,n){return this.texture.draw(e,t,i,r,n),this},drawFrame:function(e,t,i,r,n,s){return this.texture.drawFrame(e,t,i,r,n,s),this},repeat:function(e,t,i,r,n,s,a,o,h){return this.texture.repeat(e,t,i,r,n,s,a,o,h),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(e,t,i,r,n){return this.texture.batchDraw(e,t,i,r,n),this},batchDrawFrame:function(e,t,i,r,n,s){return this.texture.batchDrawFrame(e,t,i,r,n,s),this},endDraw:function(e){return this.texture.endDraw(e),this},snapshotArea:function(e,t,i,r,n,s,a){return this.texture.snapshotArea(e,t,i,r,n,s,a),this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.width,this.height,e,t,i)},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}})},34495:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(591);n.register("renderTexture",function(e,t){void 0===e&&(e={});var i=s(e,"x",0),n=s(e,"y",0),o=s(e,"width",32),h=s(e,"height",32),c=new a(this.scene,i,n,o,h);return void 0!==t&&(e.add=t),r(this.scene,c,e),c})},60505:(e,t,i)=>{var r=i(39429),n=i(591);r.register("renderTexture",function(e,t,i,r){return this.displayList.add(new n(this.scene,e,t,i,r))})},77757:(e,t,i)=>{var r=i(9674),n=i(83419),s=i(31401),a=i(95643),o=i(36060),h=i(38745),c=i(26099);e.exports=new n({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.PostPipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,h],initialize:function(e,t,i,n,s,h,l,d,u){void 0===n&&(n="__DEFAULT"),void 0===h&&(h=2),void 0===l&&(l=!0),a.call(this,e,"Rope"),this.anims=new r(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n,this.dirty=!1,this.horizontal=l,this._flipX=!1,this._flipY=!1,this._perp=new c,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,s),this.setPosition(t,i),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,d,u),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){var i=this.anims.currentFrame;this.anims.update(e,t),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(e,t,i){return this.anims.play(e,t,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(e,t,i){return(void 0===e&&(e=this.points.length),this.horizontal)?this:(this.horizontal=!0,this.setPoints(e,t,i))},setVertical:function(e,t,i){return(void 0===e&&(e=this.points.length),this.horizontal)?(this.horizontal=!1,this.setPoints(e,t,i)):this},setTintFill:function(e){return void 0===e&&(e=!1),this.tintFill=e,this},setAlphas:function(e,t){var i,r=this.points.length;if(r<1)return this;var n=this.alphas;void 0===e?e=[1]:Array.isArray(e)||void 0!==t||(e=[e]);var s=0;if(void 0!==t)for(i=0;i<r;i++)n[s=2*i]=e,n[s+1]=t;else if(e.length===r)for(i=0;i<r;i++)n[s=2*i]=e[i],n[s+1]=e[i];else{var a=e[0];for(i=0;i<r;i++)s=2*i,e.length>s&&(a=e[s]),n[s]=a,e.length>s+1&&(a=e[s+1]),n[s+1]=a}return this},setColors:function(e){var t,i=this.points.length;if(i<1)return this;var r=this.colors;void 0===e?e=[0xffffff]:Array.isArray(e)||(e=[e]);var n=0;if(e.length===i)for(t=0;t<i;t++)r[n=2*t]=e[t],r[n+1]=e[t];else{var s=e[0];for(t=0;t<i;t++)n=2*t,e.length>n&&(s=e[n]),r[n]=s,e.length>n+1&&(s=e[n+1]),r[n+1]=s}return this},setPoints:function(e,t,i){if(void 0===e&&(e=2),"number"==typeof e){var r,n,s,a=e;if(a<2&&(a=2),e=[],this.horizontal)for(r=0,s=-this.frame.halfWidth,n=this.frame.width/(a-1);r<a;r++)e.push({x:s+r*n,y:0});else for(r=0,s=-this.frame.halfHeight,n=this.frame.height/(a-1);r<a;r++)e.push({x:0,y:s+r*n})}var o=e.length,h=this.points.length;return o<1?console.warn("Rope: Not enough points given"):(1===o&&(e.unshift({x:0,y:0}),o++),h!==o&&this.resizeArrays(o),this.dirty=!0,this.points=e,this.updateUVs(),null!=t&&this.setColors(t),null!=i&&this.setAlphas(i)),this},updateUVs:function(){for(var e=this.uv,t=this.points.length,i=this.frame.u0,r=this.frame.v0,n=this.frame.u1,s=this.frame.v1,a=(n-i)/(t-1),o=(s-r)/(t-1),h=0;h<t;h++){var c,l,d,u,f=4*h;this.horizontal?(this._flipX?(c=n-h*a,d=n-h*a):(c=i+h*a,d=i+h*a),this._flipY?(l=s,u=r):(l=r,u=s)):(this._flipX?(c=i,d=n):(c=n,d=i),this._flipY?(l=s-h*o,u=s-h*o):(l=r+h*o,u=r+h*o)),e[f+0]=c,e[f+1]=l,e[f+2]=d,e[f+3]=u}return this},resizeArrays:function(e){var t=this.colors,i=this.alphas;this.vertices=new Float32Array(4*e),this.uv=new Float32Array(4*e),t=new Uint32Array(2*e),i=new Float32Array(2*e);for(var r=0;r<2*e;r++)t[r]=0xffffff,i[r]=1;return this.colors=t,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var e,t=this._perp,i=this.points,r=this.vertices,n=i.length;if(this.dirty=!1,!(n<1)){for(var s=i[0],a=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,o=0;o<n;o++){var h=i[o],c=4*o;t.x=(e=o<n-1?i[o+1]:h).y-s.y,t.y=-(e.x-s.x);var l=t.length();t.x/=l,t.y/=l,t.x*=a,t.y*=a,r[c]=h.x+t.x,r[c+1]=h.y+t.y,r[c+2]=h.x-t.x,r[c+3]=h.y-t.y,s=h}return this}},setDebug:function(e,t){return this.debugGraphic=e,e||t?t?this.debugCallback=t:this.debugCallback=this.renderDebugVerts:this.debugCallback=null,this},renderDebugVerts:function(e,t,i){var r=e.debugGraphic,n=i[0],s=i[1],a=i[2],o=i[3];r.lineBetween(n,s,a,o);for(var h=4;h<t;h+=4){var c=i[h+0],l=i[h+1],d=i[h+2],u=i[h+3];r.lineBetween(n,s,c,l),r.lineBetween(a,o,d,u),r.lineBetween(a,o,c,l),r.lineBetween(c,l,d,u),n=c,s=l,a=d,o=u}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(e){return this._flipX=e,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){return this._flipY=e,this.updateUVs()}}})},95262:e=>{e.exports=function(){}},26209:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(35154),o=i(77757);n.register("rope",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=s(e,"frame",null),h=s(e,"horizontal",!0),c=a(e,"points",void 0),l=a(e,"colors",void 0),d=a(e,"alphas",void 0),u=new o(this.scene,0,0,i,n,c,h,l,d);return void 0!==t&&(e.add=t),r(this.scene,u,e),u})},96819:(e,t,i)=>{var r=i(77757);i(39429).register("rope",function(e,t,i,n,s,a,o,h){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o,h))})},38745:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(20439),renderCanvas:i(95262)}},20439:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline,t),o=r(t,i,s).calc,h=t.vertices,c=t.uv,l=t.colors,d=t.alphas,u=t.alpha,f=n.getTintAppendFloatAlpha,p=i.roundPixels,g=h.length,m=Math.floor(.5*g);a.flush(),e.pipelines.preBatch(t);var v=a.setGameObject(t),y=a.vertexViewF32,b=a.vertexViewU32,x=a.vertexCount*a.currentShader.vertexComponentCount-1,E=0,T=t.tintFill;t.dirty&&t.updateVertices();for(var A=t.debugCallback,w=[],S=0;S<g;S+=2){var C=h[S+0],I=h[S+1],_=C*o.a+I*o.c+o.e,O=C*o.b+I*o.d+o.f;p&&(_=Math.round(_),O=Math.round(O)),y[++x]=_,y[++x]=O,y[++x]=c[S+0],y[++x]=c[S+1],y[++x]=v,y[++x]=T,b[++x]=f(l[E],i.alpha*(d[E]*u)),E++,A&&(w[S+0]=_,w[S+1]=O)}A&&A.call(t,t,g,w),a.vertexCount+=m,a.currentBatch.count=a.vertexCount-a.currentBatch.start,e.pipelines.postBatch(t)}},20071:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(95540),o=i(79291),h=i(61622),c=i(25479),l=i(61340),d=i(95428),u=i(92503);e.exports=new r({Extends:s,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,c],initialize:function(e,t,i,r,n,a,o,h){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=128),void 0===a&&(a=128),s.call(this,e,"Shader"),this.blendMode=-1,this.shader;var c=e.sys.renderer;this.renderer=c,this.gl=c.gl,this.vertexData=new ArrayBuffer(6*(2*Float32Array.BYTES_PER_ELEMENT)),this.vertexBuffer=c.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=c.width,this._rendererHeight=c.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,r),this.setSize(n,a),this.setOrigin(.5,.5),this.setShader(t,o,h),this.renderer.on(u.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(e){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},setRenderToTexture:function(e,t){if(void 0===t&&(t=!1),!this.renderToTexture){var i=this.width,r=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,r,0),this.framebuffer=n.createFramebuffer(i,r,this.glTexture,!1),this._rendererWidth=i,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),e&&(this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture))}return this.shader&&(n.pipelines.clear(),this.load(),this.flush(),n.pipelines.rebind()),this},setShader:function(e,t,i){if(this.renderer.contextLost)return this._deferSetShader={key:e,textures:t,textureData:i},this;if(void 0===t&&(t=[]),"string"==typeof e){var r=this.scene.sys.cache.shader;if(!r.has(e))return console.warn("Shader missing: "+e),this;this.shader=r.get(e)}else this.shader=e;var n=this.gl,s=this.renderer;this.program&&s.deleteProgram(this.program);var a=s.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.uniformMatrix4fv(n.getUniformLocation(a.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),n.uniformMatrix4fv(n.getUniformLocation(a.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),n.uniform2f(n.getUniformLocation(a.webGLProgram,"uResolution"),this.width,this.height),this.program=a;var h=new Date,c={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),3600*h.getHours()+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,c):this.uniforms=c;for(var l=0;l<4;l++)t[l]&&this.setSampler2D("iChannel"+l,t[l],l,i);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(e){return this.pointer=e,this},projOrtho:function(e,t,i,r){if(this.renderer.contextLost){this._deferProjOrtho={left:e,right:t,bottom:i,top:r};return}var n=1/(e-t),s=1/(i-r),a=this.projectionMatrix;a[0]=-2*n,a[5]=-2*s,a[10]=-.001,a[12]=(e+t)*n,a[13]=(r+i)*s,a[14]=-0;var o=this.program,h=this.gl;this.renderer.setProgram(o),h.uniformMatrix4fv(h.getUniformLocation(o.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=t,this._rendererHeight=i},initUniforms:function(){var e=this.renderer.glFuncMap,t=this.program;for(var i in this._textureCount=0,this.uniforms){var r=this.uniforms[i],n=r.type,s=e[n];r.uniformLocation=this.renderer.createUniformLocation(t,i),"sampler2D"!==n&&(r.glMatrix=s.matrix,r.glValueLength=s.length,r.glFunc=s.func)}},setSampler2DBuffer:function(e,t,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s={});var a=this.uniforms[e];return a.value=t,s.width=i,s.height=r,a.textureData=s,this._textureCount=n,this.initSampler2D(a),this},setSampler2D:function(e,t,i,r){void 0===i&&(i=0);var n=this.scene.sys.textures;if(n.exists(t)){var s=n.getFrame(t);if(s.glTexture&&s.glTexture.isRenderTexture)return this.setSampler2DBuffer(e,s.glTexture,s.width,s.height,i,r);var a=this.uniforms[e],o=s.source;a.textureKey=t,a.source=o.image,a.value=s.glTexture,o.isGLTexture&&(r||(r={}),r.width=o.width,r.height=o.height),r&&(a.textureData=r),this._textureCount=i,this.initSampler2D(a)}return this},setUniform:function(e,t){return h(this.uniforms,e,t),this},getUniform:function(e){return a(this.uniforms,e,null)},setChannel0:function(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function(e){if(e.value){var t=e.textureData;if(t&&!e.value.isRenderTexture){var i=this.gl,r=e.value,n=i[a(t,"magFilter","linear").toUpperCase()],s=i[a(t,"minFilter","linear").toUpperCase()],o=i[a(t,"wrapS","repeat").toUpperCase()],h=i[a(t,"wrapT","repeat").toUpperCase()],c=i[a(t,"format","rgba").toUpperCase()],l=a(t,"flipY",!1),d=a(t,"width",r.width),u=a(t,"height",r.height),f=a(t,"source",r.pixels);t.repeat&&(o=i.REPEAT,h=i.REPEAT),t.width&&(f=null),r.update(f,d,u,l,o,h,s,n,c)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var e,t,i,r,n,s=this.gl,a=this.uniforms,o=0;for(var h in a)i=(e=a[h]).glFunc,t=e.glValueLength,r=e.uniformLocation,null!==(n=e.value)&&(1===t?e.glMatrix?i.call(s,r.webGLUniformLocation,e.transpose,n):i.call(s,r.webGLUniformLocation,n):2===t?i.call(s,r.webGLUniformLocation,n.x,n.y):3===t?i.call(s,r.webGLUniformLocation,n.x,n.y,n.z):4===t?i.call(s,r.webGLUniformLocation,n.x,n.y,n.z,n.w):"sampler2D"===e.type&&(s.activeTexture(s.TEXTURE0+o),s.bindTexture(s.TEXTURE_2D,n.webGLTexture),s.uniform1i(r.webGLUniformLocation,o),o++))},load:function(e){var t=this.gl,i=this.width,r=this.height,n=this.renderer,s=this.program,a=this.viewMatrix;if(!this.renderToTexture){var o=-this._displayOriginX,h=-this._displayOriginY;a[0]=e[0],a[1]=e[1],a[4]=e[2],a[5]=e[3],a[8]=e[4],a[9]=e[5],a[12]=a[0]*o+a[4]*h,a[13]=a[1]*o+a[5]*h}t.useProgram(s.webGLProgram),t.uniformMatrix4fv(t.getUniformLocation(s.webGLProgram,"uViewMatrix"),!1,a),t.uniformMatrix4fv(t.getUniformLocation(s.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),t.uniform2f(t.getUniformLocation(s.webGLProgram,"uResolution"),this.width,this.height);var c=this.uniforms,l=c.resolution;l.value.x=i,l.value.y=r,c.time.value=n.game.loop.getDuration();var d=this.pointer;if(d){var u=c.mouse,f=d.x/i,p=1-d.y/r;u.value.x=f.toFixed(2),u.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var e=this.width,t=this.height,i=this.program,r=this.gl,n=this.vertexBuffer,s=this.renderer,a=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(s.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,n.webGLBuffer);var o=r.getAttribLocation(i.webGLProgram,"inPosition");-1!==o&&(r.enableVertexAttribArray(o),r.vertexAttribPointer(o,2,r.FLOAT,!1,a,0));var h=this.vertexViewF32;h[3]=t,h[4]=e,h[5]=t,h[8]=e,h[9]=t,h[10]=e,r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*a)),r.drawArrays(r.TRIANGLES,0,6),this.renderToTexture&&s.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(null!==this._deferSetShader){var e=this._deferSetShader.key,t=this._deferSetShader.textures,i=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(e,t,i)}if(null!==this._deferProjOrtho){var r=this._deferProjOrtho.left,n=this._deferProjOrtho.right,s=this._deferProjOrtho.bottom,a=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(r,n,s,a)}},preDestroy:function(){var e=this.renderer;e.off(u.RESTORE_WEBGL,this.onContextRestored,this),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(e.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),d(this.uniforms,function(t){e.deleteUniformLocation(t.uniformLocation),t.uniformLocation=null})}})},80464:e=>{e.exports=function(){}},54935:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(20071);n.register("shader",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=s(e,"x",0),o=s(e,"y",0),h=s(e,"width",128),c=s(e,"height",128),l=new a(this.scene,i,n,o,h,c);return void 0!==t&&(e.add=t),r(this.scene,l,e),l})},74177:(e,t,i)=>{var r=i(20071);i(39429).register("shader",function(e,t,i,n,s,a,o){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o))})},25479:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(19257),renderCanvas:i(80464)}},19257:(e,t,i)=>{var r=i(91296);e.exports=function(e,t,i,n){if(t.shader){if(i.addToRenderList(t),e.pipelines.clear(),t.renderToTexture)t.load(),t.flush();else{var s=r(t,i,n).calc;(e.width!==t._rendererWidth||e.height!==t._rendererHeight)&&t.projOrtho(0,e.width,e.height,0),t.load(s.matrix),t.flush()}e.pipelines.rebind()}}},10441:(e,t,i)=>{var r=i(70554);e.exports=function(e,t,i,n,s,a){for(var o=r.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*n),h=i.pathData,c=i.pathIndexes,l=0;l<c.length;l+=3){var d=2*c[l],u=2*c[l+1],f=2*c[l+2],p=h[d+0]-s,g=h[d+1]-a,m=h[u+0]-s,v=h[u+1]-a,y=h[f+0]-s,b=h[f+1]-a,x=t.getX(p,g),E=t.getY(p,g),T=t.getX(m,v),A=t.getY(m,v),w=t.getX(y,b),S=t.getY(y,b);e.batchTri(i,x,E,T,A,w,S,0,0,1,1,o,o,o,2)}}},65960:e=>{e.exports=function(e,t,i,r){var n=i||t.fillColor;e.fillStyle="rgba("+((0xff0000&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+(r||t.fillAlpha)+")"}},75177:e=>{e.exports=function(e,t,i,r){var n=i||t.strokeColor;e.strokeStyle="rgba("+((0xff0000&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+(r||t.strokeAlpha)+")",e.lineWidth=t.lineWidth}},17803:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(95643),a=i(23031);e.exports=new r({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(e,t,i){void 0===t&&(t="Shape"),s.call(this,e,t),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=0xffffff,this.fillAlpha=1,this.strokeColor=0xffffff,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(e,t){return void 0===t&&(t=1),void 0===e?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=t,this.isFilled=!0),this},setStrokeStyle:function(e,t,i){return void 0===i&&(i=1),void 0===e?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,t){return this.width=e,this.height=t,this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}})},34682:(e,t,i)=>{var r=i(70554);e.exports=function(e,t,i,n,s){var a=e.strokeTint,o=r.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);a.TL=o,a.TR=o,a.BL=o,a.BR=o;var h=t.pathData,c=h.length-1,l=t.lineWidth,d=l/2,u=h[0]-n,f=h[1]-s;t.closePath||(c-=2);for(var p=2;p<c;p+=2){var g=h[p]-n,m=h[p+1]-s;e.batchLine(u,f,g,m,d,d,l,p-2,!!t.closePath&&p===c-1),u=g,f=m}}},23629:(e,t,i)=>{var r=i(13609),n=i(83419),s=i(39506),a=i(94811),o=i(96503),h=i(36383),c=i(17803);e.exports=new n({Extends:c,Mixins:[r],initialize:function(e,t,i,r,n,s,a,h,l){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=0),void 0===s&&(s=360),void 0===a&&(a=!1),c.call(this,e,"Arc",new o(0,0,r)),this._startAngle=n,this._endAngle=s,this._anticlockwise=a,this._iterations=.01,this.setPosition(t,i);var d=2*this.geom.radius;this.setSize(d,d),void 0!==h&&this.setFillStyle(h,l),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=e,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;var t=2*e;this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e,this.updateData()}},setRadius:function(e){return this.radius=e,this},setIterations:function(e){return void 0===e&&(e=.01),this.iterations=e,this},setStartAngle:function(e,t){return this._startAngle=e,void 0!==t&&(this._anticlockwise=t),this.updateData()},setEndAngle:function(e,t){return this._endAngle=e,void 0!==t&&(this._anticlockwise=t),this.updateData()},updateData:function(){var e,t=this._iterations,i=t,r=this.geom.radius,n=s(this._startAngle),o=s(this._endAngle),c=this._anticlockwise;o-=n,c?o<-h.PI2?o=-h.PI2:o>0&&(o=-h.PI2+o%h.PI2):o>h.PI2?o=h.PI2:o<0&&(o=h.PI2+o%h.PI2);for(var l=[r+Math.cos(n)*r,r+Math.sin(n)*r];i<1;)e=o*i+n,l.push(r+Math.cos(e)*r,r+Math.sin(e)*r),i+=t;return e=o+n,l.push(r+Math.cos(e)*r,r+Math.sin(e)*r),l.push(r+Math.cos(n)*r,r+Math.sin(n)*r),this.pathIndexes=a(l),this.pathData=l,this}})},42542:(e,t,i)=>{var r=i(39506),n=i(65960),s=i(75177),a=i(20926);e.exports=function(e,t,i,o){i.addToRenderList(t);var h=e.currentContext;if(a(e,h,t,i,o)){var c=t.radius;h.beginPath(),h.arc(c-t.originX*(2*c),c-t.originY*(2*c),c,r(t._startAngle),r(t._endAngle),t.anticlockwise),t.closePath&&h.closePath(),t.isFilled&&(n(h,t),h.fill()),t.isStroked&&(s(h,t),h.stroke()),h.restore()}}},42563:(e,t,i)=>{var r=i(23629),n=i(39429);n.register("arc",function(e,t,i,n,s,a,o,h){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o,h))}),n.register("circle",function(e,t,i,n,s){return this.displayList.add(new r(this.scene,e,t,i,0,360,!1,n,s))})},13609:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(41447),renderCanvas:i(42542)}},41447:(e,t,i)=>{var r=i(91296),n=i(10441),s=i(34682);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=r(t,i,a),c=o.calcMatrix.copyFrom(h.calc),l=t._displayOriginX,d=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&n(o,c,t,u,l,d),t.isStroked&&s(o,t,u,l,d),e.pipelines.postBatch(t)}},89:(e,t,i)=>{var r=i(83419),n=i(33141),s=i(94811),a=i(87841),o=i(17803);e.exports=new r({Extends:o,Mixins:[n],initialize:function(e,t,i,r,n,s){void 0===t&&(t=0),void 0===i&&(i=0),o.call(this,e,"Curve",r),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(t,i),void 0!==n&&this.setFillStyle(n,s),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){var e=this._curveBounds,t=this._smoothness;this.geom.getBounds(e,t),this.setSize(e.width,e.height),this.updateDisplayOrigin();for(var i=[],r=this.geom.getPoints(t),n=0;n<r.length;n++)i.push(r[n].x,r[n].y);return i.push(r[0].x,r[0].y),this.pathIndexes=s(i),this.pathData=i,this}})},3170:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=t._displayOriginX+t._curveBounds.x,c=t._displayOriginY+t._curveBounds.y,l=t.pathData,d=l.length-1,u=l[0]-h,f=l[1]-c;o.beginPath(),o.moveTo(u,f),t.closePath||(d-=2);for(var p=2;p<d;p+=2){var g=l[p]-h,m=l[p+1]-c;o.lineTo(g,m)}t.closePath&&o.closePath(),t.isFilled&&(r(o,t),o.fill()),t.isStroked&&(n(o,t),o.stroke()),o.restore()}}},40511:(e,t,i)=>{var r=i(39429),n=i(89);r.register("curve",function(e,t,i,r,s){return this.displayList.add(new n(this.scene,e,t,i,r,s))})},33141:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(53987),renderCanvas:i(3170)}},53987:(e,t,i)=>{var r=i(10441),n=i(91296),s=i(34682);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=n(t,i,a),c=o.calcMatrix.copyFrom(h.calc),l=t._displayOriginX+t._curveBounds.x,d=t._displayOriginY+t._curveBounds.y,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&r(o,c,t,u,l,d),t.isStroked&&s(o,t,u,l,d),e.pipelines.postBatch(t)}},19921:(e,t,i)=>{var r=i(83419),n=i(94811),s=i(54205),a=i(8497),o=i(17803);e.exports=new r({Extends:o,Mixins:[s],initialize:function(e,t,i,r,n,s,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=128),o.call(this,e,"Ellipse",new a(r/2,n/2,r,n)),this._smoothness=64,this.setPosition(t,i),this.width=r,this.height=n,void 0!==s&&this.setFillStyle(s,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(e){this._smoothness=e,this.updateData()}},setSize:function(e,t){return this.width=e,this.height=t,this.geom.setPosition(e/2,t/2),this.geom.setSize(e,t),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(e){return this._smoothness=e,this.updateData()},updateData:function(){for(var e=[],t=this.geom.getPoints(this._smoothness),i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=n(e),this.pathData=e,this}})},7930:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=t._displayOriginX,c=t._displayOriginY,l=t.pathData,d=l.length-1,u=l[0]-h,f=l[1]-c;o.beginPath(),o.moveTo(u,f),t.closePath||(d-=2);for(var p=2;p<d;p+=2){var g=l[p]-h,m=l[p+1]-c;o.lineTo(g,m)}o.closePath(),t.isFilled&&(r(o,t),o.fill()),t.isStroked&&(n(o,t),o.stroke()),o.restore()}}},1543:(e,t,i)=>{var r=i(19921);i(39429).register("ellipse",function(e,t,i,n,s,a){return this.displayList.add(new r(this.scene,e,t,i,n,s,a))})},54205:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(19467),renderCanvas:i(7930)}},19467:(e,t,i)=>{var r=i(10441),n=i(91296),s=i(34682);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=n(t,i,a),c=o.calcMatrix.copyFrom(h.calc),l=t._displayOriginX,d=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&r(o,c,t,u,l,d),t.isStroked&&s(o,t,u,l,d),e.pipelines.postBatch(t)}},30479:(e,t,i)=>{var r=i(83419),n=i(17803);e.exports=new r({Extends:n,Mixins:[i(26015)],initialize:function(e,t,i,r,s,a,o,h,c,l,d){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===s&&(s=128),void 0===a&&(a=32),void 0===o&&(o=32),n.call(this,e,"Grid",null),this.cellWidth=a,this.cellHeight=o,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(t,i),this.setSize(r,s),this.setFillStyle(h,c),void 0!==l&&this.setOutlineStyle(l,d),this.updateDisplayOrigin()},setFillStyle:function(e,t){return void 0===t&&(t=1),void 0===e?this.showCells=!1:(this.fillColor=e,this.fillAlpha=t,this.showCells=!0),this},setAltFillStyle:function(e,t){return void 0===t&&(t=1),void 0===e?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=t,this.showAltCells=!0),this},setOutlineStyle:function(e,t){return void 0===t&&(t=1),void 0===e?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=t,this.showOutline=!0),this}})},49912:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=-t._displayOriginX,c=-t._displayOriginY,l=i.alpha*t.alpha,d=t.width,u=t.height,f=t.cellWidth,p=t.cellHeight,g=Math.ceil(d/f),m=Math.ceil(u/p),v=f,y=p,b=f-(g*f-d),x=p-(m*p-u),E=t.showCells,T=t.showAltCells,A=t.showOutline,w=0,S=0,C=0,I=0,_=0;if(A&&(v--,y--,b===f&&b--,x===p&&x--),E&&t.fillAlpha>0)for(r(o,t),S=0;S<m;S++)for(T&&(C=S%2),w=0;w<g;w++){if(T&&C){C=0;continue}C++,I=w<g-1?v:b,_=S<m-1?y:x,o.fillRect(h+w*f,c+S*p,I,_)}if(T&&t.altFillAlpha>0)for(r(o,t,t.altFillColor,t.altFillAlpha*l),S=0;S<m;S++)for(T&&(C=S%2),w=0;w<g;w++){if(T&&!C){C=1;continue}C=0,I=w<g-1?v:b,_=S<m-1?y:x,o.fillRect(h+w*f,c+S*p,I,_)}if(A&&t.outlineFillAlpha>0){for(n(o,t,t.outlineFillColor,t.outlineFillAlpha*l),w=1;w<g;w++){var O=w*f;o.beginPath(),o.moveTo(O+h,c),o.lineTo(O+h,u+c),o.stroke()}for(S=1;S<m;S++){var P=S*p;o.beginPath(),o.moveTo(h,P+c),o.lineTo(h+d,P+c),o.stroke()}}o.restore()}}},34137:(e,t,i)=>{var r=i(39429),n=i(30479);r.register("grid",function(e,t,i,r,s,a,o,h,c,l){return this.displayList.add(new n(this.scene,e,t,i,r,s,a,o,h,c,l))})},26015:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(46161),renderCanvas:i(49912)}},46161:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){i.addToRenderList(t);var a,o,h=e.pipelines.set(t.pipeline),c=r(t,i,s);h.calcMatrix.copyFrom(c.calc).translate(-t._displayOriginX,-t._displayOriginY);var l=i.alpha*t.alpha,d=t.width,u=t.height,f=t.cellWidth,p=t.cellHeight,g=Math.ceil(d/f),m=Math.ceil(u/p),v=f,y=p,b=f-(g*f-d),x=p-(m*p-u),E=t.showCells,T=t.showAltCells,A=t.showOutline,w=0,S=0,C=0,I=0,_=0;if(A&&(v--,y--,b===f&&b--,x===p&&x--),e.pipelines.preBatch(t),E&&t.fillAlpha>0)for(S=0,a=h.fillTint,o=n.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*l),a.TL=o,a.TR=o,a.BL=o,a.BR=o;S<m;S++)for(T&&(C=S%2),w=0;w<g;w++){if(T&&C){C=0;continue}C++,I=w<g-1?v:b,_=S<m-1?y:x,h.batchFillRect(w*f,S*p,I,_)}if(T&&t.altFillAlpha>0)for(S=0,a=h.fillTint,o=n.getTintAppendFloatAlpha(t.altFillColor,t.altFillAlpha*l),a.TL=o,a.TR=o,a.BL=o,a.BR=o;S<m;S++)for(T&&(C=S%2),w=0;w<g;w++){if(T&&!C){C=1;continue}C=0,I=w<g-1?v:b,_=S<m-1?y:x,h.batchFillRect(w*f,S*p,I,_)}if(A&&t.outlineFillAlpha>0){var O=h.strokeTint,P=n.getTintAppendFloatAlpha(t.outlineFillColor,t.outlineFillAlpha*l);for(w=1,O.TL=P,O.TR=P,O.BL=P,O.BR=P;w<g;w++){var M=w*f;h.batchLine(M,0,M,u,t.lineWidth,t.lineWidth,1,0,!1)}for(S=1;S<m;S++){var R=S*p;h.batchLine(0,R,d,R,t.lineWidth,t.lineWidth,1,0,!1)}}e.pipelines.postBatch(t)}},61475:(e,t,i)=>{var r=i(99651),n=i(83419),s=i(17803);e.exports=new n({Extends:s,Mixins:[r],initialize:function(e,t,i,r,n,a,o,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===a&&(a=0xeeeeee),void 0===o&&(o=0x999999),void 0===h&&(h=0xcccccc),s.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=a,this.fillLeft=o,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(t,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setFaces:function(e,t,i){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}})},11508:(e,t,i)=>{var r=i(65960),n=i(20926);e.exports=function(e,t,i,s){i.addToRenderList(t);var a=e.currentContext;if(n(e,a,t,i,s)&&t.isFilled){var o=t.width,h=t.height,c=o/2,l=o/t.projection;t.showTop&&(r(a,t,t.fillTop),a.beginPath(),a.moveTo(-c,-h),a.lineTo(0,-l-h),a.lineTo(c,-h),a.lineTo(c,-1),a.lineTo(0,l-1),a.lineTo(-c,-1),a.lineTo(-c,-h),a.fill()),t.showLeft&&(r(a,t,t.fillLeft),a.beginPath(),a.moveTo(-c,0),a.lineTo(0,l),a.lineTo(0,l-h),a.lineTo(-c,-h),a.lineTo(-c,0),a.fill()),t.showRight&&(r(a,t,t.fillRight),a.beginPath(),a.moveTo(c,0),a.lineTo(0,l),a.lineTo(0,l-h),a.lineTo(c,-h),a.lineTo(c,0),a.fill()),a.restore()}}},3933:(e,t,i)=>{var r=i(39429),n=i(61475);r.register("isobox",function(e,t,i,r,s,a,o){return this.displayList.add(new n(this.scene,e,t,i,r,s,a,o))})},99651:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(68149),renderCanvas:i(11508)}},68149:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){i.addToRenderList(t);var a,o,h,c,l,d,u,f,p,g=e.pipelines.set(t.pipeline),m=r(t,i,s),v=g.calcMatrix.copyFrom(m.calc),y=t.width,b=t.height,x=y/2,E=y/t.projection,T=i.alpha*t.alpha;t.isFilled&&(e.pipelines.preBatch(t),t.showTop&&(a=n.getTintAppendFloatAlpha(t.fillTop,T),o=v.getX(-x,-b),h=v.getY(-x,-b),c=v.getX(0,-E-b),l=v.getY(0,-E-b),d=v.getX(x,-b),u=v.getY(x,-b),f=v.getX(0,E-b),p=v.getY(0,E-b),g.batchQuad(t,o,h,c,l,d,u,f,p,0,0,1,1,a,a,a,a,2)),t.showLeft&&(a=n.getTintAppendFloatAlpha(t.fillLeft,T),o=v.getX(-x,0),h=v.getY(-x,0),c=v.getX(0,E),l=v.getY(0,E),d=v.getX(0,E-b),u=v.getY(0,E-b),f=v.getX(-x,-b),p=v.getY(-x,-b),g.batchQuad(t,o,h,c,l,d,u,f,p,0,0,1,1,a,a,a,a,2)),t.showRight&&(a=n.getTintAppendFloatAlpha(t.fillRight,T),o=v.getX(x,0),h=v.getY(x,0),c=v.getX(0,E),l=v.getY(0,E),d=v.getX(0,E-b),u=v.getY(0,E-b),f=v.getX(x,-b),p=v.getY(x,-b),g.batchQuad(t,o,h,c,l,d,u,f,p,0,0,1,1,a,a,a,a,2)),e.pipelines.postBatch(t))}},16933:(e,t,i)=>{var r=i(83419),n=i(60561),s=i(17803);e.exports=new r({Extends:s,Mixins:[n],initialize:function(e,t,i,r,n,a,o,h,c){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=48),void 0===n&&(n=32),void 0===a&&(a=!1),void 0===o&&(o=0xeeeeee),void 0===h&&(h=0x999999),void 0===c&&(c=0xcccccc),s.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=o,this.fillLeft=h,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=a,this.isFilled=!0,this.setPosition(t,i),this.setSize(r,n),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setReversed:function(e){return this.isReversed=e,this},setFaces:function(e,t,i){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),this.showTop=e,this.showLeft=t,this.showRight=i,this},setFillStyle:function(e,t,i){return this.fillTop=e,this.fillLeft=t,this.fillRight=i,this.isFilled=!0,this}})},79590:(e,t,i)=>{var r=i(65960),n=i(20926);e.exports=function(e,t,i,s){i.addToRenderList(t);var a=e.currentContext;if(n(e,a,t,i,s)&&t.isFilled){var o=t.width,h=t.height,c=o/2,l=o/t.projection,d=t.isReversed;t.showTop&&d&&(r(a,t,t.fillTop),a.beginPath(),a.moveTo(-c,-h),a.lineTo(0,-l-h),a.lineTo(c,-h),a.lineTo(0,l-h),a.fill()),t.showLeft&&(r(a,t,t.fillLeft),a.beginPath(),d?a.moveTo(-c,-h):a.moveTo(-c,0),a.lineTo(0,l),a.lineTo(0,l-h),a.fill()),t.showRight&&(r(a,t,t.fillRight),a.beginPath(),d?a.moveTo(c,-h):a.moveTo(c,0),a.lineTo(0,l),a.lineTo(0,l-h),a.fill()),a.restore()}}},49803:(e,t,i)=>{var r=i(39429),n=i(16933);r.register("isotriangle",function(e,t,i,r,s,a,o,h){return this.displayList.add(new n(this.scene,e,t,i,r,s,a,o,h))})},60561:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(51503),renderCanvas:i(79590)}},51503:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){i.addToRenderList(t);var a,o,h,c,l,d,u,f=e.pipelines.set(t.pipeline),p=r(t,i,s),g=f.calcMatrix.copyFrom(p.calc),m=t.width,v=t.height,y=m/2,b=m/t.projection,x=t.isReversed,E=i.alpha*t.alpha;if(t.isFilled){if(e.pipelines.preBatch(t),t.showTop&&x){a=n.getTintAppendFloatAlpha(t.fillTop,E),o=g.getX(-y,-v),h=g.getY(-y,-v),c=g.getX(0,-b-v),l=g.getY(0,-b-v),d=g.getX(y,-v),u=g.getY(y,-v);var T=g.getX(0,b-v),A=g.getY(0,b-v);f.batchQuad(t,o,h,c,l,d,u,T,A,0,0,1,1,a,a,a,a,2)}t.showLeft&&(a=n.getTintAppendFloatAlpha(t.fillLeft,E),x?(o=g.getX(-y,-v),h=g.getY(-y,-v)):(o=g.getX(-y,0),h=g.getY(-y,0)),c=g.getX(0,b),l=g.getY(0,b),d=g.getX(0,b-v),u=g.getY(0,b-v),f.batchTri(t,o,h,c,l,d,u,0,0,1,1,a,a,a,2)),t.showRight&&(a=n.getTintAppendFloatAlpha(t.fillRight,E),x?(o=g.getX(y,-v),h=g.getY(y,-v)):(o=g.getX(y,0),h=g.getY(y,0)),c=g.getX(0,b),l=g.getY(0,b),d=g.getX(0,b-v),u=g.getY(0,b-v),f.batchTri(t,o,h,c,l,d,u,0,0,1,1,a,a,a,2)),e.pipelines.postBatch(t)}}},57847:(e,t,i)=>{var r=i(83419),n=i(17803),s=i(23031);e.exports=new r({Extends:n,Mixins:[i(36823)],initialize:function(e,t,i,r,a,o,h,c,l){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=128),void 0===h&&(h=0),n.call(this,e,"Line",new s(r,a,o,h));var d=Math.max(1,this.geom.right-this.geom.left),u=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(t,i),this.setSize(d,u),void 0!==c&&this.setStrokeStyle(1,c,l),this.updateDisplayOrigin()},setLineWidth:function(e,t){return void 0===t&&(t=e),this._startWidth=e,this._endWidth=t,this.lineWidth=e,this},setTo:function(e,t,i,r){return this.geom.setTo(e,t,i,r),this}})},17440:(e,t,i)=>{var r=i(75177),n=i(20926);e.exports=function(e,t,i,s){i.addToRenderList(t);var a=e.currentContext;if(n(e,a,t,i,s)){var o=t._displayOriginX,h=t._displayOriginY;t.isStroked&&(r(a,t),a.beginPath(),a.moveTo(t.geom.x1-o,t.geom.y1-h),a.lineTo(t.geom.x2-o,t.geom.y2-h),a.stroke()),a.restore()}}},2481:(e,t,i)=>{var r=i(39429),n=i(57847);r.register("line",function(e,t,i,r,s,a,o,h){return this.displayList.add(new n(this.scene,e,t,i,r,s,a,o,h))})},36823:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(77385),renderCanvas:i(17440)}},77385:(e,t,i)=>{var r=i(91296),n=i(70554);e.exports=function(e,t,i,s){i.addToRenderList(t);var a=e.pipelines.set(t.pipeline),o=r(t,i,s);a.calcMatrix.copyFrom(o.calc);var h=t._displayOriginX,c=t._displayOriginY,l=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isStroked){var d=a.strokeTint,u=n.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*l);d.TL=u,d.TR=u,d.BL=u,d.BR=u,a.batchLine(t.geom.x1-h,t.geom.y1-c,t.geom.x2-h,t.geom.y2-c,t._startWidth/2,t._endWidth/2,1,0,!1,o.sprite,o.camera)}e.pipelines.postBatch(t)}},24949:(e,t,i)=>{var r=i(90273),n=i(83419),s=i(94811),a=i(13829),o=i(25717),h=i(17803),c=i(5469);e.exports=new n({Extends:h,Mixins:[r],initialize:function(e,t,i,r,n,s){void 0===t&&(t=0),void 0===i&&(i=0),h.call(this,e,"Polygon",new o(r));var c=a(this.geom);this.setPosition(t,i),this.setSize(c.width,c.height),void 0!==n&&this.setFillStyle(n,s),this.updateDisplayOrigin(),this.updateData()},smooth:function(e){void 0===e&&(e=1);for(var t=0;t<e;t++)c(this.geom);return this.updateData()},setTo:function(e){this.geom.setTo(e);var t=a(this.geom);return this.setSize(t.width,t.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var e=[],t=this.geom.points,i=0;i<t.length;i++)e.push(t[i].x,t[i].y);return e.push(t[0].x,t[0].y),this.pathIndexes=s(e),this.pathData=e,this}})},38710:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=t._displayOriginX,c=t._displayOriginY,l=t.pathData,d=l.length-1,u=l[0]-h,f=l[1]-c;o.beginPath(),o.moveTo(u,f),t.closePath||(d-=2);for(var p=2;p<d;p+=2){var g=l[p]-h,m=l[p+1]-c;o.lineTo(g,m)}t.closePath&&o.closePath(),t.isFilled&&(r(o,t),o.fill()),t.isStroked&&(n(o,t),o.stroke()),o.restore()}}},64827:(e,t,i)=>{var r=i(39429),n=i(24949);r.register("polygon",function(e,t,i,r,s){return this.displayList.add(new n(this.scene,e,t,i,r,s))})},90273:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(73695),renderCanvas:i(38710)}},73695:(e,t,i)=>{var r=i(10441),n=i(91296),s=i(34682);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=n(t,i,a),c=o.calcMatrix.copyFrom(h.calc),l=t._displayOriginX,d=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&r(o,c,t,u,l,d),t.isStroked&&s(o,t,u,l,d),e.pipelines.postBatch(t)}},74561:(e,t,i)=>{var r=i(83419),n=i(94811),s=i(87841),a=i(17803);e.exports=new r({Extends:a,Mixins:[i(95597)],initialize:function(e,t,i,r,n,o,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===n&&(n=128),a.call(this,e,"Rectangle",new s(0,0,r,n)),this.radius=20,this.isRounded=!1,this.setPosition(t,i),this.setSize(r,n),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setRounded:function(e){return void 0===e&&(e=16),this.radius=e,this.isRounded=e>0,this.updateRoundedData()},setSize:function(e,t){this.width=e,this.height=t,this.geom.setSize(e,t),this.updateData(),this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),t.getLineD(i),e.push(i.x2,i.y2),this.pathData=e,this},updateRoundedData:function(){var e=[],t=this.width/2,i=this.height/2,r=Math.min(t,i),s=Math.min(this.radius,r),a=Math.max(1,Math.floor(s/5));return this.arcTo(e,t-t+s,i-i+s,s,Math.PI,1.5*Math.PI,a),e.push(t+t-s,i-i),this.arcTo(e,t+t-s,i-i+s,s,1.5*Math.PI,2*Math.PI,a),e.push(t+t,i+i-s),this.arcTo(e,t+t-s,i+i-s,s,0,.5*Math.PI,a),e.push(t-t+s,i+i),this.arcTo(e,t-t+s,i+i-s,s,.5*Math.PI,Math.PI,a),e.push(t-t,i-i+s),this.pathIndexes=n(e),this.pathData=e,this},arcTo:function(e,t,i,r,n,s,a){for(var o=(s-n)/a,h=0;h<=a;h++){var c=n+o*h;e.push(t+Math.cos(c)*r,i+Math.sin(c)*r)}}})},48682:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926),a=function(e,t,i,r,n,s){var a=Math.min(s,Math.min(r/2,n/2));0===a?e.rect(t,i,r,n):(e.moveTo(t+a,i),e.lineTo(t+r-a,i),e.arcTo(t+r,i,t+r,i+a,a),e.lineTo(t+r,i+n-a),e.arcTo(t+r,i+n,t+r-a,i+n,a),e.lineTo(t+a,i+n),e.arcTo(t,i+n,t,i+n-a,a),e.lineTo(t,i+a),e.arcTo(t,i,t+a,i,a),e.closePath())};e.exports=function(e,t,i,o){i.addToRenderList(t);var h=e.currentContext;if(s(e,h,t,i,o)){var c=t._displayOriginX,l=t._displayOriginY;t.isFilled&&(r(h,t),t.isRounded?(h.beginPath(),a(h,-c,-l,t.width,t.height,t.radius),h.fill()):h.fillRect(-c,-l,t.width,t.height)),t.isStroked&&(n(h,t),h.beginPath(),t.isRounded?a(h,-c,-l,t.width,t.height,t.radius):h.rect(-c,-l,t.width,t.height),h.stroke()),h.restore()}}},87959:(e,t,i)=>{var r=i(39429),n=i(74561);r.register("rectangle",function(e,t,i,r,s,a){return this.displayList.add(new n(this.scene,e,t,i,r,s,a))})},95597:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(52059),renderCanvas:i(48682)}},52059:(e,t,i)=>{var r=i(10441),n=i(91296),s=i(34682),a=i(70554);e.exports=function(e,t,i,o){i.addToRenderList(t);var h=e.pipelines.set(t.pipeline),c=n(t,i,o);h.calcMatrix.copyFrom(c.calc);var l=t._displayOriginX,d=t._displayOriginY,u=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isRounded&&t.isFilled)r(h,c.calc,t,u,l,d);else if(t.isFilled){var f=h.fillTint,p=a.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*u);f.TL=p,f.TR=p,f.BL=p,f.BR=p,h.batchFillRect(-l,-d,t.width,t.height)}t.isStroked&&s(h,t,u,l,d),e.pipelines.postBatch(t)}},55911:(e,t,i)=>{var r=i(81991),n=i(83419),s=i(94811),a=i(17803);e.exports=new n({Extends:a,Mixins:[r],initialize:function(e,t,i,r,n,s,o,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=5),void 0===n&&(n=32),void 0===s&&(s=64),a.call(this,e,"Star",null),this._points=r,this._innerRadius=n,this._outerRadius=s,this.setPosition(t,i),this.setSize(2*s,2*s),void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],t=this._points,i=this._innerRadius,r=this._outerRadius,n=Math.PI/2*3,a=Math.PI/t;e.push(r,r+-r);for(var o=0;o<t;o++)e.push(r+Math.cos(n)*r,r+Math.sin(n)*r),n+=a,e.push(r+Math.cos(n)*i,r+Math.sin(n)*i),n+=a;return e.push(r,r+-r),this.pathIndexes=s(e),this.pathData=e,this}})},64272:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=t._displayOriginX,c=t._displayOriginY,l=t.pathData,d=l.length-1,u=l[0]-h,f=l[1]-c;o.beginPath(),o.moveTo(u,f),t.closePath||(d-=2);for(var p=2;p<d;p+=2){var g=l[p]-h,m=l[p+1]-c;o.lineTo(g,m)}o.closePath(),t.isFilled&&(r(o,t),o.fill()),t.isStroked&&(n(o,t),o.stroke()),o.restore()}}},93697:(e,t,i)=>{var r=i(55911);i(39429).register("star",function(e,t,i,n,s,a,o){return this.displayList.add(new r(this.scene,e,t,i,n,s,a,o))})},81991:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(57017),renderCanvas:i(64272)}},57017:(e,t,i)=>{var r=i(10441),n=i(91296),s=i(34682);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=n(t,i,a),c=o.calcMatrix.copyFrom(h.calc),l=t._displayOriginX,d=t._displayOriginY,u=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&r(o,c,t,u,l,d),t.isStroked&&s(o,t,u,l,d),e.pipelines.postBatch(t)}},36931:(e,t,i)=>{var r=i(83419),n=i(17803),s=i(16483);e.exports=new r({Extends:n,Mixins:[i(96195)],initialize:function(e,t,i,r,a,o,h,c,l,d,u){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=128),void 0===o&&(o=64),void 0===h&&(h=0),void 0===c&&(c=128),void 0===l&&(l=128),n.call(this,e,"Triangle",new s(r,a,o,h,c,l));var f=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(t,i),this.setSize(f,p),void 0!==d&&this.setFillStyle(d,u),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,t,i,r,n,s){return this.geom.setTo(e,t,i,r,n,s),this.updateData()},updateData:function(){var e=[],t=this.geom,i=this._tempLine;return t.getLineA(i),e.push(i.x1,i.y1,i.x2,i.y2),t.getLineB(i),e.push(i.x2,i.y2),t.getLineC(i),e.push(i.x2,i.y2),this.pathData=e,this}})},85172:(e,t,i)=>{var r=i(65960),n=i(75177),s=i(20926);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.currentContext;if(s(e,o,t,i,a)){var h=t._displayOriginX,c=t._displayOriginY,l=t.geom.x1-h,d=t.geom.y1-c,u=t.geom.x2-h,f=t.geom.y2-c,p=t.geom.x3-h,g=t.geom.y3-c;o.beginPath(),o.moveTo(l,d),o.lineTo(u,f),o.lineTo(p,g),o.closePath(),t.isFilled&&(r(o,t),o.fill()),t.isStroked&&(n(o,t),o.stroke()),o.restore()}}},45245:(e,t,i)=>{var r=i(39429),n=i(36931);r.register("triangle",function(e,t,i,r,s,a,o,h,c,l){return this.displayList.add(new n(this.scene,e,t,i,r,s,a,o,h,c,l))})},96195:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(83253),renderCanvas:i(85172)}},83253:(e,t,i)=>{var r=i(91296),n=i(34682),s=i(70554);e.exports=function(e,t,i,a){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),h=r(t,i,a);o.calcMatrix.copyFrom(h.calc);var c=t._displayOriginX,l=t._displayOriginY,d=i.alpha*t.alpha;if(e.pipelines.preBatch(t),t.isFilled){var u=o.fillTint,f=s.getTintAppendFloatAlpha(t.fillColor,t.fillAlpha*d);u.TL=f,u.TR=f,u.BL=f,u.BR=f;var p=t.geom.x1-c,g=t.geom.y1-l,m=t.geom.x2-c,v=t.geom.y2-l,y=t.geom.x3-c,b=t.geom.y3-l;o.batchFillTriangle(p,g,m,v,y,b,h.sprite,h.camera)}t.isStroked&&n(o,t,d,c,l),e.pipelines.postBatch(t)}},68287:(e,t,i)=>{var r=i(9674),n=i(83419),s=i(31401),a=i(95643),o=i(92751);e.exports=new n({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,o],initialize:function(e,t,i,n,s){a.call(this,e,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setPosition(t,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,t){this.anims.update(e,t)},play:function(e,t){return this.anims.play(e,t)},playReverse:function(e,t){return this.anims.playReverse(e,t)},playAfterDelay:function(e,t){return this.anims.playAfterDelay(e,t)},playAfterRepeat:function(e,t){return this.anims.playAfterRepeat(e,t)},chain:function(e){return this.anims.chain(e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(e){return this.anims.stopAfterDelay(e)},stopAfterRepeat:function(e){return this.anims.stopAfterRepeat(e)},stopOnFrame:function(e){return this.anims.stopOnFrame(e)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}})},76552:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)}},15567:(e,t,i)=>{var r=i(25305),n=i(13059),s=i(44603),a=i(23568),o=i(68287);s.register("sprite",function(e,t){void 0===e&&(e={});var i=a(e,"key",null),s=a(e,"frame",null),h=new o(this.scene,0,0,i,s);return void 0!==t&&(e.add=t),r(this.scene,h,e),n(h,e),h})},46409:(e,t,i)=>{var r=i(39429),n=i(68287);r.register("sprite",function(e,t,i,r){return this.displayList.add(new n(this.scene,e,t,i,r))})},92751:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(9409),renderCanvas:i(76552)}},9409:e=>{e.exports=function(e,t,i,r){i.addToRenderList(t),t.pipeline.batchSprite(t,i,r)}},14220:e=>{e.exports=function(e,t,i){var r=e.canvas,n=e.context,s=e.style,a=[],o=0,h=i.length;s.maxLines>0&&s.maxLines<i.length&&(h=s.maxLines),s.syncFont(r,n);for(var c=e.letterSpacing,l=0;l<h;l++){var d=s.strokeThickness;if(0===c)d+=n.measureText(i[l]).width;else{for(var u=i[l],f=0;f<u.length;f++)d+=n.measureText(u[f]).width;u.length>1&&(d+=c*(u.length-1))}s.wordWrap&&(d-=n.measureText(" ").width),a[l]=Math.ceil(d),o=Math.max(o,a[l])}var p=t.fontSize+s.strokeThickness,g=p*h,m=e.lineSpacing;return h>1&&(g+=m*(h-1)),{width:o,height:g,lines:h,lineWidths:a,lineSpacing:m,lineHeight:p}}},79557:(e,t,i)=>{var r=i(27919);e.exports=function(e){var t,i,n=r.create(this),s=n.getContext("2d",{willReadFrequently:!0});e.syncFont(n,s);var a=s.measureText(e.testString);if("actualBoundingBoxAscent"in a){var o=a.actualBoundingBoxAscent,h=a.actualBoundingBoxDescent;return r.remove(n),{ascent:o,descent:h,fontSize:o+h}}var c=Math.ceil(a.width*e.baselineX),l=c,d=2*l;l=l*e.baselineY|0,n.width=c,n.height=d,s.fillStyle="#f00",s.fillRect(0,0,c,d),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,l);var u={ascent:0,descent:0,fontSize:0},f=s.getImageData(0,0,c,d);if(!f)return u.ascent=l,u.descent=l+6,u.fontSize=u.ascent+u.descent,r.remove(n),u;var p=f.data,g=p.length,m=4*c,v=0,y=!1;for(t=0;t<l;t++){for(i=0;i<m;i+=4)if(255!==p[v+i]){y=!0;break}if(y)break;v+=m}for(u.ascent=l-t,v=g-m,y=!1,t=d;t>l;t--){for(i=0;i<m;i+=4)if(255!==p[v+i]){y=!0;break}if(y)break;v-=m}return u.descent=t-l,u.fontSize=u.ascent+u.descent,r.remove(n),u}},50171:(e,t,i)=>{var r=i(40366),n=i(27919),s=i(83419),a=i(31401),o=i(95643),h=i(14220),c=i(35154),l=i(35846),d=i(61771),u=i(35762),f=i(45650);e.exports=new s({Extends:o,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,d],initialize:function(e,t,i,r,s){void 0===t&&(t=0),void 0===i&&(i=0),o.call(this,e,"Text"),this.renderer=e.sys.renderer,this.setPosition(t,i),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=n.create(this),this.context,this.style=new u(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=f(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing),s&&s.letterSpacing&&this.setLetterSpacing(s.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);return Array.isArray(i)&&(i=i.join("\n")),i}return t.wordWrapWidth?t.wordWrapUseAdvanced?this.advancedWordWrap(e,this.context,this.style.wordWrapWidth):this.basicWordWrap(e,this.context,this.style.wordWrapWidth):e},advancedWordWrap:function(e,t,i){for(var r="",n=e.replace(/ +/gi," ").split(this.splitRegExp),s=n.length,a=0;a<s;a++){var o=n[a],h="",c=(o=o.replace(/^ *|\s*$/gi,"")).length*this.letterSpacing;if(t.measureText(o).width+c<i){r+=o+"\n";continue}for(var l=i,d=o.split(" "),u=0;u<d.length;u++){var f=d[u],p=f+" ",g=p.length*this.letterSpacing,m=t.measureText(p).width+g;if(m>l){if(0===u){for(var v=p;v.length;){var y=(v=v.slice(0,-1)).length*this.letterSpacing;if((m=t.measureText(v).width+y)<=l)break}if(!v.length)throw Error("wordWrapWidth < a single character");var b=f.substr(v.length);d[u]=b,h+=v}var x=d[u].length?u:u+1,E=d.slice(x).join(" ").replace(/[ \n]*$/gi,"");n.splice(a+1,0,E),s=n.length;break}h+=p,l-=m}r+=h.replace(/[ \n]*$/gi,"")+"\n"}return r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(e,t,i){for(var r="",n=e.split(this.splitRegExp),s=n.length-1,a=t.measureText(" ").width,o=0;o<=s;o++){for(var h=i,c=n[o].split(" "),l=c.length-1,d=0;d<=l;d++){var u=c[d],f=u.length*this.letterSpacing,p=t.measureText(u).width+f,g=p;d<l&&(g+=a),g>h&&d>0&&(r+="\n",h=i),r+=u,d<l?(r+=" ",h-=g):h-=p}o<s&&(r+="\n")}return r},getWrappedText:function(e){return void 0===e&&(e=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(e).split(this.splitRegExp)},setText:function(e){return e||0===e||(e=""),Array.isArray(e)&&(e=e.join("\n")),e!==this._text&&(this._text=e.toString(),this.updateText()),this},appendText:function(e,t){void 0===t&&(t=!0),e||0===e||(e=""),Array.isArray(e)&&(e=e.join("\n")),e=e.toString();var i=this._text.concat(t?"\n"+e:e);return i!==this._text&&(this._text=i,this.updateText()),this},setStyle:function(e){return this.style.setStyle(e)},setFont:function(e){return this.style.setFont(e)},setFontFamily:function(e){return this.style.setFontFamily(e)},setFontSize:function(e){return this.style.setFontSize(e)},setFontStyle:function(e){return this.style.setFontStyle(e)},setFixedSize:function(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function(e){return this.style.setBackgroundColor(e)},setFill:function(e){return this.style.setFill(e)},setColor:function(e){return this.style.setColor(e)},setStroke:function(e,t){return this.style.setStroke(e,t)},setShadow:function(e,t,i,r,n,s){return this.style.setShadow(e,t,i,r,n,s)},setShadowOffset:function(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function(e){return this.style.setShadowColor(e)},setShadowBlur:function(e){return this.style.setShadowBlur(e)},setShadowStroke:function(e){return this.style.setShadowStroke(e)},setShadowFill:function(e){return this.style.setShadowFill(e)},setWordWrapWidth:function(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function(e){return this.style.setAlign(e)},setResolution:function(e){return this.style.setResolution(e)},setLineSpacing:function(e){return this.lineSpacing=e,this.updateText()},setLetterSpacing:function(e){return this.letterSpacing=e,this.updateText()},setPadding:function(e,t,i,r){if("object"==typeof e){var n=e,s=c(n,"x",null);null!==s?(e=s,i=s):(e=c(n,"left",0),i=c(n,"right",e));var a=c(n,"y",null);null!==a?(t=a,r=a):(t=c(n,"top",0),r=c(n,"bottom",t))}else void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=e),void 0===r&&(r=t);return this.padding.left=e,this.padding.top=t,this.padding.right=i,this.padding.bottom=r,this.updateText()},setMaxLines:function(e){return this.style.setMaxLines(e)},setRTL:function(e){void 0===e&&(e=!0);var t=this.style;return t.rtl===e||(t.rtl=e,e?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),"left"===t.align?t.align="right":"right"===t.align&&(t.align="left")),this},updateText:function(){var e,t,i,r=this.canvas,n=this.context,s=this.style,a=s.resolution,o=s.metrics;s.syncFont(r,n);var c=this._text;(s.wordWrapWidth||s.wordWrapCallback)&&(c=this.runWordWrap(this._text));var l=c.split(this.splitRegExp),d=h(this,o,l),u=this.padding;0===s.fixedWidth?(this.width=d.width+u.left+u.right,e=d.width):(this.width=s.fixedWidth,(e=this.width-u.left-u.right)<d.width&&(e=d.width)),0===s.fixedHeight?this.height=d.height+u.top+u.bottom:this.height=s.fixedHeight;var f=this.width,p=this.height;this.updateDisplayOrigin(),f*=a,p*=a,f=Math.max(f,1),p=Math.max(p,1),r.width!==f||r.height!==p?(r.width=f,r.height=p,this.frame.setSize(f,p),s.syncFont(r,n),s.rtl&&(n.direction="rtl")):n.clearRect(0,0,f,p),n.save(),n.scale(a,a),s.backgroundColor&&(n.fillStyle=s.backgroundColor,n.fillRect(0,0,f,p)),s.syncStyle(r,n),n.translate(u.left,u.top);for(var g=0;g<d.lines;g++){if(t=s.strokeThickness/2,i=s.strokeThickness/2+g*d.lineHeight+o.ascent,g>0&&(i+=d.lineSpacing*g),s.rtl)t=f-t-u.left-u.right;else if("right"===s.align)t+=e-d.lineWidths[g];else if("center"===s.align)t+=(e-d.lineWidths[g])/2;else if("justify"===s.align&&d.lineWidths[g]/d.width>=.85){for(var m=d.width-d.lineWidths[g],v=n.measureText(" ").width,y=l[g].trim(),b=y.split(" "),x=Math.floor((m+=(l[g].length-y.length)*v)/v),E=0;x>0;)b[E]+=" ",E=(E+1)%(b.length-1||1),--x;l[g]=b.join(" ")}this.autoRound&&(t=Math.round(t),i=Math.round(i));var T=this.letterSpacing;if(s.strokeThickness&&0===T&&(s.syncShadow(n,s.shadowStroke),n.strokeText(l[g],t,i)),s.color)if(s.syncShadow(n,s.shadowFill),0!==T)for(var A=0,w=l[g].split(""),S=0;S<w.length;S++)s.strokeThickness&&(s.syncShadow(n,s.shadowStroke),n.strokeText(w[S],t+A,i),s.syncShadow(n,s.shadowFill)),n.fillText(w[S],t+A,i),A+=n.measureText(w[S]).width+T;else n.fillText(l[g],t,i)}n.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(r,this.frame.source.glTexture,!0));var C=this.input;return C&&!C.customHitArea&&(C.hitArea.width=this.width,C.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(e){this.setText(e)}},toJSON:function(){var e=a.ToJSON(this);return e.data={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}},e},preDestroy:function(){l(this.canvas),n.remove(this.canvas);var e=this.texture;e&&e.destroy()}})},79724:e=>{e.exports=function(e,t,i,r){0!==t.width&&0!==t.height&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))}},71259:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(50171);n.register("text",function(e,t){void 0===e&&(e={});var i=s(e,"text",""),n=s(e,"style",null),o=s(e,"padding",null);null!==o&&(n.padding=o);var h=new a(this.scene,0,0,i,n);return void 0!==t&&(e.add=t),r(this.scene,h,e),h.autoRound=s(e,"autoRound",!0),h.resolution=s(e,"resolution",1),h})},68005:(e,t,i)=>{var r=i(50171);i(39429).register("text",function(e,t,i,n){return this.displayList.add(new r(this.scene,e,t,i,n))})},61771:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(34397),renderCanvas:i(79724)}},35762:(e,t,i)=>{var r=i(83419),n=i(23568),s=i(35154),a=i(79557),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃâ°qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]};e.exports=new r({initialize:function(e,t){this.parent=e,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(t,!1,!0)},setStyle:function(e,t,i){for(var r in void 0===t&&(t=!0),void 0===i&&(i=!1),o){var h=i?o[r][1]:this[r];"wordWrapCallback"===r||"wordWrapCallbackScope"===r?this[r]=s(e,o[r][0],h):e&&"fontSize"===r&&"number"==typeof e.fontSize?this[r]=e.fontSize.toString()+"px":this[r]=n(e,o[r][0],h)}var c=s(e,"font",null);null!==c&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var l=s(e,"fill",null);null!==l&&(this.color=l);var d=s(e,"metrics",!1);return(d?this.metrics={ascent:s(d,"ascent",0),descent:s(d,"descent",0),fontSize:s(d,"fontSize",0)}:(t||!this.metrics)&&(this.metrics=a(this)),t)?this.parent.updateText():this.parent},syncFont:function(e,t){t.font=this._font},syncStyle:function(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"},syncShadow:function(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)},update:function(e){return e&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(e,t){void 0===t&&(t=!0);var i=e,r="",n="";if("string"!=typeof e)i=s(e,"fontFamily","Courier"),r=s(e,"fontSize","16px"),n=s(e,"fontStyle","");else{var a=e.split(" "),o=0;n=a.length>2?a[o++]:"",r=a[o++]||"16px",i=a[o++]||"Courier"}return(i!==this.fontFamily||r!==this.fontSize||n!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=r,this.fontStyle=n,t&&this.update(!0)),this.parent},setFontFamily:function(e){return this.fontFamily!==e&&(this.fontFamily=e,this.update(!0)),this.parent},setFontStyle:function(e){return this.fontStyle!==e&&(this.fontStyle=e,this.update(!0)),this.parent},setFontSize:function(e){return"number"==typeof e&&(e=e.toString()+"px"),this.fontSize!==e&&(this.fontSize=e,this.update(!0)),this.parent},setTestString:function(e){return this.testString=e,this.update(!0)},setFixedSize:function(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(!1)},setBackgroundColor:function(e){return this.backgroundColor=e,this.update(!1)},setFill:function(e){return this.color=e,this.update(!1)},setColor:function(e){return this.color=e,this.update(!1)},setResolution:function(e){return this.resolution=e,this.update(!1)},setStroke:function(e,t){return void 0===t&&(t=this.strokeThickness),void 0===e&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):(this.stroke!==e||this.strokeThickness!==t)&&(this.stroke=e,this.strokeThickness=t,this.update(!0)),this.parent},setShadow:function(e,t,i,r,n,s){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="#000"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===s&&(s=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=i,this.shadowBlur=r,this.shadowStroke=n,this.shadowFill=s,this.update(!1)},setShadowOffset:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)},setShadowColor:function(e){return void 0===e&&(e="#000"),this.shadowColor=e,this.update(!1)},setShadowBlur:function(e){return void 0===e&&(e=0),this.shadowBlur=e,this.update(!1)},setShadowStroke:function(e){return this.shadowStroke=e,this.update(!1)},setShadowFill:function(e){return this.shadowFill=e,this.update(!1)},setWordWrapWidth:function(e,t){return void 0===t&&(t=!1),this.wordWrapWidth=e,this.wordWrapUseAdvanced=t,this.update(!1)},setWordWrapCallback:function(e,t){return void 0===t&&(t=null),this.wordWrapCallback=e,this.wordWrapCallbackScope=t,this.update(!1)},setAlign:function(e){return void 0===e&&(e="left"),this.align=e,this.update(!1)},setMaxLines:function(e){return void 0===e&&(e=0),this.maxLines=e,this.update(!1)},getTextMetrics:function(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function(){var e={};for(var t in o)e[t]=this[t];return e.metrics=this.getTextMetrics(),e},destroy:function(){this.parent=void 0}})},34397:(e,t,i)=>{var r=i(70554);e.exports=function(e,t,i,n){if(0!==t.width&&0!==t.height){i.addToRenderList(t);var s=t.frame,a=s.width,o=s.height,h=r.getTintAppendFloatAlpha,c=e.pipelines.set(t.pipeline,t),l=c.setTexture2D(s.glTexture,t);c.batchTexture(t,s.glTexture,a,o,t.x,t.y,a/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,a,o,h(t.tintTopLeft,i.alpha*t._alphaTL),h(t.tintTopRight,i.alpha*t._alphaTR),h(t.tintBottomLeft,i.alpha*t._alphaBL),h(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,n,!1,l)}}},20839:(e,t,i)=>{var r=i(27919),n=i(83419),s=i(31401),a=i(95643),o=i(98439),h=i(68703),c=i(56295),l=i(45650),d=i(26099);e.exports=new n({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,c],initialize:function(e,t,i,n,s,h,c){var u=e.sys.renderer;a.call(this,e,"TileSprite");var f=e.sys.textures.get(h),p=f.get(c);p.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),p=(f=e.sys.textures.get("__MISSING")).get()),"DynamicTexture"===f.type&&(console.warn("TileSprite cannot use Dynamic Texture"),p=(f=e.sys.textures.get("__MISSING")).get()),n&&s?(n=Math.floor(n),s=Math.floor(s)):(n=n||p.width,s=s||p.height),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=u,this.canvas=r.create(this,n,s),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=f,this.displayFrame=p,this._crop=this.resetCropObject(),this._textureKey=l(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=o(p.width),this.potHeight=o(p.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(t,i),this.setSize(n,s),this.setFrame(c),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(e,t){return this.displayTexture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){var t=this.displayTexture.get(e);return this.potWidth=o(t.width),this.potHeight=o(t.height),this.canvas.width=0,t.cutWidth&&t.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=t,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(e,t){return void 0!==e&&(this.tilePositionX=e),void 0!==t&&(this.tilePositionY=t),this},setTileScale:function(e,t){return void 0===e&&(e=this.tileScaleX),void 0===t&&(t=e),this.tileScaleX=e,this.tileScaleY=t,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var e=this.displayFrame;if(e.source.isRenderTexture||e.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var t=this.fillContext,i=this.fillCanvas,r=this.potWidth,n=this.potHeight;this.renderer&&this.renderer.gl||(r=e.cutWidth,n=e.cutHeight),t.clearRect(0,0,r,n),i.width=r,i.height=n,t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,r,n),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=t.createPattern(i,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var e=this.canvas;if((e.width!==this.width||e.height!==this.height)&&(e.width=this.width,e.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var t=this.context;this.scene.sys.game.config.antialias||h.disable(t);var i=this._tileScale.x,r=this._tileScale.y,n=this._tilePosition.x,s=this._tilePosition.y;t.clearRect(0,0,this.width,this.height),t.save(),t.scale(i,r),t.translate(-n,-s),t.fillStyle=this.fillPattern,t.fillRect(n,s,this.width/i,this.height/r),t.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var e=this.texture;e&&e.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(e){this._tilePosition.x=e,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(e){this._tilePosition.y=e,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(e){this._tileScale.x=e,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(e){this._tileScale.y=e,this.dirty=!0}}})},46992:e=>{e.exports=function(e,t,i,r){t.updateCanvas(),i.addToRenderList(t),e.batchSprite(t,t.frame,i,r)}},14167:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(20839);n.register("tileSprite",function(e,t){void 0===e&&(e={});var i=s(e,"x",0),n=s(e,"y",0),o=s(e,"width",512),h=s(e,"height",512),c=s(e,"key",""),l=s(e,"frame",""),d=new a(this.scene,i,n,o,h,c,l);return void 0!==t&&(e.add=t),r(this.scene,d,e),d})},91681:(e,t,i)=>{var r=i(20839);i(39429).register("tileSprite",function(e,t,i,n,s,a){return this.displayList.add(new r(this.scene,e,t,i,n,s,a))})},56295:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(18553),renderCanvas:i(46992)}},18553:(e,t,i)=>{var r=i(70554);e.exports=function(e,t,i,n){t.updateCanvas();var s=t.width,a=t.height;if(0!==s&&0!==a){i.addToRenderList(t);var o=r.getTintAppendFloatAlpha,h=e.pipelines.set(t.pipeline,t),c=h.setTexture2D(t.fillPattern,t);h.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,s,a,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*s,t.originY*a,0,0,s,a,o(t.tintTopLeft,i.alpha*t._alphaTL),o(t.tintTopRight,i.alpha*t._alphaTR),o(t.tintBottomLeft,i.alpha*t._alphaBL),o(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,i,n,!1,c)}}},18471:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(31401),a=i(51708),o=i(8443),h=i(95643),c=i(36383),l=i(14463),d=i(45650),u=i(10247);e.exports=new n({Extends:h,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.TextureCrop,s.Tint,s.Transform,s.Visible,u],initialize:function(e,t,i,r){h.call(this,e,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=d(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var n=e.sys.game;this._device=n.device.video,this.setPosition(t,i),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),n.events.on(o.PAUSE,this.globalPause,this),n.events.on(o.RESUME,this.globalResume,this);var s=e.sys.sound;s&&s.on(l.GLOBAL_MUTE,this.globalMute,this),r&&this.load(r)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(e){var t=this.scene.sys.cache.video.get(e);return t?(this.cacheKey=e,this.loadHandler(t.url,t.noAudio,t.crossOrigin)):console.warn("No video in cache for key: "+e),this},changeSource:function(e,t,i,r,n){void 0===t&&(t=!0),void 0===i&&(i=!1),this.cacheKey!==e&&(this.load(e),t&&this.play(i,r,n))},getVideoKey:function(){return this.cacheKey},loadURL:function(e,t,i){void 0===t&&(t=!1);var r=this._device.getVideoURL(e);return r?(this.cacheKey="",this.loadHandler(r.url,t,i)):console.warn("No supported video format found for "+e),this},loadMediaStream:function(e,t,i){return this.loadHandler(null,t,i,e)},loadHandler:function(e,t,i,r){t||(t=!1);var n=this.video;if(n?(this.removeLoadEventHandlers(),this.stop()):((n=document.createElement("video")).controls=!1,n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.setAttribute("disablePictureInPicture","true")),t?(n.muted=!0,n.defaultMuted=!0,n.setAttribute("autoplay","autoplay")):(n.muted=!1,n.defaultMuted=!1,n.removeAttribute("autoplay")),i?n.setAttribute("crossorigin",i):n.removeAttribute("crossorigin"),r)if("srcObject"in n)try{n.srcObject=r}catch(e){if("TypeError"!==e.name)throw e;n.src=URL.createObjectURL(r)}else n.src=URL.createObjectURL(r);else n.src=e;this.retry=0,this.video=n,this._playCalled=!1,n.load(),this.addLoadEventHandlers();var s=this.scene.sys.textures.get(this._key);return this.setTexture(s),this},requestVideoFrame:function(e,t){var i=this.video;if(i){var r=t.width,n=t.height,s=this.videoTexture,o=this.videoTextureSource,h=!s||o.source!==i;h?(this._codePaused=i.paused,this._codeMuted=i.muted,s?(o.source=i,o.width=r,o.height=n,s.get().setSize(r,n)):((s=this.scene.sys.textures.create(this._key,i,r,n)).add("__BASE",0,0,0,r,n),this.setTexture(s),this.videoTexture=s,this.videoTextureSource=s.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(a.VIDEO_TEXTURE,this,s)),this.setSizeToFrame(),this.updateDisplayOrigin()):o.update(),this.isStalled=!1,this.metadata=t;var c=t.mediaTime;h&&(this._lastUpdate=c,this.emit(a.VIDEO_CREATED,this,r,n),this.frameReady||(this.frameReady=!0,this.emit(a.VIDEO_PLAY,this))),this._playingMarker?c>=this._markerOut&&(i.loop?(i.currentTime=this._markerIn,this.emit(a.VIDEO_LOOP,this)):(this.stop(!1),this.emit(a.VIDEO_COMPLETE,this))):c<this._lastUpdate&&this.emit(a.VIDEO_LOOP,this),this._lastUpdate=c,this._getFrame?(this.removeEventHandlers(),i.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=c.MAX_SAFE_INTEGER);var r=this.video;return!r||this.isPlaying()?r||console.warn("Video not loaded"):(void 0===e&&(e=r.loop),r.loop=e,this._markerIn=t,this._markerOut=i,this._playingMarker=t>-1&&i>t&&i<c.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=r.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise())),this},getFirstFrame:function(){var e=this.video;return!e||this.isPlaying()?e||console.warn("Video not loaded"):this._playCalled||(this._getFrame=!0,this._rfvCallbackId=e.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this},addLoadEventHandlers:function(){var e=this.video;e&&(e.addEventListener("error",this._loadCallbackHandler),e.addEventListener("abort",this._loadCallbackHandler),e.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var e=this.video;e&&(e.removeEventListener("error",this._loadCallbackHandler),e.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.addEventListener(i,t[i])}},removeEventHandlers:function(){var e=this.video;if(e){var t=this._callbacks;for(var i in t)e.removeEventListener(i,t[i])}},createPlayPromise:function(e){void 0===e&&(e=!0);var t=this.video,i=t.play();if(void 0!==i){var r=this.playSuccess.bind(this),n=this.playError.bind(this);if(!e){var s=this;n=function(){s.failedPlayAttempts++}}i.then(r).catch(n)}else t.addEventListener("playing",this._callbacks.legacy),!e&&this.failedPlayAttempts++},addMarker:function(e,t,i){return!isNaN(t)&&t>=0&&!isNaN(i)&&i>t&&(this.markers[e]=[t,i]),this},playMarker:function(e,t){var i=this.markers[e];return i&&this.play(t,i[0],i[1]),this},removeMarker:function(e){return delete this.markers[e],this},snapshot:function(e,t){return void 0===e&&(e=this.width),void 0===t&&(t=this.height),this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function(e,t,i,r,n,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),void 0===n&&(n=i),void 0===s&&(s=r);var a=this.video,o=this.snapshotTexture;return o?o.setSize(n,s):(o=this.scene.sys.textures.createCanvas(d(),n,s),this.snapshotTexture=o),a&&o.context.drawImage(a,e,t,i,r,0,0,n,s),o.update()},saveSnapshotTexture:function(e){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e):this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(a.VIDEO_UNLOCKED,this));var e=this.scene.sys.sound;e&&e.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(e){var t=e.name;"NotAllowedError"===t?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(a.VIDEO_LOCKED,this)):"NotSupportedError"===t?(this.stop(!1),this.emit(a.VIDEO_UNSUPPORTED,this,e)):(this.stop(!1),this.emit(a.VIDEO_ERROR,this,e))},legacyPlayHandler:function(){var e=this.video;e&&(this.playSuccess(),e.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(a.VIDEO_PLAYING,this)},loadErrorHandler:function(e){this.stop(!1),this.emit(a.VIDEO_ERROR,this,e)},metadataHandler:function(e){this.emit(a.VIDEO_METADATA,this,e)},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,1!==this.scaleX&&(this.scaleX=this.displayWidth/this.width),1!==this.scaleY&&(this.scaleY=this.displayHeight/this.height);var t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},stalledHandler:function(e){this.isStalled=!0,this.emit(a.VIDEO_STALLED,this,e)},completeHandler:function(){this._playCalled=!1,this.emit(a.VIDEO_COMPLETE,this)},preUpdate:function(e,t){this.video&&this._playCalled&&this.touchLocked&&this.playWhenUnlocked&&(this.retry+=t,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(e){var t=this.video;if(t){var i=t.duration;i===1/0||isNaN(i)||this.setCurrentTime(i*e)}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(e){var t=this.video;if(t){if("string"==typeof e){var i=e[0],r=parseFloat(e.substr(1));"+"===i?e=t.currentTime+r:"-"===i&&(e=t.currentTime-r)}t.currentTime=e}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(a.VIDEO_SEEKED,this)},getProgress:function(){var e=this.video;if(e){var t=e.duration;if(t!==1/0&&!isNaN(t))return e.currentTime/t}return -1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(e){void 0===e&&(e=!0),this._codeMuted=e;var t=this.video;return t&&(t.muted=!!this._systemMuted||e),this},isMuted:function(){return this._codeMuted},globalMute:function(e,t){this._systemMuted=t;var i=this.video;i&&(i.muted=!!this._codeMuted||t)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,!this.video||this._codePaused||this.video.ended||this.createPlayPromise()},setPaused:function(e){void 0===e&&(e=!0);var t=this.video;return this._codePaused=e,t&&!t.ended&&(e?t.paused||(this.removeEventHandlers(),t.pause()):e||(this._playCalled?t.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(e){return void 0===e&&(e=1),this.video&&(this.video.volume=r(e,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(e){return this.video&&(this.video.playbackRate=e),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(e){return void 0===e&&(e=!0),this.video&&(this.video.loop=e),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(e,t){return void 0===t&&(t=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,e),this.videoTextureSource.setFlipY(t)),this._key=e,this.flipY=t,!!this.videoTexture},stop:function(e){void 0===e&&(e=!0);var t=this.video;return t&&(this.removeEventHandlers(),t.cancelVideoFrameCallback(this._rfvCallbackId),t.pause()),this.retry=0,this._playCalled=!1,e&&this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var e=this.video;if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("autoplay"),e.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var e=this.scene.sys.game.events;e.off(o.PAUSE,this.globalPause,this),e.off(o.RESUME,this.globalResume,this);var t=this.scene.sys.sound;t&&t.off(l.GLOBAL_MUTE,this.globalMute,this)}})},58352:e=>{e.exports=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,r))}},11511:(e,t,i)=>{var r=i(25305),n=i(44603),s=i(23568),a=i(18471);n.register("video",function(e,t){void 0===e&&(e={});var i=s(e,"key",null),n=new a(this.scene,0,0,i);return void 0!==t&&(e.add=t),r(this.scene,n,e),n})},89025:(e,t,i)=>{var r=i(18471);i(39429).register("video",function(e,t,i){return this.displayList.add(new r(this.scene,e,t,i))})},10247:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(29849),renderCanvas:i(58352)}},29849:e=>{e.exports=function(e,t,i,r){t.videoTexture&&(i.addToRenderList(t),t.pipeline.batchSprite(t,i,r))}},41481:(e,t,i)=>{var r=i(10312),n=i(96503),s=i(87902),a=i(83419),o=i(31401),h=i(95643),c=i(87841),l=i(37303);e.exports=new a({Extends:h,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(e,t,i,n,s){void 0===n&&(n=1),void 0===s&&(s=n),h.call(this,e,"Zone"),this.setPosition(t,i),this.width=n,this.height=s,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){void 0===i&&(i=!0),this.width=e,this.height=t,this.updateDisplayOrigin();var r=this.input;return i&&r&&!r.customHitArea&&(r.hitArea.width=e,r.hitArea.height=t),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},setCircleDropZone:function(e){return this.setDropZone(new n(0,0,e),s)},setRectangleDropZone:function(e,t){return this.setDropZone(new c(0,0,e,t),l)},setDropZone:function(e,t){return this.input||this.setInteractive(e,t,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(e,t,i){i.addToRenderList(t)},renderWebGL:function(e,t,i){i.addToRenderList(t)}})},95261:(e,t,i)=>{var r=i(44603),n=i(23568),s=i(41481);r.register("zone",function(e){var t=n(e,"x",0),i=n(e,"y",0),r=n(e,"width",1),a=n(e,"height",r);return new s(this.scene,t,i,r,a)})},84175:(e,t,i)=>{var r=i(41481);i(39429).register("zone",function(e,t,i,n){return this.displayList.add(new r(this.scene,e,t,i,n))})},95166:e=>{e.exports=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0}},96503:(e,t,i)=>{var r=i(83419),n=i(87902),s=i(26241),a=i(79124),o=i(23777),h=i(28176);e.exports=new r({initialize:function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.type=o.CIRCLE,this.x=e,this.y=t,this._radius=i,this._diameter=2*i},contains:function(e,t){return n(this,e,t)},getPoint:function(e,t){return s(this,e,t)},getPoints:function(e,t,i){return a(this,e,t,i)},getRandomPoint:function(e){return h(this,e)},setTo:function(e,t,i){return this.x=e,this.y=t,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(e){this._radius=e,this._diameter=2*e}},diameter:{get:function(){return this._diameter},set:function(e){this._diameter=e,this._radius=.5*e}},left:{get:function(){return this.x-this._radius},set:function(e){this.x=e+this._radius}},right:{get:function(){return this.x+this._radius},set:function(e){this.x=e-this._radius}},top:{get:function(){return this.y-this._radius},set:function(e){this.y=e+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(e){this.y=e-this._radius}}})},71562:e=>{e.exports=function(e){return 2*(Math.PI*e.radius)}},92110:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i){return void 0===i&&(i=new r),i.x=e.x+e.radius*Math.cos(t),i.y=e.y+e.radius*Math.sin(t),i}},42250:(e,t,i)=>{var r=i(96503);e.exports=function(e){return new r(e.x,e.y,e.radius)}},87902:e=>{e.exports=function(e,t,i){return e.radius>0&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom&&(e.x-t)*(e.x-t)+(e.y-i)*(e.y-i)<=e.radius*e.radius}},5698:(e,t,i)=>{var r=i(87902);e.exports=function(e,t){return r(e,t.x,t.y)}},70588:(e,t,i)=>{var r=i(87902);e.exports=function(e,t){return r(e,t.x,t.y)&&r(e,t.right,t.y)&&r(e,t.x,t.bottom)&&r(e,t.right,t.bottom)}},26394:e=>{e.exports=function(e,t){return t.setTo(e.x,e.y,e.radius)}},76278:e=>{e.exports=function(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius}},2074:(e,t,i)=>{var r=i(87841);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=e.left,t.y=e.top,t.width=e.diameter,t.height=e.diameter,t}},26241:(e,t,i)=>{var r=i(92110),n=i(62945),s=i(36383),a=i(2141);e.exports=function(e,t,i){return void 0===i&&(i=new a),r(e,n(t,0,s.PI2),i)}},79124:(e,t,i)=>{var r=i(71562),n=i(92110),s=i(62945),a=i(36383);e.exports=function(e,t,i,o){void 0===o&&(o=[]),!t&&i>0&&(t=r(e)/i);for(var h=0;h<t;h++){var c=s(h/t,0,a.PI2);o.push(n(e,c))}return o}},50884:e=>{e.exports=function(e,t,i){return e.x+=t,e.y+=i,e}},39212:e=>{e.exports=function(e,t){return e.x+=t.x,e.y+=t.y,e}},28176:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){void 0===t&&(t=new r);var i=2*Math.PI*Math.random(),n=Math.random()+Math.random(),s=n>1?2-n:n,a=s*Math.cos(i),o=s*Math.sin(i);return t.x=e.x+a*e.radius,t.y=e.y+o*e.radius,t}},88911:(e,t,i)=>{var r=i(96503);r.Area=i(95166),r.Circumference=i(71562),r.CircumferencePoint=i(92110),r.Clone=i(42250),r.Contains=i(87902),r.ContainsPoint=i(5698),r.ContainsRect=i(70588),r.CopyFrom=i(26394),r.Equals=i(76278),r.GetBounds=i(2074),r.GetPoint=i(26241),r.GetPoints=i(79124),r.Offset=i(50884),r.OffsetPoint=i(39212),r.Random=i(28176),e.exports=r},23777:e=>{e.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},78874:e=>{e.exports=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI}},92990:e=>{e.exports=function(e){var t=e.width/2,i=e.height/2,r=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*r/(10+Math.sqrt(4-3*r)))}},79522:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i){void 0===i&&(i=new r);var n=e.width/2,s=e.height/2;return i.x=e.x+n*Math.cos(t),i.y=e.y+s*Math.sin(t),i}},58102:(e,t,i)=>{var r=i(8497);e.exports=function(e){return new r(e.x,e.y,e.width,e.height)}},81154:e=>{e.exports=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var r=(t-e.x)/e.width,n=(i-e.y)/e.height;return r*=r,n*=n,r+n<.25}},46662:(e,t,i)=>{var r=i(81154);e.exports=function(e,t){return r(e,t.x,t.y)}},1632:(e,t,i)=>{var r=i(81154);e.exports=function(e,t){return r(e,t.x,t.y)&&r(e,t.right,t.y)&&r(e,t.x,t.bottom)&&r(e,t.right,t.bottom)}},65534:e=>{e.exports=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)}},8497:(e,t,i)=>{var r=i(83419),n=i(81154),s=i(90549),a=i(48320),o=i(23777),h=i(24820);e.exports=new r({initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=o.ELLIPSE,this.x=e,this.y=t,this.width=i,this.height=r},contains:function(e,t){return n(this,e,t)},getPoint:function(e,t){return s(this,e,t)},getPoints:function(e,t,i){return a(this,e,t,i)},getRandomPoint:function(e){return h(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return void 0===t&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(e){this.x=e+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(e){this.y=e+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}})},36146:e=>{e.exports=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}},23694:(e,t,i)=>{var r=i(87841);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=e.left,t.y=e.top,t.width=e.width,t.height=e.height,t}},90549:(e,t,i)=>{var r=i(79522),n=i(62945),s=i(36383),a=i(2141);e.exports=function(e,t,i){return void 0===i&&(i=new a),r(e,n(t,0,s.PI2),i)}},48320:(e,t,i)=>{var r=i(92990),n=i(79522),s=i(62945),a=i(36383);e.exports=function(e,t,i,o){void 0===o&&(o=[]),!t&&i>0&&(t=r(e)/i);for(var h=0;h<t;h++){var c=s(h/t,0,a.PI2);o.push(n(e,c))}return o}},73424:e=>{e.exports=function(e,t,i){return e.x+=t,e.y+=i,e}},44808:e=>{e.exports=function(e,t){return e.x+=t.x,e.y+=t.y,e}},24820:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){void 0===t&&(t=new r);var i=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return t.x=e.x+n*Math.cos(i)*e.width/2,t.y=e.y+n*Math.sin(i)*e.height/2,t}},49203:(e,t,i)=>{var r=i(8497);r.Area=i(78874),r.Circumference=i(92990),r.CircumferencePoint=i(79522),r.Clone=i(58102),r.Contains=i(81154),r.ContainsPoint=i(46662),r.ContainsRect=i(1632),r.CopyFrom=i(65534),r.Equals=i(36146),r.GetBounds=i(23694),r.GetPoint=i(90549),r.GetPoints=i(48320),r.Offset=i(73424),r.OffsetPoint=i(44808),r.Random=i(24820),e.exports=r},55738:(e,t,i)=>{var r=i(23777),n=i(79291),s={Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)};e.exports=s=n(!1,s,r)},2044:(e,t,i)=>{var r=i(20339);e.exports=function(e,t){return r(e.x,e.y,t.x,t.y)<=e.radius+t.radius}},81491:e=>{e.exports=function(e,t){var i=t.width/2,r=t.height/2,n=Math.abs(e.x-t.x-i),s=Math.abs(e.y-t.y-r),a=i+e.radius,o=r+e.radius;if(n>a||s>o)return!1;if(n<=i||s<=r)return!0;var h=n-i,c=s-r;return h*h+c*c<=e.radius*e.radius}},63376:(e,t,i)=>{var r=i(2141),n=i(2044);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t)){var s,a,o,h,c=e.x,l=e.y,d=e.radius,u=t.x,f=t.y,p=t.radius;if(l===f)h=(p*p-d*d-u*u+c*c)/(2*(c-u)),s=1,0==(o=(a=-2*f)*a-4*s*(u*u+h*h-2*u*h+f*f-p*p))?i.push(new r(h,-a/(2*s))):o>0&&(i.push(new r(h,(-a+Math.sqrt(o))/(2*s))),i.push(new r(h,(-a-Math.sqrt(o))/(2*s))));else{var g=(c-u)/(l-f),m=(p*p-d*d-u*u+c*c-f*f+l*l)/(2*(l-f));s=g*g+1,0==(o=(a=2*l*g-2*m*g-2*c)*a-4*s*(c*c+l*l+m*m-d*d-2*l*m))?(h=-a/(2*s),i.push(new r(h,m-h*g))):o>0&&(h=(-a+Math.sqrt(o))/(2*s),i.push(new r(h,m-h*g)),h=(-a-Math.sqrt(o))/(2*s),i.push(new r(h,m-h*g)))}}return i}},97439:(e,t,i)=>{var r=i(4042),n=i(81491);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t)){var s=t.getLineA(),a=t.getLineB(),o=t.getLineC(),h=t.getLineD();r(s,e,i),r(a,e,i),r(o,e,i),r(h,e,i)}return i}},4042:(e,t,i)=>{var r=i(2141),n=i(80462);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t)){var s,a,o=e.x1,h=e.y1,c=e.x2,l=e.y2,d=t.x,u=t.y,f=t.radius,p=c-o,g=l-h,m=o-d,v=h-u,y=p*p+g*g,b=2*(p*m+g*v),x=b*b-4*y*(m*m+v*v-f*f);if(0===x){var E=-b/(2*y);s=o+E*p,a=h+E*g,E>=0&&E<=1&&i.push(new r(s,a))}else if(x>0){var T=(-b-Math.sqrt(x))/(2*y);s=o+T*p,a=h+T*g,T>=0&&T<=1&&i.push(new r(s,a));var A=(-b+Math.sqrt(x))/(2*y);s=o+A*p,a=h+A*g,A>=0&&A<=1&&i.push(new r(s,a))}}return i}},36100:(e,t,i)=>{var r=i(25836);e.exports=function(e,t,i,n){void 0===i&&(i=!1);var s,a,o,h=e.x1,c=e.y1,l=e.x2,d=e.y2,u=t.x1,f=t.y1,p=t.x2,g=t.y2,m=l-h,v=d-c,y=p-u,b=g-f,x=m*b-v*y;if(0===x)return null;if(i){if(s=(m*(f-c)+v*(h-u))/(y*v-b*m),0!==m)a=(u+y*s-h)/m;else{if(0===v)return null;a=(f+b*s-c)/v}if(a<0||s<0||s>1)return null;o=a}else{if(s=((u-h)*b-(f-c)*y)/x,a=((c-f)*m-(h-u)*v)/x,s<0||s>1||a<0||a>1)return null;o=s}return void 0===n&&(n=new r),n.set(h+m*o,c+v*o,o)}},3073:(e,t,i)=>{var r=i(36100),n=i(23031),s=i(25836),a=new n,o=new s;e.exports=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=new s);var h=!1;n.set(),o.set();for(var c=t[t.length-1],l=0;l<t.length;l++){var d=t[l];a.setTo(c.x,c.y,d.x,d.y),c=d,r(e,a,i,o)&&(!h||o.z<n.z)&&(n.copy(o),h=!0)}return h?n:null}},56362:(e,t,i)=>{var r=i(25836),n=i(61369),s=i(3073),a=new r;e.exports=function(e,t,i,r){void 0===r&&(r=new n),Array.isArray(t)||(t=[t]);var o=!1;r.set(),a.set();for(var h=0;h<t.length;h++)s(e,t[h].points,i,a)&&(!o||a.z<r.z)&&(r.set(a.x,a.y,a.z,h),o=!0);return o?r:null}},60646:(e,t,i)=>{var r=i(2141),n=i(76112),s=i(92773);e.exports=function(e,t,i){if(void 0===i&&(i=[]),s(e,t))for(var a=t.getLineA(),o=t.getLineB(),h=t.getLineC(),c=t.getLineD(),l=[new r,new r,new r,new r],d=[n(a,e,l[0]),n(o,e,l[1]),n(h,e,l[2]),n(c,e,l[3])],u=0;u<4;u++)d[u]&&i.push(l[u]);return i}},71147:(e,t,i)=>{var r=i(61369),n=i(56362),s=new(i(23031));function a(e,t,i,a,o){var h=Math.cos(e),c=Math.sin(e);s.setTo(t,i,t+h,i+c);var l=n(s,a,!0);l&&o.push(new r(l.x,l.y,e,l.w))}function o(e,t){return e.z-t.z}e.exports=function(e,t,i){Array.isArray(i)||(i=[i]);for(var r=[],n=[],s=0;s<i.length;s++)for(var h=i[s].points,c=0;c<h.length;c++){var l=Math.atan2(h[c].y-t,h[c].x-e);-1===n.indexOf(l)&&(a(l,e,t,i,r),a(l-1e-5,e,t,i,r),a(l+1e-5,e,t,i,r),n.push(l))}return r.sort(o)}},68389:(e,t,i)=>{var r=i(87841),n=i(59996);e.exports=function(e,t,i){return void 0===i&&(i=new r),n(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i}},52784:(e,t,i)=>{var r=i(60646),n=i(59996);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t)){var s=e.getLineA(),a=e.getLineB(),o=e.getLineC(),h=e.getLineD();r(s,t,i),r(a,t,i),r(o,t,i),r(h,t,i)}return i}},26341:(e,t,i)=>{var r=i(89265),n=i(60646);e.exports=function(e,t,i){if(void 0===i&&(i=[]),r(e,t)){var s=t.getLineA(),a=t.getLineB(),o=t.getLineC();n(s,e,i),n(a,e,i),n(o,e,i)}return i}},38720:(e,t,i)=>{var r=i(4042),n=i(67636);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t)){var s=e.getLineA(),a=e.getLineB(),o=e.getLineC();r(s,t,i),r(a,t,i),r(o,t,i)}return i}},13882:(e,t,i)=>{var r=i(2141),n=i(2822),s=i(76112);e.exports=function(e,t,i){if(void 0===i&&(i=[]),n(e,t))for(var a=e.getLineA(),o=e.getLineB(),h=e.getLineC(),c=[new r,new r,new r],l=[s(a,t,c[0]),s(o,t,c[1]),s(h,t,c[2])],d=0;d<3;d++)l[d]&&i.push(c[d]);return i}},75636:(e,t,i)=>{var r=i(82944),n=i(13882);e.exports=function(e,t,i){if(void 0===i&&(i=[]),r(e,t)){var s=t.getLineA(),a=t.getLineB(),o=t.getLineC();n(e,s,i),n(e,a,i),n(e,o,i)}return i}},80462:(e,t,i)=>{var r=i(87902),n=new(i(2141));e.exports=function(e,t,i){if(void 0===i&&(i=n),r(t,e.x1,e.y1))return i.x=e.x1,i.y=e.y1,!0;if(r(t,e.x2,e.y2))return i.x=e.x2,i.y=e.y2,!0;var s=e.x2-e.x1,a=e.y2-e.y1,o=t.x-e.x1,h=t.y-e.y1,c=s*s+a*a,l=s,d=a;if(c>0){var u=(o*s+h*a)/c;l*=u,d*=u}return i.x=e.x1+l,i.y=e.y1+d,l*l+d*d<=c&&l*s+d*a>=0&&r(t,i.x,i.y)}},76112:e=>{e.exports=function(e,t,i){var r=e.x1,n=e.y1,s=e.x2,a=e.y2,o=t.x1,h=t.y1,c=t.x2,l=t.y2;if(r===s&&n===a||o===c&&h===l)return!1;var d=(l-h)*(s-r)-(c-o)*(a-n);if(0===d)return!1;var u=((c-o)*(n-h)-(l-h)*(r-o))/d,f=((s-r)*(n-h)-(a-n)*(r-o))/d;return!(u<0)&&!(u>1)&&!(f<0)&&!(f>1)&&(i&&(i.x=r+u*(s-r),i.y=n+u*(a-n)),!0)}},92773:e=>{e.exports=function(e,t){var i=e.x1,r=e.y1,n=e.x2,s=e.y2,a=t.x,o=t.y,h=t.right,c=t.bottom,l=0;if(i>=a&&i<=h&&r>=o&&r<=c||n>=a&&n<=h&&s>=o&&s<=c)return!0;if(i<a&&n>=a){if((l=r+(s-r)*(a-i)/(n-i))>o&&l<=c)return!0}else if(i>h&&n<=h&&(l=r+(s-r)*(h-i)/(n-i))>=o&&l<=c)return!0;if(r<o&&s>=o){if((l=i+(n-i)*(o-r)/(s-r))>=a&&l<=h)return!0}else if(r>c&&s<=c&&(l=i+(n-i)*(c-r)/(s-r))>=a&&l<=h)return!0;return!1}},16204:e=>{e.exports=function(e,t,i){void 0===i&&(i=1);var r=t.x1,n=t.y1,s=t.x2,a=t.y2,o=e.x,h=e.y,c=(s-r)*(s-r)+(a-n)*(a-n);if(0===c)return!1;var l=((o-r)*(s-r)+(h-n)*(a-n))/c;return l<0?Math.sqrt((r-o)*(r-o)+(n-h)*(n-h))<=i:l>=0&&l<=1?Math.abs(((n-h)*(s-r)-(r-o)*(a-n))/c)*Math.sqrt(c)<=i:Math.sqrt((s-o)*(s-o)+(a-h)*(a-h))<=i}},14199:(e,t,i)=>{var r=i(16204);e.exports=function(e,t){if(!r(e,t))return!1;var i=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),s=Math.min(t.y1,t.y2),a=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=n&&e.y>=s&&e.y<=a}},59996:e=>{e.exports=function(e,t){return!(e.width<=0)&&!(e.height<=0)&&!(t.width<=0)&&!(t.height<=0)&&!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)}},89265:(e,t,i)=>{var r=i(76112),n=i(37303),s=i(48653),a=i(77493);e.exports=function(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var i=t.getLineA(),o=t.getLineB(),h=t.getLineC();if(n(e,i.x1,i.y1)||n(e,i.x2,i.y2)||n(e,o.x1,o.y1)||n(e,o.x2,o.y2)||n(e,h.x1,h.y1)||n(e,h.x2,h.y2))return!0;var c=e.getLineA(),l=e.getLineB(),d=e.getLineC(),u=e.getLineD();return!!(r(i,c)||r(i,l)||r(i,d)||r(i,u)||r(o,c)||r(o,l)||r(o,d)||r(o,u)||r(h,c)||r(h,l)||r(h,d)||r(h,u))||s(t,a(e),!0).length>0}},84411:e=>{e.exports=function(e,t,i,r,n,s){return void 0===s&&(s=0),!(t>e.right+s||i<e.left-s||r>e.bottom+s||n<e.top-s)}},67636:(e,t,i)=>{var r=i(80462),n=i(10690);e.exports=function(e,t){return!(e.left>t.right)&&!(e.right<t.left)&&!(e.top>t.bottom)&&!(e.bottom<t.top)&&!!(n(e,t.x,t.y)||r(e.getLineA(),t)||r(e.getLineB(),t)||r(e.getLineC(),t))}},2822:(e,t,i)=>{var r=i(76112);e.exports=function(e,t){return!!(e.contains(t.x1,t.y1)||e.contains(t.x2,t.y2)||r(e.getLineA(),t)||r(e.getLineB(),t)||r(e.getLineC(),t))}},82944:(e,t,i)=>{var r=i(48653),n=i(71694),s=i(76112);e.exports=function(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var i=e.getLineA(),a=e.getLineB(),o=e.getLineC(),h=t.getLineA(),c=t.getLineB(),l=t.getLineC();if(s(i,h)||s(i,c)||s(i,l)||s(a,h)||s(a,c)||s(a,l)||s(o,h)||s(o,c)||s(o,l))return!0;var d=n(e),u=r(t,d,!0);return u.length>0||(u=r(e,d=n(t),!0)).length>0}},91865:(e,t,i)=>{e.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:e=>{e.exports=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)}},84993:e=>{e.exports=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=[]);var r=Math.round(e.x1),n=Math.round(e.y1),s=Math.round(e.x2),a=Math.round(e.y2),o=Math.abs(s-r),h=Math.abs(a-n),c=r<s?1:-1,l=n<a?1:-1,d=o-h;i.push({x:r,y:n});for(var u=1;r!==s||n!==a;){var f=d<<1;f>-h&&(d-=h,r+=c),f<o&&(d+=o,n+=l),u%t==0&&i.push({x:r,y:n}),u++}return i}},36469:e=>{e.exports=function(e,t,i){var r=t-(e.x1+e.x2)/2,n=i-(e.y1+e.y2)/2;return e.x1+=r,e.y1+=n,e.x2+=r,e.y2+=n,e}},31116:(e,t,i)=>{var r=i(23031);e.exports=function(e){return new r(e.x1,e.y1,e.x2,e.y2)}},59944:e=>{e.exports=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)}},59220:e=>{e.exports=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2}},78177:(e,t,i)=>{var r=i(35001);e.exports=function(e,t,i){void 0===i&&(i=t);var n=r(e),s=e.x2-e.x1,a=e.y2-e.y1;return t&&(e.x1=e.x1-s/n*t,e.y1=e.y1-a/n*t),i&&(e.x2=e.x2+s/n*i,e.y2=e.y2+a/n*i),e}},26708:(e,t,i)=>{var r=i(52816),n=i(6113),s=i(2141);e.exports=function(e,t,i,a,o){void 0===a&&(a=0),void 0===o&&(o=[]);var h,c,l=[],d=e.x1,u=e.y1,f=e.x2-d,p=e.y2-u,g=n(t,o),m=i-1;for(h=0;h<m;h++)c=g(h/m),l.push(new s(d+f*c,u+p*c));if(c=g(1),l.push(new s(d+f*c,u+p*c)),!(a>0))return l;var v=l[0],y=[v];for(h=1;h<l.length-1;h++){var b=l[h];r(v,b)>=a&&(y.push(b),v=b)}var x=l[l.length-1];return r(v,x)<a&&y.pop(),y.push(x),y}},32125:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=(e.x1+e.x2)/2,t.y=(e.y1+e.y2)/2,t}},99569:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i){void 0===i&&(i=new r);var n=e.x1,s=e.y1,a=e.x2,o=e.y2,h=(a-n)*(a-n)+(o-s)*(o-s);if(0===h)return i;var c=((t.x-n)*(a-n)+(t.y-s)*(o-s))/h;return i.x=n+c*(a-n),i.y=s+c*(o-s),i}},34638:(e,t,i)=>{var r=i(36383),n=i(91938),s=i(2141);e.exports=function(e,t){void 0===t&&(t=new s);var i=n(e)-r.TAU;return t.x=Math.cos(i),t.y=Math.sin(i),t}},13151:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i){return void 0===i&&(i=new r),i.x=e.x1+(e.x2-e.x1)*t,i.y=e.y1+(e.y2-e.y1)*t,i}},15258:(e,t,i)=>{var r=i(35001),n=i(2141);e.exports=function(e,t,i,s){void 0===s&&(s=[]),!t&&i>0&&(t=r(e)/i);for(var a=e.x1,o=e.y1,h=e.x2,c=e.y2,l=0;l<t;l++){var d=l/t,u=a+(h-a)*d,f=o+(c-o)*d;s.push(new n(u,f))}return s}},26408:e=>{e.exports=function(e,t){var i=e.x1,r=e.y1,n=e.x2,s=e.y2,a=(n-i)*(n-i)+(s-r)*(s-r);return 0!==a&&Math.abs(((r-t.y)*(n-i)-(i-t.x)*(s-r))/a)*Math.sqrt(a)}},98770:e=>{e.exports=function(e){return Math.abs(e.y1-e.y2)}},35001:e=>{e.exports=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))}},23031:(e,t,i)=>{var r=i(83419),n=i(13151),s=i(15258),a=i(23777),o=i(65822),h=i(26099);e.exports=new r({initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=a.LINE,this.x1=e,this.y1=t,this.x2=i,this.y2=r},getPoint:function(e,t){return n(this,e,t)},getPoints:function(e,t,i){return s(this,e,t,i)},getRandomPoint:function(e){return o(this,e)},setTo:function(e,t,i,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this},setFromObjects:function(e,t){return this.x1=e.x,this.y1=e.y,this.x2=t.x,this.y2=t.y,this},getPointA:function(e){return void 0===e&&(e=new h),e.set(this.x1,this.y1),e},getPointB:function(e){return void 0===e&&(e=new h),e.set(this.x2,this.y2),e},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(e){this.x1<=this.x2?this.x1=e:this.x2=e}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(e){this.x1>this.x2?this.x1=e:this.x2=e}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(e){this.y1<=this.y2?this.y1=e:this.y2=e}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(e){this.y1>this.y2?this.y1=e:this.y2=e}}})},64795:(e,t,i)=>{var r=i(36383),n=i(15994),s=i(91938);e.exports=function(e){return n(s(e)-r.TAU,-Math.PI,Math.PI)}},52616:(e,t,i)=>{var r=i(36383),n=i(91938);e.exports=function(e){return Math.cos(n(e)-r.TAU)}},87231:(e,t,i)=>{var r=i(36383),n=i(91938);e.exports=function(e){return Math.sin(n(e)-r.TAU)}},89662:e=>{e.exports=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e}},71165:e=>{e.exports=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))}},65822:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){void 0===t&&(t=new r);var i=Math.random();return t.x=e.x1+i*(e.x2-e.x1),t.y=e.y1+i*(e.y2-e.y1),t}},69777:(e,t,i)=>{var r=i(91938),n=i(64795);e.exports=function(e,t){return 2*n(t)-Math.PI-r(e)}},39706:(e,t,i)=>{var r=i(64400);e.exports=function(e,t){var i=(e.x1+e.x2)/2,n=(e.y1+e.y2)/2;return r(e,i,n,t)}},82585:(e,t,i)=>{var r=i(64400);e.exports=function(e,t,i){return r(e,t.x,t.y,i)}},64400:e=>{e.exports=function(e,t,i,r){var n=Math.cos(r),s=Math.sin(r),a=e.x1-t,o=e.y1-i;return e.x1=a*n-o*s+t,e.y1=a*s+o*n+i,a=e.x2-t,o=e.y2-i,e.x2=a*n-o*s+t,e.y2=a*s+o*n+i,e}},62377:e=>{e.exports=function(e,t,i,r,n){return e.x1=t,e.y1=i,e.x2=t+Math.cos(r)*n,e.y2=i+Math.sin(r)*n,e}},71366:e=>{e.exports=function(e){return(e.y2-e.y1)/(e.x2-e.x1)}},10809:e=>{e.exports=function(e){return Math.abs(e.x1-e.x2)}},2529:(e,t,i)=>{var r=i(23031);r.Angle=i(91938),r.BresenhamPoints=i(84993),r.CenterOn=i(36469),r.Clone=i(31116),r.CopyFrom=i(59944),r.Equals=i(59220),r.Extend=i(78177),r.GetEasedPoints=i(26708),r.GetMidPoint=i(32125),r.GetNearestPoint=i(99569),r.GetNormal=i(34638),r.GetPoint=i(13151),r.GetPoints=i(15258),r.GetShortestDistance=i(26408),r.Height=i(98770),r.Length=i(35001),r.NormalAngle=i(64795),r.NormalX=i(52616),r.NormalY=i(87231),r.Offset=i(89662),r.PerpSlope=i(71165),r.Random=i(65822),r.ReflectAngle=i(69777),r.Rotate=i(39706),r.RotateAroundPoint=i(82585),r.RotateAroundXY=i(64400),r.SetToAngle=i(62377),r.Slope=i(71366),r.Width=i(10809),e.exports=r},83997:(e,t,i)=>{var r=i(83419),n=i(87841),s=i(26099);function a(e,t,i,r){var n=e-i,s=t-r;return Math.sqrt(n*n+s*s)}e.exports=new r({initialize:function(e,t,i){this.vertex1=e,this.vertex2=t,this.vertex3=i,this.bounds=new n,this._inCenter=new s},getInCenter:function(e){void 0===e&&(e=!0);var t,i,r,n,s,o,h=this.vertex1,c=this.vertex2,l=this.vertex3;e?(t=h.x,i=h.y,r=c.x,n=c.y,s=l.x,o=l.y):(t=h.vx,i=h.vy,r=c.vx,n=c.vy,s=l.vx,o=l.vy);var d=a(s,o,r,n),u=a(t,i,s,o),f=a(r,n,t,i),p=d+u+f;return this._inCenter.set((t*d+r*u+s*f)/p,(i*d+n*u+o*f)/p)},contains:function(e,t,i){var r=this.vertex1,n=this.vertex2,s=this.vertex3,a=r.vx,o=r.vy,h=n.vx,c=n.vy,l=s.vx,d=s.vy;if(i){var u=i.a,f=i.b,p=i.c,g=i.d,m=i.e,v=i.f;a=r.vx*u+r.vy*p+m,o=r.vx*f+r.vy*g+v,h=n.vx*u+n.vy*p+m,c=n.vx*f+n.vy*g+v,l=s.vx*u+s.vy*p+m,d=s.vx*f+s.vy*g+v}var y=l-a,b=d-o,x=h-a,E=c-o,T=e-a,A=t-o,w=y*y+b*b,S=y*x+b*E,C=y*T+b*A,I=x*x+E*E,_=x*T+E*A,O=w*I-S*S,P=0===O?0:1/O,M=(I*C-S*_)*P,R=(w*_-S*C)*P;return M>=0&&R>=0&&M+R<1},isCounterClockwise:function(e){var t=this.vertex1,i=this.vertex2,r=this.vertex3,n=(i.vx-t.vx)*(r.vy-t.vy)-(i.vy-t.vy)*(r.vx-t.vx);return e<=0?n>=0:n<0},load:function(e,t,i,r,n){return i=this.vertex1.load(e,t,i,r,n),i=this.vertex2.load(e,t,i,r,n),i=this.vertex3.load(e,t,i,r,n)},transformCoordinatesLocal:function(e,t,i,r){return this.vertex1.transformCoordinatesLocal(e,t,i,r),this.vertex2.transformCoordinatesLocal(e,t,i,r),this.vertex3.transformCoordinatesLocal(e,t,i,r),this},updateBounds:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3,r=this.bounds;return r.x=Math.min(e.vx,t.vx,i.vx),r.y=Math.min(e.vy,t.vy,i.vy),r.width=Math.max(e.vx,t.vx,i.vx)-r.x,r.height=Math.max(e.vy,t.vy,i.vy)-r.y,this},isInView:function(e,t,i,r,n,s,a,o,h,c,l){this.update(r,n,s,a,o,h,c,l);var d=this.vertex1,u=this.vertex2,f=this.vertex3;if(d.ta<=0&&u.ta<=0&&f.ta<=0||t&&!this.isCounterClockwise(i))return!1;var p=this.bounds;p.x=Math.min(d.tx,u.tx,f.tx),p.y=Math.min(d.ty,u.ty,f.ty),p.width=Math.max(d.tx,u.tx,f.tx)-p.x,p.height=Math.max(d.ty,u.ty,f.ty)-p.y;var g=e.x+e.width,m=e.y+e.height;return!(p.width<=0)&&!(p.height<=0)&&!(e.width<=0)&&!(e.height<=0)&&!(p.right<e.x||p.bottom<e.y||p.x>g||p.y>m)},scrollUV:function(e,t){return this.vertex1.scrollUV(e,t),this.vertex2.scrollUV(e,t),this.vertex3.scrollUV(e,t),this},scaleUV:function(e,t){return this.vertex1.scaleUV(e,t),this.vertex2.scaleUV(e,t),this.vertex3.scaleUV(e,t),this},setColor:function(e){return this.vertex1.color=e,this.vertex2.color=e,this.vertex3.color=e,this},update:function(e,t,i,r,n,s,a,o){return this.vertex1.update(t,i,r,n,s,a,o,e),this.vertex2.update(t,i,r,n,s,a,o,e),this.vertex3.update(t,i,r,n,s,a,o,e),this},translate:function(e,t){void 0===t&&(t=0);var i=this.vertex1,r=this.vertex2,n=this.vertex3;return i.x+=e,i.y+=t,r.x+=e,r.y+=t,n.x+=e,n.y+=t,this},x:{get:function(){return this.getInCenter().x},set:function(e){var t=this.getInCenter();this.translate(e-t.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var t=this.getInCenter();this.translate(0,e-t.y)}},alpha:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.alpha+t.alpha+i.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,t=this.vertex2,i=this.vertex3;return(e.vz+t.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}})},48803:(e,t,i)=>{var r=i(83997),n=i(95540),s=i(37867),a=i(25836),o=i(39318),h=new a,c=new a,l=new s;e.exports=function(e){var t,i,s,a=n(e,"mesh"),d=n(e,"texture",null),u=n(e,"frame"),f=n(e,"width",1),p=n(e,"height",f),g=n(e,"widthSegments",1),m=n(e,"heightSegments",g),v=n(e,"x",0),y=n(e,"y",0),b=n(e,"z",0),x=n(e,"rotateX",0),E=n(e,"rotateY",0),T=n(e,"rotateZ",0),A=n(e,"zIsUp",!0),w=n(e,"isOrtho",!!a&&a.dirtyCache[11]),S=n(e,"colors",[0xffffff]),C=n(e,"alphas",[1]),I=n(e,"tile",!1),_=n(e,"flipY",!1),O=n(e,"width",null),P={faces:[],verts:[]};if(h.set(v,y,b),c.set(x,E,T),l.fromRotationXYTranslation(c,h,A),!d&&a)d=a.texture,u||(t=a.frame);else if(a&&"string"==typeof d)d=a.scene.sys.textures.get(d);else if(!d)return P;t||(t=d.get(u)),!O&&w&&d&&a&&(f=t.width/a.height,p=t.height/a.height);var M=f/2,R=p/2,L=Math.floor(g),D=Math.floor(m),k=L+1,N=D+1,F=f/L,B=p/D,U=[],G=[],V=0,Y=1,j=0,W=1;t&&(V=t.u0,Y=t.u1,_?(j=t.v1,W=t.v0):(j=t.v0,W=t.v1));var z=Y-V,H=W-j;for(s=0;s<N;s++){var X=s*B-R;for(i=0;i<k;i++){var q=i*F-M;G.push(q,-X);var K=V+i/L*z,J=j+s/D*H;U.push(K,J)}}Array.isArray(S)||(S=[S]),Array.isArray(C)||(C=[C]);var Q=0,$=0;for(s=0;s<D;s++)for(i=0;i<L;i++){var Z=(i+k*s)*2,ee=(i+k*(s+1))*2,et=(i+1+k*(s+1))*2,ei=(i+1+k*s)*2,er=S[$],en=C[Q],es=new o(G[Z],G[Z+1],0,U[Z],U[Z+1],er,en).transformMat4(l),ea=new o(G[ee],G[ee+1],0,U[ee],U[ee+1],er,en).transformMat4(l),eo=new o(G[ei],G[ei+1],0,U[ei],U[ei+1],er,en).transformMat4(l),eh=new o(G[ee],G[ee+1],0,U[ee],U[ee+1],er,en).transformMat4(l),ec=new o(G[et],G[et+1],0,U[et],U[et+1],er,en).transformMat4(l),el=new o(G[ei],G[ei+1],0,U[ei],U[ei+1],er,en).transformMat4(l);I&&(es.setUVs(V,W),ea.setUVs(V,j),eo.setUVs(Y,W),eh.setUVs(V,j),ec.setUVs(Y,j),el.setUVs(Y,W)),++$===S.length&&($=0),++Q===C.length&&(Q=0),P.verts.push(es,ea,eo,eh,ec,el),P.faces.push(new r(es,ea,eo),new r(eh,ec,el))}return a&&(a.faces=a.faces.concat(P.faces),a.vertices=a.vertices.concat(P.verts)),P}},34684:(e,t,i)=>{var r=i(83997),n=i(37867),s=i(25836),a=i(39318),o=new s,h=new s,c=new n;e.exports=function(e,t,i,n,s,l,d,u,f,p){void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===u&&(u=0),void 0===f&&(f=0),void 0===p&&(p=!0);var g={faces:[],verts:[]},m=e.materials;o.set(n,s,l),h.set(d,u,f),c.fromRotationXYTranslation(h,o,p);for(var v=0;v<e.models.length;v++)for(var y=e.models[v],b=y.vertices,x=y.textureCoords,E=y.faces,T=0;T<E.length;T++){var A=E[T],w=A.vertices[0],S=A.vertices[1],C=A.vertices[2],I=b[w.vertexIndex],_=b[S.vertexIndex],O=b[C.vertexIndex],P=w.textureCoordsIndex,M=S.textureCoordsIndex,R=C.textureCoordsIndex,L=-1===P?{u:0,v:1}:x[P],D=-1===M?{u:0,v:0}:x[M],k=-1===R?{u:1,v:1}:x[R],N=0xffffff;""!==A.material&&m[A.material]&&(N=m[A.material]);var F=new a(I.x*i,I.y*i,I.z*i,L.u,L.v,N).transformMat4(c),B=new a(_.x*i,_.y*i,_.z*i,D.u,D.v,N).transformMat4(c),U=new a(O.x*i,O.y*i,O.z*i,k.u,k.v,N).transformMat4(c);g.verts.push(F,B,U),g.faces.push(new r(F,B,U))}return t&&(t.faces=t.faces.concat(g.faces),t.vertices=t.vertices.concat(g.verts)),g}},92515:(e,t,i)=>{var r=i(83997),n=i(39318);e.exports=function(e,t,i,s,a,o,h,c){if(void 0===s&&(s=!1),void 0===o&&(o=0xffffff),void 0===h&&(h=1),void 0===c&&(c=!1),e.length!==t.length&&!s)return void console.warn("GenerateVerts: vertices and uvs count not equal");var l,d,u,f,p,g,m,v,y,b,x,E={faces:[],vertices:[]},T=s?3:2,A=Array.isArray(o),w=Array.isArray(h);if(Array.isArray(i)&&i.length>0)for(l=0;l<i.length;l++){var S=i[l],C=2*i[l],I=i[l]*T;d=e[I],u=e[I+1],f=s?e[I+2]:0,p=t[C],g=t[C+1],c&&(g=1-g),m=A?o[S]:o,v=w?h[S]:h,y=0,b=0,x=0,a&&(y=a[I],b=a[I+1],x=s?a[I+2]:0),E.vertices.push(new n(d,u,f,p,g,m,v,y,b,x))}else{var _=0,O=0;for(l=0;l<e.length;l+=T)d=e[l],u=e[l+1],f=s?e[l+2]:0,p=t[_],g=t[_+1],m=A?o[O]:o,v=w?h[O]:h,y=0,b=0,x=0,a&&(y=a[l],b=a[l+1],x=s?a[l+2]:0),E.vertices.push(new n(d,u,f,p,g,m,v,y,b,x)),_+=2,O++}for(l=0;l<E.vertices.length;l+=3){var P=E.vertices[l],M=E.vertices[l+1],R=E.vertices[l+2];E.faces.push(new r(P,M,R))}return E}},85048:e=>{var t=!0,i="untitled",r="",n="";function s(e){return 0===e.models.length&&e.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),r="",e.models[e.models.length-1]}e.exports=function(e,a){void 0===a&&(a=!0),t=a;var o={materials:{},materialLibraries:[],models:[]};r="",n="";for(var h=e.split("\n"),c=0;c<h.length;c++){var l=(function(e){var t=e.indexOf("#");return t>-1?e.substring(0,t):e})(h[c]).replace(/\s\s+/g," ").trim().split(" ");switch(l[0].toLowerCase()){case"o":!function(e,t){var n=e.length>=2?e[1]:i;t.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),r=""}(l,o);break;case"g":2===l.length&&(r=l[1]);break;case"v":!function(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,n=i>=3?parseFloat(e[2]):0,a=i>=4?parseFloat(e[3]):0;s(t).vertices.push({x:r,y:n,z:a})}(l,o);break;case"vt":!function(e,i){var r=e.length,n=r>=2?parseFloat(e[1]):0,a=r>=3?parseFloat(e[2]):0,o=r>=4?parseFloat(e[3]):0;isNaN(n)&&(n=0),isNaN(a)&&(a=0),isNaN(o)&&(o=0),t&&(a=1-a),s(i).textureCoords.push({u:n,v:a,w:o})}(l,o);break;case"vn":!function(e,t){var i=e.length,r=i>=2?parseFloat(e[1]):0,n=i>=3?parseFloat(e[2]):0,a=i>=4?parseFloat(e[3]):0;s(t).vertexNormals.push({x:r,y:n,z:a})}(l,o);break;case"f":!function(e,t){var i=e.length-1;if(!(i<3)){for(var a={group:r,material:n,vertices:[]},o=0;o<i;o++){var h=e[o+1].split("/"),c=h.length;if(!(c<1)&&!(c>3)){var l=0,d=0,u=0;l=parseInt(h[0],10),c>1&&""!==h[1]&&(d=parseInt(h[1],10)),c>2&&(u=parseInt(h[2],10)),0!==l&&(l<0&&(l=s(t).vertices.length+1+l),d-=1,l-=1,u-=1,a.vertices.push({textureCoordsIndex:d,vertexIndex:l,vertexNormalIndex:u}))}}s(t).faces.push(a)}}(l,o);break;case"mtllib":l.length>=2&&o.materialLibraries.push(l[1]);break;case"usemtl":l.length>=2&&(n=l[1])}}return o}},61485:(e,t,i)=>{var r=i(37589);e.exports=function(e){for(var t={},i=e.split("\n"),n="",s=0;s<i.length;s++){var a=i[s].trim();if(0!==a.indexOf("#")&&""!==a){var o=a.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":n=o[1];break;case"kd":var h=Math.floor(255*o[1]),c=o.length>=2?Math.floor(255*o[2]):h,l=o.length>=3?Math.floor(255*o[3]):h;t[n]=r(h,c,l)}}}return t}},92570:e=>{e.exports=function(e,t,i,r){if(void 0===i&&void 0===r){var n,s,a=e.getInCenter();n=a.x,s=a.y}var o=Math.cos(t),h=Math.sin(t),c=e.vertex1,l=e.vertex2,d=e.vertex3,u=c.x-n,f=c.y-s;c.set(u*o-f*h+n,u*h+f*o+s),u=l.x-n,f=l.y-s,l.set(u*o-f*h+n,u*h+f*o+s),u=d.x-n,f=d.y-s,d.set(u*o-f*h+n,u*h+f*o+s)}},39318:(e,t,i)=>{var r=i(83419),n=i(70554),s=i(25836);e.exports=new r({Extends:s,initialize:function(e,t,i,r,n,a,o,h,c,l){void 0===a&&(a=0xffffff),void 0===o&&(o=1),void 0===h&&(h=0),void 0===c&&(c=0),void 0===l&&(l=0),s.call(this,e,t,i),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=c,this.nz=l,this.u=r,this.v=n,this.color=a,this.alpha=o,this.tx=0,this.ty=0,this.ta=0,this.tu=r,this.tv=n},setUVs:function(e,t){return this.u=e,this.v=t,this.tu=e,this.tv=t,this},scrollUV:function(e,t){return this.tu+=e,this.tv+=t,this},scaleUV:function(e,t){return this.tu=this.u*e,this.tv=this.v*t,this},transformCoordinatesLocal:function(e,t,i,r){var n=this.x,s=this.y,a=this.z,o=e.val,h=n*o[0]+s*o[4]+a*o[8]+o[12],c=n*o[1]+s*o[5]+a*o[9]+o[13],l=n*o[2]+s*o[6]+a*o[10]+o[14],d=n*o[3]+s*o[7]+a*o[11]+o[15];this.vx=h/d*t,this.vy=-(c/d)*i,r<=0?this.vz=l/d:this.vz=-(l/d)},resize:function(e,t,i,r,n,s){return this.x=e,this.y=t,this.vx=this.x*i,this.vy=-this.y*r,this.vz=0,n<.5?this.vx+=i*(.5-n):n>.5&&(this.vx-=i*(n-.5)),s<.5?this.vy+=r*(.5-s):s>.5&&(this.vy-=r*(s-.5)),this},update:function(e,t,i,r,n,s,a,o){var h=this.vx*e+this.vy*i+n,c=this.vx*t+this.vy*r+s;return a&&(h=Math.round(h),c=Math.round(c)),this.tx=h,this.ty=c,this.ta=this.alpha*o,this},load:function(e,t,i,r,s){return e[++i]=this.tx,e[++i]=this.ty,e[++i]=this.tu,e[++i]=this.tv,e[++i]=r,e[++i]=s,t[++i]=n.getTintAppendFloatAlpha(this.color,this.ta),i}})},73090:(e,t,i)=>{e.exports={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)}},96550:e=>{e.exports=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))}},99706:(e,t,i)=>{var r=i(2141);e.exports=function(e){return new r(e.x,e.y)}},68010:e=>{e.exports=function(e,t){return t.setTo(e.x,e.y)}},27814:e=>{e.exports=function(e,t){return e.x===t.x&&e.y===t.y}},73565:e=>{e.exports=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))}},87555:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){if(void 0===t&&(t=new r),!Array.isArray(e))throw Error("GetCentroid points argument must be an array");var i=e.length;if(i<1)throw Error("GetCentroid points array must not be empty");if(1===i)t.x=e[0].x,t.y=e[0].y;else{for(var n=0;n<i;n++)t.x+=e[n].x,t.y+=e[n].y;t.x/=i,t.y/=i}return t}},28793:e=>{e.exports=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}},44405:e=>{e.exports=function(e){return e.x*e.x+e.y*e.y}},20873:(e,t,i)=>{var r=i(87841);e.exports=function(e,t){void 0===t&&(t=new r);for(var i=-1/0,n=1/0,s=-1/0,a=1/0,o=0;o<e.length;o++){var h=e[o];h.x>i&&(i=h.x),h.x<n&&(n=h.x),h.y>s&&(s=h.y),h.y<a&&(a=h.y)}return t.x=n,t.y=a,t.width=i-n,t.height=s-a,t}},26152:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=new r),n.x=e.x+(t.x-e.x)*i,n.y=e.y+(t.y-e.y)*i,n}},55767:e=>{e.exports=function(e){return e.setTo(e.y,e.x)}},79432:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.setTo(-e.x,-e.y)}},2141:(e,t,i)=>{var r=i(83419),n=i(23777);e.exports=new r({initialize:function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.type=n.POINT,this.x=e,this.y=t},setTo:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this}})},72930:(e,t,i)=>{var r=i(2141),n=i(44405);e.exports=function(e,t,i){void 0===i&&(i=new r);var s=(e.x*t.x+e.y*t.y)/n(t);return 0!==s&&(i.x=s*t.x,i.y=s*t.y),i}},62880:(e,t,i)=>{var r=i(2141);e.exports=function(e,t,i){void 0===i&&(i=new r);var n=e.x*t.x+e.y*t.y;return 0!==n&&(i.x=n*t.x,i.y=n*t.y),i}},15093:(e,t,i)=>{var r=i(28793);e.exports=function(e,t){if(0!==e.x||0!==e.y){var i=r(e);e.x/=i,e.y/=i}return e.x*=t,e.y*=t,e}},43711:(e,t,i)=>{var r=i(2141);r.Ceil=i(96550),r.Clone=i(99706),r.CopyFrom=i(68010),r.Equals=i(27814),r.Floor=i(73565),r.GetCentroid=i(87555),r.GetMagnitude=i(28793),r.GetMagnitudeSq=i(44405),r.GetRectangleFromPoints=i(20873),r.Interpolate=i(26152),r.Invert=i(55767),r.Negative=i(79432),r.Project=i(72930),r.ProjectUnit=i(62880),r.SetMagnitude=i(15093),e.exports=r},12306:(e,t,i)=>{var r=i(25717);e.exports=function(e){return new r(e.points)}},63814:e=>{e.exports=function(e,t,i){for(var r=!1,n=-1,s=e.points.length-1;++n<e.points.length;s=n){var a=e.points[n].x,o=e.points[n].y,h=e.points[s].x,c=e.points[s].y;(o<=i&&i<c||c<=i&&i<o)&&t<(h-a)*(i-o)/(c-o)+a&&(r=!r)}return r}},99338:(e,t,i)=>{var r=i(63814);e.exports=function(e,t){return r(e,t.x,t.y)}},94811:e=>{function t(e,t,l){l=l||2;var d,p,m,v,y,b,x,E=t&&t.length,T=E?t[0]*l:e.length,A=i(e,0,T,l,!0),w=[];if(!A||A.next===A.prev)return w;if(E&&(A=function(e,t,s,h){var c,l,d,p,g,m=[];for(c=0,l=t.length;c<l;c++)d=t[c]*h,p=c<l-1?t[c+1]*h:e.length,(g=i(e,d,p,h,!1))===g.next&&(g.steiner=!0),m.push(function(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e)return i}(g));for(m.sort(n),c=0;c<m.length;c++)s=function(e,t){var i=function(e,t){var i,r,n,s=t,h=e.x,c=e.y,l=-1/0;do{if(c<=s.y&&c>=s.next.y&&s.next.y!==s.y){var d=s.x+(c-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(d<=h&&d>l&&(l=d,n=s.x<s.next.x?s:s.next,d===h))return n}s=s.next}while(s!==t)if(!n)return null;var f,p=n,g=n.x,m=n.y,v=1/0;s=n;do{h>=s.x&&s.x>=g&&h!==s.x&&a(c<m?h:l,c,g,m,c<m?l:h,c,s.x,s.y)&&(f=Math.abs(c-s.y)/(h-s.x),u(s,e)&&(f<v||f===v&&(s.x>n.x||s.x===n.x&&(i=n,r=s,0>o(i.prev,i,r.prev)&&0>o(r.next,i,i.next))))&&(n=s,v=f)),s=s.next}while(s!==p)return n}(e,t);if(!i)return t;var n=f(i,e);return r(n,n.next),r(i,i.next)}(m[c],s);return s}(e,t,A,l)),e.length>80*l){d=m=e[0],p=v=e[1];for(var S=l;S<T;S+=l)y=e[S],b=e[S+1],y<d&&(d=y),b<p&&(p=b),y>m&&(m=y),b>v&&(v=b);x=0!==(x=Math.max(m-d,v-p))?32767/x:0}return function e(t,i,n,l,d,p,m){if(t){!m&&p&&function(e,t,i,r){var n=e;do 0===n.z&&(n.z=s(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e)n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,s,a,o,h,c=1;do{for(i=e,e=null,s=null,a=0;i;){for(a++,r=i,o=0,t=0;t<c&&(o++,r=r.nextZ);t++);for(h=c;o>0||h>0&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(a>1)}(n)}(t,l,d,p);for(var v,y,b=t;t.prev!==t.next;){if(v=t.prev,y=t.next,p?function(e,t,i,r){var n=e.prev,h=e.next;if(o(n,e,h)>=0)return!1;for(var c=n.x,l=e.x,d=h.x,u=n.y,f=e.y,p=h.y,g=c<l?c<d?c:d:l<d?l:d,m=u<f?u<p?u:p:f<p?f:p,v=c>l?c>d?c:d:l>d?l:d,y=u>f?u>p?u:p:f>p?f:p,b=s(g,m,t,i,r),x=s(v,y,t,i,r),E=e.prevZ,T=e.nextZ;E&&E.z>=b&&T&&T.z<=x;){if(E.x>=g&&E.x<=v&&E.y>=m&&E.y<=y&&E!==n&&E!==h&&a(c,u,l,f,d,p,E.x,E.y)&&o(E.prev,E,E.next)>=0||(E=E.prevZ,T.x>=g&&T.x<=v&&T.y>=m&&T.y<=y&&T!==n&&T!==h&&a(c,u,l,f,d,p,T.x,T.y)&&o(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;E&&E.z>=b;){if(E.x>=g&&E.x<=v&&E.y>=m&&E.y<=y&&E!==n&&E!==h&&a(c,u,l,f,d,p,E.x,E.y)&&o(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=x;){if(T.x>=g&&T.x<=v&&T.y>=m&&T.y<=y&&T!==n&&T!==h&&a(c,u,l,f,d,p,T.x,T.y)&&o(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}(t,l,d,p):function(e){var t=e.prev,i=e.next;if(o(t,e,i)>=0)return!1;for(var r=t.x,n=e.x,s=i.x,h=t.y,c=e.y,l=i.y,d=r<n?r<s?r:s:n<s?n:s,u=h<c?h<l?h:l:c<l?c:l,f=r>n?r>s?r:s:n>s?n:s,p=h>c?h>l?h:l:c>l?c:l,g=i.next;g!==t;){if(g.x>=d&&g.x<=f&&g.y>=u&&g.y<=p&&a(r,h,n,c,s,l,g.x,g.y)&&o(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(t)){i.push(v.i/n|0),i.push(t.i/n|0),i.push(y.i/n|0),g(t),t=y.next,b=y.next;continue}if((t=y)===b){m?1===m?e(t=function(e,t,i){var n=e;do{var s=n.prev,a=n.next.next;!h(s,a)&&c(s,n,n.next,a)&&u(s,a)&&u(a,s)&&(t.push(s.i/i|0),t.push(n.i/i|0),t.push(a.i/i|0),g(n),g(n.next),n=e=a),n=n.next}while(n!==e)return r(n)}(r(t),i,n),i,n,l,d,p,2):2===m&&function(t,i,n,s,a,l){var d=t;do{for(var p,g,m=d.next.next;m!==d.prev;){if(d.i!==m.i&&(p=d,g=m,p.next.i!==g.i&&p.prev.i!==g.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&c(i,i.next,e,t))return!0;i=i.next}while(i!==e)return!1}(p,g)&&(u(p,g)&&u(g,p)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e)return r}(p,g)&&(o(p.prev,p,g.prev)||o(p,g.prev,g))||h(p,g)&&o(p.prev,p,p.next)>0&&o(g.prev,g,g.next)>0))){var v=f(d,m);d=r(d,d.next),v=r(v,v.next),e(d,i,n,s,a,l,0),e(v,i,n,s,a,l,0);return}m=m.next}d=d.next}while(d!==t)}(t,i,n,l,d,p):e(r(t),i,n,l,d,p,1);break}}}}(A,w,l,d,p,x,0),w}function i(e,t,i,r,n){var s,a;if(n===v(e,t,i,r)>0)for(s=t;s<i;s+=r)a=p(s,e[s],e[s+1],a);else for(s=i-r;s>=t;s-=r)a=p(s,e[s],e[s+1],a);return a&&h(a,a.next)&&(g(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var i,r=e;do if(i=!1,!r.steiner&&(h(r,r.next)||0===o(r.prev,r,r.next))){if(g(r),(r=t=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==t)return t}function n(e,t){return e.x-t.x}function s(e,t,i,r,n){return(e=((e=((e=((e=((e=(e-i)*n|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-r)*n|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function a(e,t,i,r,n,s,a,o){return(n-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(r-o)>=(i-a)*(t-o)&&(i-a)*(s-o)>=(n-a)*(r-o)}function o(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function h(e,t){return e.x===t.x&&e.y===t.y}function c(e,t,i,r){var n=d(o(e,t,i)),s=d(o(e,t,r)),a=d(o(i,r,e)),h=d(o(i,r,t));return!!(n!==s&&a!==h||0===n&&l(e,i,t)||0===s&&l(e,r,t)||0===a&&l(i,e,r)||0===h&&l(i,t,r))}function l(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function d(e){return e>0?1:e<0?-1:0}function u(e,t){return 0>o(e.prev,e,e.next)?o(e,t,e.next)>=0&&o(e,e.prev,t)>=0:0>o(e,t,e.prev)||0>o(e,e.next,t)}function f(e,t){var i=new m(e.i,e.x,e.y),r=new m(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function p(e,t,i,r){var n=new m(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function g(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function m(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(e,t,i,r){for(var n=0,s=t,a=i-r;s<i;s+=r)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}t.deviation=function(e,t,i,r){var n=t&&t.length,s=n?t[0]*i:e.length,a=Math.abs(v(e,0,s,i));if(n)for(var o=0,h=t.length;o<h;o++){var c=t[o]*i,l=o<h-1?t[o+1]*i:e.length;a-=Math.abs(v(e,c,l,i))}var d=0;for(o=0;o<r.length;o+=3){var u=r[o]*i,f=r[o+1]*i,p=r[o+2]*i;d+=Math.abs((e[u]-e[p])*(e[f+1]-e[u+1])-(e[u]-e[f])*(e[p+1]-e[u+1]))}return 0===a&&0===d?0:Math.abs((d-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var a=0;a<t;a++)i.vertices.push(e[n][s][a]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i},e.exports=t},13829:(e,t,i)=>{var r=i(87841);e.exports=function(e,t){void 0===t&&(t=new r);for(var i,n=1/0,s=1/0,a=-1/0,o=-1/0,h=0;h<e.points.length;h++)n=Math.min(n,(i=e.points[h]).x),s=Math.min(s,i.y),a=Math.max(a,i.x),o=Math.max(o,i.y);return t.x=n,t.y=s,t.width=a-n,t.height=o-s,t}},26173:e=>{e.exports=function(e,t){void 0===t&&(t=[]);for(var i=0;i<e.points.length;i++)t.push(e.points[i].x),t.push(e.points[i].y);return t}},9564:(e,t,i)=>{var r=i(35001),n=i(23031),s=i(30052);e.exports=function(e,t,i,a){void 0===a&&(a=[]);var o=e.points,h=s(e);!t&&i>0&&(t=h/i);for(var c=0;c<t;c++)for(var l=c/t*h,d=0,u=0;u<o.length;u++){var f=o[u],p=o[(u+1)%o.length],g=new n(f.x,f.y,p.x,p.y),m=r(g);if(l<d||l>d+m){d+=m;continue}var v=g.getPoint((l-d)/m);a.push(v);break}return a}},30052:(e,t,i)=>{var r=i(35001),n=i(23031);e.exports=function(e){for(var t=e.points,i=0,s=0;s<t.length;s++){var a=t[s],o=t[(s+1)%t.length];i+=r(new n(a.x,a.y,o.x,o.y))}return i}},25717:(e,t,i)=>{var r=i(83419),n=i(63814),s=i(9564),a=i(23777);e.exports=new r({initialize:function(e){this.type=a.POLYGON,this.area=0,this.points=[],e&&this.setTo(e)},contains:function(e,t){return n(this,e,t)},setTo:function(e){if(this.area=0,this.points=[],"string"==typeof e&&(e=e.split(" ")),!Array.isArray(e))return this;for(var t,i=0;i<e.length;i++)t={x:0,y:0},"number"==typeof e[i]||"string"==typeof e[i]?(t.x=parseFloat(e[i]),t.y=parseFloat(e[i+1]),i++):Array.isArray(e[i])?(t.x=e[i][0],t.y=e[i][1]):(t.x=e[i].x,t.y=e[i].y),this.points.push(t);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e,t,i=0,r=0;r<this.points.length-1;r++)e=this.points[r],i+=((t=this.points[r+1]).x-e.x)*(e.y+t.y);return e=this.points[0],t=this.points[this.points.length-1],i+=(e.x-t.x)*(t.y+e.y),this.area=-(.5*i),this.area},getPoints:function(e,t,i){return s(this,e,t,i)}})},8133:e=>{e.exports=function(e){return e.points.reverse(),e}},29524:e=>{e.exports=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!1);var r=e.points;if(r.length>2){var n,s,a,o=t*t;i||(r=function(e,t){for(var i,r=e[0],n=[r],s=1,a=e.length;s<a;s++)(function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r})(i=e[s],r)>t&&(n.push(i),r=i);return r!==i&&n.push(i),n}(r,o)),e.setTo((s=(n=r).length-1,a=[n[0]],!function e(t,i,r,n,s){for(var a,o=n,h=i+1;h<r;h++){var c=function(e,t,i){var r=t.x,n=t.y,s=i.x-r,a=i.y-n;if(0!==s||0!==a){var o=((e.x-r)*s+(e.y-n)*a)/(s*s+a*a);o>1?(r=i.x,n=i.y):o>0&&(r+=s*o,n+=a*o)}return(s=e.x-r)*s+(a=e.y-n)*a}(t[h],t[i],t[r]);c>o&&(a=h,o=c)}o>n&&(a-i>1&&e(t,i,a,n,s),s.push(t[a]),r-a>1&&e(t,a,r,n,s))}(n,0,s,o,a),a.push(n[s]),a))}return e}},5469:e=>{var t=function(e,t){return e[0]=t[0],e[1]=t[1],e};e.exports=function(e){var i,r=[],n=e.points;for(i=0;i<n.length;i++)r.push([n[i].x,n[i].y]);var s=[];for(r.length>0&&s.push(t([0,0],r[0])),i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],h=a[0],c=a[1],l=o[0],d=o[1];s.push([.85*h+.15*l,.85*c+.15*d]),s.push([.15*h+.85*l,.15*c+.85*d])}return r.length>1&&s.push(t([0,0],r[r.length-1])),e.setTo(s)}},24709:e=>{e.exports=function(e,t,i){for(var r=e.points,n=0;n<r.length;n++)r[n].x+=t,r[n].y+=i;return e}},58423:(e,t,i)=>{var r=i(25717);r.Clone=i(12306),r.Contains=i(63814),r.ContainsPoint=i(99338),r.Earcut=i(94811),r.GetAABB=i(13829),r.GetNumberArray=i(26173),r.GetPoints=i(9564),r.Perimeter=i(30052),r.Reverse=i(8133),r.Simplify=i(29524),r.Smooth=i(5469),r.Translate=i(24709),e.exports=r},62224:e=>{e.exports=function(e){return e.width*e.height}},98615:e=>{e.exports=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e}},31688:e=>{e.exports=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e}},67502:e=>{e.exports=function(e,t,i){return e.x=t-e.width/2,e.y=i-e.height/2,e}},65085:(e,t,i)=>{var r=i(87841);e.exports=function(e){return new r(e.x,e.y,e.width,e.height)}},37303:e=>{e.exports=function(e,t,i){return!(e.width<=0)&&!(e.height<=0)&&e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i}},96553:(e,t,i)=>{var r=i(37303);e.exports=function(e,t){return r(e,t.x,t.y)}},70273:e=>{e.exports=function(e,t){return!(t.width*t.height>e.width*e.height)&&t.x>e.x&&t.x<e.right&&t.right>e.x&&t.right<e.right&&t.y>e.y&&t.y<e.bottom&&t.bottom>e.y&&t.bottom<e.bottom}},43459:e=>{e.exports=function(e,t){return t.setTo(e.x,e.y,e.width,e.height)}},77493:e=>{e.exports=function(e,t){return void 0===t&&(t=[]),t.push({x:e.x,y:e.y}),t.push({x:e.right,y:e.y}),t.push({x:e.right,y:e.bottom}),t.push({x:e.x,y:e.bottom}),t}},9219:e=>{e.exports=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}},53751:(e,t,i)=>{var r=i(8249);e.exports=function(e,t){var i=r(e);return i<r(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)}},16088:(e,t,i)=>{var r=i(8249);e.exports=function(e,t){var i=r(e);return i>r(t)?e.setSize(t.height*i,t.height):e.setSize(t.width,t.width/i),e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)}},80774:e=>{e.exports=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}},83859:e=>{e.exports=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e}},19217:(e,t,i)=>{var r=i(87841),n=i(36383);e.exports=function(e,t){if(void 0===t&&(t=new r),0===e.length)return t;for(var i,s,a,o=Number.MAX_VALUE,h=Number.MAX_VALUE,c=n.MIN_SAFE_INTEGER,l=n.MIN_SAFE_INTEGER,d=0;d<e.length;d++)Array.isArray(i=e[d])?(s=i[0],a=i[1]):(s=i.x,a=i.y),o=Math.min(o,s),h=Math.min(h,a),c=Math.max(c,s),l=Math.max(l,a);return t.x=o,t.y=h,t.width=c-o,t.height=l-h,t}},9477:(e,t,i)=>{var r=i(87841);e.exports=function(e,t,i,n,s){return void 0===s&&(s=new r),s.setTo(Math.min(e,i),Math.min(t,n),Math.abs(e-i),Math.abs(t-n))}},8249:e=>{e.exports=function(e){return 0===e.height?NaN:e.width/e.height}},27165:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=e.centerX,t.y=e.centerY,t}},20812:(e,t,i)=>{var r=i(13019),n=i(2141);e.exports=function(e,t,i){if(void 0===i&&(i=new n),t<=0||t>=1)return i.x=e.x,i.y=e.y,i;var s=r(e)*t;return t>.5?(s-=e.width+e.height)<=e.width?(i.x=e.right-s,i.y=e.bottom):(i.x=e.x,i.y=e.bottom-(s-e.width)):s<=e.width?(i.x=e.x+s,i.y=e.y):(i.x=e.right,i.y=e.y+(s-e.width)),i}},34819:(e,t,i)=>{var r=i(20812),n=i(13019);e.exports=function(e,t,i,s){void 0===s&&(s=[]),!t&&i>0&&(t=n(e)/i);for(var a=0;a<t;a++){var o=a/t;s.push(r(e,o))}return s}},51313:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=e.width,t.y=e.height,t}},86091:(e,t,i)=>{var r=i(67502);e.exports=function(e,t,i){var n=e.centerX,s=e.centerY;return e.setSize(e.width+2*t,e.height+2*i),r(e,n,s)}},53951:(e,t,i)=>{var r=i(87841),n=i(59996);e.exports=function(e,t,i){return void 0===i&&(i=new r),n(e,t)?(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y):i.setEmpty(),i}},14649:(e,t,i)=>{var r=i(13019),n=i(2141);e.exports=function(e,t,i,s){if(void 0===s&&(s=[]),!t&&!i)return s;t?i=Math.round(r(e)/t):t=r(e)/i;for(var a=e.x,o=e.y,h=0,c=0;c<i;c++)switch(s.push(new n(a,o)),h){case 0:(a+=t)>=e.right&&(h=1,o+=a-e.right,a=e.right);break;case 1:(o+=t)>=e.bottom&&(h=2,a-=o-e.bottom,o=e.bottom);break;case 2:(a-=t)<=e.left&&(h=3,o-=e.left-a,a=e.left);break;case 3:(o-=t)<=e.top&&(h=0,o=e.top)}return s}},33595:e=>{e.exports=function(e,t){for(var i=e.x,r=e.right,n=e.y,s=e.bottom,a=0;a<t.length;a++)i=Math.min(i,t[a].x),r=Math.max(r,t[a].x),n=Math.min(n,t[a].y),s=Math.max(s,t[a].y);return e.x=i,e.y=n,e.width=r-i,e.height=s-n,e}},20074:e=>{e.exports=function(e,t){var i=Math.min(e.x,t.x),r=Math.max(e.right,t.right);e.x=i,e.width=r-i;var n=Math.min(e.y,t.y),s=Math.max(e.bottom,t.bottom);return e.y=n,e.height=s-n,e}},92171:e=>{e.exports=function(e,t,i){var r=Math.min(e.x,t),n=Math.max(e.right,t);e.x=r,e.width=n-r;var s=Math.min(e.y,i),a=Math.max(e.bottom,i);return e.y=s,e.height=a-s,e}},42981:e=>{e.exports=function(e,t,i){return e.x+=t,e.y+=i,e}},46907:e=>{e.exports=function(e,t){return e.x+=t.x,e.y+=t.y,e}},60170:e=>{e.exports=function(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y}},13019:e=>{e.exports=function(e){return 2*(e.width+e.height)}},85133:(e,t,i)=>{var r=i(2141),n=i(39506);e.exports=function(e,t,i){void 0===i&&(i=new r);var s=Math.sin(t=n(t)),a=Math.cos(t),o=a>0?e.width/2:-(e.width/2),h=s>0?e.height/2:-(e.height/2);return Math.abs(o*s)<Math.abs(h*a)?h=o*s/a:o=h*a/s,i.x=o+e.centerX,i.y=h+e.centerY,i}},26597:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=e.x+Math.random()*e.width,t.y=e.y+Math.random()*e.height,t}},86470:(e,t,i)=>{var r=i(30976),n=i(70273),s=i(2141);e.exports=function(e,t,i){if(void 0===i&&(i=new s),n(e,t))switch(r(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x),i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right),i.y=e.y+Math.random()*(t.bottom-e.y)}return i}},87841:(e,t,i)=>{var r=i(83419),n=i(37303),s=i(20812),a=i(34819),o=i(23777),h=i(23031),c=i(26597);e.exports=new r({initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=o.RECTANGLE,this.x=e,this.y=t,this.width=i,this.height=r},contains:function(e,t){return n(this,e,t)},getPoint:function(e,t){return s(this,e,t)},getPoints:function(e,t,i){return a(this,e,t,i)},getRandomPoint:function(e){return c(this,e)},setTo:function(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this},setSize:function(e,t){return void 0===t&&(t=e),this.width=e,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(e){return void 0===e&&(e=new h),e.setTo(this.x,this.y,this.right,this.y),e},getLineB:function(e){return void 0===e&&(e=new h),e.setTo(this.right,this.y,this.right,this.bottom),e},getLineC:function(e){return void 0===e&&(e=new h),e.setTo(this.right,this.bottom,this.x,this.bottom),e},getLineD:function(e){return void 0===e&&(e=new h),e.setTo(this.x,this.bottom,this.x,this.y),e},left:{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}},top:{get:function(){return this.y},set:function(e){e>=this.bottom?this.height=0:this.height=this.bottom-e,this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}})},94845:e=>{e.exports=function(e,t){return e.width===t.width&&e.height===t.height}},31730:e=>{e.exports=function(e,t,i){return void 0===i&&(i=t),e.width*=t,e.height*=i,e}},36899:(e,t,i)=>{var r=i(87841);e.exports=function(e,t,i){void 0===i&&(i=new r);var n=Math.min(e.x,t.x),s=Math.min(e.y,t.y),a=Math.max(e.right,t.right)-n,o=Math.max(e.bottom,t.bottom)-s;return i.setTo(n,s,a,o)}},93232:(e,t,i)=>{var r=i(87841);r.Area=i(62224),r.Ceil=i(98615),r.CeilAll=i(31688),r.CenterOn=i(67502),r.Clone=i(65085),r.Contains=i(37303),r.ContainsPoint=i(96553),r.ContainsRect=i(70273),r.CopyFrom=i(43459),r.Decompose=i(77493),r.Equals=i(9219),r.FitInside=i(53751),r.FitOutside=i(16088),r.Floor=i(80774),r.FloorAll=i(83859),r.FromPoints=i(19217),r.FromXY=i(9477),r.GetAspectRatio=i(8249),r.GetCenter=i(27165),r.GetPoint=i(20812),r.GetPoints=i(34819),r.GetSize=i(51313),r.Inflate=i(86091),r.Intersection=i(53951),r.MarchingAnts=i(14649),r.MergePoints=i(33595),r.MergeRect=i(20074),r.MergeXY=i(92171),r.Offset=i(42981),r.OffsetPoint=i(46907),r.Overlaps=i(60170),r.Perimeter=i(13019),r.PerimeterPoint=i(85133),r.Random=i(26597),r.RandomOutside=i(86470),r.SameDimensions=i(94845),r.Scale=i(31730),r.Union=i(36899),e.exports=r},41658:e=>{e.exports=function(e){var t=e.x1,i=e.y1,r=e.x2,n=e.y2;return Math.abs(((e.x3-t)*(n-i)-(r-t)*(e.y3-i))/2)}},39208:(e,t,i)=>{var r=i(16483);e.exports=function(e,t,i){var n=Math.sqrt(3)/2*i;return new r(e,t,e+i/2,t+n,e-i/2,t+n)}},39545:(e,t,i)=>{var r=i(94811),n=i(16483);e.exports=function(e,t,i,s,a){void 0===t&&(t=null),void 0===i&&(i=1),void 0===s&&(s=1),void 0===a&&(a=[]);for(var o,h,c,l,d,u,f,p,g,m=r(e,t),v=0;v<m.length;v+=3)o=m[v],h=m[v+1],c=m[v+2],l=e[2*o]*i,d=e[2*o+1]*s,u=e[2*h]*i,f=e[2*h+1]*s,p=e[2*c]*i,g=e[2*c+1]*s,a.push(new n(l,d,u,f,p,g));return a}},90301:(e,t,i)=>{var r=i(16483);e.exports=function(e,t,i,n){void 0===n&&(n=i);var s=t-n,a=e+i;return new r(e,t,e,s,a,t)}},23707:(e,t,i)=>{var r=i(97523),n=i(13584);e.exports=function(e,t,i,s){void 0===s&&(s=r);var a=s(e);return n(e,t-a.x,i-a.y)}},97523:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){return void 0===t&&(t=new r),t.x=(e.x1+e.x2+e.x3)/3,t.y=(e.y1+e.y2+e.y3)/3,t}},24951:(e,t,i)=>{var r=i(26099);e.exports=function(e,t){void 0===t&&(t=new r);var i,n,s=e.x3,a=e.y3,o=e.x1-s,h=e.y1-a,c=e.x2-s,l=e.y2-a,d=2*(o*l-h*c),u=(i=o*o+h*h,h*(c*c+l*l)-i*l),f=(n=o*o+h*h,o*(c*c+l*l)-n*c);return t.x=s-u/d,t.y=a+f/d,t}},85614:(e,t,i)=>{var r=i(96503);e.exports=function(e,t){void 0===t&&(t=new r);var i,n,s=e.x1,a=e.y1,o=e.x2,h=e.y2,c=e.x3,l=e.y3,d=o-s,u=h-a,f=c-s,p=l-a,g=d*(s+o)+u*(a+h),m=f*(s+c)+p*(a+l),v=2*(d*(l-h)-u*(c-o));if(1e-6>Math.abs(v)){var y=Math.min(s,o,c),b=Math.min(a,h,l);i=(Math.max(s,o,c)-y)*.5,n=(Math.max(a,h,l)-b)*.5,t.x=y+i,t.y=b+n,t.radius=Math.sqrt(i*i+n*n)}else t.x=(p*g-u*m)/v,t.y=(d*m-f*g)/v,i=t.x-s,n=t.y-a,t.radius=Math.sqrt(i*i+n*n);return t}},74422:(e,t,i)=>{var r=i(16483);e.exports=function(e){return new r(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},10690:e=>{e.exports=function(e,t,i){var r=e.x3-e.x1,n=e.y3-e.y1,s=e.x2-e.x1,a=e.y2-e.y1,o=t-e.x1,h=i-e.y1,c=r*r+n*n,l=r*s+n*a,d=r*o+n*h,u=s*s+a*a,f=s*o+a*h,p=c*u-l*l,g=0===p?0:1/p,m=(u*d-l*f)*g,v=(c*f-l*d)*g;return m>=0&&v>=0&&m+v<1}},48653:e=>{e.exports=function(e,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=[]);for(var n,s,a,o,h,c,l=e.x3-e.x1,d=e.y3-e.y1,u=e.x2-e.x1,f=e.y2-e.y1,p=l*l+d*d,g=l*u+d*f,m=u*u+f*f,v=p*m-g*g,y=0===v?0:1/v,b=e.x1,x=e.y1,E=0;E<t.length&&(n=(m*(h=l*(a=t[E].x-b)+d*(o=t[E].y-x))-g*(c=u*a+f*o))*y,s=(p*c-g*h)*y,!(n>=0)||!(s>=0)||!(n+s<1)||(r.push({x:t[E].x,y:t[E].y}),!i));E++);return r}},96006:(e,t,i)=>{var r=i(10690);e.exports=function(e,t){return r(e,t.x,t.y)}},71326:e=>{e.exports=function(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},71694:e=>{e.exports=function(e,t){return void 0===t&&(t=[]),t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y2}),t.push({x:e.x3,y:e.y3}),t}},33522:e=>{e.exports=function(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3}},20437:(e,t,i)=>{var r=i(2141),n=i(35001);e.exports=function(e,t,i){void 0===i&&(i=new r);var s=e.getLineA(),a=e.getLineB(),o=e.getLineC();if(t<=0||t>=1)return i.x=s.x1,i.y=s.y1,i;var h=n(s),c=n(a),l=n(o),d=(h+c+l)*t,u=0;return d<h?(u=d/h,i.x=s.x1+(s.x2-s.x1)*u,i.y=s.y1+(s.y2-s.y1)*u):d>h+c?(d-=h+c,u=d/l,i.x=o.x1+(o.x2-o.x1)*u,i.y=o.y1+(o.y2-o.y1)*u):(d-=h,u=d/c,i.x=a.x1+(a.x2-a.x1)*u,i.y=a.y1+(a.y2-a.y1)*u),i}},80672:(e,t,i)=>{var r=i(35001),n=i(2141);e.exports=function(e,t,i,s){void 0===s&&(s=[]);var a=e.getLineA(),o=e.getLineB(),h=e.getLineC(),c=r(a),l=r(o),d=r(h),u=c+l+d;!t&&i>0&&(t=u/i);for(var f=0;f<t;f++){var p=f/t*u,g=0,m=new n;p<c?(g=p/c,m.x=a.x1+(a.x2-a.x1)*g,m.y=a.y1+(a.y2-a.y1)*g):p>c+l?(p-=c+l,g=p/d,m.x=h.x1+(h.x2-h.x1)*g,m.y=h.y1+(h.y2-h.y1)*g):(p-=c,g=p/l,m.x=o.x1+(o.x2-o.x1)*g,m.y=o.y1+(o.y2-o.y1)*g),s.push(m)}return s}},39757:(e,t,i)=>{var r=i(2141);function n(e,t,i,r){var n=e-i,s=t-r;return Math.sqrt(n*n+s*s)}e.exports=function(e,t){void 0===t&&(t=new r);var i=e.x1,s=e.y1,a=e.x2,o=e.y2,h=e.x3,c=e.y3,l=n(h,c,a,o),d=n(i,s,h,c),u=n(a,o,i,s),f=l+d+u;return t.x=(i*l+a*d+h*u)/f,t.y=(s*l+o*d+c*u)/f,t}},13584:e=>{e.exports=function(e,t,i){return e.x1+=t,e.y1+=i,e.x2+=t,e.y2+=i,e.x3+=t,e.y3+=i,e}},1376:(e,t,i)=>{var r=i(35001);e.exports=function(e){var t=e.getLineA(),i=e.getLineB(),n=e.getLineC();return r(t)+r(i)+r(n)}},90260:(e,t,i)=>{var r=i(2141);e.exports=function(e,t){void 0===t&&(t=new r);var i=e.x2-e.x1,n=e.y2-e.y1,s=e.x3-e.x1,a=e.y3-e.y1,o=Math.random(),h=Math.random();return o+h>=1&&(o=1-o,h=1-h),t.x=e.x1+(i*o+s*h),t.y=e.y1+(n*o+a*h),t}},52172:(e,t,i)=>{var r=i(99614),n=i(39757);e.exports=function(e,t){var i=n(e);return r(e,i.x,i.y,t)}},49907:(e,t,i)=>{var r=i(99614);e.exports=function(e,t,i){return r(e,t.x,t.y,i)}},99614:e=>{e.exports=function(e,t,i,r){var n=Math.cos(r),s=Math.sin(r),a=e.x1-t,o=e.y1-i;return e.x1=a*n-o*s+t,e.y1=a*s+o*n+i,a=e.x2-t,o=e.y2-i,e.x2=a*n-o*s+t,e.y2=a*s+o*n+i,a=e.x3-t,o=e.y3-i,e.x3=a*n-o*s+t,e.y3=a*s+o*n+i,e}},16483:(e,t,i)=>{var r=i(83419),n=i(10690),s=i(20437),a=i(80672),o=i(23777),h=i(23031),c=i(90260);e.exports=new r({initialize:function(e,t,i,r,n,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.type=o.TRIANGLE,this.x1=e,this.y1=t,this.x2=i,this.y2=r,this.x3=n,this.y3=s},contains:function(e,t){return n(this,e,t)},getPoint:function(e,t){return s(this,e,t)},getPoints:function(e,t,i){return a(this,e,t,i)},getRandomPoint:function(e){return c(this,e)},setTo:function(e,t,i,r,n,s){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=e,this.y1=t,this.x2=i,this.y2=r,this.x3=n,this.y3=s,this},getLineA:function(e){return void 0===e&&(e=new h),e.setTo(this.x1,this.y1,this.x2,this.y2),e},getLineB:function(e){return void 0===e&&(e=new h),e.setTo(this.x2,this.y2,this.x3,this.y3),e},getLineC:function(e){return void 0===e&&(e=new h),e.setTo(this.x3,this.y3,this.x1,this.y1),e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){var t=0;t=this.x1<=this.x2&&this.x1<=this.x3?this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?this.x2-e:this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){var t=0;t=this.x1>=this.x2&&this.x1>=this.x3?this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?this.x2-e:this.x3-e,this.x1-=t,this.x2-=t,this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){var t=0;t=this.y1<=this.y2&&this.y1<=this.y3?this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?this.y2-e:this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(e){var t=0;t=this.y1>=this.y2&&this.y1>=this.y3?this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?this.y2-e:this.y3-e,this.y1-=t,this.y2-=t,this.y3-=t}}})},84435:(e,t,i)=>{var r=i(16483);r.Area=i(41658),r.BuildEquilateral=i(39208),r.BuildFromPolygon=i(39545),r.BuildRight=i(90301),r.CenterOn=i(23707),r.Centroid=i(97523),r.CircumCenter=i(24951),r.CircumCircle=i(85614),r.Clone=i(74422),r.Contains=i(10690),r.ContainsArray=i(48653),r.ContainsPoint=i(96006),r.CopyFrom=i(71326),r.Decompose=i(71694),r.Equals=i(33522),r.GetPoint=i(20437),r.GetPoints=i(80672),r.InCenter=i(39757),r.Perimeter=i(1376),r.Offset=i(13584),r.Random=i(90260),r.Rotate=i(52172),r.RotateAroundPoint=i(49907),r.RotateAroundXY=i(99614),e.exports=r},74457:e=>{e.exports=function(e,t,i){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}}},84409:e=>{e.exports=function(e,t){return function(i,r,n,s){var a=e.getPixelAlpha(r,n,s.texture.key,s.frame.name);return a&&a>=t}}},7003:(e,t,i)=>{var r=i(83419),n=i(93301),s=i(50792),a=i(8214),o=i(8443),h=i(78970),c=i(85098),l=i(42515),d=i(36210),u=i(61340),f=i(85955);e.exports=new r({initialize:function(e,t){this.game=e,this.scaleManager,this.canvas,this.config=t,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=t.inputKeyboard?new h(this):null,this.mouse=t.inputMouse?new c(this):null,this.touch=t.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=t.inputActivePointers;for(var i=0;i<=this.pointersTotal;i++){var r=new l(this,i);r.smoothFactor=t.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=t.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new u,this._tempMatrix2=new u,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],e.events.once(o.BOOT,this.boot,this)},boot:function(){var e=this.game,t=e.events;this.canvas=e.canvas,this.scaleManager=e.scale,this.events.emit(a.MANAGER_BOOT),t.on(o.PRE_RENDER,this.preRender,this),t.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(e){this.isOver=!0,this.events.emit(a.GAME_OVER,e)},setCanvasOut:function(e){this.isOver=!1,this.events.emit(a.GAME_OUT,e)},preRender:function(){var e=this.game.loop.now,t=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=e,this.events.emit(a.MANAGER_UPDATE);for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&n.sys.input.updatePoll(e,t)&&this.globalTopOnly)return}},setDefaultCursor:function(e){this.defaultCursor=e,this.canvas.style.cursor!==e&&(this.canvas.style.cursor=e)},setCursor:function(e){e.cursor&&(this.canvas.style.cursor=e.cursor)},resetCursor:function(e,t){(t||e&&e.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(e){void 0===e&&(e=1);var t=[];this.pointersTotal+e>10&&(e=10-this.pointersTotal);for(var i=0;i<e;i++){var r=new l(this,this.pointers.length);r.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(r),this.pointersTotal++,t.push(r)}return t},updateInputPlugins:function(e,t){var i=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var r=0;r<i.length;r++){var n=i[r];if(n.sys.input&&(n.sys.input.update(e,t)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],a=1;a<t.length;a++){var o=t[a];if(!o.active){o.touchstart(s,e),this.activePointer=o,i.push(o);break}}this.updateInputPlugins(n.TOUCH_START,i)},onTouchMove:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],a=1;a<t.length;a++){var o=t[a];if(o.active&&o.identifier===s.identifier){var h=document.elementFromPoint(s.clientX,s.clientY)===this.canvas;!this.isOver&&h?this.setCanvasOver(e):this.isOver&&!h&&this.setCanvasOut(e),this.isOver&&(o.touchmove(s,e),this.activePointer=o,i.push(o));break}}this.updateInputPlugins(n.TOUCH_MOVE,i)},onTouchEnd:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],a=1;a<t.length;a++){var o=t[a];if(o.active&&o.identifier===s.identifier){o.touchend(s,e),i.push(o);break}}this.updateInputPlugins(n.TOUCH_END,i)},onTouchCancel:function(e){for(var t=this.pointers,i=[],r=0;r<e.changedTouches.length;r++)for(var s=e.changedTouches[r],a=1;a<t.length;a++){var o=t[a];if(o.active&&o.identifier===s.identifier){o.touchcancel(s,e),i.push(o);break}}this.updateInputPlugins(n.TOUCH_CANCEL,i)},onMouseDown:function(e){var t=this.mousePointer;t.down(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(e){var t=this.mousePointer;t.move(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(e){var t=this.mousePointer;t.up(e),t.updateMotion(),this.activePointer=t,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(e){var t=this.mousePointer;t.wheel(e),this.activePointer=t,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(e){var t=this.mouse.locked;this.mousePointer.locked=t,this.events.emit(a.POINTERLOCK_CHANGE,e,t)},inputCandidate:function(e,t){var i=e.input;if(!i||!i.enabled||!e.willRender(t))return!1;var r=!0,n=e.parentContainer;if(n)do{if(!n.willRender(t)){r=!1;break}n=n.parentContainer}while(n)return r},hitTest:function(e,t,i,r){void 0===r&&(r=this._tempHitTest);var n=this._tempPoint,s=i.scrollX,a=i.scrollY;r.length=0;var o=e.x,h=e.y;i.getWorldPoint(o,h,n),e.worldX=n.x,e.worldY=n.y;for(var c={x:0,y:0},l=this._tempMatrix,d=this._tempMatrix2,u=0;u<t.length;u++){var p=t[u];if(this.inputCandidate(p,i)){var g=n.x+s*p.scrollFactorX-s,m=n.y+a*p.scrollFactorY-a;p.parentContainer?(p.getWorldTransformMatrix(l,d),l.applyInverse(g,m,c)):f(g,m,p.x,p.y,p.rotation,p.scaleX,p.scaleY,c),this.pointWithinHitArea(p,c.x,c.y)&&r.push(p)}}return r},pointWithinHitArea:function(e,t,i){t+=e.displayOriginX,i+=e.displayOriginY;var r=e.input;return!!(r&&r.hitAreaCallback(r.hitArea,t,i,e))&&(r.localX=t,r.localY=i,!0)},pointWithinInteractiveObject:function(e,t,i){return!!e.hitArea&&(t+=e.gameObject.displayOriginX,i+=e.gameObject.displayOriginY,e.localX=t,e.localY=i,e.hitAreaCallback(e.hitArea,t,i,e))},transformPointer:function(e,t,i,r){var n=e.position,s=e.prevPosition;s.x=n.x,s.y=n.y;var a=this.scaleManager.transformX(t),o=this.scaleManager.transformY(i),h=e.smoothFactor;r&&0!==h?(n.x=a*h+s.x*(1-h),n.y=o*h+s.y*(1-h)):(n.x=a,n.y=o)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var e=0;e<this.pointers.length;e++)this.pointers[e].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}})},48205:(e,t,i)=>{var r=i(96503),n=i(87902),s=i(83419),a=i(93301),o=i(74457),h=i(84409),c=i(20339),l=i(8497),d=i(81154),u=i(8214),f=i(50792),p=i(95540),g=i(23777),m=i(89639),v=i(41212),y=i(37277),b=i(87841),x=i(37303),E=i(44594),T=i(16483),A=i(10690),w=new s({Extends:f,initialize:function(e){f.call(this),this.scene=e,this.systems=e.sys,this.settings=e.sys.settings,this.manager=e.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var t={cancelled:!1};this._eventContainer={stopPropagation:function(){t.cancelled=!0}},this._eventData=t,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,e.sys.events.once(E.BOOT,this.boot,this),e.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(u.BOOT)},start:function(){var e=this.systems.events;e.on(E.TRANSITION_START,this.transitionIn,this),e.on(E.TRANSITION_OUT,this.transitionOut,this),e.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),e.on(E.PRE_UPDATE,this.preUpdate,this),e.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(u.GAME_OUT,this.onGameOut,this),this.manager.events.on(u.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(u.START)},onGameOver:function(e){this.isActive()&&this.emit(u.GAME_OVER,e.timeStamp,e)},onGameOut:function(e){this.isActive()&&this.emit(u.GAME_OUT,e.timeStamp,e)},preUpdate:function(){this.pluginEvents.emit(u.PRE_UPDATE);var e=this._pendingRemoval,t=this._pendingInsertion,i=e.length,r=t.length;if(0!==i||0!==r){for(var n=this._list,s=0;s<i;s++){var a=e[s],o=n.indexOf(a);o>-1&&(n.splice(o,1),this.clear(a,!0))}this._pendingRemoval.length=0,this._list=n.concat(t.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(e){this.manager&&this.manager.setCursor(e)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(e,t){if(!this.isActive())return!1;if(this.pluginEvents.emit(u.UPDATE,e,t),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var i,r=this.manager.pointers;for(i=0;i<r.length;i++)r[i].updateMotion();if(0===this._list.length)return!1;var n=this.pollRate;if(-1===n)return!1;if(n>0){if(this._pollTimer-=t,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var s=!1;for(i=0;i<r.length;i++){var a=0,o=r[i];this._tempZones=[],this._temp=this.hitTestPointer(o),this.sortGameObjects(this._temp,o),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),a+=this.processOverOutEvents(o),2===this.getDragState(o)&&this.processDragThresholdEvent(o,e),a>0&&(s=!0)}return s},update:function(e,t){if(!this.isActive())return!1;for(var i=!1,r=0;r<t.length;r++){var n=0,s=t[r];switch(this._tempZones=[],this._temp=this.hitTestPointer(s),this.sortGameObjects(this._temp,s),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),e){case a.MOUSE_DOWN:n+=this.processDragDownEvent(s),n+=this.processDownEvents(s),n+=this.processOverOutEvents(s);break;case a.MOUSE_UP:n+=this.processDragUpEvent(s),n+=this.processUpEvents(s),n+=this.processOverOutEvents(s);break;case a.TOUCH_START:n+=this.processDragDownEvent(s),n+=this.processDownEvents(s),n+=this.processOverEvents(s);break;case a.TOUCH_END:case a.TOUCH_CANCEL:n+=this.processDragUpEvent(s),n+=this.processUpEvents(s),n+=this.processOutEvents(s);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:n+=this.processDragMoveEvent(s),n+=this.processMoveEvents(s),n+=this.processOverOutEvents(s);break;case a.MOUSE_WHEEL:n+=this.processWheelEvent(s)}n>0&&(i=!0)}return this._updatedThisFrame=!0,i},clear:function(e,t){void 0===t&&(t=!1),this.disable(e);var i=e.input;i&&(this.removeDebug(e),this.manager.resetCursor(i),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,e.input=null),t||this.queueForRemoval(e);var r=this._draggable.indexOf(e);return r>-1&&this._draggable.splice(r,1),e},disable:function(e,t){void 0===t&&(t=!1);var i=e.input;i&&(i.enabled=!1,i.dragState=0);for(var r,n=this._drag,s=this._over,a=this.manager,o=0;o<a.pointers.length;o++)(r=n[o].indexOf(e))>-1&&n[o].splice(r,1),(r=s[o].indexOf(e))>-1&&s[o].splice(r,1);return t&&this.resetCursor(),this},enable:function(e,t,i,r){return void 0===r&&(r=!1),e.input?e.input.enabled=!0:this.setHitArea(e,t,i),e.input&&r&&!e.input.dropZone&&(e.input.dropZone=r),this},hitTestPointer:function(e){for(var t=this.cameras.getCamerasBelowPointer(e),i=0;i<t.length;i++){for(var r=t[i],n=this.manager.hitTest(e,this._list,r),s=0;s<n.length;s++){var a=n[s];a.input.dropZone&&this._tempZones.push(a)}if(n.length>0)return e.camera=r,n}return e.camera=t[0],[]},processDownEvents:function(e){var t=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=0;s<i.length;s++){var a=i[s];if(a.input&&a.input.enabled&&(t++,a.emit(u.GAMEOBJECT_POINTER_DOWN,e,a.input.localX,a.input.localY,n),r.cancelled||!this.isActive()||a.input&&a.input.enabled&&(this.emit(u.GAMEOBJECT_DOWN,e,a,n),r.cancelled||!this.isActive())))break}return!r.cancelled&&this.isActive()&&(e.downElement===this.manager.game.canvas?this.emit(u.POINTER_DOWN,e,i):this.emit(u.POINTER_DOWN_OUTSIDE,e)),t},getDragState:function(e){return this._dragState[e.id]},setDragState:function(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function(e,t){var i=!1,r=this.dragTimeThreshold,n=this.dragDistanceThreshold;if(n>0&&c(e.x,e.y,e.downX,e.downY)>=n?i=!0:r>0&&t>=e.downTime+r&&(i=!0),i)return this.setDragState(e,3),this.processDragStartList(e)},processDragStartList:function(e){if(3!==this.getDragState(e))return 0;var t=this._drag[e.id];t.length>1&&(t=t.slice(0));for(var i=0;i<t.length;i++){var r=t[i],n=r.input;n.dragState=2,n.dragStartX=r.x,n.dragStartY=r.y,n.dragStartXGlobal=e.worldX,n.dragStartYGlobal=e.worldY,n.dragStartCamera=e.camera,n.dragX=n.dragStartXGlobal-n.dragStartX,n.dragY=n.dragStartYGlobal-n.dragStartY,r.emit(u.GAMEOBJECT_DRAG_START,e,n.dragX,n.dragY),this.emit(u.DRAG_START,e,r)}return this.setDragState(e,4),t.length},processDragDownEvent:function(e){var t=this._temp;if(0===this._draggable.length||0===t.length||!e.primaryDown||0!==this.getDragState(e))return 0;this.setDragState(e,1);for(var i=[],r=0;r<t.length;r++){var n=t[r];n.input.draggable&&0===n.input.dragState&&i.push(n)}return 0===i.length?(this.setDragState(e,0),0):(i.length>1&&(this.sortGameObjects(i,e),this.topOnly&&i.splice(1)),this._drag[e.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold)?(this.setDragState(e,3),this.processDragStartList(e)):(this.setDragState(e,2),0)},processDragMoveEvent:function(e){if(2===this.getDragState(e)&&this.processDragThresholdEvent(e,this.manager.game.loop.now),4!==this.getDragState(e))return 0;var t=this._tempZones,i=this._drag[e.id];i.length>1&&(i=i.slice(0));for(var r=0;r<i.length;r++){var n,s,a=i[r],o=a.input,h=o.target;if(h){var c=t.indexOf(h);0===c?(a.emit(u.GAMEOBJECT_DRAG_OVER,e,h),this.emit(u.DRAG_OVER,e,a,h)):c>0?(a.emit(u.GAMEOBJECT_DRAG_LEAVE,e,h),this.emit(u.DRAG_LEAVE,e,a,h),o.target=t[0],h=o.target,a.emit(u.GAMEOBJECT_DRAG_ENTER,e,h),this.emit(u.DRAG_ENTER,e,a,h)):(a.emit(u.GAMEOBJECT_DRAG_LEAVE,e,h),this.emit(u.DRAG_LEAVE,e,a,h),t[0]?(o.target=t[0],h=o.target,a.emit(u.GAMEOBJECT_DRAG_ENTER,e,h),this.emit(u.DRAG_ENTER,e,a,h)):o.target=null)}else!h&&t[0]&&(o.target=t[0],h=o.target,a.emit(u.GAMEOBJECT_DRAG_ENTER,e,h),this.emit(u.DRAG_ENTER,e,a,h));var l=e.positionToCamera(o.dragStartCamera);if(a.parentContainer){var d=l.x-o.dragStartXGlobal,f=l.y-o.dragStartYGlobal,p=a.getParentRotation(),g=d*Math.cos(p)+f*Math.sin(p),m=f*Math.cos(p)-d*Math.sin(p);g*=1/a.parentContainer.scaleX,m*=1/a.parentContainer.scaleY,n=g+o.dragStartX,s=m+o.dragStartY}else n=l.x-o.dragX,s=l.y-o.dragY;a.emit(u.GAMEOBJECT_DRAG,e,n,s),this.emit(u.DRAG,e,a,n,s)}return i.length},processDragUpEvent:function(e){var t=this._drag[e.id];t.length>1&&(t=t.slice(0));for(var i=0;i<t.length;i++){var r=t[i],n=r.input;if(n&&2===n.dragState){n.dragState=0,n.dragX=n.localX-r.displayOriginX,n.dragY=n.localY-r.displayOriginY,n.dragStartCamera=null;var s=!1,a=n.target;a&&(r.emit(u.GAMEOBJECT_DROP,e,a),this.emit(u.DROP,e,r,a),n.target=null,s=!0),r.input&&r.input.enabled&&(r.emit(u.GAMEOBJECT_DRAG_END,e,n.dragX,n.dragY,s),this.emit(u.DRAG_END,e,r,s))}}return this.setDragState(e,0),t.splice(0),0},processMoveEvents:function(e){var t=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=0;s<i.length;s++){var a=i[s];if(a.input&&a.input.enabled&&(t++,a.emit(u.GAMEOBJECT_POINTER_MOVE,e,a.input.localX,a.input.localY,n),r.cancelled||!this.isActive()||a.input&&a.input.enabled&&(this.emit(u.GAMEOBJECT_MOVE,e,a,n),r.cancelled||!this.isActive()||this.topOnly)))break}return!r.cancelled&&this.isActive()&&this.emit(u.POINTER_MOVE,e,i),t},processWheelEvent:function(e){var t=0,i=this._temp,r=this._eventData,n=this._eventContainer;r.cancelled=!1;for(var s=e.deltaX,a=e.deltaY,o=e.deltaZ,h=0;h<i.length;h++){var c=i[h];if(c.input&&c.input.enabled&&(t++,c.emit(u.GAMEOBJECT_POINTER_WHEEL,e,s,a,o,n),r.cancelled||!this.isActive()||c.input&&c.input.enabled&&(this.emit(u.GAMEOBJECT_WHEEL,e,c,s,a,o,n),r.cancelled||!this.isActive())))break}return!r.cancelled&&this.isActive()&&this.emit(u.POINTER_WHEEL,e,i,s,a,o),t},processOverEvents:function(e){var t=this._temp,i=0,r=t.length,n=[];if(r>0){var s=this.manager,a=this._eventData,o=this._eventContainer;a.cancelled=!1;for(var h=0;h<r;h++){var c=t[h];if(c.input&&c.input.enabled&&(n.push(c),s.setCursor(c.input),c.emit(u.GAMEOBJECT_POINTER_OVER,e,c.input.localX,c.input.localY,o),i++,a.cancelled||!this.isActive()||c.input&&c.input.enabled&&(this.emit(u.GAMEOBJECT_OVER,e,c,o),a.cancelled||!this.isActive())))break}!a.cancelled&&this.isActive()&&this.emit(u.POINTER_OVER,e,n)}return this._over[e.id]=n,i},processOutEvents:function(e){var t=this._over[e.id],i=0,r=t.length;if(r>0){var n=this.manager,s=this._eventData,a=this._eventContainer;s.cancelled=!1,this.sortGameObjects(t,e);for(var o=0;o<r;o++){var h=t[o];if((h=t[o]).input&&h.input.enabled&&(n.resetCursor(h.input),h.emit(u.GAMEOBJECT_POINTER_OUT,e,a),i++,s.cancelled||!this.isActive()||h.input&&h.input.enabled&&(this.emit(u.GAMEOBJECT_OUT,e,h,a),s.cancelled||!this.isActive())))break}!s.cancelled&&this.isActive()&&this.emit(u.POINTER_OUT,e,t),this._over[e.id]=[]}return i},processOverOutEvents:function(e){var t,i,r=this._temp,n=[],s=[],a=[],o=this._over[e.id],h=this._drag[e.id],c=this.manager;for(t=0;t<o.length;t++)i=o[t],-1===r.indexOf(i)&&-1===h.indexOf(i)?n.push(i):a.push(i);for(t=0;t<r.length;t++)i=r[t],-1===o.indexOf(i)&&s.push(i);var l=n.length,d=0,f=this._eventData,p=this._eventContainer;if(f.cancelled=!1,l>0){for(this.sortGameObjects(n,e),t=0;t<l&&(!(i=n[t]).input||!i.input.enabled||(c.resetCursor(i.input),i.emit(u.GAMEOBJECT_POINTER_OUT,e,p),d++,!f.cancelled&&this.isActive()&&(!i.input||!i.input.enabled||(this.emit(u.GAMEOBJECT_OUT,e,i,p),!f.cancelled&&this.isActive()))));t++);(!f.cancelled||this.isActive())&&this.emit(u.POINTER_OUT,e,n)}if(l=s.length,f.cancelled=!1,l>0){for(this.sortGameObjects(s,e),t=0;t<l&&(!(i=s[t]).input||!i.input.enabled||(c.setCursor(i.input),i.emit(u.GAMEOBJECT_POINTER_OVER,e,i.input.localX,i.input.localY,p),d++,!f.cancelled&&this.isActive()&&(!i.input||!i.input.enabled||(this.emit(u.GAMEOBJECT_OVER,e,i,p),!f.cancelled&&this.isActive()))));t++);!f.cancelled&&this.isActive()&&this.emit(u.POINTER_OVER,e,s)}return o=a.concat(s),this._over[e.id]=this.sortGameObjects(o,e),d},processUpEvents:function(e){var t=this._temp,i=this._eventData,r=this._eventContainer;i.cancelled=!1;for(var n=0;n<t.length;n++){var s=t[n];if(s.input&&s.input.enabled&&(s.emit(u.GAMEOBJECT_POINTER_UP,e,s.input.localX,s.input.localY,r),i.cancelled||!this.isActive()||s.input&&s.input.enabled&&(this.emit(u.GAMEOBJECT_UP,e,s,r),i.cancelled||!this.isActive())))break}return!i.cancelled&&this.isActive()&&(e.upElement===this.manager.game.canvas?this.emit(u.POINTER_UP,e,t):this.emit(u.POINTER_UP_OUTSIDE,e)),t.length},forceDownState:function(e,t){this.forceState(e,t,u.GAMEOBJECT_POINTER_DOWN,u.GAMEOBJECT_DOWN,!1)},forceUpState:function(e,t){this.forceState(e,t,u.GAMEOBJECT_POINTER_UP,u.GAMEOBJECT_UP,!1)},forceOverState:function(e,t){this.forceState(e,t,u.GAMEOBJECT_POINTER_OVER,u.GAMEOBJECT_OVER,!0)},forceOutState:function(e,t){this.forceState(e,t,u.GAMEOBJECT_POINTER_OUT,u.GAMEOBJECT_OUT,!1)},forceState:function(e,t,i,r,n){var s=this._eventData,a=this._eventContainer;s.cancelled=!1,t.input&&t.input.enabled&&(t.emit(i,e,t.input.localX,t.input.localY,a),n&&this.setCursor(t.input),!s.cancelled&&this.isActive()&&t.input&&t.input.enabled&&this.emit(r,e,t,a))},queueForInsertion:function(e){return -1===this._pendingInsertion.indexOf(e)&&-1===this._list.indexOf(e)&&this._pendingInsertion.push(e),this},queueForRemoval:function(e){return this._pendingRemoval.push(e),this},setDraggable:function(e,t){void 0===t&&(t=!0),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];r.input.draggable=t;var n=this._draggable.indexOf(r);t&&-1===n?this._draggable.push(r):!t&&n>-1&&this._draggable.splice(n,1)}return this},makePixelPerfect:function(e){return void 0===e&&(e=1),h(this.systems.textures,e)},setHitArea:function(e,t,i){if(void 0===t)return this.setHitAreaFromTexture(e);Array.isArray(e)||(e=[e]);var r=!1,n=!1,s=!1,a=!1,h=!1,c=!0;if(v(t)&&Object.keys(t).length){var l=t;if(!e.some(function(e){return e.hasOwnProperty("faces")})){t=p(l,"hitArea",null),i=p(l,"hitAreaCallback",null),h=p(l,"pixelPerfect",!1);var d=p(l,"alphaTolerance",1);h&&(t={},i=this.makePixelPerfect(d))}r=p(l,"draggable",!1),n=p(l,"dropZone",!1),s=p(l,"cursor",!1),a=p(l,"useHandCursor",!1),t&&i||(this.setHitAreaFromTexture(e),c=!1)}else"function"!=typeof t||i||(i=t,t={});for(var u=0;u<e.length;u++){var f=e[u];if(h&&"Container"===f.type){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var g=f.input?f.input:o(f,t,i);g.customHitArea=c,g.dropZone=n,g.cursor=a?"pointer":s,f.input=g,r&&this.setDraggable(f),this.queueForInsertion(f)}return this},setHitAreaCircle:function(e,t,i,s,a){void 0===a&&(a=n);var o=new r(t,i,s);return this.setHitArea(e,o,a)},setHitAreaEllipse:function(e,t,i,r,n,s){void 0===s&&(s=d);var a=new l(t,i,r,n);return this.setHitArea(e,a,s)},setHitAreaFromTexture:function(e,t){void 0===t&&(t=x),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i],n=r.frame,s=0,a=0;if(r.width?(s=r.width,a=r.height):n&&(s=n.realWidth,a=n.realHeight),"Container"===r.type&&(0===s||0===a)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}0!==s&&0!==a&&(r.input=o(r,new b(0,0,s,a),t),this.queueForInsertion(r))}return this},setHitAreaRectangle:function(e,t,i,r,n,s){void 0===s&&(s=x);var a=new b(t,i,r,n);return this.setHitArea(e,a,s)},setHitAreaTriangle:function(e,t,i,r,n,s,a,o){void 0===o&&(o=A);var h=new T(t,i,r,n,s,a);return this.setHitArea(e,h,o)},enableDebug:function(e,t){void 0===t&&(t=65280);var i=e.input;if(!i||!i.hitArea)return this;var r=i.hitArea,n=r.type,s=i.hitAreaDebug,a=this.systems.add,o=this.systems.updateList;s&&(o.remove(s),s.destroy(),s=null);var h=0,c=0;switch(n){case g.CIRCLE:s=a.arc(0,0,r.radius),h=r.x-r.radius,c=r.y-r.radius;break;case g.ELLIPSE:s=a.ellipse(0,0,r.width,r.height),h=r.x-r.width/2,c=r.y-r.height/2;break;case g.LINE:s=a.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case g.POLYGON:s=a.polygon(0,0,r.points);break;case g.RECTANGLE:s=a.rectangle(0,0,r.width,r.height),h=r.x,c=r.y;break;case g.TRIANGLE:s=a.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}return s&&(s.isFilled=!1,s.strokeColor=t,s.preUpdate=function(){s.setVisible(e.visible),s.setStrokeStyle(1/e.scale,s.strokeColor),s.setDisplayOrigin(e.displayOriginX,e.displayOriginY);var t=e.x,i=e.y,r=e.rotation,n=e.scaleX,a=e.scaleY;if(e.parentContainer){var o=e.getWorldTransformMatrix();t=o.tx,i=o.ty,r=o.rotation,n=o.scaleX,a=o.scaleY}s.setRotation(r),s.setScale(n,a),s.setPosition(t+h*n,i+c*a),s.setScrollFactor(e.scrollFactorX,e.scrollFactorY),s.setDepth(e.depth)},o.add(s),i.hitAreaDebug=s),this},removeDebug:function(e){var t=e.input;return t&&t.hitAreaDebug&&(t.hitAreaDebug.destroy(),t.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(e){return this.pollRate=e,this._pollTimer=0,this},setGlobalTopOnly:function(e){return this.manager.globalTopOnly=e,this},setTopOnly:function(e){return this.topOnly=e,this},sortGameObjects:function(e,t){if(e.length<2||!t.camera)return e;var i=t.camera.renderList;return e.sort(function(e,t){var r=Math.max(i.indexOf(e),0);return Math.max(i.indexOf(t),0)-r})},sortDropZones:function(e){return e.length<2?e:(this.scene.sys.depthSort(),e.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(e,t){if(!e.parentContainer&&!t.parentContainer)return this.displayList.getIndex(t)-this.displayList.getIndex(e);if(e.parentContainer===t.parentContainer)return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e);if(e.parentContainer===t)return -1;if(t.parentContainer===e)return 1;for(var i=e.getIndexList(),r=t.getIndexList(),n=Math.min(i.length,r.length),s=0;s<n;s++){var a=i[s],o=r[s];if(a!==o)return o-a}return r.length-i.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(e){return this.manager.addPointer(e)},setDefaultCursor:function(e){return this.manager.setDefaultCursor(e),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(u.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var e=0;e<10;e++)this._drag[e]=[],this._over[e]=[];this.removeAllListeners();var t=this.manager;t.canvas.style.cursor=t.defaultCursor;var i=this.systems.events;i.off(E.TRANSITION_START,this.transitionIn,this),i.off(E.TRANSITION_OUT,this.transitionOut,this),i.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(E.PRE_UPDATE,this.preUpdate,this),t.events.off(u.GAME_OUT,this.onGameOut,this),t.events.off(u.GAME_OVER,this.onGameOver,this),i.off(E.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var e=this.manager.pointers,t=0;t<e.length;t++)e[t].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(u.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",w,"input"),e.exports=w},89639:(e,t,i)=>{var r=i(35154),n={},s={};s.register=function(e,t,i,r,s){n[e]={plugin:t,mapping:i,settingsKey:r,configKey:s}},s.getPlugin=function(e){return n[e]},s.install=function(e){var t=e.scene.sys,i=t.settings.input,s=t.game.config;for(var a in n){var o=n[a].plugin,h=n[a].mapping;r(i,n[a].settingsKey,s[n[a].configKey])&&(e[h]=new o(e))}},s.remove=function(e){n.hasOwnProperty(e)&&delete n[e]},e.exports=s},42515:(e,t,i)=>{var r=i(31040),n=i(83419),s=i(20339),a=i(43855),o=i(47235),h=i(26099),c=i(25892);e.exports=new n({initialize:function(e,t){this.manager=e,this.id=t,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===t,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(e){var t=e.getWorldPoint(this.x,this.y);return this.worldX=t.x,this.worldY=t.y,this},positionToCamera:function(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function(){var e=this.position.x,t=this.position.y,i=this.midPoint.x,n=this.midPoint.y;if(e!==i||t!==n){var s=o(this.motionFactor,i,e),h=o(this.motionFactor,n,t);a(s,e,.1)&&(s=e),a(h,t,.1)&&(h=t),this.midPoint.set(s,h);var c=e-s,l=t-h;this.velocity.set(c,l),this.angle=r(s,h,e,t),this.distance=Math.sqrt(c*c+l*l)}},up:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),0===e.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.button=e.button,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),0===e.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),c.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=e.timeStamp),this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0),this.moveTime=e.timeStamp,this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons),this.event=e,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ,this.wasTouch=!1},touchstart:function(e,t){e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.active=!0,this.buttons=1,this.event=t,this.downElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=t.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(e,t){this.event=t,this.manager.transformPointer(this,e.pageX,e.pageY,!0),this.moveTime=t.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(e,t){this.buttons=0,this.event=t,this.upElement=e.target,this.manager.transformPointer(this,e.pageX,e.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=t.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.buttons?0===this.button&&!this.isDown:0===this.button},rightButtonReleased:function(){return 0===this.buttons?2===this.button&&!this.isDown:2===this.button},middleButtonReleased:function(){return 0===this.buttons?1===this.button&&!this.isDown:1===this.button},backButtonReleased:function(){return 0===this.buttons?3===this.button&&!this.isDown:3===this.button},forwardButtonReleased:function(){return 0===this.buttons?4===this.button&&!this.isDown:4===this.button},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(e,t){void 0===e&&(e=10),void 0===t&&(t=[]);for(var i=this.prevPosition.x,r=this.prevPosition.y,n=this.position.x,s=this.position.y,a=0;a<e;a++){var h=1/e*a;t[a]={x:o(h,i,n),y:o(h,r,s)}}return t},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=0===this.id},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:0}}})},93301:e=>{e.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},7179:e=>{e.exports="boot"},85375:e=>{e.exports="destroy"},39843:e=>{e.exports="dragend"},23388:e=>{e.exports="dragenter"},16133:e=>{e.exports="drag"},27829:e=>{e.exports="dragleave"},53904:e=>{e.exports="dragover"},56058:e=>{e.exports="dragstart"},2642:e=>{e.exports="drop"},88171:e=>{e.exports="gameobjectdown"},36147:e=>{e.exports="dragend"},71692:e=>{e.exports="dragenter"},96149:e=>{e.exports="drag"},81285:e=>{e.exports="dragleave"},74048:e=>{e.exports="dragover"},21322:e=>{e.exports="dragstart"},49378:e=>{e.exports="drop"},86754:e=>{e.exports="gameobjectmove"},86433:e=>{e.exports="gameobjectout"},60709:e=>{e.exports="gameobjectover"},24081:e=>{e.exports="pointerdown"},11172:e=>{e.exports="pointermove"},18907:e=>{e.exports="pointerout"},95579:e=>{e.exports="pointerover"},35368:e=>{e.exports="pointerup"},26972:e=>{e.exports="wheel"},47078:e=>{e.exports="gameobjectup"},73802:e=>{e.exports="gameobjectwheel"},56718:e=>{e.exports="gameout"},25936:e=>{e.exports="gameover"},27503:e=>{e.exports="boot"},50852:e=>{e.exports="process"},96438:e=>{e.exports="update"},59152:e=>{e.exports="pointerlockchange"},47777:e=>{e.exports="pointerdown"},27957:e=>{e.exports="pointerdownoutside"},19444:e=>{e.exports="pointermove"},54251:e=>{e.exports="pointerout"},18667:e=>{e.exports="pointerover"},27192:e=>{e.exports="pointerup"},24652:e=>{e.exports="pointerupoutside"},45132:e=>{e.exports="wheel"},44512:e=>{e.exports="preupdate"},15757:e=>{e.exports="shutdown"},41637:e=>{e.exports="start"},93802:e=>{e.exports="update"},8214:(e,t,i)=>{e.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t){this.pad=e,this.events=e.events,this.index=t,this.value=0,this.threshold=.1},update:function(e){this.value=e},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}})},28884:(e,t,i)=>{var r=i(83419),n=i(92734);e.exports=new r({initialize:function(e,t){this.pad=e,this.events=e.manager,this.index=t,this.value=0,this.threshold=1,this.pressed=!1},update:function(e){this.value=e;var t=this.pad,i=this.index;e>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,t,this,e),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,i,e,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,t,this,e),this.pad.emit(n.GAMEPAD_BUTTON_UP,i,e,this))},destroy:function(){this.pad=null,this.events=null}})},99125:(e,t,i)=>{var r=i(97421),n=i(28884),s=i(83419),a=i(50792),o=i(26099);e.exports=new s({Extends:a,initialize:function(e,t){a.call(this),this.manager=e,this.pad=t,this.id=t.id,this.index=t.index;for(var i=[],s=0;s<t.buttons.length;s++)i.push(new n(this,s));this.buttons=i;var h=[];for(s=0;s<t.axes.length;s++)h.push(new r(this,s));this.axes=h,this.vibration=t.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:c,this._LCRight=i[15]?i[15]:c,this._LCTop=i[12]?i[12]:c,this._LCBottom=i[13]?i[13]:c,this._RCLeft=i[2]?i[2]:c,this._RCRight=i[1]?i[1]:c,this._RCTop=i[3]?i[3]:c,this._RCBottom=i[0]?i[0]:c,this._FBLeftTop=i[4]?i[4]:c,this._FBLeftBottom=i[6]?i[6]:c,this._FBRightTop=i[5]?i[5]:c,this._FBRightBottom=i[7]?i[7]:c;var l={value:0};this._HAxisLeft=h[0]?h[0]:l,this._VAxisLeft=h[1]?h[1]:l,this._HAxisRight=h[2]?h[2]:l,this._VAxisRight=h[3]?h[3]:l,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(e){return this.axes[e].getValue()},setAxisThreshold:function(e){for(var t=0;t<this.axes.length;t++)this.axes[t].threshold=e},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(e){return this.buttons[e].value},isButtonDown:function(e){return this.buttons[e].pressed},update:function(e){if(!(e.timestamp<this._created)){var t,i=this.buttons,r=e.buttons,n=i.length;for(t=0;t<n;t++)i[t].update(r[t].value);var s=this.axes,a=e.axes;for(t=0,n=s.length;t<n;t++)s[t].update(a[t]);n>=2&&(this.leftStick.set(s[0].getValue(),s[1].getValue()),n>=4&&this.rightStick.set(s[2].getValue(),s[3].getValue()))}},destroy:function(){var e;for(this.removeAllListeners(),this.manager=null,this.pad=null,e=0;e<this.buttons.length;e++)this.buttons[e].destroy();for(e=0;e<this.axes.length;e++)this.axes[e].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}})},56654:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(92734),a=i(99125),o=i(35154),h=i(89639),c=i(8214),l=new r({Extends:n,initialize:function(e){n.call(this),this.scene=e.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=e,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,e.pluginEvents.once(c.BOOT,this.boot,this),e.pluginEvents.on(c.START,this.start,this)},boot:function(){var e=this.scene.sys.game,t=this.settings.input,i=e.config;this.enabled=o(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads,this.target=o(t,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,t=this.target,i=function(t){!t.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(t))};this.onGamepadHandler=i,t.addEventListener("gamepadconnected",i,!1),t.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(e)for(var t=this.gamepads,i=0;i<e.length;i++){var r=e[i];if(r){var n=r.id,s=r.index,o=t[s];if(o)o.id!==n?(o.destroy(),t[s]=new a(this,r)):o.update(r);else{var h=new a(this,r);t[s]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}else this.disconnectAll()},getAll:function(){for(var e=[],t=this.gamepads,i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e},getPad:function(e){for(var t=this.gamepads,i=0;i<t.length;i++)if(t[i]&&t[i].index===e)return t[i]},update:function(){if(this.enabled){this.refreshPads();var e=this.queue.length;if(0!==e)for(var t=this.queue.splice(0,e),i=0;i<e;i++){var r=t[i],n=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(s.CONNECTED,n,r):"gamepaddisconnected"===r.type&&this.emit(s.DISCONNECTED,n,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",l,"gamepad","gamepad","inputGamepad"),e.exports=l},89651:e=>{e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:e=>{e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:e=>{e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(e,t,i)=>{e.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:e=>{e.exports="down"},7629:e=>{e.exports="up"},42206:e=>{e.exports="connected"},86544:e=>{e.exports="disconnected"},94784:e=>{e.exports="down"},14325:e=>{e.exports="up"},92734:(e,t,i)=>{e.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(e,t,i)=>{e.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(e,t,i)=>{var r=i(93301),n=i(79291),s={CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)};e.exports=s=n(!1,s,r)},78970:(e,t,i)=>{var r=i(72905),n=i(83419),s=i(8443),a=i(8214),o=i(46032),h=i(29747);e.exports=new n({initialize:function(e){this.manager=e,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,e.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.addCapture(e.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var e=this;this.onKeyDown=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager){e.queue.push(t),e.manager.events.emit(a.MANAGER_PROCESS);var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;e.preventDefault&&!i&&e.captures.indexOf(t.keyCode)>-1&&t.preventDefault()}},this.onKeyUp=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager){e.queue.push(t),e.manager.events.emit(a.MANAGER_PROCESS);var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;e.preventDefault&&!i&&e.captures.indexOf(t.keyCode)>-1&&t.preventDefault()}};var t=this.target;t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1),e.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(e){"string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var r=e[i];"string"==typeof r&&(r=o[r.trim().toUpperCase()]),-1===t.indexOf(r)&&t.push(r)}this.preventDefault=t.length>0},removeCapture:function(e){"string"==typeof e&&(e=e.split(",")),Array.isArray(e)||(e=[e]);for(var t=this.captures,i=0;i<e.length;i++){var n=e[i];"string"==typeof n&&(n=o[n.toUpperCase()]),r(t,n)}this.preventDefault=t.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}})},28846:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(95922),a=i(8443),o=i(35154),h=i(8214),c=i(89639),l=i(30472),d=i(46032),u=i(87960),f=i(74600),p=i(44594),g=i(56583),m=new r({Extends:n,initialize:function(e){n.call(this),this.game=e.systems.game,this.scene=e.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=e,this.manager=e.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,e.pluginEvents.once(h.BOOT,this.boot,this),e.pluginEvents.on(h.START,this.start,this)},boot:function(){var e=this.settings.input;this.enabled=o(e,"keyboard",!0);var t=o(e,"keyboard.capture",null);t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(e){return this.manager.addCapture(e),this},removeCapture:function(e){return this.manager.removeCapture(e),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var r={};if("string"==typeof e){e=e.split(",");for(var n=0;n<e.length;n++){var s=e[n].trim();s&&(r[s]=this.addKey(s,t,i))}}else for(var a in e)r[a]=this.addKey(e[a],t,i);return r},addKey:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var r=this.keys;if(e instanceof l){var n=r.indexOf(e);return n>-1?r[n]=e:r[e.keyCode]=e,t&&this.addCapture(e.keyCode),e.setEmitOnRepeat(i),e}return"string"==typeof e&&(e=d[e.toUpperCase()]),r[e]||(r[e]=new l(this,e),t&&this.addCapture(e),r[e].setEmitOnRepeat(i)),r[e]},removeKey:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r,n=this.keys;if(e instanceof l){var s=n.indexOf(e);s>-1&&(r=this.keys[s],this.keys[s]=void 0)}else"string"==typeof e&&(e=d[e.toUpperCase()]);return n[e]&&(r=n[e],n[e]=void 0),r&&(r.plugin=null,i&&this.removeCapture(r.keyCode),t&&r.destroy()),this},removeAllKeys:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var i=this.keys,r=0;r<i.length;r++){var n=i[r];n&&(i[r]=void 0,t&&this.removeCapture(n.keyCode),e&&n.destroy())}return this},createCombo:function(e,t){return new u(this,e,t)},checkDown:function(e,t){if(void 0===t&&(t=0),this.enabled&&e.isDown){var i=g(this.time-e.timeDown,t);if(i>e._tick)return e._tick=i,!0}return!1},update:function(){var e=this.manager.queue,t=e.length;if(this.isActive()&&0!==t)for(var i=this.keys,r=0;r<t;r++){var n=e[r],a=n.keyCode,o=i[a],h=!1;void 0===n.cancelled&&(n.cancelled=0,n.stopImmediatePropagation=function(){n.cancelled=1},n.stopPropagation=function(){n.cancelled=-1}),-1!==n.cancelled&&(a!==this.prevCode||n.timeStamp!==this.prevTime||n.type!==this.prevType)&&(this.prevCode=a,this.prevTime=n.timeStamp,this.prevType=n.type,"keydown"===n.type?(o&&(h=o.isDown,o.onDown(n)),n.cancelled||o&&h||(f[a]&&this.emit(s.KEY_DOWN+f[a],n),n.cancelled||this.emit(s.ANY_KEY_DOWN,n))):(o&&o.onUp(n),!n.cancelled&&(f[a]&&this.emit(s.KEY_UP+f[a],n),n.cancelled||this.emit(s.ANY_KEY_UP,n))),1===n.cancelled&&(n.cancelled=0))}},resetKeys:function(){for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++)e[t]&&e[t].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),e.exports=m},66970:e=>{e.exports=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size||(t.current=t.keyCodes[t.index],!1)}},87960:(e,t,i)=>{var r=i(83419),n=i(95922),s=i(95540),a=i(68769),o=i(92803);e.exports=new r({initialize:function(e,t,i){if(void 0===i&&(i={}),t.length<2)return!1;this.manager=e,this.enabled=!0,this.keyCodes=[];for(var r=0;r<t.length;r++){var h=t[r];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var c=this;this.onKeyDown=function(e){!c.matched&&c.enabled&&a(e,c)&&(c.manager.emit(n.COMBO_MATCH,c,e),c.resetOnMatch?o(c):c.deleteOnMatch&&c.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}})},68769:(e,t,i)=>{var r=i(66970);e.exports=function(e,t){if(t.matched)return!0;var i=!1,n=!1;if(e.keyCode===t.current)if(t.index>0&&t.maxKeyDelay>0){var s=t.timeLastMatched+t.maxKeyDelay;e.timeStamp<=s&&(n=!0,i=r(e,t))}else n=!0,i=r(e,t);return!n&&t.resetOnWrongKey&&(t.index=0,t.current=t.keyCodes[0]),i&&(t.timeLastMatched=e.timeStamp,t.matched=!0,t.timeMatched=e.timeStamp),i}},92803:e=>{e.exports=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e}},92612:e=>{e.exports="keydown"},23345:e=>{e.exports="keyup"},21957:e=>{e.exports="keycombomatch"},44743:e=>{e.exports="down"},3771:e=>{e.exports="keydown-"},46358:e=>{e.exports="keyup-"},75674:e=>{e.exports="up"},95922:(e,t,i)=>{e.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(e,t,i)=>{e.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:e=>{e.exports=function(e,t){void 0===t&&(t=50);var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t}},90229:e=>{e.exports=function(e){return!!e._justDown&&(e._justDown=!1,!0)}},38796:e=>{e.exports=function(e){return!!e._justUp&&(e._justUp=!1,!0)}},30472:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(95922);e.exports=new r({Extends:n,initialize:function(e,t){n.call(this),this.plugin=e,this.keyCode=t,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,e))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}})},46032:e=>{e.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},74600:(e,t,i)=>{var r=i(46032),n={};for(var s in r)n[r[s]]=s;e.exports=n},41170:e=>{e.exports=function(e,t){void 0===t&&(t=50);var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t}},85098:(e,t,i)=>{var r=i(83419),n=i(89357),s=i(8214),a=i(29747);e.exports=new r({initialize:function(e){this.manager=e,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,e.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(n.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(e){var t=this,i=this.manager,r=i.canvas,s=window&&window.focus&&i.game.config.autoFocus;this.onMouseMove=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseMove(e),t.preventDefaultMove&&e.preventDefault())},this.onMouseDown=function(e){s&&window.focus(),!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseDown(e),t.preventDefaultDown&&e.target===r&&e.preventDefault())},this.onMouseDownWindow=function(e){(!e.sourceCapabilities||!e.sourceCapabilities.firesTouchEvents)&&!e.defaultPrevented&&t.enabled&&i&&i.enabled&&e.target!==r&&i.onMouseDown(e)},this.onMouseUp=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onMouseUp(e),t.preventDefaultUp&&e.target===r&&e.preventDefault())},this.onMouseUpWindow=function(e){(!e.sourceCapabilities||!e.sourceCapabilities.firesTouchEvents)&&!e.defaultPrevented&&t.enabled&&i&&i.enabled&&e.target!==r&&i.onMouseUp(e)},this.onMouseOver=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOver(e)},this.onMouseOut=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&i.setCanvasOut(e)},this.onMouseWheel=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&i.onMouseWheel(e),t.preventDefaultWheel&&e.target===r&&e.preventDefault()};var a={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,a),e.addEventListener("mouseout",this.onMouseOut,a),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,a),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,a),window.top.addEventListener("mouseup",this.onMouseUpWindow,a)}catch(e){window.addEventListener("mousedown",this.onMouseDownWindow,a),window.addEventListener("mouseup",this.onMouseUpWindow,a),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(e){var r=t.target;t.locked=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r,i.onPointerLockChange(e)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&((e=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}})},87078:(e,t,i)=>{e.exports={MouseManager:i(85098)}},36210:(e,t,i)=>{var r=i(83419),n=i(8214),s=i(29747);e.exports=new r({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.isTop=!0,e.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this.target;if(e){var t=this,i=this.manager,r=i.canvas,n=window&&window.focus&&i.game.config.autoFocus;this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchStart=function(e){n&&window.focus(),!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onTouchStart(e),t.capture&&e.cancelable&&e.target===r&&e.preventDefault())},this.onTouchStartWindow=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&e.target!==r&&i.onTouchStart(e)},this.onTouchEnd=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onTouchEnd(e),t.capture&&e.cancelable&&e.target===r&&e.preventDefault())},this.onTouchEndWindow=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&e.target!==r&&i.onTouchEnd(e)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&(i.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&i&&i.enabled&&i.onTouchCancel(e)};var s=this.capture,a={passive:!0},o={passive:!1};if(e.addEventListener("touchstart",this.onTouchStart,s?o:a),e.addEventListener("touchmove",this.onTouchMove,s?o:a),e.addEventListener("touchend",this.onTouchEnd,s?o:a),e.addEventListener("touchcancel",this.onTouchCancel,s?o:a),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,o),window.top.addEventListener("touchend",this.onTouchEndWindow,o),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,o)}catch(e){window.addEventListener("touchstart",this.onTouchStartWindow,o),window.addEventListener("touchend",this.onTouchEndWindow,o),window.addEventListener("touchcancel",this.onTouchCancelWindow,o),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),window&&((e=this.isTop?window.top:window).removeEventListener("touchstart",this.onTouchStartWindow),e.removeEventListener("touchend",this.onTouchEndWindow),e.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}})},95618:(e,t,i)=>{e.exports={TouchManager:i(36210)}},41299:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(54899),a=i(95540),o=i(98356),h=i(3374),c=i(84376),l=i(92638),d=new r({initialize:function(e,t){if(this.loader=e,this.cache=a(t,"cache",!1),this.type=a(t,"type",!1),!this.type)throw Error("Invalid File type: "+this.type);this.key=a(t,"key",!1);var i=this.key;if(e.prefix&&""!==e.prefix&&(this.key=e.prefix+i),!this.key)throw Error("Invalid File key: "+this.key);var r=a(t,"url");void 0===r?r=e.path+i+"."+a(t,"extension",""):"string"!=typeof r||r.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(r=e.path+r),this.url=r,this.src="",this.xhrSettings=l(a(t,"responseType",void 0)),a(t,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,a(t,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(t,"config",{}),this.multiFile,this.linkFile,this.base64="string"==typeof r&&0===r.indexOf("data:"),this.retryAttempts=a(t,"maxRetries",e.maxRetries)},setLink:function(e){this.linkFile=e,e.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===n.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=n.FILE_LOADING,this.src=o(this,this.loader.baseURL),!this.src)throw Error("URL Error in File: "+this.key+" from: "+this.url);0===this.src.indexOf("data:")&&(this.base64=!0),this.xhrLoader=c(this,this.loader.xhr)}},onLoad:function(e,t){var i=e.responseURL&&this.loader.localSchemes.some(function(t){return 0===e.responseURL.indexOf(t)})&&0===t.target.status,r=!(t.target&&200!==t.target.status)||i;4===e.readyState&&e.status>=400&&e.status<=599&&(r=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onBase64Load:function(e){this.xhrLoader=e,this.state=n.FILE_LOADED,this.percentComplete=1,this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(e){e.lengthComputable&&(this.bytesLoaded=e.loaded,this.bytesTotal=e.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(e){if(this.state!==n.FILE_PENDING_DESTROY){void 0===e&&(e=this.data);var t=this.key,i=this.type;this.loader.emit(s.FILE_COMPLETE,t,i,e),this.loader.emit(s.FILE_KEY_COMPLETE+i+"-"+t,t,i,e),this.loader.flagForRemoval(this),this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(e,t,i){if("function"==typeof URL)e.src=URL.createObjectURL(t);else{var r=new FileReader;r.onload=function(){e.removeAttribute("crossOrigin"),e.src="data:"+(t.type||i)+";base64,"+r.result.split(",")[1]},r.onerror=e.onerror,r.readAsDataURL(t)}},d.revokeObjectURL=function(e){"function"==typeof URL&&URL.revokeObjectURL(e.src)},e.exports=d},74099:e=>{var t={};e.exports={install:function(e){for(var i in t)e[i]=t[i]},register:function(e,i){t[e]=i},destroy:function(){t={}}}},98356:e=>{e.exports=function(e,t){return!!e.url&&(e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:t+e.url)}},74261:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(35072),a=i(50792),o=i(54899),h=i(74099),c=i(95540),l=i(35154),d=i(41212),u=i(37277),f=i(44594),p=i(92638),g=new r({Extends:a,initialize:function(e){a.call(this);var t=e.sys.game.config,i=e.sys.settings.loader;this.scene=e,this.systems=e.sys,this.cacheManager=e.sys.cache,this.textureManager=e.sys.textures,this.sceneManager=e.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(i,"baseURL",t.loaderBaseURL)),this.setPath(c(i,"path",t.loaderPath)),this.setPrefix(c(i,"prefix",t.loaderPrefix)),this.maxParallelDownloads=c(i,"maxParallelDownloads",t.loaderMaxParallelDownloads),this.xhr=p(c(i,"responseType",t.loaderResponseType),c(i,"async",t.loaderAsync),c(i,"user",t.loaderUser),c(i,"password",t.loaderPassword),c(i,"timeout",t.loaderTimeout),c(i,"withCredentials",t.loaderWithCredentials)),this.crossOrigin=c(i,"crossOrigin",t.loaderCrossOrigin),this.imageLoadType=c(i,"imageLoadType",t.loaderImageLoadType),this.localSchemes=c(i,"localScheme",t.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=c(i,"maxRetries",t.loaderMaxRetries),e.sys.events.once(f.BOOT,this.boot,this),e.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},setBaseURL:function(e){return void 0===e&&(e=""),""!==e&&"/"!==e.substr(-1)&&(e=e.concat("/")),this.baseURL=e,this},setPath:function(e){return void 0===e&&(e=""),""!==e&&"/"!==e.substr(-1)&&(e=e.concat("/")),this.path=e,this},setPrefix:function(e){return void 0===e&&(e=""),this.prefix=e,this},setCORS:function(e){return this.crossOrigin=e,this},addFile:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];!this.keyExists(i)&&(this.list.set(i),this.emit(o.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var t=e.hasCacheConflict();return t||this.list.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),!t&&this.isLoading()&&(this.inflight.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1}),this.queue.iterate(function(i){if(i.type===e.type&&i.key===e.key)return t=!0,!1})),t},addPack:function(e,t){if("string"==typeof t){var i=l(e,t);i&&(e={packKey:i})}var r=0,n=this.baseURL,s=this.path,a=this.prefix;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var h=e[o],d=c(h,"baseURL",n),u=c(h,"path",s),f=c(h,"prefix",a),p=c(h,"files",null),g=c(h,"defaultType","void");if(Array.isArray(p)){this.setBaseURL(d),this.setPath(u),this.setPrefix(f);for(var m=0;m<p.length;m++){var v=p[m],y=v.hasOwnProperty("type")?v.type:g;this[y]&&(this[y](v),r++)}}}return this.setBaseURL(n),this.setPath(s),this.setPrefix(a),r>0},removePack:function(e,t){var i,r=this.systems.anims,n=this.cacheManager,s=this.textureManager,a={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"};if(d(e))i=e;else if(!(i=n.json.get(e)))return void console.warn("Asset Pack not found in JSON cache:",e);for(var o in t&&(i={_:i[t]}),i){var h=i[o],l=c(h,"prefix",""),u=c(h,"files"),f=c(h,"defaultType");if(Array.isArray(u))for(var p=0;p<u.length;p++){var g=u[p],m=g.hasOwnProperty("type")?g.type:f;if(!m){console.warn("No type:",g);continue}var v=l+g.key;if("animation"===m&&r.remove(v),"aseprite"!==m&&"atlas"!==m&&"atlasXML"!==m&&"htmlTexture"!==m&&"image"!==m&&"multiatlas"!==m&&"spritesheet"!==m&&"svg"!==m&&"texture"!==m&&"unityAtlas"!==m||(s.remove(v),a[m])){if("pack"===m){this.removePack(v,g.dataKey);continue}if("spine"===m){var y=n.custom.spine.get(v);if(!y)continue;var b=void 0===y.prefix?"":y.prefix;n.custom.spine.remove(v);var x=n.custom.spineTextures.get(v);if(!x)continue;n.custom.spineTextures.remove(v);for(var E=0;E<x.pages.length;E++){var T=b+x.pages[E].name,A=v+":"+T;s.exists(A)?s.remove(A):s.remove(T)}}var w=a[m];if(null!==w){if(!w){console.warn("Unknown type:",m);continue}n[w].remove(v)}}}}},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(f.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(e){if((e.state===n.FILE_POPULATED||e.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(e),this.list.delete(e),e.crossOrigin||(e.crossOrigin=this.crossOrigin),e.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(e,t){this.inflight&&(this.inflight.delete(e),this.updateProgress(),t?(this.totalComplete++,this.queue.set(e),this.emit(o.FILE_LOAD,e),e.onProcess()):(this.totalFailed++,this._deleteQueue.set(e),this.emit(o.FILE_LOAD_ERROR,e),this.fileProcessComplete(e)))},fileProcessComplete:function(e){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(e.state===n.FILE_ERRORED?e.multiFile&&e.multiFile.onFileFailed(e):e.state===n.FILE_COMPLETE&&(e.multiFile?e.multiFile.isReadyToProcess()&&(e.multiFile.addToCache(),e.multiFile.pendingDestroy()):(e.addToCache(),e.pendingDestroy())),this.queue.delete(e),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(f.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(e){this._deleteQueue.set(e)},saveJSON:function(e,t){return this.save(JSON.stringify(e),t)},save:function(e,t,i){void 0===t&&(t="file.json"),void 0===i&&(i="application/json");var r=new Blob([e],{type:i}),n=URL.createObjectURL(r),s=document.createElement("a");return s.download=t,s.textContent="Download "+t,s.href=n,s.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(c(t,"baseURL",e.loaderBaseURL)),this.setPath(c(t,"path",e.loaderPath)),this.setPrefix(c(t,"prefix",e.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});u.register("Loader",g,"load"),e.exports=g},3374:(e,t,i)=>{var r=i(79291),n=i(92638);e.exports=function(e,t){var i=void 0===e?n():r({},e);if(t)for(var s in t)void 0!==t[s]&&(i[s]=t[s]);return i}},26430:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(54899);e.exports=new r({initialize:function(e,t,i,r){var s=[];r.forEach(function(e){e&&s.push(e)}),this.loader=e,this.type=t,this.key=i;var a=this.key;e.prefix&&""!==e.prefix&&(this.key=e.prefix+a),this.multiKeyIndex=e.multiKeyIndex++,this.files=s,this.state=n.FILE_PENDING,this.complete=!1,this.pending=s.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var o=0;o<s.length;o++)s[o].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(e){return this.files.push(e),e.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(e){-1!==this.files.indexOf(e)&&this.pending--},onFileFailed:function(e){-1!==this.files.indexOf(e)&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,e.type,e.key))},pendingDestroy:function(){if(this.state!==n.FILE_PENDING_DESTROY){var e=this.key,t=this.type;this.loader.emit(s.FILE_COMPLETE,e,t),this.loader.emit(s.FILE_KEY_COMPLETE+t+"-"+e,e,t),this.loader.flagForRemoval(this);for(var i=0;i<this.files.length;i++)this.files[i].pendingDestroy();this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}})},84376:(e,t,i)=>{var r=i(3374);e.exports=function(e,t){var i=r(t,e.xhrSettings);if(e.base64){var n,s=e.url.split(";base64,").pop()||e.url.split(",").pop();n="arraybuffer"===e.xhrSettings.responseType?{response:Uint8Array.from(atob(s),function(e){return e.charCodeAt(0)}).buffer}:{responseText:atob(s)},e.onBase64Load(n);return}var a=new XMLHttpRequest;if(a.open("GET",e.src,i.async,i.user,i.password),a.responseType=e.xhrSettings.responseType,a.timeout=i.timeout,i.headers)for(var o in i.headers)a.setRequestHeader(o,i.headers[o]);return i.header&&i.headerValue&&a.setRequestHeader(i.header,i.headerValue),i.requestedWith&&a.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&a.overrideMimeType(i.overrideMimeType),i.withCredentials&&(a.withCredentials=!0),a.onload=e.onLoad.bind(e,a),a.onerror=e.onError.bind(e,a),a.onprogress=e.onProgress.bind(e),a.ontimeout=e.onError.bind(e,a),a.send(),a}},92638:e=>{e.exports=function(e,t,i,r,n,s){return void 0===e&&(e=""),void 0===t&&(t=!0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===n&&(n=0),void 0===s&&(s=!1),{responseType:e,async:t,user:i,password:r,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}}},23906:e=>{e.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},42155:e=>{e.exports="addfile"},38991:e=>{e.exports="complete"},27540:e=>{e.exports="filecomplete"},87464:e=>{e.exports="filecomplete-"},94486:e=>{e.exports="loaderror"},13035:e=>{e.exports="load"},38144:e=>{e.exports="fileprogress"},97520:e=>{e.exports="postprocess"},85595:e=>{e.exports="progress"},55680:e=>{e.exports="start"},54899:(e,t,i)=>{e.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(518),a=i(54899),o=new r({Extends:s,initialize:function(e,t,i,r,n){s.call(this,e,t,i,r,n),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new o(this,e[n]));else this.addFile(new o(this,e,t,r,i));return this}),e.exports=o},76272:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(518),c=i(26430),l=new r({Extends:c,initialize:function(e,t,i,r,n,l){if(o(t)){var d,u,f=t;d=new a(e,{key:t=s(f,"key"),url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),u=new h(e,{key:t,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else d=new a(e,t,i,n),u=new h(e,t,r,l);d.linkFile?c.call(this,e,"atlasjson",t,[d,u,d.linkFile]):c.call(this,e,"atlasjson",t,[d,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),t.addToCache(),this.complete=!0}}});n.register("aseprite",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=l},38734:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(518),c=i(26430),l=new r({Extends:c,initialize:function(e,t,i,r,n,l){if(o(t)){var d,u,f=t;d=new a(e,{key:t=s(f,"key"),url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),u=new h(e,{key:t,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","json"),xhrSettings:s(f,"atlasXhrSettings")})}else d=new a(e,t,i,n),u=new h(e,t,r,l);d.linkFile?c.call(this,e,"atlasjson",t,[d,u,d.linkFile]):c.call(this,e,"atlasjson",t,[d,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i),this.complete=!0}}});n.register("atlas",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=l},74599:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(26430),c=i(57318),l=new r({Extends:h,initialize:function(e,t,i,r,n,l){if(o(t)){var d,u,f=t;d=new a(e,{key:t=s(f,"key"),url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),u=new c(e,{key:t,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","xml"),xhrSettings:s(f,"atlasXhrSettings")})}else d=new a(e,t,i,n),u=new c(e,t,r,l);d.linkFile?h.call(this,e,"atlasxml",t,[d,u,d.linkFile]):h.call(this,e,"atlasxml",t,[d,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i),this.complete=!0}}});n.register("atlasXML",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=l},21097:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(89749),c=i(41212),l=new r({Extends:s,initialize:function(e,t,i,r,n){if(c(t)){var a=t;t=o(a,"key"),r=o(a,"xhrSettings"),n=o(a,"context",n)}var h={type:"audio",cache:e.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:t,url:i.url,xhrSettings:r,config:{context:n}};s.call(this,e,h)},onProcess:function(){this.state=n.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(t){e.data=t,e.onProcessComplete()},function(t){console.error("Error decoding audio: "+e.key+" - ",t?t.message:null),e.onProcessError()}),this.config.context=null}});l.create=function(e,t,i,r,n){var s=e.systems.game,a=s.config.audio,d=s.device.audio;c(t)&&(i=o(t,"url",[]),r=o(t,"config",{}));var u=l.getAudioURL(s,i);return u?d.webAudio&&!a.disableWebAudio?new l(e,t,u,n,s.sound.context):new h(e,t,u,r):(console.warn('No audio URLs for "%s" can play on this device',t),null)},l.getAudioURL=function(e,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=o(t[i],"url",t[i]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return{url:r,type:""};var n=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=o(t[i],"type",n?n[1]:"").toLowerCase(),e.device.audio[n])return{url:r,type:n}}return null},a.register("audio",function(e,t,i,r){var n,s=this.systems.game,a=s.config.audio,o=s.device.audio;if(a.noAudio||!o.webAudio&&!o.audioData)return this;if(Array.isArray(e))for(var h=0;h<e.length;h++)(n=l.create(this,e[h]))&&this.addFile(n);else(n=l.create(this,e,t,i,r))&&this.addFile(n);return this}),e.exports=l},89524:(e,t,i)=>{var r=i(21097),n=i(83419),s=i(74099),a=i(95540),o=i(41212),h=i(518),c=i(26430),l=new n({Extends:c,initialize:function(e,t,i,n,s,l,d){if(o(t)){var u,f=t;t=a(f,"key"),i=a(f,"jsonURL"),n=a(f,"audioURL"),s=a(f,"audioConfig"),l=a(f,"audioXhrSettings"),d=a(f,"jsonXhrSettings")}if(n){var p=r.create(e,t,n,s,l);p&&(u=new h(e,t,i,d),c.call(this,e,"audiosprite",t,[p,u]),this.config.resourceLoad=!1)}else u=new h(e,t,i,d),c.call(this,e,"audiosprite",t,[u]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=l},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources"))){var t=e.data.resources,i=a(this.config,"audioConfig"),n=a(this.config,"audioXhrSettings"),s=r.create(this.loader,e.key,t,i,n);s&&(this.addToMultiFile(s),this.loader.addFile(s))}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache(),t.addToCache(),this.complete=!0}}});s.register("audioSprite",function(e,t,i,r,n,s){var a,o=this.systems.game,h=o.config.audio,c=o.device.audio;if(h&&h.noAudio||!c.webAudio&&!c.audioData)return this;if(Array.isArray(e))for(var d=0;d<e.length;d++)(a=new l(this,e[d])).files&&this.addFile(a.files);else(a=new l(this,e,t,i,r,n,s)).files&&this.addFile(a.files);return this})},85722:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,n){var a="bin";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),r=o(c,"xhrSettings"),a=o(c,"extension",a),n=o(c,"dataType",n)}var l={type:"binary",cache:e.cacheManager.binary,extension:a,responseType:"arraybuffer",key:t,url:i,xhrSettings:r,config:{dataType:n}};s.call(this,e,l)},onProcess:function(){this.state=n.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new c(this,e[n]));else this.addFile(new c(this,e,t,r,i));return this}),e.exports=c},97025:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(26430),c=i(21859),l=i(57318),d=new r({Extends:h,initialize:function(e,t,i,r,n,c){if(o(t)){var d,u,f=t;d=new a(e,{key:t=s(f,"key"),url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),u=new l(e,{key:t,url:s(f,"fontDataURL"),extension:s(f,"fontDataExtension","xml"),xhrSettings:s(f,"fontDataXhrSettings")})}else d=new a(e,t,i,n),u=new l(e,t,r,c);d.linkFile?h.call(this,e,"bitmapfont",t,[d,u,d.linkFile]):h.call(this,e,"bitmapfont",t,[d,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache();var i=e.cache.get(e.key),r=c(t.data,e.cache.getFrame(e.key),0,0,i);this.loader.cacheManager.bitmapFont.add(e.key,{data:r,texture:e.key,frame:null}),this.complete=!0}}});n.register("bitmapFont",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new d(this,e[a]),this.addFile(s.files);else s=new d(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=d},16024:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r){var n="css";if(h(t)){var a=t;t=o(a,"key"),i=o(a,"url"),r=o(a,"xhrSettings"),n=o(a,"extension",n)}var c={type:"script",cache:!1,extension:n,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new c(this,e[r]));else this.addFile(new c(this,e,t,i));return this}),e.exports=c},69559:(e,t,i)=>{var r=i(38734),n=i(85722),s=i(83419),a=i(74099),o=i(95540),h=i(19550),c=i(41212),l=i(518),d=i(31403),u=i(46975),f=i(59327),p=i(26430),g=i(82038),m=i(55222),v=new s({Extends:p,initialize:function(e,t,i,r){if(i.multiAtlasURL){var s=new l(e,{key:t,url:i.multiAtlasURL,xhrSettings:r,config:i});p.call(this,e,"texture",t,[s])}else{var a=i.textureURL.substr(i.textureURL.length-3);i.type||(i.type="ktx"===a.toLowerCase()?"KTX":"PVR");var o=new n(e,{key:t,url:i.textureURL,extension:a,xhrSettings:r,config:i});if(i.atlasURL){var h=new l(e,{key:t,url:i.atlasURL,xhrSettings:r,config:i});p.call(this,e,"texture",t,[o,h])}else p.call(this,e,"texture",t,[o])}this.config=i},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,this.config.multiAtlasURL)&&"json"===e.type&&e.data.hasOwnProperty("textures")){var t=e.data.textures,i=this.config,r=this.loader,s=r.baseURL,a=r.path,h=r.prefix,c=o(i,"multiBaseURL",this.baseURL),l=o(i,"multiPath",this.path),d=o(i,"prefix",this.prefix),u=o(i,"textureXhrSettings");c&&r.setBaseURL(c),l&&r.setPath(l),d&&r.setPrefix(d);for(var f=0;f<t.length;f++){var p=t[f].image,g="CMA"+this.multiKeyIndex+"_"+p,m=new n(r,g,p,u);if(this.addToMultiFile(m),r.addFile(m),t[f].normalMap){var v=new n(r,g,t[f].normalMap,u);v.type="normalMap",m.setLink(v),this.addToMultiFile(v),r.addFile(v)}}r.setBaseURL(s),r.setPath(a),r.setPrefix(h)}},addToCache:function(){function e(e){console.warn('Compressed Texture Invalid: "'+s.key+'". '+e)}if(this.isReadyToProcess()){var t=this.config;if(t.multiAtlasURL)this.addMultiToCache();else{var i,r=this.loader.systems.renderer,n=this.loader.textureManager,s=this.files[0],a=this.files[1];if("PVR"===t.type?i=g(s.data):"KTX"===t.type&&((i=d(s.data))||e("KTX file contains unsupported format.")),i&&!m(i)&&(e("Texture dimensions failed verification. Check the texture format specifications for "+t.format+" 0x"+i.internalFormat.toString(16)+"."),i=null),i&&!r.supportsCompressedTexture(t.format,i.internalFormat)&&(e("Texture format "+t.format+" with internal format "+i.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),i=null),i){i.format=r.getCompressedTextureName(t.format,i.internalFormat);var o=a&&a.data?a.data:null;n.addCompressedTexture(s.key,i,o)}}this.complete=!0}},addMultiToCache:function(){for(var e,t=this.config,i=this.files[0],r=[],n=[],s=[],a=this.loader.systems.renderer,o=this.loader.textureManager,h=1;h<this.files.length;h++){var c=this.files[h];if("normalMap"!==c.type)for(var l=c.key.indexOf("_"),u=c.key.substr(l+1),f=c.data,p=0;p<i.data.textures.length;p++){var m=i.data.textures[p];if(m.image===u){"PVR"===t.type?e=g(f):"KTX"===t.type&&(e=d(f)),e&&a.supportsCompressedTexture(t.format,e.internalFormat)&&(e.format=a.getCompressedTextureName(t.format,e.internalFormat),n.push(e),r.push(m),c.linkFile&&s.push(c.linkFile.data));break}}}0===s.length&&(s=void 0),o.addAtlasJSONArray(this.key,n,r,s),this.complete=!0}});a.register("texture",function(e,t,i){var n=this.systems.renderer,s=function(e,t,i,s){var a,l={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(c(t)){var d=t;t=o(d,"key"),i=o(d,"url"),s=o(d,"xhrSettings")}var p=!1;for(var g in i)if(n.supportsCompressedTexture(g)){var m=i[g];"string"==typeof m?l.textureURL=m:l=u(m,l),l.format=g.toUpperCase(),p=!0;break}if(p)if("IMG"===l.format)a=l.multiAtlasURL?new f(e,t,l.multiAtlasURL,l.multiPath,l.multiBaseURL,s).files:l.atlasURL?new r(e,t,l.textureURL,l.atlasURL,s).files:new h(e,t,l.textureURL,s),e.addFile(a);else{var y=new v(e,t,l,s);e.addFile(y.files)}else console.warn("No supported compressed texture format or IMG fallback",t)};if(Array.isArray(e))for(var a=0;a<e.length;a++)s(this,e[a]);else s(this,e,t,i);return this}),e.exports=v},87674:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(98356),c=i(41212),l=new r({Extends:s,initialize:function(e,t,i,r,a,h){var l="ttf";if(c(t)){var d=t;t=o(d,"key"),i=o(d,"url"),r=o(d,"format","truetype"),a=o(d,"descriptors",null),h=o(d,"xhrSettings"),l=o(d,"extension",l)}else void 0===r&&(r="truetype");var u={type:"font",cache:!1,extension:l,responseType:"text",key:t,url:i,xhrSettings:h};s.call(this,e,u),this.data={format:r,descriptors:a},this.state=n.FILE_POPULATED},onProcess:function(){this.state=n.FILE_PROCESSING,this.src=h(this,this.loader.baseURL);var e,t=this.key,i="url("+this.src+') format("'+this.data.format+'")';e=this.data.descriptors?new FontFace(t,i,this.data.descriptors):new FontFace(t,i);var r=this;e.load().then(function(){document.fonts.add(e),document.body.classList.add("fonts-loaded"),r.onProcessComplete()}).catch(function(){console.warn("Font failed to load",i),r.onProcessComplete()})}});a.register("font",function(e,t,i,r,n){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new l(this,e[s]));else this.addFile(new l(this,e,t,i,r,n));return this}),e.exports=l},47931:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=i(73894),l=new r({Extends:s,initialize:function(e,t,i,r,n){var a="glsl";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),r=o(c,"shaderType","fragment"),n=o(c,"xhrSettings"),a=o(c,"extension",a)}else void 0===r&&(r="fragment");var l={type:"glsl",cache:e.cacheManager.shader,extension:a,responseType:"text",key:t,url:i,config:{shaderType:r},xhrSettings:n};s.call(this,e,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.split("\n"),t=this.extractBlock(e,0);if(t)for(;t;){var i=this.getShaderName(t.header),r=this.getShaderType(t.header),n=this.getShaderUniforms(t.header),s=t.shader;if(this.cache.has(i)){var a=this.cache.get(i);"fragment"===r?a.fragmentSrc=s:a.vertexSrc=s,a.uniforms||(a.uniforms=n)}else"fragment"===r?this.cache.add(i,new c(i,s,"",n)):this.cache.add(i,new c(i,"",s,n));t=this.extractBlock(e,t.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data))},getShaderName:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(e){for(var t=0;t<e.length;t++){var i=e[t].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i].trim();if("uniform."===r.substring(0,8)){var n=r.indexOf(":");if(n){var s=r.substring(8,n);try{t[s]=JSON.parse(r.substring(n+1))}catch(e){console.warn("Invalid uniform JSON: "+s)}}}}return t},extractBlock:function(e,t){for(var i=-1,r=-1,n=-1,s=!1,a=!1,o=[],h=[],c=t;c<e.length;c++){var l=e[c].trim();if("---"===l)if(-1===i)i=c,s=!0;else if(s)r=c,s=!1,a=!0;else{a=!1;break}else s?o.push(l):a&&(h.push(l),n=c)}return s||-1===r?null:{header:o,shader:h.join("\n"),offset:n}}});a.register("glsl",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new l(this,e[n]));else this.addFile(new l(this,e,t,i,r));return this}),e.exports=l},89749:(e,t,i)=>{var r=i(83419),n=i(54899),s=i(41299),a=i(95540),o=i(98356),h=i(41212);e.exports=new r({Extends:s,initialize:function(e,t,i,r){if(h(t)){var n=t;t=a(n,"key"),r=a(n,"config",r)}var o={type:"audio",cache:e.cacheManager.audio,extension:i.type,key:t,url:i.url,config:r};s.call(this,e,o),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];t.oncanplaythrough=null,t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(e){var t=e.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var t=0;t<e;t++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+t).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(t=0;t<this.data.length;t++)(i=this.data[t]).src=o(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}})},88470:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r){var n="html";if(h(t)){var a=t;t=o(a,"key"),i=o(a,"url"),r=o(a,"xhrSettings"),n=o(a,"extension",n)}var c={type:"text",cache:e.cacheManager.html,extension:n,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new c(this,e[r]));else this.addFile(new c(this,e,t,i));return this}),e.exports=c},14643:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,n,a){void 0===r&&(r=512),void 0===n&&(n=512);var c="html";if(h(t)){var l=t;t=o(l,"key"),i=o(l,"url"),a=o(l,"xhrSettings"),c=o(l,"extension",c),r=o(l,"width",r),n=o(l,"height",n)}var d={type:"html",cache:e.textureManager,extension:c,responseType:"text",key:t,url:i,xhrSettings:a,config:{width:r,height:n}};s.call(this,e,d)},onProcess:function(){this.state=n.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push('<svg width="'+e+'px" height="'+t+'px" viewBox="0 0 '+e+" "+t+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>");var r=[i.join("\n")],a=this;try{var o=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(e){a.state=n.FILE_ERRORED,a.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(a.data),a.onProcessError()},s.createObjectURL(this.data,o,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("htmlTexture",function(e,t,i,r,n){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new c(this,e[s]));else this.addFile(new c(this,e,t,i,r,n));return this}),e.exports=c},19550:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=i(98356),l=new r({Extends:s,initialize:function e(t,i,r,n,a){var c,l="png";if(h(i)){var d=i;i=o(d,"key"),r=o(d,"url"),c=o(d,"normalMap"),n=o(d,"xhrSettings"),l=o(d,"extension",l),a=o(d,"frameConfig")}Array.isArray(r)&&(c=r[1],r=r[0]);var u={type:"image",cache:t.textureManager,extension:l,responseType:"blob",key:i,url:r,xhrSettings:n,config:a};if(s.call(this,t,u),c){var f=new e(t,this.key,c,n,a);f.type="normalMap",this.setLink(f),t.addFile(f)}this.useImageElementLoad="HTMLImageElement"===t.imageLoadType||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){s.revokeObjectURL(e.data),e.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(e.data),e.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var e=this.state;this.state=n.FILE_PROCESSING,e===n.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=n.FILE_LOADING,this.src=c(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){e.state=n.FILE_LOADED,e.loader.nextFile(e,!0)},this.data.onerror=function(){e.loader.nextFile(e,!1)},this.data.src=this.src},addToCache:function(){var e=this.linkFile;e?e.state>=n.FILE_COMPLETE&&("spritesheet"===e.type?e.addToCache():"normalMap"===this.type?this.cache.addImage(this.key,e.data,this.data):this.cache.addImage(this.key,this.data,e.data)):this.cache.addImage(this.key,this.data)}});a.register("image",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i));return this}),e.exports=l},518:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(35154),c=i(41212),l=new r({Extends:s,initialize:function(e,t,i,r,a){var l="json";if(c(t)){var d=t;t=o(d,"key"),i=o(d,"url"),r=o(d,"xhrSettings"),l=o(d,"extension",l),a=o(d,"dataKey",a)}var u={type:"json",cache:e.cacheManager.json,extension:l,responseType:"text",key:t,url:i,xhrSettings:r,config:a};s.call(this,e,u),c(i)&&(a?this.data=h(i,a):this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var e=JSON.parse(this.xhrLoader.responseText)}catch(e){throw this.onProcessError(),e}var t=this.config;"string"==typeof t?this.data=h(e,t,e):this.data=e}this.onProcessComplete()}});a.register("json",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new l(this,e[n]));else this.addFile(new l(this,e,t,r,i));return this}),e.exports=l},59327:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(518),c=i(26430),l=new r({Extends:c,initialize:function(e,t,i,r,n,a,l){if(o(t)){var d=t;t=s(d,"key"),i=s(d,"url",!1)?s(d,"url"):s(d,"atlasURL"),a=s(d,"xhrSettings"),r=s(d,"path"),n=s(d,"baseURL"),l=s(d,"textureXhrSettings")}var u=new h(e,t,i,a);c.call(this,e,"multiatlas",t,[u]),this.config.path=r,this.config.baseURL=n,this.config.textureXhrSettings=l},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,"json"===e.type&&e.data.hasOwnProperty("textures"))){var t=e.data.textures,i=this.config,r=this.loader,n=r.baseURL,o=r.path,h=r.prefix,c=s(i,"baseURL",this.baseURL),l=s(i,"path",this.path),d=s(i,"prefix",this.prefix),u=s(i,"textureXhrSettings");r.setBaseURL(c),r.setPath(l),r.setPrefix(d);for(var f=0;f<t.length;f++){var p=t[f].image,g="MA"+this.multiKeyIndex+"_"+p,m=new a(r,g,p,u);if(this.addToMultiFile(m),r.addFile(m),t[f].normalMap){var v=new a(r,g,t[f].normalMap,u);v.type="normalMap",m.setLink(v),this.addToMultiFile(v),r.addFile(v)}}r.setBaseURL(n),r.setPath(o),r.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var e=this.files[0],t=[],i=[],r=[],n=1;n<this.files.length;n++){var s=this.files[n];if("normalMap"!==s.type)for(var a=s.key.indexOf("_"),o=s.key.substr(a+1),h=s.data,c=0;c<e.data.textures.length;c++){var l=e.data.textures[c];if(l.image===o){i.push(h),t.push(l),s.linkFile&&r.push(s.linkFile.data);break}}}0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,t,r),this.complete=!0}}});n.register("multiatlas",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=l},99297:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(41212),o=i(26430),h=i(34328),c=new r({Extends:o,initialize:function(e,t,i,r){var n="js",c=[];if(a(t)){var l=t;t=s(l,"key"),i=s(l,"url"),r=s(l,"xhrSettings"),n=s(l,"extension",n)}Array.isArray(i)||(i=[i]);for(var d=0;d<i.length;d++){var u=new h(e,{key:t+"_"+d.toString(),url:i[d],extension:n,xhrSettings:r});u.onProcess=function(){this.onProcessComplete()},c.push(u)}o.call(this,e,"scripts",t,c)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=t.xhrLoader.responseText,document.head.appendChild(t.data)}this.complete=!0}}});n.register("scripts",function(e,t,i){var r;if(Array.isArray(e))for(var n=0;n<e.length;n++)r=new c(this,e[n]),this.addFile(r.files);else r=new c(this,e,t,i),this.addFile(r.files);return this}),e.exports=c},41846:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(41212),o=i(26430),h=i(85048),c=i(61485),l=i(78776),d=new r({Extends:o,initialize:function(e,t,i,r,n,h){var c,d,u=e.cacheManager.obj;if(a(t)){var f=t;c=new l(e,{key:t=s(f,"key"),type:"obj",cache:u,url:s(f,"url"),extension:s(f,"extension","obj"),xhrSettings:s(f,"xhrSettings"),config:{flipUV:s(f,"flipUV",n)}}),(r=s(f,"matURL"))&&(d=new l(e,{key:t,type:"mat",cache:u,url:r,extension:s(f,"matExtension","mat"),xhrSettings:s(f,"xhrSettings")}))}else c=new l(e,{key:t,url:i,type:"obj",cache:u,extension:"obj",xhrSettings:h,config:{flipUV:n}}),r&&(d=new l(e,{key:t,url:r,type:"mat",cache:u,extension:"mat",xhrSettings:h}));o.call(this,e,"obj",t,[c,d])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=h(e.data,e.config.flipUV);t&&(i.materials=c(t.data)),e.cache.add(e.key,i),this.complete=!0}}});n.register("obj",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new d(this,e[a]),this.addFile(s.files);else s=new d(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=d},58610:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(74099),a=i(518),o=new r({Extends:a,initialize:function(e,t,i,r,n){a.call(this,e,t,i,r,n),this.type="packfile"},onProcess:function(){if(this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var e={};e[this.config]=this.data,this.data=e}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new o(this,e[n]));else this.addFile(new o(this,e,t,r,i));return this}),e.exports=o},48988:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,a,c){var l="js";if(h(t)){var d=t;t=o(d,"key"),i=o(d,"url"),c=o(d,"xhrSettings"),l=o(d,"extension",l),r=o(d,"start"),a=o(d,"mapping")}var u={type:"plugin",cache:!1,extension:l,responseType:"text",key:t,url:i,xhrSettings:c,config:{start:r,mapping:a}};s.call(this,e,u),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=o(t,"start",!1),r=o(t,"mapping",null);if(this.state===n.FILE_POPULATED)e.install(this.key,this.data,i,r);else{this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var s=e.install(this.key,window[this.key],i,r);(i||r)&&(this.loader.systems[r]=s,this.loader.scene[r]=s)}this.onProcessComplete()}});a.register("plugin",function(e,t,i,r,n){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new c(this,e[s]));else this.addFile(new c(this,e,t,i,r,n));return this}),e.exports=c},67397:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,n){var a="svg";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),r=o(c,"svgConfig",{}),n=o(c,"xhrSettings"),a=o(c,"extension",a)}var l={type:"svg",cache:e.textureManager,extension:a,responseType:"text",key:t,url:i,xhrSettings:n,config:{width:o(r,"width"),height:o(r,"height"),scale:o(r,"scale")}};s.call(this,e,l)},onProcess:function(){this.state=n.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,r=this.config.height,a=this.config.scale;e:if(i&&r||a){var o=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("svg")[0],h=o.hasAttribute("viewBox"),c=parseFloat(o.getAttribute("width")),l=parseFloat(o.getAttribute("height"));if(!h&&c&&l)o.setAttribute("viewBox","0  0 "+c+" "+l);else if(h&&!c&&!l){var d=o.getAttribute("viewBox").split(/\s+|,/);c=d[2],l=d[3]}if(a)if(c&&l)i=c*a,r=l*a;else break e;o.setAttribute("width",i.toString()+"px"),o.setAttribute("height",r.toString()+"px"),t=[new XMLSerializer().serializeToString(o)]}try{var u=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(e){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this,p=!1;this.data.onload=function(){p||s.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){p?f.onProcessError():(p=!0,s.revokeObjectURL(f.data),f.data.src="data:image/svg+xml,"+encodeURIComponent(t.join("")))},s.createObjectURL(this.data,u,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("svg",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new c(this,e[n]));else this.addFile(new c(this,e,t,i,r));return this}),e.exports=c},88423:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r){var n="js";if(h(t)){var a=t;t=o(a,"key"),i=o(a,"url"),r=o(a,"xhrSettings"),n=o(a,"extension",n)}var c={type:"text",extension:n,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),t=eval;this.loader.sceneManager.add(this.key,t(e)),this.complete=!0}});a.register("sceneFile",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new c(this,e[r]));else this.addFile(new c(this,e,t,i));return this}),e.exports=c},56812:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,a,c){var l="js";if(h(t)){var d=t;t=o(d,"key"),i=o(d,"url"),c=o(d,"xhrSettings"),l=o(d,"extension",l),r=o(d,"systemKey"),a=o(d,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:l,responseType:"text",key:t,url:i,xhrSettings:c,config:{systemKey:r,sceneKey:a}};s.call(this,e,u),"function"==typeof i&&(this.data=i,this.state=n.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,t=this.config,i=this.key,r=o(t,"systemKey",i),s=o(t,"sceneKey",i);this.state===n.FILE_POPULATED?e.installScenePlugin(r,this.data,s,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(r,window[this.key],s,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(e,t,i,r,n){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new c(this,e[s]));else this.addFile(new c(this,e,t,i,r,n));return this}),e.exports=c},34328:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r,n){var a="js";if(h(t)){var c=t;t=o(c,"key"),i=o(c,"url"),r=o(c,"type","script"),n=o(c,"xhrSettings"),a=o(c,"extension",a)}else void 0===r&&(r="script");var l={type:r,cache:!1,extension:a,responseType:"text",key:t,url:i,xhrSettings:n};s.call(this,e,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new c(this,e[n]));else this.addFile(new c(this,e,t,i,r));return this}),e.exports=c},85035:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(74099),a=i(19550),o=new r({Extends:a,initialize:function(e,t,i,r,n){a.call(this,e,t,i,n,r),this.type="spritesheet"},addToCache:function(){var e=this.linkFile;e?e.state>=n.FILE_COMPLETE&&("normalMap"===this.type?this.cache.addSpriteSheet(this.key,e.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,e.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});s.register("spritesheet",function(e,t,i,r){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.addFile(new o(this,e[n]));else this.addFile(new o(this,e,t,i,r));return this}),e.exports=o},78776:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=new r({Extends:s,initialize:function(e,t,i,r){var n="text",a="txt",c=e.cacheManager.text;if(h(t)){var l=t;t=o(l,"key"),i=o(l,"url"),r=o(l,"xhrSettings"),a=o(l,"extension",a),n=o(l,"type",n),c=o(l,"cache",c)}var d={type:n,cache:c,extension:a,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,d)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new c(this,e[r]));else this.addFile(new c(this,e,t,i));return this}),e.exports=c},49477:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=i(80341),l=new r({Extends:s,initialize:function(e,t,i,r){var n="csv";if(h(t)){var a=t;t=o(a,"key"),i=o(a,"url"),r=o(a,"xhrSettings"),n=o(a,"extension",n)}var l={type:"tilemapCSV",cache:e.cacheManager.tilemap,extension:n,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,l),this.tilemapFormat=c.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e)}});a.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i));return this}),e.exports=l},40807:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(518),a=i(80341),o=new r({Extends:s,initialize:function(e,t,i,r){s.call(this,e,t,i,r),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,e)}});n.register("tilemapImpact",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new o(this,e[r]));else this.addFile(new o(this,e,t,i));return this}),e.exports=o},56775:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(518),a=i(80341),o=new r({Extends:s,initialize:function(e,t,i,r){s.call(this,e,t,i,r),this.type="tilemapJSON",this.cache=e.cacheManager.tilemap},addToCache:function(){var e={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,e)}});n.register("tilemapTiledJSON",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new o(this,e[r]));else this.addFile(new o(this,e,t,i));return this}),e.exports=o},25771:(e,t,i)=>{var r=i(83419),n=i(74099),s=i(95540),a=i(19550),o=i(41212),h=i(26430),c=i(78776),l=new r({Extends:h,initialize:function(e,t,i,r,n,l){if(o(t)){var d,u,f=t;d=new a(e,{key:t=s(f,"key"),url:s(f,"textureURL"),extension:s(f,"textureExtension","png"),normalMap:s(f,"normalMap"),xhrSettings:s(f,"textureXhrSettings")}),u=new c(e,{key:t,url:s(f,"atlasURL"),extension:s(f,"atlasExtension","txt"),xhrSettings:s(f,"atlasXhrSettings")})}else d=new a(e,t,i,n),u=new c(e,t,r,l);d.linkFile?h.call(this,e,"unityatlas",t,[d,u,d.linkFile]):h.call(this,e,"unityatlas",t,[d,u])},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i),this.complete=!0}}});n.register("unityAtlas",function(e,t,i,r,n){var s;if(Array.isArray(e))for(var a=0;a<e.length;a++)s=new l(this,e[a]),this.addFile(s.files);else s=new l(this,e,t,i,r,n),this.addFile(s.files);return this}),e.exports=l},33720:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(98356),h=i(95540),c=i(41212),l=new r({Extends:s,initialize:function(e,t,i,r){if(void 0===r&&(r=!1),c(t)){var n=t;t=h(n,"key"),i=h(n,"url",[]),r=h(n,"noAudio",!1)}var a=e.systems.game.device.video.getVideoURL(i);a||console.warn("VideoFile: No supported format for "+t);var o={type:"video",cache:e.cacheManager.video,extension:a.type,key:t,url:a.url,config:{noAudio:r}};s.call(this,e,o)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=o(this,this.loader.baseURL),this.state=n.FILE_LOADED,this.loader.nextFile(this,!0)}});a.register("video",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i));return this}),e.exports=l},57318:(e,t,i)=>{var r=i(83419),n=i(23906),s=i(41299),a=i(74099),o=i(95540),h=i(41212),c=i(56836),l=new r({Extends:s,initialize:function(e,t,i,r){var n="xml";if(h(t)){var a=t;t=o(a,"key"),i=o(a,"url"),r=o(a,"xhrSettings"),n=o(a,"extension",n)}var c={type:"xml",cache:e.cacheManager.xml,extension:n,responseType:"text",key:t,url:i,xhrSettings:r};s.call(this,e,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});a.register("xml",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new l(this,e[r]));else this.addFile(new l(this,e,t,i));return this}),e.exports=l},64589:(e,t,i)=>{e.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),FontFile:i(87674),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(e,t,i)=>{var r=i(23906),n=i(79291),s={Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)};e.exports=s=n(!1,s,r)},53307:e=>{e.exports=function(e){for(var t=0,i=0;i<e.length;i++)t+=+e[i];return t/e.length}},85710:(e,t,i)=>{var r=i(6411);e.exports=function(e,t){return r(e)/r(t)/r(e-t)}},30976:e=>{e.exports=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},87842:e=>{e.exports=function(e,t,i,r,n){var s=(r-t)*.5,a=(n-i)*.5,o=e*e;return e*o*(2*i-2*r+s+a)+(-3*i+3*r-2*s-a)*o+s*e+i}},26302:e=>{e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var r=Math.pow(i,-t);return Math.ceil(e*r)/r}},45319:e=>{e.exports=function(e,t,i){return Math.max(t,Math.min(i,e))}},39506:(e,t,i)=>{var r=i(36383);e.exports=function(e){return e*r.DEG_TO_RAD}},61241:e=>{e.exports=function(e,t){return Math.abs(e-t)}},38857:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(37867),a=i(29747),o=new s,h=new n({initialize:function e(t,i,r,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=e.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=n,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback(this)}},set:function(e,t,i,r){return void 0===r&&(r=this._order),this._x=e,this._y=t,this._z=i,this._order=r,this.onChangeCallback(this),this},copy:function(e){return this.set(e.x,e.y,e.z,e.order)},setFromQuaternion:function(e,t,i){return void 0===t&&(t=this._order),void 0===i&&(i=!1),o.fromQuat(e),this.setFromRotationMatrix(o,t,i)},setFromRotationMatrix:function(e,t,i){void 0===t&&(t=this._order),void 0===i&&(i=!1);var n=e.val,s=n[0],a=n[4],o=n[8],h=n[1],c=n[5],l=n[9],d=n[2],u=n[6],f=n[10],p=0,g=0,m=0;switch(t){case"XYZ":g=Math.asin(r(o,-1,1)),.99999>Math.abs(o)?(p=Math.atan2(-l,f),m=Math.atan2(-a,s)):p=Math.atan2(u,c);break;case"YXZ":p=Math.asin(-r(l,-1,1)),.99999>Math.abs(l)?(g=Math.atan2(o,f),m=Math.atan2(h,c)):g=Math.atan2(-d,s);break;case"ZXY":p=Math.asin(r(u,-1,1)),.99999>Math.abs(u)?(g=Math.atan2(-d,f),m=Math.atan2(-a,c)):m=Math.atan2(h,s);break;case"ZYX":g=Math.asin(-r(d,-1,1)),.99999>Math.abs(d)?(p=Math.atan2(u,f),m=Math.atan2(h,s)):m=Math.atan2(-a,c);break;case"YZX":m=Math.asin(r(h,-1,1)),.99999>Math.abs(h)?(p=Math.atan2(-l,c),g=Math.atan2(-d,s)):g=Math.atan2(o,f);break;case"XZY":m=Math.asin(-r(a,-1,1)),.99999>Math.abs(a)?(p=Math.atan2(u,c),g=Math.atan2(o,s)):p=Math.atan2(-l,f)}return this._x=p,this._y=g,this._z=m,this._order=t,i&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",e.exports=h},6411:e=>{e.exports=function(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t}},99472:e=>{e.exports=function(e,t){return Math.random()*(t-e)+e}},77623:e=>{e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var r=Math.pow(i,-t);return Math.floor(e*r)/r}},62945:(e,t,i)=>{var r=i(45319);e.exports=function(e,t,i){return(i-t)*(e=r(e,0,1))+t}},38265:e=>{e.exports=function(e,t){return e/t/1e3}},78702:e=>{e.exports=function(e){return e==parseFloat(e)?!(e%2):void 0}},94883:e=>{e.exports=function(e){return e===parseFloat(e)?!(e%2):void 0}},28915:e=>{e.exports=function(e,t,i){return(t-e)*i+e}},94908:e=>{e.exports=function(e,t,i){return void 0===i&&(i=0),e.clone().lerp(t,i)}},94434:(e,t,i)=>{var r=new(i(83419))({initialize:function(e){this.val=new Float32Array(9),e?this.copy(e):this.identity()},clone:function(){return new r(this)},set:function(e){return this.copy(e)},copy:function(e){var t=this.val,i=e.val;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},fromMat4:function(e){var t=e.val,i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],this},fromArray:function(e){var t=this.val;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},identity:function(){var e=this.val;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[5];return e[1]=e[3],e[2]=e[6],e[3]=t,e[5]=e[7],e[6]=i,e[7]=r,this},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8],l=c*s-a*h,d=-c*n+a*o,u=h*n-s*o,f=t*l+i*d+r*u;return f?(f=1/f,e[0]=l*f,e[1]=(-c*i+r*h)*f,e[2]=(a*i-r*s)*f,e[3]=d*f,e[4]=(c*t-r*o)*f,e[5]=(-a*t+r*n)*f,e[6]=u*f,e[7]=(-h*t+i*o)*f,e[8]=(s*t-i*n)*f,this):null},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8];return e[0]=s*c-a*h,e[1]=r*h-i*c,e[2]=i*a-r*s,e[3]=a*o-n*c,e[4]=t*c-r*o,e[5]=r*n-t*a,e[6]=n*h-s*o,e[7]=i*o-t*h,e[8]=t*s-i*n,this},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8];return t*(c*s-a*h)+i*(-c*n+a*o)+r*(h*n-s*o)},multiply:function(e){var t=this.val,i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],c=t[7],l=t[8],d=e.val,u=d[0],f=d[1],p=d[2],g=d[3],m=d[4],v=d[5],y=d[6],b=d[7],x=d[8];return t[0]=u*i+f*s+p*h,t[1]=u*r+f*a+p*c,t[2]=u*n+f*o+p*l,t[3]=g*i+m*s+v*h,t[4]=g*r+m*a+v*c,t[5]=g*n+m*o+v*l,t[6]=y*i+b*s+x*h,t[7]=y*r+b*a+x*c,t[8]=y*n+b*o+x*l,this},translate:function(e){var t=this.val,i=e.x,r=e.y;return t[6]=i*t[0]+r*t[3]+t[6],t[7]=i*t[1]+r*t[4]+t[7],t[8]=i*t[2]+r*t[5]+t[8],this},rotate:function(e){var t=this.val,i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=Math.sin(e),c=Math.cos(e);return t[0]=c*i+h*s,t[1]=c*r+h*a,t[2]=c*n+h*o,t[3]=c*s-h*i,t[4]=c*a-h*r,t[5]=c*o-h*n,this},scale:function(e){var t=this.val,i=e.x,r=e.y;return t[0]=i*t[0],t[1]=i*t[1],t[2]=i*t[2],t[3]=r*t[3],t[4]=r*t[4],t[5]=r*t[5],this},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,n=e.w,s=t+t,a=i+i,o=r+r,h=t*s,c=t*a,l=t*o,d=i*a,u=i*o,f=r*o,p=n*s,g=n*a,m=n*o,v=this.val;return v[0]=1-(d+f),v[3]=c+m,v[6]=l-g,v[1]=c-m,v[4]=1-(h+f),v[7]=u+p,v[2]=l+g,v[5]=u-p,v[8]=1-(h+d),this},normalFromMat4:function(e){var t=e.val,i=this.val,r=t[0],n=t[1],s=t[2],a=t[3],o=t[4],h=t[5],c=t[6],l=t[7],d=t[8],u=t[9],f=t[10],p=t[11],g=t[12],m=t[13],v=t[14],y=t[15],b=r*h-n*o,x=r*c-s*o,E=r*l-a*o,T=n*c-s*h,A=n*l-a*h,w=s*l-a*c,S=d*m-u*g,C=d*v-f*g,I=d*y-p*g,_=u*v-f*m,O=u*y-p*m,P=f*y-p*v,M=b*P-x*O+E*_+T*I-A*C+w*S;return M?(M=1/M,i[0]=(h*P-c*O+l*_)*M,i[1]=(c*I-o*P-l*C)*M,i[2]=(o*O-h*I+l*S)*M,i[3]=(s*O-n*P-a*_)*M,i[4]=(r*P-s*I+a*C)*M,i[5]=(n*I-r*O-a*S)*M,i[6]=(m*w-v*A+y*T)*M,i[7]=(v*E-g*w-y*x)*M,i[8]=(g*A-m*E+y*b)*M,this):null}});e.exports=r},37867:(e,t,i)=>{var r=i(83419),n=i(25836),s=new r({initialize:function(e){this.val=new Float32Array(16),e?this.copy(e):this.identity()},clone:function(){return new s(this)},set:function(e){return this.copy(e)},setValues:function(e,t,i,r,n,s,a,o,h,c,l,d,u,f,p,g){var m=this.val;return m[0]=e,m[1]=t,m[2]=i,m[3]=r,m[4]=n,m[5]=s,m[6]=a,m[7]=o,m[8]=h,m[9]=c,m[10]=l,m[11]=d,m[12]=u,m[13]=f,m[14]=p,m[15]=g,this},copy:function(e){var t=e.val;return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,t,i){var r=a.fromQuat(i).val,n=t.x,s=t.y,o=t.z;return this.setValues(r[0]*n,r[1]*n,r[2]*n,0,r[4]*s,r[5]*s,r[6]*s,0,r[8]*o,r[9]*o,r[10]*o,0,e.x,e.y,e.z,1)},xyz:function(e,t,i){this.identity();var r=this.val;return r[12]=e,r[13]=t,r[14]=i,this},scaling:function(e,t,i){this.zero();var r=this.val;return r[0]=e,r[5]=t,r[10]=i,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,t=e[1],i=e[2],r=e[3],n=e[6],s=e[7],a=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=t,e[6]=e[9],e[7]=e[13],e[8]=i,e[9]=n,e[11]=e[14],e[12]=r,e[13]=s,e[14]=a,this},getInverse:function(e){return this.copy(e),this.invert()},invert:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8],l=e[9],d=e[10],u=e[11],f=e[12],p=e[13],g=e[14],m=e[15],v=t*a-i*s,y=t*o-r*s,b=t*h-n*s,x=i*o-r*a,E=i*h-n*a,T=r*h-n*o,A=c*p-l*f,w=c*g-d*f,S=c*m-u*f,C=l*g-d*p,I=l*m-u*p,_=d*m-u*g,O=v*_-y*I+b*C+x*S-E*w+T*A;return O?(O=1/O,this.setValues((a*_-o*I+h*C)*O,(r*I-i*_-n*C)*O,(p*T-g*E+m*x)*O,(d*E-l*T-u*x)*O,(o*S-s*_-h*w)*O,(t*_-r*S+n*w)*O,(g*b-f*T-m*y)*O,(c*T-d*b+u*y)*O,(s*I-a*S+h*A)*O,(i*S-t*I-n*A)*O,(f*E-p*b+m*v)*O,(l*b-c*E-u*v)*O,(a*w-s*C-o*A)*O,(t*C-i*w+r*A)*O,(p*y-f*x-g*v)*O,(c*x-l*y+d*v)*O)):this},adjoint:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8],l=e[9],d=e[10],u=e[11],f=e[12],p=e[13],g=e[14],m=e[15];return this.setValues(a*(d*m-u*g)-l*(o*m-h*g)+p*(o*u-h*d),-(i*(d*m-u*g)-l*(r*m-n*g)+p*(r*u-n*d)),i*(o*m-h*g)-a*(r*m-n*g)+p*(r*h-n*o),-(i*(o*u-h*d)-a*(r*u-n*d)+l*(r*h-n*o)),-(s*(d*m-u*g)-c*(o*m-h*g)+f*(o*u-h*d)),t*(d*m-u*g)-c*(r*m-n*g)+f*(r*u-n*d),-(t*(o*m-h*g)-s*(r*m-n*g)+f*(r*h-n*o)),t*(o*u-h*d)-s*(r*u-n*d)+c*(r*h-n*o),s*(l*m-u*p)-c*(a*m-h*p)+f*(a*u-h*l),-(t*(l*m-u*p)-c*(i*m-n*p)+f*(i*u-n*l)),t*(a*m-h*p)-s*(i*m-n*p)+f*(i*h-n*a),-(t*(a*u-h*l)-s*(i*u-n*l)+c*(i*h-n*a)),-(s*(l*g-d*p)-c*(a*g-o*p)+f*(a*d-o*l)),t*(l*g-d*p)-c*(i*g-r*p)+f*(i*d-r*l),-(t*(a*g-o*p)-s*(i*g-r*p)+f*(i*o-r*a)),t*(a*d-o*l)-s*(i*d-r*l)+c*(i*o-r*a))},determinant:function(){var e=this.val,t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],a=e[5],o=e[6],h=e[7],c=e[8],l=e[9],d=e[10],u=e[11],f=e[12],p=e[13],g=e[14],m=e[15];return(t*a-i*s)*(d*m-u*g)-(t*o-r*s)*(l*m-u*p)+(t*h-n*s)*(l*g-d*p)+(i*o-r*a)*(c*m-u*f)-(i*h-n*a)*(c*g-d*f)+(r*h-n*o)*(c*p-l*f)},multiply:function(e){var t=this.val,i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],c=t[7],l=t[8],d=t[9],u=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=e.val,b=y[0],x=y[1],E=y[2],T=y[3];return t[0]=b*i+x*a+E*l+T*p,t[1]=b*r+x*o+E*d+T*g,t[2]=b*n+x*h+E*u+T*m,t[3]=b*s+x*c+E*f+T*v,b=y[4],x=y[5],E=y[6],T=y[7],t[4]=b*i+x*a+E*l+T*p,t[5]=b*r+x*o+E*d+T*g,t[6]=b*n+x*h+E*u+T*m,t[7]=b*s+x*c+E*f+T*v,b=y[8],x=y[9],E=y[10],T=y[11],t[8]=b*i+x*a+E*l+T*p,t[9]=b*r+x*o+E*d+T*g,t[10]=b*n+x*h+E*u+T*m,t[11]=b*s+x*c+E*f+T*v,b=y[12],x=y[13],E=y[14],T=y[15],t[12]=b*i+x*a+E*l+T*p,t[13]=b*r+x*o+E*d+T*g,t[14]=b*n+x*h+E*u+T*m,t[15]=b*s+x*c+E*f+T*v,this},multiplyLocal:function(e){var t=this.val,i=e.val;return this.setValues(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.val,r=t.val,n=i[0],s=i[4],a=i[8],o=i[12],h=i[1],c=i[5],l=i[9],d=i[13],u=i[2],f=i[6],p=i[10],g=i[14],m=i[3],v=i[7],y=i[11],b=i[15],x=r[0],E=r[4],T=r[8],A=r[12],w=r[1],S=r[5],C=r[9],I=r[13],_=r[2],O=r[6],P=r[10],M=r[14],R=r[3],L=r[7],D=r[11],k=r[15];return this.setValues(n*x+s*w+a*_+o*R,h*x+c*w+l*_+d*R,u*x+f*w+p*_+g*R,m*x+v*w+y*_+b*R,n*E+s*S+a*O+o*L,h*E+c*S+l*O+d*L,u*E+f*S+p*O+g*L,m*E+v*S+y*O+b*L,n*T+s*C+a*P+o*D,h*T+c*C+l*P+d*D,u*T+f*C+p*P+g*D,m*T+v*C+y*P+b*D,n*A+s*I+a*M+o*k,h*A+c*I+l*M+d*k,u*A+f*I+p*M+g*k,m*A+v*I+y*M+b*k)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,t,i){var r=this.val;return r[12]=r[0]*e+r[4]*t+r[8]*i+r[12],r[13]=r[1]*e+r[5]*t+r[9]*i+r[13],r[14]=r[2]*e+r[6]*t+r[10]*i+r[14],r[15]=r[3]*e+r[7]*t+r[11]*i+r[15],this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,t,i){var r=this.val;return r[0]=r[0]*e,r[1]=r[1]*e,r[2]=r[2]*e,r[3]=r[3]*e,r[4]=r[4]*t,r[5]=r[5]*t,r[6]=r[6]*t,r[7]=r[7]*t,r[8]=r[8]*i,r[9]=r[9]*i,r[10]=r[10]*i,r[11]=r[11]*i,this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,s=e.x,a=e.y,o=e.z,h=n*s,c=n*a;return this.setValues(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,c*a+i,c*o-r*s,0,h*o-r*a,c*o+r*s,n*o*o+i,0,0,0,0,1)},rotate:function(e,t){var i=this.val,r=t.x,n=t.y,s=t.z,a=Math.sqrt(r*r+n*n+s*s);if(1e-6>Math.abs(a))return this;r*=a=1/a,n*=a,s*=a;var o=Math.sin(e),h=Math.cos(e),c=1-h,l=i[0],d=i[1],u=i[2],f=i[3],p=i[4],g=i[5],m=i[6],v=i[7],y=i[8],b=i[9],x=i[10],E=i[11],T=i[12],A=i[13],w=i[14],S=i[15],C=r*r*c+h,I=n*r*c+s*o,_=s*r*c-n*o,O=r*n*c-s*o,P=n*n*c+h,M=s*n*c+r*o,R=r*s*c+n*o,L=n*s*c-r*o,D=s*s*c+h;return this.setValues(l*C+p*I+y*_,d*C+g*I+b*_,u*C+m*I+x*_,f*C+v*I+E*_,l*O+p*P+y*M,d*O+g*P+b*M,u*O+m*P+x*M,f*O+v*P+E*M,l*R+p*L+y*D,d*R+g*L+b*D,u*R+m*L+x*D,f*R+v*L+E*D,T,A,w,S)},rotateX:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),n=t[4],s=t[5],a=t[6],o=t[7],h=t[8],c=t[9],l=t[10],d=t[11];return t[4]=n*r+h*i,t[5]=s*r+c*i,t[6]=a*r+l*i,t[7]=o*r+d*i,t[8]=h*r-n*i,t[9]=c*r-s*i,t[10]=l*r-a*i,t[11]=d*r-o*i,this},rotateY:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),n=t[0],s=t[1],a=t[2],o=t[3],h=t[8],c=t[9],l=t[10],d=t[11];return t[0]=n*r-h*i,t[1]=s*r-c*i,t[2]=a*r-l*i,t[3]=o*r-d*i,t[8]=n*i+h*r,t[9]=s*i+c*r,t[10]=a*i+l*r,t[11]=o*i+d*r,this},rotateZ:function(e){var t=this.val,i=Math.sin(e),r=Math.cos(e),n=t[0],s=t[1],a=t[2],o=t[3],h=t[4],c=t[5],l=t[6],d=t[7];return t[0]=n*r+h*i,t[1]=s*r+c*i,t[2]=a*r+l*i,t[3]=o*r+d*i,t[4]=h*r-n*i,t[5]=c*r-s*i,t[6]=l*r-a*i,t[7]=d*r-o*i,this},fromRotationTranslation:function(e,t){var i=e.x,r=e.y,n=e.z,s=e.w,a=i+i,o=r+r,h=n+n,c=i*a,l=i*o,d=i*h,u=r*o,f=r*h,p=n*h,g=s*a,m=s*o,v=s*h;return this.setValues(1-(u+p),l+v,d-m,0,l-v,1-(c+p),f+g,0,d+m,f-g,1-(c+u),0,t.x,t.y,t.z,1)},fromQuat:function(e){var t=e.x,i=e.y,r=e.z,n=e.w,s=t+t,a=i+i,o=r+r,h=t*s,c=t*a,l=t*o,d=i*a,u=i*o,f=r*o,p=n*s,g=n*a,m=n*o;return this.setValues(1-(d+f),c+m,l-g,0,c-m,1-(h+f),u+p,0,l+g,u-p,1-(h+d),0,0,0,0,1)},frustum:function(e,t,i,r,n,s){var a=1/(t-e),o=1/(r-i),h=1/(n-s);return this.setValues(2*n*a,0,0,0,0,2*n*o,0,0,(t+e)*a,(r+i)*o,(s+n)*h,-1,0,0,s*n*2*h,0)},perspective:function(e,t,i,r){var n=1/Math.tan(e/2),s=1/(i-r);return this.setValues(n/t,0,0,0,0,n,0,0,0,0,(r+i)*s,-1,0,0,2*r*i*s,0)},perspectiveLH:function(e,t,i,r){return this.setValues(2*i/e,0,0,0,0,2*i/t,0,0,0,0,-r/(i-r),1,0,0,i*r/(i-r),0)},ortho:function(e,t,i,r,n,s){var a=e-t,o=i-r,h=n-s;return a=0===a?a:1/a,o=0===o?o:1/o,h=0===h?h:1/h,this.setValues(-2*a,0,0,0,0,-2*o,0,0,0,0,2*h,0,(e+t)*a,(r+i)*o,(s+n)*h,1)},lookAtRH:function(e,t,i){var r=this.val;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),h.crossVectors(i,l),0===h.lengthSq()&&(1===Math.abs(i.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),h.crossVectors(i,l)),h.normalize(),c.crossVectors(l,h),r[0]=h.x,r[1]=h.y,r[2]=h.z,r[4]=c.x,r[5]=c.y,r[6]=c.z,r[8]=l.x,r[9]=l.y,r[10]=l.z,this},lookAt:function(e,t,i){var r=e.x,n=e.y,s=e.z,a=i.x,o=i.y,h=i.z,c=t.x,l=t.y,d=t.z;if(1e-6>Math.abs(r-c)&&1e-6>Math.abs(n-l)&&1e-6>Math.abs(s-d))return this.identity();var u=r-c,f=n-l,p=s-d,g=1/Math.sqrt(u*u+f*f+p*p);u*=g,f*=g;var m=o*(p*=g)-h*f,v=h*u-a*p,y=a*f-o*u;(g=Math.sqrt(m*m+v*v+y*y))?(m*=g=1/g,v*=g,y*=g):(m=0,v=0,y=0);var b=f*y-p*v,x=p*m-u*y,E=u*v-f*m;return(g=Math.sqrt(b*b+x*x+E*E))?(b*=g=1/g,x*=g,E*=g):(b=0,x=0,E=0),this.setValues(m,b,u,0,v,x,f,0,y,E,p,0,-(m*r+v*n+y*s),-(b*r+x*n+E*s),-(u*r+f*n+p*s),1)},yawPitchRoll:function(e,t,i){this.zero(),a.zero(),o.zero();var r=this.val,n=a.val,s=o.val,h=Math.sin(i),c=Math.cos(i);return r[10]=1,r[15]=1,r[0]=c,r[1]=h,r[4]=-h,r[5]=c,h=Math.sin(t),c=Math.cos(t),n[0]=1,n[15]=1,n[5]=c,n[10]=c,n[9]=-h,n[6]=h,h=Math.sin(e),c=Math.cos(e),s[5]=1,s[15]=1,s[0]=c,s[2]=-h,s[8]=h,s[10]=c,this.multiplyLocal(a),this.multiplyLocal(o),this},setWorldMatrix:function(e,t,i,r,n){return this.yawPitchRoll(e.y,e.x,e.z),a.scaling(i.x,i.y,i.z),o.xyz(t.x,t.y,t.z),this.multiplyLocal(a),this.multiplyLocal(o),r&&this.multiplyLocal(r),n&&this.multiplyLocal(n),this},multiplyToMat4:function(e,t){var i=this.val,r=e.val,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],c=i[5],l=i[6],d=i[7],u=i[8],f=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],b=i[15],x=r[0],E=r[1],T=r[2],A=r[3],w=r[4],S=r[5],C=r[6],I=r[7],_=r[8],O=r[9],P=r[10],M=r[11],R=r[12],L=r[13],D=r[14],k=r[15];return t.setValues(x*n+E*h+T*u+A*m,E*s+E*c+T*f+A*v,T*a+E*l+T*p+A*y,A*o+E*d+T*g+A*b,w*n+S*h+C*u+I*m,w*s+S*c+C*f+I*v,w*a+S*l+C*p+I*y,w*o+S*d+C*g+I*b,_*n+O*h+P*u+M*m,_*s+O*c+P*f+M*v,_*a+O*l+P*p+M*y,_*o+O*d+P*g+M*b,R*n+L*h+D*u+k*m,R*s+L*c+D*f+k*v,R*a+L*l+D*p+k*y,R*o+L*d+D*g+k*b)},fromRotationXYTranslation:function(e,t,i){var r=t.x,n=t.y,s=t.z,a=Math.sin(e.x),o=Math.cos(e.x),h=Math.sin(e.y),c=Math.cos(e.y),l=r,d=n,u=s,f=-a,p=0-f*h,g=0-o*h,m=f*c,v=o*c;return i||(l=c*r+h*s,d=p*r+o*n+m*s,u=g*r+a*n+v*s),this.setValues(c,p,g,0,0,o,a,0,h,m,v,0,l,d,u,1)},getMaxScaleOnAxis:function(){var e=this.val;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}}),a=new s,o=new s,h=new n,c=new n,l=new n;e.exports=s},86883:e=>{e.exports=function(e,t,i){return Math.min(e+t,i)}},50040:e=>{e.exports=function(e){var t=e.length;if(0===t)return 0;e.sort(function(e,t){return e-t});var i=Math.floor(t/2);return t%2==0?(e[i]+e[i-1])/2:e[i]}},37204:e=>{e.exports=function(e,t,i){return Math.max(e-t,i)}},65201:e=>{e.exports=function(e,t,i,r){void 0===i&&(i=t+1);var n=(e-t)/(i-t);return n>1?void 0!==r?(n=(r-e)/(r-i))<0&&(n=0):n=1:n<0&&(n=0),n}},15746:(e,t,i)=>{var r=i(83419),n=i(94434),s=i(29747),a=i(25836),o=new Int8Array([1,2,0]),h=new Float32Array([0,0,0]),c=new a(1,0,0),l=new a(0,1,0),d=new a,u=new n;e.exports=new r({initialize:function(e,t,i,r){this.onChangeCallback=s,this.set(e,t,i,r)},x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback(this)}},copy:function(e){return this.set(e)},set:function(e,t,i,r,n){return void 0===n&&(n=!0),"object"==typeof e?(this._x=e.x||0,this._y=e.y||0,this._z=e.z||0,this._w=e.w||0):(this._x=e||0,this._y=t||0,this._z=i||0,this._w=r||0),n&&this.onChangeCallback(this),this},add:function(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this._w+=e.w,this.onChangeCallback(this),this},subtract:function(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this._w-=e.w,this.onChangeCallback(this),this},scale:function(e){return this._x*=e,this._y*=e,this._z*=e,this._w*=e,this.onChangeCallback(this),this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,n=e*e+t*t+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this._x=e*n,this._y=t*n,this._z=i*n,this._w=r*n),this.onChangeCallback(this),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){void 0===t&&(t=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.set(i+t*(e.x-i),r+t*(e.y-r),n+t*(e.z-n),s+t*(e.w-s))},rotationTo:function(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;return i<-.999999?(1e-6>d.copy(c).cross(e).length()&&d.copy(l).cross(e),d.normalize(),this.setAxisAngle(d,Math.PI)):i>.999999?this.set(0,0,0,1):(d.copy(e).cross(t),this._x=d.x,this._y=d.y,this._z=d.z,this._w=1+i,this.normalize())},setAxes:function(e,t,i){var r=u.val;return r[0]=t.x,r[3]=t.y,r[6]=t.z,r[1]=i.x,r[4]=i.y,r[7]=i.z,r[2]=-e.x,r[5]=-e.y,r[8]=-e.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(e,t){var i=Math.sin(t*=.5);return this.set(i*e.x,i*e.y,i*e.z,Math.cos(t))},multiply:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,s=e.x,a=e.y,o=e.z,h=e.w;return this.set(t*h+n*s+i*o-r*a,i*h+n*a+r*s-t*o,r*h+n*o+t*a-i*s,n*h-t*s-i*a-r*o)},slerp:function(e,t){var i=this.x,r=this.y,n=this.z,s=this.w,a=e.x,o=e.y,h=e.z,c=e.w,l=i*a+r*o+n*h+s*c;l<0&&(l=-l,a=-a,o=-o,h=-h,c=-c);var d=1-t,u=t;if(1-l>1e-6){var f=Math.acos(l),p=Math.sin(f);d=Math.sin((1-t)*f)/p,u=Math.sin(t*f)/p}return this.set(d*i+u*a,d*r+u*o,d*n+u*h,d*s+u*c)},invert:function(){var e=this.x,t=this.y,i=this.z,r=this.w,n=e*e+t*t+i*i+r*r,s=n?1/n:0;return this.set(-e*s,-t*s,-i*s,r*s)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(e),a=Math.cos(e);return this.set(t*a+n*s,i*a+r*s,r*a-i*s,n*a-t*s)},rotateY:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(e),a=Math.cos(e);return this.set(t*a-r*s,i*a+n*s,r*a+t*s,n*a-i*s)},rotateZ:function(e){e*=.5;var t=this.x,i=this.y,r=this.z,n=this.w,s=Math.sin(e),a=Math.cos(e);return this.set(t*a+i*s,i*a-t*s,r*a+n*s,n*a-r*s)},calculateW:function(){var e=this.x,t=this.y,i=this.z;return this.w=-Math.sqrt(1-e*e-t*t-i*i),this},setFromEuler:function(e,t){var i=e.x/2,r=e.y/2,n=e.z/2,s=Math.cos(i),a=Math.cos(r),o=Math.cos(n),h=Math.sin(i),c=Math.sin(r),l=Math.sin(n);switch(e.order){case"XYZ":this.set(h*a*o+s*c*l,s*c*o-h*a*l,s*a*l+h*c*o,s*a*o-h*c*l,t);break;case"YXZ":this.set(h*a*o+s*c*l,s*c*o-h*a*l,s*a*l-h*c*o,s*a*o+h*c*l,t);break;case"ZXY":this.set(h*a*o-s*c*l,s*c*o+h*a*l,s*a*l+h*c*o,s*a*o-h*c*l,t);break;case"ZYX":this.set(h*a*o-s*c*l,s*c*o+h*a*l,s*a*l-h*c*o,s*a*o+h*c*l,t);break;case"YZX":this.set(h*a*o+s*c*l,s*c*o+h*a*l,s*a*l-h*c*o,s*a*o-h*c*l,t);break;case"XZY":this.set(h*a*o-s*c*l,s*c*o-h*a*l,s*a*l+h*c*o,s*a*o+h*c*l,t)}return this},setFromRotationMatrix:function(e){var t,i=e.val,r=i[0],n=i[4],s=i[8],a=i[1],o=i[5],h=i[9],c=i[2],l=i[6],d=i[10],u=r+o+d;return u>0?(t=.5/Math.sqrt(u+1),this.set((l-h)*t,(s-c)*t,(a-n)*t,.25/t)):r>o&&r>d?(t=2*Math.sqrt(1+r-o-d),this.set(.25*t,(n+a)/t,(s+c)/t,(l-h)/t)):o>d?(t=2*Math.sqrt(1+o-r-d),this.set((n+a)/t,.25*t,(h+l)/t,(s-c)/t)):(t=2*Math.sqrt(1+d-r-o),this.set((s+c)/t,(h+l)/t,.25*t,(a-n)/t)),this},fromMat3:function(e){var t,i=e.val,r=i[0]+i[4]+i[8];if(r>0)t=Math.sqrt(r+1),this.w=.5*t,t=.5/t,this._x=(i[7]-i[5])*t,this._y=(i[2]-i[6])*t,this._z=(i[3]-i[1])*t;else{var n=0;i[4]>i[0]&&(n=1),i[8]>i[3*n+n]&&(n=2);var s=o[n],a=o[s];t=Math.sqrt(i[3*n+n]-i[3*s+s]-i[3*a+a]+1),h[n]=.5*t,t=.5/t,h[s]=(i[3*s+n]+i[3*n+s])*t,h[a]=(i[3*a+n]+i[3*n+a])*t,this._x=h[0],this._y=h[1],this._z=h[2],this._w=(i[3*a+s]-i[3*s+a])*t}return this.onChangeCallback(this),this}})},43396:(e,t,i)=>{var r=i(36383);e.exports=function(e){return e*r.RAD_TO_DEG}},74362:e=>{e.exports=function(e,t){void 0===t&&(t=1);var i=2*Math.random()*Math.PI;return e.x=Math.cos(i)*t,e.y=Math.sin(i)*t,e}},60706:e=>{e.exports=function(e,t){void 0===t&&(t=1);var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return e.x=Math.cos(i)*n,e.y=Math.sin(i)*n,e.z=r*t,e}},67421:e=>{e.exports=function(e,t){return void 0===t&&(t=1),e.x=(2*Math.random()-1)*t,e.y=(2*Math.random()-1)*t,e.z=(2*Math.random()-1)*t,e.w=(2*Math.random()-1)*t,e}},36305:e=>{e.exports=function(e,t){var i=e.x,r=e.y;return e.x=i*Math.cos(t)-r*Math.sin(t),e.y=i*Math.sin(t)+r*Math.cos(t),e}},11520:e=>{e.exports=function(e,t,i,r){var n=Math.cos(r),s=Math.sin(r),a=e.x-t,o=e.y-i;return e.x=a*n-o*s+t,e.y=a*s+o*n+i,e}},1163:e=>{e.exports=function(e,t,i,r,n){var s=r+Math.atan2(e.y-i,e.x-t);return e.x=t+n*Math.cos(s),e.y=i+n*Math.sin(s),e}},70336:e=>{e.exports=function(e,t,i,r,n){return e.x=t+n*Math.cos(r),e.y=i+n*Math.sin(r),e}},72678:(e,t,i)=>{var r=i(25836),n=i(37867),s=i(15746),a=new n,o=new s,h=new r;e.exports=function(e,t,i){return o.setAxisAngle(t,i),a.fromRotationTranslation(o,h.set(0,0,0)),e.transformMat4(a)}},2284:e=>{e.exports=function(e){return e>0?Math.ceil(e):Math.floor(e)}},41013:e=>{e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var r=Math.pow(i,-t);return Math.round(e*r)/r}},16922:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=1),void 0===i&&(i=1),void 0===r&&(r=1),r*=Math.PI/e;for(var n=[],s=[],a=0;a<e;a++)i-=t*r,t+=i*r,n[a]=i,s[a]=t;return{sin:s,cos:n,length:e}}},7602:e=>{e.exports=function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)}},54261:e=>{e.exports=function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)}},44408:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n){void 0===n&&(n=new r);var s=0,a=0;return e>0&&e<=t*i&&(e>t-1?(a=Math.floor(e/t),s=e-a*t):s=e),n.set(s,a)}},85955:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s,a,o,h){void 0===h&&(h=new r);var c=Math.sin(s),l=Math.cos(s),d=l*a,u=c*a,f=-c*o,p=l*o,g=1/(d*p+-(f*u));return h.x=p*g*e+-f*g*t+(n*f-i*p)*g,h.y=d*g*t+-u*g*e+(-n*d+i*u)*g,h}},26099:(e,t,i)=>{var r=i(83419),n=i(43855),s=new r({initialize:function(e,t){this.x=0,this.y=0,"object"==typeof e?(this.x=e.x||0,this.y=e.y||0):(void 0===t&&(t=e),this.x=e||0,this.y=t||0)},clone:function(){return new s(this.x,this.y)},copy:function(e){return this.x=e.x||0,this.y=e.y||0,this},setFromObject:function(e){return this.x=e.x||0,this.y=e.y||0,this},set:function(e,t){return void 0===t&&(t=e),this.x=e,this.y=t,this},setTo:function(e,t){return this.set(e,t)},setToPolar:function(e,t){return null==t&&(t=1),this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},equals:function(e){return this.x===e.x&&this.y===e.y},fuzzyEquals:function(e,t){return n(this.x,e.x,t)&&n(this.y,e.y,t)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},setAngle:function(e){return this.setToPolar(e,this.length())},add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},setLength:function(e){return this.normalize().scale(e)},lengthSq:function(){var e=this.x,t=this.y;return e*e+t*t},normalize:function(){var e=this.x,t=this.y,i=e*e+t*t;return i>0&&(i=1/Math.sqrt(i),this.x=e*i,this.y=t*i),this},normalizeRightHand:function(){var e=this.x;return this.x=-1*this.y,this.y=e,this},normalizeLeftHand:function(){var e=this.x;return this.x=this.y,this.y=-1*e,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lerp:function(e,t){void 0===t&&(t=0);var i=this.x,r=this.y;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this},transformMat3:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},transformMat4:function(e){var t=this.x,i=this.y,r=e.val;return this.x=r[0]*t+r[4]*i+r[12],this.y=r[1]*t+r[5]*i+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(e){var t=this.length();return t&&t>e&&this.scale(e/t),this},reflect:function(e){return e=e.clone().normalize(),this.subtract(e.scale(2*this.dot(e)))},mirror:function(e){return this.reflect(e).negate()},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t*this.x-i*this.y,i*this.x+t*this.y)},project:function(e){var t=this.dot(e)/e.dot(e);return this.copy(e).scale(t)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),e.exports=s},25836:(e,t,i)=>{var r=new(i(83419))({initialize:function(e,t,i){this.x=0,this.y=0,this.z=0,"object"==typeof e?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=t||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this},set:function(e,t,i){return"object"==typeof e?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):(this.x=e||0,this.y=t||0,this.z=i||0),this},setFromMatrixPosition:function(e){return this.fromArray(e.val,12)},setFromMatrixColumn:function(e,t){return this.fromArray(e.val,4*t)},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addScale:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this},scale:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return Math.sqrt(t*t+i*i+r*r)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0;return t*t+i*i+r*r},length:function(){var e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},normalize:function(){var e=this.x,t=this.y,i=this.z,r=e*e+t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=e*r,this.y=t*r,this.z=i*r),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*n-t*a,this.z=t*s-i*n,this},lerp:function(e,t){void 0===t&&(t=0);var i=this.x,r=this.y,n=this.z;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=n+t*(e.z-n),this},applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.val;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.val,s=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*s,this},transformMat3:function(e){var t=this.x,i=this.y,r=this.z,n=e.val;return this.x=t*n[0]+i*n[3]+r*n[6],this.y=t*n[1]+i*n[4]+r*n[7],this.z=t*n[2]+i*n[5]+r*n[8],this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,n=e.val;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12],this.y=n[1]*t+n[5]*i+n[9]*r+n[13],this.z=n[2]*t+n[6]*i+n[10]*r+n[14],this},transformCoordinates:function(e){var t=this.x,i=this.y,r=this.z,n=e.val,s=t*n[0]+i*n[4]+r*n[8]+n[12],a=t*n[1]+i*n[5]+r*n[9]+n[13],o=t*n[2]+i*n[6]+r*n[10]+n[14],h=t*n[3]+i*n[7]+r*n[11]+n[15];return this.x=s/h,this.y=a/h,this.z=o/h,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,a=e.z,o=e.w,h=o*t+s*r-a*i,c=o*i+a*t-n*r,l=o*r+n*i-s*t,d=-n*t-s*i-a*r;return this.x=h*o+-(d*n)+-(c*a)- -(l*s),this.y=c*o+-(d*s)+-(l*n)- -(h*a),this.z=l*o+-(d*a)+-(h*s)- -(c*n),this},project:function(e){var t=this.x,i=this.y,r=this.z,n=e.val,s=n[0],a=n[1],o=n[2],h=n[3],c=n[4],l=n[5],d=n[6],u=n[7],f=n[8],p=n[9],g=n[10],m=n[11],v=n[12],y=n[13],b=n[14],x=1/(t*h+i*u+r*m+n[15]);return this.x=(t*s+i*c+r*f+v)*x,this.y=(t*a+i*l+r*p+y)*x,this.z=(t*o+i*d+r*g+b)*x,this},projectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unprojectViewMatrix:function(e,t){return this.applyMatrix4(e).applyMatrix4(t)},unproject:function(e,t){var i=e.x,r=e.y,n=e.z,s=e.w,a=this.x-i,o=s-this.y-1-r,h=this.z;return this.x=2*a/n-1,this.y=2*o/s-1,this.z=2*h-1,this.project(t)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),e.exports=r},61369:(e,t,i)=>{var r=new(i(83419))({initialize:function(e,t,i,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof e?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z||0,this.w=e.w||0,this},equals:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function(e,t,i,r){return"object"==typeof e?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||0):(this.x=e||0,this.y=t||0,this.z=i||0,this.w=r||0),this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z||0,this.w+=e.w||0,this},subtract:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z||0,this.w-=e.w||0,this},scale:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},length:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return Math.sqrt(e*e+t*t+i*i+r*r)},lengthSq:function(){var e=this.x,t=this.y,i=this.z,r=this.w;return e*e+t*t+i*i+r*r},normalize:function(){var e=this.x,t=this.y,i=this.z,r=this.w,n=e*e+t*t+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),this.x=e*n,this.y=t*n,this.z=i*n,this.w=r*n),this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function(e,t){void 0===t&&(t=0);var i=this.x,r=this.y,n=this.z,s=this.w;return this.x=i+t*(e.x-i),this.y=r+t*(e.y-r),this.z=n+t*(e.z-n),this.w=s+t*(e.w-s),this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z||1,this.w*=e.w||1,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z||1,this.w/=e.w||1,this},distance:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,n=e.w-this.w||0;return Math.sqrt(t*t+i*i+r*r+n*n)},distanceSq:function(e){var t=e.x-this.x,i=e.y-this.y,r=e.z-this.z||0,n=e.w-this.w||0;return t*t+i*i+r*r+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,s=e.val;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*n,this},transformQuat:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,s=e.y,a=e.z,o=e.w,h=o*t+s*r-a*i,c=o*i+a*t-n*r,l=o*r+n*i-s*t,d=-n*t-s*i-a*r;return this.x=h*o+-(d*n)+-(c*a)- -(l*s),this.y=c*o+-(d*s)+-(l*n)- -(h*a),this.z=l*o+-(d*a)+-(h*s)- -(c*n),this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,e.exports=r},60417:e=>{e.exports=function(e,t,i){return Math.abs(e-t)<=i}},15994:e=>{e.exports=function(e,t,i){var r=i-t;return t+((e-t)%r+r)%r}},31040:e=>{e.exports=function(e,t,i,r){return Math.atan2(r-t,i-e)}},55495:e=>{e.exports=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},128:e=>{e.exports=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}},41273:e=>{e.exports=function(e,t,i,r){return Math.atan2(i-e,r-t)}},1432:(e,t,i)=>{var r=i(36383);e.exports=function(e){return e>Math.PI&&(e-=r.PI2),Math.abs(((e+r.TAU)%r.PI2-r.PI2)%r.PI2)}},49127:(e,t,i)=>{var r=i(12407);e.exports=function(e,t){return r(t-e)}},52285:(e,t,i)=>{var r=i(12407),n=2*Math.PI;e.exports=function(e,t){var i=r(t-e);return i>0&&(i-=n),i}},67317:(e,t,i)=>{var r=i(86554);e.exports=function(e,t){return r(t-e)}},12407:e=>{e.exports=function(e){return(e%=2*Math.PI)>=0?e:e+2*Math.PI}},53993:(e,t,i)=>{var r=i(99472);e.exports=function(){return r(-Math.PI,Math.PI)}},86564:(e,t,i)=>{var r=i(99472);e.exports=function(){return r(-180,180)}},90154:(e,t,i)=>{var r=i(12407);e.exports=function(e){return r(e+Math.PI)}},48736:(e,t,i)=>{var r=i(36383);e.exports=function(e,t,i){return void 0===i&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=r.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=r.PI2:t-=r.PI2),t>e?e+=i:t<e&&(e-=i))),e}},61430:e=>{e.exports=function(e,t){var i=t-e;if(0===i)return 0;var r=Math.floor((i- -180)/360);return i-360*r}},86554:(e,t,i)=>{var r=i(15994);e.exports=function(e){return r(e,-Math.PI,Math.PI)}},30954:(e,t,i)=>{var r=i(15994);e.exports=function(e){return r(e,-180,180)}},25588:(e,t,i)=>{e.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),GetClockwiseDistance:i(49127),GetCounterClockwiseDistance:i(52285),GetShortestDistance:i(67317),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:e=>{e.exports={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff}},20339:e=>{e.exports=function(e,t,i,r){var n=e-i,s=t-r;return Math.sqrt(n*n+s*s)}},52816:e=>{e.exports=function(e,t){var i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}},64559:e=>{e.exports=function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}},82340:e=>{e.exports=function(e,t,i,r){return Math.max(Math.abs(e-i),Math.abs(t-r))}},14390:e=>{e.exports=function(e,t,i,r,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(i-e,n)+Math.pow(r-t,n))}},2243:e=>{e.exports=function(e,t,i,r){return Math.abs(e-i)+Math.abs(t-r)}},89774:e=>{e.exports=function(e,t,i,r){var n=e-i,s=t-r;return n*n+s*s}},50994:(e,t,i)=>{e.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(e,t,i)=>{var r=i(54178),n=i(41521),s=i(79980),a=i(85433),o=i(99140),h=i(48857),c=i(81596),l=i(59133),d=i(98516),u=i(35248),f=i(82500),p=i(49752);e.exports={Power0:c,Power1:l.Out,Power2:a.Out,Power3:d.Out,Power4:u.Out,Linear:c,Quad:l.Out,Cubic:a.Out,Quart:d.Out,Quint:u.Out,Sine:f.Out,Expo:h.Out,Circ:s.Out,Elastic:o.Out,Back:r.Out,Bounce:n.Out,Stepped:p,"Quad.easeIn":l.In,"Cubic.easeIn":a.In,"Quart.easeIn":d.In,"Quint.easeIn":u.In,"Sine.easeIn":f.In,"Expo.easeIn":h.In,"Circ.easeIn":s.In,"Elastic.easeIn":o.In,"Back.easeIn":r.In,"Bounce.easeIn":n.In,"Quad.easeOut":l.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":d.Out,"Quint.easeOut":u.Out,"Sine.easeOut":f.Out,"Expo.easeOut":h.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":o.Out,"Back.easeOut":r.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":l.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":u.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":n.InOut}},1639:e=>{e.exports=function(e,t){return void 0===t&&(t=1.70158),e*e*((t+1)*e-t)}},50099:e=>{e.exports=function(e,t){void 0===t&&(t=1.70158);var i=1.525*t;return(e*=2)<1?e*e*((i+1)*e-i)*.5:.5*((e-=2)*e*((i+1)*e+i)+2)}},41286:e=>{e.exports=function(e,t){return void 0===t&&(t=1.70158),--e*e*((t+1)*e+t)+1}},54178:(e,t,i)=>{e.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:e=>{e.exports=function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}},41788:e=>{e.exports=function(e){var t=!1;return(e<.5?(e=1-2*e,t=!0):e=2*e-1,e=e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t)?(1-e)*.5:.5*e+.5}},69905:e=>{e.exports=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},41521:(e,t,i)=>{e.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:e=>{e.exports=function(e){return 1-Math.sqrt(1-e*e)}},4177:e=>{e.exports=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},57512:e=>{e.exports=function(e){return Math.sqrt(1- --e*e)}},79980:(e,t,i)=>{e.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:e=>{e.exports=function(e){return e*e*e}},82820:e=>{e.exports=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},35033:e=>{e.exports=function(e){return--e*e*e+1}},85433:(e,t,i)=>{e.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:e=>{e.exports=function(e,t,i){if(void 0===t&&(t=.1),void 0===i&&(i=.1),0===e)return 0;if(1===e)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e-r)/i))}},50665:e=>{e.exports=function(e,t,i){if(void 0===t&&(t=.1),void 0===i&&(i=.1),0===e)return 0;if(1===e)return 1;var r=i/4;return(t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),(e*=2)<1)?-.5*(t*Math.pow(2,10*(e-=1))*Math.sin(2*Math.PI*(e-r)/i)):t*Math.pow(2,-10*(e-=1))*Math.sin(2*Math.PI*(e-r)/i)*.5+1}},7744:e=>{e.exports=function(e,t,i){if(void 0===t&&(t=.1),void 0===i&&(i=.1),0===e)return 0;if(1===e)return 1;var r=i/4;return t<1?t=1:r=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin(2*Math.PI*(e-r)/i)+1}},99140:(e,t,i)=>{e.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:e=>{e.exports=function(e){return Math.pow(2,10*(e-1))-.001}},87844:e=>{e.exports=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}},89433:e=>{e.exports=function(e){return 1-Math.pow(2,-10*e)}},48857:(e,t,i)=>{e.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(e,t,i)=>{e.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:e=>{e.exports=function(e){return e}},81596:(e,t,i)=>{e.exports=i(7147)},34826:e=>{e.exports=function(e){return e*e}},20544:e=>{e.exports=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},92029:e=>{e.exports=function(e){return e*(2-e)}},59133:(e,t,i)=>{e.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:e=>{e.exports=function(e){return e*e*e*e}},78137:e=>{e.exports=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},45840:e=>{e.exports=function(e){return 1- --e*e*e*e}},98516:(e,t,i)=>{e.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:e=>{e.exports=function(e){return e*e*e*e*e}},16509:e=>{e.exports=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},17868:e=>{e.exports=function(e){return--e*e*e*e*e+1}},35248:(e,t,i)=>{e.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:e=>{e.exports=function(e){return 0===e?0:1===e?1:1-Math.cos(e*Math.PI/2)}},34025:e=>{e.exports=function(e){return 0===e?0:1===e?1:.5*(1-Math.cos(Math.PI*e))}},52768:e=>{e.exports=function(e){return 0===e?0:1===e?1:Math.sin(e*Math.PI/2)}},82500:(e,t,i)=>{e.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:e=>{e.exports=function(e,t){return(void 0===t&&(t=1),e<=0)?0:e>=1?1:1/t*((t*e|0)+1)}},49752:(e,t,i)=>{e.exports=i(72251)},75698:e=>{e.exports=function(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)}},43855:e=>{e.exports=function(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i}},25777:e=>{e.exports=function(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)}},5470:e=>{e.exports=function(e,t,i){return void 0===i&&(i=1e-4),e>t-i}},94977:e=>{e.exports=function(e,t,i){return void 0===i&&(i=1e-4),e<t+i}},48379:(e,t,i)=>{e.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(e,t,i)=>{var r=i(36383),n=i(79291),s={Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)};e.exports=s=n(!1,s,r)},89318:(e,t,i)=>{var r=i(85710);e.exports=function(e,t){for(var i=0,n=e.length-1,s=0;s<=n;s++)i+=Math.pow(1-t,n-s)*Math.pow(t,s)*e[s]*r(n,s);return i}},77259:(e,t,i)=>{var r=i(87842);e.exports=function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n);return e[0]===e[i]?(t<0&&(s=Math.floor(n=i*(1+t))),r(n-s,e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i])):t<0?e[0]-(r(-n,e[0],e[0],e[1],e[1])-e[0]):t>1?e[i]-(r(n-i,e[i],e[i],e[i-1],e[i-1])-e[i]):r(n-s,e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2])}},36316:e=>{e.exports=function(e,t,i,r,n){var s,a;return(s=1-e)*s*s*t+3*(a=1-e)*a*e*i+3*(1-e)*e*e*r+e*e*e*n}},28392:(e,t,i)=>{var r=i(28915);e.exports=function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n);return t<0?r(e[0],e[1],n):t>1?r(e[i],e[i-1],i-n):r(e[s],e[s+1>i?i:s+1],n-s)}},32112:e=>{e.exports=function(e,t,i,r){var n;return(n=1-e)*n*t+2*(1-e)*e*i+e*e*r}},47235:(e,t,i)=>{var r=i(7602);e.exports=function(e,t,i){return t+(i-t)*r(e,0,1)}},50178:(e,t,i)=>{var r=i(54261);e.exports=function(e,t,i){return t+(i-t)*r(e,0,1)}},38289:(e,t,i)=>{e.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:e=>{e.exports=function(e){return 1<<Math.ceil(Math.log(e)/.6931471805599453)}},50030:e=>{e.exports=function(e,t){return e>0&&(e&e-1)==0&&t>0&&(t&t-1)==0}},81230:e=>{e.exports=function(e){return e>0&&(e&e-1)==0}},49001:(e,t,i)=>{e.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e){void 0===e&&(e=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],e&&this.init(e)},rnd:function(){var e=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},hash:function(e){var t,i=this.n;e=e.toString();for(var r=0;r<e.length;r++)i+=e.charCodeAt(r),i=(t=.02519603282416938*i)>>>0,t-=i,t*=i,i=t>>>0,t-=i,i+=0x100000000*t;return this.n=i,(i>>>0)*23283064365386963e-26},init:function(e){"string"==typeof e?this.state(e):this.sow(e)},sow:function(e){if(this.n=0xefc8249d,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 0x100000000*this.rnd()},frac:function(){return this.rnd()+(2097152*this.rnd()|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-.5)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(e){for(var t=e.length-1,i=t;i>0;i--){var r=Math.floor(this.frac()*(i+1)),n=e[r];e[r]=e[i],e[i]=n}return e}})},63448:e=>{e.exports=function(e,t,i,r){return(void 0===i&&(i=0),0===t)?e:(e-=i,e=t*Math.ceil(e/t),r?(i+e)/t:i+e)}},56583:e=>{e.exports=function(e,t,i,r){return(void 0===i&&(i=0),0===t)?e:(e-=i,e=t*Math.floor(e/t),r?(i+e)/t:i+e)}},77720:e=>{e.exports=function(e,t,i,r){return(void 0===i&&(i=0),0===t)?e:(e-=i,e=t*Math.round(e/t),r?(i+e)/t:i+e)}},73697:(e,t,i)=>{e.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(e,t,i)=>{i(63595);var r=i(8054),n=i(79291),s={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};s.Sound=i(23717),e.exports=s=n(!1,s,r),i.g.Phaser=s},71289:(e,t,i)=>{var r=i(83419),n=i(92209),s=i(88571);e.exports=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Collision,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(e,t,i,r,n){s.call(this,e,t,i,r,n),this.body=null}})},86689:(e,t,i)=>{var r=i(83419),n=i(39506),s=i(20339),a=i(89774),o=i(66022),h=i(95540),c=i(46975),l=i(72441),d=i(47956),u=i(37277),f=i(44594),p=i(26099),g=i(82248),m=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,e.sys.events.once(f.BOOT,this.boot,this),e.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new o(this.world));var e=this.systems.events;h(this.config,"customUpdate",!1)||e.on(f.UPDATE,this.world.update,this.world),e.on(f.POST_UPDATE,this.world.postUpdate,this.world),e.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var e=this.systems.game.config.physics;return c(h(this.systems.settings.physics,"arcade",{}),h(e,"arcade",{}))},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(e,t,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(e,t,i,r,n,!0)},collide:function(e,t,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.world.collideObjects(e,t,i,r,n,!1)},collideTiles:function(e,t,i,r,n){return this.world.collideTiles(e,t,i,r,n)},overlapTiles:function(e,t,i,r,n){return this.world.overlapTiles(e,t,i,r,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(e,t,i,r,n,s){void 0===r&&(r=60);var a=Math.atan2(i-e.y,t-e.x);return e.body.acceleration.setToPolar(a,r),void 0!==n&&void 0!==s&&e.body.maxVelocity.set(n,s),a},accelerateToObject:function(e,t,i,r,n){return this.accelerateTo(e,t.x,t.y,i,r,n)},closest:function(e,t){t||(t=this.world.bodies.entries);for(var i=Number.MAX_VALUE,r=null,n=e.x,s=e.y,o=t.length,h=0;h<o;h++){var c=t[h],l=c.body||c;if(e!==c&&e!==l&&e!==l.gameObject&&e!==l.center){var d=a(n,s,l.center.x,l.center.y);d<i&&(r=c,i=d)}}return r},furthest:function(e,t){t||(t=this.world.bodies.entries);for(var i=-1,r=null,n=e.x,s=e.y,o=t.length,h=0;h<o;h++){var c=t[h],l=c.body||c;if(e!==c&&e!==l&&e!==l.gameObject&&e!==l.center){var d=a(n,s,l.center.x,l.center.y);d>i&&(r=c,i=d)}}return r},moveTo:function(e,t,i,r,n){void 0===r&&(r=60),void 0===n&&(n=0);var a=Math.atan2(i-e.y,t-e.x);return n>0&&(r=s(e.x,e.y,t,i)/(n/1e3)),e.body.velocity.setToPolar(a,r),a},moveToObject:function(e,t,i,r){return this.moveTo(e,t.x,t.y,i,r)},velocityFromAngle:function(e,t,i){return void 0===t&&(t=60),void 0===i&&(i=new p),i.setToPolar(n(e),t)},velocityFromRotation:function(e,t,i){return void 0===t&&(t=60),void 0===i&&(i=new p),i.setToPolar(e,t)},overlapRect:function(e,t,i,r,n,s){return d(this.world,e,t,i,r,n,s)},overlapCirc:function(e,t,i,r,n){return l(this.world,e,t,i,r,n)},shutdown:function(){if(this.world){var e=this.systems.events;e.off(f.UPDATE,this.world.update,this.world),e.off(f.POST_UPDATE,this.world.postUpdate,this.world),e.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});u.register("ArcadePhysics",m,"arcadePhysics"),e.exports=m},13759:(e,t,i)=>{var r=i(83419),n=i(92209),s=i(68287);e.exports=new r({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Collision,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(e,t,i,r,n){s.call(this,e,t,i,r,n),this.body=null}})},37742:(e,t,i)=>{var r=i(83419),n=i(78389),s=i(37747),a=i(63012),o=i(43396),h=i(87841),c=i(37303),l=i(95829),d=i(26099);e.exports=new r({Mixins:[n],initialize:function(e,t){var i=64,r=64,n=void 0!==t;n&&t.displayWidth&&(i=t.displayWidth,r=t.displayHeight),n||(t={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=e,this.gameObject=n?t:void 0,this.isBody=!0,this.transform={x:t.x,y:t.y,rotation:t.angle,scaleX:t.scaleX,scaleY:t.scaleY,displayOriginX:t.displayOriginX,displayOriginY:t.displayOriginY},this.debugShowBody=e.defaults.debugShowBody,this.debugShowVelocity=e.defaults.debugShowVelocity,this.debugBodyColor=e.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(t.x-t.scaleX*t.displayOriginX,t.y-t.scaleY*t.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=t.angle,this.preRotation=t.angle,this.width=i,this.height=r,this.sourceWidth=i,this.sourceHeight=r,t.frame&&(this.sourceWidth=t.frame.realWidth,this.sourceHeight=t.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(r/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new d,this.newVelocity=new d,this.deltaMax=new d,this.acceleration=new d,this.allowDrag=!0,this.drag=new d,this.allowGravity=!0,this.gravity=new d,this.bounce=new d,this.worldBounce=null,this.customBoundsRectangle=e.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new d(1e4,1e4),this.maxSpeed=-1,this.friction=new d(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=s.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new d(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=l(!1),this.touching=l(!0),this.wasTouching=l(!0),this.blocked=l(!0),this.syncBounds=!1,this.physicsType=s.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=t.scaleX,this._sy=t.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var e=this.gameObject,t=this.transform;if(e.parentContainer){var i=e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);t.x=i.tx,t.y=i.ty,t.rotation=o(i.rotation),t.scaleX=i.scaleX,t.scaleY=i.scaleY,t.displayOriginX=e.displayOriginX,t.displayOriginY=e.displayOriginY}else t.x=e.x,t.y=e.y,t.rotation=e.angle,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.displayOriginX=e.displayOriginX,t.displayOriginY=e.displayOriginY;var r=!1;if(this.syncBounds){var n=e.getBounds(this._bounds);this.width=n.width,this.height=n.height,r=!0}else{var s=Math.abs(t.scaleX),a=Math.abs(t.scaleY);(this._sx!==s||this._sy!==a)&&(this.width=this.sourceWidth*s,this.height=this.sourceHeight*a,this._sx=s,this._sy=a,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var e=this.transform;this.position.x=e.x+e.scaleX*(this.offset.x-e.displayOriginX),this.position.y=e.y+e.scaleY*(this.offset.y-e.displayOriginY),this.updateCenter()},resetFlags:function(e){void 0===e&&(e=!1);var t=this.wasTouching,i=this.touching,r=this.blocked;e?l(!0,t):(t.none=i.none,t.up=i.up,t.down=i.down,t.left=i.left,t.right=i.right),l(!0,i),l(!0,r),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(e,t){if(e&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var i=this.position;this.prev.x=i.x,this.prev.y=i.y,this.prevFrame.x=i.x,this.prevFrame.y=i.y}e&&this.update(t)},update:function(e){var t=this.prev,i=this.position,r=this.velocity;if(t.set(i.x,i.y),!this.moves){this._dx=i.x-t.x,this._dy=i.y-t.y;return}if(this.directControl){var n=this.autoFrame;r.set((i.x-n.x)/e,(i.y-n.y)/e),this.world.updateMotion(this,e),this._dx=i.x-n.x,this._dy=i.y-n.y}else this.world.updateMotion(this,e),this.newVelocity.set(r.x*e,r.y*e),i.add(this.newVelocity),this._dx=i.x-t.x,this._dy=i.y-t.y;var s=r.x,o=r.y;if(this.updateCenter(),this.angle=Math.atan2(o,s),this.speed=Math.sqrt(s*s+o*o),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var h=this.blocked;this.world.emit(a.WORLD_BOUNDS,this,h.up,h.down,h.left,h.right)}},postUpdate:function(){var e=this.position,t=e.x-this.prevFrame.x,i=e.y-this.prevFrame.y,r=this.gameObject;if(this.moves){var n=this.deltaMax.x,a=this.deltaMax.y;0!==n&&0!==t&&(t<0&&t<-n?t=-n:t>0&&t>n&&(t=n)),0!==a&&0!==i&&(i<0&&i<-a?i=-a:i>0&&i>a&&(i=a)),r&&(r.x+=t,r.y+=i)}t<0?this.facing=s.FACING_LEFT:t>0&&(this.facing=s.FACING_RIGHT),i<0?this.facing=s.FACING_UP:i>0&&(this.facing=s.FACING_DOWN),this.allowRotation&&r&&(r.angle+=this.deltaZ()),this._tx=t,this._ty=i,this.autoFrame.set(e.x,e.y)},setBoundsRectangle:function(e){return this.customBoundsRectangle=e||this.world.bounds,this},checkWorldBounds:function(){var e=this.position,t=this.velocity,i=this.blocked,r=this.customBoundsRectangle,n=this.world.checkCollision,s=this.worldBounce?-this.worldBounce.x:-this.bounce.x,a=this.worldBounce?-this.worldBounce.y:-this.bounce.y,o=!1;return e.x<r.x&&n.left?(e.x=r.x,t.x*=s,i.left=!0,o=!0):this.right>r.right&&n.right&&(e.x=r.right-this.width,t.x*=s,i.right=!0,o=!0),e.y<r.y&&n.up?(e.y=r.y,t.y*=a,i.up=!0,o=!0):this.bottom>r.bottom&&n.down&&(e.y=r.bottom-this.height,t.y*=a,i.down=!0,o=!0),o&&(this.blocked.none=!1,this.updateCenter()),o},setOffset:function(e,t){return void 0===t&&(t=e),this.offset.set(e,t),this},setGameObject:function(e,t){if(void 0===t&&(t=!0),!e||!e.hasTransformComponent)return this;var i=this.world;return this.gameObject&&this.gameObject.body&&(i.disable(this.gameObject),this.gameObject.body=null),e.body&&i.disable(e),this.gameObject=e,e.body=this,this.setSize(),this.enable=t,this},setSize:function(e,t,i){void 0===i&&(i=!0);var r=this.gameObject;if(r&&(!e&&r.frame&&(e=r.frame.realWidth),!t&&r.frame&&(t=r.frame.realHeight)),this.sourceWidth=e,this.sourceHeight=t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&r&&r.getCenter){var n=(r.width-e)/2,s=(r.height-t)/2;this.offset.set(n,s)}return this.isCircle=!1,this.radius=0,this},setCircle:function(e,t,i){return void 0===t&&(t=this.offset.x),void 0===i&&(i=this.offset.y),e>0?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(t,i),this.updateCenter()):this.isCircle=!1,this},reset:function(e,t){this.stop();var i=this.gameObject;i&&(i.setPosition(e,t),this.rotation=i.angle,this.preRotation=i.angle);var r=this.position;i&&i.getTopLeft?i.getTopLeft(r):r.set(e,t),this.prev.copy(r),this.prevFrame.copy(r),this.autoFrame.copy(r),i&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(e){return e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom,e},hitTest:function(e,t){return this.isCircle?this.radius>0&&e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom&&(this.center.x-e)*(this.center.x-e)+(this.center.y-t)*(this.center.y-t)<=this.radius*this.radius:c(this,e,t)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(e){var t=this.position,i=t.x+this.halfWidth,r=t.y+this.halfHeight;this.debugShowBody&&(e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor),this.isCircle?e.strokeCircle(i,r,this.width/2):(this.checkCollision.up&&e.lineBetween(t.x,t.y,t.x+this.width,t.y),this.checkCollision.right&&e.lineBetween(t.x+this.width,t.y,t.x+this.width,t.y+this.height),this.checkCollision.down&&e.lineBetween(t.x,t.y+this.height,t.x+this.width,t.y+this.height),this.checkCollision.left&&e.lineBetween(t.x,t.y,t.x,t.y+this.height))),this.debugShowVelocity&&(e.lineStyle(e.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),e.lineBetween(i,r,i+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(e){return void 0===e&&(e=!0),this.directControl=e,this},setCollideWorldBounds:function(e,t,i,r){void 0===e&&(e=!0),this.collideWorldBounds=e;var n=void 0!==t,s=void 0!==i;return(n||s)&&(this.worldBounce||(this.worldBounce=new d),n&&(this.worldBounce.x=t),s&&(this.worldBounce.y=i)),void 0!==r&&(this.onWorldBounds=r),this},setVelocity:function(e,t){return this.velocity.set(e,t),e=this.velocity.x,t=this.velocity.y,this.speed=Math.sqrt(e*e+t*t),this},setVelocityX:function(e){return this.setVelocity(e,this.velocity.y)},setVelocityY:function(e){return this.setVelocity(this.velocity.x,e)},setMaxVelocity:function(e,t){return this.maxVelocity.set(e,t),this},setMaxVelocityX:function(e){return this.maxVelocity.x=e,this},setMaxVelocityY:function(e){return this.maxVelocity.y=e,this},setMaxSpeed:function(e){return this.maxSpeed=e,this},setSlideFactor:function(e,t){return this.slideFactor.set(e,t),this},setBounce:function(e,t){return this.bounce.set(e,t),this},setBounceX:function(e){return this.bounce.x=e,this},setBounceY:function(e){return this.bounce.y=e,this},setAcceleration:function(e,t){return this.acceleration.set(e,t),this},setAccelerationX:function(e){return this.acceleration.x=e,this},setAccelerationY:function(e){return this.acceleration.y=e,this},setAllowDrag:function(e){return void 0===e&&(e=!0),this.allowDrag=e,this},setAllowGravity:function(e){return void 0===e&&(e=!0),this.allowGravity=e,this},setAllowRotation:function(e){return void 0===e&&(e=!0),this.allowRotation=e,this},setDrag:function(e,t){return this.drag.set(e,t),this},setDamping:function(e){return this.useDamping=e,this},setDragX:function(e){return this.drag.x=e,this},setDragY:function(e){return this.drag.y=e,this},setGravity:function(e,t){return this.gravity.set(e,t),this},setGravityX:function(e){return this.gravity.x=e,this},setGravityY:function(e){return this.gravity.y=e,this},setFriction:function(e,t){return this.friction.set(e,t),this},setFrictionX:function(e){return this.friction.x=e,this},setFrictionY:function(e){return this.friction.y=e,this},setAngularVelocity:function(e){return this.angularVelocity=e,this},setAngularAcceleration:function(e){return this.angularAcceleration=e,this},setAngularDrag:function(e){return this.angularDrag=e,this},setMass:function(e){return this.mass=e,this},setImmovable:function(e){return void 0===e&&(e=!0),this.immovable=e,this},setEnable:function(e){return void 0===e&&(e=!0),this.enable=e,this},processX:function(e,t,i,r){this.x+=e,this.updateCenter(),null!==t&&(this.velocity.x=t*this.slideFactor.x);var n=this.blocked;i&&(n.left=!0,n.none=!1),r&&(n.right=!0,n.none=!1)},processY:function(e,t,i,r){this.y+=e,this.updateCenter(),null!==t&&(this.velocity.y=t*this.slideFactor.y);var n=this.blocked;i&&(n.up=!0,n.none=!1),r&&(n.down=!0,n.none=!1)},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}})},79342:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r,n,s,a){this.world=e,this.name="",this.active=!0,this.overlapOnly=t,this.object1=i,this.object2=r,this.collideCallback=n,this.processCallback=s,this.callbackContext=a},setName:function(e){return this.name=e,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}})},66022:(e,t,i)=>{var r=i(71289),n=i(13759),s=i(37742),a=i(83419),o=i(37747),h=i(60758),c=i(72624),l=i(71464);e.exports=new a({initialize:function(e){this.world=e,this.scene=e.scene,this.sys=e.scene.sys},collider:function(e,t,i,r,n){return this.world.addCollider(e,t,i,r,n)},overlap:function(e,t,i,r,n){return this.world.addOverlap(e,t,i,r,n)},existing:function(e,t){var i=t?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(e,i),e},staticImage:function(e,t,i,n){var s=new r(this.scene,e,t,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},image:function(e,t,i,n){var s=new r(this.scene,e,t,i,n);return this.sys.displayList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticSprite:function(e,t,i,r){var s=new n(this.scene,e,t,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.STATIC_BODY),s},sprite:function(e,t,i,r){var s=new n(this.scene,e,t,i,r);return this.sys.displayList.add(s),this.sys.updateList.add(s),this.world.enableBody(s,o.DYNAMIC_BODY),s},staticGroup:function(e,t){return this.sys.updateList.add(new l(this.world,this.world.scene,e,t))},group:function(e,t){return this.sys.updateList.add(new h(this.world,this.world.scene,e,t))},body:function(e,t,i,r){var n=new s(this.world);return n.position.set(e,t),i&&r&&n.setSize(i,r),this.world.add(n,o.DYNAMIC_BODY),n},staticBody:function(e,t,i,r){var n=new c(this.world);return n.position.set(e,t),i&&r&&n.setSize(i,r),this.world.add(n,o.STATIC_BODY),n},destroy:function(){this.world=null,this.scene=null,this.sys=null}})},79599:e=>{e.exports=function(e){var t=0;if(Array.isArray(e))for(var i=0;i<e.length;i++)t|=e[i];else t=e;return t}},64897:(e,t,i)=>{var r=i(37747);e.exports=function(e,t,i,n){var s=0,a=e.deltaAbsX()+t.deltaAbsX()+n;return 0===e._dx&&0===t._dx?(e.embedded=!0,t.embedded=!0):e._dx>t._dx?(s=e.right-t.x)>a&&!i||!1===e.checkCollision.right||!1===t.checkCollision.left?s=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0,t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0),e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0)):e._dx<t._dx&&(-(s=e.x-t.width-t.x)>a&&!i||!1===e.checkCollision.left||!1===t.checkCollision.right?s=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0,t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0),e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0))),e.overlapX=s,t.overlapX=s,s}},45170:(e,t,i)=>{var r=i(37747);e.exports=function(e,t,i,n){var s=0,a=e.deltaAbsY()+t.deltaAbsY()+n;return 0===e._dy&&0===t._dy?(e.embedded=!0,t.embedded=!0):e._dy>t._dy?(s=e.bottom-t.y)>a&&!i||!1===e.checkCollision.down||!1===t.checkCollision.up?s=0:(e.touching.none=!1,e.touching.down=!0,t.touching.none=!1,t.touching.up=!0,t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0),e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0)):e._dy<t._dy&&(-(s=e.y-t.bottom)>a&&!i||!1===e.checkCollision.up||!1===t.checkCollision.down?s=0:(e.touching.none=!1,e.touching.up=!0,t.touching.none=!1,t.touching.down=!0,t.physicsType!==r.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0),e.physicsType!==r.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0))),e.overlapY=s,t.overlapY=s,s}},60758:(e,t,i)=>{var r=i(13759),n=i(83419),s=i(78389),a=i(37747),o=i(95540),h=i(26479),c=i(41212);e.exports=new n({Extends:h,Mixins:[s],initialize:function(e,t,i,n){if(i||n)if(c(i))n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(i)&&c(i[0])){var s=this;i.forEach(function(e){e.internalCreateCallback=s.createCallbackHandler,e.internalRemoveCallback=s.removeCallbackHandler,e.classType=o(e,"classType",r)}),n=null}else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=e,n&&(n.classType=o(n,"classType",r)),this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=0x7fffffff,this.defaults={setCollideWorldBounds:o(n,"collideWorldBounds",!1),setBoundsRectangle:o(n,"customBoundsRectangle",null),setAccelerationX:o(n,"accelerationX",0),setAccelerationY:o(n,"accelerationY",0),setAllowDrag:o(n,"allowDrag",!0),setAllowGravity:o(n,"allowGravity",!0),setAllowRotation:o(n,"allowRotation",!0),setDamping:o(n,"useDamping",!1),setBounceX:o(n,"bounceX",0),setBounceY:o(n,"bounceY",0),setDragX:o(n,"dragX",0),setDragY:o(n,"dragY",0),setEnable:o(n,"enable",!0),setGravityX:o(n,"gravityX",0),setGravityY:o(n,"gravityY",0),setFrictionX:o(n,"frictionX",0),setFrictionY:o(n,"frictionY",0),setMaxSpeed:o(n,"maxSpeed",-1),setMaxVelocityX:o(n,"maxVelocityX",1e4),setMaxVelocityY:o(n,"maxVelocityY",1e4),setVelocityX:o(n,"velocityX",0),setVelocityY:o(n,"velocityY",0),setAngularVelocity:o(n,"angularVelocity",0),setAngularAcceleration:o(n,"angularAcceleration",0),setAngularDrag:o(n,"angularDrag",0),setMass:o(n,"mass",1),setImmovable:o(n,"immovable",!1)},h.call(this,t,i,n),this.type="PhysicsGroup"},createCallbackHandler:function(e){e.body||this.world.enableBody(e,a.DYNAMIC_BODY);var t=e.body;for(var i in this.defaults)t[i](this.defaults[i])},removeCallbackHandler:function(e){e.body&&this.world.disableBody(e)},setVelocity:function(e,t,i){void 0===i&&(i=0);for(var r=this.getChildren(),n=0;n<r.length;n++)r[n].body.velocity.set(e+n*i,t+n*i);return this},setVelocityX:function(e,t){void 0===t&&(t=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.x=e+r*t;return this},setVelocityY:function(e,t){void 0===t&&(t=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.y=e+r*t;return this}})},3017:e=>{var t,i,r,n,s,a,o,h,c,l,d,u,f,p,g,m,v,y=function(){return l&&g&&i.blocked.right?(t.processX(-v,o,!1,!0),1):c&&m&&i.blocked.left?(t.processX(v,o,!0),1):f&&m&&t.blocked.right?(i.processX(-v,h,!1,!0),2):u&&g&&t.blocked.left?(i.processX(v,h,!0),2):0},b=function(e){if(r&&n)v*=.5,0===e||3===e?(t.processX(v,s),i.processX(-v,a)):(t.processX(-v,s),i.processX(v,a));else if(r&&!n)0===e||3===e?t.processX(v,o,!0):t.processX(-v,o,!1,!0);else if(!r&&n)0===e||3===e?i.processX(-v,h,!1,!0):i.processX(v,h,!0);else{var g=.5*v;0===e?p?(t.processX(v,0,!0),i.processX(0,null,!1,!0)):f?(t.processX(g,0,!0),i.processX(-g,0,!1,!0)):(t.processX(g,i.velocity.x,!0),i.processX(-g,null,!1,!0)):1===e?d?(t.processX(0,null,!1,!0),i.processX(v,0,!0)):l?(t.processX(-g,0,!1,!0),i.processX(g,0,!0)):(t.processX(-g,null,!1,!0),i.processX(g,t.velocity.x,!0)):2===e?p?(t.processX(-v,0,!1,!0),i.processX(0,null,!0)):u?(t.processX(-g,0,!1,!0),i.processX(g,0,!0)):(t.processX(-g,i.velocity.x,!1,!0),i.processX(g,null,!0)):3===e&&(d?(t.processX(0,null,!0),i.processX(-v,0,!1,!0)):c?(t.processX(g,0,!0),i.processX(-g,0,!1,!0)):(t.processX(g,i.velocity.y,!0),i.processX(-g,null,!1,!0)))}return!0};e.exports={BlockCheck:y,Check:function(){var e=t.velocity.x,r=i.velocity.x,n=Math.sqrt(r*r*i.mass/t.mass)*(r>0?1:-1),o=Math.sqrt(e*e*t.mass/i.mass)*(e>0?1:-1),h=(n+o)*.5;return(n-=h,o-=h,s=h+n*t.bounce.x,a=h+o*i.bounce.x,c&&m)?b(0):u&&g?b(1):l&&g?b(2):!!f&&!!m&&b(3)},Set:function(e,s,a){t=e,i=s;var b=t.velocity.x,x=i.velocity.x;return r=t.pushable,c=t._dx<0,l=t._dx>0,d=0===t._dx,g=Math.abs(t.right-i.x)<=Math.abs(i.right-t.x),o=x-b*t.bounce.x,n=i.pushable,u=i._dx<0,f=i._dx>0,p=0===i._dx,m=!g,h=b-x*i.bounce.x,v=Math.abs(a),y()},Run:b,RunImmovableBody1:function(e){if(1===e?i.velocity.x=0:g?i.processX(v,h,!0):i.processX(-v,h,!1,!0),t.moves){var r=t.directControl?t.y-t.autoFrame.y:t.y-t.prev.y;i.y+=r*t.friction.y,i._dy=i.y-i.prev.y}},RunImmovableBody2:function(e){if(2===e?t.velocity.x=0:m?t.processX(v,o,!0):t.processX(-v,o,!1,!0),i.moves){var r=i.directControl?i.y-i.autoFrame.y:i.y-i.prev.y;t.y+=r*i.friction.y,t._dy=t.y-t.prev.y}}}},47962:e=>{var t,i,r,n,s,a,o,h,c,l,d,u,f,p,g,m,v,y=function(){return l&&g&&i.blocked.down?(t.processY(-v,o,!1,!0),1):c&&m&&i.blocked.up?(t.processY(v,o,!0),1):f&&m&&t.blocked.down?(i.processY(-v,h,!1,!0),2):u&&g&&t.blocked.up?(i.processY(v,h,!0),2):0},b=function(e){if(r&&n)v*=.5,0===e||3===e?(t.processY(v,s),i.processY(-v,a)):(t.processY(-v,s),i.processY(v,a));else if(r&&!n)0===e||3===e?t.processY(v,o,!0):t.processY(-v,o,!1,!0);else if(!r&&n)0===e||3===e?i.processY(-v,h,!1,!0):i.processY(v,h,!0);else{var g=.5*v;0===e?p?(t.processY(v,0,!0),i.processY(0,null,!1,!0)):f?(t.processY(g,0,!0),i.processY(-g,0,!1,!0)):(t.processY(g,i.velocity.y,!0),i.processY(-g,null,!1,!0)):1===e?d?(t.processY(0,null,!1,!0),i.processY(v,0,!0)):l?(t.processY(-g,0,!1,!0),i.processY(g,0,!0)):(t.processY(-g,null,!1,!0),i.processY(g,t.velocity.y,!0)):2===e?p?(t.processY(-v,0,!1,!0),i.processY(0,null,!0)):u?(t.processY(-g,0,!1,!0),i.processY(g,0,!0)):(t.processY(-g,i.velocity.y,!1,!0),i.processY(g,null,!0)):3===e&&(d?(t.processY(0,null,!0),i.processY(-v,0,!1,!0)):c?(t.processY(g,0,!0),i.processY(-g,0,!1,!0)):(t.processY(g,i.velocity.y,!0),i.processY(-g,null,!1,!0)))}return!0};e.exports={BlockCheck:y,Check:function(){var e=t.velocity.y,r=i.velocity.y,n=Math.sqrt(r*r*i.mass/t.mass)*(r>0?1:-1),o=Math.sqrt(e*e*t.mass/i.mass)*(e>0?1:-1),h=(n+o)*.5;return(n-=h,o-=h,s=h+n*t.bounce.y,a=h+o*i.bounce.y,c&&m)?b(0):u&&g?b(1):l&&g?b(2):!!f&&!!m&&b(3)},Set:function(e,s,a){t=e,i=s;var b=t.velocity.y,x=i.velocity.y;return r=t.pushable,c=t._dy<0,l=t._dy>0,d=0===t._dy,g=Math.abs(t.bottom-i.y)<=Math.abs(i.bottom-t.y),o=x-b*t.bounce.y,n=i.pushable,u=i._dy<0,f=i._dy>0,p=0===i._dy,m=!g,h=b-x*i.bounce.y,v=Math.abs(a),y()},Run:b,RunImmovableBody1:function(e){if(1===e?i.velocity.y=0:g?i.processY(v,h,!0):i.processY(-v,h,!1,!0),t.moves){var r=t.directControl?t.x-t.autoFrame.x:t.x-t.prev.x;i.x+=r*t.friction.x,i._dx=i.x-i.prev.x}},RunImmovableBody2:function(e){if(2===e?t.velocity.y=0:m?t.processY(v,o,!0):t.processY(-v,o,!1,!0),i.moves){var r=i.directControl?i.x-i.autoFrame.x:i.x-i.prev.x;t.x+=r*i.friction.x,t._dx=t.x-t.prev.x}}}},14087:(e,t,i)=>{var r=i(64897),n=i(3017);e.exports=function(e,t,i,s,a){void 0===a&&(a=r(e,t,i,s));var o=e.immovable,h=t.immovable;if(i||0===a||o&&h||e.customSeparateX||t.customSeparateX)return 0!==a||e.embedded&&t.embedded;var c=n.Set(e,t,a);return o||h?(o?n.RunImmovableBody1(c):h&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},89936:(e,t,i)=>{var r=i(45170),n=i(47962);e.exports=function(e,t,i,s,a){void 0===a&&(a=r(e,t,i,s));var o=e.immovable,h=t.immovable;if(i||0===a||o&&h||e.customSeparateY||t.customSeparateY)return 0!==a||e.embedded&&t.embedded;var c=n.Set(e,t,a);return o||h?(o?n.RunImmovableBody1(c):h&&n.RunImmovableBody2(c),!0):c>0||n.Check()}},95829:e=>{e.exports=function(e,t){return void 0===t&&(t={}),t.none=e,t.up=!1,t.down=!1,t.left=!1,t.right=!1,e||(t.up=!0,t.down=!0,t.left=!0,t.right=!0),t}},72624:(e,t,i)=>{var r=i(87902),n=i(83419),s=i(78389),a=i(37747),o=i(37303),h=i(95829),c=i(26099);e.exports=new n({Mixins:[s],initialize:function(e,t){var i=64,r=64,n=void 0!==t;n&&t.displayWidth&&(i=t.displayWidth,r=t.displayHeight),n||(t={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=e,this.gameObject=n?t:void 0,this.isBody=!0,this.debugShowBody=e.defaults.debugShowStaticBody,this.debugBodyColor=e.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(t.x-i*t.originX,t.y-r*t.originY),this.width=i,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=c.ZERO,this.allowGravity=!1,this.gravity=c.ZERO,this.bounce=c.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=h(!1),this.touching=h(!0),this.wasTouching=h(!0),this.blocked=h(!0),this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),!e||!e.hasTransformComponent)return this;var r=this.world;return this.gameObject&&this.gameObject.body&&(r.disable(this.gameObject),this.gameObject.body=null),e.body&&r.disable(e),this.gameObject=e,e.body=this,this.setSize(),t&&this.updateFromGameObject(),this.enable=i,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var e=this.gameObject;return e.getTopLeft(this.position),this.width=e.displayWidth,this.height=e.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(e,t){return void 0===t&&(t=e),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(e,t),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(e,t,i){void 0===i&&(i=!0);var r=this.gameObject;if(r&&r.frame&&(e||(e=r.frame.realWidth),t||(t=r.frame.realHeight)),this.world.staticTree.remove(this),this.width=e,this.height=t,this.halfWidth=Math.floor(e/2),this.halfHeight=Math.floor(t/2),i&&r&&r.getCenter){var n=r.displayWidth/2,s=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,s-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(e,t,i){return void 0===t&&(t=this.offset.x),void 0===i&&(i=this.offset.y),e>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=e,this.width=2*e,this.height=2*e,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(t,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(e,t){var i=this.gameObject;void 0===e&&(e=i.x),void 0===t&&(t=i.y),this.world.staticTree.remove(this),i.setPosition(e,t),i.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(e){return e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom,e},hitTest:function(e,t){return this.isCircle?r(this,e,t):o(this,e,t)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(e){var t=this.position,i=t.x+this.halfWidth,r=t.y+this.halfHeight;this.debugShowBody&&(e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?e.strokeCircle(i,r,this.width/2):e.strokeRect(t.x,t.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(e){return e<=0&&(e=.1),this.mass=e,this},x:{get:function(){return this.position.x},set:function(e){this.world.staticTree.remove(this),this.position.x=e,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(e){this.world.staticTree.remove(this),this.position.y=e,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}})},71464:(e,t,i)=>{var r=i(13759),n=i(83419),s=i(78389),a=i(37747),o=i(95540),h=i(26479),c=i(41212);e.exports=new n({Extends:h,Mixins:[s],initialize:function(e,t,i,n){i||n?c(i)?(n=i,i=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=o(n,"classType",r)):Array.isArray(i)&&c(i[0])?(n=i,i=null,n.forEach(function(e){e.internalCreateCallback=this.createCallbackHandler,e.internalRemoveCallback=this.removeCallbackHandler,e.createMultipleCallback=this.createMultipleCallbackHandler,e.classType=o(e,"classType",r)})):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=e,this.physicsType=a.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,h.call(this,t,i,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(e){e.body||this.world.enableBody(e,a.STATIC_BODY)},removeCallbackHandler:function(e){e.body&&this.world.disableBody(e)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var e=this.children.entries,t=0;t<e.length;t++)e[t].body.reset();return this}})},82248:(e,t,i)=>{var r=i(55495),n=i(37742),s=i(45319),a=i(83419),o=i(79342),h=i(37747),c=i(20339),l=i(52816),d=i(50792),u=i(63012),f=i(43855),p=i(5470),g=i(94977),m=i(64897),v=i(45170),y=i(96523),b=i(35154),x=i(36383),E=i(25774),T=i(96602),A=i(87841),w=i(59542),S=i(40012),C=i(14087),I=i(89936),_=i(35072),O=i(72624),P=i(2483),M=i(61340),R=i(26099),L=i(15994);e.exports=new a({Extends:d,initialize:function(e,t){d.call(this),this.scene=e,this.bodies=new _,this.staticBodies=new _,this.pendingDestroy=new _,this.colliders=new E,this.gravity=new R(b(t,"gravity.x",0),b(t,"gravity.y",0)),this.bounds=new A(b(t,"x",0),b(t,"y",0),b(t,"width",e.sys.scale.width),b(t,"height",e.sys.scale.height)),this.checkCollision={up:b(t,"checkCollision.up",!0),down:b(t,"checkCollision.down",!0),left:b(t,"checkCollision.left",!0),right:b(t,"checkCollision.right",!0)},this.fps=b(t,"fps",60),this.fixedStep=b(t,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=b(t,"timeScale",1),this.OVERLAP_BIAS=b(t,"overlapBias",4),this.TILE_BIAS=b(t,"tileBias",16),this.forceX=b(t,"forceX",!1),this.isPaused=b(t,"isPaused",!1),this._total=0,this.drawDebug=b(t,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:b(t,"debugShowBody",!0),debugShowStaticBody:b(t,"debugShowStaticBody",!0),debugShowVelocity:b(t,"debugShowVelocity",!0),bodyDebugColor:b(t,"debugBodyColor",0xff00ff),staticBodyDebugColor:b(t,"debugStaticBodyColor",255),velocityDebugColor:b(t,"debugVelocityColor",65280)},this.maxEntries=b(t,"maxEntries",16),this.useTree=b(t,"useTree",!0),this.tree=new w(this.maxEntries),this.staticTree=new w(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new M,this._tempMatrix2=new M,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(e,t){void 0===t&&(t=h.DYNAMIC_BODY),Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i];if(r.isParent)for(var n=r.getChildren(),s=0;s<n.length;s++){var a=n[s];a.isParent?this.enable(a,t):this.enableBody(a,t)}else this.enableBody(r,t)}},enableBody:function(e,t){return void 0===t&&(t=h.DYNAMIC_BODY),e.hasTransformComponent&&(e.body||(t===h.DYNAMIC_BODY?e.body=new n(this,e):t===h.STATIC_BODY&&(e.body=new O(this,e))),this.add(e.body)),e},add:function(e){return e.physicsType===h.DYNAMIC_BODY?this.bodies.set(e):e.physicsType===h.STATIC_BODY&&(this.staticBodies.set(e),this.staticTree.insert(e)),e.enable=!0,e},disable:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];if(i.isParent)for(var r=i.getChildren(),n=0;n<r.length;n++){var s=r[n];s.isParent?this.disable(s):this.disableBody(s.body)}else this.disableBody(i.body)}},disableBody:function(e){this.remove(e),e.enable=!1},remove:function(e){e.physicsType===h.DYNAMIC_BODY?(this.tree.remove(e),this.bodies.delete(e)):e.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(e),this.staticTree.remove(e))},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},setBounds:function(e,t,i,r,n,s,a,o){return this.bounds.setTo(e,t,i,r),void 0!==n&&this.setBoundsCollision(n,s,a,o),this},setBoundsCollision:function(e,t,i,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.checkCollision.left=e,this.checkCollision.right=t,this.checkCollision.up=i,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(u.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(u.RESUME),this},addCollider:function(e,t,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new o(this,!1,e,t,i,r,n);return this.colliders.add(s),s},addOverlap:function(e,t,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i);var s=new o(this,!0,e,t,i,r,n);return this.colliders.add(s),s},removeCollider:function(e){return this.colliders.remove(e),this},setFPS:function(e){return this.fps=e,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(e,t){if(!this.isPaused&&0!==this.bodies.size){var i,r,n=this._frameTime,s=this._frameTimeMS*this.timeScale;this._elapsed+=t;var a=this.bodies.entries,o=this._elapsed>=s;for(this.fixedStep||(n=.001*t,o=!0,this._elapsed=0),i=0;i<a.length;i++)(r=a[i]).enable&&r.preUpdate(o,n);if(o){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(a));var h=this.colliders.update();for(i=0;i<h.length;i++){var c=h[i];c.active&&c.update()}this.emit(u.WORLD_STEP,n)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(n)}},step:function(e){var t,i,r=this.bodies.entries,n=r.length;for(t=0;t<n;t++)(i=r[t]).enable&&i.update(e);this.useTree&&(this.tree.clear(),this.tree.load(r));var s=this.colliders.update();for(t=0;t<s.length;t++){var a=s[t];a.active&&a.update()}this.emit(u.WORLD_STEP,e),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var e,t,i=this.bodies.entries,r=i.length,n=this.bodies,s=this.staticBodies;if(this.stepsLastFrame)for(e=0,this.stepsLastFrame=0;e<r;e++)(t=i[e]).enable&&t.postUpdate();if(this.drawDebug){var a=this.debugGraphic;for(a.clear(),e=0;e<r;e++)(t=i[e]).willDrawDebug()&&t.drawDebug(a);for(e=0,r=(i=s.entries).length;e<r;e++)(t=i[e]).willDrawDebug()&&t.drawDebug(a)}var o=this.pendingDestroy;if(o.size>0){var c=this.tree,l=this.staticTree;for(e=0,r=(i=o.entries).length;e<r;e++)(t=i[e]).physicsType===h.DYNAMIC_BODY?(c.remove(t),n.delete(t)):t.physicsType===h.STATIC_BODY&&(l.remove(t),s.delete(t)),t.world=void 0,t.gameObject=void 0;o.clear()}},updateMotion:function(e,t){e.allowRotation&&this.computeAngularVelocity(e,t),this.computeVelocity(e,t)},computeAngularVelocity:function(e,t){var i=e.angularVelocity,r=e.angularAcceleration,n=e.angularDrag,a=e.maxAngular;r?i+=r*t:e.allowDrag&&n&&(p(i-(n*=t),0,.1)?i-=n:g(i+n,0,.1)?i+=n:i=0);var o=(i=s(i,-a,a))-e.angularVelocity;e.angularVelocity+=o,e.rotation+=e.angularVelocity*t},computeVelocity:function(e,t){var i=e.velocity.x,r=e.acceleration.x,n=e.drag.x,a=e.maxVelocity.x,o=e.velocity.y,h=e.acceleration.y,c=e.drag.y,l=e.maxVelocity.y,d=e.speed,u=e.maxSpeed,m=e.allowDrag,v=e.useDamping;e.allowGravity&&(i+=(this.gravity.x+e.gravity.x)*t,o+=(this.gravity.y+e.gravity.y)*t),r?i+=r*t:m&&n&&(v?(i*=n=Math.pow(n,t),f(d=Math.sqrt(i*i+o*o),0,.001)&&(i=0)):p(i-(n*=t),0,.01)?i-=n:g(i+n,0,.01)?i+=n:i=0),h?o+=h*t:m&&c&&(v?(o*=c=Math.pow(c,t),f(d=Math.sqrt(i*i+o*o),0,.001)&&(o=0)):p(o-(c*=t),0,.01)?o-=c:g(o+c,0,.01)?o+=c:o=0),i=s(i,-a,a),o=s(o,-l,l),e.velocity.set(i,o),u>-1&&e.velocity.length()>u&&(e.velocity.normalize().scale(u),d=u),e.speed=d},separate:function(e,t,i,r,n){var s,a,o=!1,h=!0;if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t)||(e.collisionMask&t.collisionCategory)==0||(t.collisionMask&e.collisionCategory)==0||i&&!1===i.call(r,e.gameObject||e,t.gameObject||t))return o;if(e.isCircle||t.isCircle){var c=this.separateCircle(e,t,n);c.result?(o=!0,h=!1):(s=c.x,a=c.y,h=!0)}if(h){var l=!1,d=!1,f=this.OVERLAP_BIAS;n?(l=C(e,t,n,f,s),d=I(e,t,n,f,a)):this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(l=C(e,t,n,f,s),this.intersects(e,t)&&(d=I(e,t,n,f,a))):(d=I(e,t,n,f,a),this.intersects(e,t)&&(l=C(e,t,n,f,s))),o=l||d}return o&&(n?(e.onOverlap||t.onOverlap)&&this.emit(u.OVERLAP,e.gameObject,t.gameObject,e,t):(e.onCollide||t.onCollide)&&this.emit(u.COLLIDE,e.gameObject,t.gameObject,e,t)),o},separateCircle:function(e,t,i){m(e,t,!1,0),v(e,t,!1,0);var n=e.isCircle,s=t.isCircle,a=e.center,o=t.center,h=e.immovable,d=t.immovable,u=e.velocity,f=t.velocity,p=0,g=!0;if(n!==s){g=!1;var y=a.x,b=a.y,E=e.halfWidth,T=t.position.x,A=t.position.y,w=t.right,S=t.bottom;s&&(y=o.x,b=o.y,E=t.halfWidth,T=e.position.x,A=e.position.y,w=e.right,S=e.bottom),b<A?y<T?p=c(y,b,T,A)-E:y>w&&(p=c(y,b,w,A)-E):b>S&&(y<T?p=c(y,b,T,S)-E:y>w&&(p=c(y,b,w,S)-E)),p*=-1}else p=e.halfWidth+t.halfWidth-l(a,o);e.overlapR=p,t.overlapR=p;var C=r(a,o),I=(p+x.EPSILON)*Math.cos(C),_=(p+x.EPSILON)*Math.sin(C),O={overlap:p,result:!1,x:I,y:_};if(i&&(!g||g&&0!==p))return O.result=!0,O;if(!g&&0===p||h&&d||e.customSeparateX||t.customSeparateX)return O.x=void 0,O.y=void 0,O;var P=!e.pushable&&!t.pushable;if(g){var M=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),R=(o.x-a.x)/M||0,L=(o.y-a.y)/M||0,D=2*(u.x*R+u.y*L-f.x*R-f.y*L)/(e.mass+t.mass);(h||d||!e.pushable||!t.pushable)&&(D*=2),!h&&e.pushable&&(u.x=u.x-D/e.mass*R,u.y=u.y-D/e.mass*L,u.multiply(e.bounce)),!d&&t.pushable&&(f.x=f.x+D/t.mass*R,f.y=f.y+D/t.mass*L,f.multiply(t.bounce)),h||d||(I*=.5,_*=.5),(!h||e.pushable||P)&&(e.x-=I,e.y-=_,e.updateCenter()),(!d||t.pushable||P)&&(t.x+=I,t.y+=_,t.updateCenter()),O.result=!0}else!h&&(e.pushable||P)&&(e.x-=I,e.y-=_,e.updateCenter()),!d&&(t.pushable||P)&&(t.x+=I,t.y+=_,t.updateCenter()),O.x=void 0,O.y=void 0;return O},intersects:function(e,t){return e!==t&&(e.isCircle||t.isCircle?e.isCircle?t.isCircle?l(e.center,t.center)<=e.halfWidth+t.halfWidth:this.circleBodyIntersects(e,t):this.circleBodyIntersects(t,e):!(e.right<=t.left||e.bottom<=t.top||e.left>=t.right||e.top>=t.bottom))},circleBodyIntersects:function(e,t){var i=s(e.center.x,t.left,t.right),r=s(e.center.y,t.top,t.bottom);return(e.center.x-i)*(e.center.x-i)+(e.center.y-r)*(e.center.y-r)<=e.halfWidth*e.halfWidth},overlap:function(e,t,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(e,t,i,r,n,!0)},collide:function(e,t,i,r,n){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),this.collideObjects(e,t,i,r,n,!1)},collideObjects:function(e,t,i,r,n,s){e.isParent&&(void 0===e.physicsType||void 0===t||e===t)&&(e=e.children.entries),t&&t.isParent&&void 0===t.physicsType&&(t=t.children.entries);var a,o,h=Array.isArray(e),c=Array.isArray(t);if(this._total=0,h||c)if(!h&&c)for(a=0;a<t.length;a++)this.collideHandler(e,t[a],i,r,n,s);else if(h&&!c)if(t)for(a=0;a<e.length;a++)this.collideHandler(e[a],t,i,r,n,s);else for(a=0;a<e.length;a++){var l=e[a];for(o=a+1;o<e.length;o++)a!==o&&this.collideHandler(l,e[o],i,r,n,s)}else for(a=0;a<e.length;a++)for(o=0;o<t.length;o++)this.collideHandler(e[a],t[o],i,r,n,s);else this.collideHandler(e,t,i,r,n,s);return this._total>0},collideHandler:function(e,t,i,r,n,s){if(void 0===t&&e.isParent)return this.collideGroupVsGroup(e,e,i,r,n,s);if(!e||!t)return!1;if(e.body||e.isBody){if(t.body||t.isBody)return this.collideSpriteVsSprite(e,t,i,r,n,s);else if(t.isParent)return this.collideSpriteVsGroup(e,t,i,r,n,s);else if(t.isTilemap)return this.collideSpriteVsTilemapLayer(e,t,i,r,n,s)}else if(e.isParent){if(t.body||t.isBody)return this.collideSpriteVsGroup(t,e,i,r,n,s);else if(t.isParent)return this.collideGroupVsGroup(e,t,i,r,n,s);else if(t.isTilemap)return this.collideGroupVsTilemapLayer(e,t,i,r,n,s)}else if(e.isTilemap){if(t.body||t.isBody)return this.collideSpriteVsTilemapLayer(t,e,i,r,n,s);else if(t.isParent)return this.collideGroupVsTilemapLayer(t,e,i,r,n,s)}},canCollide:function(e,t){return e&&t&&(e.collisionMask&t.collisionCategory)!=0&&(t.collisionMask&e.collisionCategory)!=0},collideSpriteVsSprite:function(e,t,i,r,n,s){var a=e.isBody?e:e.body,o=t.isBody?t:t.body;return!!this.canCollide(a,o)&&(this.separate(a,o,r,n,s)&&(i&&i.call(n,e,t),this._total++),!0)},collideSpriteVsGroup:function(e,t,i,r,n,s){var a,o,c,l=e.isBody?e:e.body;if(0!==t.getLength()&&l&&l.enable&&!l.checkCollision.none&&this.canCollide(l,t))if(this.useTree||t.physicsType===h.STATIC_BODY){var d=this.treeMinMax;d.minX=l.left,d.minY=l.top,d.maxX=l.right,d.maxY=l.bottom;var u=t.physicsType===h.DYNAMIC_BODY?this.tree.search(d):this.staticTree.search(d);for(a=0,o=u.length;a<o;a++)l!==(c=u[a])&&c.enable&&!c.checkCollision.none&&t.contains(c.gameObject)&&this.separate(l,c,r,n,s)&&(i&&i.call(n,l.gameObject,c.gameObject),this._total++)}else{var f=t.getChildren(),p=t.children.entries.indexOf(e);for(a=0,o=f.length;a<o;a++)(c=f[a].body)&&a!==p&&c.enable&&this.separate(l,c,r,n,s)&&(i&&i.call(n,l.gameObject,c.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(e,t,i,r,n,s){if(!this.canCollide(e,t))return!1;var a=e.getChildren();if(0===a.length)return!1;for(var o=!1,h=0;h<a.length;h++)(a[h].body||a[h].isBody)&&this.collideSpriteVsTilemapLayer(a[h],t,i,r,n,s)&&(o=!0);return o},collideTiles:function(e,t,i,r,n){return 0!==t.length&&(!e.body||!!e.body.enable)&&(!e.isBody||!!e.enable)&&this.collideSpriteVsTilesHandler(e,t,i,r,n,!1,!1)},overlapTiles:function(e,t,i,r,n){return 0!==t.length&&(!e.body||!!e.body.enable)&&(!e.isBody||!!e.enable)&&this.collideSpriteVsTilesHandler(e,t,i,r,n,!0,!1)},collideSpriteVsTilemapLayer:function(e,t,i,r,n,s){var a=e.isBody?e:e.body;if(!a.enable||a.checkCollision.none||!this.canCollide(a,t))return!1;var o=t.layer,h=y(a.x-o.tileWidth*t.scaleX,a.y-o.tileHeight*t.scaleY,a.width+o.tileWidth*t.scaleX,a.height+o.tileHeight*t.scaleY,s?null:this.tileFilterOptions,t.scene.cameras.main,t.layer);return 0!==h.length&&this.collideSpriteVsTilesHandler(e,h,i,r,n,s,!0)},collideSpriteVsTilesHandler:function(e,t,i,r,n,s,a){for(var o,h,c=e.isBody?e:e.body,l={left:0,right:0,top:0,bottom:0},d=!1,f=0;f<t.length;f++){var p=(h=(o=t[f]).tilemapLayer).tileToWorldXY(o.x,o.y);l.left=p.x,l.top=p.y,l.right=l.left+o.width*h.scaleX,l.bottom=l.top+o.height*h.scaleY,P(l,c)&&(!r||r.call(n,e,o))&&T(o,e)&&(s||S(f,c,o,l,h,this.TILE_BIAS,a))&&(this._total++,d=!0,i&&i.call(n,e,o),s&&c.onOverlap?this.emit(u.TILE_OVERLAP,e,o,c):c.onCollide&&this.emit(u.TILE_COLLIDE,e,o,c))}return d},collideGroupVsGroup:function(e,t,i,r,n,s){if(0!==e.getLength()&&0!==t.getLength()&&this.canCollide(e,t))for(var a=e.getChildren(),o=0;o<a.length;o++)this.collideSpriteVsGroup(a[o],t,i,r,n,s)},wrap:function(e,t){e.body?this.wrapObject(e,t):e.getChildren?this.wrapArray(e.getChildren(),t):Array.isArray(e)?this.wrapArray(e,t):this.wrapObject(e,t)},wrapArray:function(e,t){for(var i=0;i<e.length;i++)this.wrapObject(e[i],t)},wrapObject:function(e,t){void 0===t&&(t=0),e.x=L(e.x,this.bounds.left-t,this.bounds.right+t),e.y=L(e.y,this.bounds.top-t,this.bounds.bottom+t)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}})},1093:e=>{e.exports={setAcceleration:function(e,t){return this.body.acceleration.set(e,t),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}}},59023:e=>{e.exports={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}}},62069:e=>{e.exports={setBounce:function(e,t){return this.body.bounce.set(e,t),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,t,i,r){return this.body.setCollideWorldBounds(e,t,i,r),this}}},78389:(e,t,i)=>{var r=i(79599);e.exports={setCollisionCategory:function(e){return(this.body?this.body:this).collisionCategory=e,this},willCollideWith:function(e){return((this.body?this.body:this).collisionMask&e)!=0},addCollidesWith:function(e){var t=this.body?this.body:this;return t.collisionMask=t.collisionMask|e,this},removeCollidesWith:function(e){var t=this.body?this.body:this;return t.collisionMask=t.collisionMask&~e,this},setCollidesWith:function(e){return(this.body?this.body:this).collisionMask=r(e),this},resetCollisionCategory:function(){var e=this.body?this.body:this;return e.collisionCategory=1,e.collisionMask=0x7fffffff,this}}},87118:e=>{e.exports={setDebug:function(e,t,i){return this.debugShowBody=e,this.debugShowVelocity=t,this.debugBodyColor=i,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}}},52819:e=>{e.exports={setDrag:function(e,t){return this.body.drag.set(e,t),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}}},4074:e=>{e.exports={setDirectControl:function(e){return this.body.setDirectControl(e),this},enableBody:function(e,t,i,r,n){return e&&this.body.reset(t,i),r&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),t&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},40831:e=>{e.exports={setFriction:function(e,t){return this.body.friction.set(e,t),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}}},26775:e=>{e.exports={setGravity:function(e,t){return this.body.gravity.set(e,t),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}}},9437:e=>{e.exports={setImmovable:function(e){return void 0===e&&(e=!0),this.body.immovable=e,this}}},30621:e=>{e.exports={setMass:function(e){return this.body.mass=e,this}}},72441:(e,t,i)=>{var r=i(47956),n=i(96503),s=i(2044),a=i(81491);e.exports=function(e,t,i,o,h,c){var l=r(e,t-o,i-o,2*o,2*o,h,c);if(0===l.length)return l;for(var d=new n(t,i,o),u=new n,f=[],p=0;p<l.length;p++){var g=l[p];g.isCircle?(u.setTo(g.center.x,g.center.y,g.halfWidth),s(d,u)&&f.push(g)):a(d,g)&&f.push(g)}return f}},47956:e=>{e.exports=function(e,t,i,r,n,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1);var o=[],h=[],c=e.treeMinMax;if(c.minX=t,c.minY=i,c.maxX=t+r,c.maxY=i+n,a&&(h=e.staticTree.search(c)),s&&e.useTree)o=e.tree.search(c);else if(s){var l=e.bodies,d={position:{x:t,y:i},left:t,top:i,right:t+r,bottom:i+n,isCircle:!1},u=e.intersects;l.iterate(function(e){u(e,d)&&o.push(e)})}return h.concat(o)}},62121:e=>{e.exports={setPushable:function(e){return void 0===e&&(e=!0),this.body.pushable=e,this}}},29384:e=>{e.exports={setOffset:function(e,t){return this.body.setOffset(e,t),this},setSize:function(e,t,i){return this.body.setSize(e,t,i),this},setBodySize:function(e,t,i){return this.body.setSize(e,t,i),this},setCircle:function(e,t,i){return this.body.setCircle(e,t,i),this}}},15098:e=>{e.exports={setVelocity:function(e,t){return this.body.setVelocity(e,t),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,t){return this.body.maxVelocity.set(e,t),this}}},92209:(e,t,i)=>{e.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:e=>{e.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},20009:e=>{e.exports="collide"},36768:e=>{e.exports="overlap"},60473:e=>{e.exports="pause"},89954:e=>{e.exports="resume"},61804:e=>{e.exports="tilecollide"},7161:e=>{e.exports="tileoverlap"},34689:e=>{e.exports="worldbounds"},16006:e=>{e.exports="worldstep"},63012:(e,t,i)=>{e.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(e,t,i)=>{var r=i(37747),n=i(79291),s={ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)};e.exports=s=n(!1,s,r)},96602:e=>{e.exports=function(e,t){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,t,e):!e.layer.callbacks[e.index]||!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,t,e)}},36294:e=>{e.exports=function(e,t){t<0?(e.blocked.none=!1,e.blocked.left=!0):t>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=t,e.updateCenter(),0===e.bounce.x?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x}},67013:e=>{e.exports=function(e,t){t<0?(e.blocked.none=!1,e.blocked.up=!0):t>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=t,e.updateCenter(),0===e.bounce.y?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y}},40012:(e,t,i)=>{var r=i(21329),n=i(53442),s=i(2483);e.exports=function(e,t,i,a,o,h,c){var l=a.left,d=a.top,u=a.right,f=a.bottom,p=i.faceLeft||i.faceRight,g=i.faceTop||i.faceBottom;if(c||(p=!0,g=!0),!p&&!g)return!1;var m=0,v=0,y=0,b=1;if(t.deltaAbsX()>t.deltaAbsY()?y=-1:t.deltaAbsX()<t.deltaAbsY()&&(b=-1),0!==t.deltaX()&&0!==t.deltaY()&&p&&g&&(y=Math.min(Math.abs(t.position.x-u),Math.abs(t.right-l)),b=Math.min(Math.abs(t.position.y-f),Math.abs(t.bottom-d))),y<b){if(p&&0!==(m=r(t,i,l,u,h,c))&&!s(a,t))return!0;g&&(v=n(t,i,d,f,h,c))}else{if(g&&0!==(v=n(t,i,d,f,h,c))&&!s(a,t))return!0;p&&(m=r(t,i,l,u,h,c))}return 0!==m||0!==v}},21329:(e,t,i)=>{var r=i(36294);e.exports=function(e,t,i,n,s,a){var o=0,h=t.faceLeft,c=t.faceRight,l=t.collideLeft,d=t.collideRight;return a||(h=!0,c=!0,l=!0,d=!0),0>e.deltaX()&&d&&e.checkCollision.left?c&&e.x<n&&(o=e.x-n)<-s&&(o=0):e.deltaX()>0&&l&&e.checkCollision.right&&h&&e.right>i&&(o=e.right-i)>s&&(o=0),0!==o&&(e.customSeparateX?e.overlapX=o:r(e,o)),o}},53442:(e,t,i)=>{var r=i(67013);e.exports=function(e,t,i,n,s,a){var o=0,h=t.faceTop,c=t.faceBottom,l=t.collideUp,d=t.collideDown;return a||(h=!0,c=!0,l=!0,d=!0),0>e.deltaY()&&d&&e.checkCollision.up?c&&e.y<n&&(o=e.y-n)<-s&&(o=0):e.deltaY()>0&&l&&e.checkCollision.down&&h&&e.bottom>i&&(o=e.bottom-i)>s&&(o=0),0!==o&&(e.customSeparateY?e.overlapY=o:r(e,o)),o}},2483:e=>{e.exports=function(e,t){return!(t.right<=e.left||t.bottom<=e.top||t.position.x>=e.right||t.position.y>=e.bottom)}},55173:(e,t,i)=>{e.exports={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)}},44563:(e,t,i)=>{e.exports={Arcade:i(27064),Matter:i(3875)}},68174:(e,t,i)=>{var r=i(83419),n=i(26099);e.exports=new r({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(e){if(!(e=e.hasOwnProperty("body")?e.body:e).hasOwnProperty("bounds")||!e.hasOwnProperty("centerOfMass"))return!1;var t=this.boundsCenter,i=this.centerDiff,r=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,s=r*e.centerOfMass.x,a=n*e.centerOfMass.y;return t.set(r/2,n/2),i.set(s-t.x,a-t.y),!0},getTopLeft:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t+r.x+s.x,i+r.y+s.y)}return!1},getTopCenter:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t+s.x,i+r.y+s.y)}return!1},getTopRight:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t-(r.x-s.x),i+r.y+s.y)}return!1},getLeftCenter:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t+r.x+s.x,i+s.y)}return!1},getCenter:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.centerDiff;return new n(t+r.x,i+r.y)}return!1},getRightCenter:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t-(r.x-s.x),i+s.y)}return!1},getBottomLeft:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t+r.x+s.x,i-(r.y-s.y))}return!1},getBottomCenter:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t+s.x,i-(r.y-s.y))}return!1},getBottomRight:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),this.parseBody(e)){var r=this.boundsCenter,s=this.centerDiff;return new n(t-(r.x-s.x),i-(r.y-s.y))}return!1}})},19933:(e,t,i)=>{var r=i(6790);r.Body=i(22562),r.Composite=i(69351),r.World=i(4372),r.Collision=i(52284),r.Detector=i(81388),r.Pairs=i(99561),r.Pair=i(4506),r.Query=i(73296),r.Resolver=i(66272),r.Constraint=i(48140),r.Common=i(53402),r.Engine=i(48413),r.Events=i(35810),r.Sleeping=i(53614),r.Plugin=i(73832),r.Bodies=i(66280),r.Composites=i(74116),r.Axes=i(66615),r.Bounds=i(15647),r.Svg=i(74058),r.Vector=i(31725),r.Vertices=i(41598),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,e.exports=r},28137:(e,t,i)=>{var r=i(66280),n=i(83419),s=i(74116),a=i(48140),o=i(74058),h=i(75803),c=i(23181),l=i(34803),d=i(73834),u=i(19496),f=i(85791),p=i(98713),g=i(41598);e.exports=new n({initialize:function(e){this.world=e,this.scene=e.scene,this.sys=e.scene.sys},rectangle:function(e,t,i,n,s){var a=r.rectangle(e,t,i,n,s);return this.world.add(a),a},trapezoid:function(e,t,i,n,s,a){var o=r.trapezoid(e,t,i,n,s,a);return this.world.add(o),o},circle:function(e,t,i,n,s){var a=r.circle(e,t,i,n,s);return this.world.add(a),a},polygon:function(e,t,i,n,s){var a=r.polygon(e,t,i,n,s);return this.world.add(a),a},fromVertices:function(e,t,i,n,s,a,o){"string"==typeof i&&(i=g.fromPath(i));var h=r.fromVertices(e,t,i,n,s,a,o);return this.world.add(h),h},fromPhysicsEditor:function(e,t,i,r,n){void 0===n&&(n=!0);var s=u.parseBody(e,t,i,r);return n&&!this.world.has(s)&&this.world.add(s),s},fromSVG:function(e,t,i,n,s,a){void 0===n&&(n=1),void 0===s&&(s={}),void 0===a&&(a=!0);for(var h=i.getElementsByTagName("path"),c=[],l=0;l<h.length;l++){var d=o.pathToVertices(h[l],30);1!==n&&g.scale(d,n,n),c.push(d)}var u=r.fromVertices(e,t,c,s);return a&&this.world.add(u),u},fromJSON:function(e,t,i,r,n){void 0===r&&(r={}),void 0===n&&(n=!0);var s=f.parseBody(e,t,i,r);return s&&n&&this.world.add(s),s},imageStack:function(e,t,i,r,n,a,o,h,l){void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l={});var d=this.world,u=this.sys.displayList;l.addToWorld=!1;var f=s.stack(i,r,n,a,o,h,function(i,r){var n=new c(d,i,r,e,t,l);return u.add(n),n.body});return d.add(f),f},stack:function(e,t,i,r,n,a,o){var h=s.stack(e,t,i,r,n,a,o);return this.world.add(h),h},pyramid:function(e,t,i,r,n,a,o){var h=s.pyramid(e,t,i,r,n,a,o);return this.world.add(h),h},chain:function(e,t,i,r,n,a){return s.chain(e,t,i,r,n,a)},mesh:function(e,t,i,r,n){return s.mesh(e,t,i,r,n)},newtonsCradle:function(e,t,i,r,n){var a=s.newtonsCradle(e,t,i,r,n);return this.world.add(a),a},car:function(e,t,i,r,n){var a=s.car(e,t,i,r,n);return this.world.add(a),a},softBody:function(e,t,i,r,n,a,o,h,c,l){var d=s.softBody(e,t,i,r,n,a,o,h,c,l);return this.world.add(d),d},joint:function(e,t,i,r,n){return this.constraint(e,t,i,r,n)},spring:function(e,t,i,r,n){return this.constraint(e,t,i,r,n)},constraint:function(e,t,i,r,n){void 0===r&&(r=1),void 0===n&&(n={}),n.bodyA="body"===e.type?e:e.body,n.bodyB="body"===t.type?t:t.body,isNaN(i)||(n.length=i),n.stiffness=r;var s=a.create(n);return this.world.add(s),s},worldConstraint:function(e,t,i,r){void 0===i&&(i=1),void 0===r&&(r={}),r.bodyB="body"===e.type?e:e.body,isNaN(t)||(r.length=t),r.stiffness=i;var n=a.create(r);return this.world.add(n),n},mouseSpring:function(e){return this.pointerConstraint(e)},pointerConstraint:function(e){void 0===e&&(e={}),e.hasOwnProperty("render")||(e.render={visible:!1});var t=new p(this.scene,this.world,e);return this.world.add(t.constraint),t},image:function(e,t,i,r,n){var s=new c(this.world,e,t,i,r,n);return this.sys.displayList.add(s),s},tileBody:function(e,t){return new d(this.world,e,t)},sprite:function(e,t,i,r,n){var s=new l(this.world,e,t,i,r,n);return this.sys.displayList.add(s),this.sys.updateList.add(s),s},gameObject:function(e,t,i){return h(this.world,e,t,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}})},75803:(e,t,i)=>{var r=i(31884),n=i(95540),s=i(26099);e.exports=function(e,t,i,a){void 0===i&&(i={}),void 0===a&&(a=!0);var o=t.x,h=t.y;if(t.body={temp:!0,position:{x:o,y:h}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach(function(e){for(var i in e){var r;(r=e[i]).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set?Object.defineProperty(t,i,{get:e[i].get,set:e[i].set}):Object.defineProperty(t,i,{value:e[i]})}}),t.world=e,t._tempVec2=new s(o,h),i.hasOwnProperty("type")&&"body"===i.type)t.setExistingBody(i,a);else{var c=n(i,"shape",null);c||(c="rectangle"),i.addToWorld=a,t.setBody(c,i)}return t}},23181:(e,t,i)=>{var r=i(83419),n=i(31884),s=i(95643),a=i(95540),o=i(88571),h=i(72699),c=i(26099);e.exports=new r({Extends:o,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,h],initialize:function(e,t,i,r,n,o){s.call(this,e.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,n),this.setSizeToFrame(),this.setOrigin(),this.world=e,this._tempVec2=new c(t,i);var h=a(o,"shape",null);h?this.setBody(h,o):this.setRectangle(this.width,this.height,o),this.setPosition(t,i),this.initPipeline(),this.initPostPipeline(!0)}})},42045:(e,t,i)=>{var r=i(60461),n=i(66615),s=i(66280),a=i(22562),o=i(68174),h=i(15647),c=i(83419),l=i(52284),d=i(53402),u=i(69351),f=i(74116),p=i(48140),g=i(81388),m=i(20339),v=i(28137),y=i(95540),b=i(35154),x=i(46975),E=i(4506),T=i(99561),A=i(37277),w=i(73296),S=i(66272),C=i(44594),I=i(74058),_=i(31725),O=i(41598),P=i(68243);d.setDecomp(i(55973));var M=new c({initialize:function(e){this.scene=e,this.systems=e.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=u,this.collision=l,this.detector=g,this.pair=E,this.pairs=T,this.query=w,this.resolver=S,this.constraint=p,this.bodies=s,this.composites=f,this.axes=n,this.bounds=h,this.svg=I,this.vector=_,this.vertices=O,this.verts=O,this._tempVec2=_.create(),S._restingThresh=b(this.config,"restingThresh",4),S._restingThreshTangent=b(this.config,"restingThreshTangent",6),S._positionDampen=b(this.config,"positionDampen",.9),S._positionWarming=b(this.config,"positionWarming",.8),S._frictionNormalMultiplier=b(this.config,"frictionNormalMultiplier",5),e.sys.events.once(C.BOOT,this.boot,this),e.sys.events.on(C.START,this.start,this)},boot:function(){this.world=new P(this.scene,this.config),this.add=new v(this.world),this.bodyBounds=new o,this.systems.events.once(C.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new P(this.scene,this.config),this.add=new v(this.world));var e=this.systems.events;e.on(C.UPDATE,this.world.update,this.world),e.on(C.POST_UPDATE,this.world.postUpdate,this.world),e.once(C.SHUTDOWN,this.shutdown,this)},getConfig:function(){var e=this.systems.game.config.physics;return x(y(this.systems.settings.physics,"matter",{}),y(e,"matter",{}))},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(e,t){this.world.step(e,t)},containsPoint:function(e,t,i){e=this.getMatterBodies(e);var r=_.create(t,i);return w.point(e,r).length>0},intersectPoint:function(e,t,i){i=this.getMatterBodies(i);var r=_.create(e,t),n=[];return w.point(i,r).forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n},intersectRect:function(e,t,i,r,n,s){void 0===n&&(n=!1),s=this.getMatterBodies(s);var a=[];return w.region(s,{min:{x:e,y:t},max:{x:e+i,y:t+r}},n).forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),a},intersectRay:function(e,t,i,r,n,s){void 0===n&&(n=1),s=this.getMatterBodies(s);for(var a=[],o=w.ray(s,_.create(e,t),_.create(i,r),n),h=0;h<o.length;h++)a.push(o[h].body);return a},intersectBody:function(e,t){t=this.getMatterBodies(t);for(var i=[],r=w.collides(e,t),n=0;n<r.length;n++){var s=r[n];s.bodyA===e?i.push(s.bodyB):i.push(s.bodyA)}return i},overlap:function(e,t,i,r,n){void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=i),Array.isArray(e)||(e=[e]),e=this.getMatterBodies(e),t=this.getMatterBodies(t);for(var s=!1,a=0;a<e.length;a++)for(var o=e[a],h=w.collides(o,t),c=0;c<h.length;c++){var l=h[c],d=l.bodyA.id===o.id?l.bodyB:l.bodyA;if(!r||r.call(n,o,d,l)){if(s=!0,i)i.call(n,o,d,l);else if(!r)return!0}}return s},setCollisionCategory:function(e,t){return(e=this.getMatterBodies(e)).forEach(function(e){e.collisionFilter.category=t}),this},setCollisionGroup:function(e,t){return(e=this.getMatterBodies(e)).forEach(function(e){e.collisionFilter.group=t}),this},setCollidesWith:function(e,t){e=this.getMatterBodies(e);var i=0;if(Array.isArray(t))for(var r=0;r<t.length;r++)i|=t[r];else i=t;return e.forEach(function(e){e.collisionFilter.mask=i}),this},getMatterBodies:function(e){if(!e)return this.world.getAllBodies();Array.isArray(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++){var r=e[i].hasOwnProperty("body")?e[i].body:e[i];t.push(r)}return t},setVelocity:function(e,t,i){e=this.getMatterBodies(e);var r=this._tempVec2;return r.x=t,r.y=i,e.forEach(function(e){a.setVelocity(e,r)}),this},setVelocityX:function(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;return i.x=t,e.forEach(function(e){i.y=e.velocity.y,a.setVelocity(e,i)}),this},setVelocityY:function(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;return i.y=t,e.forEach(function(e){i.x=e.velocity.x,a.setVelocity(e,i)}),this},setAngularVelocity:function(e,t){return(e=this.getMatterBodies(e)).forEach(function(e){a.setAngularVelocity(e,t)}),this},applyForce:function(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;return e.forEach(function(e){i.x=e.position.x,i.y=e.position.y,a.applyForce(e,i,t)}),this},applyForceFromPosition:function(e,t,i,r){e=this.getMatterBodies(e);var n=this._tempVec2;return e.forEach(function(e){void 0===r&&(r=e.angle),n.x=i*Math.cos(r),n.y=i*Math.sin(r),a.applyForce(e,t,n)}),this},applyForceFromAngle:function(e,t,i){e=this.getMatterBodies(e);var r=this._tempVec2;return e.forEach(function(e){void 0===i&&(i=e.angle),r.x=t*Math.cos(i),r.y=t*Math.sin(i),a.applyForce(e,{x:e.position.x,y:e.position.y},r)}),this},getConstraintLength:function(e){var t=e.pointA.x,i=e.pointA.y,r=e.pointB.x,n=e.pointB.y;return e.bodyA&&(t+=e.bodyA.position.x,i+=e.bodyA.position.y),e.bodyB&&(r+=e.bodyB.position.x,n+=e.bodyB.position.y),m(t,i,r,n)},alignBody:function(e,t,i,n){var s;switch(e=e.hasOwnProperty("body")?e.body:e,n){case r.TOP_LEFT:case r.LEFT_TOP:s=this.bodyBounds.getTopLeft(e,t,i);break;case r.TOP_CENTER:s=this.bodyBounds.getTopCenter(e,t,i);break;case r.TOP_RIGHT:case r.RIGHT_TOP:s=this.bodyBounds.getTopRight(e,t,i);break;case r.LEFT_CENTER:s=this.bodyBounds.getLeftCenter(e,t,i);break;case r.CENTER:s=this.bodyBounds.getCenter(e,t,i);break;case r.RIGHT_CENTER:s=this.bodyBounds.getRightCenter(e,t,i);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:s=this.bodyBounds.getBottomLeft(e,t,i);break;case r.BOTTOM_CENTER:s=this.bodyBounds.getBottomCenter(e,t,i);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:s=this.bodyBounds.getBottomRight(e,t,i)}return s&&a.setPosition(e,s),this},shutdown:function(){var e=this.systems.events;this.world&&(e.off(C.UPDATE,this.world.update,this.world),e.off(C.POST_UPDATE,this.world.postUpdate,this.world)),e.off(C.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.systems=null}});A.register("MatterPhysics",M,"matterPhysics"),e.exports=M},34803:(e,t,i)=>{var r=i(9674),n=i(83419),s=i(31884),a=i(95643),o=i(95540),h=i(72699),c=i(68287),l=i(26099);e.exports=new n({Extends:c,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,h],initialize:function(e,t,i,n,s,h){a.call(this,e.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(n,s),this.setSizeToFrame(),this.setOrigin(),this.world=e,this._tempVec2=new l(t,i);var c=o(h,"shape",null);c?this.setBody(c,h):this.setRectangle(this.width,this.height,h),this.setPosition(t,i),this.initPipeline(),this.initPostPipeline(!0)}})},73834:(e,t,i)=>{var r=i(66280),n=i(22562),s=i(83419),a=i(31884),o=i(62644),h=i(50792),c=i(95540),l=i(97022),d=i(41598);e.exports=new s({Extends:h,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(e,t,i){h.call(this),this.tile=t,this.world=e,t.physics.matterBody&&t.physics.matterBody.destroy(),t.physics.matterBody=this;var r=c(i,"body",null),s=c(i,"addToWorld",!0);if(r?this.setBody(r,s):c(t.getCollisionGroup(),"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i),t.flipX||t.flipY){var a={x:t.getCenterX(),y:t.getCenterY()},o=t.flipX?-1:1,l=t.flipY?-1:1;n.scale(r,o,l,a)}},setFromTileRectangle:function(e){void 0===e&&(e={}),l(e,"isStatic")||(e.isStatic=!0),l(e,"addToWorld")||(e.addToWorld=!0);var t=this.tile.getBounds(),i=t.x+t.width/2,n=t.y+t.height/2,s=r.rectangle(i,n,t.width,t.height,e);return this.setBody(s,e.addToWorld),this},setFromTileCollision:function(e){void 0===e&&(e={}),l(e,"isStatic")||(e.isStatic=!0),l(e,"addToWorld")||(e.addToWorld=!0);for(var t=this.tile.tilemapLayer.scaleX,i=this.tile.tilemapLayer.scaleY,s=this.tile.getLeft(),a=this.tile.getTop(),h=c(this.tile.getCollisionGroup(),"objects",[]),u=[],f=0;f<h.length;f++){var p=h[f],g=s+p.x*t,m=a+p.y*i,v=p.width*t,y=p.height*i,b=null;if(p.rectangle)b=r.rectangle(g+v/2,m+y/2,v,y,e);else if(p.ellipse)b=r.circle(g+v/2,m+y/2,v/2,e);else if(p.polygon||p.polyline){var x=(p.polygon?p.polygon:p.polyline).map(function(e){return{x:e.x*t,y:e.y*i}}),E=d.create(x),T=d.centre(E);g+=T.x,m+=T.y,b=r.fromVertices(g,m,E,e)}b&&u.push(b)}if(1===u.length)this.setBody(u[0],e.addToWorld);else if(u.length>1){var A=o(e);A.parts=u,this.setBody(n.create(A),A.addToWorld)}return this},setBody:function(e,t){return void 0===t&&(t=!0),this.body&&this.removeBody(),this.body=e,this.body.gameObject=this,t&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}})},19496:(e,t,i)=>{var r=i(66280),n=i(22562),s=i(53402),a=i(95540),o=i(41598);e.exports={parseBody:function(e,t,i,r){void 0===r&&(r={});for(var o=a(i,"fixtures",[]),h=[],c=0;c<o.length;c++)for(var l=this.parseFixture(o[c]),d=0;d<l.length;d++)h.push(l[d]);var u=s.clone(i,!0);s.extend(u,r,!0),delete u.fixtures,delete u.type;var f=n.create(u);return n.setParts(f,h),n.setPosition(f,{x:e,y:t}),f},parseFixture:function(e){var t,i=s.extend({},!1,e);if(delete i.circle,delete i.vertices,e.circle){var n=a(e.circle,"x"),o=a(e.circle,"y"),h=a(e.circle,"radius");t=[r.circle(n,o,h,i)]}else e.vertices&&(t=this.parseVertices(e.vertices,i));return t},parseVertices:function(e,t){void 0===t&&(t={});for(var i=[],a=0;a<e.length;a++)o.clockwiseSort(e[a]),i.push(n.create(s.extend({position:o.centre(e[a]),vertices:e[a]},t)));return r.flagCoincidentParts(i)}}},85791:(e,t,i)=>{var r=i(66280),n=i(22562);e.exports={parseBody:function(e,t,i,s){void 0===s&&(s={});var a,o=i.vertices;if(1===o.length)s.vertices=o[0],a=n.create(s),r.flagCoincidentParts(a.parts);else{for(var h=[],c=0;c<o.length;c++){var l=n.create({vertices:o[c]});h.push(l)}r.flagCoincidentParts(h),s.parts=h,a=n.create(s)}return a.label=i.label,n.setPosition(a,{x:e,y:t}),a}}},98713:(e,t,i)=>{var r=i(15647),n=i(83419),s=i(69351),a=i(48140),o=i(81388),h=i(1121),c=i(8214),l=i(46975),d=i(53614),u=i(26099),f=i(41598);e.exports=new n({initialize:function(e,t,i){void 0===i&&(i={}),this.scene=e,this.world=t,this.camera=null,this.pointer=null,this.active=!0,this.position=new u,this.body=null,this.part=null,this.constraint=a.create(l(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:0xffffffff,group:0}})),this.world.on(h.BEFORE_UPDATE,this.update,this),e.sys.input.on(c.POINTER_DOWN,this.onDown,this),e.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(e){this.pointer||(this.pointer=e,this.camera=e.camera)},onUp:function(e){e===this.pointer&&(this.pointer=null)},getBody:function(e){var t=this.position,i=this.constraint;this.camera.getWorldPoint(e.x,e.y,t);for(var n=s.allBodies(this.world.localWorld),a=0;a<n.length;a++){var c=n[a];if(!c.ignorePointer&&r.contains(c.bounds,t)&&o.canCollide(c.collisionFilter,i.collisionFilter)&&this.hitTestBody(c,t))return this.world.emit(h.DRAG_START,c,this.part,this),!0}return!1},hitTestBody:function(e,t){for(var i=this.constraint,r=e.parts.length,n=+(r>1),s=n;s<r;s++){var a=e.parts[s];if(f.contains(a.vertices,t))return i.pointA=t,i.pointB={x:t.x-e.position.x,y:t.y-e.position.y},i.bodyB=e,i.angleB=e.angle,d.set(e,!1),this.part=a,this.body=e,!0}return!1},update:function(){var e=this.pointer,t=this.body;if(!this.active||!e){t&&this.stopDrag();return}if(!e.isDown&&t)return void this.stopDrag();if(e.isDown){if(!this.camera||!t&&!this.getBody(e))return;t=this.body;var i=this.position,r=this.constraint;this.camera.getWorldPoint(e.x,e.y,i),r.pointA.x=i.x,r.pointA.y=i.y,d.set(t,!1),this.world.emit(h.DRAG,t,this)}},stopDrag:function(){var e=this.body,t=this.constraint;t.bodyB=null,t.pointB=null,this.pointer=null,this.body=null,this.part=null,e&&this.world.emit(h.DRAG_END,e,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(h.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}})},68243:(e,t,i)=>{var r=i(66280),n=i(22562),s=i(83419),a=i(53402),o=i(69351),h=i(48413),c=i(50792),l=i(1121),d=i(95540),u=i(35154),f=i(22562),p=i(35810),g=i(73834),m=i(4372),v=i(13037),y=i(31725);e.exports=new s({Extends:c,initialize:function(e,t){c.call(this),this.scene=e,this.engine=h.create(t),this.localWorld=this.engine.world;var i=u(t,"gravity",null);i?this.setGravity(i.x,i.y,i.scale):!1===i&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=u(t,"enabled",!0),this.getDelta=u(t,"getDelta",this.update60Hz);var r=d(t,"runner",{});d(r,"fps",!1)&&(r.delta=1e3/d(r,"fps",60)),this.runner=v.create(r),this.autoUpdate=u(t,"autoUpdate",!0);var n=u(t,"debug",!1);if(this.drawDebug="object"==typeof n||n,this.debugGraphic,this.debugConfig={showAxes:d(n,"showAxes",!1),showAngleIndicator:d(n,"showAngleIndicator",!1),angleColor:d(n,"angleColor",0xe81153),showBroadphase:d(n,"showBroadphase",!1),broadphaseColor:d(n,"broadphaseColor",0xffb400),showBounds:d(n,"showBounds",!1),boundsColor:d(n,"boundsColor",0xffffff),showVelocity:d(n,"showVelocity",!1),velocityColor:d(n,"velocityColor",44783),showCollisions:d(n,"showCollisions",!1),collisionColor:d(n,"collisionColor",0xf5950c),showSeparations:d(n,"showSeparations",!1),separationColor:d(n,"separationColor",0xffa500),showBody:d(n,"showBody",!0),showStaticBody:d(n,"showStaticBody",!0),showInternalEdges:d(n,"showInternalEdges",!1),renderFill:d(n,"renderFill",!1),renderLine:d(n,"renderLine",!0),fillColor:d(n,"fillColor",1075465),fillOpacity:d(n,"fillOpacity",1),lineColor:d(n,"lineColor",2678297),lineOpacity:d(n,"lineOpacity",1),lineThickness:d(n,"lineThickness",1),staticFillColor:d(n,"staticFillColor",857979),staticLineColor:d(n,"staticLineColor",1255396),showSleeping:d(n,"showSleeping",!1),staticBodySleepOpacity:d(n,"staticBodySleepOpacity",.7),sleepFillColor:d(n,"sleepFillColor",4605510),sleepLineColor:d(n,"sleepLineColor",0x999a99),showSensors:d(n,"showSensors",!0),sensorFillColor:d(n,"sensorFillColor",857979),sensorLineColor:d(n,"sensorLineColor",1255396),showPositions:d(n,"showPositions",!0),positionSize:d(n,"positionSize",4),positionColor:d(n,"positionColor",0xe042da),showJoint:d(n,"showJoint",!0),jointColor:d(n,"jointColor",0xe0e042),jointLineOpacity:d(n,"jointLineOpacity",1),jointLineThickness:d(n,"jointLineThickness",2),pinSize:d(n,"pinSize",4),pinColor:d(n,"pinColor",4382944),springColor:d(n,"springColor",0xe042e0),anchorColor:d(n,"anchorColor",0xefefef),anchorSize:d(n,"anchorSize",4),showConvexHulls:d(n,"showConvexHulls",!1),hullColor:d(n,"hullColor",0xd703d0)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(t,"setBounds",!1)){var s=t.setBounds;if("boolean"==typeof s)this.setBounds();else{var a=d(s,"x",0),o=d(s,"y",0),l=d(s,"width",e.sys.scale.width),f=d(s,"height",e.sys.scale.height),p=d(s,"thickness",64),g=d(s,"left",!0),m=d(s,"right",!0),y=d(s,"top",!0),b=d(s,"bottom",!0);this.setBounds(a,o,l,f,p,g,m,y,b)}}},setCompositeRenderStyle:function(e){var t,i,r,n=e.bodies,s=e.constraints,a=e.composites;for(t=0;t<n.length;t++)r=(i=n[t]).render,this.setBodyRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity);for(t=0;t<s.length;t++)r=(i=s[t]).render,this.setConstraintRenderStyle(i,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize);for(t=0;t<a.length;t++)i=a[t],this.setCompositeRenderStyle(i);return this},setBodyRenderStyle:function(e,t,i,r,n,s){var a=e.render,o=this.debugConfig;return a&&(null==t&&(t=e.isStatic?o.staticLineColor:o.lineColor),null==i&&(i=o.lineOpacity),null==r&&(r=o.lineThickness),null==n&&(n=e.isStatic?o.staticFillColor:o.fillColor),null==s&&(s=o.fillOpacity),!1!==t&&(a.lineColor=t),!1!==i&&(a.lineOpacity=i),!1!==r&&(a.lineThickness=r),!1!==n&&(a.fillColor=n),!1!==s&&(a.fillOpacity=s)),this},setConstraintRenderStyle:function(e,t,i,r,n,s,a){var o=e.render,h=this.debugConfig;if(!o)return this;if(null==t){var c=o.type;"line"===c?t=h.jointColor:"pin"===c?t=h.pinColor:"spring"===c&&(t=h.springColor)}return null==i&&(i=h.jointLineOpacity),null==r&&(r=h.jointLineThickness),null==n&&(n=h.pinSize),null==s&&(s=h.anchorColor),null==a&&(a=h.anchorSize),!1!==t&&(o.lineColor=t),!1!==i&&(o.lineOpacity=i),!1!==r&&(o.lineThickness=r),!1!==n&&(o.pinSize=n),!1!==s&&(o.anchorColor=s),!1!==a&&(o.anchorSize=a),this},setEventsProxy:function(){var e=this,t=this.engine,i=this.localWorld;this.drawDebug&&(p.on(i,"compositeModified",function(t){e.setCompositeRenderStyle(t)}),p.on(i,"beforeAdd",function(t){for(var i=[].concat(t.object),r=0;r<i.length;r++){var n=i[r],s=n.render;"body"===n.type?e.setBodyRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity):"composite"===n.type?e.setCompositeRenderStyle(n):"constraint"===n.type&&e.setConstraintRenderStyle(n,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}})),p.on(i,"beforeAdd",function(t){e.emit(l.BEFORE_ADD,t)}),p.on(i,"afterAdd",function(t){e.emit(l.AFTER_ADD,t)}),p.on(i,"beforeRemove",function(t){e.emit(l.BEFORE_REMOVE,t)}),p.on(i,"afterRemove",function(t){e.emit(l.AFTER_REMOVE,t)}),p.on(t,"beforeUpdate",function(t){e.emit(l.BEFORE_UPDATE,t)}),p.on(t,"afterUpdate",function(t){e.emit(l.AFTER_UPDATE,t)}),p.on(t,"collisionStart",function(t){var i,r,n=t.pairs;n.length>0&&n.map(function(e){i=e.bodyA,r=e.bodyB,i.gameObject&&i.gameObject.emit("collide",i,r,e),r.gameObject&&r.gameObject.emit("collide",r,i,e),p.trigger(i,"onCollide",{pair:e}),p.trigger(r,"onCollide",{pair:e}),i.onCollideCallback&&i.onCollideCallback(e),r.onCollideCallback&&r.onCollideCallback(e),i.onCollideWith[r.id]&&i.onCollideWith[r.id](r,e),r.onCollideWith[i.id]&&r.onCollideWith[i.id](i,e)}),e.emit(l.COLLISION_START,t,i,r)}),p.on(t,"collisionActive",function(t){var i,r,n=t.pairs;n.length>0&&n.map(function(e){i=e.bodyA,r=e.bodyB,i.gameObject&&i.gameObject.emit("collideActive",i,r,e),r.gameObject&&r.gameObject.emit("collideActive",r,i,e),p.trigger(i,"onCollideActive",{pair:e}),p.trigger(r,"onCollideActive",{pair:e}),i.onCollideActiveCallback&&i.onCollideActiveCallback(e),r.onCollideActiveCallback&&r.onCollideActiveCallback(e)}),e.emit(l.COLLISION_ACTIVE,t,i,r)}),p.on(t,"collisionEnd",function(t){var i,r,n=t.pairs;n.length>0&&n.map(function(e){i=e.bodyA,r=e.bodyB,i.gameObject&&i.gameObject.emit("collideEnd",i,r,e),r.gameObject&&r.gameObject.emit("collideEnd",r,i,e),p.trigger(i,"onCollideEnd",{pair:e}),p.trigger(r,"onCollideEnd",{pair:e}),i.onCollideEndCallback&&i.onCollideEndCallback(e),r.onCollideEndCallback&&r.onCollideEndCallback(e)}),e.emit(l.COLLISION_END,t,i,r)})},setBounds:function(e,t,i,r,n,s,a,o,h){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),this.updateWall(s,"left",e-n,t-n,n,r+2*n),this.updateWall(a,"right",e+i,t-n,n,r+2*n),this.updateWall(o,"top",e,t-n,i,n),this.updateWall(h,"bottom",e,t+r,i,n),this},updateWall:function(e,t,i,r,n,s){var a=this.walls[t];e?(a&&m.remove(this.localWorld,a),i+=n/2,r+=s/2,this.walls[t]=this.create(i,r,n,s,{isStatic:!0,friction:0,frictionStatic:0})):(a&&m.remove(this.localWorld,a),this.walls[t]=null)},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=1),void 0===i&&(i=.001),this.localWorld.gravity.x=e,this.localWorld.gravity.y=t,this.localWorld.gravity.scale=i,this},create:function(e,t,i,n,s){var a=r.rectangle(e,t,i,n,s);return m.add(this.localWorld,a),a},add:function(e){return m.add(this.localWorld,e),this},remove:function(e,t){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i],n=r.body?r.body:r;o.remove(this.localWorld,n,t)}return this},removeConstraint:function(e,t){return o.remove(this.localWorld,e,t),this},convertTilemapLayer:function(e,t){var i=e.layer,r=e.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(r,t),this},convertTiles:function(e,t){if(0===e.length)return this;for(var i=0;i<e.length;i++)new g(this,e[i],t);return this},nextGroup:function(e){return f.nextGroup(e)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(l.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=a.now(),this.emit(l.RESUME),this},update:function(e){if(this.enabled&&this.autoUpdate){var t=this.engine,i=this.runner,r=a.now(),n=i.delta,s=0,o=e-i.timeLastTick;if((!o||!i.timeLastTick||o>Math.max(v._maxFrameDelta,i.maxFrameTime))&&(o=i.frameDelta||v._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(o),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var c=i.frameDeltaHistory.slice(0).sort(),l=i.frameDeltaHistory.slice(c.length*v._smoothingLowerBound,c.length*v._smoothingUpperBound);o=v._mean(l)||o}i.frameDeltaSnapping&&(o=1e3/Math.round(1e3/o)),i.frameDelta=o,i.timeLastTick=e,i.timeBuffer+=i.frameDelta,i.timeBuffer=a.clamp(i.timeBuffer,0,i.frameDelta+n*v._timeBufferMargin),i.lastUpdatesDeferred=0;for(var d=i.maxUpdates||Math.ceil(i.maxFrameTime/n),u=a.now();n>0&&i.timeBuffer>=n*v._timeBufferMargin;){h.update(t,n),i.timeBuffer-=n,s+=1;var f=a.now()-r,p=a.now()-u,g=f+v._elapsedNextEstimate*p/s;if(s>=d||g>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/n-v._timeBufferMargin));break}}}},step:function(e){h.update(this.engine,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(e){var t=e.hasOwnProperty("body")?e.body:e;return null!==o.get(this.localWorld,t.id,t.type)},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var e=this.debugConfig,t=this.engine,i=this.debugGraphic,r=o.allBodies(this.localWorld);this.debugGraphic.clear(),e.showBroadphase&&t.broadphase.controller&&this.renderGrid(t.broadphase,i,e.broadphaseColor,.5),e.showBounds&&this.renderBodyBounds(r,i,e.boundsColor,.5),(e.showBody||e.showStaticBody)&&this.renderBodies(r),e.showJoint&&this.renderJoints(),(e.showAxes||e.showAngleIndicator)&&this.renderBodyAxes(r,i,e.showAxes,e.angleColor,.5),e.showVelocity&&this.renderBodyVelocity(r,i,e.velocityColor,1,2),e.showSeparations&&this.renderSeparations(t.pairs.list,i,e.separationColor),e.showCollisions&&this.renderCollisions(t.pairs.list,i,e.collisionColor)}},renderGrid:function(e,t,i,r){t.lineStyle(1,i,r);for(var n=a.keys(e.buckets),s=0;s<n.length;s++){var o=n[s];if(!(e.buckets[o].length<2)){var h=o.split(/C|R/);t.strokeRect(parseInt(h[1],10)*e.bucketWidth,parseInt(h[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}return this},renderSeparations:function(e,t,i){t.lineStyle(1,i,1);for(var r=0;r<e.length;r++){var n=e[r];if(n.isActive){var s=n.collision,a=s.bodyA,o=s.bodyB,h=a.position,c=o.position,l=s.penetration,d=a.isStatic||o.isStatic?1:4;o.isStatic&&(d=0),t.lineBetween(c.x,c.y,c.x-l.x*d,c.y-l.y*d),d=a.isStatic||o.isStatic?1:4,a.isStatic&&(d=0),t.lineBetween(h.x,h.y,h.x-l.x*d,h.y-l.y*d)}}return this},renderCollisions:function(e,t,i){for(t.lineStyle(1,i,.5),t.fillStyle(i,1),r=0;r<e.length;r++)if((n=e[r]).isActive)for(var r,n,s=0;s<n.contactCount;s++){var a=n.contacts[s].vertex;a&&t.fillRect(a.x-2,a.y-2,5,5)}for(r=0;r<e.length;r++)if((n=e[r]).isActive){var o=n.collision,h=n.contacts;if(n.contactCount>0){var c=h[0].vertex.x,l=h[0].vertex.y;2===n.contactCount&&(c=(h[0].vertex.x+h[1].vertex.x)/2,l=(h[0].vertex.y+h[1].vertex.y)/2),o.bodyB===o.supports[0].body||o.bodyA.isStatic?t.lineBetween(c-8*o.normal.x,l-8*o.normal.y,c,l):t.lineBetween(c+8*o.normal.x,l+8*o.normal.y,c,l)}}return this},renderBodyBounds:function(e,t,i,r){t.lineStyle(1,i,r);for(var n=0;n<e.length;n++){var s=e[n];if(s.render.visible){var a=s.bounds;if(a)t.strokeRect(a.min.x,a.min.y,a.max.x-a.min.x,a.max.y-a.min.y);else for(var o=s.parts,h=+(o.length>1);h<o.length;h++){var c=o[h];t.strokeRect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}}return this},renderBodyAxes:function(e,t,i,r,n){t.lineStyle(1,r,n);for(var s=0;s<e.length;s++){var a,o,h,c=e[s],l=c.parts;if(c.render.visible)if(i)for(o=+(l.length>1);o<l.length;o++)for(h=0,a=l[o];h<a.axes.length;h++){var d=a.axes[h];t.lineBetween(a.position.x,a.position.y,a.position.x+20*d.x,a.position.y+20*d.y)}else for(o=+(l.length>1);o<l.length;o++)for(h=0,a=l[o];h<a.axes.length;h++)t.lineBetween(a.position.x,a.position.y,(a.vertices[0].x+a.vertices[a.vertices.length-1].x)/2,(a.vertices[0].y+a.vertices[a.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(e,t,i,r,n){t.lineStyle(n,i,r);for(var s=0;s<e.length;s++){var a=e[s];a.render.visible&&t.lineBetween(a.position.x,a.position.y,a.position.x+(a.position.x-a.positionPrev.x)*2,a.position.y+(a.position.y-a.positionPrev.y)*2)}return this},renderBodies:function(e){for(var t=this.debugGraphic,i=this.debugConfig,r=i.showBody,n=i.showStaticBody,s=i.showSleeping,a=i.showInternalEdges,o=i.showConvexHulls,h=i.renderFill,c=i.renderLine,l=i.staticBodySleepOpacity,d=i.sleepFillColor,u=i.sleepLineColor,f=i.hullColor,p=0;p<e.length;p++){var g=e[p];if(g.render.visible&&(n||!g.isStatic)&&(r||g.isStatic)){var m=g.render.lineColor,v=g.render.lineOpacity,y=g.render.lineThickness,b=g.render.fillColor,x=g.render.fillOpacity;s&&g.isSleeping&&(g.isStatic?(v*=l,x*=l):(m=u,b=d)),h||(b=null),c||(m=null),this.renderBody(g,t,a,m,v,y,b,x);var E=g.parts.length;o&&E>1&&this.renderConvexHull(g,t,f,y)}}},renderBody:function(e,t,i,r,n,s,a,o){void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=1),void 0===a&&(a=null),void 0===o&&(o=null);for(var h=this.debugConfig,c=h.sensorFillColor,l=h.sensorLineColor,d=e.parts,u=d.length,f=+(u>1);f<u;f++){var p=d[f],g=p.render,m=g.opacity;if(g.visible&&0!==m&&(!p.isSensor||h.showSensors)){var v=p.circleRadius;if(t.beginPath(),p.isSensor?(null!==a&&t.fillStyle(c,o*m),null!==r&&t.lineStyle(s,l,n*m)):(null!==a&&t.fillStyle(a,o*m),null!==r&&t.lineStyle(s,r,n*m)),v)t.arc(p.position.x,p.position.y,v,0,2*Math.PI);else{var y=p.vertices,b=y.length;t.moveTo(y[0].x,y[0].y);for(var x=1;x<b;x++){var E=y[x];if(!y[x-1].isInternal||i?t.lineTo(E.x,E.y):t.moveTo(E.x,E.y),x<b&&E.isInternal&&!i){var T=(x+1)%b;t.moveTo(y[T].x,y[T].y)}}t.closePath()}null!==a&&t.fillPath(),null!==r&&t.strokePath()}}if(h.showPositions&&!e.isStatic){var A=e.position.x,w=e.position.y,S=Math.ceil(h.positionSize/2);t.fillStyle(h.positionColor,1),t.fillRect(A-S,w-S,h.positionSize,h.positionSize)}return this},renderConvexHull:function(e,t,i,r){if(void 0===r&&(r=1),e.parts.length>1){var n=e.vertices;t.lineStyle(r,i),t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var s=1;s<n.length;s++)t.lineTo(n[s].x,n[s].y);t.lineTo(n[0].x,n[0].y),t.strokePath()}return this},renderJoints:function(){for(var e=this.debugGraphic,t=o.allConstraints(this.localWorld),i=0;i<t.length;i++){var r=t[i].render,n=r.lineColor,s=r.lineOpacity,a=r.lineThickness,h=r.pinSize,c=r.anchorColor,l=r.anchorSize;this.renderConstraint(t[i],e,n,s,a,h,c,l)}},renderConstraint:function(e,t,i,r,n,s,o,h){var c=e.render;if(!c.visible||!e.pointA||!e.pointB)return this;t.lineStyle(n,i,r);var l=e.bodyA,d=e.bodyB;if(u=l?y.add(l.position,e.pointA):e.pointA,"pin"===c.type)t.strokeCircle(u.x,u.y,s);else{if(f=d?y.add(d.position,e.pointB):e.pointB,t.beginPath(),t.moveTo(u.x,u.y),"spring"===c.type)for(var u,f,p,g=y.sub(f,u),m=y.perp(y.normalise(g)),v=Math.ceil(a.clamp(e.length/5,12,20)),b=1;b<v;b+=1)p=b%2==0?1:-1,t.lineTo(u.x+g.x*(b/v)+m.x*p*4,u.y+g.y*(b/v)+m.y*p*4);t.lineTo(f.x,f.y)}return t.strokePath(),c.anchors&&h>0&&(t.fillStyle(o),t.fillCircle(u.x,u.y,h),t.fillCircle(f.x,f.y,h)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),h.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}})},70410:e=>{e.exports={setBounce:function(e){return this.body.restitution=e,this}}},66968:e=>{e.exports={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var t=0;if(Array.isArray(e))for(var i=0;i<e.length;i++)t|=e[i];else t=e;return this.body.collisionFilter.mask=t,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,t){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var r=e[i].hasOwnProperty("body")?e[i].body:e[i];this.body.setOnCollideWith(r,t)}return this}}},51607:(e,t,i)=>{var r=i(22562);e.exports={applyForce:function(e){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,e),this},applyForceFrom:function(e,t){return r.applyForce(this.body,e,t),this},thrust:function(e){var t=this.body.angle;return this._tempVec2.set(e*Math.cos(t),e*Math.sin(t)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(e){var t=this.body.angle-Math.PI/2;return this._tempVec2.set(e*Math.cos(t),e*Math.sin(t)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(e){var t=this.body.angle+Math.PI/2;return this._tempVec2.set(e*Math.cos(t),e*Math.sin(t)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(e){var t=this.body.angle-Math.PI;return this._tempVec2.set(e*Math.cos(t),e*Math.sin(t)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}}},5436:e=>{e.exports={setFriction:function(e,t,i){return this.body.friction=e,void 0!==t&&(this.body.frictionAir=t),void 0!==i&&(this.body.frictionStatic=i),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}}},39858:e=>{e.exports={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}}},37302:(e,t,i)=>{var r=i(22562),n=i(26099);e.exports={setMass:function(e){return r.setMass(this.body,e),this},setDensity:function(e){return r.setDensity(this.body,e),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},39132:e=>{e.exports={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}}},57772:(e,t,i)=>{var r=i(66280),n=i(22562),s=i(43855),a=i(95540),o=i(19496),h=i(85791),c=i(41598);e.exports={setRectangle:function(e,t,i){return this.setBody({type:"rectangle",width:e,height:t},i)},setCircle:function(e,t){return this.setBody({type:"circle",radius:e},t)},setPolygon:function(e,t,i){return this.setBody({type:"polygon",sides:t,radius:e},i)},setTrapezoid:function(e,t,i,r){return this.setBody({type:"trapezoid",width:e,height:t,slope:i},r)},setExistingBody:function(e,t){void 0===t&&(t=!0),this.body&&this.world.remove(this.body,!0),this.body=e;for(var i=0;i<e.parts.length;i++)e.parts[i].gameObject=this;var r=this;if(e.destroy=function(){r.world.remove(r.body,!0),r.body.gameObject=null},t&&(this.world.has(e)&&this.world.remove(e,!0),this.world.add(e)),this._originComponent){var n=e.render.sprite.xOffset,a=e.render.sprite.yOffset,o=e.centerOfMass.x,h=e.centerOfMass.y;if(s(o,.5)&&s(h,.5))this.setOrigin(n+.5,a+.5);else{var c=e.centerOffset.x,l=e.centerOffset.y;this.setOrigin(n+c/this.displayWidth,a+l/this.displayHeight)}}return this},setBody:function(e,t){if(!e)return this;"string"==typeof e&&(e={type:e});var i,s=a(e,"type","rectangle"),l=a(e,"x",this._tempVec2.x),d=a(e,"y",this._tempVec2.y),u=a(e,"width",this.width),f=a(e,"height",this.height);switch(s){case"rectangle":i=r.rectangle(l,d,u,f,t);break;case"circle":var p=a(e,"radius",Math.max(u,f)/2),g=a(e,"maxSides",25);i=r.circle(l,d,p,t,g);break;case"trapezoid":var m=a(e,"slope",.5);i=r.trapezoid(l,d,u,f,m,t);break;case"polygon":var v=a(e,"sides",5),y=a(e,"radius",Math.max(u,f)/2);i=r.polygon(l,d,v,y,t);break;case"fromVertices":case"fromVerts":var b=a(e,"verts",null);if(b)if("string"==typeof b&&(b=c.fromPath(b)),this.body&&!this.body.hasOwnProperty("temp"))n.setVertices(this.body,b),i=this.body;else{var x=a(e,"flagInternal",!1),E=a(e,"removeCollinear",.01),T=a(e,"minimumArea",10);i=r.fromVertices(l,d,b,t,x,E,T)}break;case"fromPhysicsEditor":i=o.parseBody(l,d,e,t);break;case"fromPhysicsTracer":i=h.parseBody(l,d,e,t)}return i&&this.setExistingBody(i,e.addToWorld),this}}},38083:(e,t,i)=>{var r=i(1121),n=i(53614),s=i(35810);e.exports={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(e){return void 0===e&&(e=60),this.body.sleepThreshold=e,this},setSleepEvents:function(e,t){return this.setSleepStartEvent(e),this.setSleepEndEvent(t),this},setSleepStartEvent:function(e){if(e){var t=this.world;s.on(this.body,"sleepStart",function(e){t.emit(r.SLEEP_START,e,this)})}else s.off(this.body,"sleepStart");return this},setSleepEndEvent:function(e){if(e){var t=this.world;s.on(this.body,"sleepEnd",function(e){t.emit(r.SLEEP_END,e,this)})}else s.off(this.body,"sleepEnd");return this}}},90556:(e,t,i)=>{var r=i(22562);e.exports={setStatic:function(e){return r.setStatic(this.body,e),this},isStatic:function(){return this.body.isStatic}}},85436:(e,t,i)=>{var r=i(22562),n=i(36383),s=i(86554),a=i(30954);e.exports={x:{get:function(){return this.body.position.x},set:function(e){this._tempVec2.set(e,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(e){this._tempVec2.set(this.x,e),r.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this.setScale(e,e)}},scaleX:{get:function(){return this._scaleX},set:function(e){var t=1/this._scaleX,i=1/this._scaleY;this._scaleX=e,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,t,i),r.scale(this.body,e,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(e){var t=1/this._scaleX,i=1/this._scaleY;this._scaleY=e,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,t,i),r.scale(this.body,this._scaleX,e)}},angle:{get:function(){return a(this.body.angle*n.RAD_TO_DEG)},set:function(e){this.rotation=a(e)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(e){this._rotation=s(e),r.setAngle(this.body,this._rotation)}},setPosition:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this._tempVec2.set(e,t),r.setPosition(this.body,this._tempVec2),this},setRotation:function(e){return void 0===e&&(e=0),this._rotation=s(e),r.setAngle(this.body,e),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(e){return void 0===e&&(e=0),this.angle=e,r.setAngle(this.body,this.rotation),this},setScale:function(e,t,i){void 0===e&&(e=1),void 0===t&&(t=e);var n=1/this._scaleX,s=1/this._scaleY;return this._scaleX=e,this._scaleY=t,r.scale(this.body,n,s,i),r.scale(this.body,e,t,i),this}}},42081:(e,t,i)=>{var r=i(22562);e.exports={setVelocityX:function(e){return this._tempVec2.set(e,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(e){return this._tempVec2.set(this.body.velocity.x,e),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(e,t){return this._tempVec2.set(e,t),r.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return r.getVelocity(this.body)},setAngularVelocity:function(e){return r.setAngularVelocity(this.body,e),this},getAngularVelocity:function(){return r.getAngularVelocity(this.body)},setAngularSpeed:function(e){return r.setAngularSpeed(this.body,e),this},getAngularSpeed:function(){return r.getAngularSpeed(this.body)}}},31884:(e,t,i)=>{e.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:e=>{e.exports="afteradd"},1213:e=>{e.exports="afterremove"},25968:e=>{e.exports="afterupdate"},67205:e=>{e.exports="beforeadd"},39438:e=>{e.exports="beforeremove"},44823:e=>{e.exports="beforeupdate"},92593:e=>{e.exports="collisionactive"},60128:e=>{e.exports="collisionend"},76861:e=>{e.exports="collisionstart"},92362:e=>{e.exports="dragend"},76408:e=>{e.exports="drag"},93971:e=>{e.exports="dragstart"},5656:e=>{e.exports="pause"},47861:e=>{e.exports="resume"},79099:e=>{e.exports="sleepend"},35906:e=>{e.exports="sleepstart"},1121:(e,t,i)=>{e.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(e,t,i)=>{e.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(e,t,i)=>{var r,n={};e.exports=n;var s=i(41598),a=i(31725),o=i(53614),h=i(53402),c=i(15647),l=i(66615);n._timeCorrection=!0,n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n._baseDelta=1e3/60,n.create=function(e){var t={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:e.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:0xffffffff,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:1e3/60,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=s.centre(e.vertices):e.hasOwnProperty("vertices")||(t.vertices=s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var i=h.extend(t,e);return r(i,e),i.setOnCollideWith=function(e,t){return t?this.onCollideWith[e.id]=t:delete this.onCollideWith[e.id],this},i},n.nextGroup=function(e){return e?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory},r=function(e,t){if(t=t||{},n.set(e,{bounds:e.bounds||c.create(e.vertices),positionPrev:e.positionPrev||a.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),s.rotate(e.vertices,e.angle,e.position),l.rotate(e.axes,e.angle),c.update(e.bounds,e.vertices,e.velocity),n.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia}),1===e.parts.length){var i=e.bounds,r=e.centerOfMass,o=e.centerOffset,h=i.max.x-i.min.x,d=i.max.y-i.min.y;r.x=-(i.min.x-e.position.x)/h,r.y=-(i.min.y-e.position.y)/d,o.x=h*r.x,o.y=d*r.y}},n.set=function(e,t,i){var r;for(r in"string"==typeof t&&(r=t,(t={})[r]=i),t)if(Object.prototype.hasOwnProperty.call(t,r))switch(i=t[r],r){case"isStatic":n.setStatic(e,i);break;case"isSleeping":o.set(e,i);break;case"mass":n.setMass(e,i);break;case"density":n.setDensity(e,i);break;case"inertia":n.setInertia(e,i);break;case"vertices":n.setVertices(e,i);break;case"position":n.setPosition(e,i);break;case"angle":n.setAngle(e,i);break;case"velocity":n.setVelocity(e,i);break;case"angularVelocity":n.setAngularVelocity(e,i);break;case"speed":n.setSpeed(e,i);break;case"angularSpeed":n.setAngularSpeed(e,i);break;case"parts":n.setParts(e,i);break;case"centre":n.setCentre(e,i);break;default:e[r]=i}},n.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var r=e.parts[i];t?(r.isStatic||(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia}),r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null),r.isStatic=t}},n.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=t/6*i,e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},n.setDensity=function(e,t){n.setMass(e,t*e.area),e.density=t},n.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},n.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=s.create(t,e),e.axes=l.fromVertices(e.vertices),e.area=s.area(e.vertices),n.setMass(e,e.density*e.area);var i=s.centre(e.vertices);s.translate(e.vertices,i,-1),n.setInertia(e,n._inertiaScale*s.inertia(e.vertices,e.mass)),s.translate(e.vertices,e.position),c.update(e.bounds,e.vertices,e.velocity)},n.setParts=function(e,t,i){for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var r,a=t[r];a!==e&&(a.parent=e,e.parts.push(a))}if(1!==e.parts.length){if(i=void 0===i||i){var o=[];for(r=0;r<t.length;r++)o=o.concat(t[r].vertices);s.clockwiseSort(o);var h=s.hull(o),l=s.centre(h);n.setVertices(e,h),s.translate(e.vertices,l)}var d=n._totalProperties(e),u=d.centre.x,f=d.centre.y,p=e.bounds,g=e.centerOfMass,m=e.centerOffset;c.update(p,e.vertices,e.velocity),g.x=-(p.min.x-u)/(p.max.x-p.min.x),g.y=-(p.min.y-f)/(p.max.y-p.min.y),m.x=u,m.y=f,e.area=d.area,e.parent=e,e.position.x=u,e.position.y=f,e.positionPrev.x=u,e.positionPrev.y=f,n.setMass(e,d.mass),n.setInertia(e,d.inertia),n.setPosition(e,d.centre)}},n.setCentre=function(e,t,i){i?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},n.setPosition=function(e,t,i){var r=a.sub(t,e.position);i?(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.velocity.x=r.x,e.velocity.y=r.y,e.speed=a.magnitude(r)):(e.positionPrev.x+=r.x,e.positionPrev.y+=r.y);for(var n=0;n<e.parts.length;n++){var o=e.parts[n];o.position.x+=r.x,o.position.y+=r.y,s.translate(o.vertices,r),c.update(o.bounds,o.vertices,e.velocity)}},n.setAngle=function(e,t,i){var r=t-e.angle;i?(e.anglePrev=e.angle,e.angularVelocity=r,e.angularSpeed=Math.abs(r)):e.anglePrev+=r;for(var n=0;n<e.parts.length;n++){var o=e.parts[n];o.angle+=r,s.rotate(o.vertices,r,e.position),l.rotate(o.axes,r),c.update(o.bounds,o.vertices,e.velocity),n>0&&a.rotateAbout(o.position,r,e.position,o.position)}},n.setVelocity=function(e,t){var i=e.deltaTime/n._baseDelta;e.positionPrev.x=e.position.x-t.x*i,e.positionPrev.y=e.position.y-t.y*i,e.velocity.x=(e.position.x-e.positionPrev.x)/i,e.velocity.y=(e.position.y-e.positionPrev.y)/i,e.speed=a.magnitude(e.velocity)},n.getVelocity=function(e){var t=n._baseDelta/e.deltaTime;return{x:(e.position.x-e.positionPrev.x)*t,y:(e.position.y-e.positionPrev.y)*t}},n.getSpeed=function(e){return a.magnitude(n.getVelocity(e))},n.setSpeed=function(e,t){n.setVelocity(e,a.mult(a.normalise(n.getVelocity(e)),t))},n.setAngularVelocity=function(e,t){var i=e.deltaTime/n._baseDelta;e.anglePrev=e.angle-t*i,e.angularVelocity=(e.angle-e.anglePrev)/i,e.angularSpeed=Math.abs(e.angularVelocity)},n.getAngularVelocity=function(e){return(e.angle-e.anglePrev)*n._baseDelta/e.deltaTime},n.getAngularSpeed=function(e){return Math.abs(n.getAngularVelocity(e))},n.setAngularSpeed=function(e,t){n.setAngularVelocity(e,h.sign(n.getAngularVelocity(e))*t)},n.translate=function(e,t,i){n.setPosition(e,a.add(e.position,t),i)},n.rotate=function(e,t,i,r){if(i){var s=Math.cos(t),a=Math.sin(t),o=e.position.x-i.x,h=e.position.y-i.y;n.setPosition(e,{x:i.x+(o*s-h*a),y:i.y+(o*a+h*s)},r),n.setAngle(e,e.angle+t,r)}else n.setAngle(e,e.angle+t,r)},n.scale=function(e,t,i,r){var a=0,o=0;r=r||e.position;for(var h=e.inertia===1/0,d=0;d<e.parts.length;d++){var u=e.parts[d];u.scale.x=t,u.scale.y=i,s.scale(u.vertices,t,i,r),u.axes=l.fromVertices(u.vertices),u.area=s.area(u.vertices),n.setMass(u,e.density*u.area),s.translate(u.vertices,{x:-u.position.x,y:-u.position.y}),n.setInertia(u,n._inertiaScale*s.inertia(u.vertices,u.mass)),s.translate(u.vertices,{x:u.position.x,y:u.position.y}),d>0&&(a+=u.area,o+=u.inertia),u.position.x=r.x+(u.position.x-r.x)*t,u.position.y=r.y+(u.position.y-r.y)*i,c.update(u.bounds,u.vertices,e.velocity)}e.parts.length>1&&(e.area=a,e.isStatic||(n.setMass(e,e.density*a),n.setInertia(e,o))),e.circleRadius&&(t===i?e.circleRadius*=t:e.circleRadius=null),h&&n.setInertia(e,1/0)},n.update=function(e,t){var i=(t=(void 0!==t?t:1e3/60)*e.timeScale)*t,r=n._timeCorrection?t/(e.deltaTime||t):1,o=1-e.frictionAir*(t/h._baseDelta),d=(e.position.x-e.positionPrev.x)*r,u=(e.position.y-e.positionPrev.y)*r;e.velocity.x=d*o+e.force.x/e.mass*i,e.velocity.y=u*o+e.force.y/e.mass*i,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.deltaTime=t,e.angularVelocity=(e.angle-e.anglePrev)*o*r+e.torque/e.inertia*i,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=a.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var f=0;f<e.parts.length;f++){var p=e.parts[f];s.translate(p.vertices,e.velocity),f>0&&(p.position.x+=e.velocity.x,p.position.y+=e.velocity.y),0!==e.angularVelocity&&(s.rotate(p.vertices,e.angularVelocity,e.position),l.rotate(p.axes,e.angularVelocity),f>0&&a.rotateAbout(p.position,e.angularVelocity,e.position,p.position)),c.update(p.bounds,p.vertices,e.velocity)}},n.updateVelocities=function(e){var t=n._baseDelta/e.deltaTime,i=e.velocity;i.x=(e.position.x-e.positionPrev.x)*t,i.y=(e.position.y-e.positionPrev.y)*t,e.speed=Math.sqrt(i.x*i.x+i.y*i.y),e.angularVelocity=(e.angle-e.anglePrev)*t,e.angularSpeed=Math.abs(e.angularVelocity)},n.applyForce=function(e,t,i){var r={x:t.x-e.position.x,y:t.y-e.position.y};e.force.x+=i.x,e.force.y+=i.y,e.torque+=r.x*i.y-r.y*i.x},n._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=+(1!==e.parts.length);i<e.parts.length;i++){var r=e.parts[i],n=r.mass!==1/0?r.mass:1;t.mass+=n,t.area+=r.area,t.inertia+=r.inertia,t.centre=a.add(t.centre,a.mult(r.position,n))}return t.centre=a.div(t.centre,t.mass),t},n.wrap=function(e,t){var i=c.wrap(e.bounds,t);return i&&n.translate(e,i),i}},69351:(e,t,i)=>{var r={};e.exports=r;var n=i(35810),s=i(53402),a=i(15647),o=i(22562);r.create=function(e){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},r.setModified=function(e,t,i,s){if(n.trigger(e,"compositeModified",e),e.isModified=t,t&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),i&&e.parent&&r.setModified(e.parent,t,i,s),s)for(var a=0;a<e.composites.length;a++){var o=e.composites[a];r.setModified(o,t,i,s)}},r.add=function(e,t){var i=[].concat(t);n.trigger(e,"beforeAdd",{object:t});for(var a=0;a<i.length;a++){var o=i[a];switch(o.type){case"body":if(o.parent!==o){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(e,o);break;case"constraint":r.addConstraint(e,o);break;case"composite":r.addComposite(e,o);break;case"mouseConstraint":r.addConstraint(e,o.constraint)}}return n.trigger(e,"afterAdd",{object:t}),e},r.remove=function(e,t,i){var s=[].concat(t);n.trigger(e,"beforeRemove",{object:t});for(var a=0;a<s.length;a++){var o=s[a];switch(o.type){case"body":r.removeBody(e,o,i);break;case"constraint":r.removeConstraint(e,o,i);break;case"composite":r.removeComposite(e,o,i);break;case"mouseConstraint":r.removeConstraint(e,o.constraint)}}return n.trigger(e,"afterRemove",{object:t}),e},r.addComposite=function(e,t){return e.composites.push(t),t.parent=e,r.setModified(e,!0,!0,!1),e},r.removeComposite=function(e,t,i){var n=s.indexOf(e.composites,t);if(-1!==n){var a=r.allBodies(t);r.removeCompositeAt(e,n);for(var o=0;o<a.length;o++)a[o].sleepCounter=0}if(i)for(var o=0;o<e.composites.length;o++)r.removeComposite(e.composites[o],t,!0);return e},r.removeCompositeAt=function(e,t){return e.composites.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addBody=function(e,t){return e.bodies.push(t),r.setModified(e,!0,!0,!1),e},r.removeBody=function(e,t,i){var n=s.indexOf(e.bodies,t);if(-1!==n&&(r.removeBodyAt(e,n),t.sleepCounter=0),i)for(var a=0;a<e.composites.length;a++)r.removeBody(e.composites[a],t,!0);return e},r.removeBodyAt=function(e,t){return e.bodies.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addConstraint=function(e,t){return e.constraints.push(t),r.setModified(e,!0,!0,!1),e},r.removeConstraint=function(e,t,i){var n=s.indexOf(e.constraints,t);if(-1!==n&&r.removeConstraintAt(e,n),i)for(var a=0;a<e.composites.length;a++)r.removeConstraint(e.composites[a],t,!0);return e},r.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),r.setModified(e,!0,!0,!1),e},r.clear=function(e,t,i){if(i)for(var n=0;n<e.composites.length;n++)r.clear(e.composites[n],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,r.setModified(e,!0,!0,!1),e},r.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(r.allBodies(e.composites[i]));return e.cache&&(e.cache.allBodies=t),t},r.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(r.allConstraints(e.composites[i]));return e.cache&&(e.cache.allConstraints=t),t},r.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(r.allComposites(e.composites[i]));return e.cache&&(e.cache.allComposites=t),t},r.get=function(e,t,i){var n,s;switch(i){case"body":n=r.allBodies(e);break;case"constraint":n=r.allConstraints(e);break;case"composite":n=r.allComposites(e).concat(e)}return n?0===(s=n.filter(function(e){return e.id.toString()===t.toString()})).length?null:s[0]:null},r.move=function(e,t,i){return r.remove(e,t),r.add(i,t),e},r.rebase=function(e){for(var t=r.allBodies(e).concat(r.allConstraints(e)).concat(r.allComposites(e)),i=0;i<t.length;i++)t[i].id=s.nextId();return e},r.translate=function(e,t,i){for(var n=i?r.allBodies(e):e.bodies,s=0;s<n.length;s++)o.translate(n[s],t);return e},r.rotate=function(e,t,i,n){for(var s=Math.cos(t),a=Math.sin(t),h=n?r.allBodies(e):e.bodies,c=0;c<h.length;c++){var l=h[c],d=l.position.x-i.x,u=l.position.y-i.y;o.setPosition(l,{x:i.x+(d*s-u*a),y:i.y+(d*a+u*s)}),o.rotate(l,t)}return e},r.scale=function(e,t,i,n,s){for(var a=s?r.allBodies(e):e.bodies,h=0;h<a.length;h++){var c=a[h],l=c.position.x-n.x,d=c.position.y-n.y;o.setPosition(c,{x:n.x+l*t,y:n.y+d*i}),o.scale(c,t,i)}return e},r.bounds=function(e){for(var t=r.allBodies(e),i=[],n=0;n<t.length;n+=1){var s=t[n];i.push(s.bounds.min,s.bounds.max)}return a.create(i)},r.wrap=function(e,t){var i=a.wrap(r.bounds(e),t);return i&&r.translate(e,i),i}},4372:(e,t,i)=>{var r={};e.exports=r;var n=i(69351);r.create=n.create,r.add=n.add,r.remove=n.remove,r.clear=n.clear,r.addComposite=n.addComposite,r.addBody=n.addBody,r.addConstraint=n.addConstraint},52284:(e,t,i)=>{var r,n,s,a={};e.exports=a;var o=i(41598),h=i(4506);r=[],n={overlap:0,axis:null},s={overlap:0,axis:null},a.create=function(e,t){return{pair:null,collided:!1,bodyA:e,bodyB:t,parentA:e.parent,parentB:t.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(e,t,i){if(a._overlapAxes(n,e.vertices,t.vertices,e.axes),n.overlap<=0||(a._overlapAxes(s,t.vertices,e.vertices,t.axes),s.overlap<=0))return null;var r,c,l=i&&i.table[h.id(e,t)];l?c=l.collision:((c=a.create(e,t)).collided=!0,c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent),e=c.bodyA,t=c.bodyB,r=n.overlap<s.overlap?n:s;var d=c.normal,u=c.tangent,f=c.penetration,p=c.supports,g=r.overlap,m=r.axis,v=m.x,y=m.y;v*(t.position.x-e.position.x)+y*(t.position.y-e.position.y)>=0&&(v=-v,y=-y),d.x=v,d.y=y,u.x=-y,u.y=v,f.x=v*g,f.y=y*g,c.depth=g;var b=a._findSupports(e,t,d,1),x=0;if(o.contains(e.vertices,b[0])&&(p[x++]=b[0]),o.contains(e.vertices,b[1])&&(p[x++]=b[1]),x<2){var E=a._findSupports(t,e,d,-1);o.contains(t.vertices,E[0])&&(p[x++]=E[0]),x<2&&o.contains(t.vertices,E[1])&&(p[x++]=E[1])}return 0===x&&(p[x++]=b[0]),c.supportCount=x,c},a._overlapAxes=function(e,t,i,r){var n,s,a,o,h,c,l=t.length,d=i.length,u=t[0].x,f=t[0].y,p=i[0].x,g=i[0].y,m=r.length,v=Number.MAX_VALUE,y=0;for(h=0;h<m;h++){var b=r[h],x=b.x,E=b.y,T=u*x+f*E,A=p*x+g*E,w=T,S=A;for(c=1;c<l;c+=1)(o=t[c].x*x+t[c].y*E)>w?w=o:o<T&&(T=o);for(c=1;c<d;c+=1)(o=i[c].x*x+i[c].y*E)>S?S=o:o<A&&(A=o);if((n=(s=w-A)<(a=S-T)?s:a)<v&&(v=n,y=h,n<=0))break}e.axis=r[y],e.overlap=v},a._findSupports=function(e,t,i,n){var s,a,o,h=t.vertices,c=h.length,l=e.position.x,d=e.position.y,u=i.x*n,f=i.y*n,p=h[0],g=p,m=u*(l-g.x)+f*(d-g.y);for(o=1;o<c;o+=1)(a=u*(l-(g=h[o]).x)+f*(d-g.y))<m&&(m=a,p=g);return(m=u*(l-(s=h[(c+p.index-1)%c]).x)+f*(d-s.y),u*(l-(g=h[(p.index+1)%c]).x)+f*(d-g.y)<m)?(r[0]=p,r[1]=g):(r[0]=p,r[1]=s),r}},43424:e=>{var t={};e.exports=t,t.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},81388:(e,t,i)=>{var r={};e.exports=r;var n=i(53402),s=i(52284);r.create=function(e){return n.extend({bodies:[],collisions:[],pairs:null},e)},r.setBodies=function(e,t){e.bodies=t.slice(0)},r.clear=function(e){e.bodies=[],e.collisions=[]},r.collisions=function(e){var t,i,n=e.pairs,a=e.bodies,o=a.length,h=r.canCollide,c=s.collides,l=e.collisions,d=0;for(a.sort(r._compareBoundsX),t=0;t<o;t++){var u=a[t],f=u.bounds,p=u.bounds.max.x,g=u.bounds.max.y,m=u.bounds.min.y,v=u.isStatic||u.isSleeping,y=u.parts.length,b=1===y;for(i=t+1;i<o;i++){var x=a[i],E=x.bounds;if(E.min.x>p)break;if(!(g<E.min.y)&&!(m>E.max.y)&&(!v||!x.isStatic&&!x.isSleeping)&&h(u.collisionFilter,x.collisionFilter)){var T=x.parts.length;if(b&&1===T){var A=c(u,x,n);A&&(l[d++]=A)}else for(var w=+(y>1),S=+(T>1),C=w;C<y;C++)for(var I=u.parts[C],f=I.bounds,_=S;_<T;_++){var O=x.parts[_],E=O.bounds;if(!(f.min.x>E.max.x)&&!(f.max.x<E.min.x)&&!(f.max.y<E.min.y)&&!(f.min.y>E.max.y)){var A=c(I,O,n);A&&(l[d++]=A)}}}}}return l.length!==d&&(l.length=d),l},r.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:(e.mask&t.category)!=0&&(t.mask&e.category)!=0},r._compareBoundsX=function(e,t){return e.bounds.min.x-t.bounds.min.x}},4506:(e,t,i)=>{var r={};e.exports=r;var n=i(43424);r.create=function(e,t){var i=e.bodyA,s=e.bodyB,a={id:r.id(i,s),bodyA:i,bodyB:s,collision:e,contacts:[n.create(),n.create()],contactCount:0,separation:0,isActive:!0,isSensor:i.isSensor||s.isSensor,timeCreated:t,timeUpdated:t,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(a,e,t),a},r.update=function(e,t,i){var r=t.supports,n=t.supportCount,s=e.contacts,a=t.parentA,o=t.parentB;e.isActive=!0,e.timeUpdated=i,e.collision=t,e.separation=t.depth,e.inverseMass=a.inverseMass+o.inverseMass,e.friction=a.friction<o.friction?a.friction:o.friction,e.frictionStatic=a.frictionStatic>o.frictionStatic?a.frictionStatic:o.frictionStatic,e.restitution=a.restitution>o.restitution?a.restitution:o.restitution,e.slop=a.slop>o.slop?a.slop:o.slop,e.contactCount=n,t.pair=e;var h=r[0],c=s[0],l=r[1],d=s[1];(d.vertex===h||c.vertex===l)&&(s[1]=c,s[0]=c=d,d=s[1]),c.vertex=h,d.vertex=l},r.setActive=function(e,t,i){t?(e.isActive=!0,e.timeUpdated=i):(e.isActive=!1,e.contactCount=0)},r.id=function(e,t){return e.id<t.id?e.id.toString(36)+":"+t.id.toString(36):t.id.toString(36)+":"+e.id.toString(36)}},99561:(e,t,i)=>{var r={};e.exports=r;var n=i(4506),s=i(53402);r.create=function(e){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},r.update=function(e,t,i){var r,s,a,o=n.update,h=n.create,c=n.setActive,l=e.table,d=e.list,u=d.length,f=u,p=e.collisionStart,g=e.collisionEnd,m=e.collisionActive,v=t.length,y=0,b=0,x=0;for(a=0;a<v;a++)(s=(r=t[a]).pair)?(s.isActive&&(m[x++]=s),o(s,r,i)):(l[(s=h(r,i)).id]=s,p[y++]=s,d[f++]=s);for(a=0,f=0,u=d.length;a<u;a++)(s=d[a]).timeUpdated>=i?d[f++]=s:(c(s,!1,i),s.collision.bodyA.sleepCounter>0&&s.collision.bodyB.sleepCounter>0?d[f++]=s:(g[b++]=s,delete l[s.id]));d.length!==f&&(d.length=f),p.length!==y&&(p.length=y),g.length!==b&&(g.length=b),m.length!==x&&(m.length=x)},r.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},73296:(e,t,i)=>{var r={};e.exports=r;var n=i(31725),s=i(52284),a=i(15647),o=i(66280),h=i(41598);r.collides=function(e,t){for(var i=[],r=t.length,n=e.bounds,o=s.collides,h=a.overlaps,c=0;c<r;c++){var l=t[c],d=l.parts.length,u=+(1!==d);if(e!==l&&h(l.bounds,n))for(var f=u;f<d;f++){var p=l.parts[f];if(h(p.bounds,n)){var g=o(p,e);if(g){i.push(g);break}}}}return i},r.ray=function(e,t,i,s){s=s||1e-100;for(var a=n.angle(t,i),h=n.magnitude(n.sub(t,i)),c=(i.x+t.x)*.5,l=(i.y+t.y)*.5,d=o.rectangle(c,l,h,s,{angle:a}),u=r.collides(d,e),f=0;f<u.length;f+=1){var p=u[f];p.body=p.bodyB=p.bodyA}return u},r.region=function(e,t,i){for(var r=[],n=0;n<e.length;n++){var s=e[n],o=a.overlaps(s.bounds,t);(o&&!i||!o&&i)&&r.push(s)}return r},r.point=function(e,t){for(var i=[],r=0;r<e.length;r++){var n=e[r];if(a.contains(n.bounds,t))for(var s=+(1!==n.parts.length);s<n.parts.length;s++){var o=n.parts[s];if(a.contains(o.bounds,t)&&h.contains(o.vertices,t)){i.push(n);break}}}return i}},66272:(e,t,i)=>{var r={};e.exports=r;var n=i(41598),s=i(53402),a=i(15647);r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(e){var t,i,r,n=e.length;for(t=0;t<n;t++)(i=e[t]).isActive&&(r=i.contactCount,i.collision.parentA.totalContacts+=r,i.collision.parentB.totalContacts+=r)},r.solvePosition=function(e,t,i){var n,a,o,h,c,l,d,u,f=r._positionDampen*(i||1),p=s.clamp(t/s._baseDelta,0,1),g=e.length;for(n=0;n<g;n++)(a=e[n]).isActive&&!a.isSensor&&(h=(o=a.collision).parentA,c=o.parentB,l=o.normal,a.separation=o.depth+l.x*(c.positionImpulse.x-h.positionImpulse.x)+l.y*(c.positionImpulse.y-h.positionImpulse.y));for(n=0;n<g;n++)(a=e[n]).isActive&&!a.isSensor&&(h=(o=a.collision).parentA,c=o.parentB,l=o.normal,u=a.separation-a.slop*p,(h.isStatic||c.isStatic)&&(u*=2),h.isStatic||h.isSleeping||(d=f/h.totalContacts,h.positionImpulse.x+=l.x*u*d,h.positionImpulse.y+=l.y*u*d),c.isStatic||c.isSleeping||(d=f/c.totalContacts,c.positionImpulse.x-=l.x*u*d,c.positionImpulse.y-=l.y*u*d))},r.postSolvePosition=function(e){for(var t=r._positionWarming,i=e.length,s=n.translate,o=a.update,h=0;h<i;h++){var c=e[h],l=c.positionImpulse,d=l.x,u=l.y,f=c.velocity;if(c.totalContacts=0,0!==d||0!==u){for(var p=0;p<c.parts.length;p++){var g=c.parts[p];s(g.vertices,l),o(g.bounds,g.vertices,f),g.position.x+=d,g.position.y+=u}c.positionPrev.x+=d,c.positionPrev.y+=u,d*f.x+u*f.y<0?(l.x=0,l.y=0):(l.x*=t,l.y*=t)}}},r.preSolveVelocity=function(e){var t,i,r=e.length;for(t=0;t<r;t++){var n=e[t];if(n.isActive&&!n.isSensor){var s=n.contacts,a=n.contactCount,o=n.collision,h=o.parentA,c=o.parentB,l=o.normal,d=o.tangent;for(i=0;i<a;i++){var u=s[i],f=u.vertex,p=u.normalImpulse,g=u.tangentImpulse;if(0!==p||0!==g){var m=l.x*p+d.x*g,v=l.y*p+d.y*g;h.isStatic||h.isSleeping||(h.positionPrev.x+=m*h.inverseMass,h.positionPrev.y+=v*h.inverseMass,h.anglePrev+=h.inverseInertia*((f.x-h.position.x)*v-(f.y-h.position.y)*m)),c.isStatic||c.isSleeping||(c.positionPrev.x-=m*c.inverseMass,c.positionPrev.y-=v*c.inverseMass,c.anglePrev-=c.inverseInertia*((f.x-c.position.x)*v-(f.y-c.position.y)*m))}}}}},r.solveVelocity=function(e,t){var i,n,a,o,h=t/s._baseDelta,c=h*h*h,l=-r._restingThresh*h,d=r._restingThreshTangent,u=r._frictionNormalMultiplier*h,f=r._frictionMaxStatic,p=e.length;for(a=0;a<p;a++){var g=e[a];if(g.isActive&&!g.isSensor){var m=g.collision,v=m.parentA,y=m.parentB,b=m.normal.x,x=m.normal.y,E=m.tangent.x,T=m.tangent.y,A=g.inverseMass,w=g.friction*g.frictionStatic*u,S=g.contacts,C=g.contactCount,I=1/C,_=v.position.x-v.positionPrev.x,O=v.position.y-v.positionPrev.y,P=v.angle-v.anglePrev,M=y.position.x-y.positionPrev.x,R=y.position.y-y.positionPrev.y,L=y.angle-y.anglePrev;for(o=0;o<C;o++){var D=S[o],k=D.vertex,N=k.x-v.position.x,F=k.y-v.position.y,B=k.x-y.position.x,U=k.y-y.position.y,G=_-F*P-(M-U*L),V=O+N*P-(R+B*L),Y=b*G+x*V,j=E*G+T*V,W=g.separation+Y,z=Math.min(W,1),H=(z=W<0?0:z)*w;j<-H||j>H?(n=j>0?j:-j,(i=g.friction*(j>0?1:-1)*c)<-n?i=-n:i>n&&(i=n)):(i=j,n=f);var X=N*x-F*b,q=B*x-U*b,K=I/(A+v.inverseInertia*X*X+y.inverseInertia*q*q),J=(1+g.restitution)*Y*K;if(i*=K,Y<l)D.normalImpulse=0;else{var Q=D.normalImpulse;D.normalImpulse+=J,D.normalImpulse>0&&(D.normalImpulse=0),J=D.normalImpulse-Q}if(j<-d||j>d)D.tangentImpulse=0;else{var $=D.tangentImpulse;D.tangentImpulse+=i,D.tangentImpulse<-n&&(D.tangentImpulse=-n),D.tangentImpulse>n&&(D.tangentImpulse=n),i=D.tangentImpulse-$}var Z=b*J+E*i,ee=x*J+T*i;v.isStatic||v.isSleeping||(v.positionPrev.x+=Z*v.inverseMass,v.positionPrev.y+=ee*v.inverseMass,v.anglePrev+=(N*ee-F*Z)*v.inverseInertia),y.isStatic||y.isSleeping||(y.positionPrev.x-=Z*y.inverseMass,y.positionPrev.y-=ee*y.inverseMass,y.anglePrev-=(B*ee-U*Z)*y.inverseInertia)}}}}},48140:(e,t,i)=>{var r={};e.exports=r;var n=i(41598),s=i(31725),a=i(53614),o=i(15647),h=i(66615),c=i(53402);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(e){e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var t=e.bodyA?s.add(e.bodyA.position,e.pointA):e.pointA,i=e.bodyB?s.add(e.bodyB.position,e.pointB):e.pointB,r=s.magnitude(s.sub(t,i));e.length=void 0!==e.length?e.length:r,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var n={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(n.type="pin",n.anchors=!1):e.stiffness<.9&&(n.type="spring"),e.render=c.extend(n,e.render),e},r.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],r=i.constraintImpulse;i.isStatic||0===r.x&&0===r.y&&0===r.angle||(i.position.x+=r.x,i.position.y+=r.y,i.angle+=r.angle)}},r.solveAll=function(e,t){for(var i=c.clamp(t/c._baseDelta,0,1),n=0;n<e.length;n+=1){var s=e[n],a=!s.bodyA||s.bodyA&&s.bodyA.isStatic,o=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(a||o)&&r.solve(e[n],i)}for(n=0;n<e.length;n+=1)a=!(s=e[n]).bodyA||s.bodyA&&s.bodyA.isStatic,o=!s.bodyB||s.bodyB&&s.bodyB.isStatic,a||o||r.solve(e[n],i)},r.solve=function(e,t){var i=e.bodyA,n=e.bodyB,a=e.pointA,o=e.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(a,i.angle-e.angleA,a),e.angleA=i.angle),n&&!n.isStatic&&(s.rotate(o,n.angle-e.angleB,o),e.angleB=n.angle);var h=a,c=o;if(i&&(h=s.add(i.position,a)),n&&(c=s.add(n.position,o)),h&&c){var l=s.sub(h,c),d=s.magnitude(l);d<r._minLength&&(d=r._minLength);var u,f,p,g,m,v=(d-e.length)/d,y=e.stiffness>=1||0===e.length?e.stiffness*t:e.stiffness*t*t,b=e.damping*t,x=s.mult(l,v*y),E=(i?i.inverseMass:0)+(n?n.inverseMass:0),T=E+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(b>0){var A=s.create();p=s.div(l,d),m=s.sub(n&&s.sub(n.position,n.positionPrev)||A,i&&s.sub(i.position,i.positionPrev)||A),g=s.dot(p,m)}i&&!i.isStatic&&(f=i.inverseMass/E,i.constraintImpulse.x-=x.x*f,i.constraintImpulse.y-=x.y*f,i.position.x-=x.x*f,i.position.y-=x.y*f,b>0&&(i.positionPrev.x-=b*p.x*g*f,i.positionPrev.y-=b*p.y*g*f),u=s.cross(a,x)/T*r._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle-=u,i.angle-=u),n&&!n.isStatic&&(f=n.inverseMass/E,n.constraintImpulse.x+=x.x*f,n.constraintImpulse.y+=x.y*f,n.position.x+=x.x*f,n.position.y+=x.y*f,b>0&&(n.positionPrev.x+=b*p.x*g*f,n.positionPrev.y+=b*p.y*g*f),u=s.cross(o,x)/T*r._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle+=u,n.angle+=u)}}},r.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],c=i.constraintImpulse;if(!i.isStatic&&(0!==c.x||0!==c.y||0!==c.angle)){a.set(i,!1);for(var l=0;l<i.parts.length;l++){var d=i.parts[l];n.translate(d.vertices,c),l>0&&(d.position.x+=c.x,d.position.y+=c.y),0!==c.angle&&(n.rotate(d.vertices,c.angle,i.position),h.rotate(d.axes,c.angle),l>0&&s.rotateAbout(d.position,c.angle,i.position,d.position)),o.update(d.bounds,d.vertices,i.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}},r.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),y:(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0)}},r.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),y:(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0)}},r.currentLength=function(e){var t=(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),i=(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0),r=(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),n=(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0),s=t-r,a=i-n;return Math.sqrt(s*s+a*a)}},53402:(e,t,i)=>{var r,n={};e.exports=n,n._baseDelta=1e3/60,n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n._warnedOnce={},n._decomp=null,n.extend=function(e,t){var i,r;"boolean"==typeof t?(i=2,r=t):(i=1,r=!0);for(var s=i;s<arguments.length;s++){var a=arguments[s];if(a)for(var o in a)r&&a[o]&&a[o].constructor===Object?e[o]&&e[o].constructor!==Object?e[o]=a[o]:(e[o]=e[o]||{},n.extend(e[o],r,a[o])):e[o]=a[o]}return e},n.clone=function(e,t){return n.extend({},t,e)},n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},n.values=function(e){var t=[];if(Object.keys){for(var i=Object.keys(e),r=0;r<i.length;r++)t.push(e[i[r]]);return t}for(var n in e)t.push(e[n]);return t},n.get=function(e,t,i,r){t=t.split(".").slice(i,r);for(var n=0;n<t.length;n+=1)e=e[t[n]];return e},n.set=function(e,t,i,r,s){var a=t.split(".").slice(r,s);return n.get(e,t,0,-1)[a[a.length-1]]=i,i},n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(n.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(e){return"u">typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isFunction=function(e){return"function"==typeof e},n.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},n.isString=function(e){return"[object String]"===toString.call(e)},n.clamp=function(e,t,i){return e<t?t:e>i?i:e},n.sign=function(e){return e<0?-1:1},n.now=function(){if("u">typeof window&&window.performance){if(window.performance.now)return window.performance.now();else if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-n._nowStartTime},n.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+r()*(t-e)},r=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280},n.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");n._warnedOnce[e]||(n.warn(e),n._warnedOnce[e]=!0)},n.deprecated=function(e,t,i){e[t]=n.chain(function(){n.warnOnce("ð deprecated ð",i)},e[t])},n.nextId=function(){return n._nextId++},n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return -1},n.map=function(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r+=1)i.push(t(e[r]));return i},n.topologicalSort=function(e){var t=[],i=[],r=[];for(var s in e)i[s]||r[s]||n._topologicalSort(s,i,r,e,t);return t},n._topologicalSort=function(e,t,i,r,s){var a=r[e]||[];i[e]=!0;for(var o=0;o<a.length;o+=1){var h=a[o];!i[h]&&(t[h]||n._topologicalSort(h,t,i,r,s))}i[e]=!1,t[e]=!0,s.push(e)},n.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var i=arguments[t];i._chained?e.push.apply(e,i._chained):e.push(i)}var r=function(){for(var t,i=Array(arguments.length),r=0,n=arguments.length;r<n;r++)i[r]=arguments[r];for(r=0;r<e.length;r+=1){var s=e[r].apply(t,i);void 0!==s&&(t=s)}return t};return r._chained=e,r},n.chainPathBefore=function(e,t,i){return n.set(e,t,n.chain(i,n.get(e,t)))},n.chainPathAfter=function(e,t,i){return n.set(e,t,n.chain(n.get(e,t),i))},n.setDecomp=function(e){n._decomp=e},n.getDecomp=function(){var e=n._decomp;try{!e&&"u">typeof window&&(e=window.decomp),e||void 0===i.g||(e=i.g.decomp)}catch(t){e=null}return e}},48413:(e,t,i)=>{var r={};e.exports=r;var n=i(53614),s=i(66272),a=i(81388),o=i(99561),h=i(35810),c=i(69351),l=i(48140),d=i(53402),u=i(22562);r._deltaMax=1e3/60,r.create=function(e){e=e||{};var t=d.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},e);return t.world=e.world||c.create({label:"World"}),t.pairs=e.pairs||o.create(),t.detector=e.detector||a.create(),t.detector.pairs=t.pairs,t.grid={buckets:[]},t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},r.update=function(e,t){var i,u=d.now(),f=e.world,p=e.detector,g=e.pairs,m=e.timing,v=m.timestamp;t>r._deltaMax&&d.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",r._deltaMax.toFixed(3),"ms."),t=(void 0!==t?t:d._baseDelta)*m.timeScale,m.timestamp+=t,m.lastDelta=t;var y={timestamp:m.timestamp,delta:t};h.trigger(e,"beforeUpdate",y);var b=c.allBodies(f),x=c.allConstraints(f),E=c.allComposites(f);for(f.isModified&&(a.setBodies(p,b),c.setModified(f,!1,!1,!0)),e.enableSleeping&&n.update(b,t),r._bodiesApplyGravity(b,e.gravity),r.wrap(b,E),r.attractors(b),t>0&&r._bodiesUpdate(b,t),h.trigger(e,"beforeSolve",y),l.preSolveAll(b),i=0;i<e.constraintIterations;i++)l.solveAll(x,t);l.postSolveAll(b);var T=a.collisions(p);o.update(g,T,v),e.enableSleeping&&n.afterCollisions(g.list),g.collisionStart.length>0&&h.trigger(e,"collisionStart",{pairs:g.collisionStart,timestamp:m.timestamp,delta:t});var A=d.clamp(20/e.positionIterations,0,1);for(s.preSolvePosition(g.list),i=0;i<e.positionIterations;i++)s.solvePosition(g.list,t,A);for(s.postSolvePosition(b),l.preSolveAll(b),i=0;i<e.constraintIterations;i++)l.solveAll(x,t);for(l.postSolveAll(b),s.preSolveVelocity(g.list),i=0;i<e.velocityIterations;i++)s.solveVelocity(g.list,t);return r._bodiesUpdateVelocities(b),g.collisionActive.length>0&&h.trigger(e,"collisionActive",{pairs:g.collisionActive,timestamp:m.timestamp,delta:t}),g.collisionEnd.length>0&&h.trigger(e,"collisionEnd",{pairs:g.collisionEnd,timestamp:m.timestamp,delta:t}),r._bodiesClearForces(b),h.trigger(e,"afterUpdate",y),e.timing.lastElapsed=d.now()-u,e},r.merge=function(e,t){if(d.extend(e,t),t.world){e.world=t.world,r.clear(e);for(var i=c.allBodies(e.world),s=0;s<i.length;s++){var a=i[s];n.set(a,!1),a.id=d.nextId()}}},r.clear=function(e){o.clear(e.pairs),a.clear(e.detector)},r._bodiesClearForces=function(e){for(var t=e.length,i=0;i<t;i++){var r=e[i];r.force.x=0,r.force.y=0,r.torque=0}},r._bodiesApplyGravity=function(e,t){var i=void 0!==t.scale?t.scale:.001,r=e.length;if((0!==t.x||0!==t.y)&&0!==i)for(var n=0;n<r;n++){var s=e[n];s.ignoreGravity||s.isStatic||s.isSleeping||(s.force.y+=s.mass*t.y*i,s.force.x+=s.mass*t.x*i)}},r._bodiesUpdate=function(e,t){for(var i=e.length,r=0;r<i;r++){var n=e[r];n.isStatic||n.isSleeping||u.update(n,t)}},r._bodiesUpdateVelocities=function(e){for(var t=e.length,i=0;i<t;i++)u.updateVelocities(e[i])},r.wrap=function(e,t){for(var i=0;i<e.length;i+=1){var r=e[i];null!==r.wrapBounds&&u.wrap(r,r.wrapBounds)}for(i=0;i<t.length;i+=1){var n=t[i];null!==n.wrapBounds&&c.wrap(n,n.wrapBounds)}},r.attractors=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.attractors;if(r&&r.length>0)for(var n=0;n<e.length;n++){var s=e[n];if(t!==n)for(var a=0;a<r.length;a++){var o=r[a],h=o;d.isFunction(o)&&(h=o(i,s)),h&&u.applyForce(s,s.position,h)}}}}},35810:(e,t,i)=>{var r={};e.exports=r;var n=i(53402);r.on=function(e,t,i){for(var r,n=t.split(" "),s=0;s<n.length;s++)r=n[s],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(i);return i},r.off=function(e,t,i){if(!t){e.events={};return}"function"==typeof t&&(i=t,t=n.keys(e.events).join(" "));for(var r=t.split(" "),s=0;s<r.length;s++){var a=e.events[r[s]],o=[];if(i&&a)for(var h=0;h<a.length;h++)a[h]!==i&&o.push(a[h]);e.events[r[s]]=o}},r.trigger=function(e,t,i){var r,s,a,o,h=e.events;if(h&&n.keys(h).length>0){i||(i={}),r=t.split(" ");for(var c=0;c<r.length;c++)if(a=h[s=r[c]]){(o=n.clone(i,!1)).name=s,o.source=e;for(var l=0;l<a.length;l++)a[l].apply(e,[o])}}}},6790:(e,t,i)=>{var r={};e.exports=r;var n=i(73832),s=i(53402);r.name="matter-js",r.version="0.20.0",r.uses=[],r.used=[],r.use=function(){n.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathAfter(r,e,t)}},73832:(e,t,i)=>{var r={};e.exports=r;var n=i(53402);r._registry={},r.register=function(e){if(r.isPlugin(e)||n.warn("Plugin.register:",r.toString(e),"does not implement all required fields."),e.name in r._registry){var t=r._registry[e.name],i=r.versionParse(e.version).number,s=r.versionParse(t.version).number;i>s?(n.warn("Plugin.register:",r.toString(t),"was upgraded to",r.toString(e)),r._registry[e.name]=e):i<s?n.warn("Plugin.register:",r.toString(t),"can not be downgraded to",r.toString(e)):e!==t&&n.warn("Plugin.register:",r.toString(e),"is already registered to different plugin object")}else r._registry[e.name]=e;return e},r.resolve=function(e){return r._registry[r.dependencyParse(e).name]},r.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},r.isPlugin=function(e){return e&&e.name&&e.version&&e.install},r.isUsed=function(e,t){return e.used.indexOf(t)>-1},r.isFor=function(e,t){var i=e.for&&r.dependencyParse(e.for);return!e.for||t.name===i.name&&r.versionSatisfies(t.version,i.range)},r.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0===e.uses.length)return void n.warn("Plugin.use:",r.toString(e),"does not specify any dependencies to install.");for(var i=r.dependencies(e),s=n.topologicalSort(i),a=[],o=0;o<s.length;o+=1)if(s[o]!==e.name){var h=r.resolve(s[o]);if(!h){a.push("â "+s[o]);continue}r.isUsed(e,h.name)||(r.isFor(h,e)||(n.warn("Plugin.use:",r.toString(h),"is for",h.for,"but installed on",r.toString(e)+"."),h._warned=!0),h.install?h.install(e):(n.warn("Plugin.use:",r.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(a.push("ð¶ "+r.toString(h)),delete h._warned):a.push("â "+r.toString(h)),e.used.push(h.name))}a.length>0&&!h.silent&&n.info(a.join("  "))},r.dependencies=function(e,t){var i=r.dependencyParse(e),s=i.name;if(!(s in(t=t||{}))){e=r.resolve(e)||e,t[s]=n.map(e.uses||[],function(t){r.isPlugin(t)&&r.register(t);var s=r.dependencyParse(t),a=r.resolve(t);return a&&!r.versionSatisfies(a.version,s.range)?(n.warn("Plugin.dependencies:",r.toString(a),"does not satisfy",r.toString(s),"used by",r.toString(i)+"."),a._warned=!0,e._warned=!0):a||(n.warn("Plugin.dependencies:",r.toString(t),"used by",r.toString(i),"could not be resolved."),e._warned=!0),s.name});for(var a=0;a<t[s].length;a+=1)r.dependencies(t[s][a],t);return t}},r.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},r.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;t.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var i=t.exec(e),r=Number(i[4]),s=Number(i[5]),a=Number(i[6]);return{isRange:!!(i[1]||i[2]),version:i[3],range:e,operator:i[1]||i[2]||"",major:r,minor:s,patch:a,parts:[r,s,a],prerelease:i[7],number:1e8*r+1e4*s+a}},r.versionSatisfies=function(e,t){t=t||"*";var i=r.versionParse(t),n=r.versionParse(e);if(i.isRange){if("*"===i.operator||"*"===e)return!0;if(">"===i.operator)return n.number>i.number;if(">="===i.operator)return n.number>=i.number;if("~"===i.operator)return n.major===i.major&&n.minor===i.minor&&n.patch>=i.patch;if("^"===i.operator)return i.major>0?n.major===i.major&&n.number>=i.number:i.minor>0?n.minor===i.minor&&n.patch>=i.patch:n.patch===i.patch}return e===t||"*"===e}},13037:(e,t,i)=>{var r,n={};e.exports=n;var s=i(35810),a=i(48413),o=i(53402);n._maxFrameDelta=1e3/15,n._frameDeltaFallback=1e3/60,n._timeBufferMargin=1.5,n._elapsedNextEstimate=1,n._smoothingLowerBound=.1,n._smoothingUpperBound=.9,n.create=function(e){var t=o.extend({delta:1e3/60,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:1e3/30,lastUpdatesDeferred:0,enabled:!0},e);return t.fps=0,t},n.run=function(e,t){return e.timeBuffer=n._frameDeltaFallback,!function i(r){e.frameRequestId=n._onNextFrame(e,i),r&&e.enabled&&n.tick(e,t,r)}(),e},n.tick=function(e,t,i){var h=o.now(),c=e.delta,l=0,d=i-e.timeLastTick;if((!d||!e.timeLastTick||d>Math.max(n._maxFrameDelta,e.maxFrameTime))&&(d=e.frameDelta||n._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(d),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var u=e.frameDeltaHistory.slice(0).sort();d=r(e.frameDeltaHistory.slice(u.length*n._smoothingLowerBound,u.length*n._smoothingUpperBound))||d}e.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),e.frameDelta=d,e.timeLastTick=i,e.timeBuffer+=e.frameDelta,e.timeBuffer=o.clamp(e.timeBuffer,0,e.frameDelta+c*n._timeBufferMargin),e.lastUpdatesDeferred=0;var f=e.maxUpdates||Math.ceil(e.maxFrameTime/c),p={timestamp:t.timing.timestamp};s.trigger(e,"beforeTick",p),s.trigger(e,"tick",p);for(var g=o.now();c>0&&e.timeBuffer>=c*n._timeBufferMargin;){s.trigger(e,"beforeUpdate",p),a.update(t,c),s.trigger(e,"afterUpdate",p),e.timeBuffer-=c,l+=1;var m=o.now()-h,v=o.now()-g,y=m+n._elapsedNextEstimate*v/l;if(l>=f||y>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/c-n._timeBufferMargin));break}}t.timing.lastUpdatesPerFrame=l,s.trigger(e,"afterTick",p),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/c)>f?o.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&o.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),void 0!==e.isFixed&&o.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&o.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),0!==e.fps&&o.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},n.stop=function(e){n._cancelNextFrame(e)},n._onNextFrame=function(e,t){if("u">typeof window&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(t);else throw Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},n._cancelNextFrame=function(e){if("u">typeof window&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw Error("Matter.Runner: missing required global window.cancelAnimationFrame.")},n._mean=r=function(e){for(var t=0,i=e.length,r=0;r<i;r+=1)t+=e[r];return t/i||0}},53614:(e,t,i)=>{var r={};e.exports=r;var n=i(22562),s=i(35810),a=i(53402);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(e,t){for(var i=t/a._baseDelta,s=r._motionSleepThreshold,o=0;o<e.length;o++){var h=e[o],c=n.getSpeed(h),l=n.getAngularSpeed(h),d=c*c+l*l;if(0!==h.force.x||0!==h.force.y){r.set(h,!1);continue}var u=Math.min(h.motion,d),f=Math.max(h.motion,d);h.motion=r._minBias*u+(1-r._minBias)*f,h.sleepThreshold>0&&h.motion<s?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold/i&&r.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}},r.afterCollisions=function(e){for(var t=r._motionSleepThreshold,i=0;i<e.length;i++){var n=e[i];if(n.isActive){var s=n.collision,a=s.bodyA.parent,o=s.bodyB.parent;if((!a.isSleeping||!o.isSleeping)&&!a.isStatic&&!o.isStatic&&(a.isSleeping||o.isSleeping)){var h=a.isSleeping&&!a.isStatic?a:o,c=h===a?o:a;!h.isStatic&&c.motion>t&&r.set(h,!1)}}}},r.set=function(e,t){var i=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,i||s.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,i&&s.trigger(e,"sleepEnd"))}},66280:(e,t,i)=>{var r={};e.exports=r;var n=i(41598),s=i(53402),a=i(22562),o=i(15647),h=i(31725);r.rectangle=function(e,t,i,r,o){o=o||{};var h={label:"Rectangle Body",position:{x:e,y:t},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(o.chamfer){var c=o.chamfer;h.vertices=n.chamfer(h.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete o.chamfer}return a.create(s.extend({},h,o))},r.trapezoid=function(e,t,i,r,o,h){h=h||{},o>=1&&s.warn("Bodies.trapezoid: slope parameter must be < 1.");var c,l=(1-2*(o*=.5))*i,d=i*o,u=d+l,f=u+d;c=o<.5?"L 0 0 L "+d+" "+-r+" L "+u+" "+-r+" L "+f+" 0":"L 0 0 L "+u+" "+-r+" L "+f+" 0";var p={label:"Trapezoid Body",position:{x:e,y:t},vertices:n.fromPath(c)};if(h.chamfer){var g=h.chamfer;p.vertices=n.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete h.chamfer}return a.create(s.extend({},p,h))},r.circle=function(e,t,i,n,a){n=n||{};var o=Math.ceil(Math.max(10,Math.min(a=a||25,i)));return o%2==1&&(o+=1),r.polygon(e,t,o,i,s.extend({},{label:"Circle Body",circleRadius:i},n))},r.polygon=function(e,t,i,o,h){if(h=h||{},i<3)return r.circle(e,t,o,h);for(var c=2*Math.PI/i,l="",d=.5*c,u=0;u<i;u+=1){var f=d+u*c,p=Math.cos(f)*o,g=Math.sin(f)*o;l+="L "+p.toFixed(3)+" "+g.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:e,y:t},vertices:n.fromPath(l)};if(h.chamfer){var v=h.chamfer;m.vertices=n.chamfer(m.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete h.chamfer}return a.create(s.extend({},m,h))},r.fromVertices=function(e,t,i,r,c,l,d,u){var f,p,g,m,v,y,b,x,E,T,A=s.getDecomp();for(f=!!(A&&A.quickDecomp),r=r||{},g=[],c=void 0!==c&&c,l=void 0!==l?l:.01,d=void 0!==d?d:10,u=void 0!==u?u:.01,s.isArray(i[0])||(i=[i]),E=0;E<i.length;E+=1)if(v=i[E],(m=n.isConvex(v))||f||s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),m||!f)v=m?n.clockwiseSort(v):n.hull(v),g.push({position:{x:e,y:t},vertices:v});else{var w=v.map(function(e){return[e.x,e.y]});A.makeCCW(w),!1!==l&&A.removeCollinearPoints(w,l),!1!==u&&A.removeDuplicatePoints&&A.removeDuplicatePoints(w,u);var S=A.quickDecomp(w);for(y=0;y<S.length;y++){var C=S[y].map(function(e){return{x:e[0],y:e[1]}});d>0&&n.area(C)<d||g.push({position:n.centre(C),vertices:C})}}for(y=0;y<g.length;y++)g[y]=a.create(s.extend(g[y],r));if(c)for(y=0;y<g.length;y++){var I=g[y];for(b=y+1;b<g.length;b++){var _=g[b];if(o.overlaps(I.bounds,_.bounds)){var O=I.vertices,P=_.vertices;for(x=0;x<I.vertices.length;x++)for(T=0;T<_.vertices.length;T++){var M=h.magnitudeSquared(h.sub(O[(x+1)%O.length],P[T])),R=h.magnitudeSquared(h.sub(O[x],P[(T+1)%P.length]));M<5&&R<5&&(O[x].isInternal=!0,P[T].isInternal=!0)}}}}return g.length>1?(p=a.create(s.extend({parts:g.slice(0)},r)),a.setPosition(p,{x:e,y:t}),p):g[0]},r.flagCoincidentParts=function(e,t){void 0===t&&(t=5);for(var i=0;i<e.length;i++)for(var r=e[i],n=i+1;n<e.length;n++){var s=e[n];if(o.overlaps(r.bounds,s.bounds))for(var a=r.vertices,c=s.vertices,l=0;l<r.vertices.length;l++)for(var d=0;d<s.vertices.length;d++){var u=h.magnitudeSquared(h.sub(a[(l+1)%a.length],c[d])),f=h.magnitudeSquared(h.sub(a[l],c[(d+1)%c.length]));u<t&&f<t&&(a[l].isInternal=!0,c[d].isInternal=!0)}}return e}},74116:(e,t,i)=>{var r={};e.exports=r;var n=i(69351),s=i(48140),a=i(53402),o=i(22562),h=i(66280);r.stack=function(e,t,i,r,s,a,h){for(var c,l=n.create({label:"Stack"}),d=e,u=t,f=0,p=0;p<r;p++){for(var g=0,m=0;m<i;m++){var v=h(d,u,m,p,c,f);if(v){var y=v.bounds.max.y-v.bounds.min.y,b=v.bounds.max.x-v.bounds.min.x;y>g&&(g=y),o.translate(v,{x:.5*b,y:.5*y}),d=v.bounds.max.x+s,n.addBody(l,v),c=v,f+=1}else d+=s}u+=g+a,d=e}return l},r.chain=function(e,t,i,r,o,h){for(var c=e.bodies,l=1;l<c.length;l++){var d=c[l-1],u=c[l],f=d.bounds.max.y-d.bounds.min.y,p=d.bounds.max.x-d.bounds.min.x,g=u.bounds.max.y-u.bounds.min.y,m=u.bounds.max.x-u.bounds.min.x,v={bodyA:d,pointA:{x:p*t,y:f*i},bodyB:u,pointB:{x:m*r,y:g*o}},y=a.extend(v,h);n.addConstraint(e,s.create(y))}return e.label+=" Chain",e},r.mesh=function(e,t,i,r,o){var h,c,l,d,u,f=e.bodies;for(h=0;h<i;h++){for(c=1;c<t;c++)l=f[c-1+h*t],d=f[c+h*t],n.addConstraint(e,s.create(a.extend({bodyA:l,bodyB:d},o)));if(h>0)for(c=0;c<t;c++)l=f[c+(h-1)*t],d=f[c+h*t],n.addConstraint(e,s.create(a.extend({bodyA:l,bodyB:d},o))),r&&c>0&&(u=f[c-1+(h-1)*t],n.addConstraint(e,s.create(a.extend({bodyA:u,bodyB:d},o)))),r&&c<t-1&&(u=f[c+1+(h-1)*t],n.addConstraint(e,s.create(a.extend({bodyA:u,bodyB:d},o))))}return e.label+=" Mesh",e},r.pyramid=function(e,t,i,n,s,a,h){return r.stack(e,t,i,n,s,a,function(t,r,a,c,l,d){var u=Math.min(n,Math.ceil(i/2)),f=l?l.bounds.max.x-l.bounds.min.x:0;if(!(c>u)){var p=c=u-c,g=i-1-c;if(!(a<p)&&!(a>g))return 1===d&&o.translate(l,{x:(a+(i%2==1?1:-1))*f,y:0}),h(e+(l?a*f:0)+a*s,r,a,c,l,d)}})},r.newtonsCradle=function(e,t,i,r,a){for(var o=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var l=h.circle(e+1.9*r*c,t+a,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=s.create({pointA:{x:e+1.9*r*c,y:t},bodyB:l});n.addBody(o,l),n.addConstraint(o,d)}return o},r.car=function(e,t,i,r,a){var c=o.nextGroup(!0),l=-(.5*i)+20,d=.5*i-20,u=n.create({label:"Car"}),f=h.rectangle(e,t,i,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),p=h.circle(e+l,t+0,a,{collisionFilter:{group:c},friction:.8}),g=h.circle(e+d,t+0,a,{collisionFilter:{group:c},friction:.8}),m=s.create({bodyB:f,pointB:{x:l,y:0},bodyA:p,stiffness:1,length:0}),v=s.create({bodyB:f,pointB:{x:d,y:0},bodyA:g,stiffness:1,length:0});return n.addBody(u,f),n.addBody(u,p),n.addBody(u,g),n.addConstraint(u,m),n.addConstraint(u,v),u},r.softBody=function(e,t,i,n,s,o,c,l,d,u){d=a.extend({inertia:1/0},d),u=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},u);var f=r.stack(e,t,i,n,s,o,function(e,t){return h.circle(e,t,l,d)});return r.mesh(f,i,n,c,u),f.label="Soft Body",f}},66615:(e,t,i)=>{var r={};e.exports=r;var n=i(31725),s=i(53402);r.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var r=(i+1)%e.length,a=n.normalise({x:e[r].y-e[i].y,y:e[i].x-e[r].x}),o=0===a.y?1/0:a.x/a.y;t[o=o.toFixed(3).toString()]=a}return s.values(t)},r.rotate=function(e,t){if(0!==t)for(var i=Math.cos(t),r=Math.sin(t),n=0;n<e.length;n++){var s,a=e[n];s=a.x*i-a.y*r,a.y=a.x*r+a.y*i,a.x=s}}},15647:e=>{var t={};e.exports=t,t.create=function(e){var i={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(i,e),i},t.update=function(e,t,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var n=t[r];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},t.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},t.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},t.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},t.shift=function(e,t){var i=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+i,e.min.y=t.y,e.max.y=t.y+r},t.wrap=function(e,t,i){var r=null,n=null;if(void 0!==t.min.x&&void 0!==t.max.x&&(e.min.x>t.max.x?r=t.min.x-e.max.x:e.max.x<t.min.x&&(r=t.max.x-e.min.x)),void 0!==t.min.y&&void 0!==t.max.y&&(e.min.y>t.max.y?n=t.min.y-e.max.y:e.max.y<t.min.y&&(n=t.max.y-e.min.y)),null!==r||null!==n)return{x:r||0,y:n||0}}},74058:(e,t,i)=>{var r={};e.exports=r,i(15647);var n=i(53402);r.pathToVertices=function(e,t){!("u">typeof window)||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,a,o,h,c,l,d,u,f,p,g=[],m=0,v=0,y=0;t=t||15;var b=function(e,t,i){var r=i%2==1&&i>1;if(!u||e!=u.x||t!=u.y){u&&r?(f=u.x,p=u.y):(f=0,p=0);var n={x:f+e,y:p+t};(r||!u)&&(u=n),g.push(n),v=f+e,y=p+t}},x=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":v=e.x,y=e.y;break;case"H":v=e.x;break;case"V":y=e.y}b(v,y,e.pathSegType)}};for(r._svgPathToAbsolute(e),a=e.getTotalLength(),c=[],i=0;i<e.pathSegList.numberOfItems;i+=1)c.push(e.pathSegList.getItem(i));for(l=c.concat();m<a;){if((h=c[e.getPathSegAtLength(m)])!=d){for(;l.length&&l[0]!=h;)x(l.shift());d=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":b((o=e.getPointAtLength(m)).x,o.y,0)}m+=t}for(i=0,s=l.length;i<s;++i)x(l[i]);return g},r._svgPathToAbsolute=function(e){for(var t,i,r,n,s,a,o=e.pathSegList,h=0,c=0,l=o.numberOfItems,d=0;d<l;++d){var u=o.getItem(d),f=u.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in u&&(h=u.x),"y"in u&&(c=u.y);else switch("x1"in u&&(r=h+u.x1),"x2"in u&&(s=h+u.x2),"y1"in u&&(n=c+u.y1),"y2"in u&&(a=c+u.y2),"x"in u&&(h+=u.x),"y"in u&&(c+=u.y),f){case"m":o.replaceItem(e.createSVGPathSegMovetoAbs(h,c),d);break;case"l":o.replaceItem(e.createSVGPathSegLinetoAbs(h,c),d);break;case"h":o.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(h),d);break;case"v":o.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":o.replaceItem(e.createSVGPathSegCurvetoCubicAbs(h,c,r,n,s,a),d);break;case"s":o.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(h,c,s,a),d);break;case"q":o.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(h,c,r,n),d);break;case"t":o.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(h,c),d);break;case"a":o.replaceItem(e.createSVGPathSegArcAbs(h,c,u.r1,u.r2,u.angle,u.largeArcFlag,u.sweepFlag),d);break;case"z":case"Z":h=t,c=i}("M"==f||"m"==f)&&(t=h,i=c)}}},31725:e=>{var t={};e.exports=t,t.create=function(e,t){return{x:e||0,y:t||0}},t.clone=function(e){return{x:e.x,y:e.y}},t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},t.rotate=function(e,t,i){var r=Math.cos(t),n=Math.sin(t);i||(i={});var s=e.x*r-e.y*n;return i.y=e.x*n+e.y*r,i.x=s,i},t.rotateAbout=function(e,t,i,r){var n=Math.cos(t),s=Math.sin(t);r||(r={});var a=i.x+((e.x-i.x)*n-(e.y-i.y)*s);return r.y=i.y+((e.x-i.x)*s+(e.y-i.y)*n),r.x=a,r},t.normalise=function(e){var i=t.magnitude(e);return 0===i?{x:0,y:0}:{x:e.x/i,y:e.y/i}},t.dot=function(e,t){return e.x*t.x+e.y*t.y},t.cross=function(e,t){return e.x*t.y-e.y*t.x},t.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)},t.add=function(e,t,i){return i||(i={}),i.x=e.x+t.x,i.y=e.y+t.y,i},t.sub=function(e,t,i){return i||(i={}),i.x=e.x-t.x,i.y=e.y-t.y,i},t.mult=function(e,t){return{x:e.x*t,y:e.y*t}},t.div=function(e,t){return{x:e.x/t,y:e.y/t}},t.perp=function(e,t){return{x:-((t=!0===t?-1:1)*e.y),y:t*e.x}},t.neg=function(e){return{x:-e.x,y:-e.y}},t.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]},41598:(e,t,i)=>{var r={};e.exports=r;var n=i(31725),s=i(53402);r.create=function(e,t){for(var i=[],r=0;r<e.length;r++){var n=e[r],s={x:n.x,y:n.y,index:r,body:t,isInternal:!1};i.push(s)}return i},r.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,function(e,t,r){i.push({x:parseFloat(t),y:parseFloat(r)})}),r.create(i,t)},r.centre=function(e){for(var t,i,s,a=r.area(e,!0),o={x:0,y:0},h=0;h<e.length;h++)s=(h+1)%e.length,t=n.cross(e[h],e[s]),i=n.mult(n.add(e[h],e[s]),t),o=n.add(o,i);return n.div(o,6*a)},r.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return n.div(t,e.length)},r.area=function(e,t){for(var i=0,r=e.length-1,n=0;n<e.length;n++)i+=(e[r].x-e[n].x)*(e[r].y+e[n].y),r=n;return t?i/2:Math.abs(i)/2},r.inertia=function(e,t){for(var i,r,s=0,a=0,o=0;o<e.length;o++)r=(o+1)%e.length,s+=(i=Math.abs(n.cross(e[r],e[o])))*(n.dot(e[r],e[r])+n.dot(e[r],e[o])+n.dot(e[o],e[o])),a+=i;return t/6*(s/a)},r.translate=function(e,t,i){i=void 0!==i?i:1;var r,n=e.length,s=t.x*i,a=t.y*i;for(r=0;r<n;r++)e[r].x+=s,e[r].y+=a;return e},r.rotate=function(e,t,i){if(0!==t){var r,n,s,a,o=Math.cos(t),h=Math.sin(t),c=i.x,l=i.y,d=e.length;for(a=0;a<d;a++)n=(r=e[a]).x-c,s=r.y-l,r.x=c+(n*o-s*h),r.y=l+(n*h+s*o);return e}},r.contains=function(e,t){for(var i,r=t.x,n=t.y,s=e.length,a=e[s-1],o=0;o<s;o++){if(i=e[o],(r-a.x)*(i.y-a.y)+(n-a.y)*(a.x-i.x)>0)return!1;a=i}return!0},r.scale=function(e,t,i,s){if(1===t&&1===i)return e;s=s||r.centre(e);for(var a,o,h=0;h<e.length;h++)a=e[h],o=n.sub(a,s),e[h].x=s.x+o.x*t,e[h].y=s.y+o.y*i;return e},r.chamfer=function(e,t,i,r,a){t="number"==typeof t?[t]:t||[8],i=void 0!==i?i:-1,r=r||2,a=a||14;for(var o=[],h=0;h<e.length;h++){var c=e[h-1>=0?h-1:e.length-1],l=e[h],d=e[(h+1)%e.length],u=t[h<t.length?h:t.length-1];if(0===u){o.push(l);continue}var f=n.normalise({x:l.y-c.y,y:c.x-l.x}),p=n.normalise({x:d.y-l.y,y:l.x-d.x}),g=Math.sqrt(2*Math.pow(u,2)),m=n.mult(s.clone(f),u),v=n.normalise(n.mult(n.add(f,p),.5)),y=n.sub(l,n.mult(v,g)),b=i;-1===i&&(b=1.75*Math.pow(u,.32)),(b=s.clamp(b,r,a))%2==1&&(b+=1);for(var x=Math.acos(n.dot(f,p))/b,E=0;E<b;E++)o.push(n.add(n.rotate(m,x*E),y))}return o},r.clockwiseSort=function(e){var t=r.mean(e);return e.sort(function(e,i){return n.angle(t,e)-n.angle(t,i)}),e},r.isConvex=function(e){var t,i,r,n,s=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(i=(t+1)%a,r=(t+2)%a,(n=(e[i].x-e[t].x)*(e[r].y-e[i].y)-(e[i].y-e[t].y)*(e[r].x-e[i].x))<0?s|=1:n>0&&(s|=2),3===s)return!1;return 0!==s||null},r.hull=function(e){var t,i,r=[],s=[];for((e=e.slice(0)).sort(function(e,t){var i=e.x-t.x;return 0!==i?i:e.y-t.y}),i=0;i<e.length;i+=1){for(t=e[i];s.length>=2&&0>=n.cross3(s[s.length-2],s[s.length-1],t);)s.pop();s.push(t)}for(i=e.length-1;i>=0;i-=1){for(t=e[i];r.length>=2&&0>=n.cross3(r[r.length-2],r[r.length-1],t);)r.pop();r.push(t)}return r.pop(),s.pop(),r.concat(s)}},55973:e=>{function t(e,t,i,r){var n=t[0]-e[0],s=t[1]-e[1],a=r[0]-i[0],o=r[1]-i[1];if(a*s-o*n==0)return!1;var h=(n*(i[1]-e[1])+s*(e[0]-i[0]))/(a*s-o*n),c=(a*(e[1]-i[1])+o*(i[0]-e[0]))/(o*n-a*s);return h>=0&&h<=1&&c>=0&&c<=1}function i(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])}function r(e,t,r){return 0>=i(e,t,r)}e.exports={decomp:function(e){var t=function e(t){for(var n=[],s=[],h=[],f=[],g=Number.MAX_VALUE,m=0;m<t.length;++m)if(c(t,m)){for(var v=0;v<t.length;++v)if(function(e,t,n){if(i(o(e,t+1),o(e,t),o(e,n))>=0&&r(o(e,t-1),o(e,t),o(e,n)))return!1;h=a(o(e,t),o(e,n));for(var s,h,c=0;c!==e.length;++c)if((c+1)%e.length!==t&&c!==t&&i(o(e,t),o(e,n),o(e,c+1))>=0&&r(o(e,t),o(e,n),o(e,c))&&(l[0]=o(e,t),l[1]=o(e,n),d[0]=o(e,c),d[1]=o(e,c+1),s=function(e,t,i){i=i||0;var r,n,s,a,o,h,c,l=[0,0];return r=e[1][1]-e[0][1],n=e[0][0]-e[1][0],s=r*e[0][0]+n*e[0][1],a=t[1][1]-t[0][1],o=t[0][0]-t[1][0],h=a*t[0][0]+o*t[0][1],p(c=r*o-a*n,0,i)||(l[0]=(o*s-n*h)/c,l[1]=(r*h-a*s)/c),l}(l,d),a(o(e,t),s)<h))return!1;return!0}(t,m,v)){s=e(u(t,m,v,f)),h=e(u(t,v,m,f));for(var y=0;y<h.length;y++)s.push(h[y]);s.length<g&&(n=s,g=s.length,n.push([o(t,m),o(t,v)]))}}return n}(e);return t.length>0?function e(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var r=[t],n=0;n<i.length;n++)for(var s=i[n],a=0;a<r.length;a++){var o=e(r[a],s);if(o){r.splice(a,1),r.push(o[0],o[1]);break}}return r}var s=i,n=t.indexOf(s[0]),a=t.indexOf(s[1]);return -1!==n&&-1!==a&&[u(t,n,a),u(t,a,n)]}(e,t):[e]},quickDecomp:function e(n,s,l,d,u,p,g){p=p||100,g=g||0,u=u||25,s=void 0!==s?s:[],l=l||[],d=d||[];var m=[0,0],v=[0,0],y=[0,0],b=0,x=0,E=0,T=0,A=0,w=0,S=0,C=[],I=[];if(n.length<3)return s;if(++g>p)return console.warn("quickDecomp: max level ("+p+") reached."),s;for(var _=0;_<n.length;++_)if(c(n,_)){l.push(n[_]),b=x=Number.MAX_VALUE;for(var O=0;O<n.length;++O)i(o(n,_-1),o(n,_),o(n,O))>0&&r(o(n,_-1),o(n,_),o(n,O-1))&&(y=f(o(n,_-1),o(n,_),o(n,O),o(n,O-1)),0>i(o(n,_+1),o(n,_),y)&&(E=a(n[_],y))<x)&&(x=E,v=y,w=O),i(o(n,_+1),o(n,_),o(n,O+1))>0&&r(o(n,_+1),o(n,_),o(n,O))&&(y=f(o(n,_+1),o(n,_),o(n,O),o(n,O+1)),i(o(n,_-1),o(n,_),y)>0&&(E=a(n[_],y))<b)&&(b=E,m=y,A=O);if(w===(A+1)%n.length)y[0]=(v[0]+m[0])/2,y[1]=(v[1]+m[1])/2,d.push(y),_<A?(h(C,n,_,A+1),C.push(y),I.push(y),0!==w&&h(I,n,w,n.length),h(I,n,0,_+1)):(0!==_&&h(C,n,_,n.length),h(C,n,0,A+1),C.push(y),I.push(y),h(I,n,w,_+1));else{if(w>A&&(A+=n.length),T=Number.MAX_VALUE,A<w)return s;for(var O=w;O<=A;++O)i(o(n,_-1),o(n,_),o(n,O))>=0&&r(o(n,_+1),o(n,_),o(n,O))&&(E=a(o(n,_),o(n,O)))<T&&function(e,i,r){for(var n=0;n!==e.length;++n)if(n!==i&&n!==r&&(n+1)%e.length!==i&&(n+1)%e.length!==r&&t(o(e,i),o(e,r),o(e,n),o(e,n+1)))return!1;return!0}(n,_,O)&&(T=E,S=O%n.length);_<S?(h(C,n,_,S+1),0!==S&&h(I,n,S,n.length),h(I,n,0,_+1)):(0!==_&&h(C,n,_,n.length),h(C,n,0,S+1),h(I,n,S,_+1))}return C.length<I.length?(e(C,s,l,d,u,p,g),e(I,s,l,d,u,p,g)):(e(I,s,l,d,u,p,g),e(C,s,l,d,u,p,g)),s}return s.push(n),s},isSimple:function(e){var i;for(i=0;i<e.length-1;i++)for(var r=0;r<i-1;r++)if(t(e[i],e[i+1],e[r],e[r+1]))return!1;for(i=1;i<e.length-2;i++)if(t(e[0],e[e.length-1],e[i],e[i+1]))return!1;return!0},removeCollinearPoints:function(e,t){for(var r,a,h,c=0,l=e.length-1;e.length>3&&l>=0;--l)r=o(e,l-1),a=o(e,l),h=o(e,l+1),(t?(n[0]=a[0]-r[0],n[1]=a[1]-r[1],s[0]=h[0]-a[0],s[1]=h[1]-a[1],Math.acos((n[0]*s[0]+n[1]*s[1])/(Math.sqrt(n[0]*n[0]+n[1]*n[1])*Math.sqrt(s[0]*s[0]+s[1]*s[1])))<t):0===i(r,a,h))&&(e.splice(l%e.length,1),c++);return c},removeDuplicatePoints:function(e,t){for(var i,r,n,s=e.length-1;s>=1;--s)for(var a=e[s],o=s-1;o>=0;--o){if(i=a,r=e[o],n=t,p(i[0],r[0],n)&&p(i[1],r[1],n)){e.splice(s,1);continue}}},makeCCW:function(e){for(var t=0,r=1;r<e.length;++r)(e[r][1]<e[t][1]||e[r][1]===e[t][1]&&e[r][0]>e[t][0])&&(t=r);return!(i(o(e,t-1),o(e,t),o(e,t+1))>0)&&(function(e){for(var t=[],i=e.length,r=0;r!==i;r++)t.push(e.pop());for(var r=0;r!==i;r++)e[r]=t[r]}(e),!0)}};var n=[],s=[];function a(e,t){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function o(e,t){var i=e.length;return e[t<0?t%i+i:t%i]}function h(e,t,i,r){for(var n=i;n<r;n++)e.push(t[n])}function c(e,t){return 0>i(o(e,t-1),o(e,t),o(e,t+1))}var l=[],d=[];function u(e,t,i,r){var n=r||[];if(n.length=0,t<i)for(var s=t;s<=i;s++)n.push(e[s]);else{for(var s=0;s<=i;s++)n.push(e[s]);for(var s=t;s<e.length;s++)n.push(e[s])}return n}function f(e,t,i,r,n){n=n||0;var s=t[1]-e[1],a=e[0]-t[0],o=s*e[0]+a*e[1],h=r[1]-i[1],c=i[0]-r[0],l=h*i[0]+c*i[1],d=s*c-h*a;return p(d,0,n)?[0,0]:[(c*o-a*l)/d,(s*l-h*o)/d]}function p(e,t,i){return Math.abs(e-t)<=(i=i||0)}},52018:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e){this.pluginManager=e,this.game=e.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}})},42363:e=>{e.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},37277:e=>{var t={},i={},r={};r.register=function(e,i,r,n){void 0===n&&(n=!1),t[e]={plugin:i,mapping:r,custom:n}},r.registerCustom=function(e,t,r,n){i[e]={plugin:t,mapping:r,data:n}},r.hasCore=function(e){return t.hasOwnProperty(e)},r.hasCustom=function(e){return i.hasOwnProperty(e)},r.getCore=function(e){return t[e]},r.getCustom=function(e){return i[e]},r.getCustomClass=function(e){return i.hasOwnProperty(e)?i[e].plugin:null},r.remove=function(e){t.hasOwnProperty(e)&&delete t[e]},r.removeCustom=function(e){i.hasOwnProperty(e)&&delete i[e]},r.destroyCorePlugins=function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]},r.destroyCustomPlugins=function(){for(var e in i)i.hasOwnProperty(e)&&delete i[e]},e.exports=r},77332:(e,t,i)=>{var r=i(83419),n=i(8443),s=i(50792),a=i(74099),o=i(44603),h=i(39429),c=i(95540),l=i(37277),d=i(72905),u=i(8054);e.exports=new r({Extends:s,initialize:function(e){s.call(this),this.game=e,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],e.isBooted||e.config.renderType===u.HEADLESS?this.boot():e.events.once(n.BOOT,this.boot,this)},boot:function(){var e,t,i,r,s,a,o,h=this.game.config,l=h.installGlobalPlugins;for(e=0,l=l.concat(this._pendingGlobal);e<l.length;e++)i=c(t=l[e],"key",null),r=c(t,"plugin",null),s=c(t,"start",!1),a=c(t,"mapping",null),o=c(t,"data",null),i&&(r?this.install(i,r,s,a,o):console.warn("Missing `plugin` for key: "+i));for(e=0,l=(l=h.installScenePlugins).concat(this._pendingScene);e<l.length;e++)i=c(t=l[e],"key",null),r=c(t,"plugin",null),a=c(t,"mapping",null),i&&(r?this.installScenePlugin(i,r,a):console.warn("Missing `plugin` for key: "+i));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(e,t,i){var r,n,s,a=this.game,o=e.scene,h=e.settings.map,c=e.settings.isBooted;for(r=0;r<t.length;r++)a[n=t[r]]?(e[n]=a[n],h.hasOwnProperty(n)&&(o[h[n]]=e[n])):"game"===n&&h.hasOwnProperty(n)&&(o[h[n]]=a);for(var d=0;d<i.length;d++)for(r=0,s=i[d];r<s.length;r++)if(n=s[r],l.hasCore(n)){var u=l.getCore(n),f=u.mapping,p=new u.plugin(o,this,f);e[f]=p,u.custom?o[f]=p:h.hasOwnProperty(f)&&(o[h[f]]=p),c&&p.boot()}for(r=0,s=this.plugins;r<s.length;r++){var g=s[r];g.mapping&&(o[g.mapping]=g.plugin)}},getDefaultScenePlugins:function(){var e=this.game.config.defaultPlugins;return e.concat(this.scenePlugins)},installScenePlugin:function(e,t,i,r,n){if(void 0===n&&(n=!1),"function"!=typeof t)return void console.warn("Invalid Scene Plugin: "+e);if(l.hasCore(e)||l.register(e,t,i,!0),-1===this.scenePlugins.indexOf(e))this.scenePlugins.push(e);else if(!n&&l.hasCore(e))return void console.warn("Scene Plugin key in use: "+e);if(r){var s=new t(r,this,e);r.sys[e]=s,i&&""!==i&&(r[i]=s),s.boot()}},install:function(e,t,i,r,n){if(void 0===i&&(i=!1),void 0===r&&(r=null),void 0===n&&(n=null),"function"!=typeof t)return console.warn("Invalid Plugin: "+e),null;if(l.hasCustom(e))return console.warn("Plugin key in use: "+e),null;if(null!==r&&(i=!0),this.game.isBooted){if(l.registerCustom(e,t,r,n),i)return this.start(e)}else this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:r,data:n});return null},getIndex:function(e){for(var t=this.plugins,i=0;i<t.length;i++)if(t[i].key===e)return i;return -1},getEntry:function(e){var t=this.getIndex(e);if(-1!==t)return this.plugins[t]},isActive:function(e){var t=this.getEntry(e);return t&&t.active},start:function(e,t){void 0===t&&(t=e);var i=this.getEntry(t);return i&&!i.active?(i.active=!0,i.plugin.start()):i||(i=this.createEntry(e,t)),i?i.plugin:null},createEntry:function(e,t){var i=l.getCustom(e);if(i){var r=new i.plugin(this);i={key:t,plugin:r,active:!0,mapping:i.mapping,data:i.data},this.plugins.push(i),r.init(i.data),r.start()}return i},stop:function(e){var t=this.getEntry(e);return t&&t.active&&(t.active=!1,t.plugin.stop()),this},get:function(e,t){void 0===t&&(t=!0);var i=this.getEntry(e);if(i)return i.plugin;var r=this.getClass(e);return r&&t?(i=this.createEntry(e,e))?i.plugin:null:r?r:null},getClass:function(e){return l.getCustomClass(e)},removeGlobalPlugin:function(e){var t=this.getEntry(e);t&&d(this.plugins,t),l.removeCustom(e)},removeScenePlugin:function(e){d(this.scenePlugins,e),l.remove(e)},registerGameObject:function(e,t,i){return t&&h.register(e,t),i&&o.register(e,i),this},removeGameObject:function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=!0),t&&h.remove(e),i&&o.remove(e),this},registerFileType:function(e,t,i){a.register(e,t),i&&i.sys.load&&(i.sys.load[e]=t)},destroy:function(){for(var e=0;e<this.plugins.length;e++)this.plugins[e].plugin.destroy();l.destroyCustomPlugins(),this.game.noReturn&&l.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}})},45145:(e,t,i)=>{var r=i(52018),n=i(83419),s=i(44594);e.exports=new n({Extends:r,initialize:function(e,t,i){r.call(this,t),this.scene=e,this.systems=e.sys,this.pluginKey=i,e.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}})},18922:(e,t,i)=>{e.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{"u">typeof HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(e){let t=performance.now(),i=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames,n=(s,a)=>{let o=this.getVideoPlaybackQuality(),h=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(h>r){let r=this.mozFrameDelay||o.totalFrameDelay-i.totalFrameDelay||0,n=a-s;e(a,{presentationTime:a+1e3*r,expectedDisplayTime:a+n,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+n/1e3,presentedFrames:h,processingDuration:r}),delete this._rvfcpolyfillmap[t]}else this._rvfcpolyfillmap[t]=requestAnimationFrame(e=>n(a,e))};return this._rvfcpolyfillmap[t]=requestAnimationFrame(e=>n(t,e)),t},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(e){cancelAnimationFrame(this._rvfcpolyfillmap[e]),delete this._rvfcpolyfillmap[e]})},10312:e=>{e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:e=>{e.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},68627:(e,t,i)=>{var r=i(19715),n=i(32880),s=i(83419),a=i(8054),o=i(50792),h=i(92503),c=i(56373),l=i(97480),d=i(69442),u=i(8443),f=i(61340);e.exports=new s({Extends:o,initialize:function(e){o.call(this);var t=e.config;this.config={clearBeforeRender:t.clearBeforeRender,backgroundColor:t.backgroundColor,antialias:t.antialias,roundPixels:t.roundPixels,transparent:t.transparent},this.game=e,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=e.canvas;var i={alpha:t.transparent,desynchronized:t.desynchronized,willReadFrequently:!1};this.gameContext=t.context?t.context:this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.antialias,this.blendModes=c(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){var e=this.game;e.events.once(u.BOOT,function(){var e=this.config;if(!e.transparent){var t=this.gameContext,i=this.gameCanvas;t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i.width,i.height)}},this),e.textures.once(d.READY,this.boot,this)},boot:function(){var e=this.game,t=e.scale.baseSize;this.width=t.width,this.height=t.height,this.isBooted=!0,e.scale.on(l.RESIZE,this.onResize,this),this.resize(t.width,t.height)},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},resize:function(e,t){this.width=e,this.height=t,this.emit(h.RESIZE,e,t)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(e){return this.currentContext.globalCompositeOperation=e,this},setContext:function(e){return this.currentContext=e||this.gameContext,this},setAlpha:function(e){return this.currentContext.globalAlpha=e,this},preRender:function(){var e=this.gameContext,t=this.config,i=this.width,r=this.height;e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),this.emit(h.PRE_RENDER_CLEAR),t.clearBeforeRender&&(e.clearRect(0,0,i,r),t.transparent||(e.fillStyle=t.backgroundColor.rgba,e.fillRect(0,0,i,r))),e.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(e,t,i){var n=t.length;this.emit(h.RENDER,e,i);var s=i.x,a=i.y,o=i.width,c=i.height,l=i.renderToTexture?i.context:e.sys.context;l.save(),this.game.scene.customViewports&&(l.beginPath(),l.rect(s,a,o,c),l.clip()),i.emit(r.PRE_RENDER,i),this.currentContext=l;var d=i.mask;d&&d.preRenderCanvas(this,null,i._maskCamera),i.transparent||(l.fillStyle=i.backgroundColor.rgba,l.fillRect(s,a,o,c)),l.globalAlpha=i.alpha,l.globalCompositeOperation="source-over",this.drawCount+=n,i.renderToTexture&&i.emit(r.PRE_RENDER,i),i.matrix.copyToContext(l);for(var u=0;u<n;u++){var f=t[u];f.mask&&f.mask.preRenderCanvas(this,f,i),f.renderCanvas(this,f,i),f.mask&&f.mask.postRenderCanvas(this,f,i)}l.setTransform(1,0,0,1,0,0),l.globalCompositeOperation="source-over",l.globalAlpha=1,i.flashEffect.postRenderCanvas(l),i.fadeEffect.postRenderCanvas(l),i.dirty=!1,d&&d.postRenderCanvas(this),l.restore(),i.renderToTexture&&(i.emit(r.POST_RENDER,i),i.renderToGame&&e.sys.context.drawImage(i.canvas,s,a)),i.emit(r.POST_RENDER,i)},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var e=this.snapshotState;e.callback&&(n(this.gameCanvas,e),e.callback=null)},snapshotCanvas:function(e,t,i,r,s,a,o,h,c){void 0===i&&(i=!1),this.snapshotArea(r,s,a,o,t,h,c);var l=this.snapshotState;return l.getPixel=i,n(e,l),l.callback=null,this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function(e,t,i,r,n,s,a){var o=this.snapshotState;return o.callback=n,o.type=s,o.encoder=a,o.getPixel=!1,o.x=e,o.y=t,o.width=Math.min(i,this.gameCanvas.width),o.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(e,t,i,r){var n=i.alpha*e.alpha;if(0!==n){var s=this.currentContext,a=this._tempMatrix1,o=this._tempMatrix2,h=t.canvasData,c=h.x,l=h.y,d=t.cutWidth,u=t.cutHeight,f=t.customPivot,p=t.source.resolution,g=e.displayOriginX,m=e.displayOriginY,v=-g+t.x,y=-m+t.y;if(e.isCropped){var b=e._crop;(b.flipX!==e.flipX||b.flipY!==e.flipY)&&t.updateCropUVs(b,e.flipX,e.flipY),d=b.cw,u=b.ch,c=b.cx,l=b.cy,v=-g+b.x,y=-m+b.y,e.flipX&&(v>=0?v=-(v+d):v<0&&(v=Math.abs(v)-d)),e.flipY&&(y>=0?y=-(y+u):y<0&&(y=Math.abs(y)-u))}var x=1,E=1;e.flipX&&(f||(v+=-t.realWidth+2*g),x=-1),e.flipY&&(f||(y+=-t.realHeight+2*m),E=-1);var T=e.x,A=e.y;if(i.roundPixels&&(T=Math.floor(T),A=Math.floor(A)),o.applyITRS(T,A,e.rotation,e.scaleX*x,e.scaleY*E),a.copyFrom(i.matrix),r?(a.multiplyWithOffset(r,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),o.e=T,o.f=A):(o.e-=i.scrollX*e.scrollFactorX,o.f-=i.scrollY*e.scrollFactorY),a.multiply(o),i.renderRoundPixels&&(a.e=Math.floor(a.e+.5),a.f=Math.floor(a.f+.5)),s.save(),a.setToContext(s),s.globalCompositeOperation=this.blendModes[e.blendMode],s.globalAlpha=n,s.imageSmoothingEnabled=!t.source.scaleMode,e.mask&&e.mask.preRenderCanvas(this,e,i),d>0&&u>0){var w=d/p,S=u/p;i.roundPixels&&(v=Math.floor(v+.5),y=Math.floor(y+.5),w+=.5,S+=.5),s.drawImage(t.source.image,c,l,d,u,v,y,w,S)}e.mask&&e.mask.postRenderCanvas(this,e,i),s.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}})},55830:(e,t,i)=>{e.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(e,t,i)=>{var r=i(10312),n=i(89289);e.exports=function(){var e=[],t=n.supportNewBlendModes,i="source-over";return e[r.NORMAL]=i,e[r.ADD]="lighter",e[r.MULTIPLY]=t?"multiply":i,e[r.SCREEN]=t?"screen":i,e[r.OVERLAY]=t?"overlay":i,e[r.DARKEN]=t?"darken":i,e[r.LIGHTEN]=t?"lighten":i,e[r.COLOR_DODGE]=t?"color-dodge":i,e[r.COLOR_BURN]=t?"color-burn":i,e[r.HARD_LIGHT]=t?"hard-light":i,e[r.SOFT_LIGHT]=t?"soft-light":i,e[r.DIFFERENCE]=t?"difference":i,e[r.EXCLUSION]=t?"exclusion":i,e[r.HUE]=t?"hue":i,e[r.SATURATION]=t?"saturation":i,e[r.COLOR]=t?"color":i,e[r.LUMINOSITY]=t?"luminosity":i,e[r.ERASE]="destination-out",e[r.SOURCE_IN]="source-in",e[r.SOURCE_OUT]="source-out",e[r.SOURCE_ATOP]="source-atop",e[r.DESTINATION_OVER]="destination-over",e[r.DESTINATION_IN]="destination-in",e[r.DESTINATION_OUT]="destination-out",e[r.DESTINATION_ATOP]="destination-atop",e[r.LIGHTER]="lighter",e[r.COPY]="copy",e[r.XOR]="xor",e}},20926:(e,t,i)=>{var r=i(91296);e.exports=function(e,t,i,n,s){var a=n.alpha*i.alpha;if(a<=0)return!1;var o=r(i,n,s).calc;return t.globalCompositeOperation=e.blendModes[i.blendMode],t.globalAlpha=a,t.save(),o.setToContext(t),t.imageSmoothingEnabled=i.frame?!i.frame.source.scaleMode:e.antialias,!0}},63899:e=>{e.exports="losewebgl"},6119:e=>{e.exports="postrender"},48070:e=>{e.exports="prerender"},15640:e=>{e.exports="render"},8912:e=>{e.exports="resize"},87124:e=>{e.exports="restorewebgl"},92503:(e,t,i)=>{e.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(e,t,i)=>{e.exports={Events:i(92503),Snapshot:i(89966)},e.exports.Canvas=i(55830),e.exports.WebGL=i(4159)},32880:(e,t,i)=>{var r=i(27919),n=i(40987),s=i(95540);e.exports=function(e,t){var i=s(t,"callback"),a=s(t,"type","image/png"),o=s(t,"encoder",.92),h=Math.abs(Math.round(s(t,"x",0))),c=Math.abs(Math.round(s(t,"y",0))),l=Math.floor(s(t,"width",e.width)),d=Math.floor(s(t,"height",e.height));if(s(t,"getPixel",!1)){var u=e.getContext("2d",{willReadFrequently:!1}).getImageData(h,c,1,1).data;i.call(null,new n(u[0],u[1],u[2],u[3]))}else if(0!==h||0!==c||l!==e.width||d!==e.height){var f=r.createWebGL(this,l,d),p=f.getContext("2d",{willReadFrequently:!0});l>0&&d>0&&p.drawImage(e,h,c,l,d,0,0,l,d);var g=new Image;g.onerror=function(){i.call(null),r.remove(f)},g.onload=function(){i.call(null,g),r.remove(f)},g.src=f.toDataURL(a,o)}else{var m=new Image;m.onerror=function(){i.call(null)},m.onload=function(){i.call(null,m)},m.src=e.toDataURL(a,o)}}},88815:(e,t,i)=>{var r=i(27919),n=i(40987),s=i(95540);e.exports=function(e,t){var i=s(t,"callback"),a=s(t,"type","image/png"),o=s(t,"encoder",.92),h=Math.abs(Math.round(s(t,"x",0))),c=Math.abs(Math.round(s(t,"y",0))),l=s(t,"getPixel",!1),d=s(t,"isFramebuffer",!1),u=d?s(t,"bufferWidth",1):e.drawingBufferWidth,f=d?s(t,"bufferHeight",1):e.drawingBufferHeight;if(l){var p=new Uint8Array(4),g=d?c:f-c;e.readPixels(h,g,1,1,e.RGBA,e.UNSIGNED_BYTE,p),i.call(null,new n(p[0],p[1],p[2],p[3]))}else{var m=Math.floor(s(t,"width",u)),v=Math.floor(s(t,"height",f)),y=m*v*4,b=new Uint8Array(y);e.readPixels(h,f-c-v,m,v,e.RGBA,e.UNSIGNED_BYTE,b);for(var x=r.createWebGL(this,m,v),E=x.getContext("2d",{willReadFrequently:!0}),T=E.getImageData(0,0,m,v),A=T.data,w=0;w<v;w++)for(var S=0;S<m;S++){var C=((v-w-1)*m+S)*4,I=d?y-(w*m+(m-S))*4:(w*m+S)*4;A[I+0]=b[C+0],A[I+1]=b[C+1],A[I+2]=b[C+2],A[I+3]=b[C+3]}E.putImageData(T,0,0);var _=new Image;_.onerror=function(){i.call(null),r.remove(x)},_.onload=function(){i.call(null,_),r.remove(x)},_.src=x.toDataURL(a,o)}}},89966:(e,t,i)=>{e.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(e,t,i)=>{var r=i(83419),n=i(36060),s=i(90330),a=i(82264),o=i(95540),h=i(32302),c=i(63448),l=i(31302),d=i(58918),u=i(14811),f=i(92651),p=i(96569),g=i(56527),m=i(57516),v=i(43439),y=i(81041),b=i(12385),x=i(7589),E=i(95428),T=i(72905);e.exports=new r({initialize:function(e){this.game=e.game,this.renderer=e,this.classes=new s([[n.UTILITY_PIPELINE,x],[n.MULTI_PIPELINE,m],[n.BITMAPMASK_PIPELINE,l],[n.SINGLE_PIPELINE,b],[n.ROPE_PIPELINE,y],[n.LIGHT_PIPELINE,p],[n.POINTLIGHT_PIPELINE,v],[n.MOBILE_PIPELINE,g]]),this.postPipelineClasses=new s,this.pipelines=new s,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(e,t,i){var r,s,c=this.renderer,l=this.renderTargets;this.frameInc=Math.floor(o(e,"frameInc",32));var p=c.width,g=c.height,m=this.game.config.disablePreFX;if(this.game.config.disablePostFX||this.postPipelineClasses.setAll([[String(u.BARREL),d.Barrel],[String(u.BLOOM),d.Bloom],[String(u.BLUR),d.Blur],[String(u.BOKEH),d.Bokeh],[String(u.CIRCLE),d.Circle],[String(u.COLOR_MATRIX),d.ColorMatrix],[String(u.DISPLACEMENT),d.Displacement],[String(u.GLOW),d.Glow],[String(u.GRADIENT),d.Gradient],[String(u.PIXELATE),d.Pixelate],[String(u.SHADOW),d.Shadow],[String(u.SHINE),d.Shine],[String(u.VIGNETTE),d.Vignette],[String(u.WIPE),d.Wipe]]),!m){this.classes.set(n.FX_PIPELINE,f);for(var v=Math.ceil(Math.min(p,g)/this.frameInc),y=1;y<v;y++){var b=y*this.frameInc;l.push(new h(c,b,b)),l.push(new h(c,b,b)),l.push(new h(c,b,b)),this.maxDimension=b}l.push(new h(c,p,g,1,0,!0,!0)),l.push(new h(c,p,g,1,0,!0,!0)),l.push(new h(c,p,g,1,0,!0,!0))}var x=this,E=this.game;if(this.classes.each(function(e,t){r=x.add(e,new t({game:E})),e===n.UTILITY_PIPELINE&&(x.UTILITY_PIPELINE=r,x.fullFrame1=r.fullFrame1,x.fullFrame2=r.fullFrame2,x.halfFrame1=r.halfFrame1,x.halfFrame2=r.halfFrame2)}),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(n.MOBILE_PIPELINE),m||(this.FX_PIPELINE=this.get(n.FX_PIPELINE)),e)for(s in e){var T=e[s];(r=new T(E)).name=s,r.isPostFX?this.postPipelineClasses.set(s,T):this.has(s)||(this.classes.set(s,T),this.add(s,r))}this.default=this.get(t),i&&!a.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(e){var t=this.get(e);return t&&(this.default=t),t},add:function(e,t){if(t.isPostFX)return void console.warn(e+" is a Post Pipeline. Use `addPostPipeline` instead");var i=this.pipelines,r=this.renderer;return i.has(e)?console.warn("Pipeline exists: "+e):(t.name=e,t.manager=this,i.set(e,t)),t.hasBooted||t.boot(),0===r.width||0===r.height||t.isPreFX||t.resize(r.width,r.height),t},addPostPipeline:function(e,t){this.postPipelineClasses.has(e)||this.postPipelineClasses.set(e,t)},flush:function(){this.current&&this.current.flush()},has:function(e){var t=this.pipelines;return"string"==typeof e?t.has(e):!!t.contains(e)},get:function(e){var t=this.pipelines;return"string"==typeof e?t.get(e):t.contains(e)?e:void 0},getPostPipeline:function(e,t,i){var r,n=this.postPipelineClasses,s="",a=typeof e;if("string"===a||"number"===a?(r=n.get(e),s=e):"function"===a?(n.contains(e)&&(r=e),s=e.name):"object"===a&&(r=n.get(e.name),s=e.name),r){var o=new r(this.game,i);return o.name=s,t&&(o.gameObject=t),this.postPipelineInstances.push(o),o}},removePostPipeline:function(e){T(this.postPipelineInstances,e)},remove:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.pipelines.delete(e),t&&this.classes.delete(e),i&&this.postPipelineClasses.delete(e)},set:function(e,t,i){if(!e.isPostFX)return this.isCurrent(e,i)||(this.flush(),this.current&&this.current.unbind(),this.current=e,e.bind(i)),e.updateProjectionMatrix(),e.onBind(t),e},preBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatch:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},preBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=t.length-1;i>=0;i--){var r=t[i];r.active&&r.preBatch(e)}}},postBatchCamera:function(e){if(e.hasPostPipeline){this.flush();for(var t=e.postPipelines,i=0;i<t.length;i++){var r=t[i];r.active&&r.postBatch(e)}}},isCurrent:function(e,t){var i=this.renderer,r=this.current;return r&&!t&&(t=r.currentShader),r===e&&t.program===i.currentProgram},copyFrame:function(e,t,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(e,t,i,r,n),this},copyToGame:function(e){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(e),this},drawFrame:function(e,t,i,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(e,t,i,r),this},blendFrames:function(e,t,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(e,t,i,r,n),this},blendFramesAdditive:function(e,t,i,r,n){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(e,t,i,r,n),this},clearFrame:function(e,t){return this.UTILITY_PIPELINE.clearFrame(e,t),this},blitFrame:function(e,t,i,r,n,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(e,t,i,r,n,s),this},copyFrameRect:function(e,t,i,r,n,s,a,o){return this.UTILITY_PIPELINE.copyFrameRect(e,t,i,r,n,s,a,o),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(e){return this.UTILITY_PIPELINE.bind(e)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(e,t){t.restoreContext()}),E(this.postPipelineInstances,function(e){e.restoreContext()})},rebind:function(e){void 0===e&&this.previous&&(e=this.previous);var t=this.renderer,i=t.gl;i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),t.hasActiveStencilMask()?i.clear(i.DEPTH_BUFFER_BIT):(i.disable(i.STENCIL_TEST),i.clear(i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)),i.viewport(0,0,t.width,t.height),t.currentProgram=null,t.setBlendMode(0,!0);var r=t.vaoExtension;r&&r.bindVertexArrayOES(null);var n=this.pipelines.entries;for(var s in n)n[s].glReset=!0;e&&(this.current=e,e.rebind())},clear:function(){var e=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,e.currentProgram=null,e.setBlendMode(0,!0);var t=e.vaoExtension;t&&t.bindVertexArrayOES(null)},getRenderTarget:function(e){var t=this.renderTargets;if(e>this.maxDimension)return this.targetIndex=t.length-3,t[this.targetIndex];var i=(c(e,this.frameInc,0,!0)-1)*3;return this.targetIndex=i,t[i]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}})},32302:(e,t,i)=>{var r=i(83419),n=i(92503);e.exports=new r({initialize:function(e,t,i,r,s,a,o,h,c){void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=!0),void 0===o&&(o=!1),void 0===h&&(h=!0),void 0===c&&(c=!0),this.renderer=e,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=s,this.autoClear=a,this.autoResize=!0,this.hasDepthBuffer=h,this.forceClamp=c,this.init(t,i),o?this.renderer.on(n.RESIZE,this.resize,this):this.autoResize=!1},init:function(e,t){var i=this.renderer;this.texture=i.createTextureFromSource(null,e,t,this.minFilter,this.forceClamp),this.framebuffer=i.createFramebuffer(e,t,this.texture,this.hasDepthBuffer),this.width=e,this.height=t},setAutoResize:function(e){return e&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!e&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(e,t){if(this.autoResize&&this.willResize(e,t)){var i=this.renderer;i.deleteFramebuffer(this.framebuffer),i.deleteTexture(this.texture),this.texture=i.createTextureFromSource(null,e,t,this.minFilter,this.forceClamp),this.framebuffer=i.createFramebuffer(e,t,this.texture,this.hasDepthBuffer),this.width=e,this.height=t}return this},willResize:function(e,t){return"number"==typeof e&&"number"==typeof t&&(e=Math.round(e*this.scale),t=Math.round(t*this.scale),e=Math.max(e,1),t=Math.max(t,1),e!==this.width||t!==this.height)},bind:function(e,t,i){void 0===e&&(e=!1);var r=this.renderer;if(e&&r.flush(),t&&i&&this.resize(t,i),r.pushFramebuffer(this.framebuffer,!1,!1),e&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}r.clearStencilMask()},adjustViewport:function(){var e=this.renderer.gl;e.viewport(0,0,this.width,this.height),e.disable(e.SCISSOR_TEST)},clear:function(e,t,i,r){var n=this.renderer,s=n.gl;n.pushFramebuffer(this.framebuffer),void 0!==e&&void 0!==t&&void 0!==i&&void 0!==r?(s.enable(s.SCISSOR_TEST),s.scissor(e,t,i,r)):s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),n.popFramebuffer(),n.resetScissor()},unbind:function(e){void 0===e&&(e=!1);var t=this.renderer;return e&&t.flush(),t.popFramebuffer()},destroy:function(){var e=this.renderer;e.off(n.RESIZE,this.resize,this),e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}})},70554:e=>{e.exports={getTintFromFloats:function(e,t,i,r){return((255*r&255)<<24|(255*e&255)<<16|(255*t&255)<<8|255*i&255)>>>0},getTintAppendFloatAlpha:function(e,t){return((255*t&255)<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,t){return((255*t&255)<<24|(255&e)<<16|(e>>8&255)<<8|e>>16&255)>>>0},getFloatsFromUintRGB:function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},checkShaderMax:function(e,t){var i=Math.min(16,e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));return t&&-1!==t?Math.min(i,t):i},parseFragmentShaderMaxTextures:function(e,t){if(!e)return"";for(var i="",r=0;r<t;r++)r>0&&(i+="\n	else "),r<t-1&&(i+="if (outTexId < "+r+".5)"),i+="\n	{\n		texture = texture2D(uMainSampler["+r+"], outTexCoord);\n	}";return(e=e.replace(/%count%/gi,t.toString())).replace(/%forloop%/gi,i)},setGlowQuality:function(e,t,i,r){return void 0===i&&(i=t.config.glowFXQuality),void 0===r&&(r=t.config.glowFXDistance),e=(e=e.replace(/__SIZE__/gi,(1/i/r).toFixed(7))).replace(/__DIST__/gi,r.toFixed(0)+".0")}}},29100:(e,t,i)=>{var r=i(83419),n=i(62644),s=i(50792),a=i(77085),o=i(95540),h=i(37867),c=i(92503),l=i(32302),d=i(70554),u=i(38683);e.exports=new r({Extends:s,initialize:function(e){s.call(this);var t=e.game,i=t.renderer,r=i.gl;this.name=o(e,"name","WebGLPipeline"),this.game=t,this.renderer=i,this.manager,this.gl=r,this.view=t.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=o(e,"topology",r.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=o(e,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=e,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=o(e,"resizeUniform","")},boot:function(){var e,t=this.gl,i=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=new h().identity());var n=this.renderTargets,s=o(i,"renderTarget",!1);"boolean"==typeof s&&s&&(s=1);var d=r.width,u=r.height;if("number"==typeof s)for(e=0;e<s;e++)n.push(new l(r,d,u,1,0,!0));else if(Array.isArray(s))for(e=0;e<s.length;e++){var f=o(s[e],"scale",1),p=o(s[e],"minFilter",0),g=o(s[e],"autoClear",1),m=o(s[e],"autoResize",!1),v=o(s[e],"width",null),y=o(s[e],"height",v);v?n.push(new l(r,v,y,1,p,g,m)):n.push(new l(r,d,u,f,p,g,m))}n.length&&(this.currentRenderTarget=n[0]),this.setShadersFromConfig(i);var b=this.shaders,x=0;for(e=0;e<b.length;e++)b[e].vertexSize>x&&(x=b[e].vertexSize);var E=o(i,"batchSize",r.config.batchSize);this.vertexCapacity=6*E;var T=new ArrayBuffer(this.vertexCapacity*x);this.vertexData=T,this.bytes=new Uint8Array(T),this.vertexViewF32=new Float32Array(T),this.vertexViewU32=new Uint32Array(T);var A=o(i,"vertices",null);for(A?(this.vertexViewF32.set(A),this.vertexBuffer=r.createVertexBuffer(T,t.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(T.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),e=b.length-1;e>=0;e--)b[e].rebind();this.hasBooted=!0,r.on(c.RESIZE,this.resize,this),r.on(c.PRE_RENDER,this.onPreRender,this),r.on(c.RENDER,this.onRender,this),r.on(c.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(e,t,i){var r=this.renderer;return(e!==this.currentShader||r.currentProgram!==this.currentShader.program)&&(this.flush(),this.setVertexBuffer(i)&&!t&&(t=!0),e.bind(t,!1),this.currentShader=e),this},getShaderByName:function(e){for(var t=this.shaders,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},setShadersFromConfig:function(e){var t=this.shaders,i=this.renderer;for(m=0;m<t.length;m++)t[m].destroy();var r="vertShader",s="fragShader",a="attributes",h=o(e,r,null),c=d.parseFragmentShaderMaxTextures(o(e,s,null),i.maxTextures),l=o(e,a,null),f=o(e,"shaders",[]),p=f.length;if(0===p)h&&c&&(this.shaders=[new u(this,"default",h,c,n(l))]);else{var g=[];for(m=0;m<p;m++){var m,v,y,b,x,E=f[m];if("string"==typeof E?(v="default",y=h,b=d.parseFragmentShaderMaxTextures(E,i.maxTextures),x=l):(v=o(E,"name","default"),y=o(E,r,h),b=d.parseFragmentShaderMaxTextures(o(E,s,c),i.maxTextures),x=o(E,a,l)),"default"===v){var T=b.split("\n")[0].trim();T.indexOf("#define SHADER_NAME")>-1&&(v=T.substring(20))}y&&b&&g.push(new u(this,v,y,b,n(x)))}this.shaders=g}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(e){return this.currentBatch={start:this.vertexCount,count:0,texture:[e],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=e,this.batch.push(this.currentBatch),0},addTextureToBatch:function(e){var t=this.currentBatch;t&&(t.texture.push(e),t.unit++,t.maxUnit++)},pushBatch:function(e){if(!this.currentBatch||this.forceZero&&e!==this.currentTexture)return this.createBatch(e);if(e===this.currentTexture)return this.currentUnit;var t=this.currentBatch,i=t.texture.indexOf(e);return -1!==i?(this.currentUnit=i,this.currentTexture=e,i):t.texture.length===this.renderer.maxTextures?this.createBatch(e):(t.unit++,t.maxUnit++,t.texture.push(e),this.currentUnit=t.unit,this.currentTexture=e,t.unit)},setGameObject:function(e,t){return void 0===t&&(t=e.frame),this.pushBatch(t.source.glTexture)},shouldFlush:function(e){return void 0===e&&(e=0),this.vertexCount+e>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(e,t){(e!==this.width||t!==this.height)&&this.flush(),this.width=e,this.height=t;for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].resize(e,t);return this.setProjectionMatrix(e,t),this.resizeUniform&&this.set2f(this.resizeUniform,e,t),this.emit(a.RESIZE,e,t,this),this.onResize(e,t),this},setProjectionMatrix:function(e,t){var i=this.projectionMatrix;if(!i)return this;this.projectionWidth=e,this.projectionHeight=t,i.ortho(0,e,t,0,-1e3,1e3);for(var r=this.shaders,n="uProjectionMatrix",s=0;s<r.length;s++){var a=r[s];a.hasUniform(n)&&(a.resetUniform(n),a.setMatrix4fv(n,!1,i.val,a))}return this},flipProjectionMatrix:function(e){void 0===e&&(e=!0);var t=this.projectionMatrix;if(!t)return this;var i=this.projectionWidth,r=this.projectionHeight;e?t.ortho(0,i,0,r,-1e3,1e3):t.ortho(0,i,r,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,t.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var e=this.renderer.projectionWidth,t=this.renderer.projectionHeight;(this.projectionWidth!==e||this.projectionHeight!==t)&&this.setProjectionMatrix(e,t)}},bind:function(e){if(void 0===e&&(e=this.currentShader),this.glReset)return this.rebind(e);var t=!1,i=this.gl;return i.getParameter(i.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,t=!0),e.bind(t),this.currentShader=e,this.activeTextures.length=0,this.emit(a.BIND,this,e),this.onActive(e),this},rebind:function(e){this.activeBuffer=null,this.setVertexBuffer();for(var t=this.shaders,i=t.length-1;i>=0;i--){var r=t[i].rebind();e&&r!==e||(this.currentShader=r)}return this.activeTextures.length=0,this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var e=this.shaders,t=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,t&&this.setVertexBuffer();for(var i=0;i<e.length;i++){var r=e[i];r.syncUniforms(),t&&r.rebind()}},setVertexBuffer:function(e){if(void 0===e&&(e=this.vertexBuffer),e!==this.activeBuffer){var t=this.gl;return this.gl.bindBuffer(t.ARRAY_BUFFER,e.webGLBuffer),this.activeBuffer=e,!0}return!1},preBatch:function(e){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(e),this},postBatch:function(e){return this.onDraw(this.currentRenderTarget),this.onPostBatch(e),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(e){if(void 0===e&&(e=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,e),this.onBeforeFlush(e);var t=this.gl,i=this.vertexCount,r=this.currentShader.vertexSize,n=this.topology;if(this.active){this.setVertexBuffer(),i===this.vertexCapacity?t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,i*r));var s,o,h,c=this.batch,l=this.activeTextures;if(this.forceZero)for(l[0]||t.activeTexture(t.TEXTURE0),s=0;s<c.length;s++)h=(o=c[s]).texture[0],l[0]!==h&&(t.bindTexture(t.TEXTURE_2D,h.webGLTexture),l[0]=h),t.drawArrays(n,o.start,o.count);else for(s=0;s<c.length;s++){o=c[s];for(var d=0;d<=o.maxUnit;d++)h=o.texture[d],l[d]!==h&&(t.activeTexture(t.TEXTURE0+d),t.bindTexture(t.TEXTURE_2D,h.webGLTexture),l[d]=h);t.drawArrays(n,o.start,o.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(a.AFTER_FLUSH,this,e),this.onAfterFlush(e)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(e,t,i,r,n,s,a){var o=this.vertexViewF32,h=this.vertexViewU32,c=this.vertexCount*this.currentShader.vertexComponentCount-1;o[++c]=e,o[++c]=t,o[++c]=i,o[++c]=r,o[++c]=n,o[++c]=s,h[++c]=a,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(e,t,i,r,n,s,a,o,h,c,l,d,u,f,p,g,m,v,y,b){void 0===b&&(b=this.currentUnit);var x=!1;this.shouldFlush(6)&&(this.flush(),x=!0),this.currentBatch||(b=this.setTexture2D(y));var E=this.vertexViewF32,T=this.vertexViewU32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;return E[++A]=t,E[++A]=i,E[++A]=c,E[++A]=l,E[++A]=b,E[++A]=v,T[++A]=f,E[++A]=r,E[++A]=n,E[++A]=c,E[++A]=u,E[++A]=b,E[++A]=v,T[++A]=g,E[++A]=s,E[++A]=a,E[++A]=d,E[++A]=u,E[++A]=b,E[++A]=v,T[++A]=m,E[++A]=t,E[++A]=i,E[++A]=c,E[++A]=l,E[++A]=b,E[++A]=v,T[++A]=f,E[++A]=s,E[++A]=a,E[++A]=d,E[++A]=u,E[++A]=b,E[++A]=v,T[++A]=m,E[++A]=o,E[++A]=h,E[++A]=d,E[++A]=l,E[++A]=b,E[++A]=v,T[++A]=p,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(e),x},batchTri:function(e,t,i,r,n,s,a,o,h,c,l,d,u,f,p,g,m){void 0===m&&(m=this.currentUnit);var v=!1;this.shouldFlush(3)&&(this.flush(),v=!0),this.currentBatch||(m=this.setTexture2D(g));var y=this.vertexViewF32,b=this.vertexViewU32,x=this.vertexCount*this.currentShader.vertexComponentCount-1;return y[++x]=t,y[++x]=i,y[++x]=o,y[++x]=h,y[++x]=m,y[++x]=p,b[++x]=d,y[++x]=r,y[++x]=n,y[++x]=o,y[++x]=l,y[++x]=m,y[++x]=p,b[++x]=u,y[++x]=s,y[++x]=a,y[++x]=c,y[++x]=l,y[++x]=m,y[++x]=p,b[++x]=f,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(e),v},drawFillRect:function(e,t,i,r,n,s,a,o){void 0===a&&(a=this.renderer.whiteTexture),void 0===o&&(o=!0);var h=Math.floor((e=Math.floor(e))+i),c=Math.floor((t=Math.floor(t))+r),l=this.setTexture2D(a),u=d.getTintAppendFloatAlphaAndSwap(n,s),f=0,p=1;o&&(f=1,p=0),this.batchQuad(null,e,t,e,c,h,c,h,t,0,f,1,p,u,u,u,u,0,a,l)},setTexture2D:function(e){return void 0===e&&(e=this.renderer.whiteTexture),this.pushBatch(e)},bindTexture:function(e,t){void 0===t&&(t=0);var i=this.gl;return i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e.webGLTexture),this},bindRenderTarget:function(e,t){return this.bindTexture(e.texture,t)},setTime:function(e,t){return this.set1f(e,this.game.loop.getDuration(),t),this},setBoolean:function(e,t,i){return void 0===i&&(i=this.currentShader),i.setBoolean(e,t),this},set1f:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set1f(e,t),this},set2f:function(e,t,i,r){return void 0===r&&(r=this.currentShader),r.set2f(e,t,i),this},set3f:function(e,t,i,r,n){return void 0===n&&(n=this.currentShader),n.set3f(e,t,i,r),this},set4f:function(e,t,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4f(e,t,i,r,n),this},set1fv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set1fv(e,t),this},set2fv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set2fv(e,t),this},set3fv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set3fv(e,t),this},set4fv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set4fv(e,t),this},set1iv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set1iv(e,t),this},set2iv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set2iv(e,t),this},set3iv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set3iv(e,t),this},set4iv:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set4iv(e,t),this},set1i:function(e,t,i){return void 0===i&&(i=this.currentShader),i.set1i(e,t),this},set2i:function(e,t,i,r){return void 0===r&&(r=this.currentShader),r.set2i(e,t,i),this},set3i:function(e,t,i,r,n){return void 0===n&&(n=this.currentShader),n.set3i(e,t,i,r),this},set4i:function(e,t,i,r,n,s){return void 0===s&&(s=this.currentShader),s.set4i(e,t,i,r,n),this},setMatrix2fv:function(e,t,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix2fv(e,t,i),this},setMatrix3fv:function(e,t,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix3fv(e,t,i),this},setMatrix4fv:function(e,t,i,r){return void 0===r&&(r=this.currentShader),r.setMatrix4fv(e,t,i),this},destroy:function(){this.emit(a.DESTROY,this);var e,t=this.shaders;for(e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();var r=this.renderer;return r.deleteBuffer(this.vertexBuffer),r.off(c.RESIZE,this.resize,this),r.off(c.PRE_RENDER,this.onPreRender,this),r.off(c.RENDER,this.onRender,this),r.off(c.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}})},74797:(e,t,i)=>{var r=i(95428),n=i(72905),s=i(19715),a=i(83419),o=i(8054),h=i(50792),c=i(92503),l=i(50030),d=i(37867),u=i(29747),f=i(7530),p=i(32302),g=i(97480),m=i(69442),v=i(70554),y=i(88815),b=i(26128),x=i(1482),E=i(82751),T=i(84387),A=i(93567),w=i(57183);e.exports=new a({Extends:h,initialize:function(e){h.call(this);var t=e.config,i={alpha:t.transparent,desynchronized:t.desynchronized,depth:!0,antialias:t.antialiasGL,premultipliedAlpha:t.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:t.failIfMajorPerformanceCaveat,powerPreference:t.powerPreference,preserveDrawingBuffer:t.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:t.clearBeforeRender,antialias:t.antialias,backgroundColor:t.backgroundColor,contextCreation:i,roundPixels:t.roundPixels,maxTextures:t.maxTextures,maxTextureSize:t.maxTextureSize,batchSize:t.batchSize,maxLights:t.maxLights,mipmapFilter:t.mipmapFilter},this.game=e,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=e.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=u,this.contextRestoredHandler=u,this.previousContextLostHandler=u,this.previousContextRestoredHandler=u,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(e){var t,i=this.game,r=this.canvas,n=e.backgroundColor;if(!(t=i.config.context?i.config.context:r.getContext("webgl",e.contextCreation)||r.getContext("experimental-webgl",e.contextCreation))||t.isContextLost())throw this.contextLost=!0,Error("WebGL unsupported");this.gl=t,this.setExtensions(),this.setContextHandlers(),i.context=t;for(var s=0;s<=27;s++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});return this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats=[t.BYTE,t.SHORT,t.UNSIGNED_BYTE,t.UNSIGNED_SHORT,t.FLOAT],this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}},e.maxTextures&&-1!==e.maxTextures||(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL),t.clear(t.COLOR_BUFFER_BIT),-1!==["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"].indexOf(e.mipmapFilter)&&(this.mipmapFilter=t[e.mipmapFilter]),this.maxTextures=v.checkShaderMax(t,e.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new f(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),i.textures.once(m.READY,this.boot,this),this},boot:function(){var e=this.game,t=this.pipelines,i=e.scale.baseSize,r=i.width,n=i.height;this.width=r,this.height=n,this.isBooted=!0,this.renderTarget=new p(this,r,n,1,0,!0,!0),this.maskTarget=new p(this,r,n,1,0,!0,!0),this.maskSource=new p(this,r,n,1,0,!0,!0);var s=e.config;t.boot(s.pipeline,s.defaultPipeline,s.autoMobilePipeline),this.blankTexture=e.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=e.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=e.textures.getFrame("__WHITE").glTexture;var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),e.scale.on(g.RESIZE,this.onResize,this),this.resize(r,n)},setExtensions:function(){var e=this.gl,t=e.getSupportedExtensions();this.supportedExtensions=t;var i="ANGLE_instanced_arrays";this.instancedArraysExtension=t.indexOf(i)>-1?e.getExtension(i):null;var r="OES_vertex_array_object";this.vaoExtension=t.indexOf(r)>-1?e.getExtension(r):null},setContextHandlers:function(e,t){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),"function"==typeof e?this.contextLostHandler=e.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),"function"==typeof t?this.contextRestoredHandler=t.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(e){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(c.LOSE_WEBGL,this),e.preventDefault()},dispatchContextRestored:function(e){var t=this.gl;if(t.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(o.BlendModes.NORMAL),t.disable(t.BLEND),t.disable(t.DEPTH_TEST),t.enable(t.CULL_FACE),this.compression=this.getCompressedTextures();var i=function(e){e.createResource()};r(this.glTextureWrappers,i),r(this.glBufferWrappers,i),r(this.glFramebufferWrappers,i),r(this.glProgramWrappers,i),r(this.glAttribLocationWrappers,i),r(this.glUniformLocationWrappers,i),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(c.RESTORE_WEBGL,this),e.preventDefault()},createTemporaryTextures:function(){for(var e=this.gl,t=0;t<this.maxTextures;t++){var i=e.createTexture();e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(t)}},captureFrame:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1)},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=!1),void 0===i&&(i=!1)},stopCapture:function(){},onCapture:function(e){},onResize:function(e,t){(t.width!==this.width||t.height!==this.height)&&this.resize(t.width,t.height)},beginCapture:function(e,t){void 0===e&&(e=this.width),void 0===t&&(t=this.height),this.renderTarget.bind(!0,e,t),this.setProjectionMatrix(e,t)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(e,t){var i=this.gl;return this.width=e,this.height=t,this.setProjectionMatrix(e,t),i.viewport(0,0,e,t),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-t,e,t),this.defaultScissor[2]=e,this.defaultScissor[3]=t,this.emit(c.RESIZE,e,t),this},getCompressedTextures:function(){var e="WEBGL_compressed_texture_",t="WEBKIT_"+e,i=function(i,r){var n=i.getExtension(e+r)||i.getExtension(t+r)||i.getExtension("EXT_texture_compression_"+r);if(n){var s={};for(var a in n)s[n[a]]=a;return s}},r=this.gl;return{ETC:i(r,"etc"),ETC1:i(r,"etc1"),ATC:i(r,"atc"),ASTC:i(r,"astc"),BPTC:i(r,"bptc"),RGTC:i(r,"rgtc"),PVRTC:i(r,"pvrtc"),S3TC:i(r,"s3tc"),S3TCSRGB:i(r,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(e,t){var i=this.compression[e.toUpperCase()];if(t in i)return i[t]},supportsCompressedTexture:function(e,t){var i=this.compression[e.toUpperCase()];if(i)if(t)return t in i;else return!0;return!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(e,t){return(e!==this.projectionWidth||t!==this.projectionHeight)&&(this.projectionWidth=e,this.projectionHeight=t,this.projectionMatrix.ortho(0,e,t,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(e){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(e)},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.pipelines.flush()},pushScissor:function(e,t,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=this.scissorStack,a=[e,t,i,r];return s.push(a),this.setScissor(e,t,i,r,n),this.currentScissor=a,a},setScissor:function(e,t,i,r,n){void 0===n&&(n=this.drawingBufferHeight);var s=this.gl,a=this.currentScissor,o=i>0&&r>0;if(a&&o){var h=a[0],c=a[1],l=a[2],d=a[3];o=h!==e||c!==t||l!==i||d!==r}o&&(this.flush(),s.scissor(e,n-t-r,i,r))},resetScissor:function(){var e=this.gl;e.enable(e.SCISSOR_TEST);var t=this.currentScissor;if(t){var i=t[0],r=t[1],n=t[2],s=t[3];n>0&&s>0&&e.scissor(i,this.drawingBufferHeight-r-s,n,s)}},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},hasActiveStencilMask:function(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},resetViewport:function(){var e=this.gl;e.viewport(0,0,this.width,this.height),this.drawingBufferHeight=e.drawingBufferHeight},setBlendMode:function(e,t){void 0===t&&(t=!1);var i=this.gl,r=this.blendModes[e];return(!!t||e!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=e,!0)},addBlendMode:function(e,t){return this.blendModes.push({func:e,equation:t})-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},pushFramebuffer:function(e,t,i,r,n){return e===this.currentFramebuffer?this:(this.fboStack.push(e),this.setFramebuffer(e,t,i,r,n))},setFramebuffer:function(e,t,i,r,n){if(void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===r&&(r=null),void 0===n&&(n=!1),e===this.currentFramebuffer)return this;var s=this.gl,a=this.width,o=this.height;return e&&e.renderTexture&&i?(a=e.renderTexture.width,o=e.renderTexture.height):this.flush(),e?s.bindFramebuffer(s.FRAMEBUFFER,e.webGLFramebuffer):s.bindFramebuffer(s.FRAMEBUFFER,null),i&&s.viewport(0,0,a,o),r&&s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,r.webGLTexture,0),n&&(s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),t&&(e?(this.drawingBufferHeight=o,this.pushScissor(0,0,a,o)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e,this},popFramebuffer:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i=this.fboStack;i.pop();var r=i[i.length-1];return r||(r=null),this.setFramebuffer(r,e,t),r},restoreFramebuffer:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i=this.fboStack,r=i[i.length-1];r||(r=null),this.currentFramebuffer=null,this.setFramebuffer(r,e,t)},setProgram:function(e){return e!==this.currentProgram&&(this.flush(),this.gl.useProgram(e.webGLProgram),this.currentProgram=e,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(e,t,i,r,n){void 0===n&&(n=!1);var s=this.gl,a=s.NEAREST,h=s.NEAREST,c=s.CLAMP_TO_EDGE,d=l(t=e?e.width:t,i=e?e.height:i);if(d&&!n&&(c=s.REPEAT),r===o.ScaleModes.LINEAR&&this.config.antialias){var u=e&&e.compressed,f=!u&&d||u&&e.mipmaps.length>1;a=this.mipmapFilter&&f?this.mipmapFilter:s.LINEAR,h=s.LINEAR}return e||"number"!=typeof t||"number"!=typeof i?this.createTexture2D(0,a,h,c,c,s.RGBA,e):this.createTexture2D(0,a,h,c,c,s.RGBA,null,t,i)},createTexture2D:function(e,t,i,r,n,s,a,o,h,c,l,d){"number"!=typeof o&&(o=a?a.width:1),"number"!=typeof h&&(h=a?a.height:1);var u=new E(this.gl,e,t,i,r,n,s,a,o,h,c,l,d);return this.glTextureWrappers.push(u),u},createFramebuffer:function(e,t,i,r){this.currentFramebuffer=null;var n=new T(this.gl,e,t,i,r);return this.glFramebufferWrappers.push(n),n},beginBitmapMask:function(e,t){this.gl&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==e&&(this.currentMask.mask=e,this.currentMask.camera=t))},drawBitmapMask:function(e,t,i){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),e.renderWebGL(this,e,t),this.maskSource.unbind(!0),this.maskTarget.unbind();var r=this.gl,n=this.getCurrentStencilMask();n?(r.enable(r.STENCIL_TEST),n.mask.applyStencil(this,n.camera,!0)):this.currentMask.mask=null,this.pipelines.set(i),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.maskTarget.texture.webGLTexture),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(e,t){var i=new x(this.gl,e,t);return this.glProgramWrappers.push(i),i},createVertexBuffer:function(e,t){var i=this.gl,r=new b(i,e,i.ARRAY_BUFFER,t);return this.glBufferWrappers.push(r),r},createAttribLocation:function(e,t){var i=new A(this.gl,e,t);return this.glAttribLocationWrappers.push(i),i},createUniformLocation:function(e,t){var i=new w(this.gl,e,t);return this.glUniformLocationWrappers.push(i),i},createIndexBuffer:function(e,t){var i=this.gl,r=new b(i,e,i.ELEMENT_ARRAY_BUFFER,t);return this.glBufferWrappers.push(r),r},deleteTexture:function(e){if(e)return n(this.glTextureWrappers,e),e.destroy(),this},deleteFramebuffer:function(e){return e&&(n(this.fboStack,e),n(this.glFramebufferWrappers,e),e.destroy()),this},deleteProgram:function(e){return e&&(n(this.glProgramWrappers,e),e.destroy()),this},deleteAttribLocation:function(e){return e&&(n(this.glAttribLocationWrappers,e),e.destroy()),this},deleteUniformLocation:function(e){return e&&(n(this.glUniformLocationWrappers,e),e.destroy()),this},deleteBuffer:function(e){return e&&(n(this.glBufferWrappers,e),e.destroy()),this},preRenderCamera:function(e){var t=e.x,i=e.y,r=e.width,n=e.height,a=e.backgroundColor;e.emit(s.PRE_RENDER,e),this.pipelines.preBatchCamera(e),this.pushScissor(t,i,r,n),e.mask&&(this.currentCameraMask.mask=e.mask,this.currentCameraMask.camera=e._maskCamera,e.mask.preRenderWebGL(this,e,e._maskCamera)),a.alphaGL>0&&this.pipelines.setMulti().drawFillRect(t,i,r,n,v.getTintFromFloats(a.blueGL,a.greenGL,a.redGL,1),a.alphaGL)},getCurrentStencilMask:function(){var e=null,t=this.maskStack,i=this.currentCameraMask;return t.length>0?e=t[t.length-1]:i.mask&&i.mask.isStencil&&(e=i),e},postRenderCamera:function(e){var t=e.flashEffect,i=e.fadeEffect;if(t.isRunning||i.isRunning||i.isComplete){var r=this.pipelines.setMulti();t.postRenderWebGL(r,v.getTintFromFloats),i.postRenderWebGL(r,v.getTintFromFloats)}e.dirty=!1,this.popScissor(),e.mask&&(this.currentCameraMask.mask=null,e.mask.postRenderWebGL(this,e._maskCamera)),this.pipelines.postBatchCamera(e),e.emit(s.POST_RENDER,e)},preRender:function(){if(!this.contextLost){var e=this.gl;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.emit(c.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var t=this.config.backgroundColor;e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(c.PRE_RENDER)}},render:function(e,t,i){if(!this.contextLost){var r=t.length;if(this.emit(c.RENDER,e,i),this.preRenderCamera(i),0===r){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(i);return}this.currentType="";for(var n=this.currentMask,s=0;s<r;s++){this.finalType=s===r-1;var a=t[s],h=a.mask;(n=this.currentMask).mask&&n.mask!==h&&n.mask.postRenderWebGL(this,n.camera),h&&n.mask!==h&&h.preRenderWebGL(this,a,i),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var l=a.type;l!==this.currentType&&(this.newType=!0,this.currentType=l),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=t[s+1].type===this.currentType,a.renderWebGL(this,a,i),this.newType=!1}(n=this.currentMask).mask&&n.mask.postRenderWebGL(this,n.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(c.POST_RENDER);var e=this.snapshotState;e.callback&&(y(this.gl,e),e.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var e=this.gl,t=this.getCurrentStencilMask();if(t){var i=t.mask;e.enable(e.STENCIL_TEST),i.invertAlpha?e.stencilFunc(e.NOTEQUAL,i.level,255):e.stencilFunc(e.EQUAL,i.level,255)}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,n,s,a){var o=this.snapshotState;return o.callback=n,o.type=s,o.encoder=a,o.getPixel=!1,o.x=e,o.y=t,o.width=i,o.height=r,this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(e,t,i,r,n,s,a,o,h,c,l){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=t),void 0===h&&(h=i),"pixel"===c&&(n=!0,c="image/png");var d=this.currentFramebuffer;this.snapshotArea(s,a,o,h,r,c,l);var u=this.snapshotState;return u.getPixel=n,u.isFramebuffer=!0,u.bufferWidth=t,u.bufferHeight=i,u.width=Math.min(u.width,t),u.height=Math.min(u.height,i),this.setFramebuffer(e),y(this.gl,u),this.setFramebuffer(d),u.callback=null,u.isFramebuffer=!1,this},canvasToTexture:function(e,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=this.gl,s=n.NEAREST,a=n.NEAREST,o=e.width,h=e.height,c=n.CLAMP_TO_EDGE,d=l(o,h);return(!i&&d&&(c=n.REPEAT),this.config.antialias&&(s=d&&this.mipmapFilter?this.mipmapFilter:n.LINEAR,a=n.LINEAR),t)?(t.update(e,o,h,r,c,c,s,a,t.format),t):this.createTexture2D(0,s,a,c,c,n.RGBA,e,o,h,!0,!1,r)},createCanvasTexture:function(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.canvasToTexture(e,null,t,i)},updateCanvasTexture:function(e,t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),this.canvasToTexture(e,t,r,i)},videoToTexture:function(e,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var n=this.gl,s=n.NEAREST,a=n.NEAREST,o=e.videoWidth,h=e.videoHeight,c=n.CLAMP_TO_EDGE,d=l(o,h);return(!i&&d&&(c=n.REPEAT),this.config.antialias&&(s=d&&this.mipmapFilter?this.mipmapFilter:n.LINEAR,a=n.LINEAR),t)?(t.update(e,o,h,r,c,c,s,a,t.format),t):this.createTexture2D(0,s,a,c,c,n.RGBA,e,o,h,!0,!0,r)},createVideoTexture:function(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.videoToTexture(e,null,t,i)},updateVideoTexture:function(e,t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),this.videoToTexture(e,t,r,i)},createUint8ArrayTexture:function(e,t,i){var r=this.gl,n=r.NEAREST,s=r.NEAREST,a=r.CLAMP_TO_EDGE;return l(t,i)&&(a=r.REPEAT),this.createTexture2D(0,n,s,a,a,r.RGBA,e,t,i)},setTextureFilter:function(e,t){var i=this.gl,r=0===t?i.LINEAR:i.NEAREST;i.activeTexture(i.TEXTURE0);var n=i.getParameter(i.TEXTURE_BINDING_2D);return i.bindTexture(i.TEXTURE_2D,e.webGLTexture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),e.minFilter=r,e.magFilter=r,n&&i.bindTexture(i.TEXTURE_2D,n),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var e=function(e){e.destroy()};r(this.glAttribLocationWrappers,e),r(this.glBufferWrappers,e),r(this.glFramebufferWrappers,e),r(this.glProgramWrappers,e),r(this.glTextureWrappers,e),r(this.glUniformLocationWrappers,e),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}})},38683:(e,t,i)=>{var r=i(83419),n=i(95428),s=i(95540),a=i(14500);e.exports=new r({initialize:function(e,t,i,r,n){this.pipeline=e,this.name=t,this.renderer=e.renderer,this.gl=this.renderer.gl,this.fragSrc=r,this.vertSrc=i,this.program=this.renderer.createProgram(i,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(e){var t=0,i=0,r=[];this.vertexComponentCount=0;for(var n=0;n<e.length;n++){var o=e[n],h=o.name,c=s(o,"size",1),l=s(o,"type",a.FLOAT),d=l.enum,u=l.size,f=!!o.normalized;r.push({name:h,size:c,type:d,normalized:f,offset:i,enabled:!1,location:-1}),4===u?t+=c:t++,i+=c*u}this.vertexSize=i,this.vertexComponentCount=t,this.attributes=r},bind:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),t&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){void 0===e&&(e=!1);for(var t=this.gl,i=this.renderer,r=this.vertexSize,n=this.attributes,s=this.program,a=0;a<n.length;a++){var o=n[a],h=o.size,c=o.type,l=o.offset,d=o.enabled,u=o.location,f=!!o.normalized;if(e){-1!==u&&i.deleteAttribLocation(u);var p=this.renderer.createAttribLocation(s,o.name);p.webGLAttribLocation>=0?(t.enableVertexAttribArray(p.webGLAttribLocation),t.vertexAttribPointer(p.webGLAttribLocation,h,c,f,r,l),o.enabled=!0,o.location=p):-1!==p.webGLAttribLocation&&t.disableVertexAttribArray(p.webGLAttribLocation)}else d?t.vertexAttribPointer(u.webGLAttribLocation,h,c,f,r,l):!d&&-1!==u&&u.webGLAttribLocation>-1&&(t.disableVertexAttribArray(u.webGLAttribLocation),o.location=-1)}return this},createUniforms:function(){var e,t,i,r=this.gl,n=this.program,s=this.uniforms,a=r.getProgramParameter(n.webGLProgram,r.ACTIVE_UNIFORMS);for(e=0;e<a;e++){var o=r.getActiveUniform(n.webGLProgram,e);if(o){t=o.name,null!==(i=this.renderer.createUniformLocation(n,t))&&(s[t]={name:t,location:i,setter:null,value1:null,value2:null,value3:null,value4:null});var h=t.indexOf("[");h>0&&(t=t.substr(0,h),s.hasOwnProperty(t)||null!==(i=this.renderer.createUniformLocation(n,t))&&(s[t]={name:t,location:i,setter:null,value1:null,value2:null,value3:null,value4:null}))}}return this},syncUniforms:function(){var e=this.gl;for(var t in this.renderer.setProgram(this.program),this.uniforms){var i=this.uniforms[t];i.setter&&i.setter.call(e,i.location.webGLUniformLocation,i.value1,i.value2,i.value3,i.value4)}},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var t=this.uniforms[e];return t&&(t.value1=null,t.value2=null,t.value3=null,t.value4=null),this},setUniform1:function(e,t,i,r){var n=this.uniforms[t];return n&&(r||n.value1!==i)&&(n.setter||(n.setter=e),n.value1=i,this.renderer.setProgram(this.program),e.call(this.gl,n.location.webGLUniformLocation,i),this.pipeline.currentShader=this),this},setUniform2:function(e,t,i,r,n){var s=this.uniforms[t];return s&&(n||s.value1!==i||s.value2!==r)&&(s.setter||(s.setter=e),s.value1=i,s.value2=r,this.renderer.setProgram(this.program),e.call(this.gl,s.location.webGLUniformLocation,i,r),this.pipeline.currentShader=this),this},setUniform3:function(e,t,i,r,n,s){var a=this.uniforms[t];return a&&(s||a.value1!==i||a.value2!==r||a.value3!==n)&&(a.setter||(a.setter=e),a.value1=i,a.value2=r,a.value3=n,this.renderer.setProgram(this.program),e.call(this.gl,a.location.webGLUniformLocation,i,r,n),this.pipeline.currentShader=this),this},setUniform4:function(e,t,i,r,n,s,a){var o=this.uniforms[t];return o&&(a||o.value1!==i||o.value2!==r||o.value3!==n||o.value4!==s)&&(o.setter||(o.setter=e),o.value1=i,o.value2=r,o.value3=n,o.value4=s,this.renderer.setProgram(this.program),e.call(this.gl,o.location.webGLUniformLocation,i,r,n,s),this.pipeline.currentShader=this),this},setBoolean:function(e,t){return this.setUniform1(this.gl.uniform1i,e,Number(t))},set1f:function(e,t){return this.setUniform1(this.gl.uniform1f,e,t)},set2f:function(e,t,i){return this.setUniform2(this.gl.uniform2f,e,t,i)},set3f:function(e,t,i,r){return this.setUniform3(this.gl.uniform3f,e,t,i,r)},set4f:function(e,t,i,r,n){return this.setUniform4(this.gl.uniform4f,e,t,i,r,n)},set1fv:function(e,t){return this.setUniform1(this.gl.uniform1fv,e,t,!0)},set2fv:function(e,t){return this.setUniform1(this.gl.uniform2fv,e,t,!0)},set3fv:function(e,t){return this.setUniform1(this.gl.uniform3fv,e,t,!0)},set4fv:function(e,t){return this.setUniform1(this.gl.uniform4fv,e,t,!0)},set1iv:function(e,t){return this.setUniform1(this.gl.uniform1iv,e,t,!0)},set2iv:function(e,t){return this.setUniform1(this.gl.uniform2iv,e,t,!0)},set3iv:function(e,t){return this.setUniform1(this.gl.uniform3iv,e,t,!0)},set4iv:function(e,t){return this.setUniform1(this.gl.uniform4iv,e,t,!0)},set1i:function(e,t){return this.setUniform1(this.gl.uniform1i,e,t)},set2i:function(e,t,i){return this.setUniform2(this.gl.uniform2i,e,t,i)},set3i:function(e,t,i,r){return this.setUniform3(this.gl.uniform3i,e,t,i,r)},set4i:function(e,t,i,r,n){return this.setUniform4(this.gl.uniform4i,e,t,i,r,n)},setMatrix2fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix2fv,e,t,i,!0)},setMatrix3fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix3fv,e,t,i,!0)},setMatrix4fv:function(e,t,i){return this.setUniform2(this.gl.uniformMatrix4fv,e,t,i,!0)},createProgram:function(e,t){return void 0===e&&(e=this.vertSrc),void 0===t&&(t=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=e,this.fragSrc=t,this.program=this.renderer.createProgram(e,t),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;n(this.uniforms,function(t){e.deleteUniformLocation(t.location)}),this.uniforms=null,n(this.attributes,function(t){e.deleteAttribLocation(t.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}})},14500:e=>{e.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},4159:(e,t,i)=>{var r=i(14500),n=i(79291),s={PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)};e.exports=s=n(!1,s,r)},31302:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(78908),a=i(85191),o=i(14500),h=i(29100);e.exports=new r({Extends:h,initialize:function(e){e.fragShader=n(e,"fragShader",s),e.vertShader=n(e,"vertShader",a),e.batchSize=n(e,"batchSize",1),e.vertices=n(e,"vertices",[-1,1,-1,-7,7,1]),e.attributes=n(e,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),h.call(this,e)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(e,t){h.prototype.resize.call(this,e,t),this.set2f("uResolution",e,t)},beginMask:function(e,t,i){this.renderer.beginBitmapMask(e,i)},endMask:function(e,t,i){var r=this.gl,n=this.renderer,s=e.bitmapMask;s&&r&&(n.drawBitmapMask(s,t,this),i&&this.set2f("uResolution",i.width,i.height),this.set1i("uInvertMaskAlpha",e.invertAlpha),r.drawArrays(this.topology,0,3),i&&this.set2f("uResolution",this.width,this.height),r.bindTexture(r.TEXTURE_2D,null))}})},92651:(e,t,i)=>{var r=i(83419),n=i(58918),s=i(14811),a=i(95540),o=i(43558),h=i(89350),c=i(70554);e.exports=new r({Extends:o,initialize:function(e){e.shaders=[c.setGlowQuality(h.FXGlowFrag,e.game),h.FXShadowFrag,h.FXPixelateFrag,h.FXVignetteFrag,h.FXShineFrag,h.FXBlurLowFrag,h.FXBlurMedFrag,h.FXBlurHighFrag,h.FXGradientFrag,h.FXBloomFrag,h.ColorMatrixFrag,h.FXCircleFrag,h.FXBarrelFrag,h.FXDisplacementFrag,h.FXWipeFrag,h.FXBokehFrag],o.call(this,e);var t=this.game;this.glow=new n.Glow(t),this.shadow=new n.Shadow(t),this.pixelate=new n.Pixelate(t),this.vignette=new n.Vignette(t),this.shine=new n.Shine(t),this.gradient=new n.Gradient(t),this.circle=new n.Circle(t),this.barrel=new n.Barrel(t),this.wipe=new n.Wipe(t),this.bokeh=new n.Bokeh(t);var i=[];i[s.GLOW]=this.onGlow,i[s.SHADOW]=this.onShadow,i[s.PIXELATE]=this.onPixelate,i[s.VIGNETTE]=this.onVignette,i[s.SHINE]=this.onShine,i[s.BLUR]=this.onBlur,i[s.GRADIENT]=this.onGradient,i[s.BLOOM]=this.onBloom,i[s.COLOR_MATRIX]=this.onColorMatrix,i[s.CIRCLE]=this.onCircle,i[s.BARREL]=this.onBarrel,i[s.DISPLACEMENT]=this.onDisplacement,i[s.WIPE]=this.onWipe,i[s.BOKEH]=this.onBokeh,this.fxHandlers=i,this.source,this.target,this.swap},onDraw:function(e,t,i){this.source=e,this.target=t,this.swap=i;var r=e.width,n=e.height,s=this.tempSprite,a=this.fxHandlers;if(s&&s.preFX)for(var o=s.preFX.list,h=0;h<o.length;h++){var c=o[h];c.active&&a[c.type].call(this,c,r,n)}this.drawToGame(this.source)},runDraw:function(){var e=this.source,t=this.target;this.copy(e,t),this.source=t,this.target=e},onGlow:function(e,t,i){var r=this.shaders[s.GLOW];this.setShader(r),this.glow.onPreRender(e,r,t,i),this.runDraw()},onShadow:function(e){var t=this.shaders[s.SHADOW];this.setShader(t),this.shadow.onPreRender(e,t),this.runDraw()},onPixelate:function(e,t,i){var r=this.shaders[s.PIXELATE];this.setShader(r),this.pixelate.onPreRender(e,r,t,i),this.runDraw()},onVignette:function(e){var t=this.shaders[s.VIGNETTE];this.setShader(t),this.vignette.onPreRender(e,t),this.runDraw()},onShine:function(e,t,i){var r=this.shaders[s.SHINE];this.setShader(r),this.shine.onPreRender(e,r,t,i),this.runDraw()},onBlur:function(e,t,i){var r=a(e,"quality"),n=this.shaders[s.BLUR+r];this.setShader(n),this.set1i("uMainSampler",0),this.set2f("resolution",t,i),this.set1f("strength",a(e,"strength")),this.set3fv("color",a(e,"glcolor"));for(var o=a(e,"x"),h=a(e,"y"),c=a(e,"steps"),l=0;l<c;l++)this.set2f("offset",o,0),this.runDraw(),this.set2f("offset",0,h),this.runDraw()},onGradient:function(e){var t=this.shaders[s.GRADIENT];this.setShader(t),this.gradient.onPreRender(e,t),this.runDraw()},onBloom:function(e,t,i){var r=this.shaders[s.BLOOM];this.copySprite(this.source,this.swap),this.setShader(r),this.set1i("uMainSampler",0),this.set1f("strength",a(e,"blurStrength")),this.set3fv("color",a(e,"glcolor"));for(var n=2/t*a(e,"offsetX"),o=2/i*a(e,"offsetY"),h=a(e,"steps"),c=0;c<h;c++)this.set2f("offset",n,0),this.runDraw(),this.set2f("offset",0,o),this.runDraw();this.blendFrames(this.swap,this.source,this.target,a(e,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(e){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",e.getData()),this.set1f("uAlpha",e.alpha),this.runDraw()},onCircle:function(e,t,i){var r=this.shaders[s.CIRCLE];this.setShader(r),this.circle.onPreRender(e,r,t,i),this.runDraw()},onBarrel:function(e){var t=this.shaders[s.BARREL];this.setShader(t),this.barrel.onPreRender(e,t),this.runDraw()},onDisplacement:function(e){this.setShader(this.shaders[s.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.runDraw()},onWipe:function(e){var t=this.shaders[s.WIPE];this.setShader(t),this.wipe.onPreRender(e,t),this.runDraw()},onBokeh:function(e,t,i){var r=this.shaders[s.BOKEH];this.setShader(r),this.bokeh.onPreRender(e,r,t,i),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,o.prototype.destroy.call(this),this}})},96569:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(31063),a=i(57516),o=i(61340),h=i(26099),c=i(29100);e.exports=new r({Extends:a,initialize:function(e){var t=n(e,"fragShader",s);e.fragShader=t.replace("%LIGHT_COUNT%",e.game.renderer.config.maxLights),a.call(this,e),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new h,this._tempMatrix=new o,this._tempMatrix2=new o},boot:function(){c.prototype.boot.call(this)},onRender:function(e,t){var i,r=e.sys.lights;if(this.lightsActive=!1,r&&r.active){var n=r.getLights(t),s=n.length;this.lightsActive=!0;var a=this.renderer.height,o=t.matrix,h=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",t.x,t.y,t.rotation,t.zoom),this.set3f("uAmbientLightColor",r.ambientColor.r,r.ambientColor.g,r.ambientColor.b),this.set1i("uLightCount",s),i=0;i<s;i++){var c=n[i].light,l=c.color,d="uLights["+i+"].";o.transformPoint(c.x,c.y,h),this.set2f(d+"position",h.x-t.scrollX*c.scrollFactorX*t.zoom,a-(h.y-t.scrollY*c.scrollFactorY*t.zoom)),this.set3f(d+"color",l.r,l.g,l.b),this.set1f(d+"intensity",c.intensity),this.set1f(d+"radius",c.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(e){if(e!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var t=this.inverseRotationMatrix;if(e){var i=-e,r=Math.cos(i),n=Math.sin(i);t[1]=n,t[3]=-n,t[0]=t[4]=r}else t[0]=t[4]=1,t[1]=t[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,t),this.currentNormalMapRotation=e}},setTexture2D:function(e,t){var i=this.renderer;void 0===e&&(e=i.whiteTexture);var r=this.getNormalMap(t);this.isNewNormalMap(e,r)&&(this.flush(),this.createBatch(e),this.addTextureToBatch(r),this.currentNormalMap=r);var n=0;return t&&t.parentContainer?n=t.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2).rotationNormalized:t&&(n=t.rotation),null===this.currentBatch&&(this.createBatch(e),this.addTextureToBatch(r)),this.setNormalMapRotation(n),0},setGameObject:function(e,t){void 0===t&&(t=e.frame);var i=t.glTexture,r=this.getNormalMap(e);if(this.isNewNormalMap(i,r)&&(this.flush(),this.createBatch(i),this.addTextureToBatch(r),this.currentNormalMap=r),e.parentContainer){var n=e.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(n.rotationNormalized)}else this.setNormalMapRotation(e.rotation);return null===this.currentBatch&&(this.createBatch(i),this.addTextureToBatch(r)),0},isNewNormalMap:function(e,t){return this.currentTexture!==e||this.currentNormalMap!==t},getNormalMap:function(e){var t;return e&&(e.displayTexture?t=e.displayTexture.dataSource[e.displayFrame.sourceIndex]:e.texture?t=e.texture.dataSource[e.frame.sourceIndex]:e.tileset&&(t=Array.isArray(e.tileset)?e.tileset[0].image.dataSource[0]:e.tileset.image.dataSource[0]),t)?t.glTexture:this.renderer.normalTexture},batchSprite:function(e,t,i){this.lightsActive&&a.prototype.batchSprite.call(this,e,t,i)},batchTexture:function(e,t,i,r,n,s,o,h,c,l,d,u,f,p,g,m,v,y,b,x,E,T,A,w,S,C,I,_,O,P,M,R){this.lightsActive&&a.prototype.batchTexture.call(this,e,t,i,r,n,s,o,h,c,l,d,u,f,p,g,m,v,y,b,x,E,T,A,w,S,C,I,_,O,P,M,R)},batchTextureFrame:function(e,t,i,r,n,s,o){this.lightsActive&&a.prototype.batchTextureFrame.call(this,e,t,i,r,n,s,o)}})},56527:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(57516),a=i(45561),o=i(60722),h=i(14500),c=i(29100);e.exports=new r({Extends:s,initialize:function(e){e.fragShader=n(e,"fragShader",a),e.vertShader=n(e,"vertShader",o),e.attributes=n(e,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),e.forceZero=!0,e.resizeUniform="uResolution",s.call(this,e)},boot:function(){c.prototype.boot.call(this);var e=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",e.width,e.height)}})},57516:(e,t,i)=>{var r=i(83419),n=i(94811),s=i(95540),a=i(98840),o=i(44667),h=i(61340),c=i(70554),l=i(14500),d=i(29100);e.exports=new r({Extends:d,initialize:function(e){var t=e.game.renderer,i=s(e,"fragShader",a);e.fragShader=c.parseFragmentShaderMaxTextures(i,t.maxTextures),e.vertShader=s(e,"vertShader",o),e.attributes=s(e,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),e.resizeUniform="uResolution",d.call(this,e),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this);var e=this.renderer;this.set1iv("uMainSampler",e.textureIndexes),this.set2f("uResolution",e.width,e.height)},batchSprite:function(e,t,i){this.manager.set(this,e);var r=this._tempMatrix1,n=this._tempMatrix2,s=this._tempMatrix3,a=e.frame,o=a.glTexture,h=a.u0,l=a.v0,d=a.u1,u=a.v1,f=a.x,p=a.y,g=a.cutWidth,m=a.cutHeight,v=a.customPivot,y=e.displayOriginX,b=e.displayOriginY,x=-y+f,E=-b+p;if(e.isCropped){var T=e._crop;(T.flipX!==e.flipX||T.flipY!==e.flipY)&&a.updateCropUVs(T,e.flipX,e.flipY),h=T.u0,l=T.v0,d=T.u1,u=T.v1,g=T.width,m=T.height,f=T.x,p=T.y,x=-y+f,E=-b+p}var A=1,w=1;e.flipX&&(v||(x+=-a.realWidth+2*y),A=-1),e.flipY&&(v||(E+=-a.realHeight+2*b),w=-1);var S=e.x,C=e.y;t.roundPixels&&(S=Math.floor(S),C=Math.floor(C)),n.applyITRS(S,C,e.rotation,e.scaleX*A,e.scaleY*w),r.copyFrom(t.matrix),i?(r.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY),n.e=S,n.f=C):(n.e-=t.scrollX*e.scrollFactorX,n.f-=t.scrollY*e.scrollFactorY),r.multiply(n,s);var I=s.setQuad(x,E,x+g,E+m,t.renderRoundPixels),_=c.getTintAppendFloatAlpha,O=t.alpha,P=_(e.tintTopLeft,O*e._alphaTL),M=_(e.tintTopRight,O*e._alphaTR),R=_(e.tintBottomLeft,O*e._alphaBL),L=_(e.tintBottomRight,O*e._alphaBR);this.shouldFlush(6)&&this.flush();var D=this.setGameObject(e,a);this.manager.preBatch(e),this.batchQuad(e,I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],h,l,d,u,P,M,R,L,e.tintFill,o,D),this.manager.postBatch(e)},batchTexture:function(e,t,i,r,n,s,a,o,h,c,l,d,u,f,p,g,m,v,y,b,x,E,T,A,w,S,C,I,_,O,P,M,R){void 0===R&&(R=!1),this.manager.set(this,e);var L=this._tempMatrix1,D=this._tempMatrix2,k=this._tempMatrix3,N=v/i+C,F=y/r+I,B=(v+b)/i+C,U=(y+x)/r+I,G=a,V=o,Y=-g,j=-m;if(e.isCropped){var W=e._crop,z=W.width,H=W.height;G=z,V=H,a=z,o=H,v=W.x,y=W.y;var X=v,q=y;d&&(X=b-W.x-z),u&&(q=x-W.y-H),N=X/i+C,F=q/r+I,B=(X+z)/i+C,U=(q+H)/r+I,Y=-g+v,j=-m+y}u^=!P&&t.isRenderTexture?1:0,d&&(G*=-1,Y+=a),u&&(V*=-1,j+=o),_.roundPixels&&(n=Math.floor(n),s=Math.floor(s)),D.applyITRS(n,s,l,h,c),L.copyFrom(_.matrix),O?(L.multiplyWithOffset(O,-_.scrollX*f,-_.scrollY*p),D.e=n,D.f=s):(D.e-=_.scrollX*f,D.f-=_.scrollY*p),L.multiply(D,k);var K=k.setQuad(Y,j,Y+G,j+V,_.renderRoundPixels);null==M&&(M=this.setTexture2D(t)),e&&!R&&this.manager.preBatch(e),this.batchQuad(e,K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],N,F,B,U,E,T,A,w,S,t,M),e&&!R&&this.manager.postBatch(e)},batchTextureFrame:function(e,t,i,r,n,s,a){this.manager.set(this);var o=this._tempMatrix1.copyFrom(s),h=this._tempMatrix2;a?o.multiply(a,h):h=o;var l=h.setQuad(t,i,t+e.width,i+e.height),d=this.setTexture2D(e.source.glTexture);r=c.getTintAppendFloatAlpha(r,n),this.batchQuad(null,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],e.u0,e.v0,e.u1,e.v1,r,r,r,r,0,e.glTexture,d)},batchFillRect:function(e,t,i,r,n,s){this.renderer.pipelines.set(this);var a=this.calcMatrix;s&&s.multiply(n,a);var o=a.setQuad(e,t,e+i,t+r),h=this.fillTint;this.batchQuad(null,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],0,0,1,1,h.TL,h.TR,h.BL,h.BR,2)},batchFillTriangle:function(e,t,i,r,n,s,a,o){this.renderer.pipelines.set(this);var h=this.calcMatrix;o&&o.multiply(a,h);var c=h.getX(e,t),l=h.getY(e,t),d=h.getX(i,r),u=h.getY(i,r),f=h.getX(n,s),p=h.getY(n,s),g=this.fillTint;this.batchTri(null,c,l,d,u,f,p,0,0,1,1,g.TL,g.TR,g.BL,2)},batchStrokeTriangle:function(e,t,i,r,n,s,a,o,h){var c=this.tempTriangle;c[0].x=e,c[0].y=t,c[0].width=a,c[1].x=i,c[1].y=r,c[1].width=a,c[2].x=n,c[2].y=s,c[2].width=a,c[3].x=e,c[3].y=t,c[3].width=a,this.batchStrokePath(c,a,!1,o,h)},batchFillPath:function(e,t,i){this.renderer.pipelines.set(this);var r,s,a=this.calcMatrix;i&&i.multiply(t,a);for(var o=e.length,h=this.polygonCache,c=this.fillTint.TL,l=this.fillTint.TR,d=this.fillTint.BL,u=0;u<o;++u)s=e[u],h.push(s.x,s.y);o=(r=n(h)).length;for(var f=0;f<o;f+=3){var p=2*r[f+0],g=2*r[f+1],m=2*r[f+2],v=h[p+0],y=h[p+1],b=h[g+0],x=h[g+1],E=h[m+0],T=h[m+1],A=a.getX(v,y),w=a.getY(v,y),S=a.getX(b,x),C=a.getY(b,x),I=a.getX(E,T),_=a.getY(E,T);this.batchTri(null,A,w,S,C,I,_,0,0,1,1,c,l,d,2)}h.length=0},batchStrokePath:function(e,t,i,r,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=e.length-1,a=0;a<s;a++){var o=e[a],h=e[a+1];this.batchLine(o.x,o.y,h.x,h.y,o.width/2,h.width/2,t,a,!i&&a===s-1,r,n)}},batchLine:function(e,t,i,r,n,s,a,o,h,c,l){this.renderer.pipelines.set(this);var d=this.calcMatrix;l&&l.multiply(c,d);var u=i-e,f=r-t,p=Math.sqrt(u*u+f*f);if(0!==p){var g=n*(r-t)/p,m=n*(e-i)/p,v=s*(r-t)/p,y=s*(e-i)/p,b=i-v,x=r-y,E=e-g,T=t-m,A=i+v,w=r+y,S=e+g,C=t+m,I=d.getX(b,x),_=d.getY(b,x),O=d.getX(E,T),P=d.getY(E,T),M=d.getX(A,w),R=d.getY(A,w),L=d.getX(S,C),D=d.getY(S,C),k=this.strokeTint,N=k.TL,F=k.TR,B=k.BL,U=k.BR;if(this.batchQuad(null,L,D,O,P,I,_,M,R,0,0,1,1,N,F,B,U,2),!(a<=2)){var G=this.prevQuad,V=this.firstQuad;o>0&&G[4]?this.batchQuad(null,L,D,O,P,G[0],G[1],G[2],G[3],0,0,1,1,N,F,B,U,2):(V[0]=L,V[1]=D,V[2]=O,V[3]=P,V[4]=1),h&&V[4]?this.batchQuad(null,I,_,M,R,V[0],V[1],V[2],V[3],0,0,1,1,N,F,B,U,2):(G[0]=I,G[1]=_,G[2]=M,G[3]=R,G[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,d.prototype.destroy.call(this),this}})},43439:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(4127),a=i(89924),o=i(29100);e.exports=new r({Extends:o,initialize:function(e){e.vertShader=n(e,"vertShader",a),e.fragShader=n(e,"fragShader",s),e.attributes=n(e,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,e)},onRender:function(e,t){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",t.zoom)},batchPointLight:function(e,t,i,r,n,s,a,o,h,c,l,d){var u=e.color,f=e.intensity,p=e.radius,g=e.attenuation,m=u.r*f,v=u.g*f,y=u.b*f,b=t.alpha*e.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(i,r,l,d,p,g,m,v,y,b),this.batchLightVert(n,s,l,d,p,g,m,v,y,b),this.batchLightVert(a,o,l,d,p,g,m,v,y,b),this.batchLightVert(i,r,l,d,p,g,m,v,y,b),this.batchLightVert(a,o,l,d,p,g,m,v,y,b),this.batchLightVert(h,c,l,d,p,g,m,v,y,b),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(e,t,i,r,n,s,a,o,h,c){var l=this.vertexViewF32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;l[++d]=e,l[++d]=t,l[++d]=i,l[++d]=r,l[++d]=n,l[++d]=s,l[++d]=a,l[++d]=o,l[++d]=h,l[++d]=c,this.vertexCount++}})},84057:(e,t,i)=>{var r=i(83419),n=i(89422),s=i(95540),a=i(27681),o=i(49627),h=i(29100);e.exports=new r({Extends:h,initialize:function(e){e.renderTarget=s(e,"renderTarget",1),e.fragShader=s(e,"fragShader",a),e.vertShader=s(e,"vertShader",o),e.attributes=s(e,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),e.batchSize=1,e.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,e),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new n,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){h.prototype.boot.call(this);var e=this.manager.UTILITY_PIPELINE;this.fullFrame1=e.fullFrame1,this.fullFrame2=e.fullFrame2,this.halfFrame1=e.halfFrame1,this.halfFrame2=e.halfFrame2;var t=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height);for(var i=this.renderTargets,r=0;r<i.length;r++)i[r].autoResize=!0},postBatch:function(e){return!this.hasBooted&&(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(e),this},onDraw:function(e){this.bindAndDraw(e)},getController:function(e){return void 0!==e?e:this.controller?this.controller:this},copySprite:function(e,t,i){void 0===i&&(i=!1);var r=this.gl;r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e.texture.webGLTexture);var n=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.texture.webGLTexture,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),i&&(r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,n))},copyFrame:function(e,t,i,r,n){this.manager.copyFrame(e,t,i,r,n)},copyToGame:function(e){this.manager.copyToGame(e)},drawFrame:function(e,t,i){this.manager.drawFrame(e,t,i,this.colorMatrix)},blendFrames:function(e,t,i,r,n){this.manager.blendFrames(e,t,i,r,n)},blendFramesAdditive:function(e,t,i,r,n){this.manager.blendFramesAdditive(e,t,i,r,n)},clearFrame:function(e,t){this.manager.clearFrame(e,t)},blitFrame:function(e,t,i,r,n,s){this.manager.blitFrame(e,t,i,r,n,s)},copyFrameRect:function(e,t,i,r,n,s,a,o){this.manager.copyFrameRect(e,t,i,r,n,s,a,o)},bindAndDraw:function(e,t,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=!0);var s=this.gl,a=this.renderer;this.bind(n),this.set1i("uMainSampler",0),t?(s.viewport(0,0,t.width,t.height),s.bindFramebuffer(s.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t.texture.webGLTexture,0),i&&(r?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT))):(a.popFramebuffer(!1,!1),a.currentFramebuffer||s.viewport(0,0,a.width,a.height)),a.restoreStencilMask(),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.webGLTexture),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),t&&(s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,a.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),h.prototype.destroy.call(this),this}})},43558:(e,t,i)=>{var r=i(10312),n=i(67502),s=i(83419),a=i(96293),o=i(95540),h=i(57516),c=i(27681),l=i(87841),d=i(32302),u=i(45561),f=i(60722),p=i(29100);e.exports=new s({Extends:h,initialize:function(e){var t=o(e,"fragShader",c),i=o(e,"vertShader",f),r=[{name:"DrawSprite",fragShader:u,vertShader:f},{name:"CopySprite",fragShader:t,vertShader:i},{name:"DrawGame",fragShader:o(e,"drawShader",c),vertShader:f},{name:"ColorMatrix",fragShader:a}],n=o(e,"shaders",[]);e.shaders=r.concat(n),e.vertShader||(e.vertShader=i),e.batchSize=1,h.call(this,e),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new l,this.targetBounds=new l,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var e=this.shaders,t=this.renderer;this.drawSpriteShader=e[0],this.copyShader=e[1],this.gameShader=e[2],this.colorMatrixShader=e[3],this.fsTarget=new d(t,t.width,t.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var i=new ArrayBuffer(168);this.quadVertexData=i,this.quadVertexViewF32=new Float32Array(i),this.quadVertexBuffer=t.createVertexBuffer(i,this.gl.STATIC_DRAW),this.onResize(t.width,t.height),this.currentShader=this.copyShader,this.set2f("uResolution",t.width,t.height)},onResize:function(e,t){var i=this.quadVertexViewF32;i[1]=t,i[22]=t,i[14]=e,i[28]=e,i[35]=e,i[36]=t},batchQuad:function(e,t,i,r,s,a,o,h,c,l,d,u,f,p,g,m,v,y,b){var x=Math.min(t,r,a,h),E=Math.min(i,s,o,c),T=Math.max(t,r,a,h)-x,A=Math.max(i,s,o,c)-E,w=this.spriteBounds.setTo(x,E,T,A),S=e?e.preFX.padding:0,C=Math.abs(Math.max(T+2*S,A+2*S)),I=this.manager.getRenderTarget(C),_=this.targetBounds.setTo(0,0,I.width,I.height);n(_,Math.round(w.centerX),Math.round(w.centerY)),this.tempSprite=e;var O=this.gl,P=this.renderer;P.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",P.width,P.height),this.flipProjectionMatrix(!0),e&&(this.onDrawSprite(e,I),e.preFX.onFX(this));var M=this.fsTarget;return this.flush(),O.viewport(0,0,P.width,P.height),O.bindFramebuffer(O.FRAMEBUFFER,M.framebuffer.webGLFramebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,M.texture.webGLTexture,0),O.clearColor(0,0,0,0),O.clear(O.COLOR_BUFFER_BIT),this.setTexture2D(b),this.batchVert(t,i,l,d,0,y,p),this.batchVert(r,s,l,f,0,y,m),this.batchVert(a,o,u,f,0,y,v),this.batchVert(t,i,l,d,0,y,p),this.batchVert(a,o,u,f,0,y,v),this.batchVert(h,c,u,d,0,y,g),this.flush(),this.flipProjectionMatrix(!1),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,I.texture.webGLTexture),O.copyTexSubImage2D(O.TEXTURE_2D,0,0,0,_.x,_.y,_.width,_.height),O.bindFramebuffer(O.FRAMEBUFFER,null),O.bindTexture(O.TEXTURE_2D,null),this.onBatch(e),this.currentShader=this.copyShader,this.onDraw(I,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(e,t,i,n,s,a,o){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===o&&(o=this.copyShader);var h=this.gl,c=this.tempSprite;a&&(o=this.colorMatrixShader),this.currentShader=o;var l=this.setVertexBuffer(this.quadVertexBuffer);o.bind(l,!1);var d=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",d.width,d.height),c.preFX.onFXCopy(this),this.onCopySprite(e,t,c),a&&(this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture.webGLTexture),e.height>t.height)h.viewport(0,0,e.width,e.height),this.setTargetUVs(e,t);else{var u=t.height-e.height;h.viewport(0,u,e.width,e.height),this.resetUVs()}if(h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture.webGLTexture,0),i&&(h.clearColor(0,0,0,Number(!n)),h.clear(h.COLOR_BUFFER_BIT)),s){var f=this.renderer.currentBlendMode;this.renderer.setBlendMode(r.ERASE)}h.bufferData(h.ARRAY_BUFFER,this.quadVertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),s&&this.renderer.setBlendMode(f),h.bindFramebuffer(h.FRAMEBUFFER,null)},copy:function(e,t){var i=this.gl;this.set1i("uMainSampler",0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture.webGLTexture),i.viewport(0,0,e.width,e.height),this.setUVs(0,0,0,1,1,1,1,0),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.texture.webGLTexture,0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.bufferData(i.ARRAY_BUFFER,this.quadVertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),i.bindFramebuffer(i.FRAMEBUFFER,null)},blendFrames:function(e,t,i,r,n){this.manager.blendFrames(e,t,i,r,n)},blendFramesAdditive:function(e,t,i,r,n){this.manager.blendFramesAdditive(e,t,i,r,n)},drawToGame:function(e){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(e)},copyToGame:function(e){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(e)},bindAndDraw:function(e){var t=this.gl,i=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(e.texture);var r=this._tempMatrix1.loadIdentity(),n=this.targetBounds.x,s=this.targetBounds.y,a=n+e.width,o=s+e.height,h=r.getX(n,s),c=r.getX(n,o),l=r.getX(a,o),d=r.getX(a,s),u=r.getY(n,s),f=r.getY(n,o),p=r.getY(a,o),g=r.getY(a,s);this.batchVert(h,u,0,0,0,0,0xffffff),this.batchVert(c,f,0,1,0,0,0xffffff),this.batchVert(l,p,1,1,0,0,0xffffff),this.batchVert(h,u,0,0,0,0,0xffffff),this.batchVert(l,p,1,1,0,0,0xffffff),this.batchVert(d,g,1,0,0,0,0xffffff),i.restoreFramebuffer(!1,!0),i.currentFramebuffer||t.viewport(0,0,i.width,i.height),i.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(e){this.drawToGame(e)},setUVs:function(e,t,i,r,n,s,a,o){var h=this.quadVertexViewF32;h[2]=e,h[3]=t,h[9]=i,h[10]=r,h[16]=n,h[17]=s,h[23]=e,h[24]=t,h[30]=n,h[31]=s,h[37]=a,h[38]=o},setTargetUVs:function(e,t){var i=t.height/e.height;i=i>.5?.5-(i-.5):.5+(.5-i),this.setUVs(0,i,0,1+i,1,1+i,1,i)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,h.prototype.destroy.call(this),this}})},81041:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(57516);e.exports=new r({Extends:s,initialize:function(e){e.topology=5,e.batchSize=n(e,"batchSize",256),s.call(this,e)}})},12385:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(57516),a=i(45561),o=i(60722),h=i(29100);e.exports=new r({Extends:s,initialize:function(e){e.fragShader=n(e,"fragShader",a),e.vertShader=n(e,"vertShader",o),e.forceZero=!0,s.call(this,e)},boot:function(){h.prototype.boot.call(this);var e=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",e.width,e.height)}})},7589:(e,t,i)=>{var r=i(35407),n=i(10312),s=i(83419),a=i(89422),o=i(96293),h=i(36682),c=i(95540),l=i(48247),d=i(49627),u=i(29100);e.exports=new s({Extends:u,initialize:function(e){e.renderTarget=c(e,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),e.vertShader=c(e,"vertShader",d),e.shaders=c(e,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:l},{name:"ColorMatrix",fragShader:o}]),e.attributes=c(e,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),e.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],e.batchSize=1,u.call(this,e),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){u.prototype.boot.call(this);var e=this.shaders,t=this.renderTargets;this.copyShader=e[0],this.addShader=e[1],this.linearShader=e[2],this.colorMatrixShader=e[3],this.fullFrame1=t[0],this.fullFrame2=t[1],this.halfFrame1=t[2],this.halfFrame2=t[3]},copyFrame:function(e,t,i,r,n){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===n&&(n=!0);var s=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.webGLTexture),t?(s.viewport(0,0,t.width,t.height),s.bindFramebuffer(s.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t.texture.webGLTexture,0)):s.viewport(0,0,e.width,e.height),r&&(n?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT)),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blitFrame:function(e,t,i,r,s,a,o){void 0===i&&(i=1),void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===o&&(o=!1);var h=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture.webGLTexture),e.height>t.height)h.viewport(0,0,e.width,e.height),this.setTargetUVs(e,t);else{var c=t.height-e.height;h.viewport(0,c,e.width,e.height)}if(h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture.webGLTexture,0),r&&(s?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),a){var l=this.renderer.currentBlendMode;this.renderer.setBlendMode(n.ERASE)}o&&this.flipY(),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),a&&this.renderer.setBlendMode(l),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(e,t,i,r,n,s,a,o){void 0===a&&(a=!0),void 0===o&&(o=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture.webGLTexture,0),a&&(o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture.webGLTexture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,r,n,s),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(e){var t=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.texture.webGLTexture),t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.STATIC_DRAW),t.drawArrays(t.TRIANGLES,0,6)},drawFrame:function(e,t,i,r){void 0===i&&(i=!0),void 0===r&&(r=this.colorMatrix);var n=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture.webGLTexture),t?(n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.texture.webGLTexture,0)):n.viewport(0,0,e.width,e.height),i?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blendFrames:function(e,t,i,r,n,s){void 0===r&&(r=1),void 0===n&&(n=!0),void 0===s&&(s=this.linearShader);var a=this.gl;this.setShader(s),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture.webGLTexture),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,t.texture.webGLTexture),i?(a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture.webGLTexture,0),a.viewport(0,0,i.width,i.height)):a.viewport(0,0,e.width,e.height),n?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFramesAdditive:function(e,t,i,r,n){this.blendFrames(e,t,i,r,n,this.addShader)},clearFrame:function(e,t){void 0===t&&(t=!0);var i=this.gl;i.viewport(0,0,e.width,e.height),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),t?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;i.bindFramebuffer(i.FRAMEBUFFER,r.webGLFramebuffer)},setUVs:function(e,t,i,r,n,s,a,o){var h=this.vertexViewF32;h[2]=e,h[3]=t,h[6]=i,h[7]=r,h[10]=n,h[11]=s,h[14]=e,h[15]=t,h[18]=n,h[19]=s,h[22]=a,h[23]=o},setTargetUVs:function(e,t){var i=t.height/e.height;i=i>.5?.5-(i-.5):.5+(.5-i),this.setUVs(0,i,0,1+i,1,1+i,1,i)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}})},36060:e=>{e.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"}},84817:e=>{e.exports="pipelineafterflush"},36712:e=>{e.exports="pipelinebeforeflush"},40285:e=>{e.exports="pipelinebind"},65918:e=>{e.exports="pipelineboot"},92852:e=>{e.exports="pipelinedestroy"},56072:e=>{e.exports="pipelinerebind"},57566:e=>{e.exports="pipelineresize"},77085:(e,t,i)=>{e.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(e,t,i)=>{var r=i(83419),n=i(99155),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.amount=1},onPreRender:function(e,t){e=this.getController(e),this.set1f("amount",e.amount,t)}})},67329:(e,t,i)=>{var r=i(83419),n=i(24400),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(e){e=this.getController(e),this.set1f("strength",e.blurStrength),this.set3fv("color",e.glcolor)},onDraw:function(e){var t=this.getController(),i=this.fullFrame1,r=this.fullFrame2;this.copyFrame(e,r);for(var n=2/e.width*t.offsetX,s=2/e.height*t.offsetY,a=0;a<t.steps;a++)this.set2f("offset",n,0),this.copySprite(e,i),this.set2f("offset",0,s),this.copySprite(i,e);this.blendFrames(r,e,i,t.strength),this.copyToGame(i)}})},8861:(e,t,i)=>{var r=i(83419),n=i(41514),s=i(51078),a=i(94328),o=i(84057);e.exports=new r({Extends:o,initialize:function(e){o.call(this,{game:e,shaders:[{name:"Gaussian5",fragShader:n},{name:"Gaussian9",fragShader:s},{name:"Gaussian13",fragShader:a}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(e){var t=this.getController(),i=this.gl,r=this.fullFrame1,n=i.getParameter(i.FRAMEBUFFER_BINDING);this.bind(this.shaders[t.quality]),i.activeTexture(i.TEXTURE0),i.viewport(0,0,e.width,e.height),this.set1i("uMainSampler",0),this.set2f("resolution",e.width,e.height),this.set1f("strength",t.strength),this.set3fv("color",t.glcolor);for(var s=0;s<t.steps;s++)this.set2f("offset",t.x,0),this.copySprite(e,r),this.set2f("offset",0,t.y),this.copySprite(r,e);i.bindFramebuffer(i.FRAMEBUFFER,n),i.bindTexture(i.TEXTURE_2D,null),this.copyToGame(e)}})},51051:(e,t,i)=>{var r=i(83419),n=i(90610),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(e,t,i,r){e=this.getController(e),this.set1f("radius",e.radius,t),this.set1f("amount",e.amount,t),this.set1f("contrast",e.contrast,t),this.set1f("strength",e.strength,t),this.set2f("blur",e.blurX,e.blurY,t),this.setBoolean("isTiltShift",e.isTiltShift,t),i&&r&&this.set2f("resolution",i,r,t)},onDraw:function(e){this.set2f("resolution",e.width,e.height),this.bindAndDraw(e)}})},89428:(e,t,i)=>{var r=i(83419),n=i(91899),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(e,t,i,r){e=this.getController(e),this.set1f("scale",e.scale,t),this.set1f("feather",e.feather,t),this.set1f("thickness",e.thickness,t),this.set3fv("color",e.glcolor,t),this.set4fv("backgroundColor",e.glcolor2,t),i&&r&&this.set2f("resolution",i,r,t)},onDraw:function(e){this.set2f("resolution",e.width,e.height),this.bindAndDraw(e)}})},88904:(e,t,i)=>{var r=i(83419),n=i(84057);e.exports=new r({Extends:n,initialize:function(e){n.call(this,{game:e})},onDraw:function(e){var t=this.fullFrame1;this.controller?this.manager.drawFrame(e,t,!0,this.controller):this.drawFrame(e,t),this.copyToGame(t)}})},63563:(e,t,i)=>{var r=i(83419),n=i(47838),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(e){var t=this.game.textures.getFrame(e);t&&(this.glTexture=t.glTexture)},onDraw:function(e){var t=this.getController(),i=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",t.x,t.y),this.bindTexture(t.glTexture,1),this.copySprite(e,i),this.copyToGame(i)}})},94045:(e,t,i)=>{var r=i(83419),n=i(95540),s=i(98656),a=i(84057),o=i(70554);e.exports=new r({Extends:a,initialize:function(e,t){var i=n(t,"quality",.1),r=n(t,"distance",10);a.call(this,{game:e,fragShader:o.setGlowQuality(s,e,i,r)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(e,t,i,r){e=this.getController(e),this.set1f("outerStrength",e.outerStrength,t),this.set1f("innerStrength",e.innerStrength,t),this.set4fv("glowColor",e.glcolor,t),this.setBoolean("knockout",e.knockout,t),i&&r&&this.set2f("resolution",i,r,t)},onDraw:function(e){this.set2f("resolution",e.width,e.height),this.bindAndDraw(e)}})},74088:(e,t,i)=>{var r=i(83419),n=i(70463),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(e,t){e=this.getController(e),this.set1f("alpha",e.alpha,t),this.set1i("size",e.size,t),this.set3fv("color1",e.glcolor1,t),this.set3fv("color2",e.glcolor2,t),this.set2f("positionFrom",e.fromX,e.fromY,t),this.set2f("positionTo",e.toX,e.toY,t)}})},99636:(e,t,i)=>{var r=i(83419),n=i(50831),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.amount=1},onPreRender:function(e,t,i,r){e=this.getController(e),this.set1f("amount",e.amount,t),i&&r&&this.set2f("resolution",i,r,t)},onDraw:function(e){this.set2f("resolution",e.width,e.height),this.bindAndDraw(e)}})},34700:(e,t,i)=>{var r=i(83419),n=i(92595),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(e,t){var i=(e=this.getController(e)).samples;this.set1i("samples",i,t),this.set1f("intensity",e.intensity,t),this.set1f("decay",e.decay,t),this.set1f("power",e.power/i,t),this.set2f("lightPosition",e.x,e.y,t),this.set4fv("color",e.glcolor,t)}})},91157:(e,t,i)=>{var r=i(83419),n=i(72464),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(e,t,i,r){e=this.getController(e),this.setTime("time",t),this.set1f("speed",e.speed,t),this.set1f("lineWidth",e.lineWidth,t),this.set1f("gradient",e.gradient,t),this.setBoolean("reveal",e.reveal,t),i&&r&&this.set2f("resolution",i,r,t)},onDraw:function(e){this.set2f("resolution",e.width,e.height),this.bindAndDraw(e)}})},27797:(e,t,i)=>{var r=i(83419),n=i(39249),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(e,t){e=this.getController(e),this.set1f("radius",e.radius,t),this.set1f("strength",e.strength,t),this.set2f("position",e.x,e.y,t)}})},67603:(e,t,i)=>{var r=i(83419),n=i(2878),s=i(84057);e.exports=new r({Extends:s,initialize:function(e){s.call(this,{game:e,fragShader:n}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(e,t){var i=(e=this.getController(e)).progress,r=e.wipeWidth,n=e.direction,s=e.axis;this.set4f("config",i,r,n,s,t),this.setBoolean("reveal",e.reveal,t)}})},58918:(e,t,i)=>{e.exports={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)}},96615:(e,t,i)=>{var r=i(36060),n=i(79291),s={FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)};e.exports=s=n(!1,s,r)},35407:e=>{e.exports="#define SHADER_NAME PHASER_ADD_BLEND_FS\nprecision mediump float;\nuniform sampler2D uMainSampler1;\nuniform sampler2D uMainSampler2;\nuniform float uStrength;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);\n    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);\n    gl_FragColor = frame1 + frame2 * uStrength;\n}"},78908:e=>{e.exports="#define SHADER_NAME PHASER_BITMAP_MASK_FS\nprecision mediump float;\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uMaskSampler;\nuniform bool uInvertMaskAlpha;\nvoid main ()\n{\n    vec2 uv = gl_FragCoord.xy / uResolution;\n    vec4 mainColor = texture2D(uMainSampler, uv);\n    vec4 maskColor = texture2D(uMaskSampler, uv);\n    if (!uInvertMaskAlpha)\n    {\n        mainColor *= maskColor.a;\n    }\n    else\n    {\n        mainColor *= (1.0 - maskColor.a);\n    }\n    gl_FragColor = mainColor;\n}"},85191:e=>{e.exports="#define SHADER_NAME PHASER_BITMAP_MASK_VS\nprecision mediump float;\nattribute vec2 inPosition;\nvoid main ()\n{\n    gl_Position = vec4(inPosition, 0.0, 1.0);\n}"},96293:e=>{e.exports="#define SHADER_NAME PHASER_COLORMATRIX_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform float uColorMatrix[20];\nuniform float uAlpha;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 c = texture2D(uMainSampler, outTexCoord);\n    if (uAlpha == 0.0)\n    {\n        gl_FragColor = c;\n        return;\n    }\n    if (c.a > 0.0)\n    {\n        c.rgb /= c.a;\n    }\n    vec4 result;\n    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];\n    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];\n    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];\n    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n    rgb *= result.a;\n    gl_FragColor = vec4(rgb, result.a);\n}"},36682:e=>{e.exports="#define SHADER_NAME PHASER_COPY_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform float uBrightness;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;\n}"},99155:e=>{e.exports="#define SHADER_NAME BARREL_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform float amount;\nvarying vec2 outTexCoord;\nvec2 Distort(vec2 p)\n{\n    float theta  = atan(p.y, p.x);\n    float radius = length(p);\n    radius = pow(radius, amount);\n    p.x = radius * cos(theta);\n    p.y = radius * sin(theta);\n    return 0.5 * (p + 1.0);\n}\nvoid main()\n{\n    vec2 xy = 2.0 * outTexCoord - 1.0;\n    vec2 texCoord = outTexCoord;\n    if (length(xy) < 1.0)\n    {\n        texCoord = Distort(xy);\n    }\n    gl_FragColor = texture2D(uMainSampler, texCoord);\n}"},24400:e=>{e.exports="#define SHADER_NAME BLOOM_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 offset;\nuniform float strength;\nuniform vec3 color;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;\n    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;\n    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;\n    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;\n    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);\n}"},94328:e=>{e.exports="#define SHADER_NAME BLUR_HIGH_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform vec2 offset;\nuniform float strength;\nuniform vec3 color;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec2 uv = outTexCoord;\n    vec4 col = vec4(0.0);\n    vec2 off1 = vec2(1.411764705882353) * offset * strength;\n    vec2 off2 = vec2(3.2941176470588234) * offset * strength;\n    vec2 off3 = vec2(5.176470588235294) * offset * strength;\n    col += texture2D(uMainSampler, uv) * 0.1964825501511404;\n    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;\n    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;\n    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;\n    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;\n    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;\n    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;\n    gl_FragColor = col * vec4(color, 1.0);\n}"},41514:e=>{e.exports="#define SHADER_NAME BLUR_LOW_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform vec2 offset;\nuniform float strength;\nuniform vec3 color;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec2 uv = outTexCoord;\n    vec4 col = vec4(0.0);\n    vec2 offset = vec2(1.333) * offset * strength;\n    col += texture2D(uMainSampler, uv) * 0.29411764705882354;\n    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;\n    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;\n    gl_FragColor = col * vec4(color, 1.0);\n}"},51078:e=>{e.exports="#define SHADER_NAME BLUR_MED_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform vec2 offset;\nuniform float strength;\nuniform vec3 color;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec2 uv = outTexCoord;\n    vec4 col = vec4(0.0);\n    vec2 off1 = vec2(1.3846153846) * offset * strength;\n    vec2 off2 = vec2(3.2307692308) * offset * strength;\n    col += texture2D(uMainSampler, uv) * 0.2270270270;\n    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;\n    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;\n    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;\n    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;\n    gl_FragColor = col * vec4(color, 1.0);\n}"},90610:e=>{e.exports="#define SHADER_NAME BOKEH_FS\nprecision mediump float;\n#define ITERATIONS 100.0\n#define ONEOVER_ITR 1.0 / ITERATIONS\n#define PI 3.141596\n#define GOLDEN_ANGLE 2.39996323\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform float radius;\nuniform float amount;\nuniform float contrast;\nuniform bool isTiltShift;\nuniform float strength;\nuniform vec2 blur;\nvarying vec2 outTexCoord;\nvec2 Sample (in float theta, inout float r)\n{\n    r += 1.0 / r;\n    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;\n}\nvec3 Bokeh (sampler2D tex, vec2 uv, float radius)\n{\n    vec3 acc = vec3(0.0);\n    vec3 div = vec3(0.0);\n    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;\n    float r = 1.0;\n    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)\n    {\n        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;\n        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;\n        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;\n        acc += col * bokeh;\n        div += bokeh;\n    }\n    return acc / div;\n}\nvoid main ()\n{\n    float shift = 1.0;\n    if (isTiltShift)\n    {\n        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;\n        float centerStrength = 1.0;\n        shift = length(uv * blur * strength) * centerStrength;\n    }\n    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);\n}"},91899:e=>{e.exports="#define SHADER_NAME CIRCLE_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform vec3 color;\nuniform vec4 backgroundColor;\nuniform float thickness;\nuniform float scale;\nuniform float feather;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;\n    float aspectRatio = resolution.x / resolution.y;\n    position.x *= aspectRatio;\n    float grad = length(position);\n    float outer = aspectRatio;\n    float inner = outer - (thickness * 2.0 / resolution.y);\n    if (aspectRatio >= 1.0)\n    {\n        float f = 2.0 + (resolution.y / resolution.x);\n        outer = 1.0;\n        inner = 1.0 - (thickness * f / resolution.x);\n    }\n    outer *= scale;\n    inner *= scale;\n    float circle = smoothstep(outer, outer - 0.01, grad);\n    float ring = circle - smoothstep(inner, inner - feather, grad);\n    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);\n    texture = (texture * (circle - ring));\n    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);\n}"},47838:e=>{e.exports="#define SHADER_NAME DISPLACEMENT_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform sampler2D uDisplacementSampler;\nuniform vec2 amount;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;\n    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;\n}"},98656:e=>{e.exports="#define SHADER_NAME GLOW_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec2 resolution;\nuniform vec4 glowColor;\nuniform bool knockout;\nconst float PI = 3.14159265358979323846264;\nconst float DIST = __DIST__;\nconst float SIZE = min(__SIZE__, PI * 2.0);\nconst float STEP = ceil(PI * 2.0 / SIZE);\nconst float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;\nvoid main ()\n{\n    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    float totalAlpha = 0.0;\n    vec2 direction;\n    vec2 displaced;\n    vec4 color;\n    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)\n    {\n        direction = vec2(cos(angle), sin(angle)) * px;\n        for (float curDistance = 0.0; curDistance < DIST; curDistance++)\n        {\n            displaced = outTexCoord + direction * (curDistance + 1.0);\n            color = texture2D(uMainSampler, displaced);\n            totalAlpha += (DIST - curDistance) * color.a;\n        }\n    }\n    color = texture2D(uMainSampler, outTexCoord);\n    float alphaRatio = (totalAlpha / MAX_ALPHA);\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    vec4 innerColor = mix(color, glowColor, innerGlowStrength);\n    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    if (knockout)\n    {\n        float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else\n    {\n        gl_FragColor = innerColor + outerGlowColor;\n    }\n}"},70463:e=>{e.exports="#define SHADER_NAME GRADIENT_FS\n#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))\n#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))\n#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 positionFrom;\nuniform vec2 positionTo;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float alpha;\nuniform int size;\nvarying vec2 outTexCoord;\nfloat gradientNoise(in vec2 uv)\n{\n    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);\n    return fract(magic.z * fract(dot(uv, magic.xy)));\n}\nfloat stepped (in float s, in float scale, in int steps)\n{\n    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;\n}\nvoid main ()\n{\n    vec2 a = positionFrom;\n    vec2 b = positionTo;\n    vec2 ba = b - a;\n    float d = dot(outTexCoord - a, ba) / dot(ba, ba);\n    float t = size > 0 ? stepped(d, 1.0, size) : d;\n    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));\n    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);\n    color = LINEAR_TO_SRGB(color);\n    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;\n}"},50831:e=>{e.exports="#define SHADER_NAME PIXELATE_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform float amount;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    float pixelSize = floor(2.0 + amount);\n    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);\n    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);\n    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);\n    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);\n    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);\n    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);\n    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);\n    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);\n    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);\n    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);\n    gl_FragColor = pixel;\n}"},92595:e=>{e.exports="#define SHADER_NAME SHADOW_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\nuniform vec2 lightPosition;\nuniform vec4 color;\nuniform float decay;\nuniform float power;\nuniform float intensity;\nuniform int samples;\nconst int MAX = 12;\nvoid main ()\n{\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec2 pc = (lightPosition - outTexCoord) * intensity;\n    float shadow = 0.0;\n    float limit = max(float(MAX), float(samples));\n    for (int i = 0; i < MAX; ++i)\n    {\n        if (i >= samples)\n        {\n            break;\n        }\n        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;\n    }\n    float mask = 1.0 - texture.a;\n    gl_FragColor = mix(texture, color, shadow * mask);\n}"},72464:e=>{e.exports="#define SHADER_NAME SHINE_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec2 resolution;\nuniform bool reveal;\nuniform float speed;\nuniform float time;\nuniform float lineWidth;\nuniform float gradient;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n	vec2 uv = gl_FragCoord.xy / resolution.xy;\n    vec4 tex = texture2D(uMainSampler, outTexCoord);\n    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);\n    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);\n    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;\n    float y = uv.x * gradient;\n    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);\n    gl_FragColor = (((s * col1) + (s * col2)) * tex);\n    if (!reveal)\n    {\n        gl_FragColor += tex;\n    }\n}"},39249:e=>{e.exports="#define SHADER_NAME VIGNETTE_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform float radius;\nuniform float strength;\nuniform vec2 position;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 col = vec4(1.0);\n    float d = length(outTexCoord - position);\n    if (d <= radius)\n    {\n        float g = d / radius;\n        g = sin(g * 3.14 * strength);\n    	col = vec4(g * g * g);\n    }\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    gl_FragColor = texture * (1.0 - col);\n}"},2878:e=>{e.exports="#define SHADER_NAME WIPE_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nuniform vec4 config;\nuniform bool reveal;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec2 uv = outTexCoord;\n    vec4 color0;\n    vec4 color1;\n    if (reveal)\n    {\n        color0 = vec4(0);\n        color1 = texture2D(uMainSampler, uv);\n    }\n    else\n    {\n        color0 = texture2D(uMainSampler, uv);\n        color1 = vec4(0);\n    }\n    float distance = config.x;\n    float width = config.y;\n    float direction = config.z;\n    float axis = uv.x;\n    if (config.w == 1.0)\n    {\n        axis = uv.y;\n    }\n    float adjust = mix(width, -width, distance);\n    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);\n    gl_FragColor = mix(color1, color0, value);\n}"},31063:e=>{e.exports="#define SHADER_NAME PHASER_LIGHT_FS\nprecision mediump float;\nstruct Light\n{\n    vec2 position;\n    vec3 color;\n    float intensity;\n    float radius;\n};\nconst int kMaxLights = %LIGHT_COUNT%;\nuniform vec4 uCamera; /* x, y, rotation, zoom */\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uNormSampler;\nuniform vec3 uAmbientLightColor;\nuniform Light uLights[kMaxLights];\nuniform mat3 uInverseRotationMatrix;\nuniform int uLightCount;\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    vec3 finalColor = vec3(0.0, 0.0, 0.0);\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec4 color = texture * texel;\n    if (outTintEffect == 1.0)\n    {\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        color = texel;\n    }\n    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;\n    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));\n    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;\n    for (int index = 0; index < kMaxLights; ++index)\n    {\n        if (index < uLightCount)\n        {\n            Light light = uLights[index];\n            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);\n            vec3 lightNormal = normalize(lightDir);\n            float distToSurf = length(lightDir) * uCamera.w;\n            float diffuseFactor = max(dot(normal, lightNormal), 0.0);\n            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;\n            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);\n            vec3 diffuse = light.color * diffuseFactor;\n            finalColor += (attenuation * diffuse) * light.intensity;\n        }\n    }\n    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);\n    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);\n}"},48247:e=>{e.exports="#define SHADER_NAME PHASER_LINEAR_BLEND_FS\nprecision mediump float;\nuniform sampler2D uMainSampler1;\nuniform sampler2D uMainSampler2;\nuniform float uStrength;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);\n    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);\n    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);\n}"},41214:e=>{e.exports="#define SHADER_NAME PHASER_MESH_FS\nprecision mediump float;\nuniform vec3 uLightPosition;\nuniform vec3 uLightAmbient;\nuniform vec3 uLightDiffuse;\nuniform vec3 uLightSpecular;\nuniform vec3 uFogColor;\nuniform float uFogNear;\nuniform float uFogFar;\nuniform vec3 uMaterialAmbient;\nuniform vec3 uMaterialDiffuse;\nuniform vec3 uMaterialSpecular;\nuniform float uMaterialShine;\nuniform vec3 uCameraPosition;\nuniform sampler2D uTexture;\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvoid main (void)\n{\n    vec4 color = texture2D(uTexture, vTextureCoord);\n    vec3 ambient = uLightAmbient * uMaterialAmbient;\n    vec3 norm = normalize(vNormal);\n    vec3 lightDir = normalize(uLightPosition - vPosition);\n    float diff = max(dot(norm, lightDir), 0.0);\n    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);\n    vec3 viewDir = normalize(uCameraPosition - vPosition);\n    vec3 reflectDir = reflect(-lightDir, norm);\n    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);\n    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);\n    vec3 result = (ambient + diffuse + specular) * color.rgb;\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(uFogNear, uFogFar, depth);\n    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);\n    gl_FragColor.a = color.a;\n}"},39653:e=>{e.exports="#define SHADER_NAME PHASER_MESH_VS\nprecision mediump float;\nattribute vec3 aVertexPosition;\nattribute vec3 aVertexNormal;\nattribute vec2 aTextureCoord;\nuniform mat4 uViewProjectionMatrix;\nuniform mat4 uModelMatrix;\nuniform mat4 uNormalMatrix;\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvoid main ()\n{\n    vTextureCoord = aTextureCoord;\n    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));\n    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));\n    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n}"},62143:e=>{e.exports="#define SHADER_NAME PHASER_MOBILE_FS\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec4 color = texture * texel;\n    if (outTintEffect == 1.0)\n    {\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        color = texel;\n    }\n    gl_FragColor = color;\n}"},47940:e=>{e.exports="#define SHADER_NAME PHASER_MOBILE_VS\nprecision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTexId;\nattribute float inTintEffect;\nattribute vec4 inTint;\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n    outTexCoord = inTexCoord;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}"},98840:e=>{e.exports="#define SHADER_NAME PHASER_MULTI_FS\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform sampler2D uMainSampler[%count%];\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    vec4 texture;\n    %forloop%\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n    vec4 color = texture * texel;\n    if (outTintEffect == 1.0)\n    {\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        color = texel;\n    }\n    gl_FragColor = color;\n}"},44667:e=>{e.exports="#define SHADER_NAME PHASER_MULTI_VS\nprecision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTexId;\nattribute float inTintEffect;\nattribute vec4 inTint;\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n    outTexCoord = inTexCoord;\n    outTexId = inTexId;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}"},4127:e=>{e.exports="#define SHADER_NAME PHASER_POINTLIGHT_FS\nprecision mediump float;\nuniform vec2 uResolution;\nuniform float uCameraZoom;\nvarying vec4 lightPosition;\nvarying vec4 lightColor;\nvarying float lightRadius;\nvarying float lightAttenuation;\nvoid main ()\n{\n    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);\n    float distToSurf = length(center - gl_FragCoord.xy);\n    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);\n    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);\n    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;\n    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);\n}"},89924:e=>{e.exports="#define SHADER_NAME PHASER_POINTLIGHT_VS\nprecision mediump float;\nuniform mat4 uProjectionMatrix;\nattribute vec2 inPosition;\nattribute vec2 inLightPosition;\nattribute vec4 inLightColor;\nattribute float inLightRadius;\nattribute float inLightAttenuation;\nvarying vec4 lightPosition;\nvarying vec4 lightColor;\nvarying float lightRadius;\nvarying float lightAttenuation;\nvoid main ()\n{\n    lightColor = inLightColor;\n    lightRadius = inLightRadius;\n    lightAttenuation = inLightAttenuation;\n    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n}"},27681:e=>{e.exports="#define SHADER_NAME PHASER_POSTFX_FS\nprecision mediump float;\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    gl_FragColor = texture2D(uMainSampler, outTexCoord);\n}"},49627:e=>{e.exports="#define SHADER_NAME PHASER_QUAD_VS\nprecision mediump float;\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nvarying vec2 outFragCoord;\nvarying vec2 outTexCoord;\nvoid main ()\n{\n    outFragCoord = inPosition.xy * 0.5 + 0.5;\n    outTexCoord = inTexCoord;\n    gl_Position = vec4(inPosition, 0, 1);\n}"},45561:e=>{e.exports="#define SHADER_NAME PHASER_SINGLE_FS\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform sampler2D uMainSampler;\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n    vec4 color = texture * texel;\n    if (outTintEffect == 1.0)\n    {\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        color = texel;\n    }\n    gl_FragColor = color;\n}"},60722:e=>{e.exports="#define SHADER_NAME PHASER_SINGLE_VS\nprecision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTexId;\nattribute float inTintEffect;\nattribute vec4 inTint;\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n    outTexCoord = inTexCoord;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}"},89350:(e,t,i)=>{e.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i){this.webGLAttribLocation=-1,this.gl=e,this.program=t,this.name=i,this.createResource()},createResource:function(){if(null===this.program.webGLProgram){this.webGLAttribLocation=-1;return}var e=this.gl;e.isContextLost()||(this.webGLAttribLocation=e.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}})},26128:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r){this.webGLBuffer=null,this.gl=e,this.initialDataOrSize=t,this.bufferType=i,this.bufferUsage=r,this.createResource()},createResource:function(){if(null!==this.initialDataOrSize){var e=this.gl;if(!e.isContextLost()){var t=this.bufferType,i=e.createBuffer();this.webGLBuffer=i,e.bindBuffer(t,this.webGLBuffer),e.bufferData(t,this.initialDataOrSize,this.bufferUsage),e.bindBuffer(t,null)}}},destroy:function(){var e=this.gl;e.isContextLost()||e.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}})},84387:(e,t,i)=>{var r=i(83419),n={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};e.exports=new r({initialize:function(e,t,i,r,n){this.webGLFramebuffer=null,this.gl=e,this.width=t,this.height=i,this.renderTexture=r,this.addDepthStencilBuffer=!!n,this.createResource()},createResource:function(){var e=this.gl;if(!e.isContextLost()){var t=this.renderTexture,i=0,r=e.createFramebuffer();if(this.webGLFramebuffer=r,e.bindFramebuffer(e.FRAMEBUFFER,r),t.isRenderTexture=!0,t.isAlphaPremultiplied=!1,e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.webGLTexture,0),(i=e.checkFramebufferStatus(e.FRAMEBUFFER))!==e.FRAMEBUFFER_COMPLETE)throw Error("Framebuffer status: "+(n[i]||i));if(this.addDepthStencilBuffer){var s=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,s)}e.bindFramebuffer(e.FRAMEBUFFER,null)}},destroy:function(){if(null!==this.webGLFramebuffer){var e=this.gl;if(!e.isContextLost()){e.bindFramebuffer(e.FRAMEBUFFER,this.webGLFramebuffer);var t=e.getFramebufferAttachmentParameter(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);null!==t&&(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.deleteTexture(t));var i=e.getFramebufferAttachmentParameter(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);null!==i&&e.deleteRenderbuffer(i),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}})},1482:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i){this.webGLProgram=null,this.gl=e,this.vertexSource=t,this.fragmentSource=i,this.createResource()},createResource:function(){var e=this.gl;if(!e.isContextLost()){var t=e.createProgram(),i=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,this.vertexSource),e.shaderSource(r,this.fragmentSource),e.compileShader(i),e.compileShader(r);var n="Shader failed:\n";if(!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error("Vertex "+n+e.getShaderInfoLog(i));if(!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error("Fragment "+n+e.getShaderInfoLog(r));if(e.attachShader(t,i),e.attachShader(t,r),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS))throw Error("Link "+n+e.getProgramInfoLog(t));e.useProgram(t),this.webGLProgram=t}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}})},82751:(e,t,i)=>{var r=i(83419),n=i(50030),s=new r({initialize:function(e,t,i,r,n,s,a,o,h,c,l,d,u){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=e,this.mipLevel=t,this.minFilter=i,this.magFilter=r,this.wrapT=n,this.wrapS=s,this.format=a,this.pixels=o,this.width=h,this.height=c,this.pma=null==l||l,this.forceSize=!!d,this.flipY=!!u,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var e=this.gl;if(!e.isContextLost()){if(this.pixels instanceof s){this.webGLTexture=this.pixels.webGLTexture;return}var t=e.createTexture();t.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=t,this._processTexture()}},update:function(e,t,i,r,n,s,a,o,h){0===t||0===i||(this.pixels=e,this.width=t,this.height=i,this.flipY=r,this.wrapS=n,this.wrapT=s,this.minFilter=a,this.magFilter=o,this.format=h,this.gl.isContextLost()||this._processTexture())},_processTexture:function(){var e=this.gl;e.activeTexture(e.TEXTURE0);var t=e.getParameter(e.TEXTURE_BINDING_2D);e.bindTexture(e.TEXTURE_2D,this.webGLTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this.magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.wrapT),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY);var i=this.pixels,r=this.mipLevel,s=this.width,a=this.height,o=this.format,h=!1;if(null==i)e.texImage2D(e.TEXTURE_2D,r,o,s,a,0,o,e.UNSIGNED_BYTE,null),h=n(s,a);else if(i.compressed){s=i.width,a=i.height,h=i.generateMipmap;for(var c=0;c<i.mipmaps.length;c++)e.compressedTexImage2D(e.TEXTURE_2D,c,i.internalFormat,i.mipmaps[c].width,i.mipmaps[c].height,0,i.mipmaps[c].data)}else i instanceof Uint8Array?e.texImage2D(e.TEXTURE_2D,r,o,s,a,0,o,e.UNSIGNED_BYTE,i):(this.forceSize||(s=i.width,a=i.height),e.texImage2D(e.TEXTURE_2D,r,o,o,e.UNSIGNED_BYTE,i)),h=n(s,a);h&&e.generateMipmap(e.TEXTURE_2D),t?e.bindTexture(e.TEXTURE_2D,t):e.bindTexture(e.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(e){this.__SPECTOR_Metadata=e,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=e)}},destroy:function(){null!==this.webGLTexture&&(this.gl.isContextLost()||this.pixels instanceof s||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});e.exports=s},57183:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i){this.webGLUniformLocation=null,this.gl=e,this.program=t,this.name=i,this.createResource()},createResource:function(){if(null===this.program.webGLProgram){this.webGLUniformLocation=null;return}var e=this.gl;e.isContextLost()||(this.webGLUniformLocation=e.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}})},9503:(e,t,i)=>{e.exports={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)}},76531:(e,t,i)=>{var r=i(13560),n=i(83419),s=i(45319),a=i(50792),o=i(97480),h=i(8443),c=i(57811),l=i(74403),d=i(45818),u=i(29747),f=i(87841),p=i(86555),g=i(56583),m=i(26099),v=i(38058);e.exports=new n({Extends:a,initialize:function(e){a.call(this),this.game=e,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var e=this.game;this.canvas=e.canvas,this.fullscreen=e.device.fullscreen;var t=this.scaleMode;t!==r.SCALE_MODE.RESIZE&&t!==r.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(t),t===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),e.events.on(h.PRE_STEP,this.step,this),e.events.once(h.READY,this.refresh,this),e.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(e){this.getParent(e),this.getParentBounds();var t=e.width,i=e.height,n=e.scaleMode,s=e.zoom,a=e.autoRound;if("string"==typeof t)if("%"!==t.substr(-1))t=parseInt(t,10);else{var o=this.parentSize.width;0===o&&(o=window.innerWidth),t=Math.floor(o*(parseInt(t,10)/100))}if("string"==typeof i)if("%"!==i.substr(-1))i=parseInt(i,10);else{var h=this.parentSize.height;0===h&&(h=window.innerHeight),i=Math.floor(h*(parseInt(i,10)/100))}this.scaleMode=n,this.autoRound=a,this.autoCenter=e.autoCenter,this.resizeInterval=e.resizeInterval,a&&(t=Math.floor(t),i=Math.floor(i)),this.gameSize.setSize(t,i),s===r.ZOOM.MAX_ZOOM&&(s=this.getMaxZoom()),this.zoom=s,1!==s&&(this._resetZoom=!0),this.baseSize.setSize(t,i),a&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),e.minWidth>0&&this.displaySize.setMin(e.minWidth*s,e.minHeight*s),e.maxWidth>0&&this.displaySize.setMax(e.maxWidth*s,e.maxHeight*s),this.displaySize.setSize(t,i),(e.snapWidth>0||e.snapHeight>0)&&this.displaySize.setSnap(e.snapWidth,e.snapHeight),this.orientation=d(t,i)},getParent:function(e){var t=e.parent;if(null!==t){if(this.parent=l(t),this.parentIsWindow=this.parent===document.body,e.expandParent&&e.scaleMode!==r.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();(this.parentIsWindow||0===i.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",i=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==i.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}e.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(e.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var e=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=c(!0));var i=t.width,r=t.height;if(e.width!==i||e.height!==r)return e.setSize(i,r),!0;if(this.canvas){var n=this.canvasBounds,s=this.canvas.getBoundingClientRect();if(s.x!==n.x||s.y!==n.y)return!0}return!1},lockOrientation:function(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!t&&t.call(screen,e)},setParentSize:function(e,t){return this.parentSize.setSize(e,t),this.refresh()},setGameSize:function(e,t){var i=this.autoRound;i&&(e=Math.floor(e),t=Math.floor(t));var r=this.width,n=this.height;return this.gameSize.resize(e,t),this.baseSize.resize(e,t),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(e/t),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,n)},resize:function(e,t){var i=this.zoom,r=this.autoRound;r&&(e=Math.floor(e),t=Math.floor(t));var n=this.width,s=this.height;this.gameSize.resize(e,t),this.baseSize.resize(e,t),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(e*i,t*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var a=this.canvas.style,o=e*i,h=t*i;return r&&(o=Math.floor(o),h=Math.floor(h)),(o!==e||h!==t)&&(a.width=o+"px",a.height=h+"px"),this.refresh(n,s)},setZoom:function(e){return this.zoom=e,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.displaySize.setSnap(e,t),this.refresh()},refresh:function(e,t){void 0===e&&(e=this.width),void 0===t&&(t=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var r=this.canvas.style,n=i.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=r.marginLeft,n.marginTop=r.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,e,t),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var e=d(this.width,this.height);e!==this.orientation&&(this.orientation=e,this.emit(o.ORIENTATION_CHANGE,e))}},updateScale:function(){var e=this.canvas.style,t=this.gameSize.width,i=this.gameSize.height,n=this.zoom,a=this.autoRound;if(this.scaleMode===r.SCALE_MODE.NONE)this.displaySize.setSize(t*n,i*n),o=this.displaySize.width,h=this.displaySize.height,a&&(o=Math.floor(o),h=Math.floor(h)),this._resetZoom&&(e.width=o+"px",e.height=h+"px",this._resetZoom=!1);else if(this.scaleMode===r.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),o=this.displaySize.width,h=this.displaySize.height,a&&(o=Math.floor(o),h=Math.floor(h)),this.canvas.width=o,this.canvas.height=h;else if(this.scaleMode===r.SCALE_MODE.EXPAND){var o,h,c,l,d=this.game.config.width,u=this.game.config.height,f=this.parentSize.width,p=this.parentSize.height,g=f/d,m=p/u;g<m?(c=d,l=0!==g?p/g:u):(c=0!==m?f/m:d,l=u);var v=s(c,this.displaySize.minWidth,this.displaySize.maxWidth),y=s(l,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(v,y),this.gameSize.setSize(v,y),a&&(v=Math.floor(v),y=Math.floor(y)),this.canvas.width=v,this.canvas.height=y;var b=v/c*f,x=y/l*p;this.displaySize.setSize(b,x),o=this.displaySize.width,h=this.displaySize.height,a&&(o=Math.floor(o),h=Math.floor(h)),e.width=o+"px",e.height=h+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),o=this.displaySize.width,h=this.displaySize.height,a&&(o=Math.floor(o),h=Math.floor(h)),e.width=o+"px",e.height=h+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){return Math.max(Math.min(g(this.parentSize.width,this.gameSize.width,0,!0),g(this.parentSize.height,this.gameSize.height,0,!0)),1)},updateCenter:function(){var e=this.autoCenter;if(e!==r.CENTER.NO_CENTER){var t=this.canvas,i=t.style,n=t.getBoundingClientRect(),s=n.width,a=n.height,o=Math.floor((this.parentSize.width-s)/2),h=Math.floor((this.parentSize.height-a)/2);e===r.CENTER.CENTER_HORIZONTALLY?h=0:e===r.CENTER.CENTER_VERTICALLY&&(o=0),i.marginLeft=o+"px",i.marginTop=h+"px"}},updateBounds:function(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),e.width=t.width,e.height=t.height},transformX:function(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(e){void 0===e&&(e={navigationUI:"hide"});var t=this.fullscreen;if(!t.available)return void this.emit(o.FULLSCREEN_UNSUPPORTED);if(!t.active){var i=this.getFullscreenTarget();t.keyboard?i[t.request](Element.ALLOW_KEYBOARD_INPUT):i[t.request](e)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(e){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,e)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",this.fullscreenTarget=e,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e),t.removeChild(e)}}},stopFullscreen:function(){var e=this.fullscreen;if(!e.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;e.active&&document[e.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(e){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(e)},startListeners:function(){var e=this,t=this.domlisteners;t.orientationChange=function(){e.updateBounds(),e._checkOrientation=!0,e.dirty=!0,e.refresh()},t.windowResize=function(){e.updateBounds(),e.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",t.orientationChange,!1):window.addEventListener("orientationchange",t.orientationChange,!1),window.addEventListener("resize",t.windowResize,!1),this.fullscreen.available&&(t.fullScreenChange=function(t){return e.onFullScreenChange(t)},t.fullScreenError=function(t){return e.onFullScreenError(t)},["webkit","moz",""].forEach(function(e){document.addEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.addEventListener(e+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(e,t){e instanceof v||(t=e,e=void 0),void 0===t&&(t=new f);var i,r,n=this.baseSize,s=this.parentSize,a=this.canvasBounds,o=this.displayScale,h=a.x>=0?0:-(a.x*o.x),c=a.y>=0?0:-(a.y*o.y);return i=s.width>=a.width?n.width:n.width-(a.width-s.width)*o.x,r=s.height>=a.height?n.height:n.height-(a.height-s.height)*o.y,t.setTo(h,c,i,r),e&&(t.width/=e.zoomX,t.height/=e.zoomY,t.centerX=e.centerX+e.scrollX,t.centerY=e.centerY+e.scrollY),t},step:function(e,t){this.parent&&(this._lastCheck+=t,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var e=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",e.orientationChange,!1):window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1),["webkit","moz",""].forEach(function(t){document.removeEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(t+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}})},64743:e=>{e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:e=>{e.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:e=>{e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:e=>{e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(e,t,i)=>{e.exports={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)}},56139:e=>{e.exports="enterfullscreen"},2336:e=>{e.exports="fullscreenfailed"},47412:e=>{e.exports="fullscreenunsupported"},51452:e=>{e.exports="leavefullscreen"},20666:e=>{e.exports="orientationchange"},47945:e=>{e.exports="resize"},97480:(e,t,i)=>{e.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(e,t,i)=>{var r=i(79291),n=i(13560),s={Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)};s=r(!1,s,n.CENTER),s=r(!1,s,n.ORIENTATION),s=r(!1,s,n.SCALE_MODE),e.exports=s=r(!1,s,n.ZOOM)},27397:(e,t,i)=>{var r=i(95540),n=i(35355);e.exports=function(e){var t=e.game.config.defaultPhysicsSystem,i=r(e.settings,"physics",!1);if(t||i){var s=[];if(t&&s.push(n(t+"Physics")),i)for(var a in i)a=n(a.concat("Physics")),-1===s.indexOf(a)&&s.push(a);return s}}},52106:(e,t,i)=>{var r=i(95540);e.exports=function(e){var t=e.plugins.getDefaultScenePlugins(),i=r(e.settings,"plugins",!1);return Array.isArray(i)?i:t||[]}},87033:e=>{e.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},97482:(e,t,i)=>{var r=i(83419),n=i(2368);e.exports=new r({initialize:function(e){this.sys=new n(this,e),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}})},60903:(e,t,i)=>{var r=i(83419),n=i(89993),s=i(44594),a=i(8443),o=i(35154),h=i(54899),c=i(29747),l=i(97482),d=i(2368);e.exports=new r({initialize:function(e,t){if(this.game=e,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)this._pending.push({key:"default",scene:t[i],autoStart:0===i,data:{}})}e.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){var e,t,i,r,n;if(!this.isBooted){for(this.systemScene=this.createSceneFromInstance("__SYSTEM",new l),this.game.events.emit(a.SYSTEM_READY,this.systemScene,this),e=0;e<this._pending.length;e++)i=(t=this._pending[e]).key,(r=t.scene)instanceof l?n=this.createSceneFromInstance(i,r):"object"==typeof r?n=this.createSceneFromObject(i,r):"function"==typeof r&&(n=this.createSceneFromFunction(i,r)),i=n.sys.settings.key,this.keys[i]=n,this.scenes.push(n),this._data[i]&&(n.sys.settings.data=this._data[i].data,this._data[i].autoStart&&(t.autoStart=!0)),(t.autoStart||n.sys.settings.active)&&this._start.push(i);for(e=0,this._pending.length=0,this._data={},this.isBooted=!0;e<this._start.length;e++)t=this._start[e],this.start(t);this._start.length=0}},processQueue:function(){var e,t,i=this._pending.length,r=this._queue.length;if(0!==i||0!==r){if(i){for(e=0;e<i;e++)t=this._pending[e],this.add(t.key,t.scene,t.autoStart,t.data);for(e=0;e<this._start.length;e++)t=this._start[e],this.start(t);this._start.length=0,this._pending.length=0}for(e=0;e<this._queue.length;e++)this[(t=this._queue[e]).op](t.keyA,t.keyB,t.data);this._queue.length=0}},add:function(e,t,i,r){var n;return(void 0===i&&(i=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted)?(this._pending.push({key:e,scene:t,autoStart:i,data:r}),this.isBooted||(this._data[e]={data:r}),null):(e=this.getKey(e,t),t instanceof l?n=this.createSceneFromInstance(e,t):"object"==typeof t?(t.key=e,n=this.createSceneFromObject(e,t)):"function"==typeof t&&(n=this.createSceneFromFunction(e,t)),n.sys.settings.data=r,e=n.sys.settings.key,this.keys[e]=n,this.scenes.push(n),(i||n.sys.settings.active)&&(this._pending.length?this._start.push(e):this.start(e)),n)},remove:function(e){if(this.isProcessing)return this.queueOp("remove",e);var t=this.getScene(e);if(!t||t.sys.isTransitioning())return this;var i=this.scenes.indexOf(t),r=t.sys.settings.key;return i>-1&&(delete this.keys[r],this.scenes.splice(i,1),this._start.indexOf(r)>-1&&(i=this._start.indexOf(r),this._start.splice(i,1)),t.sys.destroy()),this},bootScene:function(e){var t,i=e.sys,r=i.settings;i.sceneUpdate=c,e.init&&(e.init.call(e,r.data),r.status=n.INIT,r.isTransition&&i.events.emit(s.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),i.load&&(t=i.load).reset(),t&&e.preload?(e.preload.call(e),r.status=n.LOADING,t.once(h.COMPLETE,this.loadComplete,this),t.start()):this.create(e)},loadComplete:function(e){this.create(e.scene)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;i>=0;i--){var r=this.scenes[i].sys;r.settings.status>n.START&&r.settings.status<=n.RUNNING&&r.step(e,t),r.scenePlugin&&r.scenePlugin._target&&r.scenePlugin.step(e,t)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=n.LOADING&&i.settings.status<n.SLEEPING&&i.render(e)}this.isProcessing=!1},create:function(e){var t=e.sys,i=t.settings;e.create&&(i.status=n.CREATING,e.create.call(e,i.data),i.status===n.DESTROYED)||(i.isTransition&&t.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),e.update&&(t.sceneUpdate=e.update),i.status=n.RUNNING,t.events.emit(s.CREATE,e))},createSceneFromFunction:function(e,t){var i=new t;if(!(i instanceof l))return i.sys=new d(i),i.sys.settings.key=e,i.sys.init(this.game),i;var r=i.sys.settings.key;if(""!==r&&(e=r),this.keys.hasOwnProperty(e))throw Error("Cannot add Scene with duplicate key: "+e);return this.createSceneFromInstance(e,i)},createSceneFromInstance:function(e,t){return""===t.sys.settings.key&&(t.sys.settings.key=e),t.sys.init(this.game),t},createSceneFromObject:function(e,t){var i=new l(t),r=i.sys.settings.key;""!==r?e=r:i.sys.settings.key=e,i.sys.init(this.game);for(var n=["init","preload","create","update","render"],s=0;s<n.length;s++){var a=o(t,n[s],null);a&&(i[n[s]]=a)}if(t.hasOwnProperty("extend")){for(var h in t.extend)if(t.extend.hasOwnProperty(h)){var c=t.extend[h];"data"===h&&i.hasOwnProperty("data")&&"object"==typeof c?i.data.merge(c):"sys"!==h&&(i[h]=c)}}return i},getKey:function(e,t){if(e||(e="default"),"function"==typeof t||(t instanceof l?e=t.sys.settings.key:"object"==typeof t&&t.hasOwnProperty("key")&&(e=t.key),!this.keys.hasOwnProperty(e)))return e;throw Error("Cannot add Scene with duplicate key: "+e)},getScenes:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);for(var i=[],r=this.scenes,n=0;n<r.length;n++){var s=r[n];s&&(!e||e&&s.sys.isActive())&&i.push(s)}return t?i.reverse():i},getScene:function(e){if("string"==typeof e){if(this.keys[e])return this.keys[e]}else for(var t=0;t<this.scenes.length;t++)if(e===this.scenes[t])return e;return null},isActive:function(e){var t=this.getScene(e);return t?t.sys.isActive():null},isPaused:function(e){var t=this.getScene(e);return t?t.sys.isPaused():null},isVisible:function(e){var t=this.getScene(e);return t?t.sys.isVisible():null},isSleeping:function(e){var t=this.getScene(e);return t?t.sys.isSleeping():null},pause:function(e,t){var i=this.getScene(e);return i&&i.sys.pause(t),this},resume:function(e,t){var i=this.getScene(e);return i&&i.sys.resume(t),this},sleep:function(e,t){var i=this.getScene(e);return i&&!i.sys.isTransitioning()&&i.sys.sleep(t),this},wake:function(e,t){var i=this.getScene(e);return i&&i.sys.wake(t),this},run:function(e,t){var i=this.getScene(e);if(!i){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===e){this.queueOp("start",e,t);break}return this}i.sys.isSleeping()?i.sys.wake(t):i.sys.isPaused()?i.sys.resume(t):this.start(e,t)},start:function(e,t){if(!this.isBooted)return this._data[e]={autoStart:!0,data:t},this;var i,r=this.getScene(e);if(!r)return console.warn("Scene key not found: "+e),this;var s=r.sys,a=s.settings.status;if(a>=n.START&&a<=n.CREATING)return this;if(a>=n.RUNNING&&a<=n.SLEEPING)s.shutdown(),s.sceneUpdate=c,s.start(t);else if(s.sceneUpdate=c,s.start(t),s.load&&(i=s.load),i&&s.settings.hasOwnProperty("pack")&&(i.reset(),i.addPack({payload:s.settings.pack})))return s.settings.status=n.LOADING,i.once(h.COMPLETE,this.payloadComplete,this),i.start(),this;return this.bootScene(r),this},stop:function(e,t){var i=this.getScene(e);if(i&&!i.sys.isTransitioning()&&i.sys.settings.status!==n.SHUTDOWN){var r=i.sys.load;r&&(r.off(h.COMPLETE,this.loadComplete,this),r.off(h.COMPLETE,this.payloadComplete,this)),i.sys.shutdown(t)}return this},switch:function(e,t,i){var r=this.getScene(e),n=this.getScene(t);return r&&n&&r!==n&&(this.sleep(e),this.isSleeping(t)?this.wake(t,i):this.start(t,i)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function(e){if(this.isProcessing)return this.queueOp("bringToTop",e);var t=this.getIndex(e),i=this.scenes;if(-1!==t&&t<i.length){var r=this.getScene(e);i.splice(t,1),i.push(r)}return this},sendToBack:function(e){if(this.isProcessing)return this.queueOp("sendToBack",e);var t=this.getIndex(e);if(-1!==t&&t>0){var i=this.getScene(e);this.scenes.splice(t,1),this.scenes.unshift(i)}return this},moveDown:function(e){if(this.isProcessing)return this.queueOp("moveDown",e);var t=this.getIndex(e);if(t>0){var i=t-1,r=this.getScene(e),n=this.getAt(i);this.scenes[t]=n,this.scenes[i]=r}return this},moveUp:function(e){if(this.isProcessing)return this.queueOp("moveUp",e);var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1,r=this.getScene(e),n=this.getAt(i);this.scenes[t]=n,this.scenes[i]=r}return this},moveAbove:function(e,t){if(e===t)return this;if(this.isProcessing)return this.queueOp("moveAbove",e,t);var i=this.getIndex(e),r=this.getIndex(t);if(-1!==i&&-1!==r&&r<i){var n=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(i+(r>i),0,n)}return this},moveBelow:function(e,t){if(e===t)return this;if(this.isProcessing)return this.queueOp("moveBelow",e,t);var i=this.getIndex(e),r=this.getIndex(t);if(-1!==i&&-1!==r&&r>i){var n=this.getAt(r);this.scenes.splice(r,1),0===i?this.scenes.unshift(n):this.scenes.splice(i-(r<i),0,n)}return this},queueOp:function(e,t,i,r){return this._queue.push({op:e,keyA:t,keyB:i,data:r}),this},swapPosition:function(e,t){if(e===t)return this;if(this.isProcessing)return this.queueOp("swapPosition",e,t);var i=this.getIndex(e),r=this.getIndex(t);if(i!==r&&-1!==i&&-1!==r){var n=this.getAt(i);this.scenes[i]=this.scenes[r],this.scenes[r]=n}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys,s=r.settings.visible&&(r.settings.status===n.RUNNING||r.settings.status===n.PAUSED)?"[*] ":"[-] ";s+=r.settings.key+" ("+t[r.settings.status]+")",e.push(s)}console.log(e.join("\n"))},destroy:function(){for(var e=0;e<this.scenes.length;e++)this.scenes[e].sys.destroy();this.systemScene.sys.destroy(),this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}})},52209:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(44594),a=i(95540),o=i(37277),h=new n({initialize:function(e){this.scene=e,this.systems=e.sys,this.settings=e.sys.settings,this.key=e.sys.settings.key,this.manager=e.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,e.sys.events.once(s.BOOT,this.boot,this),e.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",e,t),this},restart:function(e){var t=this.key;return this.manager.queueOp("stop",t),this.manager.queueOp("start",t,e),this},transition:function(e){void 0===e&&(e={});var t=a(e,"target",!1),i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i))return!1;var r=a(e,"duration",1e3);this._elapsed=0,this._target=i,this._duration=r,this._willSleep=a(e,"sleep",!1),this._willRemove=a(e,"remove",!1);var n=a(e,"onUpdate",null);n&&(this._onUpdate=n,this._onUpdateScope=a(e,"onUpdateScope",this.scene));var o=a(e,"allowInput",!1);this.settings.transitionAllowInput=o;var h=i.sys.settings;h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=r,h.transitionAllowInput=o,a(e,"moveAbove",!1)?this.manager.moveAbove(this.key,t):a(e,"moveBelow",!1)&&this.manager.moveBelow(this.key,t),i.sys.isSleeping()?i.sys.wake(a(e,"data")):this.manager.start(t,a(e,"data"));var c=a(e,"onStart",null),l=a(e,"onStartScope",this.scene);return c&&c.call(l,this.scene,i,r),this.systems.events.emit(s.TRANSITION_OUT,i,r),!0},checkValidTransition:function(e){return!(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning())},step:function(e,t){this._elapsed+=t,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var e=this._target.sys,t=this._target.sys.settings;e.events.emit(s.TRANSITION_COMPLETE,this.scene),t.isTransition=!1,t.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(e,t,i,r){return this.manager.add(e,t,i,r)},launch:function(e,t){return e&&e!==this.key&&this.manager.queueOp("start",e,t),this},run:function(e,t){return e&&e!==this.key&&this.manager.queueOp("run",e,t),this},pause:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("pause",e,t),this},resume:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("resume",e,t),this},sleep:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("sleep",e,t),this},wake:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("wake",e,t),this},switch:function(e,t){return e!==this.key&&this.manager.queueOp("switch",this.key,e,t),this},stop:function(e,t){return void 0===e&&(e=this.key),this.manager.queueOp("stop",e,t),this},setActive:function(e,t,i){void 0===t&&(t=this.key);var r=this.manager.getScene(t);return r&&r.sys.setActive(e,i),this},setVisible:function(e,t){void 0===t&&(t=this.key);var i=this.manager.getScene(t);return i&&i.sys.setVisible(e),this},isSleeping:function(e){return void 0===e&&(e=this.key),this.manager.isSleeping(e)},isActive:function(e){return void 0===e&&(e=this.key),this.manager.isActive(e)},isPaused:function(e){return void 0===e&&(e=this.key),this.manager.isPaused(e)},isVisible:function(e){return void 0===e&&(e=this.key),this.manager.isVisible(e)},swapPosition:function(e,t){return void 0===t&&(t=this.key),e!==t&&this.manager.swapPosition(e,t),this},moveAbove:function(e,t){return void 0===t&&(t=this.key),e!==t&&this.manager.moveAbove(e,t),this},moveBelow:function(e,t){return void 0===t&&(t=this.key),e!==t&&this.manager.moveBelow(e,t),this},remove:function(e){return void 0===e&&(e=this.key),this.manager.remove(e),this},moveUp:function(e){return void 0===e&&(e=this.key),this.manager.moveUp(e),this},moveDown:function(e){return void 0===e&&(e=this.key),this.manager.moveDown(e),this},bringToTop:function(e){return void 0===e&&(e=this.key),this.manager.bringToTop(e),this},sendToBack:function(e){return void 0===e&&(e=this.key),this.manager.sendToBack(e),this},get:function(e){return this.manager.getScene(e)},getStatus:function(e){var t=this.manager.getScene(e);if(t)return t.sys.getStatus()},getIndex:function(e){return void 0===e&&(e=this.key),this.manager.getIndex(e)},shutdown:function(){var e=this.systems.events;e.off(s.SHUTDOWN,this.shutdown,this),e.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",h,"scenePlugin"),e.exports=h},55681:(e,t,i)=>{var r=i(89993),n=i(35154),s=i(46975),a=i(87033);e.exports={create:function(e){return"string"==typeof e?e={key:e}:void 0===e&&(e={}),{status:r.PENDING,key:n(e,"key",""),active:n(e,"active",!1),visible:n(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(e,"pack",!1),cameras:n(e,"cameras",null),map:n(e,"map",s(a,n(e,"mapAdd",{}))),physics:n(e,"physics",{}),loader:n(e,"loader",{}),plugins:n(e,"plugins",!1),input:n(e,"input",{})}}}},2368:(e,t,i)=>{var r=i(83419),n=i(89993),s=i(42363),a=i(44594),o=i(27397),h=i(52106),c=i(29747),l=i(55681);e.exports=new r({initialize:function(e,t){this.scene=e,this.game,this.renderer,this.config=t,this.settings=l.create(t),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(e){this.settings.status=n.INIT,this.sceneUpdate=c,this.game=e,this.renderer=e.renderer,this.canvas=e.canvas,this.context=e.context;var t=e.plugins;this.plugins=t,t.addToScene(this,s.Global,[s.CoreScene,h(this),o(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(e,t){var i=this.events;i.emit(a.PRE_UPDATE,e,t),i.emit(a.UPDATE,e,t),this.sceneUpdate.call(this.scene,e,t),i.emit(a.POST_UPDATE,e,t)},render:function(e){var t=this.displayList;t.depthSort(),this.events.emit(a.PRE_RENDER,e),this.cameras.render(e,t),this.events.emit(a.RENDER,e)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(e){var t=this.settings,i=this.getStatus();return i!==n.CREATING&&i!==n.RUNNING?console.warn("Cannot pause non-running Scene",t.key):this.settings.active&&(t.status=n.PAUSED,t.active=!1,this.events.emit(a.PAUSE,this,e)),this},resume:function(e){var t=this.events,i=this.settings;return this.settings.active||(i.status=n.RUNNING,i.active=!0,t.emit(a.RESUME,this,e)),this},sleep:function(e){var t=this.settings,i=this.getStatus();return i!==n.CREATING&&i!==n.RUNNING?console.warn("Cannot sleep non-running Scene",t.key):(t.status=n.SLEEPING,t.active=!1,t.visible=!1,this.events.emit(a.SLEEP,this,e)),this},wake:function(e){var t=this.events,i=this.settings;return i.status=n.RUNNING,i.active=!0,i.visible=!0,t.emit(a.WAKE,this,e),i.isTransition&&t.emit(a.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var e=this.settings.status;return e>n.PENDING&&e<=n.RUNNING},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(e){return this.settings.visible=e,this},setActive:function(e,t){return e?this.resume(t):this.pause(t)},start:function(e){var t=this.events,i=this.settings;e&&(i.data=e),i.status=n.START,i.active=!0,i.visible=!0,t.emit(a.START,this),t.emit(a.READY,this,e)},shutdown:function(e){var t=this.events,i=this.settings;t.off(a.TRANSITION_INIT),t.off(a.TRANSITION_START),t.off(a.TRANSITION_COMPLETE),t.off(a.TRANSITION_OUT),i.status=n.SHUTDOWN,i.active=!1,i.visible=!1,t.emit(a.SHUTDOWN,this,e)},destroy:function(){var e=this.events,t=this.settings;t.status=n.DESTROYED,t.active=!1,t.visible=!1,e.emit(a.DESTROY,this),e.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<i.length;r++)this[i[r]]=null}})},89993:e=>{e.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},69830:e=>{e.exports="addedtoscene"},7919:e=>{e.exports="boot"},46763:e=>{e.exports="create"},11763:e=>{e.exports="destroy"},71555:e=>{e.exports="pause"},36735:e=>{e.exports="postupdate"},3809:e=>{e.exports="prerender"},90716:e=>{e.exports="preupdate"},58262:e=>{e.exports="ready"},91633:e=>{e.exports="removedfromscene"},10319:e=>{e.exports="render"},87132:e=>{e.exports="resume"},81961:e=>{e.exports="shutdown"},90194:e=>{e.exports="sleep"},6265:e=>{e.exports="start"},33178:e=>{e.exports="transitioncomplete"},43063:e=>{e.exports="transitioninit"},11259:e=>{e.exports="transitionout"},61611:e=>{e.exports="transitionstart"},45209:e=>{e.exports="transitionwake"},22966:e=>{e.exports="update"},21747:e=>{e.exports="wake"},44594:(e,t,i)=>{e.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(e,t,i)=>{var r=i(89993),n=i(79291),s={Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)};e.exports=s=n(!1,s,r)},30341:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(14463),a=i(79291);e.exports=new r({Extends:n,initialize:function(e,t,i){n.call(this),this.manager=e,this.key=t,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(e){return!!e&&!!e.name&&"string"==typeof e.name&&(this.markers[e.name]?(console.error("addMarker "+e.name+" already exists in Sound"),!1):(e=a(!0,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},e),this.markers[e.name]=e,!0))},updateMarker:function(e){return!!e&&!!e.name&&"string"==typeof e.name&&(this.markers[e.name]?(this.markers[e.name]=a(!0,this.markers[e.name],e),!0):(console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key),!1))},removeMarker:function(e){var t=this.markers[e];return t?(this.markers[e]=null,t):null},play:function(e,t){if(void 0===e&&(e=""),"object"==typeof e&&(t=e,e=""),"string"!=typeof e)return!1;if(e){if(!this.markers[e])return console.warn("Marker: "+e+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[e],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=a(this.currentConfig,t),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!this.isPaused&&!!this.isPlaying&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!!this.isPaused&&!this.isPlaying&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return(!!this.isPaused||!!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i(29747),calculateRate:function(){var e=Math.pow(1.0005777895065548,this.currentConfig.detune+this.manager.detune);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.stop(),this.emit(s.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}})},85034:(e,t,i)=>{var r=i(83419),n=i(41786),s=i(50792),a=i(14463),o=i(8443),h=i(46710),c=i(58731),l=i(29747),d=i(26099);e.exports=new r({Extends:s,initialize:function(e){s.call(this),this.game=e,this.jsonCache=e.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new d;var t=e.events;t.on(o.BLUR,this.onGameBlur,this),t.on(o.FOCUS,this.onGameFocus,this),t.on(o.PRE_STEP,this.update,this),t.once(o.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(e,t){void 0===t&&(t={});var i=this.add(e,t);for(var r in i.spritemap=this.jsonCache.get(e).spritemap,i.spritemap)if(i.spritemap.hasOwnProperty(r)){var s=n(t),a=i.spritemap[r];s.loop=!!a.hasOwnProperty("loop")&&a.loop,i.addMarker({name:r,start:a.start,duration:a.end-a.start,config:s})}return i},get:function(e){return c(this.sounds,"key",e)},getAll:function(e){return e?h(this.sounds,"key",e):h(this.sounds)},getAllPlaying:function(){return h(this.sounds,"isPlaying",!0)},play:function(e,t){var i=this.add(e);return(i.once(a.COMPLETE,i.destroy,i),t)?t.name?(i.addMarker(t),i.play(t.name)):i.play(t):i.play()},playAudioSprite:function(e,t,i){var r=this.addAudioSprite(e);return r.once(a.COMPLETE,r.destroy,r),r.play(t,i)},remove:function(e){var t=this.sounds.indexOf(e);return -1!==t&&(e.destroy(),this.sounds.splice(t,1),!0)},removeAll:function(){this.sounds.forEach(function(e){e.destroy()}),this.sounds.length=0},removeByKey:function(e){for(var t=0,i=this.sounds.length-1;i>=0;i--){var r=this.sounds[i];r.key===e&&(r.destroy(),this.sounds.splice(i,1),t++)}return t},pauseAll:function(){this.forEachActiveSound(function(e){e.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(e){e.resume()}),this.emit(a.RESUME_ALL,this)},setListenerPosition:l,stopAll:function(){this.forEachActiveSound(function(e){e.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(e){var t=0;return this.getAll(e).forEach(function(e){e.stop()&&t++}),t},isPlaying:function(e){var t,i=this.sounds.length-1;if(void 0===e){for(;i>=0;i--)if((t=this.sounds[i]).isPlaying)return!0}else for(;i>=0;i--)if((t=this.sounds[i]).key===e&&t.isPlaying)return!0;return!1},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(e,t){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var i=this.sounds.length-1;i>=0;i--)this.sounds[i].pendingRemove&&this.sounds.splice(i,1);this.sounds.forEach(function(i){i.update(e,t)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(e,t){var i=this;this.sounds.forEach(function(r,n){r&&!r.pendingRemove&&e.call(t||i,r,n,i.sounds)})},setRate:function(e){return this.rate=e,this},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.forEachActiveSound(function(e){e.calculateRate()}),this.emit(a.GLOBAL_RATE,this,e)}},setDetune:function(e){return this.detune=e,this},detune:{get:function(){return this._detune},set:function(e){this._detune=e,this.forEachActiveSound(function(e){e.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,e)}}})},14747:(e,t,i)=>{var r=i(33684),n=i(25960),s=i(57490);e.exports={create:function(e){var t=e.config.audio,i=e.device.audio;return!t.noAudio&&(i.webAudio||i.audioData)?i.webAudio&&!t.disableWebAudio?new s(e):new r(e):new n(e)}}},19723:e=>{e.exports="complete"},98882:e=>{e.exports="decodedall"},57506:e=>{e.exports="decoded"},73146:e=>{e.exports="destroy"},11305:e=>{e.exports="detune"},40577:e=>{e.exports="detune"},30333:e=>{e.exports="mute"},20394:e=>{e.exports="rate"},21802:e=>{e.exports="volume"},1299:e=>{e.exports="looped"},99190:e=>{e.exports="loop"},97125:e=>{e.exports="mute"},89259:e=>{e.exports="pan"},79986:e=>{e.exports="pauseall"},17586:e=>{e.exports="pause"},19618:e=>{e.exports="play"},42306:e=>{e.exports="rate"},10387:e=>{e.exports="resumeall"},48959:e=>{e.exports="resume"},9960:e=>{e.exports="seek"},19180:e=>{e.exports="stopall"},98328:e=>{e.exports="stop"},50401:e=>{e.exports="unlocked"},52498:e=>{e.exports="volume"},14463:(e,t,i)=>{e.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(e,t,i)=>{var r=i(30341),n=i(83419),s=i(14463),a=i(45319);e.exports=new n({Extends:r,initialize:function(e,t,i){if(void 0===i&&(i={}),this.tags=e.game.cache.audio.get(t),!this.tags)throw Error('No cached audio asset with key "'+t);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,e,t,i)},play:function(e,t){return!this.manager.isLocked(this,"play",[e,t])&&!!r.prototype.play.call(this,e,t)&&!!this.pickAndPlayAudioTag()&&(this.emit(s.PLAY,this),!0)},pause:function(){return!this.manager.isLocked(this,"pause")&&!(this.startTime>0)&&!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),!0)},resume:function(){return!this.manager.isLocked(this,"resume")&&!(this.startTime>0)&&!!r.prototype.resume.call(this)&&!!this.pickAndPlayAudioTag()&&(this.emit(s.RESUME,this),!0)},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,t=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=i,this.audio.currentTime=i,this.applyConfig(),0===t?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*t,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var t=this.tags[e];if("false"===t.dataset.used)return t.dataset.used="true",this.audio=t,!0}if(!this.manager.override)return!1;var i=[];this.manager.forEachActiveSound(function(e){e.key===this.key&&e.audio&&i.push(e)},this),i.sort(function(e,t){return e.loop===t.loop?t.seek/t.duration-e.seek/e.duration:e.loop?1:-1});var r=i[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(e){console.warn(e)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var t=this.currentMarker?this.currentMarker.start:0,i=t+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=i-this.manager.loopEndOffset?(this.audio.currentTime=t+Math.max(0,r-i),r=this.audio.currentTime):r<t&&(this.audio.currentTime+=t,r=this.audio.currentTime),r<this.previousTime&&this.emit(s.LOOPED,this);else if(r>=i){this.reset(),this.stopAndReleaseAudioTag(),this.emit(s.COMPLETE,this);return}this.previousTime=r}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,this.manager.isLocked(this,"mute",e)||(this.updateMute(),this.emit(s.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,this.manager.isLocked(this,"volume",e)||(this.updateVolume(),this.emit(s.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.manager.isLocked(this,s.RATE,e)||(this.calculateRate(),this.emit(s.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.manager.isLocked(this,s.DETUNE,e)||(this.calculateRate(),this.emit(s.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||!(this.startTime>0)&&(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(s.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.manager.isLocked(this,"loop",e)||(this.audio&&(this.audio.loop=e),this.emit(s.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(s.PAN,this,e)}},setPan:function(e){return this.pan=e,this}})},33684:(e,t,i)=>{var r=i(85034),n=i(83419),s=i(14463),a=i(64895);e.exports=new n({Extends:r,initialize:function(e){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,e)},add:function(e,t){var i=new a(this,e,t);return this.sounds.push(i),i},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(t,i){for(var r=0;r<i.length;r++)if("true"===i[r].dataset.locked)return e.locked=!0,!1;return!0}),this.locked){var t=!1,i=function(){t=!0},r=function(){if(t){t=!1;return}document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",r);var n=[];if(e.game.cache.audio.entries.each(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];"true"===r.dataset.locked&&n.push(r)}return!0}),0!==n.length){var s=n[n.length-1];s.oncanplaythrough=function(){s.oncanplaythrough=null,n.forEach(function(e){e.dataset.locked="false"}),e.unlocked=!0},n.forEach(function(e){e.load()})}};this.once(s.UNLOCKED,function(){for(this.forEachActiveSound(function(e){null===e.currentMarker&&0===e.duration&&(e.duration=e.tags[0].duration),e.totalDuration=e.tags[0].duration});this.lockedActionsQueue.length;){var e=this.lockedActionsQueue.shift();e.sound[e.prop].apply?e.sound[e.prop].apply(e.sound,e.value||[]):e.sound[e.prop]=e.value}},this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,t,i){return"true"===e.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:e,prop:t,value:i}),!0)},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(e){e.updateMute()}),this.emit(s.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(e){e.updateVolume()}),this.emit(s.GLOBAL_VOLUME,this,e)}}})},23717:(e,t,i)=>{e.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(e,t,i)=>{var r=i(30341),n=i(83419),s=i(50792),a=i(79291),o=i(29747),h=function(){return!1},c=function(){return null},l=function(){return this};e.exports=new n({Extends:s,initialize:function(e,t,i){void 0===i&&(i={}),s.call(this),this.manager=e,this.key=t,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:c,play:h,pause:h,resume:h,stop:h,setMute:l,setVolume:l,setRate:l,setDetune:l,setSeek:l,setLoop:l,setPan:l,applyConfig:c,resetConfig:c,update:o,calculateRate:c,destroy:function(){r.prototype.destroy.call(this)}})},25960:(e,t,i)=>{var r=i(85034),n=i(83419),s=i(50792),a=i(4603),o=i(29747);e.exports=new n({Extends:s,initialize:function(e){s.call(this),this.game=e,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var i=new a(this,e,t);return this.sounds.push(i),i},addAudioSprite:function(e,t){var i=this.add(e,t);return i.spritemap={},i},get:function(e){return r.prototype.get.call(this,e)},getAll:function(e){return r.prototype.getAll.call(this,e)},play:function(e,t){return!1},playAudioSprite:function(e,t,i){return!1},remove:function(e){return r.prototype.remove.call(this,e)},removeAll:function(){return r.prototype.removeAll.call(this)},removeByKey:function(e){return r.prototype.removeByKey.call(this,e)},stopByKey:function(e){return r.prototype.stopByKey.call(this,e)},onBlur:o,onFocus:o,onGameBlur:o,onGameFocus:o,pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,unlock:o,forEachActiveSound:function(e,t){r.prototype.forEachActiveSound.call(this,e,t)},destroy:function(){r.prototype.destroy.call(this)}})},71741:(e,t,i)=>{var r=i(30341),n=i(83419),s=i(14463),a=i(95540);e.exports=new n({Extends:r,initialize:function(e,t,i){if(void 0===i&&(i={}),this.audioBuffer=e.game.cache.audio.get(t),!this.audioBuffer)throw Error('Audio key "'+t+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=e.context.createGain(),this.volumeNode=e.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),e.context.createPanner&&(this.spatialNode=e.context.createPanner(),this.volumeNode.connect(this.spatialNode)),e.context.createStereoPanner?(this.pannerNode=e.context.createStereoPanner(),e.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(e.destination)):e.context.createPanner?this.spatialNode.connect(e.destination):this.volumeNode.connect(e.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,e,t,i)},play:function(e,t){return!!r.prototype.play.call(this,e,t)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),!0)},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&!!r.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(s.RESUME,this),!0)},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var e=this.currentConfig.seek,t=this.currentConfig.delay,i=this.manager.context.currentTime+t,r=(this.currentMarker?this.currentMarker.start:0)+e,n=this.duration-e;this.playTime=i-e,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,r),Math.max(0,n)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),t=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function(){var e=this,t=this.manager.context.createBufferSource();return t.buffer=this.audioBuffer,t.connect(this.muteNode),t.onended=function(t){var i=t.target;(i===e.source||i===e.loopSource)&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},t},stopAndRemoveBufferSource:function(){if(this.source){var e=this.source;this.source=null,e.stop(),e.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var e=this.currentConfig.source;if(e&&this.manager.context.createPanner){var t=this.spatialNode;t.panningModel=a(e,"panningModel","equalpower"),t.distanceModel=a(e,"distanceModel","inverse"),t.orientationX.value=a(e,"orientationX",0),t.orientationY.value=a(e,"orientationY",0),t.orientationZ.value=a(e,"orientationZ",-1),t.refDistance=a(e,"refDistance",1),t.maxDistance=a(e,"maxDistance",1e4),t.rolloffFactor=a(e,"rolloffFactor",1),t.coneInnerAngle=a(e,"coneInnerAngle",360),t.coneOuterAngle=a(e,"coneOuterAngle",0),t.coneOuterGain=a(e,"coneOuterGain",0),this.spatialSource=a(e,"follow",null),this.spatialSource||(t.positionX.value=a(e,"x",0),t.positionY.value=a(e,"y",0),t.positionZ.value=a(e,"z",0))}r.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(e){this.spatialNode&&(this.spatialNode.positionX.value=e)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(e){this.spatialNode&&(this.spatialNode.positionY.value=e)}},update:function(){if(this.isPlaying&&this.spatialSource){var e=a(this.spatialSource,"x",null),t=a(this.spatialSource,"y",null);e&&e!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=e),t&&t!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=t)}this.hasEnded?(r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){this.pendingRemove||(r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){r.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,t=0;t<this.rateUpdates.length;t++)e+=((t<this.rateUpdates.length-1?this.rateUpdates[t+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[t].time)*this.rateUpdates[t].rate;return e},getLoopTime:function(){for(var e=0,t=0;t<this.rateUpdates.length-1;t++)e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-e)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(s.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(s.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(+!e,0),this.emit(s.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(s.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){!(this.manager.context.currentTime<this.startTime)&&(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(s.PAN,this,e)}},setPan:function(e){return this.pan=e,this}})},57490:(e,t,i)=>{var r=i(53134),n=i(85034),s=i(83419),a=i(14463),o=i(8443),h=i(71741),c=i(95540);e.exports=new s({Extends:n,initialize:function(e){this.context=this.createAudioContext(e),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state,n.call(this,e),this.locked&&(e.isBooted?this.unlock():e.events.once(o.BOOT,this.unlock,this)),e.events.on(o.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var e=this.context;window.setTimeout(function(){e&&(e.suspend(),e.resume())},100)},createAudioContext:function(e){var t=e.config.audio;return t.context?(t.context.resume(),t.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(e){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=e,this.masterMuteNode=e.createGain(),this.masterVolumeNode=e.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(e.destination),this.destination=this.masterMuteNode,this},add:function(e,t){var i=new h(this,e,t);return this.sounds.push(i),i},decodeAudio:function(e,t){for(var i=Array.isArray(e)?e:[{key:e,data:t}],n=this.game.cache.audio,s=i.length,o=0;o<i.length;o++){var h=i[o],c=h.key,l=h.data;"string"==typeof l&&(l=r(l));var d=(function(e,t){n.add(e,t),this.emit(a.DECODED,e),0==--s&&this.emit(a.DECODED_ALL)}).bind(this,c),u=(function(e,t){console.error("Error decoding audio: "+e+" - ",t?t.message:""),0==--s&&this.emit(a.DECODED_ALL)}).bind(this,c);this.context.decodeAudioData(l,d,u)}},setListenerPosition:function(e,t){return void 0===e&&(e=this.game.scale.width/2),void 0===t&&(t=this.game.scale.height/2),this.listenerPosition.set(e,t),this},unlock:function(){var e=this,t=document.body,i=function i(){if(e.context&&t){var r=t.removeEventListener.bind(t);e.context.resume().then(function(){r("touchstart",i),r("touchend",i),r("mousedown",i),r("mouseup",i),r("keydown",i),e.unlocked=!0},function(){r("touchstart",i),r("touchend",i),r("mousedown",i),r("mouseup",i),r("keydown",i)})}};t&&(t.addEventListener("touchstart",i,!1),t.addEventListener("touchend",i,!1),t.addEventListener("mousedown",i,!1),t.addEventListener("mouseup",i,!1),t.addEventListener("keydown",i,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var e=this.context;e&&!this.locked&&("suspended"===e.state||"interrupted"===e.state)&&e.resume()},update:function(e,t){var i=this.context.listener,r=c(this.listenerPosition,"x",null),s=c(this.listenerPosition,"y",null);if(i&&void 0!==i.positionX)r&&r!==this._spatialx&&(this._spatialx=i.positionX.value=r),s&&s!==this._spatialy&&(this._spatialy=i.positionY.value=s);else if(i){r&&r!==this._spatialx&&(this._spatialx=r),s&&s!==this._spatialy&&(this._spatialy=s);var a=c(i,"z",0);i.setPosition(this._spatialx||0,this._spatialy||0,a)}n.prototype.update.call(this,e,t),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var e=this;this.context.close().then(function(){e.context=null})}this.game.events.off(o.VISIBLE,this.onGameVisible,this),n.prototype.destroy.call(this)},setMute:function(e){return this.mute=e,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(e){this.masterMuteNode.gain.setValueAtTime(+!e,0),this.emit(a.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(e){this.masterVolumeNode.gain.setValueAtTime(e,0),this.emit(a.GLOBAL_VOLUME,this,e)}}})},73162:(e,t,i)=>{var r=i(37105),n=i(83419),s=i(29747),a=i(19186);e.exports=new n({initialize:function(e){this.parent=e,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(e,t){return t?r.Add(this.list,e):r.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,t,i){return i?r.AddAt(this.list,e,t):r.AddAt(this.list,e,t,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,t){return e&&(void 0===t&&(t=function(t,i){return t[e]-i[e]}),a(this.list,t)),this},getByName:function(e){return r.GetFirst(this.list,"name",e)},getRandom:function(e,t){return r.GetRandom(this.list,e,t)},getFirst:function(e,t,i,n){return r.GetFirst(this.list,e,t,i,n)},getAll:function(e,t,i,n){return r.GetAll(this.list,e,t,i,n)},count:function(e,t){return r.CountAllMatching(this.list,e,t)},swap:function(e,t){r.Swap(this.list,e,t)},moveTo:function(e,t){return r.MoveTo(this.list,e,t)},moveAbove:function(e,t){return r.MoveAbove(this.list,e,t)},moveBelow:function(e,t){return r.MoveBelow(this.list,e,t)},remove:function(e,t){return t?r.Remove(this.list,e):r.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,t){return t?r.RemoveAt(this.list,e):r.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,t,i){return i?r.RemoveBetween(this.list,e,t):r.RemoveBetween(this.list,e,t,this.removeCallback,this)},removeAll:function(e){for(var t=this.list.length;t--;)this.remove(this.list[t],e);return this},bringToTop:function(e){return r.BringToTop(this.list,e)},sendToBack:function(e){return r.SendToBack(this.list,e)},moveUp:function(e){return r.MoveUp(this.list,e),e},moveDown:function(e){return r.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(e,t){return r.Replace(this.list,e,t)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,t,i,n){return r.SetAll(this.list,e,t,i,n),this},each:function(e,t){for(var i=[null],r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],e.apply(t,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0,this.list.length>0)?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}})},90330:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e){this.entries={},this.size=0,this.setAll(e)},setAll:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.set(e[t][0],e[t][1]);return this},set:function(e,t){return!this.has(e)&&this.size++,this.entries[e]=t,this},get:function(e){if(this.has(e))return this.entries[e]},getArray:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},has:function(e){return this.entries.hasOwnProperty(e)},delete:function(e){return this.has(e)&&(delete this.entries[e],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var e=[],t=this.entries;for(var i in t)e.push(t[i]);return e},dump:function(){var e=this.entries;for(var t in console.group("Map"),e)console.log(t,e[t]);console.groupEnd()},each:function(e){var t=this.entries;for(var i in t)if(!1===e(i,t[i]))break;return this},contains:function(e){var t=this.entries;for(var i in t)if(t[i]===e)return!0;return!1},merge:function(e,t){void 0===t&&(t=!1);var i=this.entries,r=e.entries;for(var n in r)i.hasOwnProperty(n)&&t?i[n]=r[n]:this.set(n,r[n]);return this}})},25774:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(82348);e.exports=new r({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(e){return this._active.indexOf(e)>-1},isPending:function(e){return this._toProcess>0&&this._pending.indexOf(e)>-1},isDestroying:function(e){return this._destroy.indexOf(e)>-1},add:function(e){return this.checkQueue&&this.isActive(e)&&!this.isDestroying(e)||this.isPending(e)||(this._pending.push(e),this._toProcess++),e},remove:function(e){if(this.isPending(e)){var t=this._pending,i=t.indexOf(e);-1!==i&&t.splice(i,1)}else this.isActive(e)&&(this._destroy.push(e),this._toProcess++);return e},removeAll:function(){for(var e=this._active,t=this._destroy,i=e.length;i--;)t.push(e[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var e,t,i=this._destroy,r=this._active;for(e=0;e<i.length;e++){t=i[e];var n=r.indexOf(t);-1!==n&&(r.splice(n,1),this.emit(s.PROCESS_QUEUE_REMOVE,t))}for(e=0,i.length=0,i=this._pending;e<i.length;e++)t=i[e],(!this.checkQueue||this.checkQueue&&-1===r.indexOf(t))&&(r.push(t),this.emit(s.PROCESS_QUEUE_ADD,t));return i.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}})},59542:(e,t,i)=>{var r=i(43886);function n(e){if(!(this instanceof n))return new n(e,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(e,t){a(e,0,e.children.length,t,e)}function a(e,t,i,r,n){n||(n=p(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,a=t;a<i;a++)s=e.children[a],o(n,e.leaf?r(s):s);return n}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function h(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function l(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function p(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,t,i,n,s){for(var a,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=n||(r(e,a=t+Math.ceil((i-t)/n/2)*n,t,i,s),o.push(t,a,a,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!f(e,t))return i;for(var n,s,a,o,h=[];t;){for(n=0,s=t.children.length;n<s;n++)a=t.children[n],f(e,o=t.leaf?r(a):a)&&(t.leaf?i.push(a):u(e,o)?this._all(a,i):h.push(a));t=h.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!f(e,t))return!1;for(var r,n,s,a,o=[];t;){for(r=0,n=t.children.length;r<n;r++)if(s=t.children[r],f(e,a=t.leaf?i(s):s)){if(t.leaf||u(e,a))return!0;o.push(s)}t=o.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(e,t){if(!e)return this;for(var i,r,n,s,a=this.data,o=this.toBBox(e),h=[],c=[];a||h.length;){if(a||(a=h.pop(),r=h[h.length-1],i=c.pop(),s=!0),a.leaf&&-1!==(n=function(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return -1}(e,a.children,t))){a.children.splice(n,1),h.push(a),this._condense(h);break}!s&&!a.leaf&&u(a,o)?(h.push(a),c.push(i),i=0,r=a,a=a.children[0]):r?(i++,a=r.children[i],s=!1):a=null}return this},toBBox:function(e){return e},compareMinX:h,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var n,a=i-t+1,o=this._maxEntries;if(a<=o)return s(n=p(e.slice(t,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),(n=p([])).leaf=!1,n.height=r;var h,c,l,d,u=Math.ceil(a/o),f=u*Math.ceil(Math.sqrt(o));for(g(e,t,i,f,this.compareMinX),h=t;h<=i;h+=f)for(l=Math.min(h+f-1,i),g(e,h,l,u,this.compareMinY),c=h;c<=l;c+=u)d=Math.min(c+u-1,l),n.children.push(this._build(e,c,d,r-1));return s(n,this.toBBox),n},_chooseSubtree:function(e,t,i,r){for(var n,s,a,o,h,c,d,u,f,p;r.push(t),!t.leaf&&r.length-1!==i;){for(n=0,d=u=1/0,s=t.children.length;n<s;n++){h=l(a=t.children[n]),(c=(f=e,(Math.max((p=a).maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-h))<u?(u=c,d=h<d?h:d,o=a):c===u&&h<d&&(d=h,o=a)}t=o||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[],a=this._chooseSubtree(n,this.data,t,s);for(a.children.push(e),o(a,n);t>=0;)if(s[t].children.length>this._maxEntries)this._split(s,t),t--;else break;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var a=this._chooseSplitIndex(i,n,r),o=p(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,s(i,this.toBBox),s(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=p([e,t]),this.data.height=e.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,n,s,o,h,c,d,u;for(c=d=1/0,r=t;r<=i-t;r++)o=function(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-i)*Math.max(0,Math.min(e.maxY,t.maxY)-r)}(n=a(e,0,r,this.toBBox),s=a(e,r,i,this.toBBox)),h=l(n)+l(s),o<c?(c=o,u=r,d=h<d?h:d):o===c&&h<d&&(d=h,u=r);return u},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:h,n=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var n,s,h=this.toBBox,c=a(e,0,t,h),l=a(e,i-t,i,h),u=d(c)+d(l);for(n=t;n<i-t;n++)s=e.children[n],o(c,e.leaf?h(s):s),u+=d(c);for(n=i-t-1;n>=t;n--)s=e.children[n],o(l,e.leaf?h(s):s),u+=d(l);return u},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)o(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():s(e[i],this.toBBox)},compareMinX:function(e,t){return e.left-t.left},compareMinY:function(e,t){return e.top-t.top},toBBox:function(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}},e.exports=n},35072:(e,t,i)=>{var r=new(i(83419))({initialize:function(e){if(this.entries=[],Array.isArray(e))for(var t=0;t<e.length;t++)this.set(e[t])},set:function(e){return -1===this.entries.indexOf(e)&&this.entries.push(e),this},get:function(e,t){for(var i=0;i<this.entries.length;i++){var r=this.entries[i];if(r[e]===t)return r}},getArray:function(){return this.entries.slice(0)},delete:function(e){var t=this.entries.indexOf(e);return t>-1&&this.entries.splice(t,1),this},dump:function(){console.group("Set");for(var e=0;e<this.entries.length;e++)console.log(this.entries[e]);console.groupEnd()},each:function(e,t){var i,r=this.entries.slice(),n=r.length;if(t)for(i=0;i<n&&!1!==e.call(t,r[i],i);i++);else for(i=0;i<n&&!1!==e(r[i],i);i++);return this},iterate:function(e,t){var i,r=this.entries.length;if(t)for(i=0;i<r&&!1!==e.call(t,this.entries[i],i);i++);else for(i=0;i<r&&!1!==e(this.entries[i],i);i++);return this},iterateLocal:function(e){var t,i=[];for(t=1;t<arguments.length;t++)i.push(arguments[t]);var r=this.entries.length;for(t=0;t<r;t++){var n=this.entries[t];n[e].apply(n,i)}return this},clear:function(){return this.entries.length=0,this},contains:function(e){return this.entries.indexOf(e)>-1},union:function(e){var t=new r;return e.entries.forEach(function(e){t.set(e)}),this.entries.forEach(function(e){t.set(e)}),t},intersect:function(e){var t=new r;return this.entries.forEach(function(i){e.contains(i)&&t.set(i)}),t},difference:function(e){var t=new r;return this.entries.forEach(function(i){e.contains(i)||t.set(i)}),t},size:{get:function(){return this.entries.length},set:function(e){return e<this.entries.length?this.entries.length=e:this.entries.length}}});e.exports=r},86555:(e,t,i)=>{var r=i(45319),n=i(83419),s=i(56583),a=i(26099),o=new n({initialize:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=0),void 0===r&&(r=null),this._width=e,this._height=t,this._parent=r,this.aspectMode=i,this.aspectRatio=0===t?1:e/t,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(e){return void 0===e&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.snapTo.set(e,t),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.minWidth=r(e,0,this.maxWidth),this.minHeight=r(t,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,t){return void 0===e&&(e=Number.MAX_VALUE),void 0===t&&(t=e),this.maxWidth=r(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(t,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,t){switch(void 0===e&&(e=0),void 0===t&&(t=e),this.aspectMode){case o.NONE:this._width=this.getNewWidth(s(e,this.snapTo.x)),this._height=this.getNewHeight(s(t,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(t,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(e,t,!0);break;case o.ENVELOP:this.constrain(e,t,!1)}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,t){return this._width=this.getNewWidth(s(e,this.snapTo.x)),this._height=this.getNewHeight(s(t,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(e,t){return void 0===t&&(t=!0),e=r(e,this.minWidth,this.maxWidth),t&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,t){return void 0===t&&(t=!0),e=r(e,this.minHeight,this.maxHeight),t&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=e),void 0===i&&(i=!0),e=this.getNewWidth(e),t=this.getNewHeight(t);var r=this.snapTo,n=0===t?1:e/t;return i&&this.aspectRatio>n||!i&&this.aspectRatio<n?(t=(e=s(e,r.x))/this.aspectRatio,r.y>0&&(e=(t=s(t,r.y))*this.aspectRatio)):(i&&this.aspectRatio<n||!i&&this.aspectRatio>n)&&(e=(t=s(t,r.y))*this.aspectRatio,r.x>0&&(t=(e=s(e,r.x))*(1/this.aspectRatio))),this._width=e,this._height=t,this},fitTo:function(e,t){return this.constrain(e,t,!0)},envelop:function(e,t){return this.constrain(e,t,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,e.exports=o},15238:e=>{e.exports="add"},56187:e=>{e.exports="remove"},82348:(e,t,i)=>{e.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(e,t,i)=>{e.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(e,t,i)=>{var r=i(83419),n=i(45319),s=i(40987),a=i(8054),o=i(50030),h=i(79237);e.exports=new r({Extends:h,initialize:function(e,t,i,r,n){h.call(this,e,t,i,r,n),this.add("__BASE",0,0,0,r,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=r,this.height=n,this.imageData=this.context.getImageData(0,0,r,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(e,t,i,r){return void 0===r&&(r=!0),this.context.drawImage(i,e,t),r&&this.update(),this},drawFrame:function(e,t,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=!0);var s=this.manager.getFrame(e,t);if(s){var a=s.canvasData,o=s.cutWidth,h=s.cutHeight,c=s.source.resolution;this.context.drawImage(s.source.image,a.x,a.y,o,h,i,r,o/c,h/c),n&&this.update()}return this},setPixel:function(e,t,i,r,n,s){if(void 0===s&&(s=255),e=Math.abs(Math.floor(e)),t=Math.abs(Math.floor(t)),this.getIndex(e,t)>-1){var a=this.context.getImageData(e,t,1,1);a.data[0]=i,a.data[1]=r,a.data[2]=n,a.data[3]=s,this.context.putImageData(a,e,t)}return this},putData:function(e,t,i,r,n,s,a){return void 0===r&&(r=0),void 0===n&&(n=0),void 0===s&&(s=e.width),void 0===a&&(a=e.height),this.context.putImageData(e,t,i,r,n,s,a),this},getData:function(e,t,i,r){return e=n(Math.floor(e),0,this.width-1),t=n(Math.floor(t),0,this.height-1),i=n(i,1,this.width-e),r=n(r,1,this.height-t),this.context.getImageData(e,t,i,r)},getPixel:function(e,t,i){i||(i=new s);var r=this.getIndex(e,t);if(r>-1){var n=this.data,a=n[r+0],o=n[r+1],h=n[r+2],c=n[r+3];i.setTo(a,o,h,c)}return i},getPixels:function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===r&&(r=i),e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t));for(var a=n(e,0,this.width),o=n(e+i,0,this.width),h=n(t,0,this.height),c=n(t+r,0,this.height),l=new s,d=[],u=h;u<c;u++){for(var f=[],p=a;p<o;p++)l=this.getPixel(p,u,l),f.push({x:p,y:u,color:l.color,alpha:l.alphaGL});d.push(f)}return d},getIndex:function(e,t){return(e=Math.abs(Math.round(e)),t=Math.abs(Math.round(t)),e<this.width&&t<this.height)?(e+t*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(e,t,i,r,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===r&&(r=this.height),void 0===n&&(n=!0),this.context.clearRect(e,t,i,r),n&&this.update(),this},setSize:function(e,t){return void 0===t&&(t=e),(e!==this.width||t!==this.height)&&(this.canvas.width=e,this.canvas.height=t,this._source.width=e,this._source.height=t,this._source.isPowerOf2=o(e,t),this.frames.__BASE.setSize(e,t,0,0),this.width=e,this.height=t,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}})},81320:(e,t,i)=>{var r=i(10312),n=i(38058),s=i(27919),a=i(83419),o=i(8054),h=i(4327),c=i(95540),l=i(36060),d=i(32302),u=i(79237),f=i(70554);e.exports=new a({Extends:u,initialize:function(e,t,i,r,a){void 0===i&&(i=256),void 0===r&&(r=256),void 0===a&&(a=!0),this.type="DynamicTexture";var h=e.game.renderer,c=h&&h.type===o.CANVAS,f=c?s.create2D(this,i,r):[this];u.call(this,e,t,f,i,r),this.add("__BASE",0,0,0,i,r),this.renderer=h,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=c?f:null,this.context=c?f.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new n(0,0,i,r).setScene(e.game.scene.systemScene,!1),this.renderTarget=c?null:new d(h,i,r,1,0,!1,!1,!0,!1),this.pipeline=c?null:h.pipelines.get(l.SINGLE_PIPELINE),this.setSize(i,r,a)},setSize:function(e,t,i){void 0===t&&(t=e),void 0===i&&(i=!0),i&&(e=Math.floor(e),t=Math.floor(t),e%2!=0&&e++,t%2!=0&&t++);var r=this.get(),n=r.source;if(e!==this.width||t!==this.height){this.canvas&&(this.canvas.width=e,this.canvas.height=t);var s=this.renderTarget;s&&(s.willResize(e,t)&&s.resize(e,t),s.texture!==n.glTexture&&this.renderer.deleteTexture(n.glTexture),this.setFromRenderTarget()),this.camera.setSize(e,t),n.width=e,n.height=t,r.setSize(e,t),this.width=e,this.height=t}else{var a=this.getSourceImage();r.cutX+e>a.width&&(e=a.width-r.cutX),r.cutY+t>a.height&&(t=a.height-r.cutY),r.setSize(e,t,r.cutX,r.cutY)}return this},setFromRenderTarget:function(){var e=this.get().source,t=this.renderTarget;return e.isRenderTexture=!0,e.isGLTexture=!0,e.glTexture=t.texture,this},setIsSpriteTexture:function(e){return this.isSpriteTexture=e,this},fill:function(e,t,i,r,n,s){var a=this.camera,o=this.renderer;void 0===t&&(t=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===s&&(s=this.height);var h=e>>16&255,c=e>>8&255,l=255&e,d=this.renderTarget;if(a.preRender(),d){d.bind(!0);var u=this.pipeline.manager.set(this.pipeline),p=o.width/d.width,g=o.height/d.height,m=d.height-(r+s);u.drawFillRect(i*p,m*g,n*p,s*g,f.getTintFromFloats(l/255,c/255,h/255,1),t),d.unbind(!0)}else{var v=this.context;o.setContext(v),v.globalCompositeOperation="source-over",v.fillStyle="rgba("+h+","+c+","+l+","+t+")",v.fillRect(i,r,n,s),o.setContext()}return this.dirty=!0,this},clear:function(e,t,i,r){if(this.dirty){var n=this.context,s=this.renderTarget;s?s.clear(e,t,i,r):n&&(void 0!==e&&void 0!==t&&void 0!==i&&void 0!==r?n.clearRect(e,t,i,r):(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,this.width,this.height),n.restore())),this.dirty=!1}return this},stamp:function(e,t,i,r,n){void 0===i&&(i=0),void 0===r&&(r=0);var s=c(n,"alpha",1),a=c(n,"tint",0xffffff),o=c(n,"angle",0),h=c(n,"rotation",0),l=c(n,"scale",1),d=c(n,"scaleX",l),u=c(n,"scaleY",l),f=c(n,"originX",.5),p=c(n,"originY",.5),g=c(n,"blendMode",0),m=c(n,"erase",!1),v=c(n,"skipBatch",!1),y=this.manager.resetStamp(s,a);return y.setAngle(0),0!==o?y.setAngle(o):0!==h&&y.setRotation(h),y.setScale(d,u),y.setTexture(e,t),y.setOrigin(f,p),y.setBlendMode(g),m&&(this._eraseMode=!0),v?this.batchGameObject(y,i,r):this.draw(y,i,r),m&&(this._eraseMode=!1),this},erase:function(e,t,i){return this._eraseMode=!0,this.draw(e,t,i),this._eraseMode=!1,this},draw:function(e,t,i,r,n){return this.beginDraw(),this.batchDraw(e,t,i,r,n),this.endDraw(),this},drawFrame:function(e,t,i,r,n,s){return this.beginDraw(),this.batchDrawFrame(e,t,i,r,n,s),this.endDraw(),this},repeat:function(e,t,i,r,n,s,a,o,c){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===s&&(s=this.height),void 0===a&&(a=1),void 0===o&&(o=0xffffff),void 0===c&&(c=!1),!(t=e instanceof h?e:this.manager.getFrame(e,t)))return this;var l=this.manager.resetStamp(a,o);l.setFrame(t),l.setOrigin(0);var d=t.width,u=t.height,f=Math.ceil((n=Math.floor(n))/d),p=Math.ceil((s=Math.floor(s))/u),g=f*d-n,m=p*u-s;g>0&&(g=d-g),m>0&&(m=u-m),i<0&&(f+=Math.ceil(Math.abs(i)/d)),r<0&&(p+=Math.ceil(Math.abs(r)/u));var v=i,y=r,b=!1,x=this.manager.stampCrop.setTo(0,0,d,u);c||this.beginDraw();for(var E=0;E<p;E++){if(y+u<0){y+=u;continue}for(var T=0;T<f;T++){if(b=!1,v+d<0){v+=d;continue}v<0&&(b=!0,x.width=d+v,x.x=d-x.width),y<0&&(b=!0,x.height=u+y,x.y=u-x.height),g>0&&T===f-1&&(b=!0,x.width=g),m>0&&E===p-1&&(b=!0,x.height=m),b&&l.setCrop(x),this.batchGameObject(l,v,y),l.isCropped=!1,x.setTo(0,0,d,u),v+=d}v=i,y+=u}return c||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var e=this.camera,t=this.renderer,i=this.renderTarget;e.preRender(),i?t.beginCapture(i.width,i.height):t.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(e,t,i,r,n){return Array.isArray(e)||(e=[e]),this.batchList(e,t,i,r,n),this},batchDrawFrame:function(e,t,i,r,n,s){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===s&&(s=0xffffff);var a=this.manager.getFrame(e,t);return a&&(this.renderTarget?this.pipeline.batchTextureFrame(a,i,r,s,n,this.camera.matrix,null):this.batchTextureFrame(a,i,r,n,s)),this},endDraw:function(e){if(void 0===e&&(e=this._eraseMode),this.isDrawing){var t=this.renderer,i=this.renderTarget;if(i){var r=t.endCapture();t.pipelines.setUtility().blitFrame(r,i,1,!1,!1,e,this.isSpriteTexture),t.resetScissor(),t.resetViewport()}else t.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(e,t,i,r,n){var s=e.length;if(0!==s)for(var a=0;a<s;a++){var o=e[a];o&&o!==this&&(o.renderWebGL||o.renderCanvas?this.batchGameObject(o,t,i):o.isParent||o.list?this.batchGroup(o.getChildren(),t,i):"string"==typeof o?this.batchTextureFrameKey(o,null,t,i,r,n):o instanceof h?this.batchTextureFrame(o,t,i,r,n):Array.isArray(o)&&this.batchList(o,t,i,r,n))}},batchGroup:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);for(var r=0;r<e.length;r++){var n=e[r];n.willRender(this.camera)&&this.batchGameObject(n,n.x+t,n.y+i)}},batchGameObject:function(e,t,i){void 0===t&&(t=e.x),void 0===i&&(i=e.y);var n=e.x,s=e.y,a=this.camera,o=this.renderer,h=this._eraseMode,c=e.mask;if(e.setPosition(t,i),this.canvas){if(h){var l=e.blendMode;e.blendMode=r.ERASE}c&&c.preRenderCanvas(o,e,a),e.renderCanvas(o,e,a,null),c&&c.postRenderCanvas(o,e,a),h&&(e.blendMode=l)}else o&&(c&&c.preRenderWebGL(o,e,a),h||o.setBlendMode(e.blendMode),e.renderWebGL(o,e,a),c&&c.postRenderWebGL(o,a,this.renderTarget));e.setPosition(n,s)},batchTextureFrameKey:function(e,t,i,r,n,s){var a=this.manager.getFrame(e,t);a&&this.batchTextureFrame(a,i,r,n,s)},batchTextureFrame:function(e,t,i,r,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0xffffff);var s=this.camera.matrix;if(this.renderTarget)this.pipeline.batchTextureFrame(e,t,i,n,r,s,null);else{var a=this.context,o=e.canvasData,h=e.source.image;a.save(),a.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",a.globalAlpha=r,s.setToContext(a),o.width>0&&o.height>0&&a.drawImage(h,o.x,o.y,o.width,o.height,t,i,o.width,o.height),a.restore()}},snapshotArea:function(e,t,i,r,n,s,a){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!1,e,t,i,r,s,a):this.renderer.snapshotCanvas(this.canvas,n,!1,e,t,i,r,s,a),this},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.width,this.height,e,t,i)},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(e,t,i,r){var n=this.manager.resetStamp();n.setTexture(this),n.setOrigin(0),n.renderWebGL(e,n,i,r)},renderCanvas:function(){},destroy:function(){var e=this.manager.stamp;e&&e.texture===this&&this.manager.resetStamp(),u.prototype.destroy.call(this),s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}})},4327:(e,t,i)=>{var r=i(83419),n=i(45319),s=i(79291),a=new r({initialize:function(e,t,i,r,n,s,a){this.texture=e,this.name=t,this.source=e.source[i],this.sourceIndex=i,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(s,a,r,n)},setCutPosition:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.cutX=e,this.cutY=t,this.updateUVs()},setCutSize:function(e,t){return this.cutWidth=e,this.cutHeight=t,this.updateUVs()},setSize:function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this.setCutPosition(i,r),this.setCutSize(e,t),this.width=e,this.height=t,this.halfWidth=Math.floor(.5*e),this.halfHeight=Math.floor(.5*t),this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2);var n=this.data,s=n.cut;s.x=i,s.y=r,s.w=e,s.h=t,s.r=i+e,s.b=r+t,n.sourceSize.w=e,n.sourceSize.h=t,n.spriteSourceSize.w=e,n.spriteSourceSize.h=t,n.radius=.5*Math.sqrt(e*e+t*t);var a=n.drawImage;return a.x=i,a.y=r,a.width=e,a.height=t,this.updateUVs()},setTrim:function(e,t,i,r,n,s){var a=this.data,o=a.spriteSourceSize;return a.trim=!0,a.sourceSize.w=e,a.sourceSize.h=t,o.x=i,o.y=r,o.w=n,o.h=s,o.r=i+n,o.b=r+s,this.x=i,this.y=r,this.width=n,this.height=s,this.halfWidth=.5*n,this.halfHeight=.5*s,this.centerX=Math.floor(n/2),this.centerY=Math.floor(s/2),this.updateUVs()},setScale9:function(e,t,i,r){var n=this.data;return n.scale9=!0,n.is3Slice=0===t&&r===this.height,n.scale9Borders.x=e,n.scale9Borders.y=t,n.scale9Borders.w=i,n.scale9Borders.h=r,this},setCropUVs:function(e,t,i,r,s,a,o){var h=this.cutX,c=this.cutY,l=this.cutWidth,d=this.cutHeight,u=this.realWidth,f=this.realHeight;t=n(t,0,u),i=n(i,0,f),r=n(r,0,u-t),s=n(s,0,f-i);var p=h+t,g=c+i,m=r,v=s,y=this.data;if(y.trim){var b=y.spriteSourceSize;r=n(r,0,b.x+l-t),s=n(s,0,b.y+d-i);var x=t+r,E=i+s;if(b.r<t||b.b<i||b.x>x||b.y>E)p=0,g=0,m=0,v=0;else{var T=Math.max(b.x,t),A=Math.max(b.y,i),w=Math.min(b.r,x)-T,S=Math.min(b.b,E)-A;m=w,v=S,p=a?h+(l-(T-b.x)-w):h+(T-b.x),g=o?c+(d-(A-b.y)-S):c+(A-b.y),t=T,i=A,r=w,s=S}}else a&&(p=h+(l-t-r)),o&&(g=c+(d-i-s));var C=this.source.width,I=this.source.height;return e.u0=Math.max(0,p/C),e.v0=Math.max(0,g/I),e.u1=Math.min(1,(p+m)/C),e.v1=Math.min(1,(g+v)/I),e.x=t,e.y=i,e.cx=p,e.cy=g,e.cw=m,e.ch=v,e.width=r,e.height=s,e.flipX=a,e.flipY=o,e},updateCropUVs:function(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},setUVs:function(e,t,i,r,n,s){var a=this.data.drawImage;return a.width=e,a.height=t,this.u0=i,this.v0=r,this.u1=n,this.v1=s,this},updateUVs:function(){var e=this.cutX,t=this.cutY,i=this.cutWidth,r=this.cutHeight,n=this.data.drawImage;n.width=i,n.height=r;var s=this.source.width,a=this.source.height;return this.u0=e/s,this.v0=t/a,this.u1=(e+i)/s,this.v1=(t+r)/a,this},updateUVsInverted:function(){var e=this.source.width,t=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/t,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/t,this},clone:function(){var e=new a(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=s(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=a},79237:(e,t,i)=>{var r=i(83419),n=i(4327),s=i(11876),a='Texture "%s" has no frame "%s"';e.exports=new r({initialize:function(e,t,i,r,n){Array.isArray(i)||(i=[i]),this.manager=e,this.key=t,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var a=0;a<i.length;a++)this.source.push(new s(this,i[a],r,n))},add:function(e,t,i,r,s,a){if(this.has(e))return null;var o=new n(this,e,t,i,r,s,a);return this.frames[e]=o,"__BASE"===this.firstFrame&&(this.firstFrame=e),this.frameTotal++,o},remove:function(e){return!!this.has(e)&&(this.get(e).destroy(),delete this.frames[e],!0)},has:function(e){return this.frames.hasOwnProperty(e)},get:function(e){e||(e=this.firstFrame);var t=this.frames[e];return t||(console.warn(a,this.key,e),t=this.frames[this.firstFrame]),t},getTextureSourceIndex:function(e){for(var t=0;t<this.source.length;t++)if(this.source[t]===e)return t;return -1},getFramesFromTextureSource:function(e,t){void 0===t&&(t=!1);var i=[];for(var r in this.frames)if("__BASE"!==r||t){var n=this.frames[r];n.sourceIndex===e&&i.push(n)}return i},getFrameBounds:function(e){void 0===e&&(e=0);for(var t=this.getFramesFromTextureSource(e,!0),i=t[0],r=i.cutX,n=i.cutY,s=i.cutX+i.cutWidth,a=i.cutY+i.cutHeight,o=1;o<t.length;o++){var h=t[o];h.cutX<r&&(r=h.cutX),h.cutY<n&&(n=h.cutY),h.cutX+h.cutWidth>s&&(s=h.cutX+h.cutWidth),h.cutY+h.cutHeight>a&&(a=h.cutY+h.cutHeight)}return{x:r,y:n,width:s-r,height:a-n}},getFrameNames:function(e){void 0===e&&(e=!1);var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");-1!==i&&t.splice(i,1)}return t},getSourceImage:function(e){(null==e||1===this.frameTotal)&&(e="__BASE");var t=this.frames[e];return t?t.source.image:(console.warn(a,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(null==e||1===this.frameTotal)&&(e="__BASE");var t,i=this.frames[e];return i?t=i.sourceIndex:(console.warn(a,this.key,e),t=this.frames.__BASE.sourceIndex),this.dataSource[t].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=this.source[t];this.dataSource.push(new s(this,e[t],i.width,i.height))}},setFilter:function(e){var t;for(t=0;t<this.source.length;t++)this.source[t].setFilter(e);for(t=0;t<this.dataSource.length;t++)this.dataSource[t].setFilter(e)},destroy:function(){var e,t=this.source,i=this.dataSource;for(e=0;e<t.length;e++)t[e]&&t[e].destroy();for(e=0;e<i.length;e++)i[e]&&i[e].destroy();for(var r in this.frames){var n=this.frames[r];n&&n.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}})},17130:(e,t,i)=>{var r=i(27919),n=i(57382),s=i(83419),a=i(40987),o=i(8054),h=i(81320),c=i(50792),l=i(69442),d=i(4327),u=i(8443),f=i(99584),p=i(35154),g=i(88571),m=i(41212),v=i(61309),y=i(87841),b=i(79237);e.exports=new s({Extends:c,initialize:function(e){c.call(this),this.game=e,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new y,this.silentWarnings=!1,e.events.once(u.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(l.LOAD,this.updatePending,this),this.on(l.ERROR,this.updatePending,this);var e=this.game.config;null!==e.defaultImage&&this.addBase64("__DEFAULT",e.defaultImage),null!==e.missingImage&&this.addBase64("__MISSING",e.missingImage),null!==e.whiteImage&&this.addBase64("__WHITE",e.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(u.DESTROY,this.destroy,this),this.game.events.once(u.SYSTEM_READY,function(e){this.stamp=new g(e).setOrigin(0)},this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(l.LOAD),this.off(l.ERROR),this.emit(l.READY))},checkKey:function(e){return!(!e||"string"!=typeof e||this.exists(e))||(this.silentWarnings||console.error("Texture key already in use: "+e),!1)},remove:function(e){if("string"==typeof e)if(!this.exists(e))return this.silentWarnings||console.warn("No texture found matching key: "+e),this;else e=this.get(e);var t=e.key;return this.list.hasOwnProperty(t)&&(e.destroy(),this.emit(l.REMOVE,t),this.emit(l.REMOVE_KEY+t)),this},removeKey:function(e){return this.list.hasOwnProperty(e)&&delete this.list[e],this},addBase64:function(e,t){if(this.checkKey(e)){var i=this,r=new Image;r.onerror=function(){i.emit(l.ERROR,e)},r.onload=function(){var t=i.create(e,r);t&&(v.Image(t,0),i.emit(l.ADD,e,t),i.emit(l.ADD_KEY+e,t),i.emit(l.LOAD,e,t))},r.src=t}return this},getBase64:function(e,t,i,n){void 0===i&&(i="image/png"),void 0===n&&(n=.92);var s="",a=this.getFrame(e,t);if(a&&(a.source.isRenderTexture||a.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(a){var o=a.canvasData,h=r.create2D(this,o.width,o.height),c=h.getContext("2d",{willReadFrequently:!0});o.width>0&&o.height>0&&c.drawImage(a.source.image,o.x,o.y,o.width,o.height,0,0,o.width,o.height),s=h.toDataURL(i,n),r.remove(h)}return s},addImage:function(e,t,i){var r=null;return this.checkKey(e)&&(r=this.create(e,t),v.Image(r,0),i&&r.setDataSource(i),this.emit(l.ADD,e,r),this.emit(l.ADD_KEY+e,r)),r},addGLTexture:function(e,t){var i=null;if(this.checkKey(e)){var r=t.width,n=t.height;(i=this.create(e,t,r,n)).add("__BASE",0,0,0,r,n),this.emit(l.ADD,e,i),this.emit(l.ADD_KEY+e,i)}return i},addCompressedTexture:function(e,t,i){var r=null;if(this.checkKey(e)){if((r=this.create(e,t)).add("__BASE",0,0,0,t.width,t.height),i){var n=function(e,t,i){Array.isArray(i.textures)||Array.isArray(i.frames)?v.JSONArray(e,t,i):v.JSONHash(e,t,i)};if(Array.isArray(i))for(var s=0;s<i.length;s++)n(r,s,i[s]);else n(r,0,i)}this.emit(l.ADD,e,r),this.emit(l.ADD_KEY+e,r)}return r},addRenderTexture:function(e,t){var i=null;return this.checkKey(e)&&((i=this.create(e,t)).add("__BASE",0,0,0,t.width,t.height),this.emit(l.ADD,e,i),this.emit(l.ADD_KEY+e,i)),i},generate:function(e,t){if(!this.checkKey(e))return null;var i=r.create(this,1,1);return t.canvas=i,f(t),this.addCanvas(e,i)},createCanvas:function(e,t,i){if(void 0===t&&(t=256),void 0===i&&(i=256),this.checkKey(e)){var n=r.create(this,t,i,o.CANVAS,!0);return this.addCanvas(e,n)}return null},addCanvas:function(e,t,i){void 0===i&&(i=!1);var r=null;return i?r=new n(this,e,t,t.width,t.height):this.checkKey(e)&&(r=new n(this,e,t,t.width,t.height),this.list[e]=r,this.emit(l.ADD,e,r),this.emit(l.ADD_KEY+e,r)),r},addDynamicTexture:function(e,t,i){var r=null;return"string"!=typeof e||this.exists(e)?e=(r=e).key:r=new h(this,e,t,i),this.checkKey(e)?(this.list[e]=r,this.emit(l.ADD,e,r),this.emit(l.ADD_KEY+e,r)):r=null,r},addAtlas:function(e,t,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(e,t,i,r):this.addAtlasJSONHash(e,t,i,r)},addAtlasJSONArray:function(e,t,i,r){var n=null;if(t instanceof b?(e=t.key,n=t):this.checkKey(e)&&(n=this.create(e,t)),n){if(Array.isArray(i))for(var s=1===i.length,a=0;a<n.source.length;a++){var o=s?i[0]:i[a];v.JSONArray(n,a,o)}else v.JSONArray(n,0,i);r&&n.setDataSource(r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n)}return n},addAtlasJSONHash:function(e,t,i,r){var n=null;if(t instanceof b?(e=t.key,n=t):this.checkKey(e)&&(n=this.create(e,t)),n){if(Array.isArray(i))for(var s=0;s<i.length;s++)v.JSONHash(n,s,i[s]);else v.JSONHash(n,0,i);r&&n.setDataSource(r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n)}return n},addAtlasXML:function(e,t,i,r){var n=null;return t instanceof b?(e=t.key,n=t):this.checkKey(e)&&(n=this.create(e,t)),n&&(v.AtlasXML(n,0,i),r&&n.setDataSource(r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n)),n},addUnityAtlas:function(e,t,i,r){var n=null;return t instanceof b?(e=t.key,n=t):this.checkKey(e)&&(n=this.create(e,t)),n&&(v.UnityYAML(n,0,i),r&&n.setDataSource(r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n)),n},addSpriteSheet:function(e,t,i,r){var n=null;if(t instanceof b?(e=t.key,n=t):this.checkKey(e)&&(n=this.create(e,t)),n){var s=n.source[0].width,a=n.source[0].height;v.SpriteSheet(n,0,0,0,s,a,i),r&&n.setDataSource(r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n)}return n},addSpriteSheetFromAtlas:function(e,t){if(!this.checkKey(e))return null;var i=p(t,"atlas",null),r=p(t,"frame",null);if(i&&r){var n=this.get(i).get(r);if(n){var s=n.source.image;s||(s=n.source.glTexture);var a=this.create(e,s);return n.trimmed?v.SpriteSheetFromAtlas(a,n,t):v.SpriteSheet(a,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,t),this.emit(l.ADD,e,a),this.emit(l.ADD_KEY+e,a),a}}},addUint8Array:function(e,t,i,r){if(!this.checkKey(e)||t.length/4!=i*r)return null;var n=this.create(e,t,i,r);return n.add("__BASE",0,0,0,i,r),this.emit(l.ADD,e,n),this.emit(l.ADD_KEY+e,n),n},create:function(e,t,i,r){var n=null;return this.checkKey(e)&&(n=new b(this,e,t,i,r),this.list[e]=n),n},exists:function(e){return this.list.hasOwnProperty(e)},get:function(e){return(void 0===e&&(e="__DEFAULT"),this.list[e])?this.list[e]:e instanceof b?e:e instanceof d?e.texture:this.list.__MISSING},cloneFrame:function(e,t){if(this.list[e])return this.list[e].get(t).clone()},getFrame:function(e,t){if(this.list[e])return this.list[e].get(t)},parseFrame:function(e){if(e){if("string"==typeof e)return this.getFrame(e);if(Array.isArray(e)&&2===e.length)return this.getFrame(e[0],e[1]);if(m(e))return this.getFrame(e.key,e.frame);if(e instanceof b)return e.get();else if(e instanceof d)return e}},getTextureKeys:function(){var e=[];for(var t in this.list)"__DEFAULT"!==t&&"__MISSING"!==t&&"__WHITE"!==t&&"__NORMAL"!==t&&e.push(t);return e},getPixel:function(e,t,i,r){var n=this.getFrame(i,r);if(n){e-=n.x,t-=n.y;var s=n.data.cut;if(e+=s.x,t+=s.y,e>=s.x&&e<s.r&&t>=s.y&&t<s.b){var o=this._tempContext;o.clearRect(0,0,1,1),o.drawImage(n.source.image,e,t,1,1,0,0,1,1);var h=o.getImageData(0,0,1,1);return new a(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(e,t,i,r){var n=this.getFrame(i,r);if(n){e-=n.x,t-=n.y;var s=n.data.cut;if(e+=s.x,t+=s.y,e>=s.x&&e<s.r&&t>=s.y&&t<s.b){var a=this._tempContext;return a.clearRect(0,0,1,1),a.drawImage(n.source.image,e,t,1,1,0,0,1,1),a.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(e,t,i){return this.list[t]&&(e.texture=this.list[t],e.frame=e.texture.get(i)),e},renameTexture:function(e,t){var i=this.get(e);return!!i&&e!==t&&(i.key=t,this.list[t]=i,delete this.list[e],!0)},each:function(e,t){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var n in this.list)i[0]=this.list[n],e.apply(t,i)},resetStamp:function(e,t){void 0===e&&(e=1),void 0===t&&(t=0xffffff);var i=this.stamp;return i.setCrop(),i.setPosition(0),i.setAngle(0),i.setScale(1),i.setAlpha(e),i.setTint(t),i.setTexture("__WHITE"),i},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,r.remove(this._tempCanvas)}})},11876:(e,t,i)=>{var r=i(27919),n=i(83419),s=i(50030),a=i(29795),o=i(82751);e.exports=new n({initialize:function(e,t,i,r,n){void 0===n&&(n=!1);var h=e.manager.game;this.renderer=h.renderer,this.texture=e,this.source=t,this.image=t.compressed?null:t,this.compressionAlgorithm=t.compressed?t.format:null,this.resolution=1,this.width=i||t.naturalWidth||t.videoWidth||t.width||0,this.height=r||t.naturalHeight||t.videoHeight||t.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=t instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&t instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===t.type||"DynamicTexture"===t.type,this.isGLTexture=t instanceof o,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.flipY=n,this.init(h)},init:function(e){var t=this.renderer;if(t){var i=this.source;if(t.gl){var r=this.image,n=this.flipY,s=this.width,a=this.height,o=this.scaleMode;this.isCanvas?this.glTexture=t.createCanvasTexture(r,!1,n):this.isVideo?this.glTexture=t.createVideoTexture(r,!1,n):this.isRenderTexture?this.glTexture=t.createTextureFromSource(null,s,a,o):this.isGLTexture?this.glTexture=i:this.compressionAlgorithm?this.glTexture=t.createTextureFromSource(i,void 0,void 0,o):i instanceof Uint8Array?this.glTexture=t.createUint8ArrayTexture(i,s,a,o):this.glTexture=t.createTextureFromSource(r,s,a,o)}else this.isRenderTexture&&(this.image=i.canvas)}e.config.antialias||this.setFilter(1)},setFilter:function(e){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,e),this.scaleMode=e},setFlipY:function(e){return void 0===e&&(e=!0),e===this.flipY||(this.flipY=e,this.update()),this},update:function(){var e=this.renderer,t=this.image,i=this.flipY,r=e.gl;r&&this.isCanvas?e.updateCanvasTexture(t,this.glTexture,i):r&&this.isVideo&&e.updateVideoTexture(t,this.glTexture,i)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}})},19673:e=>{e.exports={LINEAR:0,NEAREST:1}},44538:e=>{e.exports="addtexture"},63486:e=>{e.exports="addtexture-"},94851:e=>{e.exports="onerror"},29099:e=>{e.exports="onload"},8678:e=>{e.exports="ready"},86415:e=>{e.exports="removetexture"},30879:e=>{e.exports="removetexture-"},69442:(e,t,i)=>{e.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(e,t,i)=>{var r=i(79291),n=i(19673),s={CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:n,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)};e.exports=s=r(!1,s,n)},89905:e=>{e.exports=function(e,t,i){if(!i.getElementsByTagName("TextureAtlas"))return void console.warn("Invalid Texture Atlas XML given");var r,n=e.source[t];e.add("__BASE",t,0,0,n.width,n.height);for(var s=i.getElementsByTagName("SubTexture"),a=0;a<s.length;a++){var o=s[a].attributes,h=o.name.value,c=parseInt(o.x.value,10),l=parseInt(o.y.value,10),d=parseInt(o.width.value,10),u=parseInt(o.height.value,10);if(r=e.add(h,t,c,l,d,u),o.frameX){var f=Math.abs(parseInt(o.frameX.value,10)),p=Math.abs(parseInt(o.frameY.value,10)),g=parseInt(o.frameWidth.value,10),m=parseInt(o.frameHeight.value,10);r.setTrim(d,u,f,p,g,m)}}return e}},72893:e=>{e.exports=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e}},4832:e=>{e.exports=function(e,t){var i=e.source[t];return e.add("__BASE",t,0,0,i.width,i.height),e}},78566:(e,t,i)=>{var r=i(41786);e.exports=function(e,t,i){if(!i.frames&&!i.textures)return void console.warn("Invalid Texture Atlas JSON Array");var n,s=e.source[t];e.add("__BASE",t,0,0,s.width,s.height);for(var a=Array.isArray(i.textures)?i.textures[t].frames:i.frames,o=0;o<a.length;o++){var h=a[o];if(!(n=e.add(h.filename,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h))){console.warn("Invalid atlas json, frame already exists: "+h.filename);continue}h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var c=h.anchor||h.pivot;c&&(n.customPivot=!0,n.pivotX=c.x,n.pivotY=c.y),h.scale9Borders&&n.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),n.customData=r(h)}for(var l in i)"frames"!==l&&(Array.isArray(i[l])?e.customData[l]=i[l].slice(0):e.customData[l]=i[l]);return e}},39711:(e,t,i)=>{var r=i(41786);e.exports=function(e,t,i){if(!i.frames)return void console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");var n,s=e.source[t];e.add("__BASE",t,0,0,s.width,s.height);var a=i.frames;for(var o in a)if(a.hasOwnProperty(o)){var h=a[o];if(!(n=e.add(o,t,h.frame.x,h.frame.y,h.frame.w,h.frame.h))){console.warn("Invalid atlas json, frame already exists: "+o);continue}h.trimmed&&n.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(n.rotated=!0,n.updateUVsInverted());var c=h.anchor||h.pivot;c&&(n.customPivot=!0,n.pivotX=c.x,n.pivotY=c.y),h.scale9Borders&&n.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),n.customData=r(h)}for(var l in i)"frames"!==l&&(Array.isArray(i[l])?e.customData[l]=i[l].slice(0):e.customData[l]=i[l]);return e}},31403:e=>{e.exports=function(e){var t,i=[171,75,84,88,32,49,49,187,13,10,26,10],r=new Uint8Array(e,0,12);for(t=0;t<r.length;t++)if(r[t]!==i[t])return void console.warn("KTXParser - Invalid file format");var n=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(e,12,13*n),a=0x4030201===s.getUint32(0,!0);if(0!==s.getUint32(+n,a))return void console.warn("KTXParser - Only compressed formats supported");var o=s.getUint32(4*n,a),h=s.getUint32(6*n,a),c=s.getUint32(7*n,a),l=Math.max(1,s.getUint32(11*n,a)),d=s.getUint32(12*n,a),u=Array(l),f=64+d,p=h,g=c;for(t=0;t<l;t++){var m=new Int32Array(e,f,1)[0];f+=4,u[t]={data:new Uint8Array(e,f,m),width:p,height:g},p=Math.max(1,p>>1),g=Math.max(1,g>>1),f+=m}return{mipmaps:u,width:h,height:c,internalFormat:o,compressed:!0,generateMipmap:!1}}},82038:e=>{function t(e,t,i,r,n,s,a){return void 0===a&&(a=16),Math.floor((e+i)/n)*Math.floor((t+r)/s)*a}function i(e,t){return(e=Math.max(e,16))*(t=Math.max(t,8))/4}function r(e,t){return(e=Math.max(e,8))*(t=Math.max(t,8))/2}function n(e,t){return Math.ceil(e/4)*Math.ceil(t/4)*16}function s(e,i){return t(e,i,3,3,4,4,8)}function a(e,i){return t(e,i,3,3,4,4)}var o={0:{sizeFunc:i,glFormat:[35841]},1:{sizeFunc:i,glFormat:[35843]},2:{sizeFunc:r,glFormat:[35840]},3:{sizeFunc:r,glFormat:[35842]},6:{sizeFunc:s,glFormat:[36196]},7:{sizeFunc:s,glFormat:[33776,35916]},8:{sizeFunc:a,glFormat:[33777,35917]},9:{sizeFunc:a,glFormat:[33778,35918]},11:{sizeFunc:a,glFormat:[33779,35919]},14:{sizeFunc:n,glFormat:[36494,36495]},15:{sizeFunc:n,glFormat:[36492,36493]},22:{sizeFunc:s,glFormat:[37492,37493]},23:{sizeFunc:a,glFormat:[37496,37497]},24:{sizeFunc:s,glFormat:[37494,37495]},25:{sizeFunc:s,glFormat:[37488]},26:{sizeFunc:a,glFormat:[37490]},27:{sizeFunc:a,glFormat:[37808,37840]},28:{sizeFunc:function(e,i){return t(e,i,4,3,5,4)},glFormat:[37809,37841]},29:{sizeFunc:function(e,i){return t(e,i,4,4,5,5)},glFormat:[37810,37842]},30:{sizeFunc:function(e,i){return t(e,i,5,4,6,5)},glFormat:[37811,37843]},31:{sizeFunc:function(e,i){return t(e,i,5,5,6,6)},glFormat:[37812,37844]},32:{sizeFunc:function(e,i){return t(e,i,7,4,8,5)},glFormat:[37813,37845]},33:{sizeFunc:function(e,i){return t(e,i,7,5,8,6)},glFormat:[37814,37846]},34:{sizeFunc:function(e,i){return t(e,i,7,7,8,8)},glFormat:[37815,37847]},35:{sizeFunc:function(e,i){return t(e,i,9,4,10,5)},glFormat:[37816,37848]},36:{sizeFunc:function(e,i){return t(e,i,9,5,10,6)},glFormat:[37817,37849]},37:{sizeFunc:function(e,i){return t(e,i,9,7,10,8)},glFormat:[37818,37850]},38:{sizeFunc:function(e,i){return t(e,i,9,9,10,10)},glFormat:[37819,37851]},39:{sizeFunc:function(e,i){return t(e,i,11,9,12,10)},glFormat:[37820,37852]},40:{sizeFunc:function(e,i){return t(e,i,11,11,12,12)},glFormat:[37821,37853]}};e.exports=function(e){for(var t=new Uint32Array(e,0,13),i=t[0],r=0x3525650===i?t[2]:t[3],n=t[4],s=o[r].glFormat[n],a=o[r].sizeFunc,h=t[11],c=t[7],l=t[6],d=new Uint8Array(e,52+t[12]),u=Array(h),f=0,p=c,g=l,m=0;m<h;m++){var v=a(p,g);u[m]={data:new Uint8Array(d.buffer,d.byteOffset+f,v),width:p,height:g},p=Math.max(1,p>>1),g=Math.max(1,g>>1),f+=v}return{mipmaps:u,width:c,height:l,internalFormat:s,compressed:!0,generateMipmap:!1}}},75549:(e,t,i)=>{var r=i(95540);e.exports=function(e,t,i,n,s,a,o){var h=r(o,"frameWidth",null),c=r(o,"frameHeight",h);if(null===h)throw Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var l=e.source[t];e.add("__BASE",t,0,0,l.width,l.height);var d=r(o,"startFrame",0),u=r(o,"endFrame",-1),f=r(o,"margin",0),p=r(o,"spacing",0),g=Math.floor((s-f+p)/(h+p))*Math.floor((a-f+p)/(c+p));0===g&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",e.key),(d>g||d<-g)&&(d=0),d<0&&(d=g+d),(-1===u||u>g||u<d)&&(u=g);for(var m=f,v=f,y=0,b=0,x=0,E=0;E<g;E++){y=0,b=0;var T=m+h,A=v+c;T>s&&(y=T-s),A>a&&(b=A-a),E>=d&&E<=u&&(e.add(x,t,i+m,n+v,h-y,c-b),x++),(m+=h+p)+h>s&&(m=f,v+=c+p)}return e}},47534:(e,t,i)=>{var r=i(95540);e.exports=function(e,t,i){var n,s=r(i,"frameWidth",null),a=r(i,"frameHeight",s);if(!s)throw Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=e.source[0];e.add("__BASE",0,0,0,o.width,o.height);var h=r(i,"startFrame",0),c=r(i,"endFrame",-1),l=r(i,"margin",0),d=r(i,"spacing",0),u=t.cutX,f=t.cutY,p=t.cutWidth,g=t.cutHeight,m=t.realWidth,v=t.realHeight,y=Math.floor((m-l+d)/(s+d)),b=Math.floor((v-l+d)/(a+d)),x=y*b,E=t.x,T=s-E,A=s-(m-p-E),w=t.y,S=a-w,C=a-(v-g-w);(h>x||h<-x)&&(h=0),h<0&&(h=x+h),-1!==c&&(x=h+(c+1));for(var I=l,_=l,O=0,P=0;P<b;P++){for(var M=0===P,R=P===b-1,L=0;L<y;L++){var D=0===L,k=L===y-1;if(n=e.add(O,0,u+I,f+_,s,a),D||M||k||R){var N=D?E:0,F=M?w:0,B=0,U=0;D&&(B+=s-T),k&&(B+=s-A),M&&(U+=a-S),R&&(U+=a-C);var G=s-B,V=a-U;n.cutWidth=G,n.cutHeight=V,n.setTrim(s,a,N,F,G,V)}I+=d,D?I+=T:k?I+=A:I+=s,O++}I=l,_+=d,M?_+=S:R?_+=C:_+=a}return e}},86147:e=>{var t=0,i=function(e,i,r,n){var s=t-n.y-n.height;e.add(r,i,n.x,s,n.width,n.height)};e.exports=function(e,r,n){var s=e.source[r];e.add("__BASE",r,0,0,s.width,s.height),t=s.height;for(var a=n.split("\n"),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",c="",l={x:0,y:0,width:0,height:0},d=0;d<a.length;d++){var u=a[d].match(o);if(u){var f="- "===u[1],p=u[2],g=u[3];if(f&&(c!==h&&(i(e,r,c,l),h=c),l={x:0,y:0,width:0,height:0}),"name"===p){c=g;continue}switch(p){case"x":case"y":case"width":case"height":l[p]=parseInt(g,10)}}}return c!==h&&i(e,r,c,l),e}},55222:(e,t,i)=>{var r=i(50030);function n(e){for(var t=e.mipmaps,i=0;i<t.length;i++){var r=t[i].width,n=t[i].height;if((r<<i)%4!=0||(n<<i)%4!=0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+i+" is "+r+"x"+n),!1}return!0}function s(){return!0}function a(e){var t=e.mipmaps[0];return!!r(t.width,t.height)||(console.warn("PVRTC base dimensions must be power of two. Base level is "+t.width+"x"+t.height),!1)}function o(e){var t=e.mipmaps[0];return t.width%4==0&&t.height%4==0||(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+t.width+"x"+t.height+" pixels"),!1)}var h={37488:s,37489:s,37490:s,37491:s,37492:s,37493:s,37494:s,37495:s,37496:s,37497:s,36196:s,37808:s,37809:s,37810:s,37811:s,37812:s,37813:s,37814:s,37815:s,37816:s,37817:s,37818:s,37819:s,37820:s,37821:s,37840:s,37841:s,37842:s,37843:s,37844:s,37845:s,37846:s,37847:s,37848:s,37849:s,37850:s,37851:s,37852:s,37853:s,36492:n,36493:n,36494:n,36495:n,36283:n,36284:n,36285:n,36286:n,35840:a,35841:a,35842:a,35843:a,33776:n,33777:n,33778:n,33779:n,35916:o,35917:o,35918:o,35919:o};e.exports=function(e){for(var t=e.mipmaps,i=1;i<t.length;i++){var n=t[i].width,s=t[i].height;if(!r(n,s))return console.warn("Mip level "+i+" is not a power-of-two size: "+n+"x"+s),!1}var a=h[e.internalFormat];return a?a(e):(console.warn("No format checker found for internal format "+e.internalFormat+". Assuming valid."),!0)}},61309:(e,t,i)=>{e.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:e=>{e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e,t,i,r,n,s,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===s&&(s=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|n,this.imageSpacing=0|s,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t,i,r){return this.images.push({gid:e,image:t,width:i,height:r}),this.total++,this}})},27462:(e,t,i)=>{e.exports=new(i(83419))({initialize:function(e){if(this.gids=[],void 0!==e)for(var t=0;t<e.length;++t)for(var i=e[t],r=0;r<i.total;++r)this.gids[i.firstgid+r]=i;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(e){this.gids=e?this._gids:void 0}},getTypeIncludingTile:function(e){if(void 0!==e.type&&""!==e.type)return e.type;if(this.gids&&void 0!==e.gid){var t=this.gids[e.gid];if(t){var i=t.getTileData(e.gid);if(i)return i.type}}},setTextureAndFrame:function(e,t,i,r){if(null===t&&this.gids&&void 0!==r.gid){var n=this.gids[r.gid];n&&(null===t&&void 0!==n.image&&(t=n.image.key),null===i&&(i=r.gid-n.firstgid),e.scene.textures.getFrame(t,i)||(t=null,i=null))}e.setTexture(t,i)},setPropertiesFromTiledObject:function(e,t){if(void 0!==this.gids&&void 0!==t.gid){var i=this.gids[t.gid];void 0!==i&&this.setFromJSON(e,i.getTileProperties(t.gid))}this.setFromJSON(e,t.properties)},setFromJSON:function(e,t){if(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++){var r=t[i];void 0!==e[r.name]?e[r.name]=r.value:e.setData(r.name,r.value)}return}for(var n in t)void 0!==e[n]?e[n]=t[n]:e.setData(n,t[n])}}})},31989:(e,t,i)=>{var r=i(80341),n=i(87010),s=i(46177),a=i(49075);e.exports=function(e,t,i,o,h,c,l,d){void 0===i&&(i=32),void 0===o&&(o=32),void 0===h&&(h=10),void 0===c&&(c=10),void 0===d&&(d=!1);var u=null;if(Array.isArray(l))u=s(void 0!==t?t:"map",r.ARRAY_2D,l,i,o,d);else if(void 0!==t){var f=e.cache.tilemap.get(t);f?u=s(t,f.format,f.data,i,o,d):console.warn("No map data found for key "+t)}return null===u&&(u=new n({tileWidth:i,tileHeight:o,width:h,height:c})),new a(e,u)}},23029:(e,t,i)=>{var r=i(83419),n=i(31401),s=i(91907),a=i(62644),o=i(93232);e.exports=new r({Mixins:[n.AlphaSingle,n.Flip,n.Visible],initialize:function(e,t,i,r,n,s,a,o){this.layer=e,this.index=t,this.x=i,this.y=r,this.width=n,this.height=s,this.right,this.bottom,this.baseWidth=void 0!==a?a:n,this.baseHeight=void 0!==o?o:s,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=0xffffff,this.tintFill=!1,this.physics={}},containsPoint:function(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function(e){return this.index=e.index,this.alpha=e.alpha,this.properties=a(e.properties),this.visible=e.visible,this.setFlip(e.flipX,e.flipY),this.tint=e.tint,this.rotation=e.rotation,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(e){var t=this.tilemapLayer;return t?t.tileToWorldXY(this.x,this.y,void 0,e).x:this.x*this.baseWidth},getRight:function(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function(e){var t=this.tilemapLayer;return t?t.tileToWorldXY(this.x,this.y,void 0,e).y:this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function(e,t){return void 0===t&&(t=new o),t.x=this.getLeft(e),t.y=this.getTop(e),t.width=this.getRight(e)-t.x,t.height=this.getBottom(e)-t.y,t},getCenterX:function(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function(e){return(this.getTop(e)+this.getBottom(e))/2},intersects:function(e,t,i,r){return!(i<=this.pixelX||r<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function(e,t){return e&&t?this.canCollide||this.hasInterestingFace:e?this.collides:!!t&&this.hasInterestingFace},resetCollision:function(e){return void 0===e&&(e=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,e&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(e,t,i,r,n){return void 0===t&&(t=e),void 0===i&&(i=e),void 0===r&&(r=e),void 0===n&&(n=!0),this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=r,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=r,n&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(e,t){return null===e?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=e,this.collisionCallbackContext=t),this},setSize:function(e,t,i,r){return void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var e=this.layer.orientation;if(e===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(e===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(e===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(e===s.HEXAGONAL){var t,i,r=this.layer.staggerAxis,n=this.layer.staggerIndex,a=this.layer.hexSideLength;"y"===r?(i=(this.baseHeight-a)/2+a,"odd"===n?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*i):"x"===r&&(t=(this.baseWidth-a)/2+a,this.pixelX=this.x*t,"odd"===n?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t)return t}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var e=this.tilemapLayer;return e?e.tilemap:null}}})},49075:(e,t,i)=>{var r=i(84101),n=i(83419),s=i(39506),a=i(80341),o=i(95540),h=i(14977),c=i(27462),l=i(91907),d=i(36305),u=i(19133),f=i(68287),p=i(23029),g=i(81086),m=i(20442),v=i(33629);e.exports=new n({initialize:function(e,t){this.scene=e,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.width=t.width,this.height=t.height,this.orientation=t.orientation,this.renderOrder=t.renderOrder,this.format=t.format,this.version=t.version,this.properties=t.properties,this.widthInPixels=t.widthInPixels,this.heightInPixels=t.heightInPixels,this.imageCollections=t.imageCollections,this.images=t.images,this.layers=t.layers,this.tiles=t.tiles,this.tilesets=t.tilesets,this.objects=t.objects,this.currentLayerIndex=0,this.hexSideLength=t.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(i),WorldToTileX:g.GetWorldToTileXFunction(i),WorldToTileY:g.GetWorldToTileYFunction(i),TileToWorldXY:g.GetTileToWorldXYFunction(i),TileToWorldX:g.GetTileToWorldXFunction(i),TileToWorldY:g.GetTileToWorldYFunction(i),GetTileCorners:g.GetTileCornersFunction(i)}},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];return"number"==typeof e&&(e=t[e]),t.indexOf(e)>-1&&(this.renderOrder=e),this},addTilesetImage:function(e,t,i,n,s,o,h,c){if(void 0===e)return null;null==t&&(t=e);var l=this.scene.sys.textures;if(!l.exists(t))return console.warn('Texture key "%s" not found',t),null;var d=l.get(t),u=this.getTilesetIndex(e);if(null===u&&this.format===a.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',e,this.tilesets),null;var f=this.tilesets[u];return f?((i||n)&&f.setTileSize(i,n),(s||o)&&f.setSpacing(s,o),f.setImage(d)):(void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===s&&(s=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===c&&(c={x:0,y:0}),(f=new v(e,h,i,n,s,o,void 0,void 0,c)).setImage(d),this.tilesets.push(f),this.tiles=r(this)),f},copy:function(e,t,i,r,n,s,a,o){return null!==(o=this.getLayer(o))?(g.Copy(e,t,i,r,n,s,a,o),this):null},createBlankLayer:function(e,t,i,r,n,s,a,o){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=this.width),void 0===s&&(s=this.height),void 0===a&&(a=this.tileWidth),void 0===o&&(o=this.tileHeight),null!==this.getLayerIndex(e))return console.warn("Invalid Tilemap Layer ID: "+e),null;for(var c,l=new h({name:e,tileWidth:a,tileHeight:o,width:n,height:s,orientation:this.orientation,hexSideLength:this.hexSideLength}),d=0;d<s;d++){c=[];for(var u=0;u<n;u++)c.push(new p(l,-1,u,d,a,o,this.tileWidth,this.tileHeight));l.data.push(c)}this.layers.push(l),this.currentLayerIndex=this.layers.length-1;var f=new m(this.scene,this,this.currentLayerIndex,t,i,r);return f.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(f),f},createLayer:function(e,t,i,r){var n=this.getLayerIndex(e);if(null===n)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var s=this.layers[n];if(s.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=n,void 0===i&&(i=s.x),void 0===r&&(r=s.y);var a=new m(this.scene,this,n,t,i,r);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(e,t,i){void 0===i&&(i=!0);var r=[],n=this.getObjectLayer(e);if(!n)return console.warn("createFromObjects: Invalid objectLayerName given: "+e),r;var a=new c(i?this.tilesets:void 0);Array.isArray(t)||(t=[t]);for(var h=n.objects,u=0;u<t.length;u++){var p,g=t[u],m=o(g,"id",null),v=o(g,"gid",null),y=o(g,"name",null),b=o(g,"type",null);a.enabled=!o(g,"ignoreTileset",null);for(var x=[],E=0;E<h.length;E++)p=h[E],(null===m&&null===v&&null===y&&null===b||null!==m&&p.id===m||null!==v&&p.gid===v||null!==y&&p.name===y||null!==b&&a.getTypeIncludingTile(p)===b)&&x.push(p);for(var T=o(g,"classType",f),A=o(g,"scene",this.scene),w=o(g,"container",null),S=o(g,"key",null),C=o(g,"frame",null),I=0;I<x.length;I++){p=x[I];var _=new T(A);if(_.setName(p.name),_.setPosition(p.x,p.y),a.setTextureAndFrame(_,S,C,p),p.width&&(_.displayWidth=p.width),p.height&&(_.displayHeight=p.height),this.orientation===l.ISOMETRIC){var O=this.tileWidth/this.tileHeight,P={x:_.x-_.y,y:(_.x+_.y)/O};_.x=P.x,_.y=P.y}var M={x:_.originX*p.width,y:(_.originY-!!p.gid)*p.height};if(p.rotation){var R=s(p.rotation);d(M,R),_.rotation=R}_.x+=M.x,_.y+=M.y,(void 0!==p.flippedHorizontal||void 0!==p.flippedVertical)&&_.setFlip(p.flippedHorizontal,p.flippedVertical),p.visible||(_.visible=!1),a.setPropertiesFromTiledObject(_,p),w?w.add(_):A.add.existing(_),r.push(_)}}return r},createFromTiles:function(e,t,i,r,n,s){return null===(s=this.getLayer(s))?null:g.CreateFromTiles(e,t,i,r,n,s)},fill:function(e,t,i,r,n,s,a){return(void 0===s&&(s=!0),null===(a=this.getLayer(a)))?null:(g.Fill(e,t,i,r,n,s,a),this)},filterObjects:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.filter(t,i)},filterTiles:function(e,t,i,r,n,s,a,o){return null===(o=this.getLayer(o))?null:g.FilterTiles(e,t,i,r,n,s,a,o)},findByIndex:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.FindByIndex(e,t,i,r)},findObject:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.find(t,i)||null},findTile:function(e,t,i,r,n,s,a,o){return null===(o=this.getLayer(o))?null:g.FindTile(e,t,i,r,n,s,a,o)},forEachTile:function(e,t,i,r,n,s,a,o){return null===(o=this.getLayer(o))?null:(g.ForEachTile(e,t,i,r,n,s,a,o),this)},getImageIndex:function(e){return this.getIndex(this.images,e)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(e){return e.name}):[]},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayer:function(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(e){return e.name}):[]},getLayerIndex:function(e){return void 0===e?this.currentLayerIndex:"string"==typeof e?this.getLayerIndexByName(e):"number"==typeof e&&e<this.layers.length?e:e instanceof m&&e.tilemap===this?e.layerIndex:null},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.GetTileAt(e,t,i,r)},getTileAtWorldXY:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:g.GetTileAtWorldXY(e,t,i,r,n)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(e){return e.name}):[]},getTilesWithin:function(e,t,i,r,n,s){return null===(s=this.getLayer(s))?null:g.GetTilesWithin(e,t,i,r,n,s)},getTilesWithinShape:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.GetTilesWithinShape(e,t,i,r)},getTilesWithinWorldXY:function(e,t,i,r,n,s,a){return null===(a=this.getLayer(a))?null:g.GetTilesWithinWorldXY(e,t,i,r,n,s,a)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){return null===(i=this.getLayer(i))?null:g.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.HasTileAtWorldXY(e,t,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,r,n){return(void 0===r&&(r=!0),null===(n=this.getLayer(n)))?null:g.PutTileAt(e,t,i,r,n)},putTileAtWorldXY:function(e,t,i,r,n,s){return(void 0===r&&(r=!0),null===(s=this.getLayer(s)))?null:g.PutTileAtWorldXY(e,t,i,r,n,s)},putTilesAt:function(e,t,i,r,n){return(void 0===r&&(r=!0),null===(n=this.getLayer(n)))?null:(g.PutTilesAt(e,t,i,r,n),this)},randomize:function(e,t,i,r,n,s){return null===(s=this.getLayer(s))?null:(g.Randomize(e,t,i,r,n,s),this)},calculateFacesAt:function(e,t,i){return null===(i=this.getLayer(i))?null:(g.CalculateFacesAt(e,t,i),this)},calculateFacesWithin:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:(g.CalculateFacesWithin(e,t,i,r,n),this)},removeLayer:function(e){var t=this.getLayerIndex(e);if(null===t)return null;u(this.layers,t);for(var i=t;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this},destroyLayer:function(e){var t=this.getLayerIndex(e);return null!==t?((e=this.layers[t]).tilemapLayer.destroy(),u(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var e=this.layers,t=0;t<e.length;t++)e[t].tilemapLayer&&e[t].tilemapLayer.destroy(!1);return e.length=0,this.currentLayerIndex=0,this},removeTile:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=!0);var r=[];Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var s=e[n];r.push(this.removeTileAt(s.x,s.y,!0,i,s.tilemapLayer)),t>-1&&this.putTileAt(t,s.x,s.y,i,s.tilemapLayer)}return r},removeTileAt:function(e,t,i,r,n){return(void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n)))?null:g.RemoveTileAt(e,t,i,r,n)},removeTileAtWorldXY:function(e,t,i,r,n,s){return(void 0===i&&(i=!0),void 0===r&&(r=!0),null===(s=this.getLayer(s)))?null:g.RemoveTileAtWorldXY(e,t,i,r,n,s)},renderDebug:function(e,t,i){return null===(i=this.getLayer(i))?null:(this.orientation===l.ORTHOGONAL&&g.RenderDebug(e,t,i),this)},renderDebugFull:function(e,t){for(var i=this.layers,r=0;r<i.length;r++)g.RenderDebug(e,t,i[r]);return this},replaceByIndex:function(e,t,i,r,n,s,a){return null===(a=this.getLayer(a))?null:(g.ReplaceByIndex(e,t,i,r,n,s,a),this)},setCollision:function(e,t,i,r,n){return(void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r)))?null:(g.SetCollision(e,t,i,r,n),this)},setCollisionBetween:function(e,t,i,r,n){return(void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n)))?null:(g.SetCollisionBetween(e,t,i,r,n),this)},setCollisionByProperty:function(e,t,i,r){return(void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r)))?null:(g.SetCollisionByProperty(e,t,i,r),this)},setCollisionByExclusion:function(e,t,i,r){return(void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r)))?null:(g.SetCollisionByExclusion(e,t,i,r),this)},setCollisionFromCollisionGroup:function(e,t,i){return(void 0===e&&(e=!0),void 0===t&&(t=!0),null===(i=this.getLayer(i)))?null:(g.SetCollisionFromCollisionGroup(e,t,i),this)},setTileIndexCallback:function(e,t,i,r){return null===(r=this.getLayer(r))?null:(g.SetTileIndexCallback(e,t,i,r),this)},setTileLocationCallback:function(e,t,i,r,n,s,a){return null===(a=this.getLayer(a))?null:(g.SetTileLocationCallback(e,t,i,r,n,s,a),this)},setLayer:function(e){var t=this.getLayerIndex(e);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e,this.layers[i].baseTileHeight=t;for(var r=this.layers[i].data,n=this.layers[i].width,s=this.layers[i].height,a=0;a<s;a++)for(var o=0;o<n;o++){var h=r[a][o];null!==h&&h.setSize(void 0,void 0,e,t)}}return this},setLayerTileSize:function(e,t,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=e,i.tileHeight=t;for(var r=i.data,n=i.width,s=i.height,a=0;a<s;a++)for(var o=0;o<n;o++){var h=r[a][o];null!==h&&h.setSize(e,t)}return this},shuffle:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:(g.Shuffle(e,t,i,r,n),this)},swapByIndex:function(e,t,i,r,n,s,a){return null===(a=this.getLayer(a))?null:(g.SwapByIndex(e,t,i,r,n,s,a),this)},tileToWorldX:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,r,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldXY(e,t,i,r,n)},getTileCorners:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.GetTileCorners(e,t,i,r)},weightedRandomize:function(e,t,i,r,n,s){return null===(s=this.getLayer(s))?null:(g.WeightedRandomize(t,i,r,n,e,s),this)},worldToTileX:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(e,t,i,r)},worldToTileY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(e,t,i,r)},worldToTileXY:function(e,t,i,r,n,s){return null===(s=this.getLayer(s))?null:this._convert.WorldToTileXY(e,t,i,r,n,s)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}})},45939:(e,t,i)=>{var r=i(44603),n=i(31989);r.register("tilemap",function(e){var t=void 0!==e?e:{};return n(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)})},46029:(e,t,i)=>{var r=i(39429),n=i(31989);r.register("tilemap",function(e,t,i,r,s,a,o){return null===e&&(e=void 0),null===t&&(t=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===s&&(s=void 0),n(this.scene,e,t,i,r,s,a,o)})},20442:(e,t,i)=>{var r=i(83419),n=i(78389),s=i(31401),a=i(95643),o=i(81086),h=i(19218),c=i(26099);e.exports=new r({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.Transform,s.Visible,s.ScrollFactor,n,h],initialize:function(e,t,i,r,n,s){a.call(this,e,"TilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=i,this.layer=t.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new c,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(n,s),this.setOrigin(0,0),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(e){var t=[],i=[],r=this.tilemap;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var s=e[n];if("string"==typeof s&&(s=r.getTileset(s)),s){i.push(s);for(var a=s.firstgid,o=0;o<s.total;o++)t[a+o]=s}}this.gidMap=t,this.tileset=i},setRenderOrder:function(e){return"string"==typeof e&&(e=["right-down","left-down","right-up","left-up"].indexOf(e)),e>=0&&e<4&&(this._renderOrder=e),this},calculateFacesAt:function(e,t){return o.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return o.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,n){return o.CreateFromTiles(e,t,i,r,n,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function(e,t,i,r,n,s,a){return o.Copy(e,t,i,r,n,s,a,this.layer),this},fill:function(e,t,i,r,n,s){return o.Fill(e,t,i,r,n,s,this.layer),this},filterTiles:function(e,t,i,r,n,s,a){return o.FilterTiles(e,t,i,r,n,s,a,this.layer)},findByIndex:function(e,t,i){return o.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,n,s,a){return o.FindTile(e,t,i,r,n,s,a,this.layer)},forEachTile:function(e,t,i,r,n,s,a){return o.ForEachTile(e,t,i,r,n,s,a,this.layer),this},setTint:function(e,t,i,r,n,s){return void 0===e&&(e=0xffffff),this.forEachTile(function(t){t.tint=e,t.tintFill=!1},this,t,i,r,n,s)},setTintFill:function(e,t,i,r,n,s){return void 0===e&&(e=0xffffff),this.forEachTile(function(t){t.tint=e,t.tintFill=!0},this,t,i,r,n,s)},getTileAt:function(e,t,i){return o.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return o.GetTileAtWorldXY(e,t,i,r,this.layer)},getIsoTileAtWorldXY:function(e,t,i,r,n){void 0===i&&(i=!0);var s=this.tempVec;return o.IsometricWorldToTileXY(e,t,!0,s,n,this.layer,i),this.getTileAt(s.x,s.y,r)},getTilesWithin:function(e,t,i,r,n){return o.GetTilesWithin(e,t,i,r,n,this.layer)},getTilesWithinShape:function(e,t,i){return o.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,n,s){return o.GetTilesWithinWorldXY(e,t,i,r,n,s,this.layer)},hasTileAt:function(e,t){return o.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return o.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function(e,t,i,r){return o.PutTileAt(e,t,i,r,this.layer)},putTileAtWorldXY:function(e,t,i,r,n){return o.PutTileAtWorldXY(e,t,i,r,n,this.layer)},putTilesAt:function(e,t,i,r){return o.PutTilesAt(e,t,i,r,this.layer),this},randomize:function(e,t,i,r,n){return o.Randomize(e,t,i,r,n,this.layer),this},removeTileAt:function(e,t,i,r){return o.RemoveTileAt(e,t,i,r,this.layer)},removeTileAtWorldXY:function(e,t,i,r,n){return o.RemoveTileAtWorldXY(e,t,i,r,n,this.layer)},renderDebug:function(e,t){return o.RenderDebug(e,t,this.layer),this},replaceByIndex:function(e,t,i,r,n,s){return o.ReplaceByIndex(e,t,i,r,n,s,this.layer),this},setSkipCull:function(e){return void 0===e&&(e=!0),this.skipCull=e,this},setCullPadding:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1),this.cullPaddingX=e,this.cullPaddingY=t,this},setCollision:function(e,t,i,r){return o.SetCollision(e,t,i,this.layer,r),this},setCollisionBetween:function(e,t,i,r){return o.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return o.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return o.SetCollisionByExclusion(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return o.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileIndexCallback:function(e,t,i){return o.SetTileIndexCallback(e,t,i,this.layer),this},setTileLocationCallback:function(e,t,i,r,n,s){return o.SetTileLocationCallback(e,t,i,r,n,s,this.layer),this},shuffle:function(e,t,i,r){return o.Shuffle(e,t,i,r,this.layer),this},swapByIndex:function(e,t,i,r,n,s){return o.SwapByIndex(e,t,i,r,n,s,this.layer),this},tileToWorldX:function(e,t){return this.tilemap.tileToWorldX(e,t,this)},tileToWorldY:function(e,t){return this.tilemap.tileToWorldY(e,t,this)},tileToWorldXY:function(e,t,i,r){return this.tilemap.tileToWorldXY(e,t,i,r,this)},getTileCorners:function(e,t,i){return this.tilemap.getTileCorners(e,t,i,this)},weightedRandomize:function(e,t,i,r,n){return o.WeightedRandomize(t,i,r,n,e,this.layer),this},worldToTileX:function(e,t,i){return this.tilemap.worldToTileX(e,t,i,this)},worldToTileY:function(e,t,i){return this.tilemap.worldToTileY(e,t,i,this)},worldToTileXY:function(e,t,i,r,n){return this.tilemap.worldToTileXY(e,t,i,r,n,this)},destroy:function(e){void 0===e&&(e=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),e&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}})},16153:(e,t,i)=>{var r=i(61340),n=new r,s=new r,a=new r;e.exports=function(e,t,i,r){var o=t.cull(i),h=o.length,c=i.alpha*t.alpha;if(0!==h&&!(c<=0)){s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),n.copyFrom(i.matrix);var l=e.currentContext,d=t.gidMap;l.save(),r?(n.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),s.e=t.x,s.f=t.y,n.multiply(s,a),a.copyToContext(l)):(s.e-=i.scrollX*t.scrollFactorX,s.f-=i.scrollY*t.scrollFactorY,s.copyToContext(l)),(!e.antialias||t.scaleX>1||t.scaleY>1)&&(l.imageSmoothingEnabled=!1);for(var u=0;u<h;u++){var f=o[u],p=d[f.index];if(p){var g=p.image.getSourceImage(),m=p.getTileTextureCoordinates(f.index),v=p.tileWidth,y=p.tileHeight;if(null!==m&&0!==v&&0!==y){var b=.5*v,x=.5*y;m.x+=p.tileOffset.x,m.y+=p.tileOffset.y,l.save(),l.translate(f.pixelX+b,f.pixelY+x),0!==f.rotation&&l.rotate(f.rotation),(f.flipX||f.flipY)&&l.scale(f.flipX?-1:1,f.flipY?-1:1),l.globalAlpha=c*f.alpha,l.drawImage(g,m.x,m.y,v,y,-b,-x,v,y),l.restore()}}}l.restore()}}},19218:(e,t,i)=>{var r=i(29747),n=r;e.exports={renderWebGL:n=i(99558),renderCanvas:i(16153)}},99558:(e,t,i)=>{var r=i(70554);e.exports=function(e,t,i){var n=t.cull(i),s=n.length,a=i.alpha*t.alpha;if(0!==s&&!(a<=0)){var o=t.gidMap,h=e.pipelines.set(t.pipeline,t),c=r.getTintAppendFloatAlpha,l=t.scrollFactorX,d=t.scrollFactorY,u=t.x,f=t.y,p=t.scaleX,g=t.scaleY;e.pipelines.preBatch(t);for(var m=0;m<s;m++){var v=n[m],y=o[v.index];if(y){var b=y.getTileTextureCoordinates(v.index),x=y.tileWidth,E=y.tileHeight;if(b&&0!==x&&0!==E){var T=.5*x,A=.5*E,w=y.glTexture,S=h.setTexture2D(w,t),C=b.x,I=b.y,_=y.tileOffset.x,O=y.tileOffset.y,P=c(v.tint,a*v.alpha);h.batchTexture(t,w,w.width,w.height,u+v.pixelX*p+(T*p-_),f+v.pixelY*g+(A*g-O),x,E,p,g,v.rotation,v.flipX,v.flipY,l,d,T,A,C,I,x,E,P,P,P,P,v.tintFill,0,0,i,null,!0,S,!0)}}}e.pipelines.postBatch(t)}}},33629:(e,t,i)=>{var r=i(83419),n=i(26099);e.exports=new r({initialize:function(e,t,i,r,s,a,o,h,c){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o={}),void 0===h&&(h={}),this.name=e,this.firstgid=t,this.tileWidth=i,this.tileHeight=r,this.tileMargin=s,this.tileSpacing=a,this.tileProperties=o,this.tileData=h,this.tileOffset=new n,void 0!==c&&this.tileOffset.set(c.x,c.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(e){return this.containsTileIndex(e)?this.tileProperties[e-this.firstgid]:null},getTileData:function(e){return this.containsTileIndex(e)?this.tileData[e-this.firstgid]:null},getTileCollisionGroup:function(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function(e){return this.containsTileIndex(e)?this.texCoordinates[e-this.firstgid]:null},setImage:function(e){this.image=e;var t=e.get(),i=e.getFrameBounds();return this.glTexture=t.source.glTexture,t.width>i.width||t.height>i.height?this.updateTileData(t.width,t.height):this.updateTileData(i.width,i.height,i.x,i.y),this},setTileSize:function(e,t){return void 0!==e&&(this.tileWidth=e),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(e,t){return void 0!==e&&(this.tileMargin=e),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(e,t,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!=0||s%1!=0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),s=Math.floor(s),this.rows=n,this.columns=s,this.total=n*s,this.texCoordinates.length=0;for(var a=this.tileMargin+i,o=this.tileMargin+r,h=0;h<this.rows;h++){for(var c=0;c<this.columns;c++)this.texCoordinates.push({x:a,y:o}),a+=this.tileWidth+this.tileSpacing;a=this.tileMargin+i,o+=this.tileHeight+this.tileSpacing}return this}})},72023:(e,t,i)=>{var r=i(7423);e.exports=function(e,t,i){var n=r(e,t,!0,i),s=r(e,t-1,!0,i),a=r(e,t+1,!0,i),o=r(e-1,t,!0,i),h=r(e+1,t,!0,i),c=n&&n.collides;return c&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),s&&s.collides&&(c&&(n.faceTop=!1),s.faceBottom=!c),a&&a.collides&&(c&&(n.faceBottom=!1),a.faceTop=!c),o&&o.collides&&(c&&(n.faceLeft=!1),o.faceRight=!c),h&&h.collides&&(c&&(n.faceRight=!1),h.faceLeft=!c),n&&!n.collides&&n.resetFaces(),n}},42573:(e,t,i)=>{var r=i(7423),n=i(7386);e.exports=function(e,t,i,s,a){for(var o=null,h=null,c=null,l=null,d=n(e,t,i,s,null,a),u=0;u<d.length;u++){var f=d[u];f&&(f.collides?(o=r(f.x,f.y-1,!0,a),h=r(f.x,f.y+1,!0,a),c=r(f.x-1,f.y,!0,a),l=r(f.x+1,f.y,!0,a),f.faceTop=!o||!o.collides,f.faceBottom=!h||!h.collides,f.faceLeft=!c||!c.collides,f.faceRight=!l||!l.collides):f.resetFaces())}}},33528:(e,t,i)=>{var r=new(i(26099));e.exports=function(e,t,i,n){var s=i.tilemapLayer,a=s.cullPaddingX,o=s.cullPaddingY,h=s.tilemap.tileToWorldXY(e,t,r,n,s);return h.x>n.worldView.x+s.scaleX*i.tileWidth*(-a-.5)&&h.x<n.worldView.right+s.scaleX*i.tileWidth*(a-.5)&&h.y>n.worldView.y+s.scaleY*i.tileHeight*(-o-1)&&h.y<n.worldView.bottom+s.scaleY*i.tileHeight*(o-.5)}},1785:(e,t,i)=>{var r=i(42573),n=i(7386),s=i(62991),a=i(23029);e.exports=function(e,t,i,o,h,c,l,d){void 0===l&&(l=!0);var u=n(e,t,i,o,null,d),f=[];u.forEach(function(e){var t=new a(e.layer,e.index,e.x,e.y,e.width,e.height,e.baseWidth,e.baseHeight);t.copy(e),f.push(t)});for(var p=h-e,g=c-t,m=0;m<f.length;m++){var v=f[m],y=v.x+p,b=v.y+g;s(y,b,d)&&d.data[b][y]&&(v.x=y,v.y=b,v.updatePixelXY(),d.data[b][y]=v)}l&&r(h-1,c-1,i+2,o+2,d),u.length=0,f.length=0}},78419:(e,t,i)=>{var r=i(62644),n=i(7386),s=i(27987);e.exports=function(e,t,i,a,o,h){i||(i={}),Array.isArray(e)||(e=[e]);var c,l=h.tilemapLayer;a||(a=l.scene),o||(o=a.cameras.main);var d=h.width,u=h.height,f=n(0,0,d,u,null,h),p=[];for(c=0;c<f.length;c++){var g=f[c],m=r(i);if(-1!==e.indexOf(g.index)){var v=l.tileToWorldXY(g.x,g.y,void 0,o,h);m.x=v.x,m.y=v.y;for(var y=["rotation","flipX","flipY","alpha","visible","tint"],b=0;b<y.length;b++){var x=y[b];m.hasOwnProperty(x)||(m[x]=g[x])}m.hasOwnProperty("origin")||(m.x+=.5*g.width,m.y+=.5*g.height),m.hasOwnProperty("useSpriteSheet")&&(m.key=g.tileset.image,m.frame=g.index-g.tileset.firstgid),p.push(a.make.sprite(m))}}if(Array.isArray(t))for(c=0;c<e.length;c++)s(e[c],t[c],0,0,d,u,h);else if(null!==t)for(c=0;c<e.length;c++)s(e[c],t,0,0,d,u,h);return p}},19545:(e,t,i)=>{var r=i(87841),n=i(63448),s=i(56583),a=new r;e.exports=function(e,t){var i=e.tilemapLayer.tilemap,r=e.tilemapLayer,o=Math.floor(i.tileWidth*r.scaleX),h=Math.floor(i.tileHeight*r.scaleY),c=s(t.worldView.x-r.x,o,0,!0)-r.cullPaddingX,l=n(t.worldView.right-r.x,o,0,!0)+r.cullPaddingX,d=s(t.worldView.y-r.y,h,0,!0)-r.cullPaddingY,u=n(t.worldView.bottom-r.y,h,0,!0)+r.cullPaddingY;return a.setTo(c,d,l-c,u-d)}},30003:(e,t,i)=>{var r=i(19545),n=i(32483);e.exports=function(e,t,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var a=e.tilemapLayer,o=r(e,t);return(a.skipCull||1!==a.scrollFactorX||1!==a.scrollFactorY)&&(o.left=0,o.right=e.width,o.top=0,o.bottom=e.height),n(e,o,s,i),i}},35137:(e,t,i)=>{var r=i(7386),n=i(42573),s=i(20576);e.exports=function(e,t,i,a,o,h,c){for(var l=-1!==c.collideIndexes.indexOf(e),d=r(t,i,a,o,null,c),u=0;u<d.length;u++)d[u].index=e,s(d[u],l);h&&n(t-1,i-1,a+2,o+2,c)}},40253:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o,h){return r(i,n,s,a,o,h).filter(e,t)}},52692:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=!1);var n,s,a,o=0;if(i){for(s=r.height-1;s>=0;s--)for(n=r.width-1;n>=0;n--)if((a=r.data[s][n])&&a.index===e)if(o===t)return a;else o+=1}else for(s=0;s<r.height;s++)for(n=0;n<r.width;n++)if((a=r.data[s][n])&&a.index===e)if(o===t)return a;else o+=1;return null}},66151:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o,h){return r(i,n,s,a,o,h).find(e,t)||null}},97560:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o,h){r(i,n,s,a,o,h).forEach(e,t)}},43305:(e,t,i)=>{var r=i(91907),n=i(30003),s=i(9474),a=i(14018),o=i(29747),h=i(54503);e.exports=function(e){return e===r.ORTHOGONAL?n:e===r.HEXAGONAL?s:e===r.STAGGERED?h:e===r.ISOMETRIC?a:o}},7423:(e,t,i)=>{var r=i(62991);e.exports=function(e,t,i,n){if(!r(e,t,n))return null;var s=n.data[t][e]||null;return s?-1===s.index?i?s:null:s:null}},60540:(e,t,i)=>{var r=i(7423),n=new(i(26099));e.exports=function(e,t,i,s,a){return a.tilemapLayer.worldToTileXY(e,t,!0,n,s),r(n.x,n.y,i,a)}},55826:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n){var s=n.baseTileWidth,a=n.baseTileHeight,o=n.tilemapLayer,h=0,c=0;o&&(i||(i=o.scene.cameras.main),h=o.x+i.scrollX*(1-o.scrollFactorX),c=o.y+i.scrollY*(1-o.scrollFactorY),s*=o.scaleX,a*=o.scaleY);var l=h+e*s,d=c+t*a;return[new r(l,d),new r(l+s,d),new r(l+s,d+a),new r(l,d+a)]}},11758:(e,t,i)=>{var r=i(91907),n=i(27229),s=i(29747),a=i(55826);e.exports=function(e){return e===r.ORTHOGONAL?a:e===r.ISOMETRIC?s:e===r.HEXAGONAL?n:(r.STAGGERED,s)}},39167:(e,t,i)=>{var r=i(91907),n=i(29747),s=i(97281);e.exports=function(e){return e===r.ORTHOGONAL?s:n}},62e3:(e,t,i)=>{var r=i(91907),n=i(19951),s=i(14127),a=i(29747),o=i(97202),h=i(70326);e.exports=function(e){return e===r.ORTHOGONAL?h:e===r.ISOMETRIC?s:e===r.HEXAGONAL?n:e===r.STAGGERED?o:a}},5984:(e,t,i)=>{var r=i(91907),n=i(29747),s=i(28054),a=i(29650);e.exports=function(e){return e===r.ORTHOGONAL?a:e===r.STAGGERED?s:n}},7386:(e,t,i)=>{var r=i(95540);e.exports=function(e,t,i,n,s,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=a.width),void 0===n&&(n=a.height),s||(s={});var o=r(s,"isNotEmpty",!1),h=r(s,"isColliding",!1),c=r(s,"hasInterestingFace",!1);e<0&&(i+=e,e=0),t<0&&(n+=t,t=0),e+i>a.width&&(i=Math.max(a.width-e,0)),t+n>a.height&&(n=Math.max(a.height-t,0));for(var l=[],d=t;d<t+n;d++)for(var u=e;u<e+i;u++){var f=a.data[d][u];if(null!==f){if(o&&-1===f.index||h&&!f.collides||c&&!f.hasInterestingFace)continue;l.push(f)}}return l}},91141:(e,t,i)=>{var r=i(55738),n=i(7386),s=i(91865),a=i(29747),o=i(26099),h=i(91907),c=function(e,t){return s.RectangleToTriangle(t,e)},l=new o,d=new o,u=new o;e.exports=function(e,t,i,o){if(o.orientation!==h.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(void 0===e)return[];var f=a;e instanceof r.Circle?f=s.CircleToRectangle:e instanceof r.Rectangle?f=s.RectangleToRectangle:e instanceof r.Triangle?f=c:e instanceof r.Line&&(f=s.LineToRectangle),o.tilemapLayer.worldToTileXY(e.left,e.top,!0,d,i);var p=d.x,g=d.y;o.tilemapLayer.worldToTileXY(e.right,e.bottom,!1,u,i);var m=Math.ceil(u.x),v=Math.ceil(u.y),y=Math.max(m-p,1),b=Math.max(v-g,1),x=n(p,g,y,b,t,o),E=o.tileWidth,T=o.tileHeight;o.tilemapLayer&&(E*=o.tilemapLayer.scaleX,T*=o.tilemapLayer.scaleY);for(var A=[],w=new r.Rectangle(0,0,E,T),S=0;S<x.length;S++){var C=x[S];o.tilemapLayer.tileToWorldXY(C.x,C.y,l,i),w.x=l.x,w.y=l.y,f(e,w)&&A.push(C)}return A}},96523:(e,t,i)=>{var r=i(7386),n=i(26099),s=new n,a=new n;e.exports=function(e,t,i,n,o,h,c){var l=c.tilemapLayer.tilemap._convert.WorldToTileXY;l(e,t,!0,s,h,c);var d=s.x,u=s.y;return l(e+i,t+n,!1,a,h,c),r(d,u,Math.ceil(a.x)-d,Math.ceil(a.y)-u,o,c)}},96113:(e,t,i)=>{var r=i(91907),n=i(20242),s=i(10095);e.exports=function(e){return e===r.ORTHOGONAL?s:n}},16926:(e,t,i)=>{var r=i(91907),n=i(86625),s=i(96897),a=i(29747),o=i(15108),h=i(85896);e.exports=function(e){return e===r.ORTHOGONAL?h:e===r.ISOMETRIC?s:e===r.HEXAGONAL?n:e===r.STAGGERED?o:a}},55762:(e,t,i)=>{var r=i(91907),n=i(20242),s=i(51900),a=i(63288);e.exports=function(e){return e===r.ORTHOGONAL?a:e===r.STAGGERED?s:n}},45091:(e,t,i)=>{var r=i(62991);e.exports=function(e,t,i){if(!r(e,t,i))return!1;var n=i.data[t][e];return null!==n&&n.index>-1}},24152:(e,t,i)=>{var r=i(45091),n=new(i(26099));e.exports=function(e,t,i,s){return s.tilemapLayer.worldToTileXY(e,t,!0,n,i),r(n.x,n.y,s)}},90454:(e,t,i)=>{var r=i(63448),n=i(56583);e.exports=function(e,t){var i,s,a,o,h=e.tilemapLayer.tilemap,c=e.tilemapLayer,l=Math.floor(h.tileWidth*c.scaleX),d=Math.floor(h.tileHeight*c.scaleY),u=e.hexSideLength;if("y"===e.staggerAxis){var f=(d-u)/2+u;i=n(t.worldView.x-c.x,l,0,!0)-c.cullPaddingX,s=r(t.worldView.right-c.x,l,0,!0)+c.cullPaddingX,a=n(t.worldView.y-c.y,f,0,!0)-c.cullPaddingY,o=r(t.worldView.bottom-c.y,f,0,!0)+c.cullPaddingY}else{var p=(l-u)/2+u;i=n(t.worldView.x-c.x,p,0,!0)-c.cullPaddingX,s=r(t.worldView.right-c.x,p,0,!0)+c.cullPaddingX,a=n(t.worldView.y-c.y,d,0,!0)-c.cullPaddingY,o=r(t.worldView.bottom-c.y,d,0,!0)+c.cullPaddingY}return{left:i,right:s,top:a,bottom:o}}},9474:(e,t,i)=>{var r=i(90454),n=i(32483);e.exports=function(e,t,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var a=e.tilemapLayer,o=r(e,t);return a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY&&(o.left=0,o.right=e.width,o.top=0,o.bottom=e.height),n(e,o,s,i),i}},27229:(e,t,i)=>{var r=i(19951),n=i(26099),s=new n;e.exports=function(e,t,i,a){var o,h,c=a.baseTileWidth,l=a.baseTileHeight,d=a.tilemapLayer;d&&(c*=d.scaleX,l*=d.scaleY);var u=r(e,t,s,i,a),f=[];"y"===a.staggerAxis?(o=.5773502691896257*c,h=l/2):(o=c/2,h=.5773502691896257*l);for(var p=0;p<6;p++){var g=2*Math.PI*(.5-p)/6;f.push(new n(u.x+o*Math.cos(g),u.y+h*Math.sin(g)))}return f}},19951:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s){i||(i=new r);var a,o,h=s.baseTileWidth,c=s.baseTileHeight,l=s.tilemapLayer,d=0,u=0;l&&(n||(n=l.scene.cameras.main),d=l.x+n.scrollX*(1-l.scrollFactorX),u=l.y+n.scrollY*(1-l.scrollFactorY),h*=l.scaleX,c*=l.scaleY);var f=h/2,p=c/2,g=s.staggerAxis,m=s.staggerIndex;return"y"===g?(a=d+h*e+h,o=u+1.5*t*p+p,t%2==0&&("odd"===m?a-=f:a+=f)):"x"===g&&"odd"===m&&(a=d+1.5*e*f+f,o=u+c*e+c,e%2==0&&("odd"===m?o-=p:o+=p)),i.set(a,o)}},86625:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s,a){n||(n=new r);var o,h,c,l,d,u,f=a.baseTileWidth,p=a.baseTileHeight,g=a.tilemapLayer;g&&(s||(s=g.scene.cameras.main),e-=g.x+s.scrollX*(1-g.scrollFactorX),t-=g.y+s.scrollY*(1-g.scrollFactorY),f*=g.scaleX,p*=g.scaleY);var m=f/2,v=p/2;"y"===a.staggerAxis?(c=.5773502691896257*(o=(e-m)/(.5773502691896257*f))+-.3333333333333333*(h=(t-v)/v),l=0*o+.6666666666666666*h):(c=-.3333333333333333*(o=(e-m)/m)+.5773502691896257*(h=(t-v)/(.5773502691896257*p)),l=.6666666666666666*o+0*h),d=-c-l;var y=Math.round(c),b=Math.round(l),x=Math.round(d),E=Math.abs(y-c),T=Math.abs(b-l),A=Math.abs(x-d);E>T&&E>A?y=-b-x:T>A&&(b=-y-x);var w=b;return u="odd"===a.staggerIndex?w%2==0?b/2+y:b/2+y-.5:w%2==0?b/2+y:b/2+y+.5,n.set(u,w)}},62991:e=>{e.exports=function(e,t,i){return e>=0&&e<i.width&&t>=0&&t<i.height}},14018:(e,t,i)=>{var r=i(33528);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var s,a,o,h=e.tilemapLayer,c=e.data,l=e.width,d=e.height,u=h.skipCull;if(0===n)for(a=0;a<d;a++)for(s=0;s<l;s++)(o=c[a][s])&&-1!==o.index&&o.visible&&0!==o.alpha&&(u||r(s,a,e,t))&&i.push(o);else if(1===n)for(a=0;a<d;a++)for(s=l;s>=0;s--)(o=c[a][s])&&-1!==o.index&&o.visible&&0!==o.alpha&&(u||r(s,a,e,t))&&i.push(o);else if(2===n)for(a=d;a>=0;a--)for(s=0;s<l;s++)(o=c[a][s])&&-1!==o.index&&o.visible&&0!==o.alpha&&(u||r(s,a,e,t))&&i.push(o);else if(3===n)for(a=d;a>=0;a--)for(s=l;s>=0;s--)(o=c[a][s])&&-1!==o.index&&o.visible&&0!==o.alpha&&(u||r(s,a,e,t))&&i.push(o);return h.tilesDrawn=i.length,h.tilesTotal=l*d,i}},14127:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s){i||(i=new r);var a=s.baseTileWidth,o=s.baseTileHeight,h=s.tilemapLayer,c=0,l=0;h&&(n||(n=h.scene.cameras.main),c=h.x+n.scrollX*(1-h.scrollFactorX),a*=h.scaleX,l=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var d=c+a/2*(e-t),u=l+o/2*(e+t);return i.set(d,u)}},96897:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s,a,o){n||(n=new r);var h=a.baseTileWidth,c=a.baseTileHeight,l=a.tilemapLayer;l&&(s||(s=l.scene.cameras.main),t-=l.y+s.scrollY*(1-l.scrollFactorY),c*=l.scaleY,e-=l.x+s.scrollX*(1-l.scrollFactorX),h*=l.scaleX);var d=h/2,u=c/2;e-=d,o||(t-=c);var f=.5*(e/d+t/u),p=.5*(-e/d+t/u);return i&&(f=Math.floor(f),p=Math.floor(p)),n.set(f,p)}},71558:(e,t,i)=>{var r=i(23029),n=i(62991),s=i(72023),a=i(20576);e.exports=function(e,t,i,o,h){if(void 0===o&&(o=!0),!n(t,i,h))return null;var c,l=h.data[i][t],d=l&&l.collides;e instanceof r?(null===h.data[i][t]&&(h.data[i][t]=new r(h,e.index,t,i,h.tileWidth,h.tileHeight)),h.data[i][t].copy(e)):(c=e,null===h.data[i][t]?h.data[i][t]=new r(h,c,t,i,h.tileWidth,h.tileHeight):h.data[i][t].index=c);var u=h.data[i][t],f=-1!==h.collideIndexes.indexOf(u.index);if(-1===(c=e instanceof r?e.index:e))u.width=h.tileWidth,u.height=h.tileHeight;else{var p=h.tilemapLayer.tilemap,g=p.tiles[c][2],m=p.tilesets[g];u.width=m.tileWidth,u.height=m.tileHeight}return a(u,f),o&&d!==u.collides&&s(t,i,h),u}},26303:(e,t,i)=>{var r=i(71558),n=new(i(26099));e.exports=function(e,t,i,s,a,o){return o.tilemapLayer.worldToTileXY(t,i,!0,n,a,o),r(e,n.x,n.y,s,o)}},14051:(e,t,i)=>{var r=i(42573),n=i(71558);e.exports=function(e,t,i,s,a){if(void 0===s&&(s=!0),!Array.isArray(e))return null;Array.isArray(e[0])||(e=[e]);for(var o=e.length,h=e[0].length,c=0;c<o;c++)for(var l=0;l<h;l++)n(e[c][l],t+l,i+c,!1,a);s&&r(t-1,i-1,h+2,o+2,a)}},77389:(e,t,i)=>{var r=i(7386),n=i(26546);e.exports=function(e,t,i,s,a,o){var h,c=r(e,t,i,s,{},o);if(!a)for(h=0,a=[];h<c.length;h++)-1===a.indexOf(c[h].index)&&a.push(c[h].index);for(h=0;h<c.length;h++)c[h].index=n(a)}},63557:(e,t,i)=>{var r=i(23029),n=i(62991),s=i(72023);e.exports=function(e,t,i,a,o){if(void 0===i&&(i=!0),void 0===a&&(a=!0),!n(e,t,o))return null;var h=o.data[t][e];return h?(o.data[t][e]=i?null:new r(o,-1,e,t,o.tileWidth,o.tileHeight),a&&h&&h.collides&&s(e,t,o),h):null}},94178:(e,t,i)=>{var r=i(63557),n=new(i(26099));e.exports=function(e,t,i,s,a,o){return o.tilemapLayer.worldToTileXY(e,t,!0,n,a,o),r(n.x,n.y,i,s,o)}},15533:(e,t,i)=>{var r=i(7386),n=i(3956),s=new n(105,210,231,150),a=new n(243,134,48,200),o=new n(40,39,37,150);e.exports=function(e,t,i){void 0===t&&(t={});var n=void 0!==t.tileColor?t.tileColor:s,h=void 0!==t.collidingTileColor?t.collidingTileColor:a,c=void 0!==t.faceColor?t.faceColor:o,l=r(0,0,i.width,i.height,null,i);e.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),e.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var d=0;d<l.length;d++){var u=l[d],f=u.tileset?u.tileset.tileOffset:{x:0,y:0},p=u.width,g=u.height,m=u.pixelX-f.x,v=u.pixelY-f.y,y=u.collides?h:n;null!==y&&(e.fillStyle(y.color,y.alpha/255),e.fillRect(m,v,p,g)),m+=1,v+=1,p-=2,g-=2,null!==c&&(e.lineStyle(1,c.color,c.alpha/255),u.faceTop&&e.lineBetween(m,v,m+p,v),u.faceRight&&e.lineBetween(m+p,v,m+p,v+g),u.faceBottom&&e.lineBetween(m,v+g,m+p,v+g),u.faceLeft&&e.lineBetween(m,v,m,v+g))}}},27987:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o){for(var h=r(i,n,s,a,null,o),c=0;c<h.length;c++)h[c]&&h[c].index===e&&(h[c].index=t)}},32483:e=>{e.exports=function(e,t,i,r){var n,s,a,o=e.data,h=e.width,c=e.height,l=e.tilemapLayer,d=Math.max(0,t.left),u=Math.min(h,t.right),f=Math.max(0,t.top),p=Math.min(c,t.bottom);if(0===i)for(s=f;s<p;s++)for(n=d;o[s]&&n<u;n++)(a=o[s][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(1===i)for(s=f;s<p;s++)for(n=u;o[s]&&n>=d;n--)(a=o[s][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(2===i)for(s=p;s>=f;s--)for(n=d;o[s]&&n<u;n++)(a=o[s][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(3===i)for(s=p;s>=f;s--)for(n=u;o[s]&&n>=d;n--)(a=o[s][n])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);return l.tilesDrawn=r.length,l.tilesTotal=h*c,r}},57068:(e,t,i)=>{var r=i(20576),n=i(42573),s=i(9589);e.exports=function(e,t,i,a,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),Array.isArray(e)||(e=[e]);for(var h=0;h<e.length;h++)s(e[h],t,a);if(o)for(var c=0;c<a.height;c++)for(var l=0;l<a.width;l++){var d=a.data[c][l];d&&-1!==e.indexOf(d.index)&&r(d,t)}i&&n(0,0,a.width,a.height,a)}},37266:(e,t,i)=>{var r=i(20576),n=i(42573),s=i(9589);e.exports=function(e,t,i,a,o,h){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),!(e>t)){for(var c=e;c<=t;c++)s(c,i,o);if(h)for(var l=0;l<o.height;l++)for(var d=0;d<o.width;d++){var u=o.data[l][d];u&&u.index>=e&&u.index<=t&&r(u,i)}a&&n(0,0,o.width,o.height,o)}}},75661:(e,t,i)=>{var r=i(20576),n=i(42573),s=i(9589);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var c=a.data[o][h];c&&-1===e.indexOf(c.index)&&(r(c,t),s(c.index,t,a))}i&&n(0,0,a.width,a.height,a)}},64740:(e,t,i)=>{var r=i(20576),n=i(42573),s=i(97022);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var o=0;o<a.height;o++)for(var h=0;h<a.width;h++){var c=a.data[o][h];if(c){for(var l in e)if(s(c.properties,l)){var d=e[l];Array.isArray(d)||(d=[d]);for(var u=0;u<d.length;u++)c.properties[l]===d[u]&&r(c,t)}}}i&&n(0,0,a.width,a.height,a)}},63307:(e,t,i)=>{var r=i(20576),n=i(42573);e.exports=function(e,t,i){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var s=0;s<i.height;s++)for(var a=0;a<i.width;a++){var o=i.data[s][a];if(o){var h=o.getCollisionGroup();h&&h.objects&&h.objects.length>0&&r(o,e)}}t&&n(0,0,i.width,i.height,i)}},9589:e=>{e.exports=function(e,t,i){var r=i.collideIndexes.indexOf(e);t&&-1===r?i.collideIndexes.push(e):t||-1===r||i.collideIndexes.splice(r,1)}},20576:e=>{e.exports=function(e,t){t?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)}},79583:e=>{e.exports=function(e,t,i,r){if("number"==typeof e)r.callbacks[e]=null!==t?{callback:t,callbackContext:i}:void 0;else for(var n=0,s=e.length;n<s;n++)r.callbacks[e[n]]=null!==t?{callback:t,callbackContext:i}:void 0}},93254:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o){for(var h=r(e,t,i,n,null,o),c=0;c<h.length;c++)h[c].setCollisionCallback(s,a)}},32903:(e,t,i)=>{var r=i(7386),n=i(33680);e.exports=function(e,t,i,s,a){var o=r(e,t,i,s,null,a),h=o.map(function(e){return e.index});n(h);for(var c=0;c<o.length;c++)o[c].index=h[c]}},61325:(e,t,i)=>{var r=i(63448),n=i(56583);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,s=e.tilemapLayer,a=Math.floor(i.tileWidth*s.scaleX),o=Math.floor(i.tileHeight*s.scaleY);return{left:n(t.worldView.x-s.x,a,0,!0)-s.cullPaddingX,right:r(t.worldView.right-s.x,a,0,!0)+s.cullPaddingX,top:n(t.worldView.y-s.y,o/2,0,!0)-s.cullPaddingY,bottom:r(t.worldView.bottom-s.y,o/2,0,!0)+s.cullPaddingY}}},54503:(e,t,i)=>{var r=i(61325),n=i(32483);e.exports=function(e,t,i,s){void 0===i&&(i=[]),void 0===s&&(s=0),i.length=0;var a=e.tilemapLayer,o=r(e,t);return a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY&&(o.left=0,o.right=e.width,o.top=0,o.bottom=e.height),n(e,o,s,i),i}},97202:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s){i||(i=new r);var a=s.baseTileWidth,o=s.baseTileHeight,h=s.tilemapLayer,c=0,l=0;h&&(n||(n=h.scene.cameras.main),c=h.x+n.scrollX*(1-h.scrollFactorX),a*=h.scaleX,l=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY);var d=c+e*a+t%2*(a/2),u=l+o/2*t;return i.set(d,u)}},28054:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(void 0===t&&(t=n.scene.cameras.main),s=n.y+t.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+r/2*e+r}},15108:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s,a){n||(n=new r);var o=a.baseTileWidth,h=a.baseTileHeight,c=a.tilemapLayer;c&&(s||(s=c.scene.cameras.main),t-=c.y+s.scrollY*(1-c.scrollFactorY),h*=c.scaleY,e-=c.x+s.scrollX*(1-c.scrollFactorX),o*=c.scaleX);var l=i?Math.floor(t/(h/2)):t/(h/2),d=i?Math.floor((e+l%2*.5*o)/o):(e+l%2*.5*o)/o;return n.set(d,l)}},51900:e=>{e.exports=function(e,t,i,r){var n=r.baseTileHeight,s=r.tilemapLayer;return s&&(i||(i=s.scene.cameras.main),e-=s.y+i.scrollY*(1-s.scrollFactorY),n*=s.scaleY),t?Math.floor(e/(n/2)):e/(n/2)}},86560:(e,t,i)=>{var r=i(7386);e.exports=function(e,t,i,n,s,a,o){for(var h=r(i,n,s,a,null,o),c=0;c<h.length;c++)h[c]&&(h[c].index===e?h[c].index=t:h[c].index===t&&(h[c].index=e))}},97281:e=>{e.exports=function(e,t,i){var r=i.baseTileWidth,n=i.tilemapLayer,s=0;return n&&(t||(t=n.scene.cameras.main),s=n.x+t.scrollX*(1-n.scrollFactorX),r*=n.scaleX),s+e*r}},70326:(e,t,i)=>{var r=i(97281),n=i(29650),s=i(26099);e.exports=function(e,t,i,a,o){return i||(i=new s(0,0)),i.x=r(e,a,o),i.y=n(t,a,o),i}},29650:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,n=i.tilemapLayer,s=0;return n&&(t||(t=n.scene.cameras.main),s=n.y+t.scrollY*(1-n.scrollFactorY),r*=n.scaleY),s+e*r}},77366:(e,t,i)=>{var r=i(7386),n=i(75508);e.exports=function(e,t,i,s,a,o){if(a){var h,c=r(e,t,i,s,null,o),l=0;for(h=0;h<a.length;h++)l+=a[h].weight;if(!(l<=0))for(h=0;h<c.length;h++){for(var d=n.RND.frac()*l,u=0,f=-1,p=0;p<a.length;p++)if(d<=(u+=a[p].weight)){var g=a[p].index;f=Array.isArray(g)?g[Math.floor(n.RND.frac()*g.length)]:g;break}c[h].index=f}}}},10095:(e,t,i)=>{var r=i(85896),n=new(i(26099));e.exports=function(e,t,i,s){return r(e,0,t,n,i,s),n.x}},85896:(e,t,i)=>{var r=i(26099);e.exports=function(e,t,i,n,s,a){void 0===i&&(i=!0),n||(n=new r);var o=a.baseTileWidth,h=a.baseTileHeight,c=a.tilemapLayer;c&&(s||(s=c.scene.cameras.main),e-=c.x+s.scrollX*(1-c.scrollFactorX),t-=c.y+s.scrollY*(1-c.scrollFactorY),o*=c.scaleX,h*=c.scaleY);var l=e/o,d=t/h;return i&&(l=Math.floor(l),d=Math.floor(d)),n.set(l,d)}},63288:(e,t,i)=>{var r=i(85896),n=new(i(26099));e.exports=function(e,t,i,s){return r(0,e,t,n,i,s),n.y}},81086:(e,t,i)=>{e.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:e=>{e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(e,t,i)=>{e.exports={ORIENTATION:i(91907)}},62501:(e,t,i)=>{var r=i(79291),n=i(21829),s={Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)};e.exports=s=r(!1,s,n.ORIENTATION)},14977:(e,t,i)=>{var r=i(83419),n=i(91907),s=i(95540);e.exports=new r({initialize:function(e){void 0===e&&(e={}),this.name=s(e,"name","layer"),this.id=s(e,"id",0),this.x=s(e,"x",0),this.y=s(e,"y",0),this.width=s(e,"width",0),this.height=s(e,"height",0),this.tileWidth=s(e,"tileWidth",0),this.tileHeight=s(e,"tileHeight",0),this.baseTileWidth=s(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(e,"baseTileHeight",this.tileHeight),this.orientation=s(e,"orientation",n.ORTHOGONAL),this.widthInPixels=s(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(e,"alpha",1),this.visible=s(e,"visible",!0),this.properties=s(e,"properties",[]),this.indexes=s(e,"indexes",[]),this.collideIndexes=s(e,"collideIndexes",[]),this.callbacks=s(e,"callbacks",[]),this.bodies=s(e,"bodies",[]),this.data=s(e,"data",[]),this.tilemapLayer=s(e,"tilemapLayer",null),this.hexSideLength=s(e,"hexSideLength",0),this.staggerAxis=s(e,"staggerAxis","y"),this.staggerIndex=s(e,"staggerIndex","odd")}})},87010:(e,t,i)=>{var r=i(83419),n=i(91907),s=i(95540);e.exports=new r({initialize:function(e){void 0===e&&(e={}),this.name=s(e,"name","map"),this.width=s(e,"width",0),this.height=s(e,"height",0),this.infinite=s(e,"infinite",!1),this.tileWidth=s(e,"tileWidth",0),this.tileHeight=s(e,"tileHeight",0),this.widthInPixels=s(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(e,"heightInPixels",this.height*this.tileHeight),this.format=s(e,"format",null),this.orientation=s(e,"orientation",n.ORTHOGONAL),this.renderOrder=s(e,"renderOrder","right-down"),this.version=s(e,"version","1"),this.properties=s(e,"properties",{}),this.layers=s(e,"layers",[]),this.images=s(e,"images",[]),this.objects=s(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=s(e,"collision",{}),this.tilesets=s(e,"tilesets",[]),this.imageCollections=s(e,"imageCollections",[]),this.tiles=s(e,"tiles",[]),this.hexSideLength=s(e,"hexSideLength",0),this.staggerAxis=s(e,"staggerAxis","y"),this.staggerIndex=s(e,"staggerIndex","odd")}})},48700:(e,t,i)=>{var r=i(83419),n=i(95540);e.exports=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","object layer"),this.id=n(e,"id",0),this.opacity=n(e,"opacity",1),this.properties=n(e,"properties",{}),this.propertyTypes=n(e,"propertytypes",{}),this.type=n(e,"type","objectgroup"),this.visible=n(e,"visible",!0),this.objects=n(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}})},6641:(e,t,i)=>{var r=i(91907);e.exports=function(e){return"isometric"===(e=e.toLowerCase())?r.ISOMETRIC:"staggered"===e?r.STAGGERED:"hexagonal"===e?r.HEXAGONAL:r.ORTHOGONAL}},46177:(e,t,i)=>{var r=i(80341),n=i(2342),s=i(82593),a=i(46594),o=i(87021);e.exports=function(e,t,i,h,c,l){var d;switch(t){case r.ARRAY_2D:d=n(e,i,h,c,l);break;case r.CSV:d=s(e,i,h,c,l);break;case r.TILED_JSON:d=a(e,i,l);break;case r.WELTMEISTER:d=o(e,i,l);break;default:console.warn("Unrecognized tilemap data format: "+t),d=null}return d}},2342:(e,t,i)=>{var r=i(80341),n=i(14977),s=i(87010),a=i(23029);e.exports=function(e,t,i,o,h){for(var c=new n({tileWidth:i,tileHeight:o}),l=new s({name:e,tileWidth:i,tileHeight:o,format:r.ARRAY_2D,layers:[c]}),d=[],u=t.length,f=0,p=0;p<t.length;p++){d[p]=[];for(var g=t[p],m=0;m<g.length;m++){var v=parseInt(g[m],10);isNaN(v)||-1===v?d[p][m]=h?null:new a(c,-1,m,p,i,o):d[p][m]=new a(c,v,m,p,i,o)}0===f&&(f=g.length)}return l.width=c.width=f,l.height=c.height=u,l.widthInPixels=c.widthInPixels=f*i,l.heightInPixels=c.heightInPixels=u*o,c.data=d,l}},82593:(e,t,i)=>{var r=i(80341),n=i(2342);e.exports=function(e,t,i,s,a){var o=n(e,t.trim().split("\n").map(function(e){return e.split(",")}),i,s,a);return o.format=r.CSV,o}},6656:(e,t,i)=>{var r=i(14977),n=i(23029);e.exports=function(e,t){for(var i=[],s=0;s<e.layer.length;s++){for(var a=e.layer[s],o=new r({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:1===a.visible}),h=[],c=[],l=0;l<a.data.length;l++){for(var d=0;d<a.data[l].length;d++){var u,f=a.data[l][d]-1;u=f>-1?new n(o,f,d,l,a.tilesize,a.tilesize):t?null:new n(o,-1,d,l,a.tilesize,a.tilesize),h.push(u)}c.push(h),h=[]}o.data=c,i.push(o)}return i}},96483:(e,t,i)=>{var r=i(33629);e.exports=function(e){for(var t=[],i=[],n=0;n<e.layer.length;n++){var s=e.layer[n],a=s.tilesetName;""!==a&&-1===i.indexOf(a)&&(i.push(a),t.push(new r(a,0,s.tilesize,s.tilesize,0,0)))}return t}},87021:(e,t,i)=>{var r=i(80341),n=i(87010),s=i(6656),a=i(96483);e.exports=function(e,t,i){if(0===t.layer.length)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var o=0,h=0,c=0;c<t.layer.length;c++)t.layer[c].width>o&&(o=t.layer[c].width),t.layer[c].height>h&&(h=t.layer[c].height);var l=new n({width:o,height:h,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:r.WELTMEISTER});return l.layers=s(t,i),l.tilesets=a(t),l}},52833:(e,t,i)=>{e.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(e,t,i)=>{e.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(e,t,i)=>{var r=i(79291);e.exports=function(e){for(var t,i,n,s,a,o=0;o<e.layers.length;o++){t=e.layers[o],s=null;for(var h=0;h<t.data.length;h++){a=t.data[h];for(var c=0;c<a.length;c++)null!==(i=a[c])&&!(i.index<0)&&(n=e.tiles[i.index][2],i.width=(s=e.tilesets[n]).tileWidth,i.height=s.tileHeight,s.tileProperties&&s.tileProperties[i.index-s.firstgid]&&(i.properties=r(i.properties,s.tileProperties[i.index-s.firstgid])))}}}},41868:e=>{e.exports=function(e){for(var t=window.atob(e),i=t.length,r=Array(i/4),n=0;n<i;n+=4)r[n/4]=(t.charCodeAt(n)|t.charCodeAt(n+1)<<8|t.charCodeAt(n+2)<<16|t.charCodeAt(n+3)<<24)>>>0;return r}},84101:(e,t,i)=>{var r=i(33629);e.exports=function(e){var t,i,n=[];for(t=0;t<e.imageCollections.length;t++)for(var s=e.imageCollections[t].images,a=0;a<s.length;a++){var o=s[a],h={x:0,y:o.height-e.tileHeight};(i=new r(o.image,o.gid,o.width,o.height,0,0,void 0,void 0,h)).updateTileData(o.width,o.height),e.tilesets.push(i)}for(t=0;t<e.tilesets.length;t++)for(var c=(i=e.tilesets[t]).tileMargin,l=i.tileMargin,d=0,u=0,f=0,p=i.firstgid;p<i.firstgid+i.total&&(n[p]=[c,l,t],c+=i.tileWidth+i.tileSpacing,++d!==i.total)&&(++u!==i.columns||(c=i.tileMargin,l+=i.tileHeight+i.tileSpacing,u=0,++f!==i.rows));p++);return n}},79677:(e,t,i)=>{var r=i(95540);e.exports=function(e,t,i){if(!t)return{i:0,layers:e.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=t.x+r(t,"startx",0)*e.tilewidth+r(t,"offsetx",0),s=t.y+r(t,"starty",0)*e.tileheight+r(t,"offsety",0);return{i:0,layers:t.layers,name:i.name+t.name+"/",opacity:i.opacity*t.opacity,visible:i.visible&&t.visible,x:i.x+n,y:i.y+s}}},29920:e=>{e.exports=function(e){var t=!!(0x80000000&e),i=!!(0x40000000&e),r=!!(0x20000000&e);e&=0x1fffffff;var n=0,s=!1;return t&&i&&r?(n=Math.PI/2,s=!0):t&&i&&!r?(n=Math.PI,s=!1):t&&!i&&r?(n=Math.PI/2,s=!1):!t||i||r?!t&&i&&r?(n=3*Math.PI/2,s=!1):t||!i||r?t||i||!r?t||i||r||(n=0,s=!1):(n=3*Math.PI/2,s=!0):(n=Math.PI,s=!0):(n=0,s=!0),{gid:e,flippedHorizontal:t,flippedVertical:i,flippedAntiDiagonal:r,rotation:n,flipped:s}}},12635:(e,t,i)=>{var r=i(95540),n=i(79677);e.exports=function(e){for(var t=[],i=[],s=n(e);s.i<s.layers.length||i.length>0;){if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop();continue}var a=s.layers[s.i];if(s.i++,"imagelayer"!==a.type){if("group"===a.type){var o=n(e,a,s);i.push(s),s=o}continue}var h=r(a,"offsetx",0)+r(a,"startx",0),c=r(a,"offsety",0)+r(a,"starty",0);t.push({name:s.name+a.name,image:a.image,x:s.x+h+a.x,y:s.y+c+a.y,alpha:s.opacity*a.opacity,visible:s.visible&&a.visible,properties:r(a,"properties",{})})}return t}},46594:(e,t,i)=>{var r=i(51233),n=i(84101),s=i(91907),a=i(62644),o=i(80341),h=i(6641),c=i(87010),l=i(12635),d=i(22611),u=i(28200),f=i(24619);e.exports=function(e,t,i){var p=a(t),g=new c({width:p.width,height:p.height,name:e,tileWidth:p.tilewidth,tileHeight:p.tileheight,orientation:h(p.orientation),format:o.TILED_JSON,version:p.version,properties:p.properties,renderOrder:p.renderorder,infinite:p.infinite});if(g.orientation===s.HEXAGONAL)if(g.hexSideLength=p.hexsidelength,g.staggerAxis=p.staggeraxis,g.staggerIndex=p.staggerindex,"y"===g.staggerAxis){var m=(g.tileHeight-g.hexSideLength)/2;g.widthInPixels=g.tileWidth*(g.width+.5),g.heightInPixels=g.height*(g.hexSideLength+m)+m}else{var v=(g.tileWidth-g.hexSideLength)/2;g.widthInPixels=g.width*(g.hexSideLength+v)+v,g.heightInPixels=g.tileHeight*(g.height+.5)}g.layers=u(p,i),g.images=l(p);var y=f(p);return g.tilesets=y.tilesets,g.imageCollections=y.imageCollections,g.objects=d(p),g.tiles=n(g),r(g),g}},52205:(e,t,i)=>{var r=i(18254),n=i(29920),s=function(e){return{x:e.x,y:e.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"];e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o=r(e,a);if(o.x+=t,o.y+=i,e.gid){var h=n(e.gid);o.gid=h.gid,o.flippedHorizontal=h.flippedHorizontal,o.flippedVertical=h.flippedVertical,o.flippedAntiDiagonal=h.flippedAntiDiagonal}else e.polyline?o.polyline=e.polyline.map(s):e.polygon?o.polygon=e.polygon.map(s):e.ellipse?o.ellipse=e.ellipse:e.text?o.text=e.text:e.point?o.point=!0:o.rectangle=!0;return o}},22611:(e,t,i)=>{var r=i(95540),n=i(52205),s=i(48700),a=i(79677);e.exports=function(e){for(var t=[],i=[],o=a(e);o.i<o.layers.length||i.length>0;){if(o.i>=o.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=i.pop();continue}var h=o.layers[o.i];if(o.i++,h.opacity*=o.opacity,h.visible=o.visible&&h.visible,"objectgroup"!==h.type){if("group"===h.type){var c=a(e,h,o);i.push(o),o=c}continue}h.name=o.name+h.name;for(var l=o.x+r(h,"startx",0)+r(h,"offsetx",0),d=o.y+r(h,"starty",0)+r(h,"offsety",0),u=[],f=0;f<h.objects.length;f++){var p=n(h.objects[f],l,d);u.push(p)}var g=new s(h);g.objects=u,t.push(g)}return t}},28200:(e,t,i)=>{var r=i(41868),n=i(91907),s=i(79677),a=i(6641),o=i(95540),h=i(14977),c=i(29920),l=i(23029);e.exports=function(e,t){for(var i=o(e,"infinite",!1),d=[],u=[],f=s(e);f.i<f.layers.length||u.length>0;){if(f.i>=f.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=u.pop();continue}var p,g,m,v,y,b,x=f.layers[f.i];if(f.i++,"tilelayer"!==x.type){if("group"===x.type){var E=s(e,x,f);u.push(f),f=E}continue}if(x.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+x.name+"'");continue}if(x.encoding&&"base64"===x.encoding){if(x.chunks)for(var T=0;T<x.chunks.length;T++)x.chunks[T].data=r(x.chunks[T].data);x.data&&(x.data=r(x.data)),delete x.encoding}var A=[],w=0;if(i){var S=o(x,"startx",0)+x.x,C=o(x,"starty",0)+x.y;(p=new h({name:f.name+x.name,id:x.id,x:f.x+o(x,"offsetx",0)+S*e.tilewidth,y:f.y+o(x,"offsety",0)+C*e.tileheight,width:x.width,height:x.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*x.opacity,visible:f.visible&&x.visible,properties:o(x,"properties",[]),orientation:a(e.orientation)})).orientation===n.HEXAGONAL&&(p.hexSideLength=e.hexsidelength,p.staggerAxis=e.staggeraxis,p.staggerIndex=e.staggerindex,"y"===p.staggerAxis?(y=(p.tileHeight-p.hexSideLength)/2,p.widthInPixels=p.tileWidth*(p.width+.5),p.heightInPixels=p.height*(p.hexSideLength+y)+y):(b=(p.tileWidth-p.hexSideLength)/2,p.widthInPixels=p.width*(p.hexSideLength+b)+b,p.heightInPixels=p.tileHeight*(p.height+.5)));for(var I=0;I<x.height;I++){A[I]=[null];for(var _=0;_<x.width;_++)A[I][_]=null}for(I=0,U=x.chunks.length;I<U;I++)for(var O=x.chunks[I],P=O.x-S,M=O.y-C,R=0,L=0,D=O.data.length;L<D;L++){var k=w+P,N=R+M;(g=c(O.data[L])).gid>0?((m=new l(p,g.gid,k,N,e.tilewidth,e.tileheight)).rotation=g.rotation,m.flipX=g.flipped,A[N][k]=m):(v=t?null:new l(p,-1,k,N,e.tilewidth,e.tileheight),A[N][k]=v),++w===O.width&&(R++,w=0)}}else{(p=new h({name:f.name+x.name,id:x.id,x:f.x+o(x,"offsetx",0)+x.x,y:f.y+o(x,"offsety",0)+x.y,width:x.width,height:x.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*x.opacity,visible:f.visible&&x.visible,properties:o(x,"properties",[]),orientation:a(e.orientation)})).orientation===n.HEXAGONAL&&(p.hexSideLength=e.hexsidelength,p.staggerAxis=e.staggeraxis,p.staggerIndex=e.staggerindex,"y"===p.staggerAxis?(y=(p.tileHeight-p.hexSideLength)/2,p.widthInPixels=p.tileWidth*(p.width+.5),p.heightInPixels=p.height*(p.hexSideLength+y)+y):(b=(p.tileWidth-p.hexSideLength)/2,p.widthInPixels=p.width*(p.hexSideLength+b)+b,p.heightInPixels=p.tileHeight*(p.height+.5)));for(var F=[],B=0,U=x.data.length;B<U;B++)(g=c(x.data[B])).gid>0?((m=new l(p,g.gid,w,A.length,e.tilewidth,e.tileheight)).rotation=g.rotation,m.flipX=g.flipped,F.push(m)):(v=t?null:new l(p,-1,w,A.length,e.tilewidth,e.tileheight),F.push(v)),++w===x.width&&(A.push(F),w=0,F=[])}p.data=A,d.push(p)}return d}},24619:(e,t,i)=>{var r=i(33629),n=i(16536),s=i(52205),a=i(57880);e.exports=function(e){for(var t,i=[],o=[],h=null,c=0;c<e.tilesets.length;c++){var l=e.tilesets[c];if(l.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(l.image){var d=new r(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing,void 0,void 0,l.tileoffset);if(e.version>1){var u=void 0,f=void 0;if(Array.isArray(l.tiles)){u=u||{},f=f||{};for(var p=0;p<l.tiles.length;p++){var g=l.tiles[p];if(g.properties){var m={};g.properties.forEach(function(e){m[e.name]=e.value}),f[g.id]=m}if(g.objectgroup&&((u[g.id]||(u[g.id]={})).objectgroup=g.objectgroup,g.objectgroup.objects)){var v=g.objectgroup.objects.map(function(e){return s(e)});u[g.id].objectgroup.objects=v}g.animation&&((u[g.id]||(u[g.id]={})).animation=g.animation),g.type&&((u[g.id]||(u[g.id]={})).type=g.type)}}Array.isArray(l.wangsets)&&(u=u||{},f=f||{},a(l.wangsets,u)),u&&(d.tileData=u,d.tileProperties=f)}else if(l.tileproperties&&(d.tileProperties=l.tileproperties),l.tiles)for(t in d.tileData=l.tiles,d.tileData){var y=d.tileData[t].objectgroup;if(y&&y.objects){var b=y.objects.map(function(e){return s(e)});d.tileData[t].objectgroup.objects=b}}d.updateTileData(l.imagewidth,l.imageheight),i.push(d)}else{var x=new n(l.name,l.firstgid,l.tilewidth,l.tileheight,l.margin,l.spacing,l.properties),E=0;for(p=0;p<l.tiles.length;p++){var T=(g=l.tiles[p]).image,A=parseInt(g.id,10),w=l.firstgid+A,S=g.imagewidth,C=g.imageheight;x.addImage(w,T,S,C),E=Math.max(A,E)}x.maxId=E,o.push(x)}h&&(h.lastgid=l.firstgid-1),h=l}return{tilesets:i,imageCollections:o}}},57880:e=>{e.exports=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=i;if(r.name&&""!==r.name&&(n=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var s,a,o,h={},c={};if(Array.isArray(r.edgecolors))for(s=0;s<r.edgecolors.length;s++)o=1+s,""!==(a=r.edgecolors[s]).name&&(h[o]=a.name);if(Array.isArray(r.cornercolors))for(s=0;s<r.cornercolors.length;s++)o=1+s,""!==(a=r.cornercolors[s]).name&&(c[o]=a.name);if(Array.isArray(r.colors))for(s=0;s<r.colors.length;s++)a=r.colors[s],o=1+s,""!==a.name&&(h[o]=c[o]=a.name);for(var l=[h,c,h,c,h,c,h,c],d=0;d<r.wangtiles.length;d++){var u=r.wangtiles[d],f=t[u.tileid]||(t[u.tileid]={});f=f.wangid||(f.wangid={});for(var p=[],g=0;g<Math.min(l.length,u.wangid.length);g++){if(0===(a=u.wangid[g])){p.push(void 0);continue}var m=l[g][a];if(void 0!==m){p.push(m);continue}p.push(a)}f[n]=p}}}}},96761:(e,t,i)=>{e.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(e,t,i)=>{var r=i(83419),n=i(37277),s=i(44594),a=i(94880),o=i(72905),h=new r({initialize:function(e){this.scene=e,this.systems=e.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],e.sys.events.once(s.BOOT,this.boot,this),e.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var e=this.systems.events;e.on(s.PRE_UPDATE,this.preUpdate,this),e.on(s.UPDATE,this.update,this),e.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(e){var t;if(e instanceof a){if(t=e,this.removeEvent(t),t.elapsed=t.startAt,t.hasDispatched=!1,t.repeatCount=-1===t.repeat||t.loop?0xe8d4a50fff:t.repeat,t.delay<=0&&t.repeatCount>0)throw Error("TimerEvent infinite loop created via zero delay")}else t=new a(e);return this._pendingInsertion.push(t),t},delayedCall:function(e,t,i,r){return this.addEvent({delay:e,callback:t,args:i,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];o(this._pendingRemoval,i),o(this._pendingInsertion,i),o(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e,t,i=this._pendingRemoval.length,r=this._pendingInsertion.length;if(0!==i||0!==r){for(e=0;e<i;e++){t=this._pendingRemoval[e];var n=this._active.indexOf(t);n>-1&&this._active.splice(n,1),t.destroy()}for(e=0;e<r;e++)t=this._pendingInsertion[e],this._active.push(t);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var i=0;i<this._active.length;i++){var r=this._active[i];if(!r.paused&&(r.elapsed+=t*r.timeScale,r.elapsed>=r.delay)){var n=r.elapsed-r.delay;if(r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0){if(r.repeatCount--,n>=r.delay)for(;n>=r.delay&&r.repeatCount>0;)r.callback&&r.callback.apply(r.callbackScope,r.args),n-=r.delay,r.repeatCount--;r.elapsed=n,r.hasDispatched=!1}else r.hasDispatched&&this._pendingRemoval.push(r)}}}},shutdown:function(){for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e,t=this.systems.events;t.off(s.PRE_UPDATE,this.preUpdate,this),t.off(s.UPDATE,this.update,this),t.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",h,"time"),e.exports=h},96120:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(39429),a=i(95540),o=i(44594),h=i(89809),c=new r({Extends:n,initialize:function(e,t){n.call(this),this.scene=e,this.systems=e.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var i=this.systems.events;i.on(o.PRE_UPDATE,this.preUpdate,this),i.on(o.UPDATE,this.update,this),i.once(o.SHUTDOWN,this.destroy,this),t&&this.add(t)},preUpdate:function(e,t){this.paused||(this.elapsed+=t*this.timeScale)},update:function(){if(!this.paused&&!this.complete){var e,t,i=this.events,r=!1,n=this.systems;for(e=0;e<i.length;e++){var s=i[e];if(!s.complete&&s.time<=this.elapsed){if(s.complete=!0,this.totalComplete++,t=s.target?s.target:this,s.if&&!s.if.call(t,s))continue;if(s.once&&(r=!0),s.set&&s.target)for(var a in s.set)s.target[a]=s.set[a];this.iteration&&s.repeat++,s.loop&&s.repeat&&s.loop.call(t),s.tween&&(s.tweenInstance=n.tweens.add(s.tween)),s.sound&&("string"==typeof s.sound?n.sound.play(s.sound):n.sound.play(s.sound.key,s.sound.config)),s.event&&this.emit(s.event,t),s.run&&s.run.call(t),s.stop&&this.stop()}}if(r)for(e=0;e<i.length;e++)i[e].complete&&i[e].once&&(i.splice(e,1),e--);this.totalComplete>=i.length&&(0!==this.loop&&(-1===this.loop||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(h.COMPLETE,this)}},play:function(e){return void 0===e&&(e=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,e&&this.reset(),this},pause:function(){this.paused=!0;for(var e=this.events,t=0;t<e.length;t++){var i=e[t];i.tweenInstance&&(i.tweenInstance.paused=!0)}return this},repeat:function(e){return(void 0===e||!0===e)&&(e=-1),!1===e&&(e=0),this.loop=e,this},resume:function(){this.paused=!1;for(var e=this.events,t=0;t<e.length;t++){var i=e[t];i.tweenInstance&&(i.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(e){void 0===e&&(e=!1),this.elapsed=0,e||(this.iteration=0);for(var t=this.events,i=0;i<t.length;i++){var r=t[i];r.complete=!1,e||(r.repeat=0),r.tweenInstance&&r.tweenInstance.stop()}return this.play(!1)},add:function(e){Array.isArray(e)||(e=[e]);var t=this.events,i=0;t.length>0&&(i=t[t.length-1].time);for(var r=0;r<e.length;r++){var n=e[r],s=a(n,"at",0),o=a(n,"in",null);null!==o&&(s=this.elapsed+o);var h=a(n,"from",null);null!==h&&(s=i+h),t.push({complete:!1,time:s,repeat:0,if:a(n,"if",null),run:a(n,"run",null),loop:a(n,"loop",null),event:a(n,"event",null),target:a(n,"target",null),set:a(n,"set",null),tween:a(n,"tween",null),sound:a(n,"sound",null),once:a(n,"once",!1),stop:a(n,"stop",!1)}),i=s}return this.complete=!1,this},clear:function(){for(var e=this.events,t=0;t<e.length;t++){var i=e[t];i.tweenInstance&&i.tweenInstance.stop()}return e=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){return Math.min(this.totalComplete,this.events.length)/this.events.length},destroy:function(){var e=this.systems.events;e.off(o.PRE_UPDATE,this.preUpdate,this),e.off(o.UPDATE,this.update,this),e.off(o.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});s.register("timeline",function(e){return new c(this.scene,e)}),e.exports=c},94880:(e,t,i)=>{var r=i(83419),n=i(95540);e.exports=new r({initialize:function(e){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(e)},reset:function(e){if(this.delay=n(e,"delay",0),this.repeat=n(e,"repeat",0),this.loop=n(e,"loop",!1),this.callback=n(e,"callback",void 0),this.callbackScope=n(e,"callbackScope",this),this.args=n(e,"args",[]),this.timeScale=n(e,"timeScale",1),this.startAt=n(e,"startAt",0),this.paused=n(e,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?0xe8d4a50fff:this.repeat,this.delay<=0&&this.repeatCount>0)throw Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(!(this.repeat>0))return this.getProgress();var e=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/e},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return .001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return .001*this.getOverallRemaining()},remove:function(e){void 0===e&&(e=!1),this.elapsed=this.delay,this.hasDispatched=!e,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}})},35945:e=>{e.exports="complete"},89809:(e,t,i)=>{e.exports={COMPLETE:i(35945)}},90291:(e,t,i)=>{e.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(e,t,i)=>{var r=i(72905),n=i(83419),s=i(43491),a=i(88032),o=i(37277),h=i(44594),c=i(93109),l=i(86081),d=i(8357),u=i(43960),f=i(26012),p=new n({initialize:function(e){this.scene=e,this.events=e.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(h.UPDATE,this.update,this),this.events.once(h.SHUTDOWN,this.shutdown,this)},create:function(e){Array.isArray(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++){var r=e[i];r instanceof l||r instanceof u?t.push(r):Array.isArray(r.tweens)?t.push(f(this,r)):t.push(d(this,r))}return 1===t.length?t[0]:t},add:function(e){var t=e,i=this.tweens;return t instanceof l||t instanceof u||(t=Array.isArray(t.tweens)?f(this,t):d(this,t)),i.push(t.reset()),t},addMultiple:function(e){for(var t,i=[],r=this.tweens,n=0;n<e.length;n++)(t=e[n])instanceof l||t instanceof u||(t=Array.isArray(t.tweens)?f(this,t):d(this,t)),r.push(t.reset()),i.push(t);return i},chain:function(e){var t=f(this,e);return this.tweens.push(t.init()),t},getChainedTweens:function(e){return e.getChainedTweens()},has:function(e){return this.tweens.indexOf(e)>-1},existing:function(e){return this.has(e)||this.tweens.push(e.reset()),this},addCounter:function(e){var t=a(this,e);return this.tweens.push(t.reset()),t},stagger:function(e,t){return c(e,t)},setLagSmooth:function(e,t){return void 0===e&&(e=1/1e-8),void 0===t&&(t=0),this.maxLag=e,this.lagSkip=Math.min(t,this.maxLag),this},setFps:function(e){return void 0===e&&(e=240),this.gap=1e3/e,this.nextTime=1e3*this.time+this.gap,this},getDelta:function(e){var t=Date.now()-this.prevTime;t>this.maxLag&&(this.startTime+=t-this.lagSkip),this.prevTime+=t;var i=this.prevTime-this.startTime,r=i-this.nextTime,n=i-1e3*this.time;return r>0||e?(i/=1e3,this.time=i,this.nextTime+=r+(r>=this.gap?4:this.gap-r)):n=0,n},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(e){void 0===e&&(e=!1);var t,i,r=this.getDelta(e);if(!(r<=0)){this.processing=!0;var n=[],s=this.tweens;for(t=0;t<s.length;t++)(i=s[t]).update(r)&&n.push(i);var a=n.length;if(a&&s.length>0){for(t=0;t<a;t++){i=n[t];var o=s.indexOf(i);o>-1&&(i.isPendingRemove()||i.isDestroyed())&&(s.splice(o,1),i.destroy())}n.length=0}this.processing=!1}},remove:function(e){return this.processing?e.setPendingRemoveState():(r(this.tweens,e),e.setRemovedState()),this},reset:function(e){return this.existing(e),e.seek(),e.setActiveState(),this},makeActive:function(e){return this.existing(e),e.setActiveState(),this},each:function(e,t){var i,r=[null];for(i=1;i<arguments.length;i++)r.push(arguments[i]);return this.tweens.forEach(function(i){r[0]=i,e.apply(t,r)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(e){for(var t=[],i=this.tweens,r=(e=Array.isArray(e)?s(e):[e]).length,n=0;n<i.length;n++)for(var a=i[n],o=0;o<r;o++)!a.isDestroyed()&&a.hasTarget(e[o])&&t.push(a);return t},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(e){return this.timeScale=e,this},isTweening:function(e){for(var t,i=this.tweens,r=0;r<i.length;r++)if((t=i[r]).isPlaying()&&t.hasTarget(e))return!0;return!1},killAll:function(){for(var e=this.processing?this.getTweens():this.tweens,t=0;t<e.length;t++)e[t].destroy();return this.processing||(e.length=0),this},killTweensOf:function(e){for(var t=this.getTweensOf(e),i=0;i<t.length;i++)t[i].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(h.UPDATE,this.update,this),this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.events=null}});o.register("TweenManager",p,"tweens"),e.exports=p},57355:e=>{e.exports=function(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}},6113:(e,t,i)=>{var r=i(62640),n=i(35355);e.exports=function(e,t){var i=r.Power0;if("string"==typeof e)if(r.hasOwnProperty(e))i=r[e];else{var s="";if(e.indexOf(".")){var a=(s=e.substring(e.indexOf(".")+1)).toLowerCase();"in"===a?s="easeIn":"out"===a?s="easeOut":"inout"===a&&(s="easeInOut")}e=n(e.substring(0,e.indexOf(".")+1)+s),r.hasOwnProperty(e)&&(i=r[e])}else"function"==typeof e&&(i=e);if(!t)return i;var o=t.slice(0);return o.unshift(0),function(e){return o[0]=e,i.apply(this,o)}}},91389:(e,t,i)=>{var r=i(89318),n=i(77259),s={bezier:r,catmull:n,catmullrom:n,linear:i(28392)};e.exports=function(e){if(null===e)return null;var t=s.linear;return"string"==typeof e?s.hasOwnProperty(e)&&(t=s[e]):"function"==typeof e&&(t=e),t}},55292:e=>{e.exports=function(e,t,i){return e.hasOwnProperty(t)?"function"==typeof e[t]?function(i,r,n,s,a,o){return e[t](i,r,n,s,a,o)}:function(){return e[t]}:"function"==typeof i?i:function(){return i}}},82985:(e,t,i)=>{var r=i(81076);e.exports=function(e){var t,i=[];if(e.hasOwnProperty("props"))for(t in e.props)"_"!==t.substring(0,1)&&i.push({key:t,value:e.props[t]});else for(t in e)-1===r.indexOf(t)&&"_"!==t.substring(0,1)&&i.push({key:t,value:e[t]});return i}},62329:(e,t,i)=>{var r=i(35154);e.exports=function(e){var t=r(e,"targets",null);return null===t||("function"==typeof t&&(t=t.call()),Array.isArray(t)||(t=[t])),t}},17777:(e,t,i)=>{var r=i(30976),n=i(99472);function s(e){return!!e.getActive&&"function"==typeof e.getActive}function a(e){return!!e.getStart&&"function"==typeof e.getStart}function o(e){return!!e.getEnd&&"function"==typeof e.getEnd}var h=function(e,t){var i,c=function(e,t,i){return i},l=function(e,t,i){return i},d=null,u=typeof t;if("number"===u)c=function(){return t};else if(Array.isArray(t))l=function(){return t[0]},c=function(){return t[t.length-1]};else if("string"===u){var f=t.toLowerCase(),p="random"===f.substring(0,6),g="int"===f.substring(0,3);if(p||g){var m=f.indexOf("("),v=f.indexOf(")"),y=f.indexOf(",");if(m&&v&&y){var b=parseFloat(f.substring(m+1,y)),x=parseFloat(f.substring(y+1,v));c=p?function(){return n(b,x)}:function(){return r(b,x)}}else throw Error("invalid random() format")}else{f=f[0];var E=parseFloat(t.substr(2));switch(f){case"+":c=function(e,t,i){return i+E};break;case"-":c=function(e,t,i){return i-E};break;case"*":c=function(e,t,i){return i*E};break;case"/":c=function(e,t,i){return i/E};break;default:c=function(){return parseFloat(t)}}}}else if("function"===u)c=t;else if("object"===u)if(a(t)||o(t)||s(t))s(t)&&(d=t.getActive),o(t)&&(c=t.getEnd),a(t)&&(l=t.getStart);else if(t.hasOwnProperty("value"))i=h(e,t.value);else{var T=t.hasOwnProperty("to"),A=t.hasOwnProperty("from"),w=t.hasOwnProperty("start");if(T&&(A||w)){if(i=h(e,t.to),w){var S=h(e,t.start);i.getActive=S.getEnd}if(A){var C=h(e,t.from);i.getStart=C.getEnd}}}return i||(i={getActive:d,getEnd:c,getStart:l}),i};e.exports=h},88032:(e,t,i)=>{var r=i(70402),n=i(69902),s=i(23568),a=i(57355),o=i(6113),h=i(95540),c=i(55292),l=i(35154),d=i(17777),u=i(269),f=i(86081);e.exports=function(e,t,i){if(t instanceof f)return t.parent=e,t;i=void 0===i?n:u(n,i);var p=h(t,"from",0),g=h(t,"to",1),m=h(t,"delay",i.delay),v=h(t,"easeParams",i.easeParams),y=h(t,"ease",i.ease),b=d("value",g),x=new f(e,[{value:p}]),E=x.add(0,"value",b.getEnd,b.getStart,b.getActive,o(h(t,"ease",y),h(t,"easeParams",v)),c(t,"delay",m),h(t,"duration",i.duration),a(t,"yoyo",i.yoyo),h(t,"hold",i.hold),h(t,"repeat",i.repeat),h(t,"repeatDelay",i.repeatDelay),!1,!1);E.start=p,E.current=p,x.completeDelay=s(t,"completeDelay",0),x.loop=Math.round(s(t,"loop",0)),x.loopDelay=Math.round(s(t,"loopDelay",0)),x.paused=a(t,"paused",!1),x.persist=a(t,"persist",!1),x.isNumberTween=!0,x.callbackScope=l(t,"callbackScope",x);for(var T=r.TYPES,A=0;A<T.length;A++){var w=T[A],S=l(t,w,!1);if(S){var C=l(t,w+"Params",[]);x.setCallback(w,S,C)}}return x}},93109:(e,t,i)=>{var r=i(6113),n=i(35154),s=i(36383);e.exports=function(e,t){void 0===t&&(t={});var i=n(t,"start",0),a=n(t,"ease",null),o=n(t,"grid",null),h=n(t,"from",0),c="first"===h,l="center"===h,d="last"===h,u="number"==typeof h,f=Array.isArray(e),p=f?parseFloat(e[0]):parseFloat(e),g=f?parseFloat(e[1]):0,m=Math.max(p,g);if(f&&(i+=p),o){var v=o[0],y=o[1],b=0,x=0,E=0,T=0,A=[];d?(b=v-1,x=y-1):u?(b=h%v,x=Math.floor(h/v)):l&&(b=(v-1)/2,x=(y-1)/2);for(var w=s.MIN_SAFE_INTEGER,S=0;S<y;S++){A[S]=[];for(var C=0;C<v;C++){var I=Math.sqrt((E=b-C)*E+(T=x-S)*T);I>w&&(w=I),A[S][C]=I}}}var _=a?r(a):null;return o?function(e,t,r,n){var s,a=0,o=n%v,h=Math.floor(n/v);if(o>=0&&o<v&&h>=0&&h<y&&(a=A[h][o]),f){var c=g-p;s=_?a/w*c*_(a/w):a/w*c}else s=_?a*p*_(a/w):a*p;return s+i}:function(e,t,r,n,s){var a,o,v;return s--,c?a=n:l?a=Math.abs(s/2-n):d?a=s-n:u&&(a=Math.abs(h-n)),f?(v=l?(g-p)/s*(2*a):(g-p)/s*a,o=_?v*_(a/s):v):o=_?s*m*_(a/s):a*p,o+i}}},8357:(e,t,i)=>{var r=i(70402),n=i(69902),s=i(23568),a=i(57355),o=i(6113),h=i(95540),c=i(91389),l=i(55292),d=i(82985),u=i(62329),f=i(35154),p=i(17777),g=i(269),m=i(86081);e.exports=function(e,t,i){if(t instanceof m)return t.parent=e,t;i=void 0===i?n:g(n,i);var v=u(t);!v&&i.targets&&(v=i.targets);for(var y=d(t),b=h(t,"delay",i.delay),x=h(t,"duration",i.duration),E=h(t,"easeParams",i.easeParams),T=h(t,"ease",i.ease),A=h(t,"hold",i.hold),w=h(t,"repeat",i.repeat),S=h(t,"repeatDelay",i.repeatDelay),C=a(t,"yoyo",i.yoyo),I=a(t,"flipX",i.flipX),_=a(t,"flipY",i.flipY),O=h(t,"interpolation",i.interpolation),P=function(e,t,i,r){if("texture"===i){var n=r,s=void 0;Array.isArray(r)?(n=r[0],s=r[1]):r.hasOwnProperty("value")?(n=r.value,Array.isArray(r.value)?(n=r.value[0],s=r.value[1]):"string"==typeof r.value&&(n=r.value)):"string"==typeof r&&(n=r),e.addFrame(t,n,s,l(r,"delay",b),h(r,"duration",x),h(r,"hold",A),h(r,"repeat",w),h(r,"repeatDelay",S),a(r,"flipX",I),a(r,"flipY",_))}else{var d=p(i,r),u=c(h(r,"interpolation",O));e.add(t,i,d.getEnd,d.getStart,d.getActive,o(h(r,"ease",T),h(r,"easeParams",E)),l(r,"delay",b),h(r,"duration",x),a(r,"yoyo",C),h(r,"hold",A),h(r,"repeat",w),h(r,"repeatDelay",S),a(r,"flipX",I),a(r,"flipY",_),u,u?r:null)}},M=new m(e,v),R=0;R<y.length;R++)for(var L=y[R].key,D=y[R].value,k=0;k<v.length;k++)"scale"!==L||v[k].hasOwnProperty("scale")?P(M,k,L,D):(P(M,k,"scaleX",D),P(M,k,"scaleY",D));M.completeDelay=s(t,"completeDelay",0),M.loop=Math.round(s(t,"loop",0)),M.loopDelay=Math.round(s(t,"loopDelay",0)),M.paused=a(t,"paused",!1),M.persist=a(t,"persist",!1),M.callbackScope=h(t,"callbackScope",M);for(var N=r.TYPES,F=0;F<N.length;F++){var B=N[F],U=f(t,B,!1);if(U){var G=f(t,B+"Params",[]);M.setCallback(B,U,G)}}return M}},26012:(e,t,i)=>{var r=i(70402),n=i(23568),s=i(57355),a=i(62329),o=i(35154),h=i(8357),c=i(43960);e.exports=function(e,t){if(t instanceof c)return t.parent=e,t;var i,l=new c(e);l.startDelay=o(t,"delay",0),l.completeDelay=n(t,"completeDelay",0),l.loop=Math.round(n(t,"loop",o(t,"repeat",0))),l.loopDelay=Math.round(n(t,"loopDelay",o(t,"repeatDelay",0))),l.paused=s(t,"paused",!1),l.persist=s(t,"persist",!1),l.callbackScope=o(t,"callbackScope",l);var d=r.TYPES;for(i=0;i<d.length;i++){var u=d[i],f=o(t,u,!1);if(f){var p=o(t,u+"Params",[]);l.setCallback(u,f,p)}}var g=o(t,"tweens",null);if(Array.isArray(g)){var m=[],v=a(t),y=void 0;for(v&&(y={targets:v}),i=0;i<g.length;i++)m.push(h(l,g[i],y));l.add(m)}return l}},30231:(e,t,i)=>{e.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:e=>{e.exports="active"},98540:e=>{e.exports="complete"},67233:e=>{e.exports="loop"},2859:e=>{e.exports="pause"},98336:e=>{e.exports="repeat"},25764:e=>{e.exports="resume"},32193:e=>{e.exports="start"},84371:e=>{e.exports="stop"},70766:e=>{e.exports="update"},55659:e=>{e.exports="yoyo"},842:(e,t,i)=>{e.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(e,t,i)=>{e.exports={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)}},70402:(e,t,i)=>{var r=i(83419),n=i(50792),s=i(842),a=i(86353),o=new r({Extends:n,initialize:function(e){n.call(this),this.parent=e,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(s.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(s.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(s.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(s.TWEEN_COMPLETE,"onComplete")},complete:function(e){return void 0===e&&(e=0),e?(this.setCompleteDelayState(),this.countdown=e):this.onCompleteHandler(),this},completeAfterLoop:function(e){return void 0===e&&(e=0),this.loopCounter>e&&(this.loopCounter=e),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return!this.parent||this.isRemoved()||this.isPendingRemove()||this.isDestroyed()||(this.dispatchEvent(s.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(e){this.countdown-=e,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(s.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(e){return this.countdown-=e,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(s.TWEEN_START,"onStart"),e=0),e},updateCompleteDelay:function(e){this.countdown-=e,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(e,t,i){return void 0===i&&(i=[]),this.callbacks.hasOwnProperty(e)&&(this.callbacks[e]={func:t,params:i}),this},setPendingState:function(){this.state=a.PENDING},setActiveState:function(){this.state=a.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=a.LOOP_DELAY},setCompleteDelayState:function(){this.state=a.COMPLETE_DELAY},setStartDelayState:function(){this.state=a.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=a.PENDING_REMOVE},setRemovedState:function(){this.state=a.REMOVED},setFinishedState:function(){this.state=a.FINISHED},setDestroyedState:function(){this.state=a.DESTROYED},isPending:function(){return this.state===a.PENDING},isActive:function(){return this.state===a.ACTIVE},isLoopDelayed:function(){return this.state===a.LOOP_DELAY},isCompleteDelayed:function(){return this.state===a.COMPLETE_DELAY},isStartDelayed:function(){return this.state===a.START_DELAY},isPendingRemove:function(){return this.state===a.PENDING_REMOVE},isRemoved:function(){return this.state===a.REMOVED},isFinished:function(){return this.state===a.FINISHED},isDestroyed:function(){return this.state===a.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(e){e.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});o.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],e.exports=o},95042:(e,t,i)=>{var r=i(83419),n=i(842),s=i(86353);e.exports=new r({initialize:function(e,t,i,r,n,s,a,o,h,c){this.tween=e,this.targetIndex=t,this.duration=r<=0?.01:r,this.totalDuration=0,this.delay=0,this.getDelay=i,this.yoyo=n,this.hold=s,this.repeat=a,this.repeatDelay=o,this.repeatCounter=0,this.flipX=h,this.flipY=c,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(e){void 0===e&&(e=this.current),this.tween.targets[this.targetIndex][this.key]=e},setCreatedState:function(){this.state=s.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=s.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=s.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=s.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=s.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=s.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=s.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=s.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===s.CREATED},isDelayed:function(){return this.state===s.DELAY},isPendingRender:function(){return this.state===s.PENDING_RENDER},isPlayingForward:function(){return this.state===s.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===s.PLAYING_BACKWARD},isHolding:function(){return this.state===s.HOLD_DELAY},isRepeating:function(){return this.state===s.REPEAT_DELAY},isComplete:function(){return this.state===s.COMPLETE},setStateFromEnd:function(e){this.yoyo?this.onRepeat(e,!0,!0):this.repeatCounter>0?this.onRepeat(e,!0,!1):this.setCompleteState()},setStateFromStart:function(e){this.repeatCounter>0?this.onRepeat(e,!1):this.setCompleteState()},reset:function(){var e=this.tween,t=e.totalTargets,i=this.targetIndex,r=e.targets[i],n=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(r,n,0,i,t,e),this.repeatCounter=-1===this.repeat?s.MAX:this.repeat,this.setPendingRenderState();var a=this.duration+this.hold;this.yoyo&&(a+=this.duration);var o=a+this.repeatDelay;this.totalDuration=this.delay+a,-1===this.repeat?(this.totalDuration+=o*s.MAX,e.isInfinite=!0):this.repeat>0&&(this.totalDuration+=o*this.repeat),this.totalDuration>e.duration&&(e.duration=this.totalDuration),this.delay<e.startDelay&&(e.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(e,t,i){var r=this.tween,s=r.totalTargets,a=this.targetIndex,o=r.targets[a],h=this.key,c="texture"!==h;if(this.elapsed=e,this.progress=e/this.duration,this.flipX&&o.toggleFlipX(),this.flipY&&o.toggleFlipY(),c&&(t||i)&&(this.start=this.getStartValue(o,h,this.start,a,s,r)),i){this.setPlayingBackwardState(),this.dispatchEvent(n.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,c&&(this.end=this.getEndValue(o,h,this.start,a,s,r)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-e,c&&(this.current=this.start,o[h]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(n.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}})},69902:e=>{e.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null}},81076:e=>{e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(e,t,i)=>{var r=i(70402),n=i(83419),s=i(842),a=i(44603),o=i(39429),h=i(36383),c=i(86353),l=i(48177),d=i(42220),u=new n({Extends:r,initialize:function(e,t){r.call(this,e),this.targets=t,this.totalTargets=t.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(e,t,i,r,n,s,a,o,h,c,d,u,f,p,g,m){var v=new l(this,e,t,i,r,n,s,a,o,h,c,d,u,f,p,g,m);return this.totalData=this.data.push(v),v},addFrame:function(e,t,i,r,n,s,a,o,h,c){var l=new d(this,e,t,i,r,n,s,a,o,h,c);return this.totalData=this.data.push(l),l},getValue:function(e){void 0===e&&(e=0);var t=null;return this.data&&(t=this.data[e].current),t},hasTarget:function(e){return this.targets&&-1!==this.targets.indexOf(e)},updateTo:function(e,t,i){if(void 0===i&&(i=!1),"texture"!==e)for(var r=0;r<this.totalData;r++){var n=this.data[r];n.key===e&&(n.isPlayingForward()||n.isPlayingBackward())&&(n.end=t,i&&(n.start=n.current))}return this},restart:function(){switch(this.state){case c.REMOVED:case c.FINISHED:this.seek(),this.parent.makeActive(this);break;case c.PENDING:case c.PENDING_REMOVE:this.parent.reset(this);break;case c.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek()}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(s.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,r.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?console.warn("Cannot play destroyed Tween",this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState()),this},seek:function(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=16.6),void 0===i&&(i=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;i||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(s.TWEEN_ACTIVE,"onActive");var r=this.paused;if(this.paused=!1,e>0){for(var n=Math.floor(e/t),a=e-n*t,o=0;o<n;o++)this.update(t);a>0&&this.update(a)}return this.paused=r,this.isSeeking=!1,this},initTweenData:function(e){void 0===e&&(e=!1),this.duration=0,this.startDelay=h.MAX_SAFE_INTEGER;for(var t=this.data,i=0;i<this.totalData;i++)t[i].reset(e);this.duration=Math.max(this.duration,.01);var r=this.duration,n=this.completeDelay,s=this.loopCounter,a=this.loopDelay;s>0?this.totalDuration=r+n+(r+a)*s:this.totalDuration=r+n},reset:function(e){return void 0===e&&(e=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,-1===this.loop&&(this.isInfinite=!0,this.loopCounter=c.MAX),e||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(s.TWEEN_ACTIVE,"onActive")),this},update:function(e){if(this.isPendingRemove()||this.isDestroyed())return!this.persist||(this.setFinishedState(),!1);if(this.paused||this.isFinished())return!1;if(e*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(e),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(e),!1;!this.hasStarted&&(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(s.TWEEN_START,"onStart"),e=0));var t=!1;if(this.isActive())for(var i=this.data,r=0;r<this.totalData;r++)i[r].update(e)&&(t=!0);this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),t||this.nextState();var n=this.isPendingRemove();return n&&this.persist&&(this.setFinishedState(),n=!1),n},forward:function(e){return this.update(e),this},rewind:function(e){return this.update(-e),this},dispatchEvent:function(e,t){if(!this.isSeeking&&(this.emit(e,this,this.targets),this.callbacks)){var i=this.callbacks[t];i&&i.func.apply(this.callbackScope,[this,this.targets].concat(i.params))}},destroy:function(){r.prototype.destroy.call(this),this.targets=null}});o.register("tween",function(e){return this.scene.sys.tweens.add(e)}),a.register("tween",function(e){return this.scene.sys.tweens.create(e)}),e.exports=u},43960:(e,t,i)=>{var r=i(72905),n=i(70402),s=i(83419),a=i(842),o=i(44603),h=i(39429),c=i(86353),l=new s({Extends:n,initialize:function(e){n.call(this,e),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=-1===this.loop?c.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(e){var t=this.parent.create(e);Array.isArray(t)||(t=[t]);for(var i=this.data,r=0;r<t.length;r++){var n=t[r];n.parent=this,i.push(n.reset())}return this.totalData=i.length,this},remove:function(e){return r(this.data,e),e.setRemovedState(),e===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(e){for(var t=this.data,i=0;i<this.totalData;i++)if(t[i].hasTarget(e))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(e){return e.seek(),e.setActiveState(),this},makeActive:function(e){return e.reset(),e.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},play:function(){return this.isDestroyed()?console.warn("Cannot play destroyed TweenChain",this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState()),this},resetTweens:function(){for(var e=this.data,t=this.totalData,i=0;i<t;i++)e[i].reset(!1);this.setCurrentTween(0)},update:function(e){if(this.isPendingRemove()||this.isDestroyed())return!this.persist||(this.setFinishedState(),!1);if(this.isFinished()||this.paused)return!1;if(e*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(e),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(e),!1;!this.hasStarted&&(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),e=0));var t=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(e)&&this.nextTween()&&this.nextState(),(t=this.isPendingRemove())&&this.persist&&(this.setFinishedState(),t=!1)),t},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData||(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(e){this.currentIndex=e,this.currentTween=this.data[e],this.currentTween.setActiveState()},dispatchEvent:function(e,t){this.emit(e,this);var i=this.callbacks[t];i&&i.func.apply(this.callbackScope,[this].concat(i.params))},destroy:function(){n.prototype.destroy.call(this),this.currentTween=null}});h.register("tweenchain",function(e){return this.scene.sys.tweens.chain(e)}),o.register("tweenchain",function(e){return this.scene.sys.tweens.create(e)}),e.exports=l},48177:(e,t,i)=>{var r=i(95042),n=i(45319),s=i(83419),a=i(842);e.exports=new s({Extends:r,initialize:function(e,t,i,n,s,a,o,h,c,l,d,u,f,p,g,m,v){r.call(this,e,t,h,c,l,d,u,f,p,g),this.key=i,this.getActiveValue=a,this.getEndValue=n,this.getStartValue=s,this.ease=o,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=m,this.interpolationData=v},reset:function(e){r.prototype.reset.call(this);var t=this.tween.targets[this.targetIndex],i=this.key;e&&(t[i]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(t[i]=this.getActiveValue(t,i,0))},update:function(e){var t=this.tween,i=t.totalTargets,r=this.targetIndex,s=t.targets[r],o=this.key;if(!s)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(s,o,s[o],r,i,t),this.end=this.getEndValue(s,o,this.start,r,i,t),this.current=this.start,s[o]=this.start,this.setPlayingForwardState(),!0;var h=this.isPlayingForward(),c=this.isPlayingBackward();if(h||c){var l=this.elapsed,d=this.duration,u=0,f=!1;(l+=e)>=d?(u=l-d,l=d,f=!0):l<0&&(l=0);var p=n(l/d,0,1);this.elapsed=l,this.progress=p,this.previous=this.current,h||(p=1-p);var g=this.ease(p);this.interpolation?this.current=this.interpolation(this.interpolationData,g):this.current=this.start+(this.end-this.start)*g,s[o]=this.current,f&&(h?(t.isNumberTween&&(this.current=this.end,s[o]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(u)):(t.isNumberTween&&(this.current=this.start,s[o]=this.current),this.setStateFromStart(u))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,t){var i=this.tween;if(!i.isSeeking){var r=i.targets[this.targetIndex],n=this.key,s=this.current,a=this.previous;i.emit(e,i,n,r,s,a);var o=i.callbacks[t];o&&o.func.apply(i.callbackScope,[i,r,n,s,a].concat(o.params))}},destroy:function(){r.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}})},42220:(e,t,i)=>{var r=i(95042),n=i(45319),s=i(83419),a=i(842);e.exports=new s({Extends:r,initialize:function(e,t,i,n,s,a,o,h,c,l,d){r.call(this,e,t,s,a,!1,o,h,c,l,d),this.key="texture",this.startTexture=null,this.endTexture=i,this.startFrame=null,this.endFrame=n,this.yoyo=0!==h},reset:function(e){r.prototype.reset.call(this);var t=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=t.texture.key,this.startFrame=t.frame.name),e&&t.setTexture(this.startTexture,this.startFrame)},update:function(e){var t=this.tween,i=this.targetIndex,r=t.targets[i];if(!r)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&r.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var s=this.isPlayingForward(),o=this.isPlayingBackward();if(s||o){var h=this.elapsed,c=this.duration,l=0,d=!1;(h+=e)>=c?(l=h-c,h=c,d=!0):h<0&&(h=0);var u=n(h/c,0,1);this.elapsed=h,this.progress=u,d&&(s?(r.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(l)):(r.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(l))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,t){var i=this.tween;if(!i.isSeeking){var r=i.targets[this.targetIndex],n=this.key;i.emit(e,i,n,r);var s=i.callbacks[t];s&&s.func.apply(i.callbackScope,[i,r,n].concat(s.params))}},destroy:function(){r.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}})},86353:e=>{e.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:0xe8d4a50fff}},83419:e=>{function t(e,t,i,n){for(var s in t)if(t.hasOwnProperty(s)){var a=function(e,t,i){var r,n=i?e[t]:Object.getOwnPropertyDescriptor(e,t);return!i&&n.value&&"object"==typeof n.value&&(n=n.value),!!n&&(!!(r=n).get&&"function"==typeof r.get||!!r.set&&"function"==typeof r.set)&&(void 0===n.enumerable&&(n.enumerable=!0),void 0===n.configurable&&(n.configurable=!0),n)}(t,s,i);if(!1!==a){if(function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return!!i&&(i.value&&"object"==typeof i.value&&(i=i.value),!1===i.configurable)}((n||e).prototype,s)){if(r.ignoreFinals)continue;throw Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,a)}else e.prototype[s]=t[s]}}function i(e,i){if(i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)t(e,i[r].prototype||i[r])}}function r(e){if(e||(e={}),e.initialize){if("function"!=typeof e.initialize)throw Error("initialize must be a function");r=e.initialize,delete e.initialize}else if(e.Extends){var r,n,s=e.Extends;r=function(){s.apply(this,arguments)}}else r=function(){};e.Extends?(r.prototype=Object.create(e.Extends.prototype),r.prototype.constructor=r,n=e.Extends,delete e.Extends):r.prototype.constructor=r;var a=null;return e.Mixins&&(a=e.Mixins,delete e.Mixins),i(r,a),t(r,e,!0,n),r}r.extend=t,r.mixin=i,r.ignoreFinals=!1,e.exports=r},29747:e=>{e.exports=function(){}},20242:e=>{e.exports=function(){return null}},71146:e=>{e.exports=function(e,t,i,r,n){if(void 0===n&&(n=e),i>0){var s=i-e.length;if(s<=0)return null}if(!Array.isArray(t))if(-1===e.indexOf(t))return e.push(t),r&&r.call(n,t),t;else return null;for(var a=t.length-1;a>=0;)-1!==e.indexOf(t[a])&&t.splice(a,1),a--;if(0===(a=t.length))return null;i>0&&a>s&&(t.splice(s),a=s);for(var o=0;o<a;o++){var h=t[o];e.push(h),r&&r.call(n,h)}return t}},51067:e=>{e.exports=function(e,t,i,r,n,s){if(void 0===i&&(i=0),void 0===s&&(s=e),r>0){var a=r-e.length;if(a<=0)return null}if(!Array.isArray(t))if(-1===e.indexOf(t))return e.splice(i,0,t),n&&n.call(s,t),t;else return null;for(var o=t.length-1;o>=0;)-1!==e.indexOf(t[o])&&t.pop(),o--;if(0===(o=t.length))return null;r>0&&o>a&&(t.splice(a),o=a);for(var h=o-1;h>=0;h--){var c=t[h];e.splice(i,0,c),n&&n.call(s,c)}return t}},66905:e=>{e.exports=function(e,t){var i=e.indexOf(t);return -1!==i&&i<e.length&&(e.splice(i,1),e.push(t)),t}},21612:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);var a=0;if(r(e,n,s))for(var o=n;o<s;o++)e[o][t]===i&&a++;return a}},95428:e=>{e.exports=function(e,t,i){var r,n=[null];for(r=3;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<e.length;r++)n[0]=e[r],t.apply(i,n);return e}},36914:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=e.length),r(e,n,s)){var a,o=[null];for(a=5;a<arguments.length;a++)o.push(arguments[a]);for(a=n;a<s;a++)o[0]=e[a],t.apply(i,o)}return e}},81957:e=>{e.exports=function(e,t,i){if(!t.length)return NaN;if(1===t.length)return t[0];var r,n,s=1;if(i){if(e<t[0][i])return t[0];for(;t[s][i]<e;)s++}else for(;t[s]<e;)s++;return(s>t.length&&(s=t.length),i)?(r=t[s-1][i],(n=t[s][i])-e<=e-r?t[s]:t[s-1]):(r=t[s-1],(n=t[s])-e<=e-r?n:r)}},43491:e=>{var t=function(e,i){void 0===i&&(i=[]);for(var r=0;r<e.length;r++)Array.isArray(e[r])?t(e[r],i):i.push(e[r]);return i};e.exports=t},46710:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);var a=[];if(r(e,n,s))for(var o=n;o<s;o++){var h=e[o];(!t||t&&void 0===i&&h.hasOwnProperty(t)||t&&void 0!==i&&h[t]===i)&&a.push(h)}return a}},58731:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=e.length),-1!==n){if(r(e,n,s))for(var a=n;a<s;a++){var o=e[a];if(!t||t&&void 0===i&&o.hasOwnProperty(t)||t&&void 0!==i&&o[t]===i)return o}}else if(r(e,0,s))for(var a=s;a>=0;a--){var o=e[a];if(!t||t&&void 0===i&&o.hasOwnProperty(t)||t&&void 0!==i&&o[t]===i)return o}return null}},26546:e=>{e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.length);var r=t+Math.floor(Math.random()*i);return void 0===e[r]?null:e[r]}},85835:e=>{e.exports=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),n=e.indexOf(i);if(r<0||n<0)throw Error("Supplied items must be elements of the same array");return r>n||(e.splice(r,1),n=e.indexOf(i),e.splice(n+1,0,t)),e}},83371:e=>{e.exports=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),n=e.indexOf(i);if(r<0||n<0)throw Error("Supplied items must be elements of the same array");return r<n||(e.splice(r,1),0===n?e.unshift(t):e.splice(n,0,t)),e}},70864:e=>{e.exports=function(e,t){var i=e.indexOf(t);if(i>0){var r=e[i-1],n=e.indexOf(r);e[i]=r,e[n]=t}return e}},69693:e=>{e.exports=function(e,t,i){var r=e.indexOf(t);if(-1===r||i<0||i>=e.length)throw Error("Supplied index out of bounds");return r!==i&&(e.splice(r,1),e.splice(i,0,t)),t}},40853:e=>{e.exports=function(e,t){var i=e.indexOf(t);if(-1!==i&&i<e.length-1){var r=e[i+1],n=e.indexOf(r);e[i]=r,e[n]=t}return e}},20283:e=>{e.exports=function(e,t,i,r){var n,s=[],a=!1;if((i||r)&&(a=!0,i||(i=""),r||(r="")),t<e)for(n=e;n>=t;n--)a?s.push(i+n.toString()+r):s.push(n);else for(n=e;n<=t;n++)a?s.push(i+n.toString()+r):s.push(n);return s}},593:(e,t,i)=>{var r=i(2284);e.exports=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=null),void 0===i&&(i=1),null===t&&(t=e,e=0);for(var n=[],s=Math.max(r((t-e)/(i||1)),0),a=0;a<s;a++)n.push(e),e+=i;return n}},43886:e=>{function t(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function i(e,t){return e<t?-1:+(e>t)}var r=function(e,n,s,a,o){for(void 0===s&&(s=0),void 0===a&&(a=e.length-1),void 0===o&&(o=i);a>s;){if(a-s>600){var h=a-s+1,c=n-s+1,l=Math.log(h),d=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*d*(h-d)/h)*(c-h/2<0?-1:1),f=Math.max(s,Math.floor(n-c*d/h+u)),p=Math.min(a,Math.floor(n+(h-c)*d/h+u));r(e,n,f,p,o)}var g=e[n],m=s,v=a;for(t(e,s,n),o(e[a],g)>0&&t(e,s,a);m<v;){for(t(e,m,v),m++,v--;0>o(e[m],g);)m++;for(;o(e[v],g)>0;)v--}0===o(e[s],g)?t(e,s,v):t(e,++v,a),v<=n&&(s=v+1),n<=v&&(a=v-1)}};e.exports=r},88492:(e,t,i)=>{var r=i(35154),n=i(33680),s=function(e,t,i){for(var r=[],n=0;n<e.length;n++)for(var s=0;s<t.length;s++)for(var a=0;a<i;a++)r.push({a:e[n],b:t[s]});return r};e.exports=function(e,t,i){var a=r(i,"max",0),o=r(i,"qty",1),h=r(i,"random",!1),c=r(i,"randomB",!1),l=r(i,"repeat",0),d=r(i,"yoyo",!1),u=[];if(c&&n(t),-1===l)if(0===a)l=0;else{var f=e.length*t.length*o;d&&(f*=2),l=Math.ceil(a/f)}for(var p=0;p<=l;p++){var g=s(e,t,o);h&&n(g),u=u.concat(g),d&&(g.reverse(),u=u.concat(g))}return a&&u.splice(a),u}},72905:(e,t,i)=>{var r=i(19133);e.exports=function(e,t,i,n){if(void 0===n&&(n=e),!Array.isArray(t))return -1!==(s=e.indexOf(t))?(r(e,s),i&&i.call(n,t),t):null;for(var s,a=t.length-1,o=[];a>=0;){var h=t[a];-1!==(s=e.indexOf(h))&&(r(e,s),o.push(h),i&&i.call(n,h)),a--}return o}},60248:(e,t,i)=>{var r=i(19133);e.exports=function(e,t,i,n){if(void 0===n&&(n=e),t<0||t>e.length-1)throw Error("Index out of bounds");var s=r(e,t);return i&&i.call(n,s),s}},81409:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){if(void 0===t&&(t=0),void 0===i&&(i=e.length),void 0===s&&(s=e),!r(e,t,i))return[];var a=i-t,o=e.splice(t,a);if(n)for(var h=0;h<o.length;h++){var c=o[h];n.call(s,c)}return o}},31856:(e,t,i)=>{var r=i(19133);e.exports=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.length),r(e,t+Math.floor(Math.random()*i))}},42169:e=>{e.exports=function(e,t,i){var r=e.indexOf(t),n=e.indexOf(i);return -1!==r&&-1===n&&(e[r]=i,!0)}},86003:e=>{e.exports=function(e,t){void 0===t&&(t=1);for(var i=null,r=0;r<t;r++)i=e.shift(),e.push(i);return i}},49498:e=>{e.exports=function(e,t){void 0===t&&(t=1);for(var i=null,r=0;r<t;r++)i=e.pop(),e.unshift(i);return i}},82011:e=>{e.exports=function(e,t,i,r){var n=e.length;if(!(t<0)&&!(t>=n)&&!(t>=i)&&!(i>n))return!0;if(r)throw Error("Range Error: Values outside acceptable range");return!1}},89545:e=>{e.exports=function(e,t){var i=e.indexOf(t);return -1!==i&&i>0&&(e.splice(i,1),e.unshift(t)),t}},17810:(e,t,i)=>{var r=i(82011);e.exports=function(e,t,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=e.length),r(e,n,s))for(var a=n;a<s;a++){var o=e[a];o.hasOwnProperty(t)&&(o[t]=i)}return e}},33680:e=>{e.exports=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e}},90126:e=>{e.exports=function(e){var t=/\D/g;return e.sort(function(e,i){return parseInt(e.replace(t,""),10)-parseInt(i.replace(t,""),10)}),e}},19133:e=>{e.exports=function(e,t){if(!(t>=e.length)){for(var i=e.length-1,r=e[t],n=t;n<i;n++)e[n]=e[n+1];return e.length=i,r}}},19186:(e,t,i)=>{var r=i(82264);function n(e,t){return String(e).localeCompare(t)}function s(e,t,i,r){var n,s,a,o,h,c=e.length,l=0,d=2*i;for(n=0;n<c;n+=d)for(a=(s=n+i)+i,s>c&&(s=c),a>c&&(a=c),o=n,h=s;;)if(o<s&&h<a)0>=t(e[o],e[h])?r[l++]=e[o++]:r[l++]=e[h++];else if(o<s)r[l++]=e[o++];else if(h<a)r[l++]=e[h++];else break}e.exports=function(e,t){if(void 0===t&&(t=n),!e||e.length<2)return e;if(r.features.stableSort)return e.sort(t);var i=function(e,t){var i=e.length;if(i<=1)return e;for(var r=Array(i),n=1;n<i;n*=2){s(e,t,n,r);var a=e;e=r,r=a}return e}(e,t);return i!==e&&s(i,null,e.length,e),e}},25630:e=>{e.exports=function(e,t,i){if(t===i)return e;var r=e.indexOf(t),n=e.indexOf(i);if(r<0||n<0)throw Error("Supplied items must be elements of the same array");return e[r]=i,e[n]=t,e}},37105:(e,t,i)=>{e.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:e=>{e.exports=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var t=e[0].length,i=1;i<e.length;i++)if(e[i].length!==t)return!1;return!0}},63362:(e,t,i)=>{var r=i(41836),n=i(86922);e.exports=function(e){var t="";if(!n(e))return t;for(var i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++){var a=e[i][s].toString();"undefined"!==a?t+=r(a,2):t+="?",s<e[i].length-1&&(t+=" |")}if(i<e.length-1){t+="\n";for(var o=0;o<e[i].length;o++)t+="---",o<e[i].length-1&&(t+="+");t+="\n"}}return t}},92598:e=>{e.exports=function(e){return e.reverse()}},21224:e=>{e.exports=function(e){for(var t=0;t<e.length;t++)e[t].reverse();return e}},98717:(e,t,i)=>{var r=i(37829);e.exports=function(e){return r(e,180)}},44657:(e,t,i)=>{var r=i(37829);e.exports=function(e,t){void 0===t&&(t=1);for(var i=0;i<t;i++)e=r(e,90);return e}},37829:(e,t,i)=>{var r=i(86922),n=i(2429);e.exports=function(e,t){if(void 0===t&&(t=90),!r(e))return null;if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)(e=n(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e.reverse(),e=n(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e.reverse()}return e}},92632:(e,t,i)=>{var r=i(37829);e.exports=function(e,t){void 0===t&&(t=1);for(var i=0;i<t;i++)e=r(e,-90);return e}},69512:(e,t,i)=>{var r=i(86003),n=i(49498);e.exports=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0!==i&&(i<0?r(e,Math.abs(i)):n(e,i)),0!==t)for(var s=0;s<e.length;s++){var a=e[s];t<0?r(a,Math.abs(t)):n(a,t)}return e}},2429:e=>{e.exports=function(e){for(var t=e.length,i=e[0].length,r=Array(i),n=0;n<i;n++){r[n]=Array(t);for(var s=t-1;s>-1;s--)r[n][s]=e[s][n]}return r}},54915:(e,t,i)=>{e.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:e=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports=function(e,i){for(var r=new Uint8Array(e),n=r.length,s=i?"data:"+i+";base64,":"",a=0;a<n;a+=3)s+=t[r[a]>>2],s+=t[(3&r[a])<<4|r[a+1]>>4],s+=t[(15&r[a+1])<<2|r[a+2]>>6],s+=t[63&r[a+2]];return n%3==2?s=s.substring(0,s.length-1)+"=":n%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},53134:e=>{for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),r=0;r<t.length;r++)i[t.charCodeAt(r)]=r;e.exports=function(e){var t,r,n,s,a=(e=e.substr(e.indexOf(",")+1)).length,o=.75*a,h=0;"="===e[a-1]&&(o--,"="===e[a-2]&&o--);for(var c=new ArrayBuffer(o),l=new Uint8Array(c),d=0;d<a;d+=4)t=i[e.charCodeAt(d)],r=i[e.charCodeAt(d+1)],n=i[e.charCodeAt(d+2)],s=i[e.charCodeAt(d+3)],l[h++]=t<<2|r>>4,l[h++]=(15&r)<<4|n>>2,l[h++]=(3&n)<<6|63&s;return c}},65839:(e,t,i)=>{e.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(e,t,i)=>{e.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:e=>{e.exports=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i]=e[i].slice(0):t[i]=e[i];return t}},62644:e=>{var t=function(e){var i,r,n;if("object"!=typeof e||null===e)return e;for(n in i=Array.isArray(e)?[]:{},e)r=e[n],i[n]=t(r);return i};e.exports=t},79291:(e,t,i)=>{var r=i(41212),n=function(){var e,t,i,s,a,o,h=arguments[0]||{},c=1,l=arguments.length,d=!1;for("boolean"==typeof h&&(d=h,h=arguments[1]||{},c=2),l===c&&(h=this,--c);c<l;c++)if(null!=(e=arguments[c]))for(t in e)i=h[t],h!==(s=e[t])&&(d&&s&&(r(s)||(a=Array.isArray(s)))?(a?(a=!1,o=i&&Array.isArray(i)?i:[]):o=i&&r(i)?i:{},h[t]=n(d,o,s)):void 0!==s&&(h[t]=s));return h};e.exports=n},23568:(e,t,i)=>{var r=i(75508),n=i(35154);e.exports=function(e,t,i){var s=n(e,t,null);if(null===s)return i;if(Array.isArray(s))return r.RND.pick(s);if("object"==typeof s){if(s.hasOwnProperty("randInt"))return r.RND.integerInRange(s.randInt[0],s.randInt[1]);else if(s.hasOwnProperty("randFloat"))return r.RND.realInRange(s.randFloat[0],s.randFloat[1])}else if("function"==typeof s)return s(t);return s}},95540:e=>{e.exports=function(e,t,i){var r=typeof e;return e&&"number"!==r&&"string"!==r&&e.hasOwnProperty(t)&&void 0!==e[t]?e[t]:i}},82840:(e,t,i)=>{var r=i(35154),n=i(45319);e.exports=function(e,t,i,s,a){return void 0===a&&(a=i),n(r(e,t,a),i,s)}},35154:e=>{e.exports=function(e,t,i,r){if(!e&&!r||"number"==typeof e)return i;if(e&&e.hasOwnProperty(t))return e[t];if(r&&r.hasOwnProperty(t))return r[t];if(-1===t.indexOf("."))return i;for(var n=t.split("."),s=e,a=r,o=i,h=i,c=!0,l=!0,d=0;d<n.length;d++)s&&s.hasOwnProperty(n[d])?(o=s[n[d]],s=s[n[d]]):c=!1,a&&a.hasOwnProperty(n[d])?(h=a[n[d]],a=a[n[d]]):l=!1;return c?o:l?h:i}},69036:e=>{e.exports=function(e,t){for(var i=0;i<t.length;i++)if(!e.hasOwnProperty(t[i]))return!1;return!0}},1985:e=>{e.exports=function(e,t){for(var i=0;i<t.length;i++)if(e.hasOwnProperty(t[i]))return!0;return!1}},97022:e=>{e.exports=function(e,t){return e.hasOwnProperty(t)}},41212:e=>{e.exports=function(e){if(!e||"object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!({}).hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0}},46975:(e,t,i)=>{var r=i(41786);e.exports=function(e,t){var i=r(e);for(var n in t)i.hasOwnProperty(n)||(i[n]=t[n]);return i}},269:(e,t,i)=>{var r=i(41786);e.exports=function(e,t){var i=r(e);for(var n in t)i.hasOwnProperty(n)&&(i[n]=t[n]);return i}},18254:(e,t,i)=>{var r=i(97022);e.exports=function(e,t){for(var i={},n=0;n<t.length;n++){var s=t[n];r(e,s)&&(i[s]=e[s])}return i}},61622:e=>{e.exports=function(e,t,i){if(e&&"number"!=typeof e){if(e.hasOwnProperty(t))return e[t]=i,!0;else if(-1!==t.indexOf(".")){for(var r=t.split("."),n=e,s=e,a=0;a<r.length;a++)if(!n.hasOwnProperty(r[a]))return!1;else s=n,n=n[r[a]];return s[r[r.length-1]]=i,!0}}return!1}},1183:(e,t,i)=>{e.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:e=>{e.exports=function(e,t){return e.replace(/%([0-9]+)/g,function(e,i){return t[Number(i)-1]})}},41836:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=" "),void 0===r&&(r=3);var n=0;if(t+1>=(e=e.toString()).length)switch(r){case 1:e=Array(t+1-e.length).join(i)+e;break;case 3:var s=Math.ceil((n=t-e.length)/2);e=Array(n-s+1).join(i)+e+Array(s+1).join(i);break;default:e+=Array(t+1-e.length).join(i)}return e}},33628:e=>{e.exports=function(e,t){return 0===t?e.slice(1):e.slice(0,t)+e.slice(t+1)}},27671:e=>{e.exports=function(e){return e.split("").reverse().join("")}},45650:e=>{e.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},35355:e=>{e.exports=function(e){return e&&e[0].toUpperCase()+e.slice(1)}},31749:(e,t,i)=>{e.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}return i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i(85454)})()},{"57a99fe9b8471a10":"62hW9"}],"62hW9":[function(e,t,i,r){},{}],eNDyX:[function(e,t,i,r){t.exports.FPSCounter=class{constructor(e){this.lastFrameTime=performance.now(),this.frameCount=0,this.fpsDisplay=e.createElementWithStyles("div","fps-counter",{padding:"0 20px",background:"#000",color:"#00ff00"}),e.getElement(".header").appendChild(this.fpsDisplay)}updateFPS(){let e=performance.now(),t=e-this.lastFrameTime;this.lastFrameTime=e;let i=Math.round(1e3/t);this.frameCount++,0==this.frameCount%60&&(this.fpsDisplay.textContent="FPS: "+i),requestAnimationFrame(this.updateFPS.bind(this))}start(){this.updateFPS()}}},{}],"6mDqg":[function(e,t,i,r){let n="objects.";t.exports.ObjectsConst={OBJECT_ANIMATION:"oa",OBJECT_INTERACTION:"oi",TYPE_OBJECT:"obj",TYPE_ANIMATION:"anim",TYPE_NPC:"npc",TYPE_ENEMY:"enemy",TYPE_TRADER:"trader",TYPE_DROP:"drop",DYNAMIC_ANIMATION:"dyn",MESSAGE:{DATA_VALUES:{NAMESPACE:"objects"}},EVENT_PREFIX:{BASE:"bo",ANIMATION:"ao",DROP:"dep",ENEMY:"eo",NPC:"npc",TRADER:"tnpc"},SNIPPETS:{PREFIX:n,NPC_INVALID:n+"npcInvalid",TRADER:{CONTENT:n+"trader.content",OPTIONS:{BUY:n+"trader.options.buy",SELL:n+"trader.options.sell"},BUY_CONFIRMED:n+"trader.buyConfirmed",SELL_CONFIRMED:n+"trader.sellConfirmed"}},DEFAULTS:{BASE_OBJECT:{CONTENT:"",OPTIONS:{}},TRADER_OBJECT:{INVENTORY_MAP:{buy:"A",sell:"B"},OPTIONS:{BUY:"buy",SELL:"sell"}},TARGETS:{OBJECT:0,PLAYER:1}},TRADE_ACTIONS_FUNCTION_NAME:{ADD:"add",REMOVE:"remove",CONFIRM:"confirm",DISCONFIRM:"disconfirm",CANCEL:"cancel"},TRADE_ACTIONS:{SUB_ACTION:"sub",ADD:"ta",REMOVE:"tr",CONFIRM:"tc",DISCONFIRM:"td"},DROPS:{KEY:"drp",REMOVE:"drmv",PARAMS:"drpp",ASSET_KEY:"dk",PICK_UP_ACT:"rpu",ASSETS_PATH:"/assets/custom/sprites/",FILE:"df",TYPE:"dt"}}},{}],"1LMb5":[function(e,t,i,r){let{PlayerEngine:n}=e("ad34e884dd74ab75"),{SceneDynamic:s}=e("8c3cc377813bccbe"),{ScenePreloader:a}=e("eb7c0f886bf8e7c7"),{RoomStateEntitiesManager:o}=e("a5a9c94aeac48255"),{AnimationsDefaultsMerger:h}=e("94de971084cba728"),{GameConst:c}=e("dd0538535f6f136a"),{ErrorManager:l,Logger:d,sc:u}=e("2b2fa27d8710e574");t.exports.RoomEvents=class{constructor(e,t){this.room=!1,this.roomData={},this.scenePreloader=!1,this.playersOnAddCallback=!1,this.playersOnRemoveCallback=!1,this.playersQueue={},this.gameManager=t,this.gameEngine=t.gameEngine,this.gameDom=t.gameDom,this.roomName=e,this.events=t.events,this.objectsUi={},this.tradeUi={},this.gameOverRetries=0,this.gameOverMaxRetries=0,this.gameOverRetryTime=200,this.automaticallyCloseAllDialogsOnSceneChange=t.config.getWithoutLogs("client/rooms/automaticallyCloseAllDialogsOnSceneChange",!0)}async activateRoom(e,t=!1){await this.events.emit("reldens.activateRoom",e,this.gameManager),this.room=e,this.playersManager=o.onEntityAdd(e,"players",(e,i)=>{this.checkAndCreateScene(),this.playersOnAdd(e,i,t),this.listenPlayerAndStateChanges(e,i)}),this.playersRemoveManager=o.onEntityRemove(e,"players",(e,t)=>{this.playersOnRemove(e,t)}),this.room.onMessage("*",async e=>{await this.roomOnMessage(e)}),this.room.onLeave(e=>{this.roomOnLeave(e)})}listenPlayerAndStateChanges(e,t){let i=this.gameManager.getCurrentPlayer().player_id,r=o.createManager(this.room);for(let i of Object.keys(e))r.listen(e,i,(i,r)=>{this.playersOnChange(e,t,"playerChange")});for(let n of Object.keys(e.state))r.listen(e.state,n,(r,s)=>{if(e.state[n]=r,this.playersOnChange(e,t,"playerChange"),"inState"===n&&e.player_id===i){if(c.STATUS.DEATH===r)return this.showGameOverBox();this.hideGameOverBox()}})}checkAndCreateScene(){if(!this.room.state)return d.warning("Room state is not ready."),!1;if(0===Object.keys(this.roomData).length&&(this.roomData=h.mergeDefaults(u.toJson(this.room.state.sceneData))),this.gameEngine.scene.getScene(this.roomName))return!1;let e=this.createSceneInstance(this.roomName,this.roomData,this.gameManager);return this.gameEngine.scene.add(this.roomName,e,!1),!0}async playersOnAdd(e,t,i){await this.events.emit("reldens.playersOnAdd",e,t,i,this);let r={x:e.state.x,y:e.state.y,dir:e.state.dir,playerName:e.playerName,avatarKey:e.avatarKey,playedTime:e.playedTime,player_id:e.player_id};if(this.isCurrentPlayer(t))return await this.createCurrentPlayer(e,i,t);this.addOtherPlayers(e,t,r)}isCurrentPlayer(e){return e===this.room.sessionId}addOtherPlayers(e,t,i){if(!this.engineStarted)return this.playersQueue[t]=i,!1;let r=this.getActiveScene();return!!this.isValidScene(r,e)&&(r.player.addPlayer(t,i),!0)}async createCurrentPlayer(e,t,i){this.engineStarted=!0,await this.startEngineScene(e,this.room,t);let r=this.getActiveScene();if(!this.isValidScene(r,e))return;for(let n of(await this.events.emit("reldens.playersQueueBefore",e,i,t,this),Object.keys(this.playersQueue)))r.player.addPlayer(n,this.playersQueue[n]);let n={player:e,key:i,previousScene:t,roomEvents:this};return await this.events.emit("reldens.createCurrentPlayer",n),n}isValidScene(e,t){return e.key===t.state.scene&&e.player&&e.player.players}playersOnChange(e,t,i){if(e.state.scene!==this.roomName){e.player_id!==this.gameManager.getCurrentPlayer().player_id||this.gameManager.isChangingScene||d.info("Player scene miss match.",{currentScene:this.roomName,playerSceneOnState:e?.state.scene,player:e?.sessionId,currentPlayer:this.gameManager.getCurrentPlayer()?.playerId,isChangingScene:this.gameManager.isChangingScene});return}let r=this.getActiveScene();this.playerExists(r,t)&&r.player.updatePlayer(t,e)}playersOnRemove(e,t){return(this.events.emitSync("reldens.playersOnRemove",e,t,this),t===this.room.sessionId)?this.gameOverReload():this.removePlayerByKey(t)}removePlayerByKey(e){let t=this.getActiveScene();this.playerExists(t,e)&&(t.player.removePlayer(e),t.player.currentTarget?.id===e&&this.gameEngine.clearTarget())}gameOverReload(){let e={confirmed:!0};this.events.emitSync("reldens.gameOverReload",this,e),!this.gameManager.gameOver&&e.confirmed&&this.gameDom.alertReload(this.gameManager.services.translator.t("game.errors.sessionEnded"))}playerExists(e,t){return e.player&&u.hasOwn(e.player.players,t)}async roomOnMessage(e){await this.runGameOver(e),await this.runRevived(e),await this.runChangingScene(e),await this.runChangedScene(e),await this.runReconnect(e),await this.runUpdateStats(e),await this.runInitUi(e),await this.closeBox(e),await this.runCustomMessageListener(e)}async runInitUi(e){return e.act===c.UI&&!!e.id&&(await this.events.emit("reldens.initUiBefore",e,this),this.initUi(e),await this.events.emit("reldens.initUiAfter",e,this),!0)}async closeBox(e){if(c.CLOSE_UI_ACTION!==e.act||!e.id)return!1;let t=this.gameDom.getElement("#box-"+e.id+" .box-close");return t?(t.click(),!0):(d.error('Box could not be closed ID "'+e.id+'".'),!1)}async runCustomMessageListener(e){let t=u.get(e,"listener","");if(""===t)return!1;let i=this.gameManager.config.get("client/message/listeners",{}),r=this.gameManager.config.get("client/customClasses/message/listeners",{}),n=u.get(r,t,!1);return(n||(n=u.get(i,t,!1)),n)?u.isFunction(n.executeClientMessageActions)?(n.executeClientMessageActions({message:e,roomEvents:this}),!0):(d.error('Listener is missing "executeClientMessageActions" method.',n),!1):(d.error('Listener "'+t+'" is missing.'),!1)}async runUpdateStats(e){return e.act===c.PLAYER_STATS&&(await this.events.emit("reldens.playerStatsUpdateBefore",e,this),await this.updatePlayerStats(e))}async runReconnect(e){e.act===c.RECONNECT&&(await this.events.emit("reldens.beforeReconnectGameClient",e,this),await this.gameManager.reconnectGameClient(e,this.room))}async runChangingScene(e){e.act===c.CHANGING_SCENE&&this.room.sessionId===e.id&&(this.gameManager.setChangingScene(!0),this.closeAllActiveDialogs(),this.gameManager.getActiveScene().scene.setVisible(!1))}async runChangedScene(e){if(e.act!==c.CHANGED_SCENE||e.scene!==this.room.name||this.room.sessionId===e.id)return;await this.events.emit("reldens.startChangedScene",{message:e,roomEvents:this});let t=this.getActiveScene(),{id:i,x:r,y:n,dir:s,playerName:a,playedTime:o,avatarKey:h,player_id:l}=e,d=this.gameManager.config.get("client/players/size/topOffset"),u=this.gameManager.config.get("client/players/size/leftOffset");t.player.addPlayer(i,{x:r-u,y:n-d,dir:s,playerName:a,playedTime:o,avatarKey:h,player_id:l}),this.gameManager.setChangingScene(!1),await this.events.emit("reldens.endChangedScene",{message:e,roomEvents:this})}closeAllActiveDialogs(){if(!this.automaticallyCloseAllDialogsOnSceneChange)return;let e=this.gameDom.getElements(c.SELECTORS.BUTTONS_CLOSE);if(0!==e.length)for(let t of e)t.click()}async runRevived(e){if(e.act!==c.REVIVED)return;this.gameDom.getElement("#game-over").classList.add("hidden");let t=this.gameManager.getCurrentPlayer(),i=u.get(t.players,e.t,!1);i&&(i.visible=!0,u.hasOwn(i,"nameSprite")&&i.nameSprite&&(i.nameSprite.visible=!0),this.getActiveScene().stopOnDeathOrDisabledSent=!1)}async runGameOver(e){if(e.act!==c.GAME_OVER)return!1;try{await this.events.emit("reldens.runGameOver",{message:e,defaultBehavior:!0,roomEvents:this}),await this.events.emit("reldens.gameOver",e,this),this.gameManager.gameOver=!0;let t=this.gameManager.getCurrentPlayer();if(!t)return this.gameOverRetries<this.gameOverMaxRetries&&(setTimeout(()=>this.runGameOver(e),this.gameOverRetryTime),this.gameOverRetries++),!1;t.players[t.playerId].visible=!1,this.showGameOverBox()}catch(t){return setTimeout(()=>this.runGameOver(e),200),this.gameOverRetries++,!1}}showGameOverBox(){return this.displayGameOverBox(!0)}hideGameOverBox(){return this.displayGameOverBox(!1)}displayGameOverBox(e){d.debug("Display game over box: "+(e?"yes":"no")+".");let t=this.gameDom.getElement("#game-over");return t?e?(t.classList.remove("hidden"),!0):(t.classList.add("hidden"),!1):(d.debug("GameOver box element not found."),!1)}async roomOnLeave(e){this.playersManager&&this.playersManager.dispose(),this.playersRemoveManager&&this.playersRemoveManager.dispose(),!this.isAbnormalShutdown(e)||this.gameManager.gameOver||this.gameManager.forcedDisconnection||(d.error("There was a connection error.",{code:e,isGameOver:this.gameManager.gameOver,isForcedDisconnection:this.gameManager.forcedDisconnection}),this.gameDom.alertReload(this.gameManager.services.translator.t("game.errors.serverDown"))),await this.events.emit("reldens.playerLeftScene",{code:e,roomEvents:this})}isAbnormalShutdown(e){return 1001<=e&&1015>=e}async updatePlayerStats(e){if(!u.hasOwn(e,"stats")||!e.stats)return!1;let t=this.getActiveScene();if(!t.player||!u.hasOwn(t.player.players,this.room.sessionId))return d.error("Player not available.",this.room,t),!1;t.player.players[this.room.sessionId].stats=e.stats,this.gameManager.playerData.stats=e.stats,this.gameManager.playerData.statsBase=e.statsBase;let i=this.gameManager.getUiElement("playerStats");if(!i)return!1;let r=i.getChildByProperty("id","player-stats-container");if(!r)return!1;let n=this.gameEngine.uiScene.cache.html.get("playerStat");for(let t of(r.innerHTML="",Object.keys(e.stats))){let i=u.get(this.gameManager.config.client.players.initialStats[t],"data",!1),s=i&&u.get(i,"showBase",!1)?" / "+e.statsBase[t]:"",a=this.gameManager.gameEngine.parseTemplate(n,{statLabel:t,statValue:e.stats[t]+s});r.innerHTML=r.innerHTML+a}return await this.events.emit("reldens.playerStatsUpdateAfter",e,this),!0}initUi(e){let t=this.gameEngine.uiScene;if(!t||!u.hasOwn(t.elementsUi,e.id))return void d.error("User interface not found on UI Scene: "+e.id);let i=t.elementsUi[e.id];this.uiSetTitle(i,e),this.uiSetContent(i,e,t);let r=i.getChildByID("box-"+e.id),n=e.keepCurrentDisplay&&"none"===r.style.display;r.style.display=n?"none":"block",i.setDepth(2),this.gameManager.config.get("client/ui/uiTarget/hideOnDialog")&&this.gameEngine.clearTarget()}uiSetTitleAndContent(e,t,i){this.uiSetTitle(e,t),this.uiSetContent(e,t,i)}uiSetTitle(e,t){let i=u.get(t,"title",!1);if(!1===i)return!1;let r=e.getChildByProperty("className","box-title");return!!r&&(r.innerHTML=i,!0)}uiSetContent(e,t,i){let r=u.get(t,"content",!1);if(!1===r)return;let n=e.getChildByProperty("className","box-content");n&&(n.innerHTML=r,this.uiSetContentOptions(i,t,n))}uiSetContentOptions(e,t,i){if(!t.options)return!1;let r=e.cache.html.get("uiOptionsContainer"),n=this.gameManager.gameEngine.parseTemplate(r,{id:"ui-"+t.id});i.innerHTML+=n;let s=Object.keys(t.options);if(0===s.length)return!1;for(let i of s){let{label:r,value:n,icon:s}=t.options[i],a=s?"Icon":"Button",o=e.cache.html.get("uiOption"+a),h={id:i,object_id:t.id,label:r,value:n,icon:"/assets/custom/items/"+s+c.FILES.EXTENSIONS.PNG},l=this.gameManager.gameEngine.parseTemplate(o,h);this.gameDom.appendToElement("#ui-"+t.id,l);let d="#opt-"+i+"-"+t.id;this.gameDom.getElement(d)?.addEventListener("click",e=>{let i={id:t.id,act:c.BUTTON_OPTION,value:e.target.getAttribute("data-option-value")};Object.assign(i,u.get(t,"overrideSendOptions",{})),this.send(i)})}return!0}async startEngineScene(e,t,i=!1){await this.events.emit("reldens.startEngineScene",this,e,t,i);let r=!1;this.gameEngine.uiScene||(r=!0);let n=c.SCENE_PRELOADER+this.roomName;this.gameEngine.scene.getScene(n)?await this.createEngineOnScene(n,e,t,i):await this.createPreloaderAndScene(n,r,e,t,i)}async createEngineOnScene(e,t,i,r){this.getActiveScene().objectsAnimationsData=this.roomData.objectsAnimationsData,this.scenePreloader=this.gameEngine.scene.getScene(e),await this.events.emit("reldens.createdPreloaderRecurring",this,this.scenePreloader),await this.createEngineScene(t,i,r)}async createPreloaderAndScene(e,t,i,r,n){this.scenePreloader=this.createPreloaderInstance({name:e,map:this.roomData.roomMap,images:this.roomData.sceneImages,uiScene:t,gameManager:this.gameManager,preloadAssets:this.roomData.preloadAssets,objectsAnimationsData:this.roomData.objectsAnimationsData}),this.gameEngine.scene.add(e,this.scenePreloader,!0),await this.events.emit("reldens.createdPreloaderInstance",this,this.scenePreloader);let s=this.gameEngine.scene.getScene(e);s.load.on("complete",async()=>{this.gameEngine.uiScene||(this.gameEngine.uiScene=s,this.showPlayerName(this.gameManager.playerData.id+" - "+this.gameManager.playerData.name)),await this.createEngineScene(i,r,n)})}showPlayerName(e){let t=this.gameManager.getUiElement("playerBox");if(!t)return!1;let i=t.getChildByProperty("className","player-name");return!!i&&(i.innerHTML=e,!0)}async createEngineScene(e,t,i){let r=this.gameEngine.scene.getScene(i);r&&r.scene.setVisible(!1),await this.events.emit("reldens.createEngineScene",e,t,i,this),this.gameManager.room&&await this.destroyPreviousScene(i,e),this.gameEngine.scene.start(e.state.scene),this.gameManager.room=t;let n=this.gameEngine.scene.getScene(e.state.scene);n.player=this.createPlayerEngineInstance(n,e,this.gameManager,t),n.player.create(),this.addExistentPlayers(t,n),this.updateSceneLabel(this.roomData.roomTitle),this.send({act:c.PLAYER_STATS}),this.send({act:c.CLIENT_JOINED});let s={player:n.player,previousScene:i,roomEvents:this};await this.events.emit("reldens.playersOnAddReady",s);let a={currentScene:n,previousScene:i,roomEvents:this};return await this.events.emit("reldens.createEngineSceneDone",a),a}addExistentPlayers(e,t){if(0===this.playersCountFromState(e))return!1;for(let i of this.playersKeysFromState(e)){let r=this.playerBySessionIdFromState(e,i);if(!r.sessionId||r.sessionId===e.sessionId)continue;let n={x:r.state.x,y:r.state.y,dir:r.state.dir,playerName:r.playerName,playedTime:r.playedTime,avatarKey:r.avatarKey,player_id:r.player_id};t.player.addPlayer(r.sessionId,n)}return!0}playerBySessionIdFromState(e,t){return e.state.players.get(t)}playersCountFromState(e){return e.state.players.size}playersKeysFromState(e){return Array.from(e.state.players.keys())}async destroyPreviousScene(e){if(!e)return d.warning("Missing previous scene data.",e),!1;let t=this.gameEngine.scene.getScene(e);return t?(await t.changeScene(),this.gameEngine.scene.stop(e),!0):(d.warning("Missing previous scene instance.",t),!1)}updateSceneLabel(e){let t=this.gameManager.getUiElement("sceneLabel");if(!t)return!1;let i=t.getChildByProperty("className","scene-label");return!!i&&(i.innerHTML=e,!0)}getActiveScene(){return this.gameEngine.scene.getScene(this.roomName)}createSceneInstance(e,t,i){return new s(e,t,i)}createPlayerEngineInstance(e,t,i,r){return new n({scene:e,playerData:t,gameManager:i,room:r,roomEvents:this})}createPreloaderInstance(e){return new a(e)}send(e,t){try{if(this.room.connection.transport.ws.readyState===this.room.connection.transport.ws.CLOSED&&l.error("Connection lost."),this.room.connection.transport.ws.readyState===this.room.connection.transport.ws.CLOSING)return!1;return t||(t="*"),this.room.send(t,e),!0}catch(t){d.critical(t.message,e)}return this.gameDom.alertReload(this.gameManager.services.translator.t("game.errors.connectionLost")),!1}}},{ad34e884dd74ab75:"idUM5","8c3cc377813bccbe":"1uB65",eb7c0f886bf8e7c7:"jayKj",a5a9c94aeac48255:"dNL8k","94de971084cba728":"haVB3",dd0538535f6f136a:"z0nmL","2b2fa27d8710e574":"ijd9L"}],idUM5:[function(e,t,i,r){let{SpriteTextFactory:n}=e("94c0b713770985e9"),{GameConst:s}=e("c99c71c42a9e0f59"),{ActionsConst:a}=e("51d102aa478bf778"),{Logger:o,sc:h}=e("369ffb9744f96759");t.exports.PlayerEngine=class{constructor(e){let{scene:t,playerData:i,gameManager:r,room:n,roomEvents:s}=e;this.scene=t,this.config=r.config,this.gameManager=r,this.events=r.events,this.playerName=i.playerName,this.avatarKey=i.avatarKey,this.roomName=i.state.scene,this.state=i.state,this.room=n,this.roomEvents=s,this.playerId=n.sessionId,this.player_id=i.player_id,this.players={},this.playedTime=i.playedTime,this.mov=!1,this.dir=!1,this.currentTarget=!1,this.pointsValidator=!1,this.animationBasedOnPress=this.config.get("client/players/animations/basedOnPress"),this.topOff=this.config.get("client/players/size/topOffset"),this.leftOff=this.config.get("client/players/size/leftOffset"),this.collideWorldBounds=this.config.get("client/players/animations/collideWorldBounds"),this.fadeDuration=Number(this.config.get("client/players/animations/fadeDuration")),this.cameraRoundPixels=!!this.config.getWithoutLogs("client/general/engine/cameraRoundPixels",!1),this.cameraInterpolationX=Number(this.config.getWithoutLogs("client/general/engine/cameraInterpolationX",.02)),this.cameraInterpolationY=Number(this.config.getWithoutLogs("client/general/engine/cameraInterpolationY",.02)),this.globalConfigNameText=this.config.get("client/ui/players/nameText"),this.globalConfigShowNames=!!this.config.get("client/ui/players/showNames"),this.globalConfigShowNamesLimit=this.config.getWithoutLogs("client/ui/players/showNamesLimit",10),this.defaultActionKeyConfig=this.config.get("client/ui/controls/defaultActionKey"),this.highlightOnOver=!!this.config.getWithoutLogs("client/ui/players/highlightOnOver",!0),this.highlightColor=this.config.getWithoutLogs("client/ui/players/highlightColor","0x00ff00"),this.lastKeyState={}}create(){let e={x:this.state.x,y:this.state.y,dir:this.state.dir,playerName:this.playerName,avatarKey:this.avatarKey,playedTime:this.playedTime,player_id:this.player_id};this.addPlayer(this.playerId,e),this.scene.scene.setVisible(!0,this.roomName),this.scene.cameras.main.fadeFrom(this.fadeDuration),this.scene.physics.world.fixedStep=!1,this.scene.physics.world.setBounds(0,0,this.scene.map.widthInPixels,this.scene.map.heightInPixels),this.scene.cameras.main.setBounds(0,0,this.scene.map.widthInPixels,this.scene.map.heightInPixels),this.scene.cameras.main.setIsSceneCamera(!0),this.scene.cameras.main.startFollow(this.players[this.playerId],this.cameraRoundPixels,this.cameraInterpolationX,this.cameraInterpolationY)}addPlayer(e,t){if(h.hasOwn(this.players,e))return this.players[e];let{x:i,y:r,dir:n,playerName:s,avatarKey:a,playedTime:o,player_id:c}=t,l=this.gameManager.mappedAvatars[a];return this.players[e]=this.scene.physics.add.sprite(i,r-this.topOff,l),this.players[e].playerName=s,this.players[e].playedTime=o,this.players[e].avatarKey=a,this.players[e].playerId=e,this.players[e].player_id=c,this.players[e].anims.play(l+"_"+n),this.players[e].anims.stop(),this.showPlayerName(e),this.makePlayerInteractive(e),this.players[e].moveSprites={},this.players[e].setDepth(this.players[e].y+this.players[e].body.height),this.players[e].setCollideWorldBounds(this.collideWorldBounds),this.events.emitSync("reldens.playerEngineAddPlayer",this,e,t),this.players[e]}makePlayerInteractive(e){this.players[e].setInteractive({useHandCursor:!0}).on("pointerdown",t=>{if(s.SELECTORS.CANVAS!==t.downElement.nodeName)return!1;this.setTargetPlayerById(e)}),this.highlightOnOver&&(this.players[e].on("pointerover",()=>{this.players[e].setTint(this.highlightColor)}),this.players[e].on("pointerout",()=>{this.players[e].clearTint()}))}setTargetPlayerById(e){if(!h.get(this.players,e,!1))return o.info('Target player ID "'+e+'" was not found.'),this.gameManager.gameEngine.clearTarget(),!1;let t=Object.assign({},this.currentTarget);this.currentTarget={id:e,type:s.TYPE_PLAYER,player_id:this.players[e].player_id},this.gameManager.gameEngine.showTarget(this.players[e].playerName,this.currentTarget,t)}showPlayerName(e){if(!this.globalConfigShowNames)return!1;if(!this.players[e])return o.critical('Player ID "'+e+'" not found.',this.players),!1;let t=this.players[e].playerName;if(!t)return o.critical('Player name not found on player ID "'+e+'".',this.players[e]),!1;n.attachTextToSprite(this.players[e],this.applyNameLengthLimit(t),this.globalConfigNameText,this.topOff,"nameSprite",this.scene)}applyNameLengthLimit(e){return 0<this.globalConfigShowNamesLimit&&e.length>this.globalConfigShowNamesLimit&&(e=e.slice(0,this.globalConfigShowNamesLimit)+"..."),e}updatePlayer(e,t){let i=this.players[e];if(!i)return void o.error("PlayerSprite not defined.",this.players,e);if(o.debug('Updating player ID "'+e+'". - Current player ID "'+this.player_id+'".'),this.scene.clientInterpolation){this.scene.interpolatePlayersPosition[e]=t.state;return}this.processPlayerPositionAnimationUpdate(i,t.state,e,t.state.x-this.leftOff,t.state.y-this.topOff)}processPlayerPositionAnimationUpdate(e,t,i,r=0,n=0){if(o.debug("Process player position animation update.",{playerSprite:e,playerState:t,playerId:i,newX:r,newY:n}),!e)return void o.error("Missing player sprite to process animation update.",e,t,i);if(!t)return void o.error("Missing player state to process animation update.",e,t,i);if(!i)return void o.error("Missing player ID to process animation update.",e,t,i);if(0!==Object.keys(this.scene.interpolatePlayersPosition).length){if(s.STATUS.DEATH===t.inState||s.STATUS.DISABLED===t.inState)return void delete this.scene.interpolatePlayersPosition[i];this.playPlayerAnimation(e,t,i),this.stopPlayerAnimation(e,t),this.updateSpritePosition(e,r,n),this.updatePlayerState(e,t,i)}}updatePlayerState(e,t,i){let r=e.y+e.body.height;e.depth!==r&&e.setDepth(r),this.events.emitSync("reldens.runPlayerAnimation",this,i,t,e),this.updateNamePosition(e),this.moveAttachedSprites(e,r)}updateSpritePosition(e,t,i){e.x!==t&&(e.x=t),e.y!==i&&(e.y=i)}updateNamePosition(e){if(!this.globalConfigShowNames||!e.nameSprite)return!1;let t=n.getTextPosition(e,this.applyNameLengthLimit(e.playerName),this.globalConfigNameText,this.topOff);e.nameSprite.x=t.x,e.nameSprite.y=t.y}moveAttachedSprites(e,t){let i=Object.keys(e.moveSprites);if(0===i.length)return!1;for(let r of i){let i=e.moveSprites[r];if(i.x===e.x&&i.y===e.y)continue;i.x=e.x,i.y=e.y;let n=t+("above"===h.get(i,"depthByPlayer","")?1:-.1);o.debug('Sprite "'+r+'" new depth: '+n+".",i),i.setDepth(n)}}playPlayerAnimation(e,t,i){if(this.isDeath(t)||this.isDisabled(t))return o.debug('Player with ID "'+i+'" is disabled to play the animation.',t),!1;o.debug("Play player animation.",e.avatarKey,t);let r=this.gameManager.mappedAvatars[e.avatarKey];if(this.animationBasedOnPress){let i=r+"_"+t.dir;return t.x===e.x&&t.y===e.y?(o.debug('Player has not changed, skipped animation "'+i+'".'),!1):(o.debug("Animation played based on press active.",r,{x:t.x+" / "+e.x,y:t.y+" / "+e.y}),void e.anims.play(i,!0))}if(t.x!==e.x){let i=t.x<e.x?r+"_"+s.LEFT:r+"_"+s.RIGHT;e.anims.play(i,!0)}if(t.y!==e.y){let i=t.y<e.y?r+"_"+s.UP:r+"_"+s.DOWN;e.anims.play(i,!0)}}stopPlayerAnimation(e,t){t.mov||(e.anims.stop(),e.mov=t.mov)}removePlayer(e){h.hasOwn(this.players,e)&&h.hasOwn(this.players[e],"nameSprite")&&(this.players[e].nameSprite.destroy(),this.players[e].destroy(),delete this.players[e])}left(){"pressed"!==this.lastKeyState[s.LEFT]&&(this.lastKeyState[s.LEFT]="pressed",this.roomEvents.send({dir:s.LEFT}))}right(){"pressed"!==this.lastKeyState[s.RIGHT]&&(this.lastKeyState[s.RIGHT]="pressed",this.roomEvents.send({dir:s.RIGHT}))}up(){"pressed"!==this.lastKeyState[s.UP]&&(this.lastKeyState[s.UP]="pressed",this.roomEvents.send({dir:s.UP}))}down(){"pressed"!==this.lastKeyState[s.DOWN]&&(this.lastKeyState[s.DOWN]="pressed",this.roomEvents.send({dir:s.DOWN}))}stop(){this.lastKeyState[s.LEFT]="",this.lastKeyState[s.RIGHT]="",this.lastKeyState[s.UP]="",this.lastKeyState[s.DOWN]="",this.roomEvents.send({act:s.STOP})}runActions(){this.roomEvents.send({act:a.ACTION,type:this.defaultActionKeyConfig,target:this.currentTarget})}moveToPointer(e){if(this.isDeath()||this.isDisabled())return this.fullStop(),!1;this.lastKeyState[s.LEFT]="",this.lastKeyState[s.RIGHT]="",this.lastKeyState[s.UP]="",this.lastKeyState[s.DOWN]="",this.roomEvents.send({act:s.POINTER,column:e.worldColumn,row:e.worldRow,x:e.worldX-this.leftOff,y:e.worldY-this.topOff})}isDisabled(e){return e||(e=this.state),s.STATUS.DISABLED===e.inState}isDeath(e){return e||(e=this.state),s.STATUS.DEATH===e.inState}fullStop(){delete this.scene.interpolatePlayersPosition[this.player_id],this.stop()}getPosition(){return{x:this.players[this.playerId].x,y:this.players[this.playerId].y}}}},{"94c0b713770985e9":"9oLDU",c99c71c42a9e0f59:"z0nmL","51d102aa478bf778":"ja3Hr","369ffb9744f96759":"ijd9L"}],"9oLDU":[function(e,t,i,r){let{sc:n}=e("ac4f5669792a5cf0");t.exports.SpriteTextFactory=class{static attachTextToSprite(e,t,i,r,s,a){let o=this.getTextPosition(e,t,i,r),h=a.add.text(o.x,o.y,t,{fontFamily:n.get(i,"fontFamily","sans-serif"),fontSize:n.get(i,"fontSize","12px")});return h.style.setFill(n.get(i,"fill","#ffffff")),h.style.setAlign(n.get(i,"align","center")),h.style.setStroke(n.get(i,"stroke","#000000"),n.get(i,"strokeThickness",4)),h.style.setShadow(n.get(i,"shadowX",5),n.get(i,"shadowY",5),n.get(i,"shadowColor","rgba(0,0,0,0.7)"),n.get(i,"shadowBlur",5)),h.setDepth(n.get(i,"depth",2e5)),e[s]=h,h}static getTextPosition(e,t,i,r=0){if(!e)return{x:0,y:0};let s=n.get(i,"height",18);return{x:e.x-t.length*n.get(i,"textLength",4),y:e.y-s-e.height+r}}}},{ac4f5669792a5cf0:"ijd9L"}],ja3Hr:[function(e,t,i,r){let n="actions.";t.exports.ActionsConst={BATTLE_TYPE_PER_TARGET:"bt",BATTLE_TYPE_GENERAL:"bg",BATTLE_ENDED:"bend",TARGET_POSITION:"tgp",TARGET_PLAYER:"tga",TARGET_OBJECT:"tgo",FULL_SKILLS_LIST:"fkl",ACTION:"action",DATA_OBJECT_KEY_TARGET:"t",DATA_OBJECT_KEY_OWNER:"o",DATA_TARGET_TYPE:"tT",DATA_TARGET_KEY:"tK",DATA_OWNER_TYPE:"oT",DATA_OWNER_KEY:"oK",DATA_TYPE_VALUE_ENEMY:"e",DATA_TYPE_VALUE_PLAYER:"p",DATA_TYPE_VALUE_OBJECT:"o",EXTRA_DATA:{KEY:"sked",SKILL_DELAY:"sd"},DEFAULT_HIT_ANIMATION_KEY:"default_hit",ACTIONS:{SUFFIX:{ATTACK:"_atk",EFFECT:"_eff",HIT:"_hit"}},MESSAGE:{DATA:{LEVEL:"lvl",EXPERIENCE:"exp",CLASS_PATH_LABEL:"lab",NEXT_LEVEL_EXPERIENCE:"ne",SKILL_LEVEL:"skl",LAST_ATTACK_KEY:"k"},DATA_VALUES:{NAMESPACE:"actions",lvl:"level",exp:"experience",lab:"classPathLabel",ne:"nextLevelExperience",skl:"skillLevel"}},SELECTORS:{LEVEL_LABEL:".level-container .level-label",CURRENT_EXPERIENCE:".experience-container .current-experience",NEXT_LEVEL_EXPERIENCE:".experience-container .next-level-experience",PLAYER_CREATE_FORM:"#player-create-form",UI_PLAYER_EXTRAS:"#ui-player-extras",PLAYER_CREATION_ADDITIONAL_INFO:".player-creation-additional-info",PLAYER_SELECTION_ADDITIONAL_INFO:".player-selection-additional-info",CLASS_PATH_LABEL:".class-path-container .class-path-label",SKILLS_CONTAINER:".skills-container"},SNIPPETS:{PREFIX:n,SELECT_CLASS_PATH:n+"selectClassPath",EXPERIENCE_LABEL:n+"experienceLabel",LEVEL:n+"currentLevel",CLASS_PATH_LABEL:n+"classPathLabel",NEXT_LEVEL_EXPERIENCE:n+"nextLevelExperience",EXPERIENCE:n+"experience"}}},{}],"1uB65":[function(e,t,i,r){let{Scene:n,Input:s}=e("c5f254ffb1f1868"),{TileSetAnimation:a}=e("648aa76284c65b04"),{Minimap:o}=e("3e4f1f0221386850"),{GameConst:h}=e("43a627027f5eb0e5"),{ActionsConst:c}=e("f368cde667056257"),{Logger:l,sc:d}=e("1c07ccf976c90508");t.exports.SceneDynamic=class extends n{constructor(e,t,i){super({key:e}),this.key=e,this.params=t,this.gameManager=i,this.eventsManager=i.events,this.configManager=i.config,this.layers={},this.transition=!0,this.useTsAnimation=!1,this.arrowSprite=!1,this.objectsAnimationsData=!1,this.objectsAnimations={},this.setPropertiesFromConfig(),this.minimap=this.createMinimapInstance(this.minimapConfig),this.player=!1,this.interpolatePlayersPosition={},this.interpolateObjectsPositions={},this.generatedTilesets=[],this.tilesetAnimations=[],this.stopOnDeathOrDisabledSent=!1}setPropertiesFromConfig(){return this.configManager?(this.configuredFrameRate=this.configManager.getWithoutLogs("client/general/animations/frameRate",10),this.clientInterpolation=this.configManager.getWithoutLogs("client/general/engine/clientInterpolation",!0),this.interpolationSpeed=this.configManager.getWithoutLogs("client/general/engine/interpolationSpeed",.1),this.minimapConfig=this.configManager.getWithoutLogs("client/ui/minimap",{}),!0):(this.configuredFrameRate=10,this.clientInterpolation=!0,this.interpolationSpeed=.1,this.minimapConfig={},!1)}createMinimapInstance(e){return!!this.minimapConfig.enabled&&new o({config:e,events:this.eventsManager})}init(){this.scene.setVisible(!1,this.key),this.input.keyboard.removeAllListeners()}async create(){this.eventsManager.emitSync("reldens.beforeSceneDynamicCreate",this),this.disableContextMenu(),this.createControllerKeys(),this.setupKeyboardAndPointerEvents(),await this.createSceneMap(),this.cameras.main.on("camerafadeincomplete",()=>{this.transition=!1,this.gameManager.gameDom.activeElement().blur(),this.minimap.createMap(this,this.gameManager.getCurrentPlayerAnimation()),this.gameManager.setChangingScene(!1)}),this.eventsManager.emitSync("reldens.afterSceneDynamicCreate",this)}update(e,t){this.interpolatePositions(),this.movePlayerByPressedButtons()}disableContextMenu(){return!!this.gameManager.config.get("client/ui/controls/disableContextMenu")&&(this.gameManager.gameDom.getDocument().addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()}),!0)}setupKeyboardAndPointerEvents(){this.input.keyboard.on("keydown",e=>this.executeKeyDownBehavior(e)),this.input.keyboard.on("keyup",e=>{this.executeKeyUpBehavior(e)}),this.input.on("pointerdown",(e,t)=>this.executePointerDownAction(e,t))}async createSceneMap(){this.map=this.make.tilemap({key:this.params.roomName});let e=this.processMissingImagesFromTilesets();await this.addTilesetImages(e),this.registerLayers(),this.registerTilesetAnimation()}processMissingImagesFromTilesets(){let e=this.cache?.tilemap?.entries?.entries[this.params.roomName]?.data,t=this.params.sceneImages,i=[],r=[];for(let n of e.tilesets){if(!d.inArray(n.image,t)){this.load.image(n.image,`/assets/maps/${n.image}`).on("loaderror",e=>{l.error("Load map image error: "+n.image,e)}),i.push({tilesetName:n.name,imageKey:n.image});continue}r.push({tilesetName:n.name,imageKey:n.image})}return 0<i.length&&(this.load.on("complete",async()=>{for(let e of i){l.debug('Adding tileset "'+e.tilesetName+'" with image key "'+e.imageKey+'".');let t=this.map.addTilesetImage(e.tilesetName,e.imageKey);this.generatedTilesets.push(t)}}),this.load.start()),r}async addTilesetImages(e){for(let t of e){let i=t.tilesetName;l.debug('Adding missing image to tileset "'+i+'" with image key "'+t.imageKey+'".');let r=this.map.addTilesetImage(i,t.imageKey);r||l.critical("Tileset creation error. Check if the tileset name equals the imageKey without the extension.",{roomName:this.params.roomName,imageKeys:e,createdTileset:r}),this.generatedTilesets.push(r)}}registerTilesetAnimation(){for(let e of this.generatedTilesets)if(this.hasTilesetAnimations(e))for(let t of(this.useTsAnimation=!0,Object.keys(this.layers))){let i=this.layers[t],r=new a;r.register(i,e),r.start(),this.tilesetAnimations.push(r)}}hasTilesetAnimations(e){let t=e?.tileData||{},i=Object.keys(t);if(0===i.length)return!1;for(let e of i)if(t[e].animation)return!0;return!1}executeKeyDownBehavior(e){if(this.gameManager.gameDom.insideInput())return!1;if(s.Keyboard.KeyCodes.SPACE===e.keyCode&&!this.gameManager.gameDom.insideInput()){if(!this.player)return!1;this.player.runActions()}return s.Keyboard.KeyCodes.ESC===e.keyCode&&this.gameManager.gameEngine.clearTarget(),s.Keyboard.KeyCodes.F5===e.keyCode&&(this.gameManager.forcedDisconnection=!0),!0}executeKeyUpBehavior(e){this.player&&-1!==this.availableControllersKeyCodes().indexOf(e.keyCode)&&this.player.stop()}createControllerKeys(){this.keyLeft=this.input.keyboard.addKey(s.Keyboard.KeyCodes.LEFT),this.keyA=this.input.keyboard.addKey(s.Keyboard.KeyCodes.A),this.keyRight=this.input.keyboard.addKey(s.Keyboard.KeyCodes.RIGHT),this.keyD=this.input.keyboard.addKey(s.Keyboard.KeyCodes.D),this.keyUp=this.input.keyboard.addKey(s.Keyboard.KeyCodes.UP),this.keyW=this.input.keyboard.addKey(s.Keyboard.KeyCodes.W),this.keyDown=this.input.keyboard.addKey(s.Keyboard.KeyCodes.DOWN),this.keyS=this.input.keyboard.addKey(s.Keyboard.KeyCodes.S);let e=this.availableControllersKeyCodes();for(let t of this.gameManager.gameDom.getElements("input"))this.addAndRemoveCapture(e,t)}addAndRemoveCapture(e,t){this.loopKeysAddListenerToElement(e,t,"focusin","removeCapture"),this.loopKeysAddListenerToElement(e,t,"click","removeCapture"),this.loopKeysAddListenerToElement(e,t,"focusout","addCapture"),this.loopKeysAddListenerToElement(e,t,"blur","addCapture")}availableControllersKeyCodes(){return[s.Keyboard.KeyCodes.LEFT,s.Keyboard.KeyCodes.A,s.Keyboard.KeyCodes.RIGHT,s.Keyboard.KeyCodes.D,s.Keyboard.KeyCodes.UP,s.Keyboard.KeyCodes.W,s.Keyboard.KeyCodes.DOWN,s.Keyboard.KeyCodes.S]}executePointerDownAction(e,t){if(0<t.length||!this.gameManager.config.get("client/players/tapMovement/enabled")||this.gameManager.activeRoomEvents.roomData?.worldConfig?.applyGravity)return!1;let i=this.gameManager.config.get("client/ui/controls/primaryMove"),r=this.gameManager.config.get("client/ui/controls/allowPrimaryTouch");return(!!e.wasTouch||!!e.primaryDown||!i)&&(!!e.wasTouch||!e.primaryDown||!!i)&&(!e.wasTouch||!!e.primaryDown||!r)&&(this.gameManager.gameDom.insideInput()&&this.gameManager.gameDom.activeElement().blur(),!!this.appendRowAndColumn(e)&&(this.player.moveToPointer(e),this.updatePointerObject(e),!0))}movePlayerByPressedButtons(){if(!this.gameManager.gameDom.insideInput()&&!this.transition&&!this.gameManager.isChangingScene){if(this.player.isDeath()||this.player.isDisabled()){this.stopOnDeathOrDisabledSent||this.player.fullStop(),this.stopOnDeathOrDisabledSent=!0;return}(this.keyRight.isDown||this.keyD.isDown)&&this.player.right(),(this.keyLeft.isDown||this.keyA.isDown)&&this.player.left(),(this.keyDown.isDown||this.keyS.isDown)&&this.player.down(),(this.keyUp.isDown||this.keyW.isDown)&&this.player.up()}}interpolatePositions(){this.clientInterpolation&&(this.processPlayersPositionInterpolation(),this.processObjectsPositionInterpolation())}processPlayersPositionInterpolation(){let e=Object.keys(this.interpolatePlayersPosition);if(0===e.length||!d.get(this.player,"players"))return!1;for(let t of e){let e=this.interpolatePlayersPosition[t];if(!e)continue;let i=this.player.players[t];if(!i)continue;if(this.isCurrentPosition(i,e)){delete this.interpolatePlayersPosition[t];continue}let r=d.roundToPrecision(Phaser.Math.Linear(i.x,e.x-this.player.leftOff,this.interpolationSpeed),2),n=d.roundToPrecision(Phaser.Math.Linear(i.y,e.y-this.player.topOff,this.interpolationSpeed),2);this.player.processPlayerPositionAnimationUpdate(i,e,t,r,n),e.mov||delete this.interpolatePlayersPosition[t]}return!0}processObjectsPositionInterpolation(){let e=Object.keys(this.interpolateObjectsPositions);if(0===e.length)return!1;let t=this.gameManager.getFeature("objects");for(let i of e)this.interpolateBulletPosition(i,t),this.interpolateObjectAnimationPosition(i,t);return!0}interpolateBulletPosition(e,t){if(!this.isBullet(e))return!1;let i=d.get(t.bullets,e);if(!i)return!1;let r=this.interpolateObjectsPositions[e];if(!r)return!1;if(this.isCurrentPosition(i,r))return delete this.interpolateObjectsPositions[e],!1;let n=d.roundToPrecision(Phaser.Math.Linear(i.x,r.x,this.interpolationSpeed),0),s=d.roundToPrecision(Phaser.Math.Linear(i.y,r.y,this.interpolationSpeed),0);return t.updateBulletBodyPosition(e,{x:n,y:s}),r.mov||delete this.interpolateObjectsPositions[e],!0}isBullet(e){return -1!==e.indexOf("bullet")}interpolateObjectAnimationPosition(e,t){let i=this.objectsAnimations[e];if(!i)return!1;let r=this.interpolateObjectsPositions[e];if(!r)return!1;if(this.isCurrentPosition(i,r))return delete this.interpolateObjectsPositions[e],!1;let n={x:d.roundToPrecision(Phaser.Math.Linear(i.x,r.x,this.interpolationSpeed),0),y:d.roundToPrecision(Phaser.Math.Linear(i.y,r.y,this.interpolationSpeed),0),inState:r.inState,mov:r.mov,dir:r.dir};return t.updateObjectsAnimations(e,n,this),r.mov||delete this.interpolateObjectsPositions[e],!0}isCurrentPosition(e,t){return e&&t?Math.round(e.x)===Math.round(t.x)&&Math.round(e.y)===Math.round(t.y):(l.warning("None entity found to compare current entity position."),!1)}async changeScene(){if(this.minimap?.destroyMap(),this.eventsManager.emitSync("reldens.changeSceneDestroyPrevious",this),this.objectsAnimations={},this.objectsAnimationsData=!1,this.useTsAnimation)for(let e of this.tilesetAnimations)e.destroy()}registerLayers(){if(0===this.map.layers.length)return!1;let e=0,t=this.configManager.get("client/map/layersDepth/belowPlayer"),i=this.configManager.get("client/map/layersDepth/changePoints");for(let r of this.map.layers){if(this.layers[e]=this.map.createLayer(r.name,this.generatedTilesets),!this.layers[e]){l.critical("Map layer could not be created.",r.name,this.key);continue}-1!==r.name.indexOf("below-player")&&this.layers[e].setDepth(t),-1!==r.name.indexOf("over-player")&&this.layers[e].setDepth(e*this.map.height*this.map.tileHeight),-1!==r.name.indexOf("change-points")&&this.layers[e].setDepth(i),e++}return!0}appendRowAndColumn(e){let t=this.map.worldToTileXY(e.worldX,e.worldY),i=this.map.worldToTileXY(this.player.state.x,this.player.state.y);return t&&i?(e.worldColumn=t.x,e.worldRow=t.y,e.playerOriginCol=i.x,e.playerOriginRow=i.y,e):(l.error("Move to pointer error."),!1)}createFloatingText(e,t,i,r,n,s=14,a=600,o=50,h="#000000",c=4,l="rgba(0,0,0,0.7)"){let d=this.add.text(e,t,i,{fontFamily:n,fontSize:s+"px"});d.style.setColor(r),d.style.setAlign("center"),d.style.setStroke(h,c),d.style.setShadow(5,5,l,5),d.setDepth(2e5),this.add.tween({targets:d,duration:a,ease:"Exponential.In",y:t-o,onComplete:()=>{d.destroy()}})}updatePointerObject(e){if(!this.configManager.get("client/ui/pointer/show"))return;this.arrowSprite&&this.arrowSprite.destroy();let t=this.configManager.get("client/ui/pointer/topOffSet",16);this.arrowSprite=this.physics.add.sprite(e.worldX,e.worldY-t,h.ARROW_DOWN),this.arrowSprite.setDepth(5e5),this.arrowSprite.anims.play(h.ARROW_DOWN,!0).on("animationcomplete",()=>{this.arrowSprite.destroy()})}getAnimationByKey(e){return this.anims&&this.anims?.anims&&this.anims?.anims?.entries?d.get(this.anims.anims.entries,e,!1):(l.error("Animations not loaded.",this.anims),!1)}getObjectFromExtraData(e,t,i){let r=!1,n=e+"K",s=t[e+"T"]===c.DATA_TYPE_VALUE_PLAYER;return!s&&d.hasOwn(this.objectsAnimations,t[n])&&(r=this.objectsAnimations[t[n]]),s&&d.hasOwn(i.players,t[n])&&(r=i.players[t[n]]),r}loopKeysAddListenerToElement(e,t,i,r){t.addEventListener(i,()=>{for(let t of e)this.input.keyboard[r](t)})}}},{c5f254ffb1f1868:"blAEg","648aa76284c65b04":"4ysMS","3e4f1f0221386850":"5cq29","43a627027f5eb0e5":"z0nmL",f368cde667056257:"ja3Hr","1c07ccf976c90508":"ijd9L"}],"4ysMS":[function(e,t,i,r){t.exports.TileSetAnimation=class{constructor(e){this.timer=e?.timer}register(e,t){for(let i of(this.animations=[],this.registered={},this.layer=e,this.tileset=t,Object.keys(t.tileData))){let e=t.tileData[i];if(!e.animation)continue;e.id=i;let r=0;for(let t of e.animation){if(Number(i)===Number(t?.tileid||0)){e.initIndex=r;break}r++}this.animations.push(e)}}start(){for(let e of this.animations){let t=e.animation.length,i=Number(e.initIndex||0),r=Number((i+1)%t);this.repeat(e,i,r)}}repeat(e,t,i){let r=e.id;this.registered[r]&&(this.registered[r]=null);let n=e.animation,s=n.length,a=Number(this.tileset.firstgid),o=Number(e.animation[t].tileid)+a,h=Number(e.animation[i].tileid)+a;this.layer.replaceByIndex(o,h);let c=n[i].duration,l=Number((i+1)%s);this.registered[r]=this.setTimeout(this.repeat.bind(this,e,Number(i),l),c)}destroy(){for(let e of Object.keys(this.registered))this.registered[e]&&this.clearTimeout(this.registered[e])}setTimeout(e,t){return this.timer?this.timer.setTimeout(e,t):setTimeout(e,t)}clearTimeout(e){return this.timer?this.timer.clearTimeout(e):clearTimeout(e)}}},{}],"5cq29":[function(e,t,i,r){let{sc:n}=e("786a4b1c3c76b965");t.exports.Minimap=class{constructor(e){this.config=e.config,this.events=e.events}createMap(e,t){this.minimapCamera=!1,this.circle=!1,this.scope=!1,this.awaitOnCamera=n.get(this.config,"awaitOnCamera",400),this.autoWidth=e.map.widthInPixels/n.get(this.config,"mapWidthDivisor",1),this.camWidth=n.get(this.config,"fixedWidth",this.autoWidth),this.autoHeight=e.map.heightInPixels/n.get(this.config,"mapHeightDivisor",1),this.camHeight=n.get(this.config,"fixedHeight",this.autoHeight),this.camX=n.get(this.config,"camX",0),this.camY=n.get(this.config,"camY",0),this.camBackgroundColor=n.get(this.config,"camBackgroundColor","rgba(0,0,0,0.6)"),this.camZoom=n.get(this.config,"camZoom",.15),this.roundMap=n.get(this.config,"roundMap",!1),this.addCircle=n.get(this.config,"addCircle",!1),this.createMinimapCamera(e,t),this.createRoundMap(e),this.events.emitSync("reldens.createdMinimap",this)}createMinimapCamera(e,t){this.minimapCamera=e.cameras.add(this.camX,this.camY,this.camWidth,this.camHeight).setName("minimap").setBackgroundColor(this.camBackgroundColor).setZoom(this.camZoom).startFollow(t,n.get(this.config,"mapCameraRoundPixels",!0),n.get(this.config,"mapCameraLerpX",1),n.get(this.config,"mapCameraLerpY",1)).setRoundPixels(!0).setVisible(!1).setOrigin(n.get(this.config,"mapCameraOriginX",.18),n.get(this.config,"mapCameraOriginY",.18))}createRoundMap(e){return!!this.roundMap&&(this.addCircle&&this.addMinimapCircle(e),this.createRoundCamera(e),!0)}addMinimapCircle(e){let t=e.gameManager.getActiveScenePreloader();this.circle=t.add.circle(n.get(this.config,"circleX",220),n.get(this.config,"circleY",88),n.get(this.config,"circleRadio",80.35),n.get(this.config,"circleColor","rgb(0,0,0)"),n.get(this.config,"circleAlpha",1)),this.circle.setStrokeStyle(n.get(this.config,"circleStrokeLineWidth",6),n.get(this.config,"circleStrokeColor",0),n.get(this.config,"circleStrokeAlpha",.6)),this.circle.setFillStyle(n.get(this.config,"circleFillColor",1),n.get(this.config,"circleFillAlpha",0)),this.circle.setVisible(!1)}createRoundCamera(e){this.scope=e.add.graphics(),this.scope.fillStyle(0,0).fillCircle(n.get(this.config,"circleX",220),n.get(this.config,"circleY",88),n.get(this.config,"circleRadio",80.35)),this.minimapCamera.setMask(this.scope.createGeometryMask())}destroyMap(){delete this.minimapCamera,delete this.circle,delete this.scope}}},{"786a4b1c3c76b965":"ijd9L"}],jayKj:[function(e,t,i,r){let{Scene:n,Geom:s}=e("df67ed4c812038a9"),{FullScreenHandler:a}=e("643f9af211d69196"),{MinimapUi:o}=e("a689b035cfc5756"),{InstructionsUi:h}=e("55a2dd84a2e283e3"),{SettingsUi:c}=e("29c970db688707f2"),{Joystick:l}=e("c747f1452190e301"),{GameConst:d}=e("475d783a521115cd"),{ActionsConst:u}=e("b9b9df6bd8016f7d"),{Logger:f,sc:p}=e("6e32bad98d4c2ac");t.exports.ScenePreloader=class extends n{constructor(e){super({key:e.name}),this.relatedSceneKey=e.name.replace(d.SCENE_PRELOADER,""),this.progressBar=null,this.progressCompleteRect=null,this.progressRect=null,this.userInterfaces={},this.preloadMapKey=e.map,this.preloadImages=e.images,this.uiScene=e.uiScene,this.elementsUi={},this.gameManager=e.gameManager,this.eventsManager=e.gameManager.events,this.preloadAssets=e.preloadAssets||{},this.directionalAnimations={},this.objectsAnimations={},this.gameManager.createdAnimations||(this.gameManager.createdAnimations={}),this.gameManager.activeRoomEvents.getActiveScene().objectsAnimationsData=e.objectsAnimationsData,this.playerSpriteSize={frameWidth:this.gameManager.config.get("client/players/size/width",52),frameHeight:this.gameManager.config.get("client/players/size/height",71)},this.useJoystick=this.gameManager.config.getWithoutLogs("client/ui/controls/useJoystick",!0),this.useJoystickOnLowResolutions=this.gameManager.config.getWithoutLogs("client/ui/controls/useJoystickOnLowResolutions",!0),this.joystick=new l({scenePreloader:this})}preload(){let e=this.uiScene?this:this.gameManager.gameEngine.uiScene;this.eventsManager.emitSync("reldens.beforePreload",this,e),this.preloadUiScene(),this.preloadMapJson(),this.preloadMapImages(),this.preloadValidAssets(),this.preloadPlayerDefaultSprite(),this.preloadArrowPointer(),this.load.image(d.ICON_STATS,this.gameManager.config.get("client/general/assets/statsIconPath","/assets/icons/book.png")),this.load.on("fileprogress",this.onFileProgress,this),this.load.on("progress",this.onLoadProgress,this),this.load.on("complete",this.onLoadComplete,this),this.configuredFrameRate=this.gameManager.config.get("client/general/animations/frameRate",10),this.showLoadingProgressBar()}preloadMapJson(){this.preloadMapKey&&this.load.tilemapTiledJSON(this.preloadMapKey,"/assets/maps/"+this.preloadMapKey+".json")}preloadArrowPointer(){if(!this.gameManager.config.get("client/ui/pointer/show"))return;let e={frameWidth:this.gameManager.config.getWithoutLogs("client/general/assets/arrowDownFrameWidth",32),frameHeight:this.gameManager.config.getWithoutLogs("client/general/assets/arrowDownFrameHeight",32)};this.load.spritesheet(d.ARROW_DOWN,this.gameManager.config.get("client/general/assets/arrowDownPath","/assets/sprites/arrow-down.png"),e)}preloadUiScene(){this.uiScene&&(this.eventsManager.emitSync("reldens.beforePreloadUiScene",this),this.gameManager.config.get("client/ui/playerBox/enabled")&&this.load.html("playerBox","/assets/html/ui-player-box.html"),this.gameManager.config.get("client/ui/controls/enabled")&&this.load.html("controls","/assets/html/ui-controls.html"),this.gameManager.config.get("client/ui/sceneLabel/enabled")&&this.load.html("sceneLabel","/assets/html/ui-scene-label.html"),this.gameManager.config.get("client/ui/instructions/enabled")&&this.load.html("instructions","/assets/html/ui-instructions.html"),this.gameManager.config.get("client/ui/minimap/enabled")&&this.load.html("minimap","/assets/html/ui-minimap.html"),this.gameManager.config.get("client/ui/settings/enabled")&&(this.load.html("settings","/assets/html/ui-settings.html"),this.load.html("settings-content","/assets/html/ui-settings-content.html")),this.gameManager.config.getWithoutLogs("client/ui/preloadTarget/enabled",!0)&&this.load.html("uiTarget","/assets/html/ui-target.html"),this.gameManager.config.getWithoutLogs("client/ui/fullScreenButton/enabled",!0)&&this.load.html("fullScreenButton","/assets/html/ui-full-screen-button.html"),this.gameManager.config.getWithoutLogs("client/ui/preloadOptionsTemplates/enabled",!0)&&(this.load.html("uiOptionButton","/assets/html/ui-option-button.html"),this.load.html("uiOptionIcon","/assets/html/ui-option-icon.html"),this.load.html("uiOptionsContainer","/assets/html/ui-options-container.html")),this.gameManager.config.getWithoutLogs("client/ui/preloadLoading/enabled",!0)&&this.load.html("uiLoading","/assets/html/ui-loading.html"),this.eventsManager.emitSync("reldens.preloadUiScene",this))}preloadMapImages(){if(this.preloadImages)for(let e of this.preloadImages)this.load.image(e,`/assets/maps/${e}`)}preloadValidAssets(){if(!p.isObject(this.preloadAssets))return void f.info("None assets available for preload.");for(let e of Object.keys(this.preloadAssets)){let t=this.preloadAssets[e];if("spritesheet"!==t.asset_type)continue;let i=p.toJson(t.extra_params);if(!i){f.error("Missing spritesheet params.",t);continue}this.load.spritesheet(t.asset_key,`/assets/custom/sprites/${t.asset_file}`,i)}}create(){let e=this.uiScene?this:this.gameManager.gameEngine.uiScene;this.eventsManager.emitSync("reldens.createPreload",this,e),this.uiScene&&this.createUiScene(),this.createPlayerAnimations(p.get(this.gameManager.playerData,"avatarKey",d.IMAGE_PLAYER)),this.createArrowAnimation()}createUiScene(){this.eventsManager.emitSync("reldens.beforeCreateUiScene",this),this.createPlayerBox(),this.createTargetUi(),this.createSceneLabelBox(),this.createControlsBox(),this.createInstructionsBox(),this.createMiniMap(),this.createSettingsUi(),this.createFullScreenButton(),this.eventsManager.emitSync("reldens.createUiScene",this)}createFullScreenButton(){let e=this.getUiConfig("fullScreenButton");e.enabled&&(this.elementsUi.fullScreenButton=this.createUi("fullScreenButton",e),this.fullScreen=new a(this.gameManager),this.fullScreen.activateFullScreen())}createSettingsUi(){let e=this.getUiConfig("settings");e.enabled&&(this.settingsUi=new c,this.settingsUi.createSettings(e,this))}createMiniMap(){let e=this.getUiConfig("minimap");e.enabled&&(this.minimapUi=new o,this.minimapUi.createMinimap(e,this))}createInstructionsBox(){let e=this.getUiConfig("instructions");e.enabled&&(this.instructionsUi=new h,this.instructionsUi.createInstructions(e,this))}createControlsBox(){let e=this.getUiConfig("controls");if(!e.enabled)return;this.elementsUi.controls=this.createUi("controls",e);let t=this.gameManager.gameDom.getElement(".ui-box-controls-main-container");(this.useJoystick||this.useJoystickOnLowResolutions)&&(t.classList.add("ui-box-joystick"),this.joystick.registerJoystickController()),this.useJoystickOnLowResolutions&&(t&&t.classList.add("joystick-small-resolutions-only"),this.registerControllers(this.elementsUi.controls))}createUi(e,t){return f.debug('Creating UI "'+e+'".',t),this.createContent(e,t.uiX,t.uiY)}createContent(e,t,i){return this.add.dom(t,i).createFromCache(e)}createSceneLabelBox(){let e=this.getUiConfig("sceneLabel");e.enabled&&(this.elementsUi.sceneLabel=this.createUi("sceneLabel",e))}createTargetUi(){let e=this.getUiConfig("uiTarget");e.enabled&&(this.uiTarget=this.createUi("uiTarget",e),this.uiTarget.getChildByProperty("className","close-target").addEventListener("click",()=>{this.gameManager.gameEngine.clearTarget()}))}createPlayerBox(){let e=this.getUiConfig("playerBox");if(!e.enabled)return;this.elementsUi.playerBox=this.createUi("playerBox",e);let t=this.elementsUi.playerBox.getChildByProperty("id","logout");t?.addEventListener("click",()=>{this.gameManager.forcedDisconnection=!0,this.gameManager.firebase.isActive&&this.gameManager.firebase.app.auth().signOut(),this.gameManager.gameDom.getWindow().location.reload()})}getUiConfig(e,t,i){let{uiX:r,uiY:n}=this.getUiPosition(e,t,i);return{enabled:this.gameManager.config.getWithoutLogs("client/ui/"+e+"/enabled"),uiX:r,uiY:n}}getUiPosition(e,t,i){""===e&&(e="default");let r=this.gameManager.config.getWithoutLogs("client/ui/"+e,{}),n=p.get(r,"x",0),s=p.get(r,"y",0);if(this.gameManager.config.get("client/ui/screen/responsive")){let e=p.get(r,"responsiveX",!1),a=p.get(r,"responsiveY",!1),o=this.gameManager.gameDom.getElement(d.SELECTORS.GAME_CONTAINER);t||(t=o.offsetWidth),i||(i=o.offsetHeight),n=!1!==e?e*t/100:0,s=!1!==a?a*i/100:0}return{uiX:n,uiY:s}}preloadPlayerDefaultSprite(){let e=this.gameManager.config.get("client/players/animations/fallbackImage",d.IMAGE_PLAYER_BASE);this.load.spritesheet(d.IMAGE_PLAYER,"/assets/custom/sprites/"+e,this.playerSpriteSize)}createPlayerAnimations(e){let t=this.gameManager.config.getWithoutLogs("client/players/animations/"+e+"Frames",this.gameManager.config.get("client/players/animations/defaultFrames"));for(let i of[{k:e+"_"+d.LEFT,img:e,start:t.left.start||3,end:t.left.end||5,repeat:-1,hide:!1},{k:e+"_"+d.RIGHT,img:e,start:t.right.start||6,end:t.right.end||8,repeat:-1,hide:!1},{k:e+"_"+d.UP,img:e,start:t.up.start||9,end:t.up.end||11,repeat:-1,hide:!1},{k:e+"_"+d.DOWN,img:e,start:t.down.start||0,end:t.down.end||2,repeat:-1,hide:!1}])this.createAnimationWith(i);this.eventsManager.emitSync("reldens.createPlayerAnimations",this,e)}createArrowAnimation(){if(!this.gameManager.config.get("client/ui/pointer/show"))return;let e={k:d.ARROW_DOWN,img:d.ARROW_DOWN,start:0,end:2,repeat:3,rate:6};this.createAnimationWith(e)}createAnimationWith(e){if(this.gameManager.createdAnimations[e.k])return;let t={key:e.k,frames:this.anims.generateFrameNumbers(e.img,{start:e.start,end:e.end}),frameRate:p.get(e,"frameRate",this.configuredFrameRate),repeat:e.repeat,hideOnComplete:p.get(e,"hide",!0)};return this.gameManager.createdAnimations[e.k]=this.anims.create(t),this.gameManager.createdAnimations[e.k]}registerControllers(e){this.setupDirButtonInBox(d.UP,e),this.setupDirButtonInBox(d.DOWN,e),this.setupDirButtonInBox(d.LEFT,e),this.setupDirButtonInBox(d.RIGHT,e),this.setupDefaultActionKey(e)}setupDefaultActionKey(e){let t=this.gameManager.config.get("client/ui/controls/defaultActionKey");if(!t)return;let i=this.createActionBox(t);this.gameManager.gameDom.appendToElement(".action-buttons",i),this.setupActionButtonInBox(t,e)}createActionBox(e){let t=this.cache.html.get("actionBox");return this.gameManager.gameEngine.parseTemplate(t,{key:e,actionName:e})}setupDirButtonInBox(e,t){let i=t.getChildByProperty("id",e);i&&this.hold(i,{dir:e})}setupActionButtonInBox(e,t){let i=t.getChildByProperty("id",e);if(i){if(this.gameManager.config.get("client/general/controls/action_button_hold"))return void this.hold(i,e);i?.addEventListener("click",()=>{let t=this.gameManager.activeRoomEvents.getActiveScene(),i={act:u.ACTION,target:t.player.currentTarget,type:e};this.gameManager.activeRoomEvents.send(i)})}}hold(e,t){e.addEventListener("mousedown",i=>{this.startHold(i,e,t)}),e.addEventListener("mouseup",t=>{this.endHold(t,e)}),e.addEventListener("mouseout",t=>{this.endHold(t,e)}),e.addEventListener("touchstart",i=>{this.startHold(i,e,t)}),e.addEventListener("touchend",t=>{this.endHold(t,e)})}startHold(e,t,i){e.preventDefault(),this.gameManager.config.get("client/ui/controls/opacityEffect")&&t.classList.add("button-opacity-off");let r=this.gameManager.activeRoomEvents.getActiveScene(),n=i;p.hasOwn(i,"dir")||(n={act:u.ACTION,target:r.player.currentTarget,type:i.type}),this.gameManager.activeRoomEvents.send(n)}endHold(e,t){e.preventDefault(),this.gameManager.config.get("client/ui/controls/opacityEffect")&&t.classList.remove("button-opacity-off"),this.gameManager.activeRoomEvents.send({act:d.STOP})}showLoadingProgressBar(){if(!this.gameManager.config.getWithoutLogs("client/ui/loading/show",!0))return;let e=s.Rectangle,t=e.Clone(this.cameras.main);this.progressRect=new e(0,0,t.width/2,50),e.CenterOn(this.progressRect,t.centerX,t.centerY),this.progressCompleteRect=s.Rectangle.Clone(this.progressRect),this.progressBar=this.createGraphics();let i=this.cameras.main.width,r=this.cameras.main.height,n=this.gameManager.config.get("client/ui/loading/font"),a=this.gameManager.config.get("client/ui/loading/fontSize"),o=this.gameManager.config.get("client/ui/loading/assetsSize");this.loadingText=this.createText(i/2,r/2-50,"Loading...",{fontFamily:n,fontSize:a}),this.loadingText.setOrigin(.5,.5),this.loadingText.setFill(this.gameManager.config.get("client/ui/loading/loadingColor")),this.percentText=this.createText(i/2,r/2-5,"0%",{fontFamily:n,fontSize:o}),this.percentText.setOrigin(.5,.5),this.percentText.setFill(this.gameManager.config.get("client/ui/loading/percentColor")),this.assetText=this.createText(i/2,r/2+50,"",{fontFamily:n,fontSize:o}),this.assetText.setFill(this.gameManager.config.get("client/ui/loading/assetsColor")),this.assetText.setOrigin(.5,.5)}createText(e,t,i,r){return this.add.text(e,t,i,r)}createGraphics(){return this.add.graphics()}onLoadComplete(){for(let e of this.children.list)e.destroy();this.loadingText.destroy(),this.assetText.destroy(),this.percentText.destroy(),this.scene.shutdown()}onFileProgress(e){this.gameManager.config.get("client/ui/loading/showAssets")&&this.assetText.setText("Loading "+e.key)}onLoadProgress(e){let t=parseInt(100*e)+"%";this.percentText.setText(t),this.progressRect.width=e*this.progressCompleteRect.width,this.progressBar.clear().fillStyle(2236962).fillRectShape(this.progressCompleteRect).fillStyle(0xffffff).fillRectShape(this.progressRect)}getUiElement(e,t=!0){return p.hasOwn(this.elementsUi,e)?this.elementsUi[e]:(t&&f.error("UI not found.",{uiName:e}),!1)}}},{df67ed4c812038a9:"blAEg","643f9af211d69196":"9jhY9",a689b035cfc5756:"8cZ75","55a2dd84a2e283e3":"4TZyy","29c970db688707f2":"LoGu3",c747f1452190e301:"enFMb","475d783a521115cd":"z0nmL",b9b9df6bd8016f7d:"ja3Hr","6e32bad98d4c2ac":"ijd9L"}],"9jhY9":[function(e,t,i,r){let{GameConst:n}=e("9cf3053a062e3fe1");t.exports.FullScreenHandler=class{constructor(e){this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.body=this.gameDom.getElement(n.SELECTORS.BODY)}activateFullScreen(){this.gameDom.getElement(n.SELECTORS.FULL_SCREEN_BUTTON)?.addEventListener("click",e=>{if(e.preventDefault(),this.gameDom.getDocument().fullscreenEnabled){if(!this.body.classList.contains(n.CLASSES.FULL_SCREEN_ON)){this.body.requestFullscreen(),this.goFullScreen();return}this.gameDom.getDocument().exitFullscreen(),this.exitFullScreen()}}),this.gameDom.getWindow().matchMedia("(display-mode: fullscreen)").addEventListener("change",({matches:e})=>{e?this.goFullScreen():this.exitFullScreen()})}goFullScreen(){this.body.classList.add(n.CLASSES.FULL_SCREEN_ON),this.gameManager?.gameEngine&&this.gameManager.gameEngine.updateGameSize(this.gameManager)}exitFullScreen(){this.body.classList.remove(n.CLASSES.FULL_SCREEN_ON),this.gameManager?.gameEngine&&this.gameManager.gameEngine.updateGameSize(this.gameManager)}}},{"9cf3053a062e3fe1":"z0nmL"}],"8cZ75":[function(e,t,i,r){let{sc:n}=e("3099c8189d097700");t.exports.MinimapUi=class{createMinimap(e,t){t.elementsUi.minimap=t.add.dom(e.uiX,e.uiY).createFromCache("minimap");let i=t.elementsUi.minimap.getChildByProperty("id","minimap-open"),r=t.elementsUi.minimap.getChildByProperty("id","minimap-close");i?.addEventListener("click",()=>{let e=t.elementsUi.minimap.getChildByProperty("id","minimap-ui");e.classList.remove("hidden"),i.classList.add("hidden");let n=t.gameManager.getActiveScene().minimap;n&&this.showMap(n,t,i,r,e)}),r?.addEventListener("click",()=>{let e=t.elementsUi.minimap.getChildByProperty("id","minimap-ui");e.classList.add("hidden"),i&&i.classList.remove("hidden");let n=t.gameManager.getActiveScene().minimap;n&&this.hideMap(n,t,r,e)})}showMap(e,t,i,r,n){this.awaitForCamera(e)?setTimeout(()=>{this.showMap(e,t,i,r,n)},e.awaitOnCamera):(e.minimapCamera.setVisible(!0),e.circle&&e.circle.setVisible(!0),t.gameManager.events.emit("reldens.openUI",{ui:this,openButton:i,minimap:e,box:n}))}hideMap(e,t,i,r){this.awaitForCamera(e)?setTimeout(()=>{this.hideMap(e,t,i,r)},e.awaitOnCamera):(e.minimapCamera.setVisible(!1),e.circle&&e.circle.setVisible(!1),t.gameManager.events.emit("reldens.closeUI",{ui:this,closeButton:i,minimap:e,box:r}))}awaitForCamera(e){return 0<e.awaitOnCamera&&(!e.minimapCamera||!n.isFunction(e.minimapCamera.setVisible))}}},{"3099c8189d097700":"ijd9L"}],"4TZyy":[function(e,t,i,r){let{Logger:n}=e("5a1cf36c8d3b7e72");t.exports.InstructionsUi=class{createInstructions(e,t){let i=t.add.dom(e.uiX,e.uiY).createFromCache("instructions");if(!i)return n.info("Instructions dialog box could not be created."),!1;let r=t.gameManager.gameDom.getElement("#instructions");if(!r)return n.info("Instructions container not found."),!1;let s=i.getChildByProperty("id","instructions-open");s?.addEventListener("click",()=>{r.style.display="block",t.gameManager.events.emit("reldens.openUI",{ui:this,openButton:s,dialogBox:i,dialogContainer:r,uiScene:t})});let a=t.gameManager.gameDom.getElement("#instructions-close");a?.addEventListener("click",()=>{r.style.display="none",t.gameManager.events.emit("reldens.closeUI",{ui:this,closeButton:a,openButton:s,dialogBox:i,dialogContainer:r,uiScene:t})}),t.elementsUi.instructions=i}}},{"5a1cf36c8d3b7e72":"ijd9L"}],LoGu3:[function(e,t,i,r){let{Logger:n}=e("203fa7507cacc04f");t.exports.SettingsUi=class{createSettings(e,t){let i=t.add.dom(e.uiX,e.uiY).createFromCache("settings");if(!i)return n.info("Settings dialog box could not be created."),!1;let r=t.cache.html.get("settings-content");if(!r)return n.info("Settings template not found."),!1;t.gameManager.gameDom.appendToElement(".content",r);let s=t.gameManager.gameDom.getElement("#settings-ui");if(!s)return n.info("Settings container not found."),!1;let a=t.gameManager.gameDom.getElement("#settings-close"),o=i.getChildByProperty("id","settings-open");o?.addEventListener("click",()=>{s.style.display="block",o&&(o.style.display="none"),t.gameManager.events.emit("reldens.openUI",{ui:this,openButton:o,dialogBox:i,dialogContainer:s,uiScene:t})}),a?.addEventListener("click",()=>{s.style.display="none",o&&(o.style.display="block"),t.gameManager.events.emit("reldens.closeUI",{ui:this,closeButton:a,openButton:o,dialogBox:i,dialogContainer:s,uiScene:t})}),t.elementsUi.settings=i}}},{"203fa7507cacc04f":"ijd9L"}],enFMb:[function(e,t,i,r){let{GameConst:n}=e("88178d0bc5e02e97"),{Logger:s,sc:a}=e("f4cd4df7f42f9061");t.exports.Joystick=class{constructor(e){this.gameManager=e?.scenePreloader?.gameManager,this.scenePreloader=e?.scenePreloader,this.gameDom=this.gameManager?.gameDom,this.isDragging=!1,this.centerX=!1,this.centerY=!1,this.threshold=this.gameManager.config.getWithoutLogs("client/ui/controls/joystickThreshold",20),this.joystickLeft=this.gameManager.config.getWithoutLogs("client/ui/controls/joystickLeft",25),this.joystickTop=this.gameManager.config.getWithoutLogs("client/ui/controls/joystickTop",25),this.positionSufix="px",this.useJoystickOnLowResolutions=a.get(e,"useJoystickOnLowResolutions",!1)}registerJoystickController(){return this.gameManager?(this.joystick=this.gameDom.getElement("#joystick"),this.joystick)?void(this.joystickThumb=this.gameDom.getElement("#joystick-thumb"),this.joystickThumb.addEventListener("mousedown",e=>{this.applyMovement(e.clientX,e.clientY)}),this.joystickThumb.addEventListener("touchstart",e=>{if(e.preventDefault(),!e.touches||0===e.touches.length)return s.debug("None event touches.",e),!1;let t=e.touches[0];this.applyMovement(t.clientX,t.clientY)}),this.gameDom.getDocument().addEventListener("mousemove",this.handleMouseMove.bind(this)),this.gameDom.getDocument().addEventListener("mouseup",this.handleStop.bind(this)),this.gameDom.getDocument().addEventListener("touchmove",this.handleTouchMove.bind(this)),this.gameDom.getDocument().addEventListener("touchend",this.handleStop.bind(this))):(s.error("Joystick element not found."),!1):(s.error("GameManager undefined on Joystick."),!1)}position(e){return e+this.positionSufix}applyMovement(e,t){this.isDragging=!0;let i=this.joystick.getBoundingClientRect();this.centerX=i.width/2,this.centerY=i.height/2,this.updateThumbPosition(e-i.left,t-i.top)}handleStop(){this.isDragging=!1,this.joystickThumb.style.left=this.position(this.joystickLeft),this.joystickThumb.style.top=this.position(this.joystickTop),this.gameManager.getCurrentPlayer().stop()}updateDirection(e,t){let i=e-this.centerX,r=t-this.centerY,s=n.STOP;if(Math.abs(i)>Math.abs(r)&&Math.abs(i)>this.threshold){for(let e of(s=i>0?Math.abs(r)>this.threshold?r>0?"right-down":"right-up":"right":Math.abs(r)>this.threshold?r>0?"left-down":"left-up":"left").split("-"))try{this.gameManager.getCurrentPlayer()[e]()}catch(e){}return s}if(Math.abs(r)>this.threshold){for(let e of(s=r>0?Math.abs(i)>this.threshold?i>0?"down-right":"down-left":"down":Math.abs(i)>this.threshold?i>0?"up-right":"up-left":"up").split("-"))try{this.gameManager.getCurrentPlayer()[e]()}catch(e){}return s}return this.gameManager.getCurrentPlayer().stop(),s}updateThumbPosition(e,t){let i=e-this.centerX,r=t-this.centerY,n=Math.sqrt(i*i+r*r),s=Math.min(this.centerX,this.centerY);if(n>s){let e=Math.atan2(r,i),t=Math.cos(e)*s+this.centerX-this.joystickThumb.offsetWidth/2;this.joystickThumb.style.left=this.position(t);let n=Math.sin(e)*s+this.centerY-this.joystickThumb.offsetHeight/2;this.joystickThumb.style.top=this.position(n);return}let a=e-this.joystickThumb.offsetWidth/2;this.joystickThumb.style.left=this.position(a);let o=t-this.joystickThumb.offsetHeight/2;this.joystickThumb.style.top=this.position(o)}handleMouseMove(e){if(!this.isDragging)return;let t=this.joystick.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top;this.updateThumbPosition(i,r),this.updateDirection(i,r)}handleTouchMove(e){if(!this.isDragging)return;if(!e.touches||0===e.touches.length)return s.debug('None event touches for "handleTouchMove".',e),!1;let t=e.touches[0],i=this.joystick.getBoundingClientRect(),r=t.clientX-i.left,n=t.clientY-i.top;this.updateThumbPosition(r,n),this.updateDirection(r,n)}}},{"88178d0bc5e02e97":"z0nmL",f4cd4df7f42f9061:"ijd9L"}],dNL8k:[function(e,t,i,r){let{StateCallbacksManager:n}=e("4612a9cd4ab010a7");t.exports.RoomStateEntitiesManager=class{static onEntityAddWithProperties(e,t,i,r,n){let s={};for(let e of i)s[e]=(t,i,r,s)=>{n&&n(t,i,e,r,s)};return this.onEntityAddWithPropertyCallbacks(e,t,s,r)}static onEntityAddWithPropertyCallbacks(e,t,i,r){let n=this.createManager(e),s=n.wrap(e.state);return n.onAdd(s[t],(e,t)=>{for(let s of(r&&r(e,t),Object.keys(i))){let r=i[s];n.listen(e,s,(i,n)=>{r(e,t,i,n)})}}),n}static onEntityAdd(e,t,i){return this._onCollectionEvent(e,t,"onAdd",i)}static onEntityRemove(e,t,i){return this._onCollectionEvent(e,t,"onRemove",i)}static createManager(e){return new n(e)}static _onCollectionEvent(e,t,i,r){let n=this.createManager(e),s=n.wrap(e.state);return n[i](s[t],r),n}}},{"4612a9cd4ab010a7":"rrKuv"}],rrKuv:[function(e,t,i,r){let{getStateCallbacks:n}=e("89a76d2f8b1cc857");t.exports.StateCallbacksManager=class{constructor(e){this.room=e,this.$=n(e),this.cleanupFunctions=[]}wrap(e){return this.$(e)}onAdd(e,t){let i=e.onAdd(t);return i&&this.cleanupFunctions.push(i),i}onRemove(e,t){let i=e.onRemove(t);return i&&this.cleanupFunctions.push(i),i}onChange(e,t){let i=e.onChange(t);return i&&this.cleanupFunctions.push(i),i}listen(e,t,i){let r=this.wrap(e).listen(t,i);return r&&this.cleanupFunctions.push(r),r}listenAll(e,t,i){for(let r of t)this.listen(e,r,(e,t)=>{i(r,e,t)})}dispose(){for(let e of this.cleanupFunctions)"function"==typeof e&&e();this.cleanupFunctions=[]}}},{"89a76d2f8b1cc857":"aVDM4"}],haVB3:[function(e,t,i,r){let{sc:n}=e("80b16a6e30c90335");t.exports.AnimationsDefaultsMerger=class{static mergeDefaults(e){if(!n.hasOwn(e,"animationsDefaults")||!n.hasOwn(e,"objectsAnimationsData"))return e;let t=e.animationsDefaults,i=e.objectsAnimationsData;for(let e of Object.keys(i)){let r=i[e];if(!n.hasOwn(r,"asset_key"))continue;r.key=e;let s=r.asset_key;if(!n.hasOwn(t,s))continue;let a=t[s];i[e]=Object.assign({},a,r)}return delete e.animationsDefaults,e}}},{"80b16a6e30c90335":"ijd9L"}],k6yGF:[function(e,t,i,r){let{RegistrationFormHandler:n}=e("61e9430bb51b7408"),{TermsAndConditionsHandler:s}=e("6e331d321b006ecf"),{LoginFormHandler:a}=e("6146b6a5adb0380b"),{ForgotPasswordFormHandler:o}=e("48bdd5abf515687b"),{GuestFormHandler:h}=e("5b4b95bc89fe7076");t.exports.ClientStartHandler=class{constructor(e){this.gameManager=e}clientStart(){let e=new n(this.gameManager);e.activateRegistration(),new h(this.gameManager).activateGuest();let t=new s(this.gameManager);t.activateTermsAndConditions();let i=new a(this.gameManager);i.activateLogin();let r=new o(this.gameManager);r.activateForgotPassword(),r.displayForgotPassword(),this.gameManager.firebase&&this.gameManager.firebase.startFirebase(),Object.assign(this.gameManager.elements,{registrationForm:e,termsAndConditions:t,loginForm:i,forgotPasswordForm:r}),this.gameManager.events.emitSync("reldens.clientStartAfter",this)}}},{"61e9430bb51b7408":"hUO6W","6e331d321b006ecf":"78Ur3","6146b6a5adb0380b":"eLV3F","48bdd5abf515687b":"5vO0M","5b4b95bc89fe7076":"5sZbW"}],hUO6W:[function(e,t,i,r){let{ErrorsBlockHandler:n}=e("e090c4bcd3707d9f"),{GameConst:s}=e("e6f38101bdd301e7");t.exports.RegistrationFormHandler=class{constructor(e){this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.form=e.gameDom.getElement(s.SELECTORS.REGISTER_FORM)}activateRegistration(){if(!this.form)return!1;if(!this.gameManager.config.get("client/general/users/allowRegistration"))return this.form.classList.add("hidden"),!0;n.reset(this.form);let e=s.SELECTORS,t=this.gameDom.getElement(e.TERMS.ACCEPT),i=this.gameDom.getElement(e.TERMS.BOX);return this.form.addEventListener("submit",r=>{if(r.preventDefault(),!this.form.checkValidity())return!1;let n=this.gameDom.getElement(e.REGISTRATION.PASSWORD).value,a=this.gameDom.getElement(e.REGISTRATION.RE_PASSWORD).value,o=this.form.querySelector(e.RESPONSE_ERROR);if(n!==a&&o)return o.innerHTML="Password and confirmation does not match.",!1;if(!t.checked&&o)return o.innerHTML="Please read and accept the terms and conditions and continue.",!1;i?.classList.add(s.CLASSES.HIDDEN),this.form.querySelector(e.LOADING_CONTAINER).classList.remove(s.CLASSES.HIDDEN);let h={formId:this.form.id,email:this.gameDom.getElement(e.REGISTRATION.EMAIL).value,username:this.gameDom.getElement(e.REGISTRATION.USERNAME).value,password:n,rePassword:a};this.gameManager.startGame(h,!0)}),!0}}},{e090c4bcd3707d9f:"botqX",e6f38101bdd301e7:"z0nmL"}],botqX:[function(e,t,i,r){let{GameConst:n}=e("32e4ac52cb34a235");t.exports.ErrorsBlockHandler=class{static reset(e){if(!e)return!1;let t=e.querySelector(n.SELECTORS.RESPONSE_ERROR);if(!t)return!1;let i=e.querySelector(n.SELECTORS.INPUT);if(!i)return!1;i.addEventListener("focus",()=>{t.innerHTML="";let i=e.querySelector(n.SELECTORS.LOADING_CONTAINER);i&&i?.classList.add(n.CLASSES.HIDDEN)})}}},{"32e4ac52cb34a235":"z0nmL"}],"78Ur3":[function(e,t,i,r){let{GameConst:n}=e("5e95024018707600"),{Logger:s}=e("b4c60b227487fe12");t.exports.TermsAndConditionsHandler=class{constructor(e){this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.linkContainer=this.gameManager.gameDom.getElement(n.SELECTORS.TERMS.LINK_CONTAINER)}activateTermsAndConditions(){if(!this.linkContainer)return!1;let e=this.gameManager.appServerUrl+n.ROUTE_PATHS.TERMS_AND_CONDITIONS,t=new URL(this.gameDom.getDocument().location).searchParams.get("lang","");return""!==t&&(e+="?lang="+t),this.gameDom.getJSON(e,(e,t)=>{if(!t.body||!t.heading||!t.checkboxLabel||!t.link)return!1;if(e)return s.info("Registration error.",e),!1;let i=n.SELECTORS.TERMS;this.gameDom.updateContent(i.HEADING,t.heading),this.gameDom.updateContent(i.BODY,t.body),this.gameDom.updateContent(i.ACCEPT_LABEL,t.checkboxLabel),this.gameDom.updateContent(i.LINK,t.link);let r=this.gameDom.getElement(i.LINK),a=this.gameDom.getElement(i.BOX);r?.addEventListener("click",e=>{e.preventDefault(),a?.classList.remove(n.CLASSES.HIDDEN)}),this.gameDom.getElement(i.CLOSE)?.addEventListener("click",()=>{a?.classList.add(n.CLASSES.HIDDEN)});let o=this.gameDom.getElement(n.SELECTORS.REGISTER_FORM);if(o){let e=this.gameDom.getElement(n.SELECTORS.RESPONSE_ERROR,o),t=this.gameDom.getElement(i.ACCEPT);t.addEventListener("click",()=>{t.checked&&(e.innerHTML="")}),this.gameDom.getElement(i.ACCEPT_LABEL).addEventListener("click",()=>{t.checked&&(e.innerHTML="")})}this.linkContainer?.classList.remove(n.CLASSES.HIDDEN)}),!0}}},{"5e95024018707600":"z0nmL",b4c60b227487fe12:"ijd9L"}],eLV3F:[function(e,t,i,r){let{ErrorsBlockHandler:n}=e("d2e27800ca9e6097"),{GameConst:s}=e("9e1bb13aa99be738");t.exports.LoginFormHandler=class{constructor(e){this.gameManager=e,this.form=e.gameDom.getElement(s.SELECTORS.LOGIN_FORM)}activateLogin(){return!!this.form&&(n.reset(this.form),this.form.addEventListener("submit",e=>{if(e.preventDefault(),n.reset(this.form),!this.form.checkValidity()||this.gameManager.submitedForm)return!1;this.gameManager.submitedForm=!0,this.form.querySelector(s.SELECTORS.LOADING_CONTAINER).classList.remove(s.CLASSES.HIDDEN);let t={formId:this.form.id,username:this.form.querySelector(s.SELECTORS.LOGIN.USERNAME).value,password:this.form.querySelector(s.SELECTORS.LOGIN.PASSWORD).value};return this.gameManager.startGame(t,!1)}),!0)}}},{d2e27800ca9e6097:"botqX","9e1bb13aa99be738":"z0nmL"}],"5vO0M":[function(e,t,i,r){let{ErrorsBlockHandler:n}=e("2f903207606daf1a"),{GameConst:s}=e("f41810322298058d");t.exports.ForgotPasswordFormHandler=class{constructor(e){this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.form=this.gameManager.gameDom.getElement(s.SELECTORS.FORGOT_PASSWORD_FORM)}activateForgotPassword(){return!!this.form&&(this.gameManager.config.get("client/general/users/allowRegistration")?(n.reset(this.form),this.form.addEventListener("submit",e=>{if(e.preventDefault(),n.reset(this.form),!this.form.checkValidity())return!1;this.form.querySelector(s.SELECTORS.LOADING_CONTAINER).classList.remove(s.CLASSES.HIDDEN);let t={formId:this.form.id,forgot:!0,email:this.form.querySelector(s.SELECTORS.FORGOT_PASSWORD.EMAIL).value};this.gameManager.startGame(t,!1)})):this.form.classList.add("hidden"),!0)}displayForgotPassword(){this.gameDom.getJSON(this.gameManager.appServerUrl+s.ROUTE_PATHS.MAILER,(e,t)=>{t.enabled&&this.gameDom.getElement(s.SELECTORS.FORGOT_PASSWORD.CONTAINER).classList.remove(s.CLASSES.HIDDEN)})}}},{"2f903207606daf1a":"botqX",f41810322298058d:"z0nmL"}],"5sZbW":[function(e,t,i,r){let{ErrorsBlockHandler:n}=e("ed3946e6f3fa9c11"),{GameConst:s}=e("b422c8c562d99fb2"),{sc:a}=e("f241b93688d82620");t.exports.GuestFormHandler=class{constructor(e){this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.form=e.gameDom.getElement(s.SELECTORS.GUEST_FORM)}activateGuest(){if(!this.form)return!1;let e=this.gameManager.config.getWithoutLogs("client/rooms/selection/availableRooms/registrationGuest",{});if(!this.gameManager.config.get("client/general/users/allowGuest")||0===Object.keys(e).length)return this.form.classList.add("hidden"),!0;n.reset(this.form);let t=s.SELECTORS;return this.form.addEventListener("submit",e=>{if(e.preventDefault(),!this.form.checkValidity())return!1;this.form.querySelector(t.LOADING_CONTAINER).classList.remove(s.CLASSES.HIDDEN);let i="guest-"+a.randomChars(12),r=this.gameManager.config.getWithoutLogs("client/general/users/allowGuestUserName",!1)?this.gameDom.getElement(t.GUEST.USERNAME).value:i,n={formId:this.form.id,username:r,password:r,rePassword:r,isGuest:!0};this.gameManager.startGame(n,!0)}),!0}}},{ed3946e6f3fa9c11:"botqX",b422c8c562d99fb2:"z0nmL",f241b93688d82620:"ijd9L"}],"4y5zd":[function(e,t,i,r){let{ClientCoreFeatures:n}=e("8ee8ee6c25b82d8c"),{Logger:s,sc:a}=e("5806e45b7c7c3fa8");t.exports.FeaturesManager=class{constructor(e){this.gameManager=a.get(e,"gameManager",!1),this.events=a.get(e,"events",!1),this.featuresList={}}async loadFeatures(e){if(!this.gameManager)return s.error("Game Manager undefined in FeaturesManager."),!1;if(!this.events)return s.error("EventsManager undefined in FeaturesManager."),!1;await this.events.emit("reldens.loadFeatures",this,e);let t=Object.keys(e);if(0===t.length)return this.featuresList;for(let i of t){let t=e[i];a.hasOwn(n,t)&&(this.featuresList[t]=new n[t],"function"==typeof this.featuresList[t].setup&&await this.featuresList[t].setup({gameManager:this.gameManager,events:this.events}),await this.events.emit("reldens.loadFeature_"+t,this.featuresList[t],this))}return this.featuresList}}},{"8ee8ee6c25b82d8c":"cv0iN","5806e45b7c7c3fa8":"ijd9L"}],cv0iN:[function(e,t,i,r){let{ChatPlugin:n}=e("949b1921d3bf5140"),{ObjectsPlugin:s}=e("aa8995112e7d6bdb"),{InventoryPlugin:a}=e("d9ef351011c1851b"),{ActionsPlugin:o}=e("408c84b7d592f2b6"),{UsersPlugin:h}=e("12e36b841f0da63e"),{AudioPlugin:c}=e("3fd885750ac6ac6b"),{RoomsPlugin:l}=e("f2563b87854d4a6e"),{PredictionPlugin:d}=e("282babf537556f44"),{TeamsPlugin:u}=e("d0d5a23fa0219ef6"),{SnippetsPlugin:f}=e("ffba7e1c5e50a8a7"),{AdsPlugin:p}=e("d50aaab7df227399"),{WorldPlugin:g}=e("c63ee71351943ae1"),{ScoresPlugin:m}=e("e1d7ab421b11cea0"),{RewardsPlugin:v}=e("bd8f677aa060e20b");t.exports.ClientCoreFeatures={chat:n,objects:s,inventory:a,actions:o,users:h,audio:c,rooms:l,prediction:d,teams:u,snippets:f,ads:p,world:g,scores:m,rewards:v}},{"949b1921d3bf5140":"gScn5",aa8995112e7d6bdb:"bJMRA",d9ef351011c1851b:"conJ9","408c84b7d592f2b6":"l8IOk","12e36b841f0da63e":"4ERVY","3fd885750ac6ac6b":"aBOFr",f2563b87854d4a6e:"aaOsc","282babf537556f44":"j8UE4",d0d5a23fa0219ef6:"cbRZ3",ffba7e1c5e50a8a7:"bYrQj",d50aaab7df227399:"3TJog",c63ee71351943ae1:"37V8i",e1d7ab421b11cea0:"l2gjI",bd8f677aa060e20b:"6qovx"}],gScn5:[function(e,t,i,r){let{ChatUi:n}=e("994be9db4994f9a3"),{MessagesListener:s}=e("b6a36cbfb0da5dfe"),{TemplatesHandler:a}=e("deb4c2146b2d1712"),o=e("267812d6128a4b8e"),{TranslationsMapper:h}=e("5e30eadde21dcf94"),{PluginInterface:c}=e("8d1c7a15abb408a"),{ChatConst:l}=e("fe17ff5717202a3b"),{Logger:d,sc:u}=e("ef3698ca9cea9d5");t.exports.ChatPlugin=class extends c{async setup(e){this.gameManager=u.get(e,"gameManager",!1),this.gameManager||d.error("Game Manager undefined in ActionsPlugin."),this.events=u.get(e,"events",!1),this.events||d.error("EventsManager undefined in ChatPlugin."),this.messagesQueu=[],this.uiManager=!1,this.joinRooms=[l.CHAT_GLOBAL],this.setTranslations(),this.listenEvents()}setTranslations(){if(!this.gameManager)return!1;h.forConfig(this.gameManager.config.client,o,l.MESSAGE.DATA_VALUES)}listenEvents(){if(!this.events)return!1;this.events.on("reldens.joinedRoom",async e=>{await s.listenMessages(e,this)}),this.events.on("reldens.preloadUiScene",e=>{a.preloadTemplates(e,this.gameManager.config.get("client/ui/chat/showTabs"))}),this.events.on("reldens.createUiScene",e=>{this.uiManager=new n(e),this.uiManager.createUi(),this.uiManager.createTabs(),this.uiManager.processMessagesQueue(this.messagesQueu)})}}},{"994be9db4994f9a3":"9Nr6K",b6a36cbfb0da5dfe:"3vpsw",deb4c2146b2d1712:"8rbJA","267812d6128a4b8e":"jfGM5","5e30eadde21dcf94":"62bet","8d1c7a15abb408a":"9RjlI",fe17ff5717202a3b:"1v3y9",ef3698ca9cea9d5:"ijd9L"}],"9Nr6K":[function(e,t,i,r){let{Input:n}=e("97d93bd9735e7bfb"),{SpriteTextFactory:s}=e("19814f11619c8dd"),{ChatTabs:a}=e("2429a93c399ce990"),{ChatConst:o}=e("644250816f608ee2"),{Logger:h,sc:c}=e("1eb163b9249e21a9");t.exports.ChatUi=class{constructor(e){this.uiScene=e,this.gameManager=this.uiScene?.gameManager,this.gameDom=this.uiScene?.gameManager?.gameDom,this.setChatTypes(),this.setChatConfiguration(),this.uiChat={},this.messagesQueu=[],this.chatInput=!1,this.chatSendButton=!1,this.chatCloseButton=!1,this.chatOpenButton=!1}setChatConfiguration(){if(!this.gameManager||!this.gameManager.config)return!1;this.uiConfig=this.gameManager.config.get("client/ui/chat"),this.overheadChat=c.get(this.uiConfig,"overheadChat",{}),this.overHeadChatEnabled=c.get(this.overheadChat,"enabled",!1),this.overheadText=c.get(this.uiConfig,"overheadText",{}),this.isDefaultOpen=c.get(this.uiConfig,"defaultOpen",!1),this.isTyping=c.get(this.overheadChat,"isTyping",!1),this.showTabs=c.get(this.uiConfig,"showTabs",!1),this.closeChatBoxAfterSend=c.get(this.closeChatBoxAfterSend,"isTyping",!1),this.messagesConfig=this.gameManager.config.get("client/chat/messages"),this.characterLimit=c.get(this.messagesConfig,"characterLimit",0),this.characterLimitOverhead=c.get(this.messagesConfig,"characterLimitOverhead",0),this.appendErrorTypeOnActiveTab=c.get(this.messagesConfig,"appendErrorTypeOnActiveTab",!0)}setChatTypes(){if(!this.gameManager)return h.warning("Missing GameManager on ChatUI."),!1;if(!this.gameDom)return h.warning("Missing GameDom on ChatUI."),!1;if(!this.gameManager.initialGameData)return h.warning('Missing "initialGameData" on ChatUI.'),!1;if(this.chatTypes=c.get(this.gameManager.initialGameData,"chatTypes",[]),0===this.chatTypes.length)return!1;for(let e of(this.chatTypesById={},this.chatTypes))this.chatTypesById[e.id]=e}createUi(){if(!this.uiScene)return h.warning("Missing UI Scene on ChatUI."),!1;let{uiX:e,uiY:t}=this.uiScene.getUiConfig("chat");if(this.uiChat=this.uiScene.add.dom(e,t).createFromCache("chat"),this.uiScene.elementsUi.chat=this.uiChat,this.chatInput=this.uiChat.getChildByProperty("id",o.CHAT_INPUT),!this.chatInput)return h.info("Missing chat input on ChatUI."),!1;this.setupKeyPressBehaviors(),this.chatInput.addEventListener("onfocusout",()=>{this.hideIsTyping()}),this.setupSendButton(),this.setupOpenCloseButtons(),this.overHeadChatEnabled&&this.setupOverheadChatEvents(),this.isDefaultOpen&&this.showChatBox()}createTabs(){return!!this.showTabs&&(this.tabs=new a(this.gameManager,this.uiScene),!0)}setupOverheadChatEvents(){this.gameManager.events.on("reldens.runPlayerAnimation",(e,t,i,r)=>{this.updateOverheadTextPosition(r)})}setupOpenCloseButtons(){this.chatOpenButton=this.uiChat.getChildByProperty("id",o.CHAT_OPEN_BUTTON),this.chatOpenButton?.addEventListener("click",()=>{this.showChatBox(),this.gameManager.events.emit("reldens.openUI",{ui:this,openButton:this.chatOpenButton,dialogBox:this.uiChat,dialogContainer:this.uiChat.getChildByProperty("id",o.CHAT_UI),uiScene:this.uiScene})}),this.chatCloseButton=this.uiChat.getChildByProperty("id",o.CHAT_CLOSE_BUTTON),this.chatCloseButton?.addEventListener("click",()=>{this.hideChatBox(),this.gameManager.events.emit("reldens.closeUI",{ui:this,closeButton:this.chatCloseButton,openButton:this.chatOpenButton,dialogBox:this.uiChat,dialogContainer:this.uiChat.getChildByProperty("id",o.CHAT_UI),uiScene:this.uiScene})})}setupSendButton(){this.chatSendButton=this.uiChat.getChildByProperty("id",o.CHAT_SEND_BUTTON),this.chatSendButton?.addEventListener("click",e=>{e.preventDefault(),this.sendChatMessage(this.chatInput,this.gameManager.activeRoomEvents),this.chatInput.focus()})}setupKeyPressBehaviors(){this.uiScene.input.keyboard.on("keyup-ENTER",()=>{this.isFocussedOnChatInput()||(this.showChatBox(),this.chatInput.focus())}),this.uiScene.input.keyboard.on("keyup-ESC",()=>{this.isFocussedOnChatInput()&&(this.hideChatBox(),this.chatInput.blur())}),this.chatInput.addEventListener("keyup",e=>{if(e.keyCode===n.Keyboard.KeyCodes.ENTER){e.preventDefault(),this.sendChatMessage();return}this.showIsTyping()})}showOverheadChat(e,t){if(!this.overHeadChatEnabled)return!1;e.overheadTextSprite&&this.destroyTextSprite(e),t=this.applyTextLimit(t,this.characterLimitOverhead),e.overheadTextSprite=s.attachTextToSprite(e,t,this.overheadText,c.get(this.overheadText,"topOff",0),"overheadTextSprite",this.gameManager.getActiveScene());let i=c.get(this.overheadText,"timeOut",!1);i&&setTimeout(()=>{this.destroyTextSprite(e)},i)}updateOverheadTextPosition(e){if(!e.overheadTextSprite)return!1;let t=s.getTextPosition(e,e.playerName,this.overheadText,c.get(this.overheadText,"topOff",0));e.overheadTextSprite.x=t.x,e.overheadTextSprite.y=t.y}destroyTextSprite(e){if(!e.overheadTextSprite)return!1;e.overheadTextSprite.destroy(),delete e.overheadTextSprite}showIsTyping(){if(!this.overHeadChatEnabled||!this.isTyping||!this.isFocussedOnChatInput())return!1;this.showOverheadChat(this.gameManager.getCurrentPlayerAnimation(),this.gameManager.config.getWithoutLogs("client/ui/chat/waitingContent",this.t(o.SNIPPETS.WAITING)))}hideIsTyping(){if(!this.isTyping)return!1;this.destroyTextSprite(this.gameManager.getCurrentPlayerAnimation())}isFocussedOnChatInput(){return this.gameManager.gameDom.activeElement()===this.chatInput}showChatBox(){this.uiChat.getChildByProperty("id",o.CHAT_UI).classList.remove("hidden"),this.uiChat.setDepth(4),this.chatOpenButton?.classList.add("hidden");let e=this.gameDom.getElement(o.SELECTORS.CHAT_MESSAGES);e&&(e.parentNode.scrollTop=e.scrollHeight),this.hideNotificationsBalloon()}hideChatBox(){let e=this.uiChat.getChildByProperty("id",o.CHAT_UI);if(!e)return h.info("Chat UI box not found."),!1;e.classList.add("hidden"),this.uiChat.setDepth(1),this.chatOpenButton?.classList.remove("hidden")}showNotificationBalloon(){this.getActiveBalloon()?.classList.remove("hidden")}hideNotificationsBalloon(){this.getActiveBalloon()?.classList.add("hidden")}getActiveBalloon(){if(!c.get(this.uiConfig,"notificationBalloon"))return!1;let e=this.uiChat.getChildByProperty("id",o.CHAT_BALLOON);return!!e&&e}processMessagesQueue(e){if(0===e.length)return!1;for(let t of e)this.attachNewMessage(t)}attachNewMessage(e){if(!this.gameManager.gameEngine.uiScene.cache)return;let t=this.gameManager.gameEngine.uiScene.cache.html.get("chatMessage"),i=this.translateMessage(e),r=this.gameManager.gameEngine.parseTemplate(t,{from:this.translateFrom(e),color:o.TYPE_COLOR[e[o.TYPES.KEY]],message:i}),n=this.showTabs?o.TYPES.MESSAGE:"",s=c.get(e,o.TYPES.KEY,n),a=c.get(this.chatTypesById,s,!1),l=!!(""!==s&&a?.show_tab)&&this.gameManager.gameDom.getElement(o.SELECTORS.TAB_CONTENT_PREFIX+s);l&&this.appendWithScroll(l,r);let d=!!a.also_show_in_type&&this.gameManager.gameDom.getElement(o.SELECTORS.TAB_CONTENT_PREFIX+a.also_show_in_type);d&&d!==l&&this.appendWithScroll(d,r);let u=""===s&&this.gameManager.gameDom.getElement(o.SELECTORS.CHAT_MESSAGES);if(u&&this.appendWithScroll(u,r),this.appendErrorTypeOnActiveTab&&o.TYPES.ERROR===s){let e=this.gameManager.gameDom.getElement(o.SELECTORS.TAB_CONTENT_ACTIVE);e&&e!==l&&e!==d&&this.appendWithScroll(e,r)}if(!l&&!d&&!u){null===l&&h.warning("Element not found for selector: .tab-content-"+s),null===d&&h.warning("Element not found for selector: .tab-content-"+a.also_show_in_type),h.warning("Chat message not attached to any tab or main panel.",{message:e,defaultType:n,messageType:s,chatType:a,appendToMain:u,appendToTab:l});return}if(e[o.MESSAGE.FROM]&&this.isValidMessageType(e[o.TYPES.KEY])){let t=this.fetchPlayerByName(e[o.MESSAGE.FROM]);t&&this.showOverheadChat(t,i)}this.uiChat.getChildByProperty("id",o.CHAT_UI).classList.contains("hidden")&&this.showNotificationBalloon()}appendWithScroll(e,t){e.innerHTML+=t,e.parentNode.scrollTop=e.scrollHeight}translateFrom(e){let t=e[o.TYPES.KEY],i=e[o.MESSAGE.FROM]||o.TYPES.SYSTEM;return this.isValidSnippetFromType(t)?this.t(o.SNIPPETS.PREFIX+o.TYPES.KEY+t):i}translateMessage(e){let t=e[o.TYPES.KEY];if(!this.isValidSnippetType(t))return e[o.MESSAGE.KEY];let i=e[o.MESSAGE.DATA.KEY];if(!i)return this.t(e[o.MESSAGE.KEY]);if(i[o.MESSAGE.DATA.MODIFIERS]){let t="",r=i[o.MESSAGE.DATA.TARGET_LABEL];for(let n of Object.keys(i[o.MESSAGE.DATA.MODIFIERS])){let s=this.t(n),a=i[o.MESSAGE.DATA.MODIFIERS][n];t+=this.t(e[o.MESSAGE.KEY],{propertyValue:a,propertyLabel:s,targetLabel:r})}return t}return this.t(e[o.MESSAGE.KEY],i)}t(e,t={},i=!1){return this.gameManager.services.translator.t(e,t,i)}isValidMessageType(e){return -1===this.validMessageTypes().indexOf(e)}validMessageTypes(){return[Object.values(o.TYPES)]}isValidSnippetType(e){let t=this.snippetsMessageTypes();for(let i of Object.keys(t))if(t[i]===e)return!0;return!1}snippetsMessageTypes(){let e=Object.assign({},o.TYPES);return delete e[o.TYPES.MESSAGE],delete e[o.TYPES.PRIVATE],delete e[o.TYPES.GLOBAL],delete e[o.TYPES.TEAMS],e}isValidSnippetFromType(e){return -1!==[o.TYPES.SYSTEM,o.TYPES.ERROR].indexOf(e)}fetchPlayerByName(e){let t=this.gameManager.getCurrentPlayer().players,i=Object.keys(t);if(1>=i.length)return!1;for(let r of i){let i=t[r];if(i.playerName===e)return i}}sendChatMessage(){if(!this.isValidMessage())return!1;let e=this.applyTextLimit(this.chatInput.value,this.characterLimit),t={act:o.CHAT_ACTION,m:e};this.gameManager.events.emitSync("reldens.chatMessageObjectCreated",this,t),this.useGlobalRoom()?this.useGlobalRoomForMessage(t):this.gameManager.activeRoomEvents.send(t),this.chatInput.value="",this.closeChatBoxAfterSend&&this.hideChatBox()}applyTextLimit(e,t){return 0<t&&t<e.length?e.substring(0,t):e}useGlobalRoom(){return 0===this.chatInput.value.indexOf("#")||0===this.chatInput.value.indexOf("@")}isValidMessage(){return this.chatInput.value&&0<this.chatInput.value.replace("#","").replace("@","").trim().length}useGlobalRoomForMessage(e){let t=c.get(this.gameManager.joinedRooms,o.CHAT_GLOBAL,!1);return t?0===this.chatInput.value.indexOf("@")?void this.sendPrivateMessage(e,t):void this.globalSend(t,e):(h.error("Global chat room not found."),!1)}sendPrivateMessage(e,t){let i=this.chatInput.value.substring(1,this.chatInput.value.indexOf(" "));if("@"===i)return!1;e.t=i,this.globalSend(t,e)}globalSend(e,t){try{e.send("*",t)}catch(e){h.critical(e),this.gameDom.alertReload(this.gameManager.services.translator.t("game.errors.connectionLost"))}}}},{"97d93bd9735e7bfb":"blAEg","19814f11619c8dd":"9oLDU","2429a93c399ce990":"4oiNd","644250816f608ee2":"1v3y9","1eb163b9249e21a9":"ijd9L"}],"4oiNd":[function(e,t,i,r){let{ChatConst:n}=e("a22c3a2311bae153"),{Logger:s,sc:a}=e("6e140e18d42fb249");t.exports.ChatTabs=class{constructor(e,t){this.gameManager=e,this.uiScene=t,this.showTabs=this.gameManager.config.get("client/ui/chat/showTabs"),this.containerTemplate=!1,this.headerTemplate=!1,this.contentTemplate=!1,this.createTabs(),this.activateTabs()}createTabs(){if(!this.isReady())return!1;let e=a.get(this.gameManager.initialGameData,"chatTypes",[]);if(0===e.length)return s.info("Chat types empty."),!1;if(!this.gameManager.gameDom.getElement(n.SELECTORS.CONTENTS))return s.info("Chat contents element not found."),!1;if(!this.fetchTemplates())return!1;let t="",i="",r=0;for(let s of e){if(!s.show_tab)continue;let e=s.key,a=s.id,o=Object.assign({},{headerTemplate:this.headerTemplate});t+=this.gameManager.gameEngine.parseTemplate(o.headerTemplate,{tabId:a,tabLabel:this.gameManager.services.translator.t(n.SNIPPETS.PREFIX+n.SNIPPETS.TAB_PREFIX+e),className:0===r?" active":""});let h=Object.assign({},{contentTemplate:this.contentTemplate});i+=this.gameManager.gameEngine.parseTemplate(h.contentTemplate,{tabId:a,tabKey:e,className:0===r?" active":""}),r++}let o=this.gameManager.gameEngine.parseTemplate(this.containerTemplate,{tabsHeaders:t,tabsContents:i});this.gameManager.gameDom.updateContent(n.SELECTORS.CONTENTS,o)}fetchTemplates(){return(this.containerTemplate=this.uiScene.cache.html.get("chatTabsContainer"),this.containerTemplate)?(this.headerTemplate=this.uiScene.cache.html.get("chatTabLabel"),this.headerTemplate)?(this.contentTemplate=this.uiScene.cache.html.get("chatTabContent"),!!this.contentTemplate||(s.info("Chat contentTemplate not found."),!1)):(s.info("Chat headerTemplate not found."),!1):(s.info("Chat containerTemplate not found."),!1)}isReady(){return this.gameManager||s.error("ChatTabs, missing game manager."),this.uiScene||s.error("ChatTabs, missing UI Scene."),!(!this.showTabs||!this.gameManager||!this.uiScene)}activateTabs(){for(let e of this.gameManager.gameDom.getElements(".tab-label"))e.addEventListener("click",e=>{let t=this.gameManager.gameDom.getElement(".tab-label.active");t?.classList.remove("active"),e.target.classList.add("active");let i=this.gameManager.gameDom.getElement(".tab-content.active");i?.classList.remove("active");let r=this.gameManager.gameDom.getElement(".tab-content-"+e.target.dataset.tabId);if(!r)return s.warning("Tab content was not found.",e),!1;r.classList.add("active"),r.parentNode.scrollTop=r.scrollHeight})}}},{a22c3a2311bae153:"1v3y9","6e140e18d42fb249":"ijd9L"}],"1v3y9":[function(e,t,i,r){let n="chat.",s="player.",a={KEY:"ctk",MESSAGE:1,JOINED:2,SYSTEM:3,PRIVATE:4,DAMAGE:5,REWARD:6,SKILL:7,TEAMS:8,GLOBAL:9,ERROR:10};t.exports.ChatConst={ROOM_TYPE_CHAT:"chat",CHAT_ACTION:"c",TYPES:a,CHAT_FROM:"f",CHAT_TO:"t",CHAT_UI:"chat-ui",CHAT_FORM:"chat-form",CHAT_INPUT:"chat-input",CHAT_SEND_BUTTON:"chat-send",CHAT_CLOSE_BUTTON:"chat-close",CHAT_OPEN_BUTTON:"chat-open",CHAT_BALLOON:"notification-balloon",CHAT_GLOBAL:"chat",MESSAGE:{KEY:"m",FROM:"f",TO:"t",DATA:{KEY:"md",SNIPPET:"sp",PLAYER_NAME:"pn",ROOM_NAME:"rn",DAMAGE:"d",TARGET_LABEL:"tL",SKILL_LABEL:"sk",MODIFIERS:"mfs"},DATA_VALUES:{NAMESPACE:"chat",pn:"playerName",rn:"roomName",d:"damage",tL:"targetLabel",sk:"skillLabel",mfs:"modifiers"}},SNIPPETS:{PREFIX:n,PLAYER_PREFIX:s,TAB_PREFIX:"tabs.",NPC_DAMAGE:n+"npcDamage",NPC_DODGED_SKILL:n+"dodgedSkill",MODIFIERS_APPLY:n+"modifiersApply",JOINED_ROOM:n+"joinedRoom",LEFT_ROOM:n+"leftRoom",PRIVATE_MESSAGE_PLAYER_NOT_FOUND:n+"playerNotFound",GLOBAL_MESSAGE_NOT_ALLOWED:n+"globalMessageNotAllowed",GLOBAL_MESSAGE_PERMISSION_DENIED:n+"globalMessagePermissionDenied",PLAYER:{DAMAGE:n+s+"damage",DODGED_SKILL:n+s+"dodgedSkill"},GUEST_INVALID_CHANGE_POINT:n+"guestInvalidChangePoint",WAITING:"..."},SELECTORS:{CONTENTS:"#chat-contents",CHAT_MESSAGES:"#chat-messages",TAB_CONTENT_PREFIX:".tab-content-",TAB_CONTENT_ACTIVE:".tab-content.active"},TYPE_COLOR:{[a.MESSAGE]:"#ffffff",[a.PRIVATE]:"#f39c12",[a.PRIVATE+".to"]:"#00afff",[a.GLOBAL]:"#ffff00",[a.SYSTEM]:"#2ecc71",[a.ERROR]:"#ff0000",[a.DAMAGE]:"#ff0000",[a.SYSTEM+".modifiers"]:"#0feeff",[a.REWARD]:"#2ecc71",[a.TEAMS]:"#2ecc71"}}},{}],"3vpsw":[function(e,t,i,r){let{ChatConst:n}=e("7520fddeb5373b09");t.exports.MessagesListener=class{static async listenMessages(e,t){e.onMessage("*",e=>{if(n.CHAT_ACTION===e.act){if(!t.uiManager)return void t.messagesQueu.push(e);t.uiManager.attachNewMessage(e)}})}}},{"7520fddeb5373b09":"1v3y9"}],"8rbJA":[function(e,t,i,r){t.exports.TemplatesHandler=class{static preloadTemplates(e,t){let i="/assets/features/chat/templates/";e.load.html("chat",i+"ui-chat.html"),e.load.html("chatMessage",i+"message.html"),t&&(e.load.html("chatTabsContainer",i+"tabs-container.html"),e.load.html("chatTabLabel",i+"tab-label.html"),e.load.html("chatTabContent",i+"tab-content.html"))}}},{}],jfGM5:[function(e,t,i,r){t.exports={chat:{ctk3:"System",ctk10:"System",npcDamage:"%damage damage on %targetLabel",dodgedSkill:"%targetLabel dodged %skill",modifiersApply:"%propertyValue %propertyLabel on %targetLabel",joinedRoom:"%playerName has joined %roomName",leftRoom:"%playerName has left",playerNotFound:'Player "%playerName" not found',globalMessagesNotAllowed:"Global messages not allowed",globalMessagePermissionDenied:"Global message permission denied",guestInvalidChangePoint:"The room is not available for guest users.",player:{damage:"%damage damage on %targetLabel",dodgedSkill:"%targetLabel dodged %skill"},tabs:{message:"General",joined:"Joined",system:"System",private:"Private",damage:"Damage",reward:"Rewards",skill:"Skills",teams:"Teams",global:"Global",error:"Error"}}}},{}],"62bet":[function(e,t,i,r){let{SnippetsConst:n}=e("f5fe63265b673629"),{sc:s}=e("70ef676150c60a42");t.exports.TranslationsMapper=class{static forConfig(e,t,i=!1,r=n.DEFAULT_LOCALE){e.snippets||(e.snippets={}),e.snippets[r]||(e.snippets[r]={});let a=this.fromObject(t);if(e.snippets[r]=s.deepMergeProperties(a,e.snippets[r]),!i)return;e.snippetsDataValues||(e.snippetsDataValues={});let o=i.NAMESPACE||n.DATA_VALUES_DEFAULT_NAMESPACE;s.deepMergeProperties(e.snippetsDataValues,{[o]:i})}static fromObject(e){let t=Object.keys(e);if(0===t.length)return{};let i={};for(let r of t)this.recursiveMap(r,e[r],i);return i}static recursiveMap(e,t,i){if(!s.isObject(t)){i[e]=t;return}let r=Object.keys(t);if(0!==r.length)for(let s of r)this.recursiveMap(e+n.CONCAT_CHARACTER+s,t[s],i)}}},{f5fe63265b673629:"af6n1","70ef676150c60a42":"ijd9L"}],af6n1:[function(e,t,i,r){t.exports.SnippetsConst={KEY:"snippets",DEFAULT_LOCALE:"en_US",CONCAT_CHARACTER:".",DATA_VALUES_DEFAULT_NAMESPACE:"default",ACTIONS:{UPDATE:"sn.Up"}}},{}],"9RjlI":[function(e,t,i,r){let{Logger:n}=e("956b760a8a542b20");t.exports.PluginInterface=class{async setup(e){return n.error("Setup plugin not implemented.",e),!1}}},{"956b760a8a542b20":"ijd9L"}],bJMRA:[function(e,t,i,r){let{AnimationEngine:n}=e("2d0db67a357a1df6"),{ObjectsMessageListener:s}=e("79a86c288b721c2b"),{DropsMessageListener:a}=e("deab023d199335c9"),o=e("8cedb0a2567e4f93"),{TranslationsMapper:h}=e("52449bab2a32580c"),{UserInterface:c}=e("52476153d5a162e6"),{ObjectsConst:l}=e("f64071d16effca52"),{ActionsConst:d}=e("bef8aa2a761e6924"),{PluginInterface:u}=e("6bb02e09282ac53"),{GameConst:f}=e("cb715b6f39878bc"),{Logger:p,sc:g}=e("c0cb3eea0cda2e5e"),{RoomStateEntitiesManager:m}=e("604cc52f03ddda3c");t.exports.ObjectsPlugin=class extends u{async setup(e){return(this.gameManager=g.get(e,"gameManager",!1),this.gameManager)?(this.events=g.get(e,"events",!1),this.events)?(this.bodyOnAddCallBack=!1,this.bodyOnRemoveCallBack=!1,this.bullets={},this.changeBodyVisibilityOnInactiveState=this.gameManager.config.getWithoutLogs("client/objects/animations/changeBodyVisibilityOnInactiveState",!0),this.missingSpritesTimeOut=this.gameManager.config.getWithoutLogs("client/general/animations/missingSpritesTimeOut",200),this.missingSpritesMaxRetries=this.gameManager.config.getWithoutLogs("client/general/animations/missingSpritesMaxRetries",5),this.missingSpriteRetry=0,this.listenEvents(),this.setTranslations(),this.setListener(),!0):(p.error("EventsManager undefined in InventoryPlugin."),!1):(p.error("Game Manager undefined in InventoryPlugin."),!1)}setListener(){return!!this.gameManager&&(this.gameManager.config.client.message.listeners.traderObject=new s,!0)}setTranslations(){return!!this.gameManager&&(h.forConfig(this.gameManager.config.client,o,l.MESSAGE.DATA_VALUES),!0)}listenEvents(){return!!this.events&&(this.events.on("reldens.startEngineScene",async e=>{await this.prepareObjectsUi(e.gameManager,e.roomData.objectsAnimationsData,e)}),this.events.on("reldens.afterSceneDynamicCreate",async e=>{await this.createDynamicAnimations(e)}),this.events.on("reldens.joinedRoom",(e,t)=>{this.listenMessages(e,t),a.listenMessages(e,t)}),!0)}listenMessages(e,t){if(e.onMessage("*",e=>{this.startObjectAnimation(e,t),this.objectBattleEndAnimation(e,t)}),!e.state||!e.state.bodies)return e.onStateChange.once(i=>{this.setAddBodyCallback(e,t),this.setRemoveBodyCallback(e)}),!1;this.setAddBodyCallback(e,t),this.setRemoveBodyCallback(e)}setAddBodyCallback(e,t){m.onEntityAdd(e,"bodies",(i,r)=>{this.setOnChangeBodyCallback(i,r,e,t),this.createBulletSprite(r,t,i)})}createBulletSprite(e,t,i){if(-1===e.indexOf("bullet"))return!1;let r=t.activeRoomEvents.getActiveScene(),n="default_bullet",s=(i.key?i.key+"_":"")+"bullet";g.hasOwn(t.gameEngine.uiScene.directionalAnimations,s)&&(s=s+"_"+i.dir),g.hasOwn(r.anims.anims.entries,s)&&(n=s);let a=r?.physics?.add?.sprite(i.x,i.y,n);return a?(a.setDepth(11e3),this.bullets[e]=a,!0):(p.warning("Could not create bullet sprite.",r),!1)}setOnChangeBodyCallback(e,t,i,r){let n=m.createManager(i);for(let i of Object.keys(e))n.listen(e,i,async(n,s)=>{await this.events.emit("reldens.objectBodyChange",{body:e,key:t,changes:{[i]:n}});let a=r.activeRoomEvents.getActiveScene();if(this.updateBodyProperties(i,e,n,a,t),!a)return;let o=-1!==t.indexOf("bullet"),h=o?this.bullets[t]:a?.objectsAnimations[t];this.setVisibility(h,f.STATUS.ACTIVE===e.inState),this.logObjectBodyUpdate(t,i,n,h);let c=f.STATUS.AVOID_INTERPOLATION!==e.inState;if(a?.clientInterpolation&&c){a.interpolateObjectsPositions[t]=e;return}return o?this.updateBulletBodyPosition(t,e):this.updateObjectsAnimations(t,e,a)})}logObjectBodyUpdate(e,t,i,r){("x"===t||"y"===t)&&r&&r[t]&&r[t]}setVisibility(e,t){e&&e.sceneSprite&&e.sceneSprite.setVisible(t)}updateBodyProperties(e,t,i,r,n){r.objectsAnimationsData[n]&&("x"===e||"y"===e)&&(r.objectsAnimationsData[n][e]=i),t[e]=i}updateBulletBodyPosition(e,t){this.bullets[e]&&(this.bullets[e].x=t.x,this.bullets[e].y=t.y,this.events.emit("reldens.objectBodyChanged",{body:t,key:e}))}updateObjectsAnimations(e,t,i){let r=g.get(i.objectsAnimations,e);if(!r||!g.isFunction(r.updateObjectAndSpritePositions))return p.error("Object animation update failed.",e,r),!1;r.updateObjectAndSpritePositions(t.x,t.y),this.events.emit("reldens.objectBodyChanged",{body:t,key:e});let n=r.updateObjectDepth();r.inState=t.inState;let s=this.fetchAvailableAnimationKey(i,r,t);return""!==s&&r.sceneSprite.anims.play(s,!0),this.moveSpritesObjects(r,t.x,t.y,n),!t.mov&&(r.sceneSprite.anims.stop(),r.sceneSprite.mov=t.mov,!!r.autoStart&&(r.sceneSprite.anims.play(this.determineAutoStartAnimation(r,s)),!0))}determineAutoStartAnimation(e,t){return!0===e.autoStart?e.key:e.autoStart===l.DYNAMIC_ANIMATION?t:e.autoStart}fetchAvailableAnimationKey(e,t,i){return g.getByPriority(e.anims.anims.entries,[t.key+"_"+i.dir,t.layerName+"_"+t.id+"_"+i.dir,t.key])||""}setRemoveBodyCallback(e){m.onEntityRemove(e,"bodies",(e,t)=>{if(-1===t.indexOf("bullet")||!g.hasOwn(this.bullets,t))return!1;this.bullets[t].destroy(),delete this.bullets[t]})}objectBattleEndAnimation(e,t){if(e.act!==d.BATTLE_ENDED)return!1;let i=g.get(t.config.client.skills.animations,e.k+"_death","default_death"),r=t.activeRoomEvents.getActiveScene();try{this.playDeathAnimation(i,r,e)}catch(e){p.warning('Error on sprite "'+i+'" not available.',e.message)}if(!g.hasOwn(e,d.DATA_OBJECT_KEY_TARGET))return!1;e[d.DATA_OBJECT_KEY_TARGET]===r.player.currentTarget?.id&&t.gameEngine.clearTarget();let n=g.get(r.player.players,e[d.DATA_OBJECT_KEY_TARGET],!1);if(!n)return!1;n.visible=!1,g.hasOwn(n,"nameSprite")&&n.nameSprite&&(n.nameSprite.visible=!1)}playDeathAnimation(e,t,i){if(!t.getAnimationByKey(e))return this.missingSpritesMaxRetries===this.missingSpriteRetry?p.debug('Sprite "'+e+'" not available.',e):(this.missingSpriteRetry++,setTimeout(()=>this.playDeathAnimation(e,t,i),this.missingSpritesTimeOut)),!1;let r=t.physics.add.sprite(i.x,i.y,e);return r.setDepth(10500),r.anims.play(e,!0).on("animationcomplete",()=>{r.destroy()}),!0}startObjectAnimation(e,t){if(e.act!==l.OBJECT_ANIMATION&&e.act!==l.TYPE_ANIMATION)return!1;let i=t.activeRoomEvents.getActiveScene();if(!g.hasOwn(i.objectsAnimations,e.key))return!1;i.objectsAnimations[e.key].runAnimation()}moveSpritesObjects(e,t,i,r){if(!e.moveSprites)return;let n=Object.keys(e.moveSprites);if(0!==n.length)for(let s of n){let n=e.moveSprites[s];n.x=t,n.y=i;let a=r+("above"===g.get(e.animationData,"depthByPlayer","")?1:-.1);n.setDepth(a)}}async prepareObjectsUi(e,t,i){if(!t)return void p.info("None objects animations data.");for(let r of Object.keys(t)){let n=t[r];if(!g.hasOwn(n,"ui"))continue;if(!n.id){p.error(["Object ID not specified. Skipping registry:",n]);continue}let s=g.get(n,"template","/assets/html/dialog-box.html");i.objectsUi[n.id]=new c(e,n,s,"npcDialog"),await e.events.emit("reldens.createdUserInterface",{gameManager:e,id:n.id,userInterface:i.objectsUi[n.id],ObjectsPlugin:this})}}async createDynamicAnimations(e){if(!e.objectsAnimationsData)return void p.info("None animations defined on this scene: "+e.key);for(let t of(await this.events.emit("reldens.createDynamicAnimationsBefore",this,e),Object.keys(e.objectsAnimationsData))){let i=e.objectsAnimationsData[t];await this.createAnimationFromAnimData(i,e)}}async createAnimationFromAnimData(e,t){if(!e.key)return p.error("Animation key not specified. Skipping registry.",e),!1;e.frameRate=t.configuredFrameRate;let i=t.gameManager.activeRoomEvents,r=this.fetchExistentBody(t,i,e);this.updateAnimationPosition(r,e),await this.events.emit("reldens.createDynamicAnimation_"+e.key,this,e);let s=new(t.gameManager.config.getWithoutLogs("client/customClasses/objects/"+e.key,n))(t.gameManager,e,t),a=s.createAnimation();return this.updateAnimationVisibility(r,a),s}updateAnimationPosition(e,t){if(!e)return!1;t.x!==e.x&&(t.x=e.x),t.y!==e.y&&(t.y=e.y)}updateAnimationVisibility(e,t){if(!e||f.STATUS.DEATH!==e.inState&&f.STATUS.DISABLED!==e.inState)return!1;t.visible=!1}fetchExistentBody(e,t,i){return e.key!==t.roomName?(p.warning("Scene key and roomName miss match: "+e.key+" / "+t.roomName+"."),!1):t.room.state.bodies.get(i?.key)}}},{"2d0db67a357a1df6":"6Buma","79a86c288b721c2b":"iBZ5S",deab023d199335c9:"5a4ST","8cedb0a2567e4f93":"dp9Ue","52449bab2a32580c":"62bet","52476153d5a162e6":"azIQk",f64071d16effca52:"6mDqg",bef8aa2a761e6924:"ja3Hr","6bb02e09282ac53":"9RjlI",cb715b6f39878bc:"z0nmL",c0cb3eea0cda2e5e:"ijd9L","604cc52f03ddda3c":"dNL8k"}],"6Buma":[function(e,t,i,r){let{Logger:n,sc:s}=e("69cb276730e319a6"),{ObjectsConst:a}=e("4aa72c897fe49299"),{GameConst:o}=e("e5f3f59c83d28a8d");t.exports.AnimationEngine=class{constructor(e,t,i){this.currentPreloader=i,this.currentAnimation=!1,this.gameManager=e,this.enabled=s.get(t,"enabled",!1),this.key=t.key,this.id=t.id,this.asset_key=s.get(t,"asset_key",t.key),this.assetPath=s.get(t,"assetPath","/assets/custom/sprites/"),this.type=s.get(t,"type",!1),this.ui=s.get(t,"ui",!1),this.targetName=t.targetName,this.frameRate=s.get(t,"frameRate",!1),this.frameStart=s.get(t,"frameStart",0),this.frameEnd=s.get(t,"frameEnd",0),this.x=s.get(t,"x",0),this.y=s.get(t,"y",0),this.repeat=isNaN(t.repeat)?-1:t.repeat,this.hideOnComplete=s.get(t,"hideOnComplete",!1),this.gameManager.createdAnimations||(this.gameManager.createdAnimations={}),this.destroyOnComplete=s.get(t,"destroyOnComplete",!1),this.autoStart=s.get(t,"autoStart",!1),this.layerName=s.get(t,"layerName",!1),this.positionFix=s.get(t,"positionFix",!1),this.zeroPad=s.get(t,"zeroPad",!1),this.prefix=s.get(t,"prefix",!1),this.isInteractive=s.get(t,"isInteractive",!1),this.highlightOnOver=!!s.get(t,"highlightOnOver",this.gameManager.config.getWithoutLogs("client/ui/animations/highlightOnOver",!0)),this.highlightColor=s.get(t,"highlightColor",this.gameManager.config.getWithoutLogs("client/ui/animations/highlightColor","0x00ff00")),this.restartTime=s.get(t,"restartTime",!1),this.calculateAnimPosition(),s.hasOwn(t,"animations")&&this.createObjectAnimations(t.animations)}updateObjectAndSpritePositions(e,t){this.sceneSprite.x=e,this.sceneSprite.y=t,this.x=e,this.y=t,this.calculateAnimPosition()}calculateAnimPosition(){this.animPos={x:this.x,y:this.y},this.positionFix&&(s.hasOwn(this.positionFix,"x")&&(this.animPos.x=this.x+this.positionFix.x),s.hasOwn(this.positionFix,"y")&&(this.animPos.y=this.y+this.positionFix.y))}updateObjectDepth(){let e=this.y+this.sceneSprite.height;return this.sceneSprite.setDepth(e),e}createAnimation(){if(!this.enabled)return n.error("Animation disabled: "+this.key),!1;let e=this.gameManager.activeRoomEvents.getActiveScene();if(!e)return n.error("Active scene not found."),!1;let t={start:this.frameStart,end:this.frameEnd};if(!1!==this.prefix&&(t.prefix=this.prefix),!1!==this.zeroPad&&(t.zeroPad=this.zeroPad),!this.currentPreloader.anims.textureManager.list[this.asset_key])return n.warning("Asset not found in preloader.",this.asset_key,t),this.currentPreloader.load.spritesheet(this.asset_key,this.assetPath+this.asset_key,t),this.currentPreloader.load.once("complete",async()=>{this.createAnimation()}),!1;let i=this.currentPreloader.anims.generateFrameNumbers(this.asset_key,t),r={key:this.key,frames:i,frameRate:this.frameRate,repeat:this.repeat,hideOnComplete:this.hideOnComplete};this.currentAnimation=this.gameManager.createdAnimations[this.key],this.currentAnimation||(n.debug("Creating animation: "+this.key),this.currentAnimation=this.currentPreloader.anims.create(r)),this.currentPreloader.objectsAnimations[this.key]=this.currentAnimation,this.gameManager.createdAnimations[this.key]=this.currentAnimation;let s=this.positionFix?this.animPos.x:this.x,a=this.positionFix?this.animPos.y:this.y;return this.sceneSprite=e.physics.add.sprite(s,a,this.asset_key),this.enableInteraction(e),this.enableAutoRestart(),this.automaticDestroyOnComplete(),this.sceneSprite.setDepth(this.y+this.sceneSprite.body.height),e.objectsAnimations[this.key]=this,this.gameManager.events.emitSync("reldens.createAnimationAfter",{animationEngine:this}),this.autoPlayAnimation(i),this.sceneSprite}autoPlayAnimation(e){this.autoStart&&!(1>=e.length)&&this.sceneSprite.anims.play(this.key,!0)}automaticDestroyOnComplete(){this.destroyOnComplete&&this.sceneSprite.on("animationcomplete",()=>{this.currentAnimation?.destroy(),this.sceneSprite.destroy()},this)}enableAutoRestart(){this.restartTime&&this.sceneSprite.on("animationcomplete",()=>{setTimeout(()=>{this.sceneSprite.anims&&(this.sceneSprite.anims.restart(),this.sceneSprite.anims.pause())},this.restartTime)},this)}enableInteraction(e){this.isInteractive&&(this.sceneSprite.setInteractive({useHandCursor:!0}).on("pointerdown",t=>{if(o.SELECTORS.CANVAS!==t.downElement.nodeName)return!1;let i=this.key===this.asset_key?this.id:this.key,r={act:a.OBJECT_INTERACTION,id:i,type:this.type};if(this.gameManager.activeRoomEvents.send(r),!this.targetName)return!1;let n=Object.assign({},e.player.currentTarget),s={id:i,type:a.TYPE_OBJECT};e.player.currentTarget=s,this.gameManager.gameEngine.showTarget(this.targetName,s,n)}),this.highlightOnOver&&(this.sceneSprite.on("pointerover",()=>{this.sceneSprite.setTint(this.highlightColor)}),this.sceneSprite.on("pointerout",()=>{this.sceneSprite.clearTint()})))}runAnimation(){this.sceneSprite?this.sceneSprite.anims.play(this.key,!0):n.error("Current animation not found: "+this.key)}getPosition(){return{x:this.x,y:this.y}}createObjectAnimations(e){if(!e)return;let t=Object.keys(e);if(0!==t.length)for(let i of t){if(this.gameManager.createdAnimations[i]){this.currentPreloader.objectsAnimations[i]=this.gameManager.createdAnimations[i];continue}if(s.hasOwn(this.currentPreloader.objectsAnimations,i))continue;let t=e[i],r={key:i,frames:this.currentPreloader.anims.generateFrameNumbers(t.asset_key||this.asset_key,{start:t.start||this.frameStart,end:t.end||this.frameEnd}),frameRate:s.get(t,"frameRate",this.frameRate),repeat:s.get(t,"repeat",this.repeat),hideOnComplete:s.get(t,"hideOnComplete",this.hideOnComplete),asset_key:s.get(t,"asset_key",this.asset_key)};this.currentPreloader.objectsAnimations[i]=this.currentPreloader.anims.create(r),this.gameManager.createdAnimations[i]=this.currentPreloader.objectsAnimations[i]}}}},{"69cb276730e319a6":"ijd9L","4aa72c897fe49299":"6mDqg",e5f3f59c83d28a8d:"z0nmL"}],iBZ5S:[function(e,t,i,r){let{TraderObjectUi:n}=e("58811b04f3d9bb80"),{Logger:s,sc:a}=e("f04fad6c99485124");t.exports.ObjectsMessageListener=class{async executeClientMessageActions(e){let t=a.get(e,"message",!1);if(!t)return s.error("Missing message data on ObjectsMessageListener.",e),!1;if(!a.get(t,"result",!1))return s.error("Missing result data on ObjectsMessageListener.",e),!1;if(!a.get(t,"id",!1))return s.error("Missing Object ID on ObjectsMessageListener.",e),!1;let i=a.get(e,"roomEvents",!1);if(!i)return s.error("Missing RoomEvents on ObjectsMessageListener.",e),!1;let r=new n({roomEvents:i,message:t});if(!r.validate())return!1;r.updateContents()}}},{"58811b04f3d9bb80":"a1AMl",f04fad6c99485124:"ijd9L"}],a1AMl:[function(e,t,i,r){let{ItemsConst:n}=e("6f47f46589411c74"),{ObjectsConst:s}=e("5d863b6194329ea"),{Logger:a,sc:o}=e("4eb12b9fd296bfd9");t.exports.TraderObjectUi=class{constructor(e){this.roomEvents=o.get(e,"roomEvents",!1),this.message=o.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.uiScene=this.gameManager?.gameEngine?.uiScene,this.itemsManager=this.gameManager?.inventory?.manager,this.objectUi=this.roomEvents?.objectsUi[this.message?.id],this.setConfirmMessages()}validate(){return this.roomEvents?this.message?this.gameManager?this.uiScene?this.itemsManager?!!this.objectUi||(a.error("Missing objectUi on TraderObjectUi."),!1):(a.error("Missing ItemsManager on TraderObjectUi."),!1):(a.error("Missing UiScene on TraderObjectUi."),!1):(a.error("Missing GameManager on TraderObjectUi."),!1):(a.error("Missing message on TraderObjectUi."),!1):(a.error("Missing RoomEvents on TraderObjectUi."),!1)}setConfirmMessages(){return!!this.gameManager&&(this.confirmMessages={buy:this.gameManager.services.translator.t("objects.trader.buyConfirmed"),sell:this.gameManager.services.translator.t("objects.trader.sellConfirmed")},!0)}updateContents(){let e=this.gameManager.gameDom.getElement("#box-"+this.objectUi.id+" .box-content");if(!e)return a.error('Missing container: "#box-'+this.objectUi.id+' .box-content".'),!1;let t=this.message.result.action;if(s.TRADE_ACTIONS_FUNCTION_NAME.CONFIRM===this.message.result.subAction)return e.innerHTML=this.confirmMessages[t],!0;let i=o.get(this.message.result,"items",!1),r=this.mapInventoryKeyFromAction(t),n=o.get(this.message.result,"exchangeData",!1),h=o.get(n,r,!1),c=this.message.result.exchangeRequirementsA||[],l=this.message.result.exchangeRewardsB||[];return this.updateItemsList(i,t,c,l,e,h),this.updateExchangeData(h,t,c,l,i),!0}updateItemsList(e,t,i,r,n,s){if(!e)return!1;let a="",h={};for(let n of Object.keys(e)){let c=e[n],l=Object.assign({manager:this.itemsManager},c,{uid:n}),d=o.get(this.itemsManager.itemClasses,l.key,this.itemsManager.types.classByTypeId(l.type));h[n]=new d(l),h[n].quantityDisplay=1,h[n].quantityMaxDisplay=Math.max(h[n].qty_limit,c.qty),h[n].tradeAction=t,h[n].exchangeRequirements=this.fetchItemRequirements(l.key,i),h[n].exchangeRewards=this.fetchItemRewards(l.key,r),a+=this.createTradeItemBox(h[n],o.get(s,h[n].uid,!1))}n.innerHTML=this.createTradeContainer(t,a),this.activateItemsBoxActions(h),this.activateConfirmButtonAction(t)}activateConfirmButtonAction(e){let t=this.gameManager.gameDom.getElement(".confirm-"+e),i={act:s.OBJECT_INTERACTION,id:this.message.id,value:e,sub:s.TRADE_ACTIONS.CONFIRM};t?.addEventListener("click",()=>{this.gameManager.activeRoomEvents.send(i)})}updateExchangeData(e,t,i,r,n){if(!1===e)return!1;let s=this.createConfirmItemsBox(e,n,t),o=null;return("buy"===t&&(o=this.gameDom.getElement(".trade-container-buy .trade-col.trade-col-2")),"sell"===t&&(o=this.gameDom.getElement(".trade-container-sell .trade-col.trade-col-1")),null===o)?(a.error('Missing "'+t+'" items container.',{message:this.message}),!1):(o.innerHTML=s,this.assignRemoveActions(e,n,t),!0)}createConfirmItemsBox(e,t,i){let r=Object.keys(e);if(0===r.length)return this.message.lastErrorMessage||a.info("Undefined exchange items on confirmation trader-object-ui.",{message:this.message}),"";let s="",o=this.uiScene.cache.html.get("inventoryTradeItem");if(!o)return a.error('Missing template "inventoryTradeItem".'),"";for(let a of r){let r=e[a],h=t[a],c=n.TRADE_ACTIONS.BUY===i,l=n.TRADE_ACTIONS.SELL===i;s+=this.gameManager.gameEngine.parseTemplate(o,{key:h.key,label:h.label,description:h.description,id:a,qty:h.qty,hiddenClass:"",tradeRequirements:c?this.createTradeRequirementsContent(h):"",tradeRewards:l?this.createTradeRewardsContent(h):"",tradeAction:this.createTradeActionRemove(h),tradeActionKey:i,tradeQuantityContent:r})}return s}assignRemoveActions(e,t,i){let r=Object.keys(e);if(0===r.length)return this.message.lastErrorMessage||a.info("Undefined exchange items on remove trader-object-ui.",{message:this.message}),!1;for(let e of r){let r=".trade-item-to-be-"+i+".trade-item-"+e,n=this.gameDom.getElement(r);if(!n){a.error('Assign trade item "'+e+'" container not found.',{message:this.message});continue}let o=this.gameDom.getElement(".trade-item-"+i+".trade-item-"+e+" .trade-action-remove");if(!o){a.error('Assign trade item "'+e+'" remove button not found.',{message:this.message});continue}let h=t[e];o.addEventListener("click",()=>{n.classList.remove("hidden");let t={act:s.OBJECT_INTERACTION,id:this.message.id,value:i,itemId:e,itemKey:h.key};t[s.TRADE_ACTIONS.SUB_ACTION]=s.TRADE_ACTIONS.REMOVE,this.gameManager.activeRoomEvents.send(t)})}return!0}createTradeContainer(e,t){let i=this.uiScene.cache.html.get("inventoryTradeContainer");if(!i)return a.error('Missing template "inventoryTradeContainer".'),"";let r=this.message.result.lastErrorData;r?.itemUid&&(r.item=this.fetchItemLabelByUid(r.itemUid)),r?.requiredItemKey&&(r.requiredItem=this.fetchItemLabelByUid(r.requiredItemKey));let o=this.gameManager.services.translator.t(this.message.result.lastErrorMessage,r),h=n.TRADE_ACTIONS.BUY===e?t:"",c=n.TRADE_ACTIONS.SELL===e?t:"";return this.gameManager.gameEngine.parseTemplate(i,{tradeActionKey:e,confirmRequirements:"",lastErrorMessage:o,tradeActionLabel:s.TRADE_ACTIONS_FUNCTION_NAME.CONFIRM,tradeItemsBuy:h,tradeItemsSell:c})}fetchItemLabelByUid(e){return this.gameManager?.inventory?.manager?.items[e]?.label||this.message?.result?.items[e]?.label||""}fetchItemRequirements(e,t){if(0===t.length)return!1;let i={};for(let r of t)e===r.itemKey&&(i[r.itemKey]=r);return i}fetchItemRewards(e,t){if(0===t.length)return!1;let i={};for(let r of t)e===r.itemKey&&(i[r.itemKey]=r);return i}createTradeItemBox(e,t){let i=this.uiScene.cache.html.get("inventoryTradeItem");if(!i)return a.error('Missing template "inventoryTradeItem".'),"";let r=this.uiScene.cache.html.get("inventoryTradeItemQuantity");if(!r)return a.error('Missing template "inventoryTradeItemQuantity".'),"";let s=n.TRADE_ACTIONS.BUY===e.tradeAction,o=n.TRADE_ACTIONS.SELL===e.tradeAction,h=t||0;return this.gameManager.gameEngine.parseTemplate(i,{key:e.key,label:e.label,description:e.description,id:e.getInventoryId(),qty:e.qty,hiddenClass:0<h&&e.qty===h?" hidden":"",tradeRequirements:s?this.createTradeRequirementsContent(e):"",tradeRewards:o?this.createTradeRewardsContent(e):"",tradeAction:this.createTradeActionContent(e),tradeActionKey:"to-be-"+e.tradeAction,tradeQuantityContent:this.gameManager.gameEngine.parseTemplate(r,{quantityDisplay:e.quantityDisplay||1,quantityMaxDisplay:0<e.quantityMaxDisplay?'max="'+e.quantityMaxDisplay+'"':""})})}createTradeRequirementsContent(e){if(!e.exchangeRequirements)return"";let t=Object.keys(e.exchangeRequirements);if(0===t.length)return"";let i=this.uiScene.cache.html.get("inventoryTradeRequirements");if(!i)return a.error('Missing template "inventoryTradeRequirements".'),"";let r="";for(let n of t){let t=e.exchangeRequirements[n];r+=this.gameManager.gameEngine.parseTemplate(i,{itemKey:e.key,requiredItemKey:t.requiredItemKey,requiredQuantity:t.requiredQuantity})}return r}createTradeRewardsContent(e){if(!e.exchangeRewards)return"";let t=Object.keys(e.exchangeRewards);if(0===t.length)return"";let i=this.uiScene.cache.html.get("inventoryTradeRewards");if(!i)return a.error('Missing template "inventoryTradeRewards".'),"";let r="";for(let n of t){let t=e.exchangeRewards[n];r+=this.gameManager.gameEngine.parseTemplate(i,{itemKey:e.key,rewardItemKey:t.rewardItemKey,rewardQuantity:t.rewardQuantity})}return r}createTradeActionContent(e,t){let i=this.uiScene.cache.html.get("inventoryTradeAction");return i?this.gameManager.gameEngine.parseTemplate(i,{key:e.key,id:e.getInventoryId(),tradeAction:t||o.get(e,"tradeAction","")}):(a.error('Missing template "inventoryTradeAction".'),"")}createTradeActionRemove(e){let t=this.uiScene.cache.html.get("inventoryTradeActionRemove");return t?this.gameManager.gameEngine.parseTemplate(t,{key:e.key,id:e.uid,tradeAction:"remove"}):(a.error('Missing template "inventoryTradeActionRemove".'),"")}activateItemsBoxActions(e){for(let t of Object.keys(e)){let i=e[t],r=".trade-item-to-be-"+i.tradeAction+".trade-item-"+i.uid+" .trade-action-"+i.tradeAction+" button",n=this.gameDom.getElement(r);if(!n){a.error('Activate trade item "'+i.uid+'" action button not found.');continue}n.addEventListener("click",()=>{let e=this.gameDom.getElement(".trade-item-"+i.getInventoryId()+" .item-qty input"),t=e?.value||1,r={act:s.OBJECT_INTERACTION,id:this.message.id,value:i.tradeAction,itemId:i.getInventoryId(),itemKey:i.key,qty:Number(t)};r[s.TRADE_ACTIONS.SUB_ACTION]=s.TRADE_ACTIONS.ADD,this.gameManager.activeRoomEvents.send(r)})}}mapInventoryKeyFromAction(e){return o.get({buy:"A",sell:"B"},e,!1)}}},{"6f47f46589411c74":"hMNcT","5d863b6194329ea":"6mDqg","4eb12b9fd296bfd9":"ijd9L"}],hMNcT:[function(e,t,i,r){t.exports={ItemsServer:e("58ccb446d62c749b"),ItemsManager:e("99fbf686cf9954ad"),Inventory:e("d0e0bc002aa0626b"),ItemGroup:e("f76a9d92dd31d5bc"),ItemBase:e("8e9d5aa6534a13ad"),ItemEquipment:e("8451b91f0c937da4"),ItemUsable:e("106627cf30823e76"),ItemSingle:e("a73a08604f94da54"),ItemSingleEquipment:e("72395d9fa7948595"),ItemSingleUsable:e("6d04ae470a68a6bf"),ModelEntity:e("d4ce696862dbcd35"),ItemsConst:e("a5ef4f750b88ecba"),ItemsEvents:e("a180e01e5de133e0"),Receiver:e("33a340330572bf29"),ItemsDataGenerator:e("bf0687569e27057a"),GroupsDataGenerator:e("27ccd3cf572478fc"),ExchangePlatform:e("90218b41bb50ec4b"),ExchangeRequirement:e("c2601b545e947f39"),RequirementsCollection:e("72f6373fd251e1e3"),RequirementsProcessor:e("79f809e040670ce3"),ExchangeReward:e("3e52122617c11229"),RewardsCollection:e("6edee09b19b2994c"),RewardsProcessor:e("441790981610210a"),ItemsError:e("c48f961fa528324f")}},{"58ccb446d62c749b":"9YB3d","99fbf686cf9954ad":"031qw",d0e0bc002aa0626b:"iGM1f",f76a9d92dd31d5bc:"8MyHJ","8e9d5aa6534a13ad":"2Ge9P","8451b91f0c937da4":"cl7St","106627cf30823e76":"i9fzu",a73a08604f94da54:"5MTcJ","72395d9fa7948595":"aHWOE","6d04ae470a68a6bf":"lp1VX",d4ce696862dbcd35:"02YTK",a5ef4f750b88ecba:"afvSx",a180e01e5de133e0:"6rVij","33a340330572bf29":"zpNaC",bf0687569e27057a:"8PTC7","27ccd3cf572478fc":"jKkpS","90218b41bb50ec4b":"10o8f",c2601b545e947f39:"b4Itj","72f6373fd251e1e3":"kxlGI","79f809e040670ce3":"i8KMK","3e52122617c11229":"kwWYg","6edee09b19b2994c":"b3icJ","441790981610210a":"aOkqV",c48f961fa528324f:"3qAND"}],"9YB3d":[function(e,t,i,r){let n=e("584cf2f2bf66f26b"),s=e("906b84f8406328ec"),{Logger:a,sc:o}=e("5ac154b5c4320dd9");t.exports=class{constructor(e){this.hasError=!1,o.hasOwn(e,"owner")||(a.critical("Undefined owner."),this.hasError=!0),this.manager=new n(e),this.createClient(e)}createClient(e){if(this.hasError||!o.hasOwn(e,"client"))return!1;this.client=new s({manager:this.manager,client:e.client})}}},{"584cf2f2bf66f26b":"031qw","906b84f8406328ec":"1WtWL","5ac154b5c4320dd9":"ijd9L"}],"031qw":[function(e,t,i,r){let n=e("4fe5cf381ee58ab2"),s=e("419f5262e5a6365c"),a=e("bf63d9f42b20facf"),{Logger:o,sc:h}=e("21ccb6baff6c486e");t.exports=class extends n{constructor(e){super(e),this.hasError=!1,h.hasOwn(e,"owner")||(o.critical("Undefined owner."),this.hasError=!0),this.itemClasses=h.get(e,"itemClasses",!1),this.groupClasses=h.get(e,"groupClasses",!1),this.itemsModelData=h.get(e,"itemsModelData",!1),this.ownerIdProperty=h.get(e,"ownerIdProperty","id"),this.owner=e.owner,this.groups={},this.eventsPrefix=this.getOwnerEventKey()+h.get(e,"eventsPrefix",""),this.types=new a}getOwnerId(){return this.owner[this.ownerIdProperty]}getOwnerEventKey(){return h.get(this.owner,"eventsPrefix","items.ownerId."+this.getOwnerId())}getOwnerUniqueEventKey(e){return(h.isFunction(this.owner.eventUniqueKey)?this.owner.eventUniqueKey():"items.ownerId."+this.getOwnerId()+".uKey."+h.getTime())+(e?"."+e:"")}async setup(e){if(this.hasError)return!1;await this.fireEvent(s.MANAGER_INIT,{props:e,manager:this}),h.hasOwn(e,"items")&&await this.setItems(e.items),h.hasOwn(e,"groups")&&await this.setGroups(e.groups)}createItemInstance(e,t){if(this.hasError)return!1;let i=h.get(this.itemsModelData,e,!1);if(!1===i)return!1;if(i.data.modifiers)for(let e of Object.keys(i.data.modifiers))i.data.modifiers[e].target=this.owner;let r=i.class.isSingleInstance(),n=void 0!==t&&r?t:1,s=Object.assign({},i.data,{manager:this,item_id:i.data.id,qty:n});if(delete s.uid,!0===r||1===n)return new i.class(s);let a=[];s.qty=1;for(let e=0;e<n;e++)a.push(new i.class(s));return a}}},{"4fe5cf381ee58ab2":"iGM1f","419f5262e5a6365c":"6rVij",bf63d9f42b20facf:"kR6yZ","21ccb6baff6c486e":"ijd9L"}],iGM1f:[function(e,t,i,r){let n=e("adccac45c69ab6e8"),s=e("2fd42dbc83a1dbf2"),a=e("bb9f4880ce8c412b"),{EventsManagerSingleton:o,sc:h}=e("4bf1621a8608b780");t.exports=class{constructor(e){this.events=h.get(e,"eventsManager",o),this.items={},this.limitPerItem=h.get(e,"limitPerItem",-1),this.itemsLimit=h.get(e,"itemsLimit",-1),this.applyModifiersAuto=h.get(e,"applyModifiersAuto",!0),this.revertModifiersAuto=h.get(e,"revertModifiersAuto",!0),this.locked=!1,this.eventsPrefix=h.get(e,"eventsPrefix",""),this.setError(),this.frozenItems={}}async validate(e){let t=!0;return e||(this.setError("Add item error, undefined item.",a.ERROR_CODES.UNDEFINED_ITEM),t=!1),h.isObjectFunction(e,"getInventoryId")||(this.setError("Add item error, undefined getInventoryId.",a.ERROR_CODES.UNDEFINED_METHOD_INVENTORY_ID),t=!1),e.key||(this.setError("Add item error, undefined item key.",a.ERROR_CODES.UNDEFINED_ITEM_KEY),t=!1),await this.fireEvent(s.VALIDATE,this,e,t),t}findItemByKey(e){return h.fetchByPropertyOnObject(this.items,"key",e)}findItemsByPropertyValue(e,t){return h.fetchAllByPropertyOnObject(this.items,e,t)}async addItem(e){if(!await this.validate(e))return this.setError("Invalid item instance.",a.ERROR_CODES.INVALID_ITEM_INSTANCE),!1;let t=e.getInventoryId();return this.locked?(this.setError("Inventory locked, cannot add item: "+t,a.ERROR_CODES.LOCKED_FOR_ADD_ITEM,{itemUid:t}),!1):this.itemsLimit===Object.keys(this.items).length&&0<=this.itemsLimit?(this.setError("Cannot add item, max total reached.",a.ERROR_CODES.MAX_TOTAL_REACHED_FOR_ADD_ITEM,{itemUid:t}),!1):h.hasOwn(this.items,t)&&!e.singleInstance?(this.setError("Cannot add item, item already exists: "+t,a.ERROR_CODES.ITEM_EXISTS_FOR_ADD_ITEM,{itemUid:t}),!1):e.qty>this.limitPerItem&&0<=this.limitPerItem?(this.setError("Cannot add item, item qty limit exceeded.",a.ERROR_CODES.ITEM_LIMIT_EXCEEDED_FOR_ADD_ITEM,{itemUid:t,qty:e.qty}),!1):(h.hasOwn(this.items,t)&&e.singleInstance?await this.increaseItemQty(t,e.qty):(await this.fireEvent(s.ADD_ITEM_BEFORE,this,e),this.items[t]=e,await this.fireEvent(s.ADD_ITEM,this,e)),this.items[t])}async addItems(e){for(let t of e)if(!await this.addItem(t))return this.setError('Cannot add item "'+t.getInventoryId()+'".',a.ERROR_CODES.ADD_ITEMS_ERROR,{itemUid:t.getInventoryId()}),!1;return!0}async setItem(e){if(this.locked)return this.setError("Inventory locked, cannot set item: "+e.getInventoryId(),a.ERROR_CODES.LOCKED_FOR_SET_ITEM,{itemUid:e.getInventoryId()}),!1;this.items[e.getInventoryId()]=e}async removeItem(e){return this.locked?(this.setError("Inventory locked, cannot remove item: "+e,a.ERROR_CODES.LOCKED_FOR_REMOVE_ITEM,{itemUid:e}),!1):h.hasOwn(this.items,e)?(await this.fireEvent(s.REMOVE_ITEM,this,e),delete this.items[e],!0):(this.setError("Cannot remove item, key not found: "+e,a.ERROR_CODES.KEY_NOT_FOUND,{itemUid:e}),!1)}async setItemQty(e,t){return this.modifyItemQty(a.SET,e,t)}async increaseItemQty(e,t){return this.modifyItemQty(a.INCREASE,e,t)}async decreaseItemQty(e,t){return this.modifyItemQty(a.DECREASE,e,t)}async modifyItemQty(e,t,i){if(this.locked)return this.setError("Inventory locked, cannot modify item qty: "+t,a.ERROR_CODES.LOCKED_FOR_MODIFY_ITEM_QTY,{itemUid:t}),!1;if(!h.hasOwn(this.items,t))return this.setError("Cannot "+e+" item qty, undefined item key: "+t,a.ERROR_CODES.UNDEFINED_ITEM_KEY_FOR_OPERATION,{itemUid:t,operation:e}),!1;if(isNaN(i))return this.setError("Cannot "+e+" item qty, qty is not a number: "+i,a.ERROR_CODES.QTY_NOT_A_NUMBER,{itemUid:t,operation:e,qty:i}),!1;if(this.limitPerItem>0&&i>this.limitPerItem&&(e===a.SET||e===a.INCREASE))return this.setError("Cannot "+e+" item qty, item qty limit exceeded: "+i+" > "+this.limitPerItem,a.ERROR_CODES.ITEM_QTY_LIMIT_EXCEEDED,{itemUid:t,operation:e,limitPerItem:this.limitPerItem}),!1;if(e===a.SET&&(this.items[t].qty=i),e===a.INCREASE&&(this.items[t].qty+=i),e===a.DECREASE){let e=this.items[t].qty-i;0>e&&(e=0),this.items[t].qty=e}return 0===this.items[t].qty&&this.items[t].autoRemoveItemOnZeroQty?(await this.fireEvent(s.MODIFY_ITEM_QTY,this.items[t],this,e,t,i),await this.removeItem(this.items[t].getInventoryId())):(await this.fireEvent(s.MODIFY_ITEM_QTY,this.items[t],this,e,t,i),!0)}async setItems(e){return this.locked?(this.setError("Inventory locked, cannot set items.",a.ERROR_CODES.LOCKED_FOR_SET_ITEMS),!1):(this.items=e,this.fireEvent(s.SET_ITEMS,{items:e,manager:this}))}async setGroups(e){return this.groups=e,this.fireEvent(s.SET_GROUPS,{groups:e,manager:this})}fireEvent(e,...t){return this.events.emit(this.eventFullName(e),...t)}listenEvent(e,t,i,r){return this.events.onWithKey(this.eventFullName(e),t,i,r)}eventFullName(e){return this.eventsPrefix+"."+e}setError(e="",t="",i={},r=!1){this.lastError=new n(e,t,i,r)}}},{adccac45c69ab6e8:"3qAND","2fd42dbc83a1dbf2":"6rVij",bb9f4880ce8c412b:"afvSx","4bf1621a8608b780":"ijd9L"}],"3qAND":[function(e,t,i,r){t.exports=class{constructor(e="",t="",i={},r=!1){this.message=e,this.code=t,this.data=i,this.withError=r}}},{}],"6rVij":[function(e,t,i,r){let n="reldens.items.";t.exports={PREF:n,MANAGER_INIT:n+"setup",EXCHANGE:{INITIALIZED:n+"initialized",CANCELED:n+"canceled",INVALID_PUSH:n+"invalidPush",ITEM_PUSHED:n+"itemPushed",ITEM_REMOVE:n+"itemRemove",CONFIRM:n+"confirm",DISCONFIRM:n+"disconfirm",BEFORE_FINALIZE:n+"beforeFinalize",FINALIZED:n+"finalized"},LOADED_OWNER_ITEMS:n+"loadedOwnerItems",SET_ITEMS:n+"setItems",SET_GROUPS:n+"setGroups",EQUIP_ITEM:n+"equipItem",UNEQUIP_ITEM:n+"unequipItem",ADD_ITEM:n+"addItem",ADD_ITEM_BEFORE:n+"addItemBefore",REMOVE_ITEM:n+"removeItem",MODIFY_ITEM_QTY:n+"modifyItemQty",EQUIP_BEFORE:n+"equipBefore",EQUIP:n+"equip",EXECUTING_ITEM:n+"executingItem",EXECUTED_ITEM:n+"executedItem",VALIDATE:n+"validate"}},{}],afvSx:[function(e,t,i,r){let n="rinv",s="items.",a="exchange.",o="requirements.",h="reward.",c="equipment.";t.exports={SET:"set",INCREASE:"increase",DECREASE:"decrease",ACTIONS_PREF:n,ACTION_ADD:n+"A",ACTION_REMOVE:n+"R",ACTION_MODIFY_QTY:n+"M",ACTION_EQUIP:n+"E",ACTION_UNEQUIP:n+"U",ACTION_MOD_APPLIED:n+"Ma",ACTION_MOD_REVERTED:n+"Mr",ACTION_EXECUTING:n+"Ex",ACTION_EXECUTED:n+"AExd",ACTION_MANAGER_INIT:n+"Mi",ACTION_SET_ITEMS:n+"Si",ACTION_SET_GROUPS:n+"Sg",BEHAVIOR_SEND:"send",BEHAVIOR_BROADCAST:"broadcast",BEHAVIOR_BOTH:"both",TYPES:{ITEM_BASE:10,EQUIPMENT:1,USABLE:2,SINGLE:3,SINGLE_EQUIPMENT:4,SINGLE_USABLE:5},TRADE_ACTIONS:{BUY:"buy",SELL:"sell",TRADE:"trade"},ERROR_CODES:{PREFIX:s,UNDEFINED_ITEM:s+"undefinedItem",UNDEFINED_METHOD_INVENTORY_ID:s+"undefinedMethodInventoryId",UNDEFINED_ITEM_KEY:s+"undefinedItemKey",INVALID_ITEM_INSTANCE:s+"invalidItemInstance",LOCKED_FOR_ADD_ITEM:s+"lockedForAddItem",MAX_TOTAL_REACHED_FOR_ADD_ITEM:s+"maxTotalReachedForAddItem",ITEM_EXISTS_FOR_ADD_ITEM:s+"itemExistsForAddItem",ITEM_LIMIT_EXCEEDED_FOR_ADD_ITEM:s+"itemLimitExceededForAddItem",ADD_ITEMS_ERROR:s+"addItemsError",LOCKED_FOR_SET_ITEM:s+"lockedForSetItem",LOCKED_FOR_REMOVE_ITEM:s+"lockedForRemoveItem",KEY_NOT_FOUND:s+"keyNotFound",LOCKED_FOR_MODIFY_ITEM_QTY:s+"lockedForModifyItemQty",UNDEFINED_ITEM_KEY_FOR_OPERATION:s+"undefinedItemKeyForOperation",QTY_NOT_A_NUMBER:s+"qtyNotANumber",ITEM_QTY_LIMIT_EXCEEDED:s+"itemQtyLimitExceeded",LOCKED_FOR_SET_ITEMS:s+"lockedForSetItems",EXCHANGE:{MISSING_CONFIRMATION:s+a+"missingConfirmation",INVALID_PUSHED_QUANTITY:s+a+"invalidPushedQuantity",INVALID_QUANTITY:s+a+"invalidQuantity",INVALID_EXCHANGE:s+a+"invalidExchange",DECREASE_QUANTITY:s+a+"decreaseQuantity",ITEM_ADD:s+a+"itemAdd"},REQUIREMENTS:{ITEM_NOT_PRESENT:s+o+"itemNotPresent",QUANTITY_NOT_AVAILABLE:s+o+"quantityNotAvailable",ITEM_NOT_PUSHED:s+o+"itemNotPushed",ITEM_QUANTITY_NOT_PUSHED:s+o+"itemQuantityNotPushed",ITEM_DOES_NOT_EXISTS:s+o+"itemDoesNotExists",ITEM_ADD:s+o+"itemAdd"},REWARD:{DOES_NOT_EXISTS:s+h+"doesNotExists",MISSING_ITEM:s+h+"missingItem",ITEM_NOT_PRESENT:s+h+"itemNotPresent",QUANTITY_NOT_AVAILABLE:s+h+"quantityNotAvailable",MISSING_PUSHED:s+h+"missingPushed",GET_ITEM_DOES_NOT_EXISTS:s+h+"getItemDoesNotExists",PROCESS_ITEM:s+h+"processItem",PROCESS_INVENTORY:s+h+"processInventory",ADD_ITEMS:s+h+"addItems",QUANTITY_OVERLOAD:s+h+"quantityOverload"},EQUIPMENT:{MODIFIERS_APPLY:s+c+"modifiersApply",MODIFIERS_REVERT:s+c+"modifiersRevert"}}}},{}],kR6yZ:[function(e,t,i,r){let n=e("ac10c481864dff83"),s=e("b75564ba303c5356"),a=e("957d5b5e4a423dca"),o=e("a3590f99276506ca"),h=e("dff4c8e33829a997"),c=e("5b2a69acfbc9bd6d"),l=e("ce977eaa6d463c01"),{sc:d}=e("5794f948bd319a4f");t.exports=class{constructor(){this.types={},this.types[n.TYPES.ITEM_BASE]=s,this.types[n.TYPES.EQUIPMENT]=a,this.types[n.TYPES.USABLE]=o,this.types[n.TYPES.SINGLE]=h,this.types[n.TYPES.SINGLE_EQUIPMENT]=c,this.types[n.TYPES.SINGLE_USABLE]=l}list(){return this.types}classByTypeId(e){return d.get(this.types,e.toString(),s)}}},{ac10c481864dff83:"afvSx",b75564ba303c5356:"2Ge9P","957d5b5e4a423dca":"cl7St",a3590f99276506ca:"i9fzu",dff4c8e33829a997:"5MTcJ","5b2a69acfbc9bd6d":"aHWOE",ce977eaa6d463c01:"lp1VX","5794f948bd319a4f":"ijd9L"}],"2Ge9P":[function(e,t,i,r){let n=e("c12e6ac2d5a93063"),s=e("c6965a9a447f564a"),{Logger:a,sc:o}=e("e634cd5ec6f60b00");t.exports=class{constructor(e){this.hasError=!1,o.hasOwn(e,"key")||(a.critical("Undefined item key."),this.hasError=!0),o.hasOwn(e,"manager")||(a.critical("Undefined item manager."),this.hasError=!0),this.key=e.key,this.uid=e.uid?e.uid:this.key+(e.id?"":e.id)+o.randomChars(8),this.id=o.get(e,"id",null),this.item_id=o.get(e,"item_id",null),this.label=o.get(e,"label",""),this.description=o.get(e,"description",""),this.manager=e.manager,this.type=o.get(e,"type",n.TYPES.ITEM_BASE),this.qty=o.get(e,"qty",0),this.remaining_uses=e.remaining_uses||0,this.is_active=o.get(e,"is_active",!1),this.group_id=o.get(e,"group_id",!1),this.qty_limit=o.get(e,"qty_limit",!1),this.uses_limit=o.get(e,"uses_limit",!1),this.autoRemoveItemOnZeroQty=o.get(e,"autoRemoveItemOnZeroQty",!0),this.useTimeOut=o.get(e,"useTimeOut",!1),this.execTimeOut=o.get(e,"execTimeOut",!1),this.modifiers=o.get(e,"modifiers",{}),this.target=!1,this.singleInstance=!1,this.rawCustomData=o.get(e,"customData",{});let t="string"==typeof this.rawCustomData?o.toJson(this.rawCustomData,{}):this.rawCustomData;null!==t&&"object"==typeof t&&0<Object.keys(t).length&&Object.assign(this,t)}static isSingleInstance(){return!1}getInventoryId(){return this.singleInstance?this.key:this.uid}async applyModifiers(){return await this.changeModifiers()}async revertModifiers(){return await this.changeModifiers(!0)}async changeModifiers(e){if(this.hasError)return!1;await this.manager.fireEvent(s.EQUIP_BEFORE+(e?"Revert":"Apply")+"Modifiers",this);let t=Object.keys(this.modifiers);if(0>=t.length)return;let i=e?"revert":"apply";for(let e of t)this.modifiers[e][i](this.target);return this.manager.fireEvent(s.EQUIP+(e?"Reverted":"Applied")+"Modifiers",this)}isType(e){return this.type===e}async fireEvent(e,...t){return this.manager.fireEvent(e,...t)}listenEvent(e,t,i,r){return this.manager.listenEvent(e,t,i,r)}}},{c12e6ac2d5a93063:"afvSx",c6965a9a447f564a:"6rVij",e634cd5ec6f60b00:"ijd9L"}],cl7St:[function(e,t,i,r){let n=e("33cdc889b48aacb0"),s=e("c5fbc38955884411"),a=e("8ae98c100e6c951f"),{sc:o}=e("bcc3d9fdf3135034");t.exports=class extends n{constructor(e){super(e),this.type=s.TYPES.EQUIPMENT,this.equipped=o.get(e,"equipped",!1)}async equip(e){if(this.equipped=!0,await this.manager.fireEvent(a.EQUIP_ITEM,this),!1===e||!1===this.manager.applyModifiersAuto)return!1;await this.applyModifiers()}async unequip(e){if(this.equipped=!1,await this.manager.fireEvent(a.UNEQUIP_ITEM,this),!1===e||!1===this.manager.revertModifiersAuto)return!1;await this.revertModifiers()}async applyModifiers(){return this.equipped?await super.applyModifiers():(this.manager.setError("Cannot apply modifiers the item is not equipped: "+this.getInventoryId(),s.ERROR_CODES.EQUIPMENT.MODIFIERS_APPLY,{itemUid:this.getInventoryId()}),!1)}async revertModifiers(){return this.equipped?(this.manager.setError("Cannot revert modifiers the item is not equipped: "+this.getInventoryId(),s.ERROR_CODES.EQUIPMENT.MODIFIERS_REVERT,{itemUid:this.getInventoryId()}),!1):await super.revertModifiers()}}},{"33cdc889b48aacb0":"2Ge9P",c5fbc38955884411:"afvSx","8ae98c100e6c951f":"6rVij",bcc3d9fdf3135034:"ijd9L"}],i9fzu:[function(e,t,i,r){let n=e("73e1b5628e255757"),s=e("da3e74df899b07c1"),a=e("31d1c1f3f78c977b"),{sc:o}=e("ba8c76a702e812f2");t.exports=class extends n{constructor(e){super(e),this.type=s.TYPES.USABLE,this.uses=o.get(e,"uses",1),this.currentUses=this.uses,this.usesLimit=o.get(e,"usesLimit",!1),this.canUse=!0,this.removeAfterUse=!0,this.useTimeOut=!1,this.useTimer=!1,this.execTimeOut=!1,this.execTimer=!1,this.removeQtyAfterUse=o.get(e,"removeQtyAfterUse",1),this.autoRemoveItemOnZeroQty=o.get(e,"autoRemoveItemOnZeroQty",!0)}async use(e=!1){return!!this.canUse&&!(0>=this.currentUses)&&((e&&(this.target=e),this.useTimeOut&&(this.canUse=!1,this.useTimer=setTimeout(async()=>{this.canUse=!0},this.useTimeOut)),await this.manager.fireEvent(a.EXECUTING_ITEM,this),!1===this.execTimeOut)?void await this.executeItem():void(this.execTimer=setTimeout(async()=>{await this.executeItem()},this.execTimeOut)))}async executeItem(){return await this.applyModifiers(),this.currentUses--,!this.removeAfterUse||0<this.currentUses||(await this.manager.modifyItemQty(s.DECREASE,this.getInventoryId(),this.removeQtyAfterUse),this.currentUses=this.uses),await this.manager.fireEvent(a.EXECUTED_ITEM,this)}}},{"73e1b5628e255757":"2Ge9P",da3e74df899b07c1:"afvSx","31d1c1f3f78c977b":"6rVij",ba8c76a702e812f2:"ijd9L"}],"5MTcJ":[function(e,t,i,r){let n=e("f0df25643e2e264b");t.exports=class extends n{constructor(e){super(e),this.singleInstance=!0,this.uid=this.key}static isSingleInstance(){return!0}}},{f0df25643e2e264b:"2Ge9P"}],aHWOE:[function(e,t,i,r){let n=e("8c650fd6774ed566");t.exports=class extends n{constructor(e){super(e),this.singleInstance=!0}}},{"8c650fd6774ed566":"cl7St"}],lp1VX:[function(e,t,i,r){let n=e("80d7e0f79d15a474");t.exports=class extends n{constructor(e){super(e),this.singleInstance=!0}}},{"80d7e0f79d15a474":"i9fzu"}],"1WtWL":[function(e,t,i,r){let n=e("b644d789ee2b40af"),s=e("45ba412a65c2e357"),{PropertyManager:a}=e("994236dc9aef1f79"),{Logger:o,sc:h}=e("8b1efebe48a67288");t.exports=class{constructor(e){this.client=h.get(e,"client",!1),this.manager=h.get(e,"manager",!1),this.sendProperties=h.get(e,"sendProperties",{}),!1===h.hasOwn(e,"sendProperties")&&this.defineBehaviorForProperties(),this.sendTargetProps=h.hasOwn(e,"sendTargetProps")?e.sendTargetProps:{broadcast:[],send:[]},this.propertyManager=new a,this.listenEvents()}validateManager(){return!!this.manager||(o.critical("Undefined manager for Sender."),!1)}validateClient(){return this.client?h.isObjectFunction(this.client,"send")?!!h.isObjectFunction(this.client,"broadcast")||(o.critical('Required method "broadcast" not found in client.',this.client),!1):(o.critical('Required method "send" not found in client.',this.client,typeof this.client.send),!1):(o.critical("Undefined client for Sender."),!1)}defineBehaviorForProperties(e){e||(e={});let t=n.BEHAVIOR_SEND,i=n.BEHAVIOR_BROADCAST;this.setPropertyBehavior(n.ACTION_ADD,e,{behavior:t,send:["id","key","type","qty","label","description","group_id","qty_limit","uses_limit","useTimeOut","execTimeOut","remaining_uses","is_active"]}),this.setPropertyBehavior(n.ACTION_REMOVE,e,{behavior:t,send:["id","key"]}),this.setPropertyBehavior(n.ACTION_MODIFY_QTY,e,{behavior:t,send:["id","key","qty"]}),this.setPropertyBehavior(n.ACTION_MOD_APPLIED,e,{behavior:t,send:["id","key"]}),this.setPropertyBehavior(n.ACTION_MOD_REVERTED,e,{behavior:t,send:["id","key"]}),this.setPropertyBehavior(n.ACTION_EQUIP,e,{behavior:t,send:["id","key"]}),this.setPropertyBehavior(n.ACTION_UNEQUIP,e,{behavior:t,send:["id","key"]}),this.setPropertyBehavior(n.ACTION_EXECUTING,e,{behavior:i,broadcast:["id","key","animationData"]}),this.setPropertyBehavior(n.ACTION_EXECUTED,e,{behavior:t,send:["id","key"]})}setPropertyBehavior(e,t,i){h.hasOwn(t,e)&&(this.sendProperties[e]=t[e]),this.sendProperties[e]=i}getItemProperties(e,t,i){if(!h.hasOwn(this.sendProperties,t))return o.critical("Undefined action while getting item properties.",{action:t,sendProperties:this.sendProperties}),!1;if(!h.hasOwn(this.sendProperties[t],i))return o.critical("Undefined behavior while getting item properties.",{behavior:i,action:t,sendProperties:this.sendProperties}),!1;let r={idx:e.getInventoryId()};for(let n of this.sendProperties[t][i]){if(!h.hasOwn(e,n)){o.info("Undefined property: "+n,e);continue}r[n]=e[n]}return r}listenEvents(){if(!this.validateManager())return!1;let e=this.manager.getOwnerEventKey();this.manager.listenEvent(s.ADD_ITEM,this.sendAddItemData.bind(this),this.manager.getOwnerUniqueEventKey("addItemSend"),e),this.manager.listenEvent(s.REMOVE_ITEM,this.sendRemoveItemData.bind(this),this.manager.getOwnerUniqueEventKey("removeItemSend"),e),this.manager.listenEvent(s.MODIFY_ITEM_QTY,this.sendModifyItemQuantityData.bind(this),this.manager.getOwnerUniqueEventKey("modifyItemQtySend"),e),this.manager.listenEvent(s.EQUIP_ITEM,this.sendEquipItemActionData.bind(this),this.manager.getOwnerUniqueEventKey("equipItemSend"),e),this.manager.listenEvent(s.UNEQUIP_ITEM,this.sendUnequipItemActionData.bind(this),this.manager.getOwnerUniqueEventKey("unequipItemSend"),e),this.manager.listenEvent(s.EQUIP+"AppliedModifiers",this.sendEquipItemAppliedModifiersData.bind(this),this.manager.getOwnerUniqueEventKey("equipItemAppliedModifiersSend"),e),this.manager.listenEvent(s.EQUIP+"RevertedModifiers",this.sendEquipItemRevertedModifiersData.bind(this),this.manager.getOwnerUniqueEventKey("equipItemRevertedModifiersSend"),e),this.manager.listenEvent(s.EXECUTING_ITEM,this.sendExecutingItemData.bind(this),this.manager.getOwnerUniqueEventKey("executingItemSend"),e),this.manager.listenEvent(s.EXECUTED_ITEM,this.sendExecutedItemData.bind(this),this.manager.getOwnerUniqueEventKey("executedItemSend"),e),this.manager.listenEvent(s.SET_ITEMS,this.sendSetItemsData.bind(this),this.manager.getOwnerUniqueEventKey("setItemsSend"),e),this.manager.listenEvent(s.SET_GROUPS,this.sendSetGroupsData.bind(this),this.manager.getOwnerUniqueEventKey("setGroupsSend"),e)}async sendSetGroupsData(e){let t=e.manager.getOwnerId();if(this.manager.getOwnerId()!==t)return!1;let i={};for(let t of Object.keys(e.groups)){let{id:r,key:n,label:s,description:a,sort:o}=e.groups[t];i[n]={id:r,key:n,label:s,description:a,sort:o}}return await this.client.send({act:n.ACTION_SET_GROUPS,owner:t,groups:i})}async sendSetItemsData(e){let t=e.manager.getOwnerId();if(this.manager.getOwnerId()!==t)return!1;let i=this.extractItemsDataForSend(e.items);return await this.client.send({act:n.ACTION_SET_ITEMS,owner:t,items:i})}async sendExecutedItemData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_EXECUTED)}async sendExecutingItemData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_EXECUTING)}async sendEquipItemRevertedModifiersData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_MOD_REVERTED)}async sendEquipItemAppliedModifiersData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_MOD_APPLIED)}async sendUnequipItemActionData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_UNEQUIP)}async sendEquipItemActionData(e){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_EQUIP)}async sendModifyItemQuantityData(e,t,i,r,s){return await this.runBehaviors(e,e.manager.getOwnerId(),n.ACTION_MODIFY_QTY)}async sendRemoveItemData(e,t){let i=e.items[t];return i?await this.runBehaviors(i,i.manager.getOwnerId(),n.ACTION_REMOVE):(o.debug('Item with key "'+t+'" not found.'),!1)}async sendAddItemData(e,t){return await this.runBehaviors(t,t.manager.getOwnerId(),n.ACTION_ADD)}extractItemsDataForSend(e){let t={};for(let i of Object.keys(e)){let r=e[i],s=this.getItemProperties(r,n.ACTION_ADD,n.BEHAVIOR_SEND);s.singleInstance=r.singleInstance,t[r.getInventoryId()]=s}return t}async runBehaviors(e,t,i){if(!e)return o.warning('Invalid "item" parameter.'),!1;if(!this.validateManager()||!this.validateClient())return!1;if(this.manager.getOwnerId()!==t)return o.warning("Item owner ID miss match.",this.manager.getOwnerId(),t),!1;let r=this.sendProperties[i],s=this.getTargetProps(e,r.behavior),a=r.behavior===n.BEHAVIOR_BOTH;if(r.behavior===n.BEHAVIOR_BROADCAST||a){let r=this.getItemProperties(e,i,n.BEHAVIOR_BROADCAST);await this.client.broadcast({act:i,owner:t,item:r,target:s});return}let h=r.behavior===n.BEHAVIOR_SEND,c=r[n.BEHAVIOR_SEND]!==r[n.BEHAVIOR_BROADCAST];if(h||a&&c){let r=this.getItemProperties(e,i,n.BEHAVIOR_SEND);await this.client.send({act:i,owner:t,item:r,targetProps:s})}}getTargetProps(e,t){let i=t===n.BEHAVIOR_BOTH?n.BEHAVIOR_BROADCAST:n.BEHAVIOR_SEND;if(!1===h.hasOwn(this.sendTargetProps,i)||0===this.sendTargetProps[i].length)return{};let r={};for(let t of this.sendTargetProps[i]){let i="id"===t?this.manager.ownerIdProperty:t;r[i]=this.propertyManager.getPropertyValue(e.target,i)}return r}}},{b644d789ee2b40af:"afvSx","45ba412a65c2e357":"6rVij","994236dc9aef1f79":"gQlQ8","8b1efebe48a67288":"ijd9L"}],gQlQ8:[function(e,t,i,r){t.exports={Calculator:e("7209906b2d2fdb67"),Condition:e("f9b761e432d15ea1"),Modifier:e("85ba66b0e0937f6b"),ModifierConst:e("347c1405c6c340e4"),PropertyManager:e("73dbfd9bd13117c6")}},{"7209906b2d2fdb67":"kwC18",f9b761e432d15ea1:"2PNHV","85ba66b0e0937f6b":"inhOw","347c1405c6c340e4":"e2RZ0","73dbfd9bd13117c6":"5Jvrn"}],kwC18:[function(e,t,i,r){let n=e("c6a7e2b54db92583");t.exports=class{calculateNewValue(e,t,i,r){let s=t===n.OPS.INC,a=t===n.OPS.DEC;if(s&&!r||a&&r)return e+i;if(a&&!r||s&&r)return e-i;let o=t===n.OPS.MUL,h=t===n.OPS.DIV;if(o&&!r||h&&r)return e*i;if(h&&!r||o&&r)return e/i;let c=t===n.OPS.INC_P;if(c&&!r)return e+Math.round(e*i/100);if(c&&r)return Math.round(e/(1+i/100));let l=t===n.OPS.DEC_P;return l&&!r?e-Math.round(e*i/100):l&&r?Math.round(e/(1-i/100)):e}}},{c6a7e2b54db92583:"e2RZ0"}],e2RZ0:[function(e,t,i,r){t.exports={OPS:{INC:1,DEC:2,DIV:3,MUL:4,INC_P:5,DEC_P:6,SET:7,SET_N:9,METHOD:8},COMPARE:{EQ:"eq",NE:"ne",LT:"lt",GT:"gt",LE:"le",GE:"ge"},TYPES:{INT:"int",STRING:"string"},MOD_MISSING_KEY:"mk",MOD_MISSING_PROPERTY_KEY:"mpk",MOD_MISSING_OPERATION:"mo",MOD_MISSING_VALUE:"mv",MOD_READY:"mre",MOD_APPLIED:"ma",MOD_REVERTED:"mr",MOD_UNDEFINED_TARGET:"mut",MOD_INVALID_CONDITIONS:"mic",MOD_MISSING_CONDITION_INSTANCE:"mmci",MOD_MODIFIER_ERROR:"me"}},{}],"2PNHV":[function(e,t,i,r){let{ErrorManager:n,sc:s}=e("7f32cc4f678fee29"),a=e("3ddfbc21a5968711"),o=e("ccbf83a7cf179d24");t.exports=class{constructor(e){this.validateParameters(e),this.key=e.key,this.propertyKey=e.propertyKey,this.conditional=e.conditional,this.type=s.get(e,"type",o.TYPES.INT),this.value=this.parseValue(e.value),this.propertyManager=new a}validateParameters(e){s.hasOwn(e,"key")||n.error("Missing Condition key."),s.hasOwn(e,"propertyKey")||n.error("Missing Condition propertyKey."),s.hasOwn(e,"conditional")||n.error("Missing Condition conditional."),s.hasOwn(e,"value")||n.error("Missing Condition value.")}parseValue(e){return this.type===o.TYPES.INT&&(e=Number(e)),this.type===o.TYPES.STRING&&(e=String(e)),e}isValidOn(e,t){s.isObjectFunction(this,this.conditional)||n.error("Condition operation is not a function.");let i=void 0!==t?t:this.value,r=this.propertyManager.getPropertyValue(e,this.propertyKey);return this[this.conditional](r,i)}eq(e,t){return e===t}ne(e,t){return e!==t}lt(e,t){return e<t}gt(e,t){return e>t}le(e,t){return e<=t}ge(e,t){return e>=t}}},{"7f32cc4f678fee29":"ijd9L","3ddfbc21a5968711":"5Jvrn",ccbf83a7cf179d24:"e2RZ0"}],"5Jvrn":[function(e,t,i,r){let{ErrorManager:n,sc:s}=e("6ef89030f5a59b76");t.exports=class{getPropertyValue(e,t){return this.manageOwnerProperty(e,t)}setOwnerProperty(e,t,i){return this.manageOwnerProperty(e,t,i)}manageOwnerProperty(e,t,i){let r=t.split("/"),a=this.extractChildPropertyOwner(e,r),o=r[r.length-1];return void 0!==i||s.hasOwn(a,o)||n.error('Invalid property "'+o+'" from path: "'+r.join("/")+'"].'),void 0!==i&&(a[o]=i),a[o]}extractChildPropertyOwner(e,t){let i=[...t];if(i.pop(),0===i.length)return e;let r=e;for(let e of i)s.hasOwn(r,e)||n.error('Invalid property "'+e+'" from path: "'+t.join("/")+'"].'),r=r[e];return r}}},{"6ef89030f5a59b76":"ijd9L"}],inhOw:[function(e,t,i,r){let n=e("466f1d6a713f27d"),s=e("3a9190386e2c269"),a=e("a7b06831aaf035e5"),o=e("3a11d9dd77bf6747"),{Logger:h,sc:c}=e("994144a57bf406a1");t.exports=class{constructor(e){this.key=e.key,this.propertyKey=c.get(e,"propertyKey",e.property_key),this.basePropertyKey=c.get(e,"basePropertyKey",this.propertyKey),this.operation=Number(e.operation),this.type=c.get(e,"type",o.TYPES.INT),this.originalValue=e.value,this.value=this.parseValue(e.value),this.target=c.get(e,"target",!1),this.minValue=c.get(e,"minValue",!1),this.maxValue=c.get(e,"maxValue",!1),this.minProperty=c.get(e,"minProperty",!1),this.maxProperty=c.get(e,"maxProperty",!1),this.conditions=c.get(e,"conditions",[]),this.conditionsOnRevert=c.get(e,"conditionsOnRevert",!1),this.state=this.determineState(e),this.calculator=new n,this.propertyManager=new a}determineState(e){return c.hasOwn(e,"key")?c.hasOwn(e,"propertyKey")||c.hasOwn(e,"property_key")?c.hasOwn(e,"operation")?c.hasOwn(e,"value")?o.MOD_READY:o.MOD_MISSING_VALUE:o.MOD_MISSING_OPERATION:o.MOD_MISSING_PROPERTY_KEY:o.MOD_MISSING_KEY}parseValue(e){return this.type===o.TYPES.INT&&(e=Number(e)),this.type===o.TYPES.STRING&&(e=String(e)),e}apply(e,t,i){return this.execute(e,!1,t,i)}revert(e,t,i){return this.execute(e,!0,t,i)}execute(e,t=!1,i=!1,r=!1){if(!this.target&&!e)return this.state=o.MOD_UNDEFINED_TARGET,!1;if(this.conditions.length&&!this.validateConditions(e)&&(!t||t&&this.conditionsOnRevert))return!1;e&&(this.target=e);let n=this.getModifiedValue(t,i);if(this.state===o.MOD_MODIFIER_ERROR)return!1;let s=r?this.basePropertyKey:this.propertyKey;return this.setOwnerProperty(s,n),this.state=t?o.MOD_REVERTED:o.MOD_APPLIED,!0}validateConditions(e){for(let t of this.conditions){if(!(t instanceof s))return h.error("Missing Condition instance.",typeof t),this.state=o.MOD_MISSING_CONDITION_INSTANCE,!1;if(!t.isValidOn(e))return this.state=o.MOD_INVALID_CONDITIONS,!1}return!0}getModifiedValue(e=!1,t=!1){let i=t?this.basePropertyKey:this.propertyKey,r=this.getPropertyValue(i),n=this.calculator.calculateNewValue(r,this.operation,this.value,e);if((this.operation===o.OPS.SET||this.operation===o.OPS.SET_N)&&(n=!e&&this.value),this.operation===o.OPS.METHOD){if(!c.hasOwn(this,this.value)||"function"!=typeof this[this.value])return h.error(["Modifier error:",this,"Undefined method:",this.value]),this.state=o.MOD_MODIFIER_ERROR,!1;n=this[this.value](this,n)}return this.applyModifierLimits(n)}applyModifierLimits(e){if("number"==typeof this.minValue&&e<this.minValue&&(e=this.minValue),"number"==typeof this.maxValue&&e>this.maxValue&&(e=this.maxValue),this.minProperty){let t=this.getPropertyValue(this.minProperty);t&&e<t&&(e=t)}if(this.maxProperty){let t=this.getPropertyValue(this.maxProperty);t&&e>t&&(e=t)}return e}getPropertyValue(e){return this.propertyManager.getPropertyValue(this.target,e)}setOwnerProperty(e,t){return this.propertyManager.setOwnerProperty(this.target,e,t)}}},{"466f1d6a713f27d":"kwC18","3a9190386e2c269":"2PNHV",a7b06831aaf035e5:"5Jvrn","3a11d9dd77bf6747":"e2RZ0","994144a57bf406a1":"ijd9L"}],"8MyHJ":[function(e,t,i,r){let n=e("fddf8c3cc708201b"),{ErrorManager:s,sc:a}=e("c1c82d06c77e78b8");t.exports=class extends n{constructor(e){a.hasOwn(e,"id")||s.error("Undefined ItemGroup id."),a.hasOwn(e,"key")||s.error("Undefined ItemGroup key."),e.eventsPref="g"+e.key+"."+a.get(e,"eventsPrefix",""),super(e),this.id=e.id,this.key=e.key,this.label=a.get(e,"label",!1),this.description=a.get(e,"description",!1),this.files_name=a.get(e,"files_name",!1),this.sort=a.get(e,"sort",!1),this.items_limit=a.get(e,"items_limit",!1),this.limit_per_item=a.get(e,"limit_per_item",!1)}}},{fddf8c3cc708201b:"iGM1f",c1c82d06c77e78b8:"ijd9L"}],"02YTK":[function(e,t,i,r){t.exports=class{constructor(e){this.id=e.id,this.key=e.key,this.type=e.type}}},{}],zpNaC:[function(e,t,i,r){let n=e("312a2d95cff483b5"),s=e("f647b9be5cb5de72"),a=e("2edbed84bfb41fb4"),{ErrorManager:o,Logger:h,sc:c}=e("a231b7a801915a72");t.exports=class{constructor(e){c.hasOwn(e,"owner")||o.error("Undefined owner."),this.manager=c.hasOwn(e,"manager")?e.manager:new n(e),this.actions=c.hasOwn(e,"actions")?e.actions:{},!1===c.get(e,"avoidDefaults",!1)&&this.setDefaultActions(),this.recieveErrorsLog=[]}setDefaultActions(){this.actions[s.ACTION_SET_ITEMS]="onSetItems",this.actions[s.ACTION_SET_GROUPS]="onSetGroups",this.actions[s.ACTION_ADD]="onAddItem",this.actions[s.ACTION_REMOVE]="onRemoveItem",this.actions[s.ACTION_MODIFY_QTY]="onSetQty",this.actions[s.ACTION_EQUIP]="onEquipItem",this.actions[s.ACTION_UNEQUIP]="onUnequipItem",this.actions[s.ACTION_MOD_APPLIED]="onModifiersApplied",this.actions[s.ACTION_MOD_REVERTED]="onModifiersReverted",this.actions[s.ACTION_EXECUTING]="onExecuting",this.actions[s.ACTION_EXECUTED]="onExecuted"}processMessage(e){let t=c.get(e,"act","");return 0===t.indexOf(s.ACTIONS_PREF)&&(c.hasOwn(this.actions,t)?"function"!=typeof this[this.actions[t]]?(h.info("Items action is not a function.",e.act),!1):void this[this.actions[t]](e):(h.error("Items action not found",t,e),!1))}onSetItems(e){let t={};for(let i of Object.keys(e.items)){let r=e.items[i],n=Object.assign({manager:this.manager},r,{uid:i}),a=this.getItemClass(n.key,n.type);t[i]=new a(n),t[i].isType(s.TYPES.EQUIPMENT)&&c.hasOwn(n,"is_active")&&(t[i].equipped=1===n.is_active)}return this.manager.setItems(t)}onSetGroups(e){let t={};for(let i of Object.keys(e.groups)){let r=this.getGroupClass(e.groups[i].key);t[e.groups[i].key]=new r(e.groups[i])}return this.manager.setGroups(t)}onAddItem(e){let t=Object.assign({manager:this.manager},e.item,{uid:e.item.idx}),i=new(this.getItemClass(t.key,t.type))(t);this.manager.addItem(i).catch(e=>{this.recieveErrorsLog.push({"Error receiver onAddItem.":e})})}onRemoveItem(e){this.manager.removeItem(e.item.idx).catch(e=>{this.recieveErrorsLog.push({"Error receiver onRemoveItem.":e})})}onSetQty(e){this.manager.setItemQty(e.item.idx,e.item.qty).catch(e=>{this.recieveErrorsLog.push({"Error receiver onSetQty.":e})})}onEquipItem(e){this.manager.items[e.item.idx].equip(!1).catch(e=>{this.recieveErrorsLog.push({"Error receiver onEquipItem.":e})})}onUnequipItem(e){this.manager.items[e.item.idx].unequip(!1).catch(e=>{this.recieveErrorsLog.push({"Error receiver onUnequipItem.":e})})}onModifiersApplied(e){}onModifiersReverted(e){}onExecuting(e){}onExecuted(e){}getItemClass(e,t){return c.get(this.manager.itemClasses,e,this.manager.types.classByTypeId(t))}getGroupClass(e){let t=a;return c.hasOwn(this.manager.groupClasses,e)&&(t=this.manager.groupClasses[e]),t}}},{"312a2d95cff483b5":"031qw",f647b9be5cb5de72:"afvSx","2edbed84bfb41fb4":"8MyHJ",a231b7a801915a72:"ijd9L"}],"8PTC7":[function(e,t,i,r){let n=e("3dd92880a486247f"),{ModifierConst:s,Modifier:a}=e("293ce1d1ff60486a"),{sc:o}=e("45aa0d32b8aa311b");t.exports=class{static itemsListMappedData(e={},t){if(0===t.length)return{};let i={},r=new n;for(let n of t)n.related_items_item_modifiers&&(n.modifiers=this.generateItemModifiers(n)),i[n.key]={class:o.get(e,n.key,r.classByTypeId(n.type)),data:n};return i}static generateItemModifiers(e){let t={};for(let i of e.related_items_item_modifiers||[])i.operation!==s.OPS.SET&&(i.value=Number(i.value)),t[i.id]=new a(i);return t}}},{"3dd92880a486247f":"kR6yZ","293ce1d1ff60486a":"gQlQ8","45aa0d32b8aa311b":"ijd9L"}],jKkpS:[function(e,t,i,r){let{ItemGroup:n}=e("185572600d1291f"),{sc:s}=e("99c50def0f4abb2");t.exports=class{static groupsListMappedData(e,t){if(0===t.length)return{};let i={groupList:{},groupBaseData:{}};for(let r of(i.groupModels=t,t))this.addGroup(r,i,e);return i}static appendGroup(e,t,i){return!!e&&!!t&&!!i&&(s.isArray(t.groupModelsList)||(t.groupModelsList=[]),t.groupModelsList.push(e),this.addGroup(i,e,t),t)}static addGroup(e,t,i){let r=s.get(i,e.key,n),{id:a,key:o,label:h,description:c,sort:l,files_name:d}=e;t.groupList[e.key]={class:r,data:e},t.groupBaseData[o]={id:a,key:o,label:h,description:c,sort:l,files_name:d}}}},{"185572600d1291f":"8MyHJ","99c50def0f4abb2":"ijd9L"}],"10o8f":[function(e,t,i,r){let n=e("9ec9f370c69b97e4"),s=e("5bd56f616649a07e"),a=e("f6c0b56ddc826cd5"),o=e("e433549ba9a6abfc"),h=e("24c35dc83734e5b2"),c=e("330f7364569544ad"),l=e("332ac9b4e9ced220"),{EventsManagerSingleton:d,ErrorManager:u,Logger:f,sc:p}=e("71720c1a95ddc1ce");t.exports=class{constructor(e){this.events=p.get(e,"eventsManager",d),this.requirementsProcessor=new a,this.rewardsProcessor=new o,this.exchangeInitializerId=p.get(e,"exchangeInitializerId",!1),this.initializeProperties()}initializeExchangeBetween(e){let t=p.get(e,"inventoryA",null),i=p.get(e,"inventoryB",null);(null===t||null===i)&&u.error("Missing inventories from properties.",e),this.inventories={A:t,B:i},this.lockInventories(),this.confirmations={A:!1,B:!1},this.exchangeBetween={A:{},B:{}},this.exchangeRequirements={A:p.get(e,"exchangeRequirementsA",new n),B:p.get(e,"exchangeRequirementsB",new n)},this.exchangeRewards={A:p.get(e,"exchangeRewardsA",new s),B:p.get(e,"exchangeRewardsB",new s)},this.dropExchange={A:p.get(e,"dropExchangeA",!1),B:p.get(e,"dropExchangeB",!1)},this.avoidExchangeDecrease={A:p.get(e,"avoidExchangeDecreaseA",!1),B:p.get(e,"avoidExchangeDecreaseB",!1)},this.setError(),this.events.emit(c.EXCHANGE.INITIALIZED,{exchangePlatform:this,props:e,inventoryA:t,inventoryB:i})}setError(e="",t="",i={},r=!1){this.lastError=new h(e,t,i,r)}cancelExchange(){this.unlockInventories(),this.initializeProperties(),this.events.emit(c.EXCHANGE.CANCELED,{exchangePlatform:this})}initializeProperties(){this.inventories={A:null,B:null},this.confirmations={A:!1,B:!1},this.exchangeBetween={A:{},B:{}},this.exchangeRequirements={A:[],B:[]},this.exchangeRewards={A:[],B:[]},this.setError()}async pushForExchange(e,t,i){return this.confirmations.A||this.confirmations.B?(f.info('Push for exchange "'+e+'" was blocked. Exchange for "'+i+'" and owner "'+this.inventories[i].owner_id+'" was already confirmed.'),!1):this.canBePushed(e,t,i)?(this.exchangeBetween[i][e]=t,this.validateRequirements("A")&&this.validateRewards("A")&&this.validateRequirements("B")&&this.validateRewards("B"))?(this.events.emit(c.EXCHANGE.ITEM_PUSHED,{exchangePlatform:this,itemUid:e,qty:t,inventoryKey:i}),!0):(delete this.exchangeBetween[i][e],!1):(this.events.emit(c.EXCHANGE.INVALID_PUSH,{exchangePlatform:this,itemUid:e,qty:t,inventoryKey:i}),!1)}async removeFromExchange(e,t){return this.confirmations.A||this.confirmations.B?(f.info('Remove from exchange "'+e+'" was blocked. Exchange for "'+t+'" and owner "'+this.inventories[t].owner_id+'" was already confirmed.'),!1):(this.events.emit(c.EXCHANGE.ITEM_REMOVE,{exchangePlatform:this,itemUid:e,inventoryKey:t}),!!p.hasOwn(this.exchangeBetween[t],e)&&(delete this.exchangeBetween[t][e],!0))}async confirmExchange(e){this.events.emit(c.EXCHANGE.CONFIRM,{exchangePlatform:this,inventoryKey:e}),this.confirmations[e]=!0}async disconfirmExchange(e){this.events.emit(c.EXCHANGE.DISCONFIRM,{exchangePlatform:this,inventoryKey:e}),this.confirmations[e]=!1}async finalizeExchange(){return(this.events.emit(c.EXCHANGE.BEFORE_FINALIZE,{exchangePlatform:this}),this.confirmations.A&&this.confirmations.B)?!!this.validateRequirements("A")&&!!this.validateRequirements("B")&&!!this.validateRewards("A")&&!!this.validateRewards("B")&&(this.unlockInventories(),!1!==await this.executeExchangeFromTo("A","B")&&!1!==await this.executeExchangeFromTo("B","A")&&(this.events.emit(c.EXCHANGE.FINALIZED,{exchangePlatform:this}),this.setError(),!0)):(this.setError("Missing confirmation.",l.ERROR_CODES.EXCHANGE.MISSING_CONFIRMATION,{confirmations:this.confirmations}),!1)}validateRequirements(e){return this.requirementsProcessor.validateRequirements(e,this)}validateRewards(e){return this.rewardsProcessor.validateRewards(e,this)}lockInventories(){this.setLocks(!0)}unlockInventories(){this.setLocks(!1)}setLocks(e){this.setInventoryLock("A",e),this.setInventoryLock("B",e)}setInventoryLock(e,t){let i=p.get(this.inventories,e,!1);return null!==i&&(!1===i?(f.error('Inventory not found "'+e+'".',this.inventories),!1):(i.locked=t,!0))}canBePushed(e,t,i){if(!p.hasOwn(this.inventories[i].items,e))return f.critical("Item Key does not exists on the inventory",e,this.inventories[i].items),!1;let r=this.inventories[i].items[e],n=t<=r.qty||-1===r.qty;return n||this.setError("Invalid item pushed quantity ("+t+"), available: "+r.qty,l.ERROR_CODES.EXCHANGE.INVALID_PUSHED_QUANTITY,{itemUid:e,qty:t,pushedItemQty:r.qty}),n}async executeExchangeFromTo(e,t){if(e===t)return this.setError('Inventories "FROM" and "TO" are the same, exchange cancelled.',l.ERROR_CODES.EXCHANGE.INVALID_EXCHANGE),this.cancelExchange(),this.inventories;let i=this.inventories[e],r=this.inventories[t];for(let n of Object.keys(this.exchangeBetween[e])){let s=this.exchangeBetween[e][n];if(0===s)return this.setError("Invalid item quantity 0.",l.ERROR_CODES.EXCHANGE.INVALID_QUANTITY,{itemUid:n}),!1;let a=!1===this.dropExchange[t]&&r.createItemInstance(i.items[n].key,s);if(!1===await this.rewardsProcessor.processRewards(e,t,n,i,r,this)||!1===await this.requirementsProcessor.processRequirements(e,t,n,s,i,r,this))return!1;let o=!0;if(!1===this.avoidExchangeDecrease[e]&&(i.frozenItems[n]=Object.assign({},i.items[n]),o=await i.decreaseItemQty(n,s)),!1===o)return this.setError("Exchange inventory decrease error.",l.ERROR_CODES.EXCHANGE.DECREASE_QUANTITY,{itemUid:n},i.lastError),!1;if(!1===this.dropExchange[t]){let e=p.isArray(a)?a:[a];if(!1===await r.addItems(e))return this.setError("Exchange add inventory result error.",l.ERROR_CODES.EXCHANGE.ITEM_ADD,{itemUid:n},r.lastError),!1}}return this.exchangeBetween[e]={},this.inventories}oppositeKey(e){return"A"===e?"B":"A"}}},{"9ec9f370c69b97e4":"kxlGI","5bd56f616649a07e":"b3icJ",f6c0b56ddc826cd5:"i8KMK",e433549ba9a6abfc:"aOkqV","24c35dc83734e5b2":"3qAND","330f7364569544ad":"6rVij","332ac9b4e9ced220":"afvSx","71720c1a95ddc1ce":"ijd9L"}],kxlGI:[function(e,t,i,r){let n=e("dda1e92f871afe97"),{sc:s}=e("ce7f52b0d100b8f7");t.exports=class{constructor(e){this.requirements=s.get(e,"requirements",[])}count(){return this.requirements.length}add(e,t,i,r,s){this.requirements.push(new n({itemUid:e,itemKey:t,requiredItemKey:i,requiredQuantity:r,autoRemoveRequirement:s}))}remove(e){let t=!1,i=0;for(let r of this.requirements){if(r.itemUid===e){t=!0;break}i++}t&&delete this.requirements[i]}fetchAllBy(e,t){return s.fetchAllByProperty(this.requirements,e,t)}}},{dda1e92f871afe97:"b4Itj",ce7f52b0d100b8f7:"ijd9L"}],b4Itj:[function(e,t,i,r){t.exports=class{constructor(e){this.itemUid=e.itemUid||"",this.itemKey=e.itemKey||"",this.requiredItemKey=e.requiredItemKey,this.requiredQuantity=Number(e.requiredQuantity),this.autoRemoveRequirement=!!e.autoRemoveRequirement}}},{}],b3icJ:[function(e,t,i,r){let n=e("c75245438c2a820e"),{sc:s}=e("74cd247a8747612e");t.exports=class{constructor(e){this.rewards=s.get(e,"rewards",[])}count(){return this.rewards.length}add(e,t,i,r,s){this.rewards.push(new n({itemUid:e,itemKey:t,rewardItemKey:i,rewardQuantity:r,rewardItemIsRequired:s}))}remove(e){let t=!1,i=0;for(let r of this.rewards){if(r.itemUid===e){t=!0;break}i++}t&&delete this.rewards[i]}fetchAllBy(e,t){return s.fetchAllByProperty(this.rewards,e,t)}}},{c75245438c2a820e:"kwWYg","74cd247a8747612e":"ijd9L"}],kwWYg:[function(e,t,i,r){t.exports=class{constructor(e){this.itemUid=e.itemUid||"",this.itemKey=e.itemKey||"",this.rewardItemKey=e.rewardItemKey,this.rewardQuantity=Number(e.rewardQuantity),this.rewardItemIsRequired=!!e.rewardItemIsRequired}}},{}],i8KMK:[function(e,t,i,r){let n=e("b11112aa3d4db9e4"),{Logger:s,sc:a}=e("5342d6a91ce0343f");t.exports=class{constructor(e){this.requirementsByItemUid=a.get(e,"requirementsByItemUid",!0),this.requirementsByItemKey=a.get(e,"requirementsByItemKey",!0),this.requirementsTotals={}}validateRequirements(e,t){let i=t.exchangeRequirements[e];if(0===i.count())return!0;let r=t.exchangeBetween[e],s=Object.keys(r);if(0===s.length)return!0;this.requirementsTotals={};let o=t.oppositeKey(e);for(let h of s){let s=r[h],c=t.inventories[e],l=a.get(c.items,h,a.get(c.frozenItems,h,!1));if(!1===l)return t.setError('Reward error, item "'+h+'" does not exits on inventory "'+e+'".',n.ERROR_CODES.REWARD.DOES_NOT_EXISTS,{itemUid:h,inventoryKeyFrom:e}),!1;let d=this.fetchItemRequirements(i,l);if(0!==d.length&&(this.plusRequirementsQuantity(d,s),!this.validateItemRequirements(d,r[h],o,t)))return!1}return!0}fetchItemRequirements(e,t){let i=[];return this.requirementsByItemUid&&(i=[...i,...e.fetchAllBy("itemUid",t.uid)]),this.requirementsByItemKey&&(i=[...i,...e.fetchAllBy("itemKey",t.key)]),i}plusRequirementsQuantity(e,t){for(let i of e)a.hasOwn(this.requirementsTotals,i.requiredItemKey)||(this.requirementsTotals[i.requiredItemKey]=0),this.requirementsTotals[i.requiredItemKey]+=i.requiredQuantity*t}validateItemRequirements(e,t,i,r){if(0===e.length)return!0;for(let s of e){let e=r.inventories[i].findItemByKey(s.requiredItemKey);if(!1===e)return r.setError('Required item "'+s.requiredItemKey+'" is not present on inventory "'+i+'".',n.ERROR_CODES.REQUIREMENTS.ITEM_NOT_PRESENT,{requiredItemKey:s.requiredItemKey,inventoryKeyTo:i}),!1;let o=s.requiredQuantity*t;if(o>e.qty)return r.setError('Required item "'+s.requiredItemKey+'" required quantity ('+o+') is not available on inventory "'+i+'".',n.ERROR_CODES.REQUIREMENTS.QUANTITY_NOT_AVAILABLE,{requiredItemKey:s.requiredItemKey,inventoryKeyTo:i,totalRequiredQuantity:o}),!1;if(!0===s.autoRemoveRequirement)continue;let h=a.get(r.exchangeBetween[i],e.uid,!1);if(!1===h&&!1===s.autoRemoveRequirement)return r.setError('Required item "'+s.requiredItemKey+'" was not pushed for exchange "'+i+'".',n.ERROR_CODES.REQUIREMENTS.ITEM_NOT_PUSHED,{requiredItemKey:s.requiredItemKey,inventoryKeyTo:i}),!1;if(o>h)return r.setError("Required item "+s.requiredItemKey+" required quantity ("+o+") was not pushed for exchange.",n.ERROR_CODES.REQUIREMENTS.ITEM_QUANTITY_NOT_PUSHED,{requiredItemKey:s.requiredItemKey,inventoryKeyTo:i,totalRequiredQuantity:o}),!1}return!0}async processRequirements(e,t,i,r,o,h,c){let l=a.get(o.items,i,a.get(o.frozenItems,i,!1));if(!1===l)return c.setError('Requirement error, item "'+i+'" does not exits on inventory.',n.ERROR_CODES.REQUIREMENTS.ITEM_DOES_NOT_EXISTS,{itemUid:i}),!1;let d=c.exchangeRequirements[e];if(!d||0===d.count())return!0;let u=this.fetchItemRequirements(d,l);if(0===u.length)return!0;for(let e of u){if(!1===a.get(c.exchangeBetween[t],e.requiredItemKey,!1)&&!1===e.autoRemoveRequirement)return!1;let l=h.findItemByKey(e.requiredItemKey);if(!1===l)return s.error("The required item not longer exists.",i,e.requiredItemKey),!1;let d=e.requiredQuantity*r,u=!1===h.dropExchange&&o.createItemInstance(e.requiredItemKey,d);if(h.frozenItems[l.uid]=Object.assign({},l),!1===await h.decreaseItemQty(l.uid,d))return s.error("There was an error while decreasing the required item quantity.",e,l),!1;if(!1!==u){let e=a.isArray(u)?u:[u];if(!1===await h.addItems(e))return c.setError("Requirement add item error.",n.ERROR_CODES.REQUIREMENTS.ITEM_ADD,{},h.lastError),!1}}return!0}}},{b11112aa3d4db9e4:"afvSx","5342d6a91ce0343f":"ijd9L"}],aOkqV:[function(e,t,i,r){let n=e("bddde17fed05deaa"),{Logger:s,sc:a}=e("918bdf09bd16e1b2");t.exports=class{constructor(e){this.rewardsByItemUid=a.get(e,"rewardsByItemUid",!0),this.rewardsByItemKey=a.get(e,"rewardsByItemKey",!0),this.rewardsTotals={}}validateRewards(e,t){let i=t.exchangeRewards[e];if(0===i.length)return!0;let r=t.exchangeBetween[e],s=Object.keys(r);if(0===s.length)return!0;let o=t.oppositeKey(e);for(let h of(this.rewardsTotals={},s)){let s=r[h],c=t.inventories[e],l=a.get(c.items,h,a.get(c.frozenItems,h,!1));if(!1===l)return t.setError('Reward error, item "'+h+'" does not exits on inventory "'+e+'".',n.ERROR_CODES.REWARD.MISSING_ITEM,{itemUid:h,inventoryKeyFrom:e}),!1;let d=this.fetchItemRewards(i,l);if(!1!==d&&0!==d.length&&(this.plusRewardsQuantity(d,s),!this.validateItemRewards(d,s,o,t)))return!1}return!0}fetchItemRewards(e,t){if(!t)return s.error("Item does not exits on inventory.",t),!1;let i=[];return this.rewardsByItemUid&&(i=[...i,...e.fetchAllBy("itemUid",t.uid)]),this.rewardsByItemKey&&(i=[...i,...e.fetchAllBy("itemKey",t.key)]),i}plusRewardsQuantity(e,t){for(let i of e)a.hasOwn(this.rewardsTotals,i.rewardItemKey)||(this.rewardsTotals[i.rewardItemKey]=0),this.rewardsTotals[i.rewardItemKey]+=i.rewardQuantity*t}validateItemRewards(e,t,i,r){if(0===e.length)return!0;for(let t of e){if(!1===t.rewardItemIsRequired)continue;let e=r.inventories[i].findItemByKey(t.rewardItemKey);if(!1===e)return r.setError('Reward item "'+t.rewardItemKey+'" is not present on inventory "'+i+'".',n.ERROR_CODES.REWARD.ITEM_NOT_PRESENT,{rewardItemKey:t.rewardItemKey,inventoryKeyTo:i}),!1;if(this.rewardsTotals[t.rewardItemKey]>e.qty)return r.setError("Reward item "+t.rewardItemKey+" reward quantity ("+t.rewardQuantity+') is not available on inventory "'+i+'".',n.ERROR_CODES.REWARD.QUANTITY_NOT_AVAILABLE,{rewardItemKey:t.rewardItemKey,rewardQuantity:t.rewardQuantity,inventoryKeyTo:i}),!1}return!0}async processRewards(e,t,i,r,s,o){let h=o.exchangeRewards[e];if(0===h.length)return!0;let c=o.oppositeKey(e),l=o.exchangeBetween[e][i];if(!l)return o.setError('Missing pushed for exchange item "'+i+'".',n.ERROR_CODES.REWARD.MISSING_PUSHED,{itemUid:i}),!1;let d=a.get(r.items,i,a.get(r.frozenItems,i,!1));if(!1===d)return o.setError('Reward error, item "'+i+'" does not exits on inventory.',n.ERROR_CODES.REWARD.GET_ITEM_DOES_NOT_EXISTS,{itemUid:i}),!1;let u=this.fetchItemRewards(h,d);return!1===u||0===u.length||!!await this.processItemRewards(u,r,s,c,l,i,o)||(o.setError('Process item reward error, item "'+i+'".',n.ERROR_CODES.REWARD.PROCESS_ITEM,{itemUid:i}),!1)}async processItemRewards(e,t,i,r,o,h,c){if(0===e.length)return!0;for(let l of e){let e=l.rewardQuantity*o;if(!1===l.rewardItemIsRequired){let i=t.createItemInstance(l.rewardItemKey,e),r=a.isArray(i)?i:[i];if(!1===await t.addItems(r)){if(""!==t.lastError.message)return c.setError("Rewards process inventory error.",n.ERROR_CODES.REWARD.PROCESS_ITEM,{},t.lastError),!1;let e=Object.keys(r).join(",");return c.setError("Rewards error on add items: "+e+".",n.ERROR_CODES.REWARD.ADD_ITEMS,{itemsKeys:e}),!1}continue}let d=c.inventories[r].findItemByKey(l.rewardItemKey);if(!1===d)return c.setError('Reward item "'+l.rewardItemKey+'" is not present on inventory "'+r+'".',n.ERROR_CODES.REWARD.ITEM_NOT_PRESENT,{rewardItemKey:l.rewardItemKey,inventoryKeyTo:r}),!1;if(e>d.qty)return c.setError("Reward quantity ("+e+") is bigger than the available in the inventory ("+d.qty+").",n.ERROR_CODES.REWARD.QUANTITY_OVERLOAD,{rewardQuantityTotal:e,rewardInventoryItemQty:d.qty}),!1;let u=i.findItemByKey(l.rewardItemKey);if(!1===u)return s.error("The reward item not longer exists.",h,l.rewardItemKey),!1;let f=t.createItemInstance(l.rewardItemKey,e);if(i.frozenItems[u.uid]=Object.assign({},u),!1===await i.decreaseItemQty(u.uid,l.requiredQuantity))return s.error("There was an error while decreasing the reward item quantity.",l,u),!1;await t.addItem(f)}return!0}}},{bddde17fed05deaa:"afvSx","918bdf09bd16e1b2":"ijd9L"}],"5a4ST":[function(e,t,i,r){let{ObjectsConst:n}=e("df12497da2e014ac"),{Logger:s,sc:a}=e("bc3fcd89e3b4517e");t.exports.DropsMessageListener=class{static listenMessages(e,t){e.onMessage("*",e=>{let i=a.get(e,n.DROPS.KEY,!1);i&&this.loadObjects(i,t),n.DROPS.REMOVE===e.act&&this.removeDropById(e.id,t)})}static loadObjects(e,t){let i=t.getActiveScene(),r=t.config,n=t.getFeature("objects"),s=i.load;if(!this.validateParams({currentScene:i,gameConfig:r,objectPlugin:n,loader:s}))return!1;for(let[t,a]of Object.entries(e))this.loadSpritesheet(a,s,r),s.once("complete",async e=>{await this.createDropAnimation(n,a,t,i)});return s.start(),!0}static async createDropAnimation(e,t,i,r){let s={type:n.DROPS.PICK_UP_ACT,enabled:!0,ui:!0,frameStart:t[n.DROPS.PARAMS].start,frameEnd:t[n.DROPS.PARAMS].end,repeat:t[n.DROPS.PARAMS].repeat,autoStart:!0,key:i,id:i,targetName:"",layerName:i,isInteractive:!0,asset_key:t[n.DROPS.ASSET_KEY],x:t.x,y:t.y,yoyo:t[n.DROPS.PARAMS].yoyo};return await e.createAnimationFromAnimData(s,r)}static loadSpritesheet(e,t,i){t.spritesheet(e[n.DROPS.ASSET_KEY],this.getSpritesheetPath(e),this.getRewardFrameConfig(e[n.DROPS.PARAMS],i))}static getRewardFrameConfig(e,t){return{frameWidth:a.get(e,"frameWidth",t.getWithoutLogs("client/map/dropsTile/width",t.get("client/map/tileData/width"))),frameHeight:a.get(e,"frameHeight",t.getWithoutLogs("client/map/dropsTile/height",t.get("client/map/tileData/height")))}}static getSpritesheetPath(e){return n.DROPS.ASSETS_PATH+e[n.DROPS.FILE]}static removeDropById(e,t){if(!e)return!1;let i=t.activeRoomEvents.getActiveScene(),r=a.get(i.objectsAnimations,e,!1);if(!r)return!1;r.sceneSprite.destroy(),delete i.objectsAnimations[e]}static validateParams(e){let t=!0;return a.get(e,"currentScene",!1)||(s.error("Scene is undefined in Rewards Message Listener."),t=!1),a.get(e,"gameConfig",!1)||(s.error("Game Config is undefined in Rewards Message Listener."),t=!1),a.get(e,"objectPlugin",!1)||(s.error("Object Plugin is undefined in Rewards Message Listener."),t=!1),a.get(e,"loader",!1)||(s.error("Loader is undefined in Rewards Message Listener."),t=!1),t}}},{df12497da2e014ac:"6mDqg",bc3fcd89e3b4517e:"ijd9L"}],dp9Ue:[function(e,t,i,r){t.exports={objects:{npcInvalid:"I do not understand.",trader:{content:"Hi there! What would you like to do?",options:{buy:"Buy",sell:"Sell"},buyConfirmed:"Thanks for buying!",sellConfirmed:"Thanks for your products!"}}}},{}],azIQk:[function(e,t,i,r){let{GameConst:n}=e("d90cf3ac18adcc93"),{Logger:s,sc:a}=e("981fc13f3ba6a83c");t.exports.UserInterface=class{constructor(e,t,i="/assets/html/dialog-box.html",r){this.events=e.events,this.gameDom=e.gameDom,this.initialTitle="",this.initialContent="",this.id=t.id,this.animProps=t,this.template=i,this.uiPositionKey=r||"default",this.openButton=null,this.closeButton=null,this.listenEvents()}listenEvents(){if(!this.events)return!1;this.events.on("reldens.beforePreload",e=>{this.preloadUiElement(e)}),this.events.on("reldens.createPreload",(e,t)=>{this.createUiElement(t)})}preloadUiElement(e){this.template&&e.load.html(this.id,this.template)}createUiElement(e,t=""){""===t&&(t=this.id);let i="box-"+this.id;if(a.get(e.elementsUi,this.id))return this;let r=this.createDialogBox(e,t);this.createBoxContent(e,t,r);let n=this.gameDom.getElement(".ui-box.ui-dialog-box",r.node);return n?(n.id=i,n.classList.add("type-"+(this.animProps?.type||"dialog-box")),this.activateOpenButton(r,n,e),this.activateCloseButton(r,n,e),e.userInterfaces[this.id]=this,e.elementsUi[this.id]=r,this):(s.critical('Missing dialog container for template key: "'+t+'".',{dialogBox:r,dialogContainer:n,objectElementId:i}),!1)}createDialogBox(e,t){let{newWidth:i,newHeight:r}=e.gameManager.gameEngine.getCurrentScreenSize(e.gameManager),{uiX:n,uiY:s}=e.getUiPosition(this.uiPositionKey,i,r);return e.add.dom(n,s).createFromCache(t)}createBoxContent(e,t,i){let r=e.cache.html.get(t);i.innerHTML=e.gameManager.gameEngine.parseTemplate(r,{title:this.initialTitle,content:this.initialContent})}activateOpenButton(e,t,i){return this.openButton=this.gameDom.getElement("."+n.UI_BOX+n.UI_OPEN,e.node),!!this.openButton&&(this.openButton.id=n.UI_BOX+n.UI_OPEN+"-"+this.id,this.openButton.addEventListener("click",()=>{a.get(this.animProps,"defaultOpen",!0)&&(t.style.display="block",this.openButton.style.display="none",!1!==a.get(this.animProps,"depth",!1)&&e.setDepth(this.animProps.depth)),a.isFunction(this.animProps.openCallBack)&&this.animProps.openCallBack(),this.events.emit("reldens.openUI",{ui:this,openButton:this.openButton,dialogBox:e,dialogContainer:t,uiScene:i})}),this.openButton)}activateCloseButton(e,t,i){if(this.closeButton=this.gameDom.getElement("."+n.UI_BOX+n.UI_CLOSE,e.node),!this.closeButton)return!1;this.closeButton.id=n.UI_BOX+n.UI_CLOSE+"-"+this.id,this.closeButton.addEventListener("click",()=>{a.hasOwn(this.animProps,"sendCloseMessage")&&!1!==this.animProps.sendCloseMessage||i.gameManager.activeRoomEvents.send({act:n.CLOSE_UI_ACTION,id:this.id}),a.get(this.animProps,"defaultClose",!0)&&(t.style.display="none",this.openButton&&(this.openButton.style.display="block"),!1!==a.get(this.animProps,"depth",!1)&&e.setDepth(1)),a.isFunction(this.animProps.closeCallback)&&this.animProps.closeCallback(),this.events.emit("reldens.closeUI",{ui:this,closeButton:this.closeButton,openButton:this.openButton,dialogBox:e,dialogContainer:t,uiScene:i})})}}},{d90cf3ac18adcc93:"z0nmL","981fc13f3ba6a83c":"ijd9L"}],conJ9:[function(e,t,i,r){let{InventoryUi:n}=e("3dbcaecc16a8d7f6"),{InventoryReceiver:s}=e("1b246d1f86d4b52c"),{TradeTargetAction:a}=e("e34196023b491a43"),{TradeMessageListener:o}=e("4891eeec00749c11"),{UserInterface:h}=e("c8568ca446361435"),{PluginInterface:c}=e("f9e95a5e7b3e4385"),{TemplatesHandler:l}=e("9a0084a090b55a0d"),{TranslationsMapper:d}=e("3a8304cb1916a776"),u=e("26049dfb393d7854"),{InventoryConst:f}=e("5532f77de2576b30"),{ItemsEvents:p,ItemsConst:g}=e("75f9030ce424b588"),{GameConst:m}=e("28a98a79420c2754"),{Logger:v,sc:y}=e("ddf286423098af38");t.exports.InventoryPlugin=class extends c{async setup(e){this.gameManager=y.get(e,"gameManager",!1),this.gameManager||v.error("Game Manager undefined in InventoryPlugin."),this.events=y.get(e,"events",!1),this.events||v.error("EventsManager undefined in InventoryPlugin."),this.tradeTargetAction=new a,this.setTradeUi(),this.listenEvents(),this.setListener(),this.setTranslations()}setTranslations(){return!!this.gameManager&&(d.forConfig(this.gameManager.config.client,u,f.MESSAGE.DATA_VALUES),!0)}setTradeUi(){return!!this.gameManager&&(this.tradeUi=new h(this.gameManager,{id:"trade",type:"trade"}),!0)}setListener(){return!!this.gameManager&&(this.gameManager.config.client.message.listeners.trade=new o,!0)}listenEvents(){return!!this.events&&(this.events.on("reldens.playersOnAdd",(e,t,i,r)=>{this.onPlayerAdd(t,r,e)}),this.events.on("reldens.preloadUiScene",e=>{l.preloadTemplates(e)}),this.events.on("reldens.createUiScene",e=>this.onPreloadUiScene(e)),this.events.on("reldens.gameEngineShowTarget",(e,t,i,r)=>{this.tradeTargetAction.showTargetExchangeAction(this.gameManager,t,i,r)}),!0)}onPreloadUiScene(e){this.uiManager=new n(e),this.uiManager.createUi();let t=e.gameManager.inventory.manager,i=this.activateGroupAndEquipmentUi(e,t),r=this.activateInventoryUi(e,t,i);this.listenInventoryEvents(e,r,i)}activateGroupAndEquipmentUi(e,t){let i=e.getUiElement("equipment");if(!i)return v.warning("EquipmentElement not found.",i),!1;let r=i.getChildByProperty("id",f.EQUIPMENT_ITEMS);if(!r)return v.warning("Equipment UI not found.",r),!1;let n=y.get(t,"groups",{});if(Object.keys(n).length){let t=e.gameManager.gameDom.getElement("#"+f.EQUIPMENT_ITEMS);if(!t)return v.warning('Element "equipmentItemsElement" not found.'),!1;for(let i of(t.innerHTML="",this.sortGroups(n))){let t=this.createGroupBox(n[i],e.gameManager,e);e.gameManager.gameDom.appendToElement("#"+f.EQUIPMENT_ITEMS,t)}}return r}activateInventoryUi(e,t,i){let r=e.getUiElement("inventory");if(!r)return v.warning("InventoryElement not found.",r),!1;let n=r.getChildByProperty("id",f.INVENTORY_ITEMS);if(!n)return v.warning("Inventory UI not found.",n),!1;let s=y.get(t,"items",{}),a=Object.keys(s);if(0<a.length)for(let t of a){let r=s[t];this.displayItem(r,e,i,n,t)}return n}onPlayerAdd(e,t,i){return e===t.room.sessionId&&(t.gameManager.inventory||this.createInventoryInstance(i,t),t.room.onMessage("*",e=>{t.gameManager.inventory.processMessage(e)}),!0)}createInventoryInstance(e,t){let i={owner:e,ownerIdProperty:"sessionId",gameManager:t.gameManager},r=t.gameManager.config.getWithoutLogs("client/customClasses/inventory/items",{});r&&0<Object.keys(r).length&&(i.itemClasses=r);let n=t.gameManager.config.getWithoutLogs("client/customClasses/inventory/groups",{});n&&Object.keys(n).length&&(i.groupClasses=n),t.gameManager.inventory=new s(i)}listenInventoryEvents(e,t,i){let r=e.gameManager,n=r.inventory.manager.getOwnerEventKey();r.inventory.manager.listenEvent(p.ADD_ITEM,(i,n)=>{let s=this.createItemBox(n,"inventoryItem",r,e);r.gameDom.appendToElement("#"+f.INVENTORY_ITEMS,s),this.setupButtonsActions(t,n.getInventoryId(),n,e)},r.inventory.manager.getOwnerUniqueEventKey("addItemPack"),n),r.inventory.manager.listenEvent(p.SET_ITEMS,r=>{for(let n of(t.innerHTML="",Object.keys(r.items))){let s=r.items[n];this.displayItem(s,e,i,t,n)}},r.inventory.manager.getOwnerUniqueEventKey("setItemsPack"),n),r.inventory.manager.listenEvent(p.MODIFY_ITEM_QTY,t=>{e.getUiElement("inventory").getChildByID("item-qty-"+t.getInventoryId()).innerHTML=t.qty},r.inventory.manager.getOwnerUniqueEventKey("modifyItemQtyPack"),n),r.inventory.manager.listenEvent(p.REMOVE_ITEM,(t,i)=>{e.getUiElement("inventory").getChildByID("item-"+i).remove()},r.inventory.manager.getOwnerUniqueEventKey("removeItemPack"),n),r.inventory.manager.listenEvent(p.SET_GROUPS,n=>{let s=!1,a=r.gameDom.getElement("#"+f.EQUIPMENT_ITEMS);for(let t of(""!==a.innerHTML&&(s=!0),a.innerHTML="",this.sortGroups(n.groups))){let i=this.createGroupBox(n.groups[t],r,e);r.gameDom.appendToElement("#"+f.EQUIPMENT_ITEMS,i)}s&&this.resetEquippedItemsDisplay(r,e,i,t)},r.inventory.manager.getOwnerUniqueEventKey("setGroupsPack"),n),r.inventory.manager.listenEvent(p.EQUIP_ITEM,r=>{this.displayItem(r,e,i,t,r.getInventoryId())},r.inventory.manager.getOwnerUniqueEventKey("equipItemPack"),n),r.inventory.manager.listenEvent(p.UNEQUIP_ITEM,r=>{this.displayItem(r,e,i,t,r.getInventoryId())},r.inventory.manager.getOwnerUniqueEventKey("unequipItemPack"),n)}resetEquippedItemsDisplay(e,t,i,r){let n=Object.keys(e.inventory.manager.items);if(0===n.length)return!1;for(let s of n){let n=e.inventory.manager.items[s];this.isEquipped(n)&&this.displayItem(n,t,i,r,n.getInventoryId())}return!0}displayItem(e,t,i,r,n){let s=this.createItemBox(e,"inventoryItem",t.gameManager,t),a=t.gameManager.gameDom.getElement("#item-"+e.getInventoryId());if(a&&a.remove(),!this.isEquipped(e)){t.gameManager.gameDom.appendToElement("#"+f.INVENTORY_ITEMS,s),this.setupButtonsActions(r,n,e,t);return}this.displayItemInGroups(e,t,s),i&&this.setupButtonsActions(i,n,e,t)}displayItemInGroups(e,t,i){let r=this.getGroupById(e.group_id,t.gameManager.inventory.manager.groups);r&&t.gameManager.gameDom.getElement("#group-item-"+r.key+" .equipped-item")?t.gameManager.gameDom.updateContent("#group-item-"+r.key+" .equipped-item",i):t.gameManager.gameDom.appendToElement("#"+f.EQUIPMENT_ITEMS,i)}updateEquipmentStatus(e,t){t.gameDom.getElement("#item-equip-"+e.idx).src="/assets/features/inventory/assets/"+(e.equipped?"equipped":"unequipped")+m.FILES.EXTENSIONS.PNG}createItemBox(e,t,i,r){let n=r.cache.html.get(t);return i.gameEngine.parseTemplate(n,{key:e.key,label:e.label,description:e.description,id:e.getInventoryId(),qty:e.qty,usable:this.isUsable(e)?this.getUsableContent(e,i,r):"",equipment:this.isEquipment(e)?this.getEquipContent(e,i,r):""})}isEquipment(e){return e.isType(g.TYPES.EQUIPMENT)||e.isType(g.TYPES.SINGLE_EQUIPMENT)}isEquipped(e){return this.isEquipment(e)&&!0===e.equipped}isUsable(e){return e.isType(g.TYPES.USABLE)||e.isType(g.TYPES.SINGLE_USABLE)}sortGroups(e){return Object.keys(e).sort((t,i)=>e[t].sort>e[i].sort?1:-1)}createGroupBox(e,t,i){let r=i.cache.html.get("inventoryGroup");return t.gameEngine.parseTemplate(r,{key:e.key,label:e.label,description:e.description,fileName:e.files_name})}setupButtonsActions(e,t,i,r){let n=r.gameManager.gameDom,s=e.querySelector("#item-"+t+" .image-container img");if(!s)return v.error(["Missing image element.","#item-"+t]),!1;s.addEventListener("click",()=>{let i=e.querySelector("#item-"+t+" .item-data-container"),r=!1;"block"!==i.style.display&&(r=!0),e.querySelectorAll(".item-box .image-container img").forEach(function(e){e.style.border="none"}),e.querySelectorAll(".item-data-container").forEach(function(e){e.style.display="none"}),r&&(s.style.border="1px solid #fff",i.style.display="block")});let a=e.querySelector("#item-trash-"+t+" img");return a?(a.addEventListener("click",()=>{e.querySelector("#trash-confirm-"+t).style.display="block"}),e.querySelector("#trash-cancel-"+t).addEventListener("click",()=>{e.querySelector("#trash-confirm-"+t).style.display="none"}),e.querySelector("#trash-confirmed-"+t).addEventListener("click",()=>{let e={idx:t,act:f.ACTIONS.REMOVE};r.gameManager.activeRoomEvents.send(e)}),this.isUsable(i)&&n.getElement("#item-use-"+t).addEventListener("click",this.clickedBox.bind(this,t,f.ACTIONS.USE,r)),this.isEquipment(i)&&n.getElement("#item-equip-"+t).addEventListener("click",this.clickedBox.bind(this,t,f.ACTIONS.EQUIP,r)),!0):(v.error(["Missing button.",a]),!1)}clickedBox(e,t,i){i.gameManager.activeRoomEvents.send({act:t,idx:e})}getUsableContent(e,t,i){let r=i.cache.html.get("inventoryItemUse");return t.gameEngine.parseTemplate(r,{id:e.getInventoryId()})}getEquipContent(e,t,i){let r=i.cache.html.get("inventoryItemEquip");return t.gameEngine.parseTemplate(r,{id:e.getInventoryId(),equipStatus:e.equipped?"equipped":"unequipped"})}getGroupById(e,t){let i=Object.keys(t);if(0===i.length)return!1;for(let r of i)if(t[r].id===e)return t[r]}}},{"3dbcaecc16a8d7f6":"9Layr","1b246d1f86d4b52c":"hpR6b",e34196023b491a43:"7cJJ7","4891eeec00749c11":"24nGR",c8568ca446361435:"azIQk",f9e95a5e7b3e4385:"9RjlI","9a0084a090b55a0d":"hr6VG","3a8304cb1916a776":"62bet","26049dfb393d7854":"etnPG","5532f77de2576b30":"k7KWv","75f9030ce424b588":"hMNcT","28a98a79420c2754":"z0nmL",ddf286423098af38:"ijd9L"}],"9Layr":[function(e,t,i,r){let{UiFactory:n}=e("77ab18c1eefc2684"),{InventoryConst:s}=e("55720af454786e61");t.exports.InventoryUi=class extends n{createUi(){0<this.gameManager.initialGameData.availableItems&&this.create("inventory",5,!0,!0,null,()=>{this.inventoryVisibility("inventory")}),0<this.gameManager.initialGameData.equipmentGroups&&this.create("equipment",4,!0,!0,null,()=>{this.inventoryVisibility("inventory")})}inventoryVisibility(e){let t="#"+s[e+"_ITEMS"];for(let e of this.gameManager.gameDom.getElements(t+" .item-box .image-container img"))e.style.border="none";for(let e of this.gameManager.gameDom.getElements(t+" .item-data-container"))e.style.border="none"}}},{"77ab18c1eefc2684":"fTnih","55720af454786e61":"k7KWv"}],fTnih:[function(e,t,i,r){let{GameConst:n}=e("33c9292d731c7911");t.exports.UiFactory=class{constructor(e){this.uiScene=e,this.gameManager=this.uiScene.gameManager}create(e,t,i,r,s,a){let{uiX:o,uiY:h}=this.uiScene.getUiConfig(e),c=this.uiScene.add.dom(o,h).createFromCache(e),l=c.getChildByProperty("id",e+n.UI_OPEN),d=c.getChildByProperty("id",e+n.UI_CLOSE);l?.addEventListener("click",()=>{let r=c.getChildByProperty("id",e+"-ui");i&&(r&&(r.style.display="block"),l.style.display="none",c.setDepth(t)),s&&"function"==typeof s&&s(),this.gameManager.events.emit("reldens.openUI",{ui:this,openButton:l,dialogBox:c,dialogContainer:r,uiScene:this.uiScene})}),d?.addEventListener("click",()=>{let t=c.getChildByProperty("id",e+"-ui");r&&(t&&(t.style.display="none"),c.setDepth(1),l&&(l.style.display="block")),a&&"function"==typeof a&&a(),this.gameManager.events.emit("reldens.closeUI",{ui:this,closeButton:d,openButton:l,dialogBox:c,dialogContainer:t,uiScene:this.uiScene})}),this.uiScene.elementsUi[e]=c}}},{"33c9292d731c7911":"z0nmL"}],k7KWv:[function(e,t,i,r){t.exports.InventoryConst={INVENTORY_ITEMS:"inventory-items",INVENTORY_OPEN:"inventory-open",INVENTORY_CLOSE:"inventory-close",EQUIPMENT_ITEMS:"equipment-items",EQUIPMENT_CLOSE:"equipment-close",EQUIPMENT_OPEN:"equipment-open",ANIMATION_KEY_PREFIX:"aK_",GROUP_BUCKET:"/assets/custom/groups",ACTIONS:{PREFIX:"ivp",REMOVE:"ivpRm",USE:"ivpUse",EQUIP:"ivpEqi",TRADE_START:"ivptStart",TRADE_ACCEPTED:"ivptAccepted",TRADE_SHOW:"ivptShow",TRADE_ACTION:"ivptAction"},MESSAGE:{DATA_VALUES:{NAMESPACE:"items"}}}},{}],hpR6b:[function(e,t,i,r){let{InventoryConst:n}=e("8882a4643448fce8"),{GameConst:s}=e("2bfdc54146457a66"),{Receiver:a}=e("c0cd661b4f31ab90"),{ErrorManager:o,Logger:h,sc:c}=e("86cd80d57b7740fd");t.exports.InventoryReceiver=class extends a{constructor(e){c.hasOwn(e,"gameManager")||o.error("InventoryReceiver gameManager not specified."),super(e),this.gameManager=e.gameManager,this.itemSprites={},this.itemsAnimations={}}onExecuting(e){let t=e.item;if(!c.hasOwn(t,"animationData"))return h.warning("Item does not contain animation data.",e),!1;let i=n.ANIMATION_KEY_PREFIX+t.key,r=this.gameManager.getActiveScene();if(this.itemSprites[i]&&this.itemSprites[i].anims&&r.anims.get(i))return h.debug("Animation already exists, playing: "+i),this.playSpriteAnimation(i,t),!1;r.load.spritesheet(i,"/assets/custom/sprites/"+t.key+s.FILES.EXTENSIONS.PNG,{frameWidth:t.animationData.frameWidth||64,frameHeight:t.animationData.frameHeight||64}).on("loaderror",e=>{h.error("Sprite load error: "+i,e)}),r.load.on("complete",()=>{h.debug("Scene load complete, playing: "+i),this.createItemSprites(i,t,e,r)}),r.load.start()}createItemSprites(e,t,i,r){let n=this.extractTargetId(t,i,r);if(!n)return h.error("Target ID not found."),!1;let s=c.get(r.player.players,n,!1);if(!s)return h.error("Player sprite not found by target ID."),!1;let a=r.anims.get(e);a||(h.debug("Creating new animation on scene: "+e),a=r.anims.create({key:e,frames:r.anims.generateFrameNumbers(e,{start:t.animationData.start||0,end:t.animationData.end||1}),frameRate:c.get(t.animationData,"frameRate",r.configuredFrameRate),repeat:t.animationData.repeat||3,hideOnComplete:c.get(t.animationData,"hide",!0),showOnStart:c.get(t.animationData,"showOnStart",!0)})),this.itemsAnimations[e]=a;let o=c.get(t.animationData,"fixedX",t.animationData.usePlayerPosition?s.x:0),l=c.get(t.animationData,"fixedY",t.animationData.usePlayerPosition?s.y:0);this.itemSprites[e]=r.physics.add.sprite(o,l,e),this.itemSprites[e]=this.itemSprites[e].setDepth(9e4),this.itemSprites[e].depthByPlayer="above",t.animationData.followPlayer&&(s.moveSprites[e]=this.itemSprites[e]),h.debug("Playing sprite: "+e),this.playSpriteAnimation(e,t).on("animationcomplete",()=>{t.animationData.destroyOnComplete&&this.destroyAnimation(t,e,s)})}playSpriteAnimation(e,t){c.get(t.animationData,"closeInventoryOnUse",!1)&&this.gameManager.gameDom.getElement("#inventory-close")?.click();let i=this.itemSprites[e].anims;return i?(i.visible=!0,i.play(e,c.get(t.animationData,"ignoreIfPlaying",!0))):(h.error("Sprite animation not found: "+e),!1)}destroyAnimation(e,t,i){this.itemSprites[t].destroy(),delete this.itemSprites[t],delete this.itemsAnimations[t],e.animationData.followPlayer&&delete i.moveSprites[t],h.debug("Animation and sprite destroyed: "+t)}extractTargetId(e,t,i){return e.animationData.startsOnTarget&&t.target?.playerId?t.target.playerId:i.player?.playerId||!1}}},{"8882a4643448fce8":"k7KWv","2bfdc54146457a66":"z0nmL",c0cd661b4f31ab90:"hMNcT","86cd80d57b7740fd":"ijd9L"}],"7cJJ7":[function(e,t,i,r){let{InventoryConst:n}=e("6fd8a45050899827"),{GameConst:s}=e("27ccb472a3005f7d"),{Logger:a,sc:o}=e("b754ab6e7b18af41");t.exports.TradeTargetAction=class{showTargetExchangeAction(e,t,i,r){if(s.TYPE_PLAYER!==t.type||e.getCurrentPlayer().playerId===t.id)return!1;let h=e.gameEngine.uiScene;if(!1===o.get(h,"uiTarget",!1))return!1;let c=h.cache.html.get("inventoryTradeStart");if(!c)return a.critical('Template "inventoryTradeStart" not found.'),!1;e.gameDom.appendToElement("#target-container",e.gameEngine.parseTemplate(c,{playerName:r,playerId:t.id}));let l=e.gameDom.getElement(".start-trade-"+t.id+" button");return l?(l.addEventListener("click",()=>{let i={act:n.ACTIONS.TRADE_START,id:t.id};e.activeRoomEvents.send(i)}),!0):(a.critical('Trade start button not found for selector: ".start-trade-'+t.id+' button"'),!1)}}},{"6fd8a45050899827":"k7KWv","27ccb472a3005f7d":"z0nmL",b754ab6e7b18af41:"ijd9L"}],"24nGR":[function(e,t,i,r){let{TradeMessageHandler:n}=e("f964b12ccb83d2b4"),{Logger:s,sc:a}=e("8a7eb9c3e6d9d186");t.exports.TradeMessageListener=class{async executeClientMessageActions(e){let t=a.get(e,"message",!1);if(!t)return s.error("Missing message data on TradeMessageListener.",e),!1;let i=a.get(e,"roomEvents",!1);return i?(new n({roomEvents:i,message:t}).updateContents(),!0):(s.error("Missing RoomEvents on TradeMessageListener.",e),!1)}}},{f964b12ccb83d2b4:"clPOn","8a7eb9c3e6d9d186":"ijd9L"}],clPOn:[function(e,t,i,r){let{ErrorManager:n,Logger:s,sc:a}=e("779d25f0124f02f2"),{InventoryConst:o}=e("58803c0e08c63617"),{ObjectsConst:h}=e("3ddb9dce645de8c3"),{UserInterface:c}=e("c49942f179cbbc0a");t.exports.TradeMessageHandler=class{constructor(e){this.roomEvents=a.get(e,"roomEvents",!1),this.message=a.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.uiScene=this.gameManager?.gameEngine?.uiScene,this.itemsManager=this.gameManager?.inventory?.manager,this.validate()}validate(){this.roomEvents||n.error("Missing RoomEvents."),this.message||n.error("Missing message."),this.gameManager||n.error("Missing GameManager."),this.uiScene||n.error("Missing UiScene."),this.itemsManager||n.error("Missing ItemsManager.")}updateContents(){return o.ACTIONS.TRADE_START===this.message.act?this.showTradeRequest():o.ACTIONS.TRADE_SHOW===this.message.act&&this.showTradeBox()}showTradeRequest(){let e="trade"+this.message.id;return this.createTradeUi(e),this.roomEvents.initUi({id:e,title:this.gameManager.config.getWithoutLogs("client/trade/titles/tradeRequestFromLabel","Trade request from:"),content:this.message.from,options:this.gameManager.config.get("client/ui/options/acceptOrDecline"),overrideSendOptions:{act:o.ACTIONS.TRADE_ACCEPTED,id:this.message.id}}),this.gameDom.getElement("#opt-2-"+e)?.addEventListener("click",()=>{this.gameDom.getElement("#box-close-"+e)?.click()}),!0}showTradeBox(){let e="trade"+this.message.id;this.createTradeUi(e),this.roomEvents.initUi({id:e,title:this.gameManager.services.translator.t("items.tradeWith",{playerName:this.message.with}),content:"",options:{}});let t=this.gameManager.gameDom.getElement("#box-"+e+" .box-content");if(!t)return s.error('Missing container: "#box-'+e+' .box-content".'),!1;if(!0===this.message.isTradeEnd)return this.gameDom.getElement("#box-close-trade"+this.message.id)?.click(),!0;let i=a.get(this.message,"items",!1),r=a.get(this.message,"traderItemsData",{}),n=a.get(this.message,"exchangeData",{}),o=a.get(this.message,"playerToExchangeKey",{}),h="A"===o?"B":"A";return this.updateItemsList(i,t,n[h]),this.updateMyExchangeData(n[h]||{},i,h),this.updateTraderExchangeData(n[o]||{},r,o),!0}createTradeUi(e){let t=a.get(this.roomEvents.tradeUi,e);return t||(this.roomEvents.tradeUi[e]=new c(this.gameManager,{id:e,type:"trade"},"/assets/html/dialog-box.html","trade"),this.roomEvents.tradeUi[e].createUiElement(this.uiScene,"trade")),t}updateItemsList(e,t,i){if(!e)return;let r="",n={};for(let t of Object.keys(e)){let s=e[t],o=Object.assign({manager:this.itemsManager},s,{uid:t}),h=a.get(this.itemsManager.itemClasses,o.key,this.itemsManager.types.classByTypeId(o.type));n[t]=new h(o),n[t].quantityDisplay=1,n[t].quantityMaxDisplay=Math.max(n[t].qty_limit,s.qty),n[t].tradeAction="trade",r+=this.createTradeItemBox(n[t],a.get(i,n[t].uid,!1))}t.innerHTML=this.createTradeContainer(r),this.activateItemsBoxActions(n),this.activateConfirmButtonAction()}activateConfirmButtonAction(){let e=this.gameManager.gameDom.getElement(".confirm-"+this.message.id);e?.addEventListener("click",()=>{this.gameManager.activeRoomEvents.send({act:o.ACTIONS.TRADE_ACTION,id:this.message.id,value:this.message.id,sub:h.TRADE_ACTIONS.CONFIRM})});let t=this.gameManager.gameDom.getElement(".disconfirm-"+this.message.id);t?.addEventListener("click",()=>{this.gameManager.activeRoomEvents.send({act:o.ACTIONS.TRADE_ACTION,id:this.message.id,value:this.message.id,sub:h.TRADE_ACTIONS.DISCONFIRM})});let i=this.gameManager.gameDom.getElement(".cancel-"+this.message.id);i?.addEventListener("click",()=>{this.gameDom.getElement("#box-close-trade"+this.message.id)?.click()})}updateMyExchangeData(e,t,i){if(0===Object.keys(e).length)return!1;let r=this.createConfirmItemsBox(e,t),n=this.gameDom.getElement(".trade-items-boxes .trade-player-col.trade-col-2");return n?(n.innerHTML=r,this.assignRemoveActions(e,t),!0):(s.error('Missing "'+i+'" items container.'),!1)}updateTraderExchangeData(e,t,i){if(0===Object.keys(e).length)return!1;let r=this.createReceivingItemsBox(e,t),n=this.gameDom.getElement(".trade-items-boxes .trade-player-col.trade-col-3");return n?(n.innerHTML=r,!0):(s.error('Missing "'+i+'" items container.'),!1)}createConfirmItemsBox(e,t){let i=Object.keys(e);if(0===i.length)return s.info("Undefined exchange items on confirmation trade-message-handler.",{message:this.message}),"";let r="",n=this.uiScene.cache.html.get("inventoryTradeItem");if(!n)return s.error('Missing template "inventoryTradeItem".'),"";for(let s of i){let i=e[s],a=t[s];r+=this.gameManager.gameEngine.parseTemplate(n,{key:a.key,label:a.label,description:a.description,id:s,qty:a.qty,hiddenClass:"",tradeAction:this.createTradeActionRemove(a),tradeActionKey:this.message.id,tradeQuantityContent:i})}return r}createReceivingItemsBox(e,t){let i=Object.keys(e);if(0===i.length)return s.info("Undefined exchange items on receive trade-message-handler.",{message:this.message}),"";let r="",n=this.uiScene.cache.html.get("inventoryTradeItem");if(!n)return s.error('Missing template "inventoryTradeItem".'),"";for(let s of i){let i=e[s],a=t[s];r+=this.gameManager.gameEngine.parseTemplate(n,{key:a.key,label:a.label,description:a.description,id:s,qty:a.qty,hiddenClass:"",tradeAction:"",tradeActionKey:this.message.id,tradeQuantityContent:i})}return r}assignRemoveActions(e,t){let i=Object.keys(e);if(0===i.length)return s.info("Undefined exchange items on remove trade-message-handler.",{message:this.message}),!1;for(let e of i){let i=".pushed-to-trade .trade-item-"+e,r=this.gameDom.getElement(i);if(!r){s.error('Assign trade item "'+e+'" container not found.');continue}let n=this.gameDom.getElement(".pushed-to-trade .trade-item-"+e+" .trade-action-remove");if(!n){s.error('Assign trade item "'+e+'" remove button not found.');continue}let a=t[e];n.addEventListener("click",()=>{r.classList.remove("hidden");let t={act:o.ACTIONS.TRADE_ACTION,id:this.message.id,value:"remove",itemId:e,itemKey:a.key};t[h.TRADE_ACTIONS.SUB_ACTION]=h.TRADE_ACTIONS.REMOVE,this.gameManager.activeRoomEvents.send(t)})}return!0}createTradeContainer(e){let t=this.uiScene.cache.html.get("inventoryTradePlayerContainer");if(!t)return s.error('Missing template "inventoryTradeContainer".'),"";let i=h.TRADE_ACTIONS_FUNCTION_NAME,r={tradeActionKey:this.message.id,confirmLabel:this.gameManager.config.getWithoutLogs("client/trade/titles/confirmLabel",i.CONFIRM),disconfirmLabel:this.gameManager.config.getWithoutLogs("client/trade/titles/disconfirmLabel",i.DISCONFIRM),cancelLabel:this.gameManager.config.getWithoutLogs("client/trade/titles/cancelLabel",i.CANCEL),myItems:e,myItemsTitle:this.gameManager.config.getWithoutLogs("client/trade/titles/myItems","My Items:"),pushedToTradeTitle:this.gameManager.config.getWithoutLogs("client/trade/titles/pushedToTradeTitle","Sending:"),gotFromTradeTitle:this.gameManager.config.getWithoutLogs("client/trade/titles/gotFromTradeTitle","Receiving:"),playerConfirmedLabel:this.playerConfirmedLabel()};return this.gameManager.gameEngine.parseTemplate(t,r)}playerConfirmedLabel(){return this.message.playerConfirmed?this.gameManager.config.getWithoutLogs("client/trade/titles/playerConfirmedLabel","%playerName CONFIRMED").replace("%playerName",this.message.with):""}createTradeItemBox(e,t){let i=this.uiScene.cache.html.get("inventoryTradeItem");if(!i)return s.error('Missing template "inventoryTradeItem".'),"";let r=this.uiScene.cache.html.get("inventoryTradeItemQuantity");if(!r)return s.error('Missing template "inventoryTradeItemQuantity".'),"";let n=t||0;return this.gameManager.gameEngine.parseTemplate(i,{key:e.key,label:e.label,description:e.description,id:e.getInventoryId(),qty:e.qty,hiddenClass:0<n&&e.qty===n?" hidden":"",tradeAction:this.createTradeActionContent(e),tradeActionKey:"to-be-"+e.tradeAction,tradeQuantityContent:this.gameManager.gameEngine.parseTemplate(r,{quantityDisplay:e.quantityDisplay||1,quantityMaxDisplay:0<e.quantityMaxDisplay?'max="'+e.quantityMaxDisplay+'"':""})})}createTradeActionContent(e,t){let i=this.uiScene.cache.html.get("inventoryTradeAction");return i?this.gameManager.gameEngine.parseTemplate(i,{key:e.key,id:e.getInventoryId(),tradeAction:t||a.get(e,"tradeAction","")}):(s.error('Missing template "inventoryTradeAction".'),"")}createTradeActionRemove(e){let t=this.uiScene.cache.html.get("inventoryTradeActionRemove");return t?this.gameManager.gameEngine.parseTemplate(t,{key:e.key,id:e.uid,tradeAction:"remove"}):(s.error('Missing template "inventoryTradeActionRemove".'),"")}activateItemsBoxActions(e){for(let t of Object.keys(e)){let i=e[t],r=".trade-item-to-be-"+i.tradeAction+".trade-item-"+i.uid+" .trade-action-"+i.tradeAction+" button",n=this.gameDom.getElement(r);if(!n){s.error('Activate trade item "'+i.uid+'" action button not found.');continue}n.addEventListener("click",()=>{let e=this.gameDom.getElement(".trade-item-"+i.getInventoryId()+" .item-qty input"),t=e?.value||1,r={act:o.ACTIONS.TRADE_ACTION,id:this.message.id,value:i.tradeAction,itemId:i.getInventoryId(),itemKey:i.key,qty:Number(t)};r[h.TRADE_ACTIONS.SUB_ACTION]=h.TRADE_ACTIONS.ADD,this.gameManager.activeRoomEvents.send(r)})}}}},{"779d25f0124f02f2":"ijd9L","58803c0e08c63617":"k7KWv","3ddb9dce645de8c3":"6mDqg",c49942f179cbbc0a:"azIQk"}],hr6VG:[function(e,t,i,r){t.exports.TemplatesHandler=class{static preloadTemplates(e){let t="/assets/features/inventory/templates/";e.load.html("inventory",t+"ui-inventory.html"),e.load.html("equipment",t+"ui-equipment.html"),e.load.html("inventoryItem",t+"item.html"),e.load.html("inventoryItemUse",t+"usable.html"),e.load.html("inventoryItemEquip",t+"equip.html"),e.load.html("inventoryGroup",t+"group.html"),e.load.html("inventoryTradeContainer",t+"trade-container.html"),e.load.html("inventoryTradePlayerContainer",t+"trade-player-container.html"),e.load.html("inventoryTradeRequirements",t+"trade-requirements.html"),e.load.html("inventoryTradeRewards",t+"trade-rewards.html"),e.load.html("inventoryTradeAction",t+"trade-action.html"),e.load.html("inventoryTradeActionRemove",t+"trade-action-remove.html"),e.load.html("inventoryTradeItem",t+"trade-item.html"),e.load.html("inventoryTradeItemQuantity",t+"trade-item-quantity.html"),e.load.html("inventoryTradeStart",t+"trade-start.html"),e.load.html("inventoryTradeAccept",t+"trade-accept.html")}}},{}],etnPG:[function(e,t,i,r){t.exports={items:{undefinedItem:"Add item error, undefined item.",undefinedMethodInventoryId:"Add item error, undefined getInventoryId.",undefinedItemKey:"Add item error, undefined item key.",invalidItemInstance:"Invalid item instance.",lockedForAddItem:"Inventory locked, cannot add item: %itemUid",maxTotalReachedForAddItem:"Cannot add item, max total reached.",itemExistsForAddItem:"Cannot add item, item already exists: %itemUid",itemLimitExceededForAddItem:"Cannot add item, item qty limit exceeded.",addItemsError:'Cannot add item "%itemUid".',lockedForSetItem:"Inventory locked, cannot set item: %itemUid.",lockedForRemoveItem:"Inventory locked, cannot remove item: %itemUid.",keyNotFound:"Cannot remove item, key not found: %itemUid.",lockedForModifyItemQty:"Inventory locked, cannot modify item qty: %itemUid.",undefinedItemKeyForOperation:'Cannot "%operation" item qty, undefined item key: %itemUid.',qtyNotANumber:'Cannot "%operation" item qty, quantity is not a number: %qty.',itemQtyLimitExceeded:'Cannot "%operation" item qty, item qty limit exceeded: %qty > %limitPerItem.',lockedForSetItems:"Inventory locked, cannot set items.",tradeWith:"Trading with %playerName",exchange:{missingConfirmation:"Missing confirmation.",invalidPushedQuantity:"Invalid item pushed quantity (%qty), available: %pushedItemQty.",invalidQuantity:"Invalid item quantity 0.",invalidExchange:'Inventories "FROM" and "TO" are the same, exchange cancelled.',decreaseQuantity:"Exchange inventory decrease error.",itemAdd:"Exchange add inventory result error."},requirements:{itemNotPresent:'Required item "%requiredItemKey" is not present.',quantityNotAvailable:'Required item "%requiredItemKey" quantity %totalRequiredQuantity is not available.',itemNotPushed:'Required item "%requiredItemKey" was not pushed for exchange.',itemQuantityNotPushed:'Required item "%requiredItemKey" quantity %totalRequiredQuantity was not pushed for exchange.',itemDoesNotExists:'Requirement error, item "%itemUid" does not exits on inventory.',itemAdd:"Requirement add item error."},reward:{doesNotExists:'Reward error, item "%itemUid" does not exits.',missingItem:'Reward error, item "%itemUid" does not exits.',itemNotPresent:'Reward item "%rewardItemKey" is not present on inventory.',quantityNotAvailable:"Reward item %rewardItemKey reward quantity (%rewardQuantity) is not available.",missingPushed:'Missing pushed for exchange item "%itemUid".',getItemDoesNotExists:'Reward error, item "%itemUid" does not exits on inventory.',processItem:'Process item reward error, item "%itemUid".',processInventory:"Rewards process inventory error.",addItems:"Rewards error on add items: %itemsKeys.",quantityOverload:"Reward quantity (%rewardQuantityTotal) is bigger than the available in the inventory (%rewardInventoryItemQty)."},equipment:{modifiersApply:"Cannot apply modifiers the item is not equipped: %itemUid",modifiersRevert:"Cannot revert modifiers the item is not equipped: %itemUid"}}}},{}],l8IOk:[function(e,t,i,r){let{SkillsUi:n}=e("6b2d3727d1d70b78"),{PluginInterface:s}=e("c34bb8f0c81f8738"),{PlayerSelector:a}=e("566ebfe7409d2a3a"),{PreloaderHandler:o}=e("7af81ec0e9446267"),{MessagesHandler:h}=e("699da6696693061c"),{GameManagerEnricher:c}=e("c162e687344f571d"),l=e("37b783bb3d5ca68"),{TranslationsMapper:d}=e("f892bc1afce6c5ea"),{ActionsConst:u}=e("dbdea295dce66b04"),{Logger:f,sc:p}=e("1ad70aa0a704e98c");t.exports.ActionsPlugin=class extends s{setup(e){this.gameManager=p.get(e,"gameManager",!1),this.gameManager||f.error("Game Manager undefined in ActionsPlugin."),this.events=p.get(e,"events",!1),this.events||f.error("EventsManager undefined in ActionsPlugin."),this.playerSelector=new a(e),this.preloaderHandler=new o(e),this.setTranslations(),this.listenEvents()}setTranslations(){if(!this.gameManager)return!1;d.forConfig(this.gameManager.config.client,l,u.MESSAGE.DATA_VALUES)}listenEvents(){if(!this.events||!this.gameManager)return!1;this.events.on("reldens.preloadUiScene",e=>{this.preloaderHandler.loadContents(e)}),this.events.on("reldens.createPreload",e=>{this.preloaderHandler.createAnimations(e)}),this.events.on("reldens.createUiScene",e=>{this.uiManager=new n(e),this.uiManager.createUi()}),this.events.on("reldens.beforeCreateEngine",e=>{this.playerSelector.populateClassesSelector(p.get(e,"classesData",{}),e.gameConfig.client.players,e.player)}),this.events.on("reldens.activateRoom",e=>{e.onMessage("*",e=>{h.processOrQueueMessage(e,this.gameManager)})}),this.events.on("reldens.playersOnAddReady",e=>{c.withReceiver(e.player,e.roomEvents,this.gameManager)})}}},{"6b2d3727d1d70b78":"lbfcZ",c34bb8f0c81f8738:"9RjlI","566ebfe7409d2a3a":"yLnC1","7af81ec0e9446267":"dDgPg","699da6696693061c":"erf5N",c162e687344f571d:"e5OqB","37b783bb3d5ca68":"1e7Ni",f892bc1afce6c5ea:"62bet",dbdea295dce66b04:"ja3Hr","1ad70aa0a704e98c":"ijd9L"}],lbfcZ:[function(e,t,i,r){let{ActionsConst:n}=e("fcb0bd426e0a1381");t.exports.SkillsUi=class{constructor(e){this.uiScene=e,this.gameManager=this.uiScene.gameManager,this.defaultAction=this.gameManager.config.get("client/ui/controls/defaultActionKey")}createUi(){let e=n.SELECTORS.UI_PLAYER_EXTRAS;this.appendToUiContainer(e,"skillsClassPath"),this.appendToUiContainer(e,"skillsLevel"),this.appendToUiContainer(e,"skillsExperience",{experienceLabel:this.gameManager.services.translator.t(n.SNIPPETS.EXPERIENCE_LABEL)}),this.createUiBox("skills",7)}appendSkills(e){let t=Object.keys(e);if(0===t.length)return!1;for(let i of t){let t=e[i];t!==this.defaultAction&&this.createSkillBox(t)}}appendToUiContainer(e,t,i={}){let r=this.uiScene.cache.html.get(t);0<Object.keys(i).length&&(r=this.gameManager.gameEngine.parseTemplate(r,i)),this.gameManager.gameDom.appendToElement(e,r)}createUiBox(e,t){let{uiX:i,uiY:r}=this.uiScene.getUiConfig(e),n=this.uiScene.add.dom(i,r).createFromCache(e);n.setDepth(t),this.uiScene.elementsUi[e]=n}createSkillBox(e){let t=this.parseSkillTemplate(e);this.gameManager.gameDom.appendToElement(n.SELECTORS.SKILLS_CONTAINER,t),this.uiScene.setupActionButtonInBox(e,this.uiScene.getUiElement("skills"))}parseSkillTemplate(e){let t=this.uiScene.cache.html.get("skillBox");return this.gameManager.gameEngine.parseTemplate(t,{key:e,skillName:e})}}},{fcb0bd426e0a1381:"ja3Hr"}],yLnC1:[function(e,t,i,r){let{ActionsConst:n}=e("b243e92bb3fe291b"),{GameConst:s}=e("99fe71ca25218501"),{Logger:a,sc:o}=e("350db309ac69e57e");t.exports.PlayerSelector=class{constructor(e){this.gameManager=o.get(e,"gameManager",!1),this.gameManager||a.error("Game Manager undefined in ActionsPlugin PlayerSelector."),this.events=o.get(e,"events",!1),this.events||a.error("EventsManager undefined in ActionsPlugin PlayerSelector."),this.gameDom=this.gameManager.gameDom}populateClassesSelector(e,t,i){if(!o.isObject(e)||0===Object.keys(e).length)return a.error("Classes not defined, can not populate the classes selector."),this.gameDom.getElement(".player-selection-form-errors")?.append(this.gameManager.services?.translator.t("game.errors.missingClasses")),!1;let r=o.get(t,"multiplePlayers",!1);if((!r||!r.enabled)&&i)return!1;let s=this.gameDom.getElement(n.SELECTORS.PLAYER_CREATION_ADDITIONAL_INFO);if(!s)return!1;this.gameDom.getElement(n.SELECTORS.PLAYER_CREATE_FORM)?.classList.remove("hidden");let h=this.gameDom.createElement("div");h.id="class-path-selector-box",h.classList.add("input-box");let c=this.gameDom.createElement("label"),l="class-path-select";c.htmlFor=l,c.innerText=this.gameManager.services.translator.t(n.SNIPPETS.SELECT_CLASS_PATH);let d=this.gameDom.createElement("select");for(let t of(d.id=l,d.name="class_path_select",Object.keys(e))){let i=new Option(e[t].label,t);i.dataset.key=e[t].key,d.append(i)}if(h.append(c),h.append(d),this.gameManager.config.getWithoutLogs("client/players/multiplePlayers/showAvatar",!0)){let e=this.gameDom.createElement("div");e.className="avatar-container",this.appendAvatarOnSelector(d,e,t),h.append(e)}return s.append(h),!0}appendAvatarOnSelector(e,t,i){let r=this.gameDom.createElement("div"),n=e.options[e.selectedIndex].dataset.key;r.classList.add("class-path-select-avatar"),r.style.backgroundImage=`url('/assets/custom/sprites/${n}${s.FILES.EXTENSIONS.PNG}')`;let a=i.size.width+"px";r.style.backgroundPositionX="-"+a,r.style.width=a,r.style.height=i.size.height+"px",e.addEventListener("change",()=>{let t=e.options[e.selectedIndex].dataset.key;r.style.backgroundImage=`url('/assets/custom/sprites/${t}${s.FILES.EXTENSIONS.PNG}')`}),t.append(r)}}},{b243e92bb3fe291b:"ja3Hr","99fe71ca25218501":"z0nmL","350db309ac69e57e":"ijd9L"}],dDgPg:[function(e,t,i,r){let{GameConst:n}=e("1d3a9c826831f334"),{Logger:s,sc:a}=e("282e615b5cb3f89e");t.exports.PreloaderHandler=class{constructor(e){this.gameManager=a.get(e,"gameManager",!1),this.gameManager||s.error("Game Manager undefined in ActionsPlugin PreloaderHandler."),this.events=a.get(e,"events",!1),this.events||s.error("EventsManager undefined in ActionsPlugin PreloaderHandler."),this.setProperties(e)}setProperties(e){if(!this.gameManager)return!1;this.gameDom=this.gameManager.gameDom,this.initialGameData=this.gameManager.initialGameData,this.levelsAnimConfig=this.gameManager.config.get("client/levels/animations"),this.skillsAnimConfig=this.gameManager.config.get("client/skills/animations"),this.assetsCustomActionsSpritesPath=a.get(e,"assetsCustomActionsSpritesPath","assets/custom/actions/sprites/"),this.gameManager.loadedAssets||(this.gameManager.loadedAssets={}),this.gameManager.createdAnimations||(this.gameManager.createdAnimations={})}loadContents(e){e.load.html("skillsClassPath","/assets/features/skills/templates/ui-class-path.html"),e.load.html("skillsLevel","/assets/features/skills/templates/ui-level.html"),e.load.html("skillsExperience","/assets/features/skills/templates/ui-experience.html"),e.load.html("skills","/assets/features/skills/templates/ui-skills.html"),e.load.html("skillBox","/assets/features/skills/templates/ui-skill-box.html"),e.load.html("actionBox","/assets/html/ui-action-box.html"),this.preloadClassPaths(e),this.loopAnimationsAnd(this.levelsAnimConfig,"preload",e),this.loopAnimationsAnd(this.skillsAnimConfig,"preload",e)}preloadClassPaths(e){let t=a.get(this.initialGameData,"classesData",!1);if(!t)return!1;for(let i of Object.keys(t)){let r=t[i].key;e.load.spritesheet(r,"/assets/custom/sprites/"+r+n.FILES.EXTENSIONS.PNG,e.playerSpriteSize).on("filecomplete",async e=>{this.gameManager.loadedAssets[e]=e})}}createAnimations(e){let t=this.levelsAnimConfig;this.loopAnimationsAnd(t,"create",e);let i=this.skillsAnimConfig;this.loopAnimationsAnd(i,"create",e),this.createAvatarsAnimations(e)}createAvatarsAnimations(e){let t=a.get(this.initialGameData,"classesData",!1);if(!t)return s.debug("Classes data not found. Fallback to player avatar."),!1;for(let i of(this.gameManager.mappedAvatars||(this.gameManager.mappedAvatars={}),s.debug({availableClassesData:t}),Object.keys(t))){let r=t[i].key;this.gameManager.loadedAssets[r]||(r=n.IMAGE_PLAYER,s.info('Avatar for class path "'+r+'" not found in assets. Fallback to player avatar.')),this.gameManager.mappedAvatars[r]=r,e.createPlayerAnimations(r)}return this.gameManager.mappedAvatars}loopAnimationsAnd(e,t,i){if(!e)return s.warning("Animations not found.",e),!1;for(let r of Object.keys(e)){let n=e[r];if(!n.animationData.enabled){s.debug('Animation "'+r+'" not enabled, skipping.',n);continue}s.debug({[t+"Animation"]:n}),this[t+"Animation"](n,i)}}preloadAnimation(e,t){a.hasOwn(e.animationData,["type","img"])&&n.ANIMATIONS_TYPE.SPRITESHEET===e.animationData.type&&this.preloadAnimationsInDirections(e,t),e.classKey&&a.isFunction(e.classKey.prepareAnimation)&&e.classKey.prepareAnimation({data:e,uiScene:t,pack:this})}preloadAnimationsInDirections(e,t){let i=a.get(e.animationData,"dir",0);0===i?t.load.spritesheet(this.getAnimationKey(e),this.assetsCustomActionsSpritesPath+e.animationData.img+n.FILES.EXTENSIONS.PNG,e.animationData):((1===i||2===i)&&(this.preloadSpriteInDirection(t,e,n.UP),this.preloadSpriteInDirection(t,e,n.DOWN)),(1===i||3===i)&&(this.preloadSpriteInDirection(t,e,n.LEFT),this.preloadSpriteInDirection(t,e,n.RIGHT)))}preloadSpriteInDirection(e,t,i){e.load.spritesheet(this.getAnimationKey(t,i),this.assetsCustomActionsSpritesPath+t.animationData.img+"_"+i+n.FILES.EXTENSIONS.PNG,t.animationData)}createAnimation(e,t){if(a.hasOwn(e.animationData,["type","img"])&&e.animationData.type===n.ANIMATIONS_TYPE.SPRITESHEET){let i=a.get(e.animationData,"dir",0);0<i?this.createWithMultipleDirections(t,e,i):this.createWithDirection(e,t)}e.classKey&&a.isFunction(e.classKey.createAnimation)&&e.classKey.createAnimation({data:e,uiScene:t,pack:this})}createWithMultipleDirections(e,t,i){e.directionalAnimations[this.getAnimationKey(t)]=t.animationData.dir,(1===i||2===i)&&(this.createWithDirection(t,e,n.UP),this.createWithDirection(t,e,n.DOWN)),(1===i||3===i)&&(this.createWithDirection(t,e,n.LEFT),this.createWithDirection(t,e,n.RIGHT))}createWithDirection(e,t,i=""){let r=this.prepareAnimationData(e,t,i);if(this.gameManager.createdAnimations[r.key])return this.gameManager.createdAnimations[r.key];let n=t.anims.create(r);return a.hasOwn(e.animationData,"destroyTime")&&(n.destroyTime=e.animationData.destroyTime),a.hasOwn(e.animationData,"depthByPlayer")&&(n.depthByPlayer=e.animationData.depthByPlayer),this.gameManager.createdAnimations[r.key]=n,this.gameManager.createdAnimations[r.key]}prepareAnimationData(e,t,i=""){let r=this.getAnimationKey(e,i),n={key:r,frames:t.anims.generateFrameNumbers(r,e.animationData),hideOnComplete:a.get(e.animationData,"hide",!0)};return a.hasOwn(e.animationData,"duration")?n.duration=e.animationData.duration:n.frameRate=a.get(e.animationData,"frameRate",t.configuredFrameRate),a.hasOwn(e.animationData,"repeat")&&(n.repeat=e.animationData.repeat),n}getAnimationKey(e,t=""){return(e.skillKey?e.skillKey+"_":"")+e.key+(t&&""!==t?"_"+t:"")}}},{"1d3a9c826831f334":"z0nmL","282e615b5cb3f89e":"ijd9L"}],erf5N:[function(e,t,i,r){let{MessagesGuard:n}=e("339136b874e5e026"),{sc:s}=e("2ec1bb160ec0448f");t.exports.MessagesHandler=class{static processOrQueueMessage(e,t){if(!n.validate(e))return!1;let i=t.getActiveScene();if(i&&i.player)return t.skills.processMessage(e);s.hasOwn(t,"skillsQueue")||(t.skillsQueue=[]),t.skillsQueue.push(e)}}},{"339136b874e5e026":"mfb6R","2ec1bb160ec0448f":"ijd9L"}],mfb6R:[function(e,t,i,r){let{SkillConst:n}=e("100f8e885762be05"),{ActionsConst:s}=e("39ef125cf707e0cf");t.exports.MessagesGuard=class{static validate(e){return!!e.act&&(0===e.act.indexOf(n.ACTIONS_PREF)||-1!==e.act.indexOf(s.ACTIONS.SUFFIX.ATTACK)||-1!==e.act.indexOf(s.ACTIONS.SUFFIX.EFFECT)||-1!==e.act.indexOf(s.ACTIONS.SUFFIX.HIT))}}},{"100f8e885762be05":"4URWZ","39ef125cf707e0cf":"ja3Hr"}],"4URWZ":[function(e,t,i,r){t.exports={SkillsEvents:e("ee1c8699d1d195b2"),Receiver:e("f446dd089da4381f"),ClassPath:e("8120be7a0841b1e3"),LevelsSet:e("fe220ea00f369dd1"),Level:e("d0a528882520fe7b"),Skill:e("89b2504786e2e8f1"),SkillConst:e("9f5ddfa4ed9d841d"),Attack:e("ff04b48a7ae3df0a"),Effect:e("bc0a31561e8344d2"),PhysicalAttack:e("4f3909cb0bcd41e8"),PhysicalEffect:e("7317fe1b879e8e72")}},{ee1c8699d1d195b2:"fQgE9",f446dd089da4381f:"9g6LG","8120be7a0841b1e3":"7UV3f",fe220ea00f369dd1:"2Q3Ez",d0a528882520fe7b:"8XuJV","89b2504786e2e8f1":"8xotj","9f5ddfa4ed9d841d":"l83sn",ff04b48a7ae3df0a:"9t0Yh",bc0a31561e8344d2:"5nXrY","4f3909cb0bcd41e8":"8K3qs","7317fe1b879e8e72":"k9H58"}],fQgE9:[function(e,t,i,r){let n="reldens.skills.";t.exports={PREF:n,INIT_LEVEL_SET_START:n+"initLevelSetStart",INIT_LEVEL_SET_END:n+"initLevelSetEnd",INIT_CLASS_PATH_END:n+"initClassPathEnd",LOADED_OWNER_SKILLS:n+"loadedOwnerSkills",SET_SKILLS:n+"setSkills",SET_LEVELS:n+"setLevels",GENERATED_LEVELS:n+"generatedLevels",ADD_SKILLS_BEFORE:n+"addSkillBefore",ADD_SKILLS_AFTER:n+"addSkillAfter",REMOVE_SKILLS_BEFORE:n+"removeSkillBefore",REMOVE_SKILLS_AFTER:n+"removeSkillAfter",VALIDATE_BEFORE:n+"beforeValidate",VALIDATE_SUCCESS:n+"validateSuccess",VALIDATE_FAIL:n+"validateFail",EXECUTING_SKILL:n+"executingSkill",LEVEL_EXPERIENCE_ADDED:n+"experienceAdded",LEVEL_UP:n+"levelUp",LEVEL_DOWN:n+"levelDown",LEVEL_APPLY_MODIFIERS:n+"levelApplyModifiers",SKILL_BEFORE_IN_RANGE:n+"beforeIsInRange",SKILL_AFTER_IN_RANGE:n+"afterIsInRange",SKILL_BEFORE_EXECUTE:n+"beforeExecute",SKILL_AFTER_EXECUTE:n+"afterExecute",SKILL_BEFORE_CAST:n+"beforeCast",SKILL_AFTER_CAST:n+"afterCast",SKILL_BEFORE_RUN_LOGIC:n+"beforeRunLogic",SKILL_AFTER_RUN_LOGIC:n+"afterRanLogic",SKILL_APPLY_OWNER_EFFECTS:n+"applyOwnerEffects",SKILL_ATTACK_APPLY_DAMAGE:n+"attackApplyDamage",SKILL_EFFECT_TARGET_MODIFIERS:n+"effectTargetModifiers",SKILL_PHYSICAL_ATTACK_HIT:n+"physicalAttackOnHit",SKILL_PHYSICAL_EFFECT_HIT:n+"physicalEffectOnHit"}},{}],"9g6LG":[function(e,t,i,r){let n=e("26dc6552813c7c3"),{Logger:s,sc:a}=e("c1d230545b42faaa");t.exports=class{constructor(e){a.hasOwn(e,"owner")||s.critical("Undefined owner."),e.owner&&"function"!=typeof e.owner.getPosition&&s.critical("Undefined owner position method."),this.actions=a.get(e,"actions",{}),a.hasOwn(e,"avoidDefaults")&&e.avoidDefaults||this.setDefaultMethods()}setDefaultMethods(){this.actions[n.ACTION_INIT_LEVEL_SET_START]="onInitLevelSetStart",this.actions[n.ACTION_INIT_LEVEL_SET_END]="onInitLevelSetEnd",this.actions[n.ACTION_INIT_CLASS_PATH_END]="onInitClassPathEnd",this.actions[n.ACTION_LOADED_OWNER_SKILLS]="onLoadedOwnerSkills",this.actions[n.ACTION_SET_SKILLS]="onSetSkills",this.actions[n.ACTION_SET_LEVELS]="onSetLevels",this.actions[n.ACTION_ADD_SKILLS_BEFORE]="onAddSkillsBefore",this.actions[n.ACTION_ADD_SKILLS_AFTER]="onAddSkillsAfter",this.actions[n.ACTION_REMOVE_SKILLS_BEFORE]="onRemoveSkillsBefore",this.actions[n.ACTION_REMOVE_SKILLS_AFTER]="onRemoveSkillsAfter",this.actions[n.ACTION_VALIDATE_BEFORE]="onValidateBefore",this.actions[n.ACTION_VALIDATE_SUCCESS]="onValidateSuccess",this.actions[n.ACTION_VALIDATE_FAIL]="onValidateFail",this.actions[n.ACTION_EXECUTING_SKILL]="onExecutingSkill",this.actions[n.ACTION_LEVEL_EXPERIENCE_ADDED]="onLevelExperienceAdded",this.actions[n.ACTION_LEVEL_UP]="onLevelUp",this.actions[n.ACTION_LEVEL_DOWN]="onLevelDown",this.actions[n.ACTION_LEVEL_APPLY_MODIFIERS]="onLevelApplyModifiers",this.actions[n.ACTION_SKILL_BEFORE_IN_RANGE]="onSkillBeforeInRange",this.actions[n.ACTION_SKILL_AFTER_IN_RANGE]="onSkillAfterInRange",this.actions[n.ACTION_SKILL_BEFORE_EXECUTE]="onSkillBeforeExecute",this.actions[n.ACTION_SKILL_AFTER_EXECUTE]="onSkillAfterExecute",this.actions[n.ACTION_SKILL_BEFORE_CAST]="onSkillBeforeCast",this.actions[n.ACTION_SKILL_AFTER_CAST]="onSkillAfterCast",this.actions[n.ACTION_SKILL_ATTACK_APPLY_DAMAGE]="onSkillAttackApplyDamage",this.actions[n.ACTION_SKILL_BEFORE_RUN_LOGIC]="onSkillBeforeRunLogic",this.actions[n.ACTION_SKILL_AFTER_RUN_LOGIC]="onSkillAfterRunLogic",this.actions[n.ACTION_SKILL_PHYSICAL_ATTACK_HIT]="onSkillPhysicalAttackHit",this.actions[n.ACTION_SKILL_PHYSICAL_EFFECT_HIT]="onSkillPhysicalEffectHit"}processMessage(e){return!!this.isValidMessage(e)&&(a.hasOwn(this.actions,e.act)?a.isFunction(this[this.actions[e.act]])?void this[this.actions[e.act]](e):(s.error("Skills action is not a function",e.act),!1):(s.error("Skills action not found",e.act),!1))}isValidMessage(e){return 0===e.act.indexOf(n.ACTIONS_PREF)}}},{"26dc6552813c7c3":"l83sn",c1d230545b42faaa:"ijd9L"}],l83sn:[function(e,t,i,r){let n="rski.";t.exports={SKILL:{TYPE:{BASE:1,ATTACK:2,EFFECT:3,PHYSICAL_ATTACK:4,PHYSICAL_EFFECT:5}},MODELS_PREFIX:"skills_",BEHAVIOR_SEND:"send",BEHAVIOR_BROADCAST:"broadcast",BEHAVIOR_BOTH:"both",ACTIONS_PREF:n,ACTION_INIT_LEVEL_SET_START:n+"ILss",ACTION_INIT_LEVEL_SET_END:n+"ILse",ACTION_INIT_CLASS_PATH_END:n+"ICpe",ACTION_LOADED_OWNER_SKILLS:n+"Los",ACTION_SET_SKILLS:n+"Sk",ACTION_SET_LEVELS:n+"Sl",ACTION_ADD_SKILLS_BEFORE:n+"Asb",ACTION_ADD_SKILLS_AFTER:n+"Asa",ACTION_REMOVE_SKILLS_BEFORE:n+"Rsb",ACTION_REMOVE_SKILLS_AFTER:n+"Rsa",ACTION_VALIDATE_BEFORE:n+"Bv",ACTION_VALIDATE_SUCCESS:n+"Vs",ACTION_VALIDATE_FAIL:n+"Vf",ACTION_EXECUTING_SKILL:n+"Es",ACTION_LEVEL_EXPERIENCE_ADDED:n+"Ea",ACTION_LEVEL_UP:n+"Lu",ACTION_LEVEL_DOWN:n+"Ld",ACTION_LEVEL_APPLY_MODIFIERS:n+"Apm",ACTION_SKILL_BEFORE_IN_RANGE:n+"Bir",ACTION_SKILL_AFTER_IN_RANGE:n+"Air",ACTION_SKILL_BEFORE_EXECUTE:n+"Be",ACTION_SKILL_AFTER_EXECUTE:n+"Ae",ACTION_SKILL_BEFORE_CAST:n+"Bc",ACTION_SKILL_AFTER_CAST:n+"Ac",ACTION_SKILL_ATTACK_APPLY_DAMAGE:n+"Ad",ACTION_SKILL_BEFORE_RUN_LOGIC:n+"Brl",ACTION_SKILL_AFTER_RUN_LOGIC:n+"Arl",ACTION_SKILL_PHYSICAL_ATTACK_HIT:n+"Pah",ACTION_SKILL_PHYSICAL_EFFECT_HIT:n+"Peh",SKILL_STATES:{PHYSICAL_SKILL_INVALID_TARGET:"physicalSkillInvalidTarget",PHYSICAL_SKILL_RUN_LOGIC:"physicalSkillRunLogic",OUT_OF_RANGE:"outOfRange",CAN_NOT_ACTIVATE:"canNotActivate",DODGED:"dodged",APPLYING_DAMAGE:"applyingDamage",APPLIED_DAMAGE:"appliedDamage",APPLIED_CRITICAL_DAMAGE:"appliedCriticalDamage",APPLYING_EFFECTS:"applyingEffects",APPLIED_EFFECTS:"appliedEffects",EXECUTE_PHYSICAL_ATTACK:"executePhysicalAttack",TARGET_NOT_AVAILABLE:"targetNotAvailable"}}},{}],"7UV3f":[function(e,t,i,r){let n=e("ccfbf682a19f24a3"),s=e("217efc8565fed517"),{Logger:a,sc:o}=e("89e53d0d03d2ebfc");t.exports=class extends n{async init(e){await super.init(e);let t=o.get(e,"key");if(!t)return a.critical("Undefined key for class path."),!1;this.key=t,this.label=o.get(e,"label",t),this.labelsByLevel=o.get(e,"labelsByLevel",!1),this.currentLabel=o.get(e,"currentLabel",this.getCurrentLabel()),this.skillsByLevel=o.get(e,"skillsByLevel",!1),this.skillsByLevelKeys=this.getSkillsByLevelKeys(),await this.setOwnerSkills(o.get(e,"currentSkills",!1)),this.affectedProperty=o.get(e,"affectedProperty",!1),await this.fireEvent(s.INIT_CLASS_PATH_END,this)}getCurrentLabel(){return o.hasOwn(this.labelsByLevel,this.currentLevel)?this.labelsByLevel[this.currentLevel]:this.loopLevelsForLabel()}loopLevelsForLabel(){let e=this.label;for(let t of Object.keys(this.labelsByLevel))t<=this.currentLevel&&(e=this.labelsByLevel[t]);return e}async levelUp(){let e=this.currentLevel+1;o.hasOwn(this.skillsByLevel,e)&&await this.addSkills(this.skillsByLevel[e]),o.hasOwn(this.labelsByLevel,e)&&(this.currentLabel=this.labelsByLevel[e]),await super.levelUp()}async levelDown(){o.hasOwn(this.skillsByLevel,this.currentLevel)&&await this.removeSkills(this.skillsByLevel[this.currentLevel]);let e=this.currentLevel-1;o.hasOwn(this.labelsByLevel,e)&&(this.currentLabel=this.labelsByLevel[e]),await super.levelDown()}async addSkills(e){for(let t of(await this.fireEvent(s.ADD_SKILLS_BEFORE,this,e),Object.keys(e))){let i=e[t];this.currentSkills[i.key]=i}await this.fireEvent(s.ADD_SKILLS_AFTER,this,e)}async removeSkills(e){for(let t of(await this.fireEvent(s.REMOVE_SKILLS_BEFORE,this,e),Object.keys(e))){let i=e[t],r="string"==typeof i?i:i.key;delete this.currentSkills[r]}await this.fireEvent(s.REMOVE_SKILLS_AFTER,this,e)}async setOwnerSkills(e){if(e){this.currentSkills=e;return}for(let e of(this.currentSkills={},Object.keys(this.levels))){let t=this.levels[e];this.skillsByLevel&&o.hasOwn(this.skillsByLevel,t.key)&&t.key<=this.currentLevel&&await this.addSkills(this.skillsByLevel[t.key])}await this.fireEvent(s.SET_SKILLS,this)}getSkillsByLevelKeys(){if(!this.skillsByLevel)return!1;let e={};for(let t of Object.keys(this.skillsByLevel)){let i=this.skillsByLevel[t];for(let r of(o.hasOwn(e,i)||(e[t]=[]),Object.keys(i))){let n=i[r];e[t].push(n.key)}}return e}}},{ccfbf682a19f24a3:"2Q3Ez","217efc8565fed517":"fQgE9","89e53d0d03d2ebfc":"ijd9L"}],"2Q3Ez":[function(e,t,i,r){let n=e("c16a85c98eb0e011"),s=e("a02ba4decc8e64ee"),{EventsManagerSingleton:a,Logger:o,sc:h}=e("aece71e8d3833b40");t.exports=class{constructor(e={}){this.events=h.get(e,"events",a),this.owner=h.get(e,"owner",!1)}setOwner(e){let t=h.get(e,"owner");return t?"function"!=typeof t.getPosition?(o.critical("Undefined owner position method."),!1):void(this.owner=t,this.ownerIdProperty=h.get(e,"ownerIdProperty","id")):(o.critical("Undefined owner for levels."),!1)}async init(e){if(!this.owner)return o.critical("Undefined owner for levels."),!1;if("function"!=typeof this.owner.getPosition)return o.critical("Undefined owner position method."),!1;let t=h.get(e,"levels",{});if(!t||!Object.keys(t).length)return o.critical("Levels were not specified."),!1;await this.fireEvent(n.INIT_LEVEL_SET_START,this),this.autoFillRanges=h.get(e,"autoFillRanges",!1),this.autoFillExperienceMultiplier=h.get(e,"autoFillExperienceMultiplier",1.5),this.currentLevel=h.get(e,"currentLevel",0),this.currentExp=h.get(e,"currentExp",0),this.setRequiredExperienceLimit=h.get(e,"setRequiredExperienceLimit",!1),this.ownerIdProperty=h.get(e,"ownerIdProperty","id"),this.levels=await this.setLevels(t),this.increaseLevelsWithExperience=h.get(e,"increaseLevelsWithExperience",!0),this.levelsByExperience=h.get(e,"levelsByExperience",this.sortLevelsBy(this.levels)),await this.fireEvent(n.INIT_LEVEL_SET_END,this)}async setLevels(e){return this.autoFillRanges?await this.createLevels(e):this.levels=e,await this.fireEvent(n.SET_LEVELS,this,e),this.levels}async createLevels(e){this.levels={};let t=Object.keys(e);for(let i of t){let r=e[i];this.levels[i]=r;let n=t.indexOf(i)+1,s=t.length>n&&t[n],a=!1;h.hasOwn(e,s)&&(a=e[s]),h.hasOwn(a,"key")&&a.key-r.key>0&&await this.createAndAutofillLevelsInstances(r,a)}}async createAndAutofillLevelsInstances(e,t){for(let i=e.key+1;i<t.key;i++){let t=Math.round(this.levels[i-1].requiredExperience*this.autoFillExperienceMultiplier),r={key:i,modifiers:e.modifiers,requiredExperience:t};this.levels[i]=new s(r),await this.fireEvent(n.GENERATED_LEVELS,this)}}sortLevelsBy(e,t="key"){return Object.keys(e).sort((i,r)=>e[i][t]>e[r][t]?1:-1)}async levelUp(){let e=Object.keys(this.levels).pop();if(this.currentLevel>=this.levels[e].key)return!1;this.currentLevel++,await this.applyLevelModifiers(),await this.fireEvent(n.LEVEL_UP,this)}async levelDown(){if(1>=this.currentLevel)return!1;await this.applyLevelModifiers(!0),this.currentLevel--,await this.fireEvent(n.LEVEL_DOWN,this)}async applyLevelModifiers(e){let t=this.getLevelInstance(this.currentLevel);if(!t)return o.error(["Current level instance not found.","Current Level Key:",this.currentLevel]),!1;if(await this.fireEvent(n.LEVEL_APPLY_MODIFIERS,this,t),!t.modifiers||0===t.modifiers.length)return!1;for(let i of t.modifiers)e?i.revert(this.owner):i.apply(this.owner)}getLevelInstance(e){return h.get(this.levels,e,!1)}async addExperience(e){let t=this.currentExp+e,i=this.levelsByExperience.indexOf(this.currentLevel.toString()),r=i+1,s=this.levelsByExperience[r],a=this.levels[s],o=0,c=!1;if(this.increaseLevelsWithExperience&&h.hasOwn(this.levels,this.currentLevel)&&a&&t>=a.requiredExperience){for(let e of this.levelsByExperience.slice(r))if(t>=this.levels[e].requiredExperience&&(c=!0,await this.levelUp()),t<this.levels[e].requiredExperience){o=this.levels[e].requiredExperience;break}}let l=c?r+1:r;(!a||l===this.levelsByExperience.length)&&this.setRequiredExperienceLimit&&(t=this.getLevelInstance(this.currentLevel).requiredExperience),this.currentExp=t,await this.fireEvent(n.LEVEL_EXPERIENCE_ADDED,this,e,t,i,r,s,a,o,c)}getNextLevelExperience(){let e=this.levelsByExperience.indexOf(this.currentLevel.toString()),t=this.getLevelInstance(this.currentLevel),i=e+1,r=this.levelsByExperience[i],n=this.getLevelInstance(r);if(!n)return t.requiredExperience;if(n&&this.currentExp<n.requiredExperience||!h.hasOwn(this.levels,this.currentLevel)||!n)return n.requiredExperience;for(let e of this.levelsByExperience.slice(i))if(this.currentExp<this.levels[e].requiredExperience)return this.levels[e].requiredExperience;return n.requiredExperience}getOwnerId(){return this.owner[this.ownerIdProperty]}getOwnerEventKey(){return h.get(this.owner,"eventsPrefix","skills.ownerId."+this.getOwnerId())}getOwnerUniqueEventKey(e){return(h.isFunction(this.owner.eventUniqueKey)?this.owner.eventUniqueKey():"skills.ownerId."+this.getOwnerId()+".uKey."+h.getTime())+(e?"."+e:"")}async fireEvent(e,...t){return await this.events.emit(this.eventFullName(e),...t)}listenEvent(e,t,i,r){return this.events.onWithKey(this.eventFullName(e),t,i,r)}eventFullName(e){return this.getOwnerEventKey()+"."+e}}},{c16a85c98eb0e011:"fQgE9",a02ba4decc8e64ee:"8XuJV",aece71e8d3833b40:"ijd9L"}],"8XuJV":[function(e,t,i,r){let{Logger:n,sc:s}=e("faf9f4d0a81cecea");t.exports=class{constructor(e){if(!s.hasOwn(e,"key")||isNaN(e.key))return n.critical("Invalid Level key."),!1;(!s.hasOwn(e,"modifiers")||0>=e.modifiers.length)&&n.warning("Level modifiers were not specified.","Level ID:",e.id," - Key:",e.key),this.key=parseInt(e.key),this.modifiers=e.modifiers,this.label=s.get(e,"label",e.key),this.requiredExperience=s.get(e,"requiredExperience",s.get(e,"required_experience",0))}}},{faf9f4d0a81cecea:"ijd9L"}],"8xotj":[function(e,t,i,r){let n=e("1a8b79feac2da9b0"),s=e("867678cea9a9cfca"),{PropertyManager:a,Condition:o,Calculator:h}=e("2b878b9cf457d0fc"),{InteractionArea:c,EventsManagerSingleton:l,Logger:d,sc:u}=e("cfa6f665a4da61d4");t.exports=class{constructor(e){this.isReady=!0,u.hasOwn(e,"key")||(d.error("Missing skill key."),this.isReady=!1),u.hasOwn(e,"owner")||(d.error("Missing skill owner."),this.isReady=!1),"function"!=typeof e.owner.getPosition&&(d.error("Undefined owner position method."),this.isReady=!1),this.key=e.key,this.owner=e.owner,this.ownerIdProperty=u.get(e,"ownerIdProperty","id"),this.type=n.SKILL.TYPE.BASE,this.customData=u.get(e,"customData",!1),this.autoValidation=u.get(e,"autoValidation",!1),this.skillDelay=u.get(e,"skillDelay",0),this.castTime=u.get(e,"castTime",0),this.owner.isCasting=!1,this.owner.castingTimer=!1,this.isValid=!0,this.usesLimit=u.get(e,"usesLimit",0),this.uses=0,this.canActivate=u.get(e,"canActivate",!0),this.range=u.get(e,"range",0),this.skillActivationTimer=!1,this.lastState="",this.groups=u.get(e,"groups",[]),this.lastAppliedModifiers={},this.rangeAutomaticValidation=u.get(e,"rangeAutomaticValidation",!1),this.rangePropertyX=u.get(e,"rangePropertyX",!1),this.rangePropertyY=u.get(e,"rangePropertyY",!1),this.rangeTargetPropertyX=u.get(e,"rangeTargetPropertyX",!1),this.rangeTargetPropertyY=u.get(e,"rangeTargetPropertyY",!1),this.allowSelfTarget=u.get(e,"allowSelfTarget",!1),this.target=u.get(e,"target",!1),this.events=u.get(e,"events",l),this.ownerConditions=u.get(e,"ownerConditions",[]),this.ownerEffects=u.get(e,"ownerEffects",[]),this.criticalChance=u.get(e,"criticalChance",0),this.criticalMultiplier=u.get(e,"criticalMultiplier",1),this.criticalFixedValue=u.get(e,"criticalFixedValue",0),this.propertyManager=new a,this.calculator=new h}validate(){return this.isReady?(this.isValid=!0,this.fireEvent(s.VALIDATE_BEFORE,this).catch(e=>{d.error(e)}),!this.canActivate||this.owner.isCasting)?(this.lastState=n.SKILL_STATES.CAN_NOT_ACTIVATE,!1):!!this.validateConditions()&&(!(0<this.usesLimit)||!(this.uses>=this.usesLimit))&&(this.canActivate=!0,0<this.skillDelay&&(this.canActivate=!1,this.skillActivationTimer=setTimeout(()=>{this.canActivate=!0},this.skillDelay)),this.fireEvent(s.VALIDATE_SUCCESS,this).catch(e=>{d.error(e)}),this.isValid):(d.error("Skill is not ready for validation.",this.key),!1)}validateConditions(){for(let e of this.ownerConditions){if(!(e instanceof o))return d.critical("Wrong Condition instance was specified.",typeof e),!1;if(!e.isValidOn(this.owner))return this.fireEvent(s.VALIDATE_FAIL,this,e).catch(e=>{d.error(e)}),!1}return!0}validateRange(e){if(!this.rangePropertyX||!this.rangePropertyY)return d.error("Missing range properties for validation."),!1;let t={x:this.propertyManager.getPropertyValue(this.owner,this.rangePropertyX),y:this.propertyManager.getPropertyValue(this.owner,this.rangePropertyY)},i={x:this.propertyManager.getPropertyValue(e,this.rangeTargetPropertyX||this.rangePropertyX),y:this.propertyManager.getPropertyValue(e,this.rangeTargetPropertyY||this.rangePropertyY)};return this.isInRange(t,i)}isInRange(e,t){if(this.fireEvent(s.SKILL_BEFORE_IN_RANGE,this).catch(e=>{d.error(e)}),0===this.range)return!0;let i=new c;i.setupInteractionArea(this.range,t.x,t.y);let r=i.isValidInteraction(e.x,e.y);return this.fireEvent(s.SKILL_AFTER_IN_RANGE,this,r).catch(e=>{d.error(e)}),r}async execute(e){if(!this.isReady)return d.error("Skill is not ready to be executed.",this.key),!1;if(await this.fireEvent(s.SKILL_BEFORE_EXECUTE,this,e),e&&(this.target=e),!this.target)return d.error("Target undefined."),!1;if(!this.onExecuteConditions()||await this.isValidRange(e)||this.autoValidation&&!this.validate())return!1;this.ownerEffects&&(this.applyModifiers(this.ownerEffects,this.owner,!0),await this.fireEvent(s.SKILL_APPLY_OWNER_EFFECTS,this,e));let t=await this.applySkillLogicOnTarget(e);return this.uses++,await this.onExecuteRewards(),await this.fireEvent(s.SKILL_AFTER_EXECUTE,this,e),t}async applySkillLogicOnTarget(e){return 0<this.castTime?(await this.fireEvent(s.SKILL_BEFORE_CAST,this,e),this.owner.isCasting=!0,this.owner.castingTimer=setTimeout(async()=>{let t=await this.finishExecution(e);this.owner.isCasting=!1,await this.fireEvent(s.SKILL_AFTER_CAST,this,e,t)},this.castTime),!1):await this.finishExecution(e)}async isValidRange(e){return this.rangeAutomaticValidation&&this.rangePropertyX&&this.rangePropertyY&&!await this.validateRange(e)}async finishExecution(e){await this.fireEvent(s.SKILL_BEFORE_RUN_LOGIC,this,e);let t=await this.runSkillLogic();return await this.fireEvent(s.SKILL_AFTER_RUN_LOGIC,this,e),t}onExecuteConditions(){return!0}async runSkillLogic(){return!0}async onExecuteRewards(){}applyCriticalValue(e){return this.isCritical()&&(u.isNumber(this.criticalMultiplier)&&(e*=this.criticalMultiplier),u.isNumber(this.criticalFixedValue)&&(e+=this.criticalFixedValue)),e}getCriticalDiff(e){return this.applyCriticalValue(e)-e}isCritical(){return!(this.criticalChance<=0)&&u.randomInteger(1,100)<=this.criticalChance}applyModifiers(e,t,i=!1){for(let r of(this.lastAppliedModifiers={},Object.keys(e))){let n=e[r];n.target=t;let s=n.getModifiedValue();i||(s+=this.getCriticalDiff(n.value)),n.setOwnerProperty(n.propertyKey,s),this.lastAppliedModifiers[n.propertyKey]=s}}getOwnerId(){return this.owner[this.ownerIdProperty]}getOwnerEventKey(){return u.get(this.owner,"eventsPrefix","skill.ownerId."+this.getOwnerId())}getOwnerUniqueEventKey(e){return(u.isFunction(this.owner.eventUniqueKey)?this.owner.eventUniqueKey():"skills.ownerId."+this.getOwnerId()+".uKey."+u.getTime())+(e?"."+e:"")}async fireEvent(e,...t){return await this.events.emit(this.eventFullName(e),...t)}listenEvent(e,t,i,r){return this.events.onWithKey(this.eventFullName(e),t,i,r)}eventFullName(e){return this.getOwnerEventKey()+"."+e}}},{"1a8b79feac2da9b0":"l83sn","867678cea9a9cfca":"fQgE9","2b878b9cf457d0fc":"gQlQ8",cfa6f665a4da61d4:"ijd9L"}],"9t0Yh":[function(e,t,i,r){let n=e("9dba7a1ed3b87f64"),s=e("d7a74c1b6b680357"),a=e("db39812edc044706"),{Logger:o,sc:h}=e("fbb03c16891d35a5");t.exports=class extends n{constructor(e){super(e),this.type=a.SKILL.TYPE.ATTACK;let t=h.get(e,"affectedProperty",!1);t||(o.error("Missing skill affectedProperty to which the result damage will be applied."),this.isReady=!1),this.affectedProperty=t,this.allowEffectBelowZero=h.get(e,"allowEffectBelowZero",!1),this.hitDamage=h.get(e,"hitDamage",0),this.applyDirectDamage=h.get(e,"applyDirectDamage",!1),this.attackProperties=h.get(e,"attackProperties",[]),this.defenseProperties=h.get(e,"defenseProperties",[]),this.aimProperties=h.get(e,"aimProperties",[]),this.dodgeProperties=h.get(e,"dodgeProperties",[]),this.dodgeFullEnabled=h.get(e,"dodgeFullEnabled",!0),this.dodgeOverAimSuccess=h.get(e,"dodgeOverAimSuccess",1),this.damageAffected=h.get(e,"damageAffected",!1),this.criticalAffected=h.get(e,"criticalAffected",!1),this.propertiesTotalOperators=h.get(e,"propertiesTotalOperators",{})}async runSkillLogic(){return(this.lastState=null,this.target&&this.owner)?this.isInRange(this.owner.getPosition(),this.target.getPosition())?(this.lastState=a.SKILL_STATES.APPLYING_DAMAGE,await this.applyDamageTo(this.target)):(this.lastState=a.SKILL_STATES.OUT_OF_RANGE,!1):(this.lastState=a.SKILL_STATES.TARGET_NOT_AVAILABLE,!1)}async applyDamageTo(e){if(!e)return this.lastState=a.SKILL_STATES.TARGET_NOT_AVAILABLE,!1;let t=this.getPropertiesTotal(this.owner,this.aimProperties);if(!1===t)return o.debug("Missing owner aim properties.",this.owner),!1;let i=this.getPropertiesTotal(e,this.dodgeProperties);if(!1===i)return o.debug("Missing target dodge properties.",e),!1;if(this.dodgeFullEnabled&&i>t*this.dodgeOverAimSuccess)return this.lastState=a.SKILL_STATES.DODGED,!1;let r=this.getAffectedPropertyValue(e);if(!this.allowEffectBelowZero&&0>=r)return!1;let n=this.getDiffProportion(t,i),h=this.applyDirectDamage?this.hitDamage:this.calculateProportionDamage(e,this.hitDamage,i,t,n);h+=this.calculateCriticalDamage(h,i,t,n);let c=!this.allowEffectBelowZero&&r<h?0:r-h;return this.setAffectedPropertyValue(e,c),this.lastState=a.SKILL_STATES.APPLIED_DAMAGE,await this.fireEvent(s.SKILL_ATTACK_APPLY_DAMAGE,this,e,h,c),!0}calculateCriticalDamage(e,t,i,r){let n=this.getCriticalDiff(e);return!this.criticalAffected||t<=i?n:(this.lastState=a.SKILL_STATES.APPLIED_CRITICAL_DAMAGE,n-Math.floor(n*r/100))}calculateProportionDamage(e,t,i,r,n){let s=this.getPropertiesTotal(this.owner,this.attackProperties),a=this.getPropertiesTotal(e,this.defenseProperties),o=s-a;if(o>0){let e=o<a?100*o/a:99,i=Math.ceil((e=e>99?99:e)*t/100);t+=i}if(o<0){let e=-o<s?-(100*o)/s:99,i=Math.floor((e=e>99?99:e)*t/100);t-=i}if(this.damageAffected&&i>r){let e=Math.floor(t*n/100);t-=e}return t}getPropertiesTotal(e,t){if(!e)return o.warning("Missing object to get properties total."),!1;if(0===t.length)return 0;try{let i=0;for(let r of t){let t=this.propertyManager.getPropertyValue(e,r);i=h.hasOwn(this.propertiesTotalOperators,r)?this.calculator.calculateNewValue(i,this.propertiesTotalOperators[r],t):i+t}return i}catch(e){return o.debug(e.message),!1}}getDiffProportion(e,t){return 0===e?100*(0!==t):100*(t-e)/e}getAffectedPropertyValue(e){return this.propertyManager.getPropertyValue(e,this.affectedProperty)}setAffectedPropertyValue(e,t){return this.propertyManager.setOwnerProperty(e,this.affectedProperty,t)}}},{"9dba7a1ed3b87f64":"8xotj",d7a74c1b6b680357:"fQgE9",db39812edc044706:"l83sn",fbb03c16891d35a5:"ijd9L"}],"5nXrY":[function(e,t,i,r){let n=e("e44f791774823c1"),s=e("2db6f1da8a2a090f"),a=e("7b8b51bc133daece"),{Logger:o,sc:h}=e("fba4e87138a39fd8");t.exports=class extends n{constructor(e){super(e),this.type=a.SKILL.TYPE.EFFECT;let t=h.get(e,"targetEffects");t||(o.error("Missing targetEffects for skill."),this.isReady=!1),this.targetEffects=t}async runSkillLogic(){return(this.lastState=null,this.target&&this.owner)?this.isInRange(this.owner.getPosition(),this.target.getPosition())?(this.lastState=a.SKILL_STATES.APPLYING_EFFECTS,this.applyModifiers(this.targetEffects,this.target),this.lastState=a.SKILL_STATES.APPLIED_EFFECTS,await this.fireEvent(s.SKILL_EFFECT_TARGET_MODIFIERS,this),!0):(this.lastState=a.SKILL_STATES.OUT_OF_RANGE,!1):(this.lastState=a.SKILL_STATES.TARGET_NOT_AVAILABLE,!1)}}},{e44f791774823c1:"8xotj","2db6f1da8a2a090f":"fQgE9","7b8b51bc133daece":"l83sn",fba4e87138a39fd8:"ijd9L"}],"8K3qs":[function(e,t,i,r){let n=e("e0c5b517af7e95eb"),{PhysicalPropertiesValidator:s}=e("53bee4a4b8ffb847"),{PhysicalSkillRunner:a}=e("2eeab888db9bf32c"),o=e("816db325f0372799"),h=e("da275099098bc955"),{sc:c}=e("c2948bad11643034");t.exports=class extends n{constructor(e){super(e),this.type=o.SKILL.TYPE.PHYSICAL_ATTACK,this.parentType=o.SKILL.TYPE.ATTACK,this.isReady=s.validate(e),this.magnitude=e.magnitude,this.objectWidth=e.objectWidth,this.objectHeight=e.objectHeight,this.validateTargetOnHit=c.get(e,"validateTargetOnHit",!1)}async runSkillLogic(){return a.runSkillLogic(this)}async executeOnHit(e){return a.executeOnHit(e,this,h.SKILL_PHYSICAL_ATTACK_HIT,async()=>await super.runSkillLogic())}}},{e0c5b517af7e95eb:"9t0Yh","53bee4a4b8ffb847":"fAAfG","2eeab888db9bf32c":"doiOk","816db325f0372799":"l83sn",da275099098bc955:"fQgE9",c2948bad11643034:"ijd9L"}],fAAfG:[function(e,t,i,r){let{Logger:n,sc:s}=e("35abe0003c2a362d");t.exports.PhysicalPropertiesValidator=class{static validate(e){return e.owner&&"function"==typeof e.owner.executePhysicalSkill?s.hasOwn(e,"magnitude")?s.hasOwn(e,"objectWidth")?!!s.hasOwn(e,"objectHeight")||(n.error("Missing objectHeight property."),!1):(n.error("Missing objectWidth property."),!1):(n.error("Missing magnitude property."),!1):(n.error("Missing executePhysicalSkill required method."),!1)}}},{"35abe0003c2a362d":"ijd9L"}],doiOk:[function(e,t,i,r){let n=e("3374ca1bbfd90a69");t.exports.PhysicalSkillRunner=class{static async runSkillLogic(e){return(e.lastState=null,e.validateRange(e.target))?(e.lastState=n.SKILL_STATES.EXECUTE_PHYSICAL_ATTACK,await e.owner.executePhysicalSkill(e.target,e)):e.lastState=n.SKILL_STATES.OUT_OF_RANGE,!1}static async executeOnHit(e,t,i,r){return(await t.fireEvent(i,t,e),t.validateTargetOnHit&&e!==t.target)?(t.lastState=n.SKILL_STATES.PHYSICAL_SKILL_INVALID_TARGET,!1):"function"==typeof r&&(t.lastState=n.SKILL_STATES.PHYSICAL_SKILL_RUN_LOGIC,await r(e))}}},{"3374ca1bbfd90a69":"l83sn"}],k9H58:[function(e,t,i,r){let n=e("d5317b62b21ebf53"),{PhysicalPropertiesValidator:s}=e("161757e13fa22e4c"),{PhysicalSkillRunner:a}=e("63a7f8ae8a1c8d9b"),o=e("1ec320fdf9897900"),h=e("366775bdaf1fe082"),{sc:c}=e("456bc4241930a2a9");t.exports=class extends n{constructor(e){super(e),this.type=o.SKILL.TYPE.PHYSICAL_EFFECT,this.parentType=o.SKILL.TYPE.EFFECT,this.isReady=s.validate(e),this.magnitude=e.magnitude,this.objectWidth=e.objectWidth,this.objectHeight=e.objectHeight,this.validateTargetOnHit=c.get(e,"validateTargetOnHit",!1)}async runSkillLogic(){return a.runSkillLogic(this)}async executeOnHit(e){return a.executeOnHit(e,this,h.SKILL_PHYSICAL_EFFECT_HIT,async()=>await super.runSkillLogic())}}},{d5317b62b21ebf53:"5nXrY","161757e13fa22e4c":"fAAfG","63a7f8ae8a1c8d9b":"doiOk","1ec320fdf9897900":"l83sn","366775bdaf1fe082":"fQgE9","456bc4241930a2a9":"ijd9L"}],e5OqB:[function(e,t,i,r){let{ReceiverWrapper:n}=e("7b4e6450c890fa8e"),{Logger:s}=e("d1031ffaeea43394");t.exports.GameManagerEnricher=class{static withReceiver(e,t,i){if(!e||!t||!i)return s.error("Invalid input parameters for GameManagerEnricher.withReceiver method."),!1;if(e?.playerId!==t?.room.sessionId||(i.skills||(i.skills=new n({owner:e,roomEvents:t,events:i.events})),!i.skillsQueue?.length))return!1;for(let e of i.skillsQueue)i.skills.processMessage(e);i.skillsQueue=[]}}},{"7b4e6450c890fa8e":"kzehC",d1031ffaeea43394:"ijd9L"}],kzehC:[function(e,t,i,r){let{GameConst:n}=e("280612dc61e2a50e"),{ActionsConst:s}=e("6868c5c216c81bc5"),{Receiver:a}=e("c695b3c1a62eb9d1"),{Logger:o,sc:h}=e("84b4ce5800839523");t.exports.ReceiverWrapper=class extends a{constructor(e){super(e),this.events=h.get(e,"events",!1),this.events||o.error("EventsManager undefined in ReceiverWrapper."),this.gameManager=h.get(e.roomEvents,"gameManager",!1),this.gameManager||o.error("Game Manager undefined in ReceiverWrapper."),this.room=h.get(e.roomEvents,"room",!1),this.room||o.error("Room undefined in ReceiverWrapper."),this.translator=this.gameManager?.services?.translator}processMessage(e){if(!this.gameManager)return!1;let t=this.gameManager.getActiveScene();if(!t||!t.player)return!1;super.processMessage(e),this.playAttackOrEffectAnimation(e,t),this.playHitAnimation(e,t)}playHitAnimation(e,t){-1!==e.act.indexOf("_hit")&&this.runHitAnimation(e.x,e.y,t,e.act)}playAttackOrEffectAnimation(e,t){let i=-1!==e.act.indexOf("_eff");if(-1===e.act.indexOf("_atk")&&!i)return;this.events.emitSync("reldens.playerAttack",e,this.room);let r=i?"_eff":"_atk",n=e.act.substring(0,e.act.indexOf(r)),{ownerSprite:s,targetSprite:a,targetType:o}=this.extractOwnerTargetAndType(t,e),c=h.get(this.gameManager.config.client.skills.animations,n,"default"+r);if(s&&t.getAnimationByKey(c)){let e=t.physics.add.sprite(s.x,s.y,c);e.setDepth(2e5);let i="";h.hasOwn(this.gameManager.gameEngine.uiScene.directionalAnimations,c)&&(i=3===this.gameManager.gameEngine.uiScene.directionalAnimations[c]?s.x<a.x?"_right":"_left":s.y<a.y?"_down":"_up"),e.anims.play(c+i,!0).on("animationcomplete",()=>{e.destroy()})}a&&this.runHitAnimation(a.x,a.y,t,n+"_hit",e.target,o)}extractOwnerTargetAndType(e,t){if(!e)return o.critical("Current scene not found.",e,t),!1;let i=!1,r=!1,n=s.DATA_TYPE_VALUE_PLAYER,a=e.player.players,c=e.objectsAnimations;return h.hasOwn(a,t.owner)&&h.hasOwn(a,t.target)?{ownerSprite:i=a[t.owner],targetSprite:r=a[t.target],targetType:n}:(h.hasOwn(c,t.owner)&&(i=c[t.owner].sceneSprite,r=a[t.target]),h.hasOwn(c,t.target)&&(r=c[t.target].sceneSprite,i=a[t.owner],n=s.DATA_TYPE_VALUE_OBJECT),{ownerSprite:i,targetSprite:r,targetType:n})}runHitAnimation(e,t,i,r,n,a){let o=this.gameManager.config.client.skills.animations,c=h.hasOwn(o,r)?r:s.DEFAULT_HIT_ANIMATION_KEY;if(!i.getAnimationByKey(c)||!h.hasOwn(o,c))return!1;let l=!1,d=!1;a===s.DATA_TYPE_VALUE_PLAYER&&(d=(l=this.gameManager.getCurrentPlayer().players[n]).playerId),a===s.DATA_TYPE_VALUE_OBJECT&&(l=i.objectsAnimations[n],d=n);let u=i.physics.add.sprite(e,t,c);(u=this.setTargetSpriteDepth(l,c,d,u,o)).anims.play(c,!0).on("animationcomplete",()=>{u.destroy(),l&&h.hasOwn(l,"moveSprites")&&delete l.moveSprites[c+"_"+d]})}setTargetSpriteDepth(e,t,i,r,n){if(!e)return r.setDepth(3e5),r;h.hasOwn(e,"targetSprite")&&(e.moveSprites[t+"_"+i]=r);let s=n[t],a=e.depth+("above"===h.get(s.animationData,"depthByPlayer","")?100:-.1);return r.depthByPlayer=s.animationData.depthByPlayer,r.setDepth(a),r}updateLevelAndExperience(e){this.gameManager.gameDom.updateContent(s.SELECTORS.LEVEL_LABEL,this.translator.t(s.SNIPPETS.LEVEL,{currentLevel:e.data[s.MESSAGE.DATA.LEVEL]})),this.onLevelExperienceAdded(e);let t=e.data[s.MESSAGE.DATA.CLASS_PATH_LABEL];t&&this.gameManager.gameDom.updateContent(s.SELECTORS.CLASS_PATH_LABEL,this.translator.t(s.SNIPPETS.CLASS_PATH_LABEL,{classPathLabel:t}));let i=e.data[s.MESSAGE.DATA.NEXT_LEVEL_EXPERIENCE];i&&this.gameManager.gameDom.updateContent(s.SELECTORS.NEXT_LEVEL_EXPERIENCE,this.translator.t(s.SNIPPETS.NEXT_LEVEL_EXPERIENCE,{nextLevelExperience:i}))}onInitClassPathEnd(e){if(this.gameManager.skills&&this.gameManager.skills.uiCreated)return!1;this.gameManager.skills.uiCreated=!0,this.updateLevelAndExperience(e),this.gameManager.skills.skills=e.data[s.MESSAGE.DATA.SKILL_LEVEL],this.gameManager.getFeature("actions").uiManager.appendSkills(e.data.skl)}onLevelUp(e){this.updateLevelAndExperience(e),h.hasOwn(e.data,"skl")&&(Object.assign(this.gameManager.skills.skills,e.data.skl),this.gameManager.getFeature("actions").uiManager.appendSkills(e.data.skl));let t=this.getLevelUpAnimationKey(e.data.skl);t&&this.playSkillPlayerAnimation(this.gameManager.getCurrentPlayer().playerId,t)}getLevelUpAnimationKey(e){let t=this.gameManager.config.client.levels.animations,i="level_"+this.gameManager.playerData.avatarKey+"_"+e;if(h.hasOwn(t,i))return i;let r="level_"+this.gameManager.playerData.avatarKey;if(h.hasOwn(t,r))return r;let n="level_"+e;return h.hasOwn(t,n)?n:!!h.hasOwn(t,"level_default")&&"level_default"}onLevelExperienceAdded(e){this.gameManager.gameDom.updateContent(s.SELECTORS.CURRENT_EXPERIENCE,this.translator.t(s.SNIPPETS.EXPERIENCE,{experience:e.data[s.MESSAGE.DATA.EXPERIENCE]}))}onSkillBeforeCast(e){this.playSkillPlayerAnimation(e.data.extraData[s.DATA_OWNER_KEY],this.determineCastKey(e))}determineCastKey(e){let t=e.data.skillKey+"_cast";return h.hasOwn(this.gameManager.config.client.skills.animations,t)?t:"default_cast"}playSkillPlayerAnimation(e,t){let i=this.gameManager.getActiveScene(),r=i.getAnimationByKey(t);if(!r)return -1===t.indexOf("default")&&o.error('Animation sprite not found for "'+t+'".',this.gameManager.config.client.skills.animations),!1;let n=this.gameManager.getCurrentPlayer().players[e],s=n.x,a=n.y,c=i.physics.add.sprite(s,a,t),l=h.hasOwn(r,"depthByPlayer")&&"above"===r.depthByPlayer?n.depth+1:n.depth-.1;c.depthByPlayer=r.depthByPlayer,c.setDepth(l),h.get(r,"blockMovement",!1)||(n.moveSprites[t+"_"+n.playerId]=c),c.anims.play(t,!0);let d=h.get(r,"destroyTime",!1);d&&setTimeout(()=>{c.destroy(),delete n.moveSprites[t+"_"+n.playerId]},d)}onSkillAfterCast(e){let t=this.gameManager.getCurrentPlayer();if(!h.hasOwn(e.data.extraData,s.DATA_OWNER_TYPE)||!h.hasOwn(e.data.extraData,s.DATA_OWNER_KEY)||e.data.extraData[s.DATA_OWNER_TYPE]!==s.DATA_TYPE_VALUE_PLAYER||!h.hasOwn(t.players,e.data.extraData[s.DATA_OWNER_KEY]))return!1;let i=this.gameManager.getActiveScene(),r=this.gameManager.getCurrentPlayer().players[e.data.extraData[s.DATA_OWNER_KEY]],n=this.getPlayDirection(e.data.extraData,r,t,i);n&&(r.anims.play(r.avatarKey+"_"+n,!0),r.anims.stop())}onSkillAttackApplyDamage(e){let t=this.gameManager.config.get("client/actions/damage");if(!t.enabled)return!1;let i=this.gameManager.getCurrentPlayer();if(!t.showAll&&e.data.extraData[s.DATA_OWNER_KEY]!==i.playerId)return!1;let r=this.gameManager.getActiveScene(),n=r.getObjectFromExtraData(s.DATA_OBJECT_KEY_TARGET,e.data.extraData,i);if(!n)return!1;r.createFloatingText(n.x,n.y,e.data.d,t.color,t.font,t.fontSize,t.duration,t.top,t.stroke,t.strokeThickness,t.shadowColor)}getPlayDirection(e,t,i,r){let a=!1,o=r.getObjectFromExtraData(s.DATA_OBJECT_KEY_TARGET,e,i);if(!o)return!1;let h=o.x-t.x,c=o.y-t.y;return a=h>=0?n.RIGHT:n.LEFT,Math.abs(h)<Math.abs(c)&&(a=c>=0?n.DOWN:n.UP),a}}},{"280612dc61e2a50e":"z0nmL","6868c5c216c81bc5":"ja3Hr",c695b3c1a62eb9d1:"4URWZ","84b4ce5800839523":"ijd9L"}],"1e7Ni":[function(e,t,i,r){t.exports={actions:{selectClassPath:"Select Your Class-Path",currentLevel:"Level %currentLevel",experience:"%experience",experienceLabel:"XP",classPathLabel:"%classPathLabel",nextLevelExperience:"%nextLevelExperience"}}},{}],"4ERVY":[function(e,t,i,r){let{LifebarUi:n}=e("8c20660587da4fd1"),{PlayerStatsUi:s}=e("ce28c84d7547fb13"),{ActionsConst:a}=e("f776fabb66dbfa58"),{GameConst:o}=e("182ad229d5814453"),h=e("654cdd1a7a80a011"),{TranslationsMapper:c}=e("63862da16582548e"),{UsersConst:l}=e("356170d1146549c3"),{PluginInterface:d}=e("514d97ef4c40e16"),{Logger:u,sc:f}=e("29f51e27cfc36016");t.exports.UsersPlugin=class extends d{async setup(e){this.gameManager=f.get(e,"gameManager",!1),this.events=f.get(e,"events",!1),this.initialGameData={},this.validateProperties()&&(this.setTranslations(),this.listenEvents(),this.setupPlayerStatsUi())}validateProperties(){return this.gameManager?!!this.events||(u.error("EventsManager undefined in UsersPlugin."),!1):(u.error("Game Manager undefined in UsersPlugin."),!1)}setupPlayerStatsUi(){this.playerStatsUi=new s({events:this.events}),this.playerStatsUi.createPlayerStatsUi()}listenEvents(){this.events.on("reldens.beforeCreateEngine",(e,t)=>{this.initialGameData=e,this.onBeforeCreateEngine(e,t),this.lifeBarUi||(this.lifeBarUi=new n({events:this.events}),this.lifeBarUi.createLifeBarUi(t))})}setTranslations(){if(!this.events||!this.gameManager)return!1;c.forConfig(this.gameManager.config.client,h,l.MESSAGE.DATA_VALUES)}onBeforeCreateEngine(e,t){let i=t.config.get("client/players/multiplePlayers/enabled",!1),r=t.config.get("client/rooms/selection/allowOnLogin",!1),n=f.isTrue(e,"players")?Object.keys(e.players).length:0;if(0<n&&!i&&!r){e.player=e.players[0];return}t.canInitEngine=!1;let s=t.gameDom.getElement(o.SELECTORS.PLAYER_SELECTION);(s.classList.remove("hidden"),i||1!==n)?(i&&0<n&&this.preparePlayerSelector(s,e,t),this.preparePlayerCreator(s,e,t)):this.prepareSinglePlayerInput(s,e,t)}prepareSinglePlayerInput(e,t,i){let r=i.gameDom.getElement(o.SELECTORS.PLAYER_SELECTION_FORM),n=t.player;if(!r||!n)return u.error("Form or player not defined in prepareSinglePlayerInput."),!1;i.gameDom.getElement(o.SELECTORS.PLAYER_SELECT_ELEMENT)?.remove();let s=this.gameManager.services.translator.t(l.SNIPPETS.OPTION_LABEL,{playerName:n.name,currentLevel:n.currentLevel,classPathLabel:n.currentClassPathLabel}),a=i.gameDom.createElement("input");a.type="hidden",a.id=o.SELECTORS.PLAYER_SELECT_ELEMENT,a.value=n.id;let h=i.gameDom.createElement("div");h.innerText=s,r.append(a);let c=i.gameDom.getElement(".player-select-box");c?.append(h),r.addEventListener("submit",t=>(t.preventDefault(),e.classList.add("hidden"),this.submitSelectedPlayer(i,r,a,n),!1)),this.showAvatarContainer(i,t,a),r.classList.remove("hidden")}submitSelectedPlayer(e,t,i,r){e.events.emitSync("reldens.onPrepareSinglePlayerSelectorFormSubmit",{usersPlugin:this,form:t,selectElement:i,player:r,gameManager:e}),e.initEngine().catch(e=>{u.error(e)})}showAvatarContainer(e,t,i){let r=e.gameDom.getElement(o.SELECTORS.PLAYER_SELECTION_ADDITIONAL_INFO);if(!r||!this.gameManager.config.getWithoutLogs("client/players/multiplePlayers/showAvatar",!0))return;let n=e.gameDom.createElement("div");n.className="avatar-container";let s=e.gameDom.createElement("div"),a=t.player.avatarKey;s.classList.add("class-path-select-avatar"),s.style.backgroundImage=`url('/assets/custom/sprites/${a}${o.FILES.EXTENSIONS.PNG}')`;let h=this.gameManager.config.getWithoutLogs("client/players/size/width","0")+"px";s.style.backgroundPositionX="-"+h,s.style.width=h,s.style.height=this.gameManager.config.getWithoutLogs("client/players/size/height","0")+"px",n.append(s),r.append(n)}preparePlayerSelector(e,t,i){let r=i.gameDom.getElement(o.SELECTORS.PLAYER_SELECTION_FORM),n=i.gameDom.getElement(o.SELECTORS.PLAYER_SELECT_ELEMENT);if(!r||!n)return!1;for(let e of(r.addEventListener("submit",e=>{e.preventDefault();let s=n.options[n.selectedIndex].value,a=this.getPlayerById(t.players,Number(s));if(a){let e=r.querySelector(o.SELECTORS.LOADING_CONTAINER);e&&e?.classList.remove(o.CLASSES.HIDDEN),i.initialGameData.player=a,i.events.emitSync("reldens.onPreparePlayerSelectorFormSubmit",{usersPlugin:this,form:r,select:n,selectedPlayer:a,gameManager:i}),i.initEngine().catch(e=>{u.error(e)})}return!1}),Object.keys(t.players))){let i=t.players[e],r=new Option(this.gameManager.services.translator.t(l.SNIPPETS.OPTION_LABEL,{playerName:i.name,currentLevel:i.currentLevel,classPathLabel:i.currentClassPathLabel}),i.id);r.dataset.key=i.avatarKey,n.append(r)}this.showAvatarContainer(i,t,n),r.classList.remove("hidden")}preparePlayerCreator(e,t,i){let r=i.gameDom.getElement(a.SELECTORS.PLAYER_CREATE_FORM);r&&r.addEventListener("submit",e=>{e.preventDefault(),i.gameDom.getElement("#player-create-form .response-error").innerHTML="";let t=new FormData(r),n=f.serializeFormData(t);if(3>n["new-player-name"].toString().length)return!1;i.submitedForm=!0,i.events.emitSync("reldens.onPreparePlayerCreationFormSubmit",{usersPlugin:this,form:r,gameManager:i});try{i.gameRoom.send("*",{act:o.CREATE_PLAYER,formData:n})}catch(e){u.critical("Create player error.",e),i.gameDom.alertReload(i.services.translator.t("game.errors.connectionLost"))}return!1})}getPlayerById(e,t){if(0===e.length)return!1;for(let i of e)if(i.id===t)return i;return!1}}},{"8c20660587da4fd1":"e0xPK",ce28c84d7547fb13:"lXKGm",f776fabb66dbfa58:"ja3Hr","182ad229d5814453":"z0nmL","654cdd1a7a80a011":"3Ex9D","63862da16582548e":"62bet","356170d1146549c3":"42QeM","514d97ef4c40e16":"9RjlI","29f51e27cfc36016":"ijd9L"}],e0xPK:[function(e,t,i,r){let{UsersConst:n}=e("aad623d6d02417c4"),{ActionsConst:s}=e("479d0bf7c66730cb"),{GameConst:a}=e("d5d1589d2f5e4492"),{ObjectsConst:o}=e("50eec9aa11029ed5"),{ObjectsHandler:h}=e("d6180c46f85f20ae"),{sc:c}=e("1d465cbfd4bfebd9");t.exports.LifebarUi=class{constructor(e){this.events=e.events}createLifeBarUi(e){return this.barConfig=e.config.get("client/ui/lifeBar"),!!this.barConfig.enabled&&(this.gameManager=e,this.fixedPositionX=!1,this.fixedPositionY=!1,this.barProperty=this.gameManager.config.get("client/actions/skills/affectedProperty"),this.playerSize=this.gameManager.config.get("client/players/size"),this.lifeBars={},this.lifeDataByKey={},this.listenEvents(),this)}listenEvents(){this.events.on("reldens.playerStatsUpdateAfter",(e,t)=>{this.updatePlayerLifeBar(e,t)}),this.events.on("reldens.joinedRoom",e=>{this.listenMessages(e)}),this.events.on("reldens.runPlayerAnimation",(e,t)=>{this.drawPlayerLifeBar(t)}),this.events.on("reldens.updateGameSizeBefore",(e,t,i)=>{this.drawOnGameResize(t,i)}),this.events.on("reldens.playersOnRemove",(e,t)=>{this.removePlayerLifeBar(t)}),this.events.on("reldens.playerEngineAddPlayer",()=>{this.processLifeBarQueue()}),this.events.on("reldens.createAnimationAfter",()=>{h.drawObjectsLifeBar(this)}),this.events.on("reldens.objectBodyChanged",e=>{h.generateObjectLifeBar(e.key,this)}),this.events.on("reldens.gameEngineShowTarget",(e,t,i)=>{this.showTargetLifeBar(t,i)}),this.events.on("reldens.gameEngineClearTarget",(e,t)=>{this.clearPreviousBar(t)})}drawOnGameResize(e,t){if(!this.barConfig.fixedPosition)return!1;this.setPlayerLifeBarFixedPosition(e,t),this.drawPlayerLifeBar(this.gameManager.getCurrentPlayer().playerId)}clearPreviousBar(e){e&&c.hasOwn(this.lifeBars,e.id)&&this.gameManager.getCurrentPlayer().playerId!==e.id&&this.lifeBars[e.id].destroy()}showTargetLifeBar(e,t){if(!this.barConfig.showOnClick)return!1;this.clearPreviousBar(t),e.type===o.TYPE_OBJECT&&h.generateObjectLifeBar(e.id,this),e.type===a.TYPE_PLAYER&&this.drawPlayerLifeBar(e.id)}barPropertyValue(){return this.barProperty+"Value"}barPropertyTotal(){return this.barProperty+"Total"}setPlayerLifeBarFixedPosition(e,t){if(!e||!t){let i=this.gameManager.gameEngine.getCurrentScreenSize(this.gameManager);e=i.newWidth,t=i.newHeight}let{uiX:i,uiY:r}=this.gameManager.gameEngine.uiScene.getUiConfig("lifeBar",e,t);this.fixedPositionX=i,this.fixedPositionY=r}updatePlayerLifeBar(e,t){let i=t.gameManager.getCurrentPlayer();this.updatePlayerBarData(i.playerId,e.statsBase[this.barProperty],e.stats[this.barProperty]),this.drawPlayerLifeBar(i.playerId)}listenMessages(e){e.onMessage("*",e=>{this.listenBattleEnd(e),this.listenLifeBarUpdates(e)})}listenBattleEnd(e){if(e.act!==s.BATTLE_ENDED||!c.hasOwn(this.lifeBars,e.t))return!1;this.lifeBars[e.t].destroy()}listenLifeBarUpdates(e){if(e.act!==n.ACTION_LIFEBAR_UPDATE)return!1;h.processObjectLifeBarMessage(e,!0,this),this.processPlayerLifeBarMessage(e,!0)}canShowPlayerLifeBar(e){let t=this.gameManager.getCurrentPlayer();if(!c.isFunction(t?.isDeath))return!1;let i=e===t?.playerId;return i&&t&&(t.isDeath()||t.isDisabled())?(this.lifeBars[e]?.setVisible(!1),!1):!!i||!!this.barConfig.showAllPlayers||this.barConfig.showOnClick&&e===this.getCurrentTargetId()}queueLifeBarMessage(e){c.hasOwn(this.gameManager,"lifeBarQueue")||(this.gameManager.lifeBarQueue=[]),this.gameManager.lifeBarQueue.push(e)}processPlayerLifeBarMessage(e,t=!1){if(s.DATA_TYPE_VALUE_PLAYER!==e[s.DATA_OWNER_TYPE])return!1;let i=this.gameManager.getCurrentPlayer(),r=e[s.DATA_OWNER_KEY];return i&&i.players&&i.players[r]?(this.updatePlayerBarData(r,e.totalValue,e.newValue),this.canShowPlayerLifeBar(r)&&this.drawPlayerLifeBar(r),!0):(t&&this.queueLifeBarMessage(e),!1)}updatePlayerBarData(e,t,i){let r=this.gameManager.getCurrentPlayer();r.players[e][this.barPropertyTotal()]=t,r.players[e][this.barPropertyValue()]=i}processLifeBarQueue(){if(0===this.gameManager.lifeBarQueue.length)return!1;let e=[];for(let t of this.gameManager.lifeBarQueue)h.processObjectLifeBarMessage(t,!1,this)&&e.push(t),this.processPlayerLifeBarMessage(t,!1)&&e.push(t);0<e.length&&(this.gameManager.lifeBarQueue=this.gameManager.lifeBarQueue.filter(t=>!e.includes(t)))}drawPlayerLifeBar(e){if(this.destroyByKey(e),!this.canShowPlayerLifeBar(e))return this.lifeBars[e]?.setVisible(!1),!1;let t=this.prepareBarData(e),i=this.barConfig.height,r=this.barConfig.top,n=this.barConfig.width,s=t.player.x-n/2,a=t.player.y-i-r+t.ownerTop/2;return e===this.gameManager.getCurrentPlayer().playerId&&this.barConfig.fixedPosition?(this.lifeBars[e]=this.gameManager.getActiveScenePreloader().add.graphics(),(!1===this.fixedPositionX||!1===this.fixedPositionY)&&this.setPlayerLifeBarFixedPosition(),s=this.fixedPositionX,a=this.fixedPositionY):this.lifeBars[e]=this.gameManager.getActiveScene().add.graphics(),this.drawBar(this.lifeBars[e],t.fullValue,t.filledValue,s,a),this}destroyByKey(e){c.hasOwn(this.lifeBars,e)&&this.lifeBars[e].destroy()}prepareBarData(e){let t=this.gameManager.getCurrentPlayer().players[e],i=t[this.barPropertyTotal()],r=t[this.barPropertyValue()],n=c.get(t,"topOff",0)-this.playerSize.height;return{player:t,fullValue:i,filledValue:r,ownerTop:n}}removePlayerLifeBar(e){if(!c.hasOwn(this.lifeBars,e))return!1;this.lifeBars[e].destroy(),delete this.lifeBars[e]}drawBar(e,t,i,r,n){let s=this.barConfig.height,a=this.barConfig.width;e.clear(),e.fillStyle(parseInt(this.barConfig.fillStyle),1),e.fillRect(r,n,i*a/t,s),e.lineStyle(1,parseInt(this.barConfig.lineStyle)),e.strokeRect(r,n,a,s),e.alpha=.6,e.setDepth(3e5)}getCurrentTargetId(){return c.get(this.gameManager.getCurrentPlayer()?.currentTarget,"id",!1)}getObjectByKey(e){return c.get(this.gameManager.getActiveScene()?.objectsAnimations,e,!1)}}},{aad623d6d02417c4:"42QeM","479d0bf7c66730cb":"ja3Hr",d5d1589d2f5e4492:"z0nmL","50eec9aa11029ed5":"6mDqg",d6180c46f85f20ae:"dKyxB","1d465cbfd4bfebd9":"ijd9L"}],"42QeM":[function(e,t,i,r){let n="users.";t.exports.UsersConst={ACTION_LIFEBAR_UPDATE:"alu",SNIPPETS:{PREFIX:n,OPTION_LABEL:n+"optionLabel"},MESSAGE:{DATA_VALUES:{NAMESPACE:"users"}}}},{}],dKyxB:[function(e,t,i,r){let{ActionsConst:n}=e("66c72f936244bf4c"),{GameConst:s}=e("4fbfbb1e3b1b87b5");t.exports.ObjectsHandler=class{static processObjectLifeBarMessage(e,t=!1,i){if(!this.isValidMessage(e,i))return!1;let r=e[n.DATA_OWNER_KEY],s={};s[i.barPropertyTotal()]=e.totalValue,s[i.barPropertyValue()]=e.newValue,i.lifeDataByKey[r]=s;let a=i.getObjectByKey(r);return a?(this.drawObjectLifeBar(a,e[n.DATA_OWNER_KEY],e.totalValue,e.newValue,i),!0):(t&&i.queueLifeBarMessage(e),!1)}static isValidMessage(e,t){return n.DATA_TYPE_VALUE_OBJECT===e[n.DATA_OWNER_TYPE]&&t.barConfig.showEnemies}static drawObjectsLifeBar(e){for(let t of Object.keys(e.lifeDataByKey)){let i=e.getObjectByKey(t);this.drawObjectLifeBar(i,t,e.lifeDataByKey[t][e.barPropertyTotal()],e.lifeDataByKey[t][e.barPropertyValue()],e)}}static isValidToDraw(e,t,i){return!!e&&s.STATUS.DEATH!==e.inState&&s.STATUS.DISABLED!==e.inState&&!(i.barConfig.showOnClick&&t!==i.getCurrentTargetId())}static generateObjectLifeBar(e,t){let i=t.lifeDataByKey[e];if(!i)return!1;let r=t.getObjectByKey(e);this.drawObjectLifeBar(r,e,i[t.barPropertyTotal()],i[t.barPropertyValue()],t)}static drawObjectLifeBar(e,t,i,r,n){if(n.destroyByKey(t),!this.isValidToDraw(e,t,n))return!1;this.drawLifeBarInPosition(n,t,e,i,r)}static drawLifeBarInPosition(e,t,i,r,n){e.lifeBars[t]=e.gameManager.getActiveScene().add.graphics();let{x:s,y:a}=this.calculateObjectLifeBarPosition(i,e);e.drawBar(e.lifeBars[t],r,n,s,a)}static calculateObjectLifeBarPosition(e,t){return{x:e.x-e.sceneSprite.width/2,y:e.y-e.sceneSprite.height/2-t.barConfig.height-t.barConfig.top}}}},{"66c72f936244bf4c":"ja3Hr","4fbfbb1e3b1b87b5":"z0nmL"}],lXKGm:[function(e,t,i,r){t.exports.PlayerStatsUi=class{constructor(e){this.events=e.events}createPlayerStatsUi(){this.events.on("reldens.beforePreloadUiScene",e=>{if(!e.gameManager.config.get("client/ui/playerStats/enabled"))return!1;e.load.html("playerStats","/assets/html/ui-player-stats.html"),e.load.html("playerStat","/assets/html/player-stat.html")}),this.events.on("reldens.beforeCreateUiScene",e=>{let t=e.getUiConfig("playerStats");if(!t.enabled)return!1;let i=e.add.dom(t.uiX,t.uiY).createFromCache("playerStats"),r=i.getChildByProperty("id","player-stats-close"),n=i.getChildByProperty("id","player-stats-open");n?.addEventListener("click",()=>{let t=i.getChildByProperty("id","player-stats-ui");t.style.display="block",n.style.display="none",i.setDepth(4),this.events.emit("reldens.openUI",{ui:this,openButton:n,dialogBox:i,dialogContainer:t,uiScene:e})}),r?.addEventListener("click",()=>{let t=i.getChildByProperty("id","player-stats-ui");t.style.display="none",n&&(n.style.display="block"),i.setDepth(1),this.events.emit("reldens.closeUI",{ui:this,closeButton:r,openButton:n,dialogBox:i,dialogContainer:t,uiScene:e})}),e.elementsUi.playerStats=i})}}},{}],"3Ex9D":[function(e,t,i,r){t.exports={users:{optionLabel:"%playerName - LvL %currentLevel - %classPathLabel"}}},{}],aBOFr:[function(e,t,i,r){let{AudioManager:n}=e("541d832742a00ab5"),{SceneAudioPlayer:s}=e("fb79730c9351b42b"),{MessagesListener:a}=e("1d50534b7413d902"),{AudioUi:o}=e("c9088bc3e4085a8a"),{TranslationsMapper:h}=e("6f071ff9a7a2b90e"),c=e("818427dea57ab21c"),{PluginInterface:l}=e("21904e239c915c7f"),{AudioConst:d}=e("587f9c67cc5dcf55"),{Logger:u,sc:f}=e("d13dcc30aa283061");t.exports.AudioPlugin=class extends l{setup(e){this.events=f.get(e,"events",!1),this.events||u.error("EventsManager undefined in AudioPlugin."),this.gameManager=f.get(e,"gameManager",!1),this.gameManager||u.error("Game Manager undefined in AudioPlugin."),this.setTranslations(),this.messagesListener=new a,this.sceneAudioPlayer=s,this.initialAudiosData={},this.listenEvents()}setTranslations(){if(!this.gameManager)return!1;h.forConfig(this.gameManager.config.client,c,d.MESSAGE.DATA_VALUES)}listenEvents(){if(!this.events)return!1;this.events.on("reldens.joinedRoom",(e,t)=>{this.initializeAudioManager(t),this.messagesListener.listenMessages(e,t)}),this.events.on("reldens.preloadUiScene",async e=>{e.load.html("audio","/assets/html/ui-audio.html"),e.load.html("audio-category","/assets/html/ui-audio-category-row.html")}),this.events.on("reldens.createUiScene",e=>{this.uiManager=new o(e)}),this.events.on("reldens.afterSceneDynamicCreate",async e=>{let t=e.gameManager.audioManager;if(!t)return u.warning("Audio manager undefined in AudioPlugin."),!1;let i=f.get(this.initialAudiosData,"globalAudios",{});await t.loadGlobalAudios(i,e),await this.messagesListener.processQueue(),this.uiManager&&0===e.gameManager.gameDom.getElements(".audio-setting").length&&this.uiManager.createUi(),this.sceneAudioPlayer.associateSceneAnimationsAudios(t,e),e.cameras.main.on("camerafadeincomplete",()=>{this.sceneAudioPlayer.playSceneAudio(t,e)})}),this.events.on("reldens.changeSceneDestroyPrevious",e=>{e.gameManager.audioManager.destroySceneAudios()}),this.events.on("reldens.allAudiosLoaded",(e,t,i)=>{this.sceneAudioPlayer.playSceneAudio(e,i,!0)})}initializeAudioManager(e){e.audioManager||(e.initialGameData.player||u.warning("Missing initialGameData.player",e.initialGameData),e.audioManager=new n({events:this.events,currentPlayerData:e.initialGameData.player}),e.audioManager.updateDefaultConfig(e.config.getWithoutLogs("client/general/audio/defaultAudioConfig")),this.initialAudiosData=f.get(e.initialGameData,"audio",{}))}}},{"541d832742a00ab5":"41You",fb79730c9351b42b:"10mna","1d50534b7413d902":"lEfcG",c9088bc3e4085a8a:"999UV","6f071ff9a7a2b90e":"62bet","818427dea57ab21c":"eWWxI","21904e239c915c7f":"9RjlI","587f9c67cc5dcf55":"cwWYv",d13dcc30aa283061:"ijd9L"}],"41You":[function(e,t,i,r){let{AudioConst:n}=e("326aa6ee5d80738b"),{Logger:s,sc:a}=e("bddd20eeb20a74c3");t.exports.AudioManager=class{constructor(e){this.events=a.get(e,"events",!1),this.events||s.error("EventsManager undefined in AudioManager."),this.globalAudios=a.get(e,"globalAudios",{}),this.roomsAudios=a.get(e,"roomsAudios",{}),this.categories=a.get(e,"categories",{}),this.playerConfig=a.get(e,"playerConfig",{}),this.currentPlayerData=a.get(e,"currentPlayerData",{}),this.playing={},this.currentMuteState=!1,this.changedMutedState={},this.lockedMuteState=!1,this.defaultAudioConfig={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!0,delay:0}}async setAudio(e,t){if(this.lockedMuteState)return s.info("Locked mute state to set audio."),!1;await this.events.emit("reldens.setAudio",{audioManager:this,categoryKey:e,enabled:t});let i=this.categories[e];if(this.playerConfig[i.id]=+!!t,!a.hasOwn(this.playing,e))return!0;let r=t?"play":"stop",n=this.playing[e];return i.single_audio&&a.isObjectFunction(n,r)?this.setAudioForSingleEntity(n,r,e,t):this.setAudioForElementChildren(n,i,t)}setAudioForSingleEntity(e,t,i,r){if(!e)return s.error("Missing playingElement.",{audioKey:i,playingElement:e}),!1;if(!e.currentConfig)return!1;if(!a.isObjectFunction(e,t))return s.error("Missing playOrStop method in playingElement.",{audioKey:i,playOrStop:t,playingElement:e}),!1;try{e[t](),e.mute=!r}catch(r){s.error("PlayingElement error.",{audioKey:i,playOrStop:t,playingElement:e,error:r})}return!0}setAudioForElementChildren(e,t,i){if(t.single_audio)return!1;let r=Object.keys(e);if(0===r.length)return!1;for(let t of r)this.setAudioForSingleEntity(e[t],"stop",t,i);return!0}generateAudio(e,t){let i=Object.assign({},this.defaultAudioConfig,t.config||{});if(!a.hasOwn(e.cache.audio.entries.entries,t.audio_key))return s.error("Audio file does not exists. Key: "+t.audio_key,e.cache.audio.entries.entries),!1;let r=e.sound.add(t.audio_key,i);if(t.related_audio_markers&&0<t.related_audio_markers.length)for(let e of t.related_audio_markers){let t=Object.assign({},i,e.config||{},{name:e.marker_key,start:e.start,duration:e.duration});r.addMarker(t)}return{data:t,audioInstance:r}}findAudio(e,t){return this.findRoomAudio(e,t)||this.findGlobalAudio(e)}findRoomAudio(e,t){return a.hasOwn(this.roomsAudios,t)||(this.roomsAudios[t]={}),this.findAudioInObjectKey(e,this.roomsAudios[t])}findGlobalAudio(e){return this.findAudioInObjectKey(e,this.globalAudios)}findAudioInObjectKey(e,t){if(a.hasOwn(t,e))return{audio:t[e],marker:!1};let i=Object.keys(t);if(0===i.length)return!1;for(let r of i){let i=t[r];if(a.hasOwn(i.audioInstance.markers,e))return{audio:i,marker:e}}return!1}addCategories(e){for(let t of e)a.hasOwn(this.categories,t.category_key)||(this.categories[t.category_key]=t),a.hasOwn(this.playing,t.category_key)||(this.playing[t.category_key]={})}async loadGlobalAudios(e,t){let i=Object.keys(e);if(0===i.length)return!1;await this.loadByKeys(i,e,t,"globalAudios")}async loadAudiosInScene(e,t){let i=Object.keys(e);if(0===i.length)return!1;a.hasOwn(this.roomsAudios,t.key)||(this.roomsAudios[t.key]={}),await this.loadByKeys(i,e,t,"roomsAudios")}async loadByKeys(e,t,i,r){let n=0;for(let a of e){let e=t[a];this.removeSceneAudioByAudioKey(i,e.audio_key);let o=await this.prepareFiles(e);if(0===o.length)continue;let h=i.load.audio(e.audio_key,o);h.on("filecomplete",async a=>{if(a!==e.audio_key)return!1;let o=this.generateAudio(i,e);if(!1===o)return s.error("AudioLoader can not generate the audio.",{"Audio key:":e.audio_key,"Storage key:":r}),!1;"roomsAudios"===r?this.roomsAudios[i.key][e.audio_key]=o:this.globalAudios[e.audio_key]=o,n++,await this.fireAudioEvents(t,i,e,n)}),h.start()}}async existsFileByXMLHttpRequest(e){try{let t=await fetch(e,{method:"HEAD"});return 404!==t.status}catch(e){return s.error("Error fetching:",e),!1}}async prepareFiles(e){let t=e.files_name.split(","),i=[];for(let e of t){let t=n.AUDIO_BUCKET+"/"+e;!1!==await this.existsFileByXMLHttpRequest(t)&&i.push(t)}return i}async fireAudioEvents(e,t,i,r){await t.gameManager.events.emit("reldens.audioLoaded",this,e,t,i),r===e.length&&await t.gameManager.events.emit("reldens.allAudiosLoaded",this,e,t,i)}removeAudiosFromScene(e,t){if(0===e.length||!t)return!1;for(let i of e)this.removeSceneAudioByAudioKey(t,i.audio_key);return!0}removeSceneAudioByAudioKey(e,t){e.sound.removeByKey(t),a.hasOwn(e.cache.audio.entries.entries,t)&&delete e.cache.audio.entries.entries[t],a.hasOwn(this.roomsAudios[e.key],t)&&delete this.roomsAudios[e.key][t],a.hasOwn(this.globalAudios,t)&&delete this.globalAudios[t]}updateDefaultConfig(e){a.isObject(e)&&Object.assign(this.defaultAudioConfig,e)}async processUpdateData(e,t,i){e.playerConfig&&(this.playerConfig=e.playerConfig),e.categories&&(this.addCategories(e.categories),await this.events.emit("reldens.audioManagerUpdateCategoriesLoaded",this,t,i,e));let r=a.get(e,"audios",{});if(0<Object.keys(r).length){let n=i.gameEngine.scene.getScene(t.name);await this.loadAudiosInScene(r,n),await this.events.emit("reldens.audioManagerUpdateAudiosLoaded",this,t,i,e)}}async processDeleteData(e,t,i){if(0===e.audios.length)return!1;let r=i.gameEngine.scene.getScene(t.name);this.removeAudiosFromScene(e.audios,r),await this.events.emit("reldens.audioManagerDeleteAudios",this,t,i,e)}destroySceneAudios(){let e=Object.keys(this.playing);if(0===e.length)return!1;for(let t of e){let e=this.playing[t],i=this.categories[t];if(i.single_audio&&a.isObjectFunction(e,"stop")){e.stop(),delete this.playing[t];continue}let r=Object.keys(e);if(i.single_audio||0!==r.length)for(let i of r){let r=e[i];a.isObjectFunction(r,"stop")&&(r.stop(),delete r[t])}}}async changeMuteState(e,t){return(!1===t&&(this.lockedMuteState=!1),this.currentMuteState=e,this.lockedMuteState&&!1!==t)?(s.info("Locked mute state from changes."),!1):e?await this.muteCategories(t):await this.restoreMute(t)}async muteCategories(e){let t=Object.keys(this.categories);if(0<t.length)return s.info("Mute categories not found."),!1;for(let e of t)this.changedMutedState[e]=this.currentMuteState,await this.setAudio(e,!1);return this.setMuteLock(e),!0}async restoreMute(e){let t=Object.keys(this.changedMutedState);if(0===t.length)return this.setMuteLock(e),!1;for(let e of t)await this.setAudio(e,!0);return this.setMuteLock(e),this.changedMutedState={},!0}setMuteLock(e){!1===e&&(this.lockedMuteState=!1),!0===e&&(this.lockedMuteState=!0)}}},{"326aa6ee5d80738b":"cwWYv",bddd20eeb20a74c3:"ijd9L"}],cwWYv:[function(e,t,i,r){t.exports.AudioConst={AUDIO_UPDATE:"ap",AUDIO_DELETE:"ad",AUDIO_ANIMATION_KEY_START:"i_",AUDIO_ANIMATION_KEY_UPDATE:"u_",AUDIO_ANIMATION_KEY_COMPLETE:"c_",AUDIO_ANIMATION_KEY_REPEAT:"r_",AUDIO_ANIMATION_KEY_STOP:"s_",AUDIO_BUCKET:"/assets/audio",MESSAGE:{DATA:{UPDATE_TYPE:"ck",UPDATE_VALUE:"uv"},DATA_VALUES:{NAMESPACE:"audio"}}}},{}],"10mna":[function(e,t,i,r){let{AudioConst:n}=e("30220416ce7546a9"),{Logger:s,sc:a}=e("f35c0a4a20893403");t.exports.SceneAudioPlayer=new class{playSceneAudio(e,t,i){let r=t.associatedAudio;return(!0===i||!1!==r&&(!r||!r.audio.audioInstance.isPlaying))&&(t.associatedAudio=e.findAudio(t.key,t.key),!!t.associatedAudio&&(this.playSpriteAudio(t.associatedAudio,t,!1,e),t.associatedAudio))}associateSceneAnimationsAudios(e,t){t.cameras.main.on("camerafadeincomplete",()=>{if(t.children.list.length<=0)return!1;for(let i of t.children.list)"Sprite"===i.type&&(i.on("animationstart",r=>{let s=n.AUDIO_ANIMATION_KEY_START+r.key,a=this.attachAudioToSprite(i,s,e,t);!1!==a&&this.playSpriteAudio(a,t,i,e)}),i.on("animationupdate",r=>{let s=n.AUDIO_ANIMATION_KEY_UPDATE+r.key,a=this.attachAudioToSprite(i,s,e,t);!1!==a&&this.playSpriteAudio(a,t,i,e)}),i.on("animationcomplete",r=>{let s=n.AUDIO_ANIMATION_KEY_COMPLETE+r.key,a=this.attachAudioToSprite(i,s,e,t);!1!==a&&this.playSpriteAudio(a,t,i,e)}),i.on("animationrepeat",r=>{let s=n.AUDIO_ANIMATION_KEY_REPEAT+r.key,a=this.attachAudioToSprite(i,s,e,t);!1!==a&&this.playSpriteAudio(a,t,i,e)}),i.on("animationstop",r=>{let s=n.AUDIO_ANIMATION_KEY_STOP+r.key,a=this.attachAudioToSprite(i,s,e,t);!1!==a&&this.playSpriteAudio(a,t,i,e)}))})}attachAudioToSprite(e,t,i,r){return a.hasOwn(e.associatedAudio,t)||(a.hasOwn(e,"associatedAudio")||(e.associatedAudio={}),a.hasOwn(e.associatedAudio,t)||(e.associatedAudio[t]=i.findAudio(t,r.key))),e.associatedAudio[t]}playSpriteAudio(e,t,i,r){let n=Number(r.currentPlayerData.id),o=Number(a.get(i,"player_id")),h=this.isCurrentPlayerSprite(o,n);if(e.audio.data.config?.onlyCurrentPlayer&&!h)return!1;let c=t.player;if(h&&c&&(c.isDisabled()||c.isDeath()))return!1;if(!e||!e.audio||!e.audio.data)return s.error("Missing associated audio data.",e),!1;let l=e.audio.data.related_audio_categories.category_key,d=a.get(r.categories,l,!1),u=a.get(r.playerConfig,d.id,d.enabled);if(!d||!u)return!1;let f=e.audio.audioInstance;if(d.single_audio&&a.isObjectFunction(r.playing[d.category_key],"stop")&&r.playing[d.category_key].stop(),d.single_audio)return r.playing[d.category_key]=f,!this.isMutedState(r,d.category_key,f)&&(f.mute=!1,f.play(),!0);if(!d.single_audio){if(!e.marker)return r.playing[d.category_key][e.audio.data.audio_key]=f,!this.isMutedState(r,d.category_key,f)&&(f.mute=!1,f.play(),!0);if(e.marker)return r.playing[d.category_key][e.marker]=f,!this.isMutedState(r,d.category_key,f)&&(f.mute=!1,f.play(e.marker),!0)}}isCurrentPlayerSprite(e,t){return e&&e===t}isMutedState(e,t,i){return!1!==e.currentMuteState&&(s.info("AudioManager in muted state to play audio.",{mutedKey:t,audioInstance:i}),e.changedMutedState[t]=e.currentMuteState,!0)}}},{"30220416ce7546a9":"cwWYv",f35c0a4a20893403:"ijd9L"}],lEfcG:[function(e,t,i,r){let{AudioConst:n}=e("f38271dbda4592b9");t.exports.MessagesListener=class{constructor(){this.queueMessages=[],this.sceneReady=!1}listenMessages(e,t){e.onMessage("*",async i=>{await this.processMessage(i,e,t)})}async processQueue(){if(this.sceneReady=!0,0===this.queueMessages.length)return!1;let e=[...this.queueMessages];for(let t of(this.queueMessages=[],e)){let{message:e,room:i,gameManager:r}=t;await this.processMessage(e,i,r)}return!0}async processMessage(e,t,i){!1===this.sceneReady?this.queueMessages.push({message:e,room:t,gameManager:i}):(e.act===n.AUDIO_UPDATE&&await i.audioManager.processUpdateData(e,t,i),e.act===n.AUDIO_DELETE&&await i.audioManager.processDeleteData(e,t,i))}}},{f38271dbda4592b9:"cwWYv"}],"999UV":[function(e,t,i,r){let{SceneAudioPlayer:n}=e("d9b7615cb55a6656"),{AudioUpdate:s}=e("9bae50dfe6fad086"),{sc:a}=e("fc209b9537d685a9");t.exports.AudioUi=class{constructor(e){this.uiScene=e,this.gameManager=this.uiScene.gameManager,this.audioManager=this.gameManager.audioManager,this.sceneAudioPlayer=n}createUi(){if(!this.audioManager.categories)return;let e=this.uiScene.cache.html.get("audio"),t=this.uiScene.cache.html.get("audio-category"),i=this.prepareAudioSettingsContent(t,e);this.gameManager.gameDom.appendToElement("#settings-dynamic",i);let r=this.gameManager.gameDom.getElements(".audio-setting");if(0===r.length)return!1;for(let e of r)e.addEventListener("click",async t=>{await this.audioManager.setAudio(t.target.dataset.categoryKey,e.checked),this.gameManager.activeRoomEvents.send(new s(e.value,e.checked)),this.sceneAudioPlayer.playSceneAudio(this.audioManager,this.gameManager.getActiveScene())})}prepareAudioSettingsContent(e,t){let i=this.prepareCategoriesRows(e);return this.gameManager.gameEngine.parseTemplate(t,{audioCategories:i,settingsTitle:this.gameManager.services.translator.t("audio.settingsTitle")})}prepareCategoriesRows(e){let t="";for(let i of Object.keys(this.audioManager.categories)){let r=this.audioManager.categories[i],n=a.get(this.audioManager.playerConfig,r.id,r.enabled);t+=this.gameManager.gameEngine.parseTemplate(e,{categoryId:r.id,categoryLabel:r.category_label,categoryKey:r.category_key,categoryChecked:n?' checked="checked"':""})}return t}}},{d9b7615cb55a6656:"10mna","9bae50dfe6fad086":"fovr7",fc209b9537d685a9:"ijd9L"}],fovr7:[function(e,t,i,r){let{AudioConst:n}=e("206716204b95df4c"),{GameConst:s}=e("c7ddf895e347bc66");t.exports.AudioUpdate=class{constructor(e,t){this[s.ACTION_KEY]=n.AUDIO_UPDATE,this[n.MESSAGE.DATA.UPDATE_TYPE]=e,this[n.MESSAGE.DATA.UPDATE_VALUE]=t}}},{"206716204b95df4c":"cwWYv",c7ddf895e347bc66:"z0nmL"}],eWWxI:[function(e,t,i,r){t.exports={audio:{settingsTitle:"Audio Settings"}}},{}],aaOsc:[function(e,t,i,r){let{ActionsConst:n}=e("1e41f2c4a061523b"),{RoomsConst:s}=e("c28085823a93fbc9"),{PluginInterface:a}=e("6710f6d3bb0219bd"),{Logger:o,sc:h}=e("4de0a3d14a3e7a84");t.exports.RoomsPlugin=class extends a{async setup(e){this.gameManager=h.get(e,"gameManager",!1),this.gameManager||o.error("Game Manager undefined in RoomsPlugin."),this.events=h.get(e,"events",!1),this.events||o.error("EventsManager undefined in RoomsPlugin."),this.events.on("reldens.beforeCreateEngine",(e,t)=>{t.config.get("client/rooms/selection/allowOnLogin",!1)&&e.roomSelection&&this.populateSceneSelector(e.roomSelection,t)}),this.events.on("reldens.onPrepareSinglePlayerSelectorFormSubmit",e=>{this.appendSelectedScene(e.gameManager,e.form)}),this.events.on("reldens.onPreparePlayerSelectorFormSubmit",e=>{this.appendSelectedScene(e.gameManager,e.form)}),this.events.on("reldens.onPreparePlayerCreationFormSubmit",e=>{this.appendSelectedScene(e.gameManager,e.form)})}populateSceneSelector(e,t){let i=t.gameDom.getElement(n.SELECTORS.PLAYER_CREATION_ADDITIONAL_INFO),r=t.gameDom.getElement(n.SELECTORS.PLAYER_SELECTION_ADDITIONAL_INFO);if(!i&&!r)return o.warning("Missing element.",{playerCreationAdditional:i,playerSelectionAdditional:r}),!1;if(i){let r=this.filterCreationRooms(e),n=this.createSelectorElements(t,r,"creation");i.append(n)}if(r){let i=this.createSelectorElements(t,e,"selection");r.append(i)}}filterCreationRooms(e){let t=[];for(let i of e)i.name!==s.ROOM_LAST_LOCATION_KEY&&t.push(i);return t}appendSelectedScene(e,t){let i=e.gameDom.getElement(".scene-select-single",t);if(i){e.initialGameData.selectedScene=i.value;return}let r=e.gameDom.getElement(".scene-select",t);if(!r)return;let n=r.options[r.selectedIndex]?.value;n&&(e.initialGameData.selectedScene=n)}createSelectorElements(e,t,i){let r=i+"SelectedScene";if(1===t.length){let i=e.gameDom.createElement("input");return i.type="hidden",i.name=r,i.id=r,i.classList.add("scene-select-single"),i.value=t.shift().name,i}let n=e.gameDom.createElement("div");n.classList.add("input-box");let s=e.gameDom.createElement("label");s.htmlFor=r,s.innerText=this.gameManager.services.translator.t("game.pleaseSelectScene");let a=e.gameDom.createElement("select");for(let e of(a.name=r,a.id=r,a.classList.add("select-element"),a.classList.add("scene-select"),t)){let t=new Option(e.title,e.name);a.append(t)}return n.append(s),n.append(a),n}}},{"1e41f2c4a061523b":"ja3Hr",c28085823a93fbc9:"glvjH","6710f6d3bb0219bd":"9RjlI","4de0a3d14a3e7a84":"ijd9L"}],j8UE4:[function(e,t,i,r){let{PredictionWorldCreator:n}=e("1f99afae6127aa6e"),{RoomEventsOverride:s}=e("fd23b82a5f097c7a"),{PluginInterface:a}=e("eb3ab2d7c28717c2"),{Logger:o,sc:h}=e("fc917919e6e14072");t.exports.PredictionPlugin=class extends a{async setup(e){this.gameManager=h.get(e,"gameManager",!1),this.events=h.get(e,"events",!1),this.predictionWorldCreator=new n,this.roomEventsOverride=new s,this.validateProperties()&&this.listenEvents()}validateProperties(){return this.gameManager?!!this.events||(o.error("EventsManager undefined in PredictionPlugin."),!1):(o.error("Game Manager undefined in PredictionPlugin."),!1)}listenEvents(){this.events.on("reldens.createEngineSceneDone",async e=>{await this.predictionWorldCreator.createSceneWorld(e.currentScene)}),this.events.on("reldens.createdRoomsEventsInstance",(e,t)=>{this.roomEventsOverride.createCurrentPlayerOverride(t.activeRoomEvents),this.roomEventsOverride.playerOnChangeOverride(t.activeRoomEvents),this.roomEventsOverride.createPlayerEngineInstanceOverride(t.activeRoomEvents),this.roomEventsOverride.createSceneInstanceOverride(t.activeRoomEvents)})}}},{"1f99afae6127aa6e":"lSm7J",fd23b82a5f097c7a:"gOWjM",eb3ab2d7c28717c2:"9RjlI",fc917919e6e14072:"ijd9L"}],lSm7J:[function(e,t,i,r){let{CollisionsManager:n}=e("804590972ed05c20"),{P2world:s}=e("398044c66c46a0d1"),{WorldPointsValidator:a}=e("1ceec76f8d305544"),{WorldTimer:o}=e("6582f8b293532f90"),{Logger:h,sc:c}=e("8c1495bc004bacd5");t.exports.PredictionWorldCreator=class{async createSceneWorld(e){if(!e.experimentalClientPrediction)return;let t=this.findValidLayers(e),i=this.cloneMapJson(e,t),r={sceneName:e.key,roomId:e.params.roomId,roomMap:e.params.roomMap,mapJson:i,config:e.configManager,events:e.eventsManager,allowSimultaneous:e.configManager.get("client/general/controls/allowSimultaneousKeys",!0),worldConfig:e.gameManager.activeRoomEvents.roomData?.worldConfig||e.worldConfig};e.worldPrediction=this.createWorldInstance(r),e.worldPrediction.createLimits(),await e.worldPrediction.createWorldContent({});let s=e.gameManager.getCurrentPlayer();if(!s)return void h.error("Current player not present for prediction.");let c={id:s.playerId,width:e.configManager.get("client/players/physicalBody/width"),height:e.configManager.get("client/players/physicalBody/height"),bodyState:s.state},l=e.worldPrediction.createPlayerBody(c);l.updateBodyState=this.updateBodyStateOverride(l,s),s.predictionBody=l,e.worldPredictionTimer=new o({callbacks:[()=>{e.worldPrediction?e.worldPrediction.removeBodiesFromWorld():h.error("Scene World not longer exists.",e.roomWorld)}]}),e.worldPredictionTimer.startWorldSteps(e.worldPrediction),e.collisionsManager=new n({roomWorld:e.worldPrediction}),s.pointsValidator=new a(i.width,i.height)}cloneMapJson(e,t){return Object.assign({},e.cache?.tilemap?.entries?.entries[e.tileset.name]?.data||{},{layers:t})}findValidLayers(e){let t=[];for(let i of e.cache.tilemap.entries.entries[e.tileset.name].data.layers)-1!==i.name.indexOf("collision")&&t.push(i);return t}updateBodyStateOverride(e,t){return()=>{if(!c.hasOwn(e.bodyState,"x")||!c.hasOwn(e.bodyState,"y")||!e.position[0]||!e.position[1])return;if(e.isNotMoving()){e.bodyState.mov=!1;return}e.bodyState.x!==e.position[0]&&(e.bodyState.x=e.position[0]),e.bodyState.y!==e.position[1]&&(e.bodyState.y=e.position[1]);let i=0!==Number(Number(e.velocity[0]).toFixed(2))||0!==Number(e.velocity[1].toFixed(2));e.bodyState.mov!==i&&(e.bodyState.mov=i);let r={x:e.position[0],y:e.position[1],dir:e.bodyState.dir};t.updatePlayer(t.playerId,{state:r})}}createWorldInstance(e){return new s(e)}}},{"804590972ed05c20":"fPyhj","398044c66c46a0d1":"4TtiY","1ceec76f8d305544":"eFP7h","6582f8b293532f90":"4O4zD","8c1495bc004bacd5":"ijd9L"}],fPyhj:[function(e,t,i,r){let{PhysicalBody:n}=e("8b976b60c28092e0"),{ErrorManager:s,Logger:a,sc:o}=e("92f5971959d19587");t.exports.CollisionsManager=class{constructor(e){this.room=null,this.guestEmailDomain="",this.activateCollisions(e)}activateCollisions(e){e&&(this.room=e,o.hasOwn(this.room,"roomWorld")||s.error("Room world not found."),this.guestEmailDomain=this.room.config.getWithoutLogs("server/players/guestsUser/emailDomain"),this.room.roomWorld.on("postBroadphase",this.onWorldStepStart.bind(this)),this.room.roomWorld.on("preSolve",this.beforeResolveCollision.bind(this)),this.room.roomWorld.on("beginContact",this.onCollisionsBegin.bind(this)),this.room.roomWorld.on("endContact",this.onCollisionsEnd.bind(this)))}onWorldStepStart(e){let{pairs:t}=e;if(1>=t.length)return;let i=!1,r=!1,n=!1,s=!1;for(let e of t)e.playerId&&e.pStop&&e.stopFull(),e.roomObject&&e.pStop&&e.stopFull(),e.playerId&&(n=e),e.isBullet&&(i&&!r&&(r=e),i||(i=e),e.removeInvalidStateBulletBody()),e.isRoomObject&&!e.isBullet&&(s=e);this.room.roomWorld.bulletsStopOnPlayer&&n&&i&&n.stopFull(),this.room.roomWorld.bulletsStopOnObject&&s&&i&&s.stopFull(),this.removeIdleBullets()}removeIdleBullets(){if(0!==this.room.roomWorld.removeBulletsStateIds.length)for(let e of this.room.roomWorld.removeBulletsStateIds)this.room.state.removeBody(e),this.room.roomWorld.removeBulletsStateIds.splice(this.room.roomWorld.removeBulletsStateIds.indexOf(e),1)}beforeResolveCollision(e){if(this.room.roomWorld.allowPassWallsFromBelow)for(let t of e.contactEquations){let e=this.getPlayerBody(t),i=this.getWallBody(t);if(!e||!i||i.isWorldWall)return;e.position[1]>i.position[1]&&(t.enabled=!1)}}onCollisionsBegin(e){let t=e.bodyA,i=e.bodyB,r=!1,n=!1,s=!1;return t.playerId&&i.playerId?this.playerHitPlayerBegin(t,i):(t.playerId&&(r=t,n=i),i.playerId&&(r=i,n=t),r&&n.isRoomObject)?this.playerHitObjectBegin(r,n):r&&n.changeScenePoint?this.playerHitChangePointBegin(r,n):r&&n.isWall?this.playerHitWallBegin(r,n):t.isRoomObject&&i.isRoomObject?this.objectHitObjectBegin(t,i):void(t.isRoomObject&&(s=t,n=i),i.isRoomObject&&(s=i,n=t),s&&n.isWall&&this.objectHitWallBegin(s,n))}onCollisionsEnd(e){let t=e.bodyA,i=e.bodyB,r=!1,n=!1,s=!1;return(e.bodyA.playerId&&e.bodyB.playerId&&this.playerHitPlayerEnd(e.bodyA,e.bodyB),t.playerId&&(r=t,n=i),i.playerId&&(r=i,n=t),r&&n.isRoomObject)?this.playerHitObjectEnd(r,n):r&&n.isWall?this.playerHitWallEnd(r,n):(t.isRoomObject&&i.isRoomObject&&this.objectHitObjectEnd(t,i),t.isRoomObject&&(s=t,n=i),i.isRoomObject&&(s=i,n=t),s&&n.isWall)?this.objectHitWallEnd(s,n):void 0}playerHitPlayerBegin(e,t){this.room.events.emit("reldens.playerHitPlayer",{bodyA:e,bodyB:t})}playerHitPlayerEnd(e,t){e.stopFull(),t.stopFull(),this.room.events.emit("reldens.playerHitPlayerEnd",{bodyA:e,bodyB:t})}playerHitObjectBegin(e,t){this.room.events.emit("reldens.startPlayerHitObjectBegin",{playerBody:e,otherBody:t}),this.findAlternativePath(e),t.roomObject&&o.isFunction(t.roomObject.onHit)&&t.roomObject.onHit({bodyA:e,bodyB:t,room:this.room}),this.room.events.emit("reldens.endPlayerHitObjectBegin",{playerBody:e,otherBody:t})}playerHitObjectEnd(e,t){let i={stopFull:!0,continue:!0};if(this.room.events.emit("reldens.playerHitObjectEnd",{playerBody:e,result:i}),!i.continue)return!1;e.stopFull(i.stopFull)}playerHitWallBegin(e,t){this.room.events.emit("reldens.playerHitWallBegin",{playerBody:e,wallBody:t})}playerHitWallEnd(e,t){if(this.room.events.emit("reldens.startPlayerHitWallEnd",{playerBody:e,wallBody:t}),e.autoMoving&&1<e.autoMoving.length){let t=e.autoMoving.pop();e.moveToPoint({column:t[0],row:t[1]});return}e.world&&!e.world.applyGravity&&e.stopFull(!0),this.room.events.emit("reldens.endPlayerHitWallEnd",{playerBody:e,wallBody:t})}playerHitChangePointBegin(e,t){if(this.room.events.emit("reldens.startPlayerHitChangePoint",{collisionsManager:this,playerBody:e,changePoint:t}),e.resetAuto(),o.get(e,"isChangingScene",!1))return a.info("Player is busy for a change point: "+e.playerId),!1;let i=this.room.playerBySessionIdFromState(e.playerId),r=this.room.getClientById(e.playerId),n=-1!==r.auth.email?.indexOf(this.guestEmailDomain);if(!this.room.validateRoom(t.changeScenePoint,n,!0))return a.info("Guest Player hit change point but is not allowed to the room: "+i.state.scene),this.room.events.emit("reldens.guestInvalidChangePoint",{collisionsManager:this,playerBody:e,changePoint:t,playerSchema:i,contactClient:r,isGuest:n}),!1;let s={x:e.position[0],y:e.position[1]};this.room.state.positionPlayer(e.playerId,s);let h={prev:i.state.scene,next:t.changeScenePoint};e.isChangingScene=!0,this.room.nextSceneInitialPosition(r,h,e).catch(e=>{a.error("There was an error while setting the next scene initial position.",e)}),this.room.events.emit("reldens.endPlayerHitChangePoint",{collisionsManager:this,playerSchema:i,playerBody:e,changePoint:t,changeData:h})}objectHitObjectBegin(e,t){this.room.events.emit("reldens.startObjectHitObject",{bodyA:e,bodyB:t});let i=o.hasOwn(e,"hitPriority"),r=o.hasOwn(t,"hitPriority"),n={bodyA:e,bodyB:t,room:this.room},s=(i||r)&&(!i||r&&!(i>r))?t:e;s.roomObject&&o.isFunction(s.roomObject?.onHit)&&s.roomObject.onHit(n),e.isBullet&&e.roomObject.removeBullet(e),t.isBullet&&t.roomObject.removeBullet(t),this.findAlternativePath(e),this.findAlternativePath(t),this.room.events.emit("reldens.endObjectHitObject",{bodyA:e,bodyB:t,priorityObject:s})}objectHitObjectEnd(e,t){this.bodyFullStop(e),this.bodyFullStop(t),this.room.events.emit("reldens.objectHitObjectEnd",{bodyA:e,bodyB:t})}objectHitWallBegin(e,t){let i={objectBody:e,wall:t,continue:!0};return this.room.events.emit("reldens.objectHitWallBegin",i),i.continue&&e.isBullet&&e.roomObject.removeBullet(e),i}objectHitWallEnd(e){this.room.events.emit("reldens.startObjectHitWall",{objectBody:e}),this.resetObjectAutoMove(e),this.room.events.emit("reldens.endObjectHitWall",{objectBody:e})}bodyFullStop(e){if(!e)return!1;!(e.autoMoving&&0<e.autoMoving.length)&&!e.isBullet&&e.isRoomObject&&e instanceof n&&e.stopFull(!0),e.isBullet&&e.roomObject.removeBullet(e)}findAlternativePath(e){if(!e.autoMoving||0===e.autoMoving.length)return!1;let t=e.autoMoving.shift(),i=e.autoMoving.pop();e.autoMoving=e.getPathFinder().findPath(t,i)}resetObjectAutoMove(e){if(!(e instanceof n)||!e.world)return;let t=!1;if(o.isArray(e.autoMoving)&&0<e.autoMoving.length&&(t=e.autoMoving.pop()),t){if(e.world.applyGravity?e.stopFull(!0):e.stopX(!0),e.autoMovingResetRetries++,e.autoMovingResetMaxRetries===e.autoMovingResetRetries)return e.autoMovingResetRetries=0,e.moveToOriginalPoint();e.moveToPoint({column:t[0],row:t[1]})}}getWallBody(e){let{bodyA:t,bodyB:i}=e;return t&&t.isWall?t:!!i&&!!i.isWall&&i}getObjectBody(e){let{bodyA:t,bodyB:i}=e;return t&&t.isRoomObject?t:!!i&&!!i.isRoomObject&&i}getPlayerBody(e){let{bodyA:t,bodyB:i}=e;return t&&t.playerId?t:!!i&&!!i.playerId&&i}}},{"8b976b60c28092e0":"8FFNP","92f5971959d19587":"ijd9L"}],"8FFNP":[function(e,t,i,r){let{Body:n,vec2:s}=e("3304f256e9e76c94"),{GameConst:a}=e("37df9b723b227260"),{Logger:o,sc:h}=e("924061961623cd99");t.exports.PhysicalBody=class extends n{currentCol=!1;currentRow=!1;constructor(e){super(e),this.bodyState=null,this.animationBasedOnPress=e.animationBasedOnPress,this.diagonalHorizontal=e.diagonalHorizontal,this.autoMoving=!1,this.pathFinder=!1,this.isChangingScene=!1,this.originalCol=!1,this.originalRow=!1,this.jumpSpeed=h.get(e,"jumpSpeed",540),this.jumpTimeMs=h.get(e,"jumpTimeMs",180),this.movementSpeed=h.get(e,"movementSpeed",180),this.speedThreshold=h.get(e,"speedThreshold",.1),this.applySpeedThresholdOnBullets=h.get(e,"applySpeedThresholdOnBullets",!0),this.worldPositionPrecision=h.get(e,"worldPositionPrecision",0),this.worldSpeedPrecision=h.get(e,"worldSpeedPrecision",0),this.autoMovingResetMaxRetries=h.get(e,"autoMovingResetMaxRetries",5),this.autoMovingResetRetries=0,this.moveToOriginalPointWithDelay=h.get(e,"moveToOriginalPointWithDelay",100),this.moveToOriginalPointTimer=!1,this.originalSpeed={x:0,y:0},this.speedToNextMaxRetries=h.get(e,"speedToNextMaxRetries",3),this.speedToNextRetryCounter={col:0,row:0,retries:0},this.lastSetCollisionGroup=!1,this.blockBodyStates=h.get(e,"blockBodyStates",[a.STATUS.DISABLED,a.STATUS.DEATH])}integrate(e){if(-1!==this.blockBodyStates.indexOf(this.bodyState?.inState))return;let t=this.invMass,i=this.force,r=this.position,n=this.velocity;s.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e);let a=s.create();if(s.scale(a,i,e*t),s.multiply(a,this.massMultiplier,a),s.add(n,a,n),!this.integrateToTimeOfImpact(e)){let t=s.create();s.scale(t,n,e),s.add(r,r,t),this.fixedRotation||(this.angle+=this.angularVelocity*e)}this.speedToNext(),this.aabbNeedsUpdate=!0,this.velocity[0]=1e-4>Math.abs(this.velocity[0])?0:h.roundToPrecision(this.velocity[0],4),this.velocity[1]=1e-4>Math.abs(this.velocity[1])?0:h.roundToPrecision(this.velocity[1],4),.001>Math.abs(this.velocity[0])&&this.stopX(),.001>Math.abs(this.velocity[1])&&this.stopY(),this.updateBodyState()}speedToNext(){if(!this.autoMoving||0===this.autoMoving.length)return void this.setShapesCollisionGroup(this.originalCollisionGroup);if(!this.autoMoving[0]){o.error("Missing autoMoving first index."),this.setShapesCollisionGroup(this.originalCollisionGroup);return}let e=this.autoMoving[0][0],t=this.autoMoving[0][1];if(0!==this.speedToNextRetryCounter.col&&this.speedToNextRetryCounter.col===e&&0!==this.speedToNextRetryCounter.row&&this.speedToNextRetryCounter.row===t&&0!==this.velocity[0]&&0!==this.velocity[1]&&this.speedToNextRetryCounter.retries++,this.speedToNextMaxRetries===this.speedToNextRetryCounter.retries){this.speedToNextRetryCounter.col=0,this.speedToNextRetryCounter.row=0;let e=this.autoMoving.shift(),t=this.autoMoving.pop();this.stopFull(!0),this.alignToTile(),this.autoMoving=this.getPathFinder().findPath(e,t),this.speedToNextRetryCounter.retries=0;return}if(this.speedToNextRetryCounter.col=e,this.speedToNextRetryCounter.row=t,this.currentCol===e&&this.currentRow===t){this.autoMoving.shift(),0===this.autoMoving.length&&this.stopAutoMoving();return}this.currentCol===e&&0!==this.velocity[0]&&(this.stopX(),this.alignToTile()),this.currentCol>e&&this.initMove(a.LEFT,!0),this.currentCol<e&&this.initMove(a.RIGHT,!0),this.currentRow===t&&0!==this.velocity[1]&&(this.stopY(),this.alignToTile()),this.currentRow>t&&this.initMove(a.UP,!0),this.currentRow<t&&this.initMove(a.DOWN,!0),this.updateCurrentPoints()}stopAutoMoving(){this.stopFull(),this.resetAuto(),this.alignToTile(),this.setShapesCollisionGroup(this.originalCollisionGroup)}alignToTile(){this.currentCol&&this.currentRow||this.updateCurrentPoints();let e=this.currentCol*this.worldTileWidth,t=this.currentRow*this.worldTileHeight,i=e-this.position[0],r=t-this.position[1];.01>=Math.abs(i)&&.01>=Math.abs(r)&&(this.position[0]=e,this.position[1]=t)}updateBodyState(){if(!h.hasOwn(this.bodyState,"x")||!h.hasOwn(this.bodyState,"y"))return;if(this.isNotMoving()){this.bodyState.mov=!1;return}let e=h.roundToPrecision(this.position[0],0),t=h.roundToPrecision(this.position[1],0);if(!e||!t)return;this.bodyState.x!==e&&(this.bodyState.x=h.roundToPrecision(e,this.worldPositionPrecision)),this.bodyState.y!==t&&(this.bodyState.y=h.roundToPrecision(t,this.worldPositionPrecision));let i=h.roundToPrecision(this.velocity[0],this.worldSpeedPrecision),r=h.roundToPrecision(this.velocity[1],this.worldSpeedPrecision);this.bodyState.mov=0!==i||0!==r,this.removeInvalidStateBulletBody()}bodyLogKey(){return this.playerId?"PJ-"+this.playerId:this.bodyState?.key}removeInvalidStateBulletBody(){this.isBullet&&(this.isOutOfWorldBounds()||this.hasInvalidSpeed())&&(this.world.removeBodies.push(this),this.bodyStateId&&this.world.removeBulletsStateIds.push(this.bodyStateId))}hasInvalidSpeed(){if(!this.applySpeedThresholdOnBullets&&this.isBullet)return!1;let e=this.isBullet?this.originalSpeed.x:this.movementSpeed,t=this.isBullet?this.originalSpeed.x:this.movementSpeed,i=e*this.speedThreshold,r=t*this.speedThreshold,n=Math.abs(this.velocity[0]);0<n&&n<i&&(o.debug("Invalid speed, stopping X:",{speedX:n,minimumSpeedX:i}),this.stopX(!0));let s=Math.abs(this.velocity[1]);return 0<s&&s<r&&(o.debug("Invalid speed, stopping Y.",{speedY:s,minimumSpeedY:r}),this.stopY(!0)),0===this.velocity[0]&&0===this.velocity[1]}isOutOfWorldBounds(){return 0>this.position[0]||this.position[0]>this.worldWidth*this.worldTileWidth||0>this.position[1]||this.position[1]>this.worldHeight*this.worldTileHeight}isNotMoving(){let e=this.movementSpeed*this.speedThreshold,t=h.roundToPrecision(this.velocity[0]),i=h.roundToPrecision(this.velocity[1]);0!==this.velocity[0]&&Math.abs(t)<e&&(this.position[0]=h.roundToPrecision(this.position[0]+(0<t?1:-1)),this.stopX(!0)),0!==this.velocity[1]&&Math.abs(i)<e&&!this.world.applyGravity&&(this.position[1]=this.position[1]+(0<i?1:-1),this.stopY(!0));let r=h.roundToPrecision(this.position[0],0),n=h.roundToPrecision(this.position[1],0);return this.bodyState.x===r&&this.bodyState.y===n&&0===t&&0===i}resetAuto(){this.autoMoving=!1}initMove(e,t=!1){if(t||this.resetAuto(),this.world)return this.world.allowSimultaneous?void this.simultaneousKeyPressMovement(e):this.singleKeyPressMovement(e)}singleKeyPressMovement(e){e===a.RIGHT&&0===this.velocity[1]&&(this.velocity[0]=this.movementSpeed),e===a.LEFT&&0===this.velocity[1]&&(this.velocity[0]=-this.movementSpeed),e===a.UP&&0===this.velocity[0]&&this.moveUp(this.movementSpeed),e!==a.DOWN||0!==this.velocity[0]||this.world.applyGravity||(this.velocity[1]=this.movementSpeed)}simultaneousKeyPressMovement(e){this.world.applyGravity?(e===a.RIGHT&&(this.validateAndSetDirection(e,this.diagonalHorizontal,this.velocity[1]),this.velocity[0]=this.movementSpeed),e===a.LEFT&&(this.validateAndSetDirection(e,this.diagonalHorizontal,this.velocity[1]),this.velocity[0]=-this.movementSpeed),e===a.UP&&(this.validateAndSetDirection(e,!this.diagonalHorizontal,this.velocity[0]),this.moveUp(this.movementSpeed))):this.simultaneousMovementDiagonalSpeedFix(e,this.movementSpeed)}simultaneousMovementDiagonalSpeedFix(e,t){let i=0===this.velocity[0]?0:0>this.velocity[0]?-1:1,r=0===this.velocity[1]?0:0>this.velocity[1]?-1:1;e===a.RIGHT&&(i=1),e===a.LEFT&&(i=-1),e===a.UP&&(r=-1),e===a.DOWN&&(r=1);let n=this.normalizeSpeed(i,r);this.velocity[0]=t*i*n,this.velocity[1]=t*r*n,(e===a.RIGHT||e===a.LEFT)&&this.validateAndSetDirection(e,this.diagonalHorizontal,this.velocity[1]),(e===a.UP||e===a.DOWN)&&this.validateAndSetDirection(e,!this.diagonalHorizontal,this.velocity[0])}moveUp(e){if(!this.world.applyGravity){this.velocity[1]=-e;return}this.canJump()&&(this.velocity[1]=-this.jumpSpeed,setTimeout(()=>{this.stopY()},this.jumpTimeMs))}calculateMagnitude(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}checkNonZeroComponents(e,t){return Math.abs(e)>0||Math.abs(t)>0}normalizeSpeed(e,t){return this.checkNonZeroComponents(e,t)?1/this.calculateMagnitude(e,t):0}validateAndSetDirection(e,t,i){(this.animationBasedOnPress||this.bodyState.autoDirection)&&(t||0===i)&&(this.bodyState.dir=e)}stopMove(){this.world&&this.world.applyGravity?this.stopX():this.stopFull()}stopFull(e=!1){this.velocity[0]=0,this.world?.applyGravity||(this.velocity[1]=0),this.angularVelocity=0,this.angularForce=0,this.pStop=e}stopX(e=!1){this.velocity[0]=0,this.angularVelocity=0,this.angularForce=0,this.pStop=e}stopY(e=!1){this.velocity[1]=0,this.angularVelocity=0,this.angularForce=0,this.pStop=e}moveToPoint(e){this.resetAuto(),this.updateCurrentPoints();let t=[this.currentCol,this.currentRow],i=[e.column,e.row],r=this.getPathFinder();return r?(this.autoMoving=r.findPath(t,i),this.autoMoving||(this.setShapesCollisionGroup(this.originalCollisionGroup),this.stopMove()),this.autoMoving):(this.setShapesCollisionGroup(this.originalCollisionGroup),!1)}updateCurrentPoints(){if(!this.world)return;let{currentCol:e,currentRow:t}=this.positionToTiles(this.position[0],this.position[1]);return this.originalCol||(this.originalCol=e),this.originalRow||(this.originalRow=t),this.currentCol=e,this.currentRow=t,this}moveToOriginalPoint(){(this.originalCol&&this.originalRow||this.updateCurrentPoints(),this.disableObjectsCollisionsOnReturn&&this.setShapesCollisionGroup(0),this.stopFull(),0===this.moveToOriginalPointWithDelay)?this.moveToPoint({column:this.originalCol,row:this.originalRow}):this.moveToOriginalPointTimer=setTimeout(()=>{this.moveToPoint({column:this.originalCol,row:this.originalRow})},this.moveToOriginalPointWithDelay)}setShapesCollisionGroup(e){if(this.lastSetCollisionGroup!==e)for(let t of(this.lastSetCollisionGroup=e,this.shapes))t.collisionGroup=e}canJump(){for(let e of this.world.narrowphase.contactEquations){let t=e.bodyA===this?e.bodyA:e.bodyB,i=e.bodyA.isWall?e.bodyA:e.bodyB;if(t.playerId&&0<=Number(Number(t.velocity[1]).toFixed(2))&&i.isWall&&!i.isWorldWall&&t.position[1]<i.position[1])return!0}return!1}positionToTiles(e,t){let i=Math.round((e-this.worldTileWidth/2)/this.worldTileWidth);i=i>=0?i>this.worldWidth?this.worldWidth:i:0;let r=Math.round((t-this.worldTileHeight/2)/this.worldTileHeight);return{currentCol:i,currentRow:r=r>=0?r>this.worldHeight?this.worldHeight:r:0}}getPathFinder(){return this.pathFinder?this.pathFinder:this.world?.pathFinder}get worldTileWidth(){return this.world?.mapJson?.tilewidth}get worldTileHeight(){return this.world?.mapJson?.tileheight}get worldWidth(){return this.world?.mapJson?.width}get worldHeight(){return this.world?.mapJson?.height}}},{"3304f256e9e76c94":"6Ga10","37df9b723b227260":"z0nmL","924061961623cd99":"ijd9L"}],"6Ga10":[function(e,t,i,r){Object.defineProperty(t.exports={AABB:e("684b4c2f51a7982f"),AngleLockEquation:e("bdffc69900b9d197"),Body:e("3f75664c0e64d6f0"),Broadphase:e("6a91eca7403fbf23"),Capsule:e("856d4f0d9932be15"),Circle:e("2ed19d42da3c562d"),Constraint:e("aa927dde400e3497"),ContactEquation:e("2d074b8afa958c13"),ContactEquationPool:e("c3b18056b7840eb7"),ContactMaterial:e("95c5dc13a3c7c260"),Convex:e("ac59578c032edc9f"),DistanceConstraint:e("5c90feeb31df3d5e"),Equation:e("f8f4511fa21776ff"),EventEmitter:e("c3d3b3771d6558ce"),FrictionEquation:e("cab660c3bd983ee4"),FrictionEquationPool:e("87607de358c9c21"),GearConstraint:e("90a946d116b90b53"),GSSolver:e("6894c0e11a66902e"),Heightfield:e("4b3b7392ecef1240"),Line:e("1e20d14367f50060"),LockConstraint:e("fdc7a4304d635ff8"),Material:e("2ead159ba8c055f3"),Narrowphase:e("9e6fca932dff920d"),NaiveBroadphase:e("b1c0219aba2108d9"),Particle:e("9633119b46909ded"),Plane:e("4f144cae12074657"),Pool:e("a996dbee78852c0f"),RevoluteConstraint:e("34cc4dd48e1d0bad"),PrismaticConstraint:e("53d36735aa65530e"),Ray:e("1d4b6783af535b58"),RaycastResult:e("f9b0bdbeada25bdf"),Box:e("1eaca10f1a6fb0c1"),RotationalVelocityEquation:e("316198d4ce4102e3"),SAPBroadphase:e("60bfc18e7e665b71"),Shape:e("1eb899949248649e"),Solver:e("3c21f4f3806b3be"),Spring:e("e3ff62163c08949b"),TopDownVehicle:e("e782a409308bbff6"),LinearSpring:e("78e7b803f9bca9ee"),RotationalSpring:e("fe49496c221554ba"),Utils:e("36b147cdc3f4bb72"),World:e("551a53932a4cfdc8"),vec2:e("19262ec940ce734e"),version:e("df51020e342624b").version},"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"684b4c2f51a7982f":"iFKXP",bdffc69900b9d197:"2H0WW","3f75664c0e64d6f0":"174uM","6a91eca7403fbf23":"2rxxC","856d4f0d9932be15":"c3xj1","2ed19d42da3c562d":"hvGBf",aa927dde400e3497:"1naZa","2d074b8afa958c13":"gMvS0",c3b18056b7840eb7:"kVkx4","95c5dc13a3c7c260":"hoyOw",ac59578c032edc9f:"5RgQL","5c90feeb31df3d5e":"fHS5f",f8f4511fa21776ff:"vy9Ac",c3d3b3771d6558ce:"iK19H",cab660c3bd983ee4:"1NlHz","87607de358c9c21":"7zO6n","90a946d116b90b53":"hdQyd","6894c0e11a66902e":"aMqbT","4b3b7392ecef1240":"NRkh0","1e20d14367f50060":"7MGrW",fdc7a4304d635ff8:"7TLGq","2ead159ba8c055f3":"h4UHn","9e6fca932dff920d":"jfIHe",b1c0219aba2108d9:"ljW8X","9633119b46909ded":"8rTjp","4f144cae12074657":"c8neT",a996dbee78852c0f:"hpo2a","34cc4dd48e1d0bad":"luGEt","53d36735aa65530e":"601M4","1d4b6783af535b58":"6nuOx",f9b0bdbeada25bdf:"g6dQ6","1eaca10f1a6fb0c1":"8y4xs","316198d4ce4102e3":"84NSF","60bfc18e7e665b71":"9tvAe","1eb899949248649e":"8r7K8","3c21f4f3806b3be":"fDYb8",e3ff62163c08949b:"ayeEI",e782a409308bbff6:"iaLOw","78e7b803f9bca9ee":"dHnmB",fe49496c221554ba:"16mhl","36b147cdc3f4bb72":"7LSYB","551a53932a4cfdc8":"4fdFK","19262ec940ce734e":"6V1yH",df51020e342624b:"67vnr"}],iFKXP:[function(e,t,i,r){var n=e("b3f1d8665c8114ff");function s(e){this.lowerBound=n.create(),e&&e.lowerBound&&n.copy(this.lowerBound,e.lowerBound),this.upperBound=n.create(),e&&e.upperBound&&n.copy(this.upperBound,e.upperBound)}e("def10f340a350e0e"),t.exports=s;var a=n.create();s.prototype.setFromPoints=function(e,t,i,r){var s=this.lowerBound,o=this.upperBound;"number"!=typeof i&&(i=0),0!==i?n.rotate(s,e[0],i):n.copy(s,e[0]),n.copy(o,s);for(var h=Math.cos(i),c=Math.sin(i),l=1;l<e.length;l++){var d=e[l];if(0!==i){var u=d[0],f=d[1];a[0]=h*u-c*f,a[1]=c*u+h*f,d=a}for(var p=0;p<2;p++)d[p]>o[p]&&(o[p]=d[p]),d[p]<s[p]&&(s[p]=d[p])}t&&(n.add(this.lowerBound,this.lowerBound,t),n.add(this.upperBound,this.upperBound,t)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},s.prototype.copy=function(e){n.copy(this.lowerBound,e.lowerBound),n.copy(this.upperBound,e.upperBound)},s.prototype.extend=function(e){for(var t=2;t--;){var i=e.lowerBound[t];this.lowerBound[t]>i&&(this.lowerBound[t]=i);var r=e.upperBound[t];this.upperBound[t]<r&&(this.upperBound[t]=r)}},s.prototype.overlaps=function(e){var t=this.lowerBound,i=this.upperBound,r=e.lowerBound,n=e.upperBound;return(r[0]<=i[0]&&i[0]<=n[0]||t[0]<=n[0]&&n[0]<=i[0])&&(r[1]<=i[1]&&i[1]<=n[1]||t[1]<=n[1]&&n[1]<=i[1])},s.prototype.containsPoint=function(e){var t=this.lowerBound,i=this.upperBound;return t[0]<=e[0]&&e[0]<=i[0]&&t[1]<=e[1]&&e[1]<=i[1]},s.prototype.overlapsRay=function(e){var t=1/e.direction[0],i=1/e.direction[1],r=(this.lowerBound[0]-e.from[0])*t,n=(this.upperBound[0]-e.from[0])*t,s=(this.lowerBound[1]-e.from[1])*i,a=(this.upperBound[1]-e.from[1])*i,o=Math.max(Math.max(Math.min(r,n),Math.min(s,a))),h=Math.min(Math.min(Math.max(r,n),Math.max(s,a)));return h<0||o>h?-1:o}},{b3f1d8665c8114ff:"6V1yH",def10f340a350e0e:"7LSYB"}],"6V1yH":[function(e,t,i,r){var n=t.exports={},s=e("d83d88b709f376af");n.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},n.crossVZ=function(e,t,i){return n.rotate(e,t,-Math.PI/2),n.scale(e,e,i),e},n.crossZV=function(e,t,i){return n.rotate(e,i,Math.PI/2),n.scale(e,e,t),e},n.rotate=function(e,t,i){if(0!==i){var r=Math.cos(i),n=Math.sin(i),s=t[0],a=t[1];e[0]=r*s-n*a,e[1]=n*s+r*a}else e[0]=t[0],e[1]=t[1]},n.rotate90cw=function(e,t){var i=t[0],r=t[1];e[0]=r,e[1]=-i},n.toLocalFrame=function(e,t,i,r){n.copy(e,t),n.sub(e,e,i),n.rotate(e,e,-r)},n.toGlobalFrame=function(e,t,i,r){n.copy(e,t),n.rotate(e,e,r),n.add(e,e,i)},n.vectorToLocalFrame=function(e,t,i){n.rotate(e,t,-i)},n.vectorToGlobalFrame=function(e,t,i){n.rotate(e,t,i)},n.centroid=function(e,t,i,r){return n.add(e,t,i),n.add(e,e,r),n.scale(e,e,1/3),e},n.create=function(){var e=new s.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},n.clone=function(e){var t=new s.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},n.fromValues=function(e,t){var i=new s.ARRAY_TYPE(2);return i[0]=e,i[1]=t,i},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},n.set=function(e,t,i){return e[0]=t,e[1]=i,e},n.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},n.subtract=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},n.sub=n.subtract,n.multiply=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},n.mul=n.multiply,n.divide=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},n.div=n.divide,n.scale=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},n.distance=function(e,t){var i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)},n.dist=n.distance,n.squaredDistance=function(e,t){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r},n.sqrDist=n.squaredDistance,n.length=function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},n.len=n.length,n.squaredLength=function(e){var t=e[0],i=e[1];return t*t+i*i},n.sqrLen=n.squaredLength,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},n.normalize=function(e,t){var i=t[0],r=t[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},n.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},n.lerp=function(e,t,i,r){var n=t[0],s=t[1];return e[0]=n+r*(i[0]-n),e[1]=s+r*(i[1]-s),e},n.reflect=function(e,t,i){var r=t[0]*i[0]+t[1]*i[1];e[0]=t[0]-2*i[0]*r,e[1]=t[1]-2*i[1]*r},n.getLineSegmentsIntersection=function(e,t,i,r,s){var a=n.getLineSegmentsIntersectionFraction(t,i,r,s);return!(a<0)&&(e[0]=t[0]+a*(i[0]-t[0]),e[1]=t[1]+a*(i[1]-t[1]),!0)},n.getLineSegmentsIntersectionFraction=function(e,t,i,r){var n,s,a=t[0]-e[0],o=t[1]-e[1],h=r[0]-i[0],c=r[1]-i[1];return(n=(-o*(e[0]-i[0])+a*(e[1]-i[1]))/(-h*o+a*c),s=(h*(e[1]-i[1])-c*(e[0]-i[0]))/(-h*o+a*c),n>=0&&n<=1&&s>=0&&s<=1)?s:-1}},{d83d88b709f376af:"7LSYB"}],"7LSYB":[function(e,t,i,r){function n(){}t.exports=n,n.appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var i=0,r=t.length;i!==r;++i)e.push(t[i])},n.splice=function(e,t,i){i=i||1;for(var r=t,n=e.length-i;r<n;r++)e[r]=e[r+i];e.length=n},"u">typeof P2_ARRAY_TYPE?n.ARRAY_TYPE=P2_ARRAY_TYPE:"u">typeof Float32Array?n.ARRAY_TYPE=Float32Array:n.ARRAY_TYPE=Array,n.extend=function(e,t){for(var i in t)e[i]=t[i]},n.defaults=function(e,t){for(var i in e=e||{},t)i in e||(e[i]=t[i]);return e}},{}],"2H0WW":[function(e,t,i,r){var n=e("96b39f139ed9fe19");function s(e,t,i){i=i||{},n.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}e("65e9c376f4842e26"),t.exports=s,s.prototype=new n,s.prototype.constructor=s,s.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},s.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},s.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"96b39f139ed9fe19":"vy9Ac","65e9c376f4842e26":"6V1yH"}],vy9Ac:[function(e,t,i,r){t.exports=a;var n=e("409fe7de84f659c2"),s=e("899649d302242471");function a(e,t,i,r){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===r?Number.MAX_VALUE:r,this.bodyA=e,this.bodyB=t,this.stiffness=a.DEFAULT_STIFFNESS,this.relaxation=a.DEFAULT_RELAXATION,this.G=new s.ARRAY_TYPE(6);for(var n=0;n<6;n++)this.G[n]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}e("96f5ab3af7110940"),a.prototype.constructor=a,a.DEFAULT_STIFFNESS=1e6,a.DEFAULT_RELAXATION=4,a.prototype.update=function(){var e=this.stiffness,t=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(i*i*e*(1+4*t)),this.needsUpdate=!1},a.prototype.gmult=function(e,t,i,r,n){return e[0]*t[0]+e[1]*t[1]+e[2]*i+e[3]*r[0]+e[4]*r[1]+e[5]*n},a.prototype.computeB=function(e,t,i){var r=this.computeGW();return-this.computeGq()*e-r*t-this.computeGiMf()*i};var o=n.create(),h=n.create();a.prototype.computeGq=function(){var e=this.G,t=this.bodyA,i=this.bodyB,r=(t.position,i.position,t.angle),n=i.angle;return this.gmult(e,o,r,h,n)+this.offset},a.prototype.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,r=t.velocity,n=i.velocity,s=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,r,s,n,a)+this.relativeVelocity},a.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,i=this.bodyB,r=t.vlambda,n=i.vlambda,s=t.wlambda,a=i.wlambda;return this.gmult(e,r,s,n,a)};var c=n.create(),l=n.create();a.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,i=e.force,r=e.angularForce,s=t.force,a=t.angularForce,o=e.invMassSolve,h=t.invMassSolve,d=e.invInertiaSolve,u=t.invInertiaSolve,f=this.G;return n.scale(c,i,o),n.multiply(c,e.massMultiplier,c),n.scale(l,s,h),n.multiply(l,t.massMultiplier,l),this.gmult(f,c,r*d,l,a*u)},a.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,i=e.invMassSolve,r=t.invMassSolve,n=e.invInertiaSolve,s=t.invInertiaSolve,a=this.G;return a[0]*a[0]*i*e.massMultiplier[0]+a[1]*a[1]*i*e.massMultiplier[1]+a[2]*a[2]*n+a[3]*a[3]*r*t.massMultiplier[0]+a[4]*a[4]*r*t.massMultiplier[1]+a[5]*a[5]*s};var d=n.create(),u=n.create(),f=n.create();n.create(),n.create(),n.create(),a.prototype.addToWlambda=function(e){var t=this.bodyA,i=this.bodyB,r=t.invMassSolve,s=i.invMassSolve,a=t.invInertiaSolve,o=i.invInertiaSolve,h=this.G;u[0]=h[0],u[1]=h[1],f[0]=h[3],f[1]=h[4],n.scale(d,u,r*e),n.multiply(d,d,t.massMultiplier),n.add(t.vlambda,t.vlambda,d),t.wlambda+=a*h[2]*e,n.scale(d,f,s*e),n.multiply(d,d,i.massMultiplier),n.add(i.vlambda,i.vlambda,d),i.wlambda+=o*h[5]*e},a.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"409fe7de84f659c2":"6V1yH","899649d302242471":"7LSYB","96f5ab3af7110940":"174uM"}],"174uM":[function(e,t,i,r){var n=e("e93126ba09caa5de"),s=e("75db1bf8b12d094"),a=e("85daf14b1e993a58"),o=e("bca387afe93c506d"),h=e("8404a18a841f8c6f"),c=e("b3d48c1afc29fb22"),l=e("1546b4044e1fff1d");function d(e){e=e||{},l.call(this),this.id=e.id||++d._idCounter,this.world=null,this.shapes=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation,this.fixedX=!!e.fixedX,this.fixedY=!!e.fixedY,this.massMultiplier=n.create(),this.position=n.fromValues(0,0),e.position&&n.copy(this.position,e.position),this.interpolatedPosition=n.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=n.fromValues(0,0),this.previousAngle=0,this.velocity=n.fromValues(0,0),e.velocity&&n.copy(this.velocity,e.velocity),this.vlambda=n.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=n.create(),e.force&&n.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=d.STATIC,void 0!==e.type?this.type=e.type:e.mass?this.type=d.DYNAMIC:this.type=d.STATIC,this.boundingRadius=0,this.aabb=new c,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.wantsToSleep=!1,this.sleepState=d.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.gravityScale=void 0!==e.gravityScale?e.gravityScale:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==e.ccdSpeedThreshold?e.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==e.ccdIterations?e.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}t.exports=d,d.prototype=new l,d.prototype.constructor=d,d._idCounter=0,d.prototype.updateSolveMassProperties=function(){this.sleepState===d.SLEEPING||this.type===d.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},d.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},d.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},d.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var u=new c,f=n.create();d.prototype.updateAABB=function(){for(var e=this.shapes,t=e.length,i=this.angle,r=0;r!==t;r++){var s=e[r],a=s.angle+i;n.rotate(f,s.position,i),n.add(f,f,this.position),s.computeAABB(u,f,a),0===r?this.aabb.copy(u):this.aabb.extend(u)}this.aabbNeedsUpdate=!1},d.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=e.length,i=0,r=0;r!==t;r++){var s=e[r],a=n.length(s.position),o=s.boundingRadius;a+o>i&&(i=a+o)}this.boundingRadius=i},d.prototype.addShape=function(e,t,i){if(e.body)throw Error("A shape can only be added to one body.");e.body=this,t?n.copy(e.position,t):n.set(e.position,0,0),e.angle=i||0,this.shapes.push(e),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},d.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return -1!==t&&(this.shapes.splice(t,1),this.aabbNeedsUpdate=!0,e.body=null,!0)},d.prototype.updateMassProperties=function(){if(this.type===d.STATIC||this.type===d.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var s=0;s<t;s++){var a=e[s],o=n.squaredLength(a.position);r+=a.computeMomentOfInertia(i)+i*o}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass,n.set(this.massMultiplier,+!this.fixedX,+!this.fixedY)}},n.create(),d.prototype.applyForce=function(e,t){if(n.add(this.force,this.force,e),t){var i=n.crossLength(t,e);this.angularForce+=i}};var p=n.create(),g=n.create(),m=n.create();d.prototype.applyForceLocal=function(e,t){t=t||m,this.vectorToWorldFrame(p,e),this.vectorToWorldFrame(g,t),this.applyForce(p,g)};var v=n.create();d.prototype.applyImpulse=function(e,t){if(this.type===d.DYNAMIC&&(n.scale(v,e,this.invMass),n.multiply(v,this.massMultiplier,v),n.add(this.velocity,v,this.velocity),t)){var i=n.crossLength(t,e);i*=this.invInertia,this.angularVelocity+=i}};var y=n.create(),b=n.create(),x=n.create();d.prototype.applyImpulseLocal=function(e,t){t=t||x,this.vectorToWorldFrame(y,e),this.vectorToWorldFrame(b,t),this.applyImpulse(y,b)},d.prototype.toLocalFrame=function(e,t){n.toLocalFrame(e,t,this.position,this.angle)},d.prototype.toWorldFrame=function(e,t){n.toGlobalFrame(e,t,this.position,this.angle)},d.prototype.vectorToLocalFrame=function(e,t){n.vectorToLocalFrame(e,t,this.angle)},d.prototype.vectorToWorldFrame=function(e,t){n.vectorToGlobalFrame(e,t,this.angle)},d.prototype.fromPolygon=function(e,t){t=t||{};for(var i,r=this.shapes.length;r>=0;--r)this.removeShape(this.shapes[r]);var o=new s.Polygon;if(o.vertices=e,o.makeCCW(),"number"==typeof t.removeCollinearPoints&&o.removeCollinearPoints(t.removeCollinearPoints),void 0===t.skipSimpleCheck&&!o.isSimple())return!1;this.concavePath=o.vertices.slice(0);for(var r=0;r<this.concavePath.length;r++){var h=[0,0];n.copy(h,this.concavePath[r]),this.concavePath[r]=h}i=t.optimalDecomp?o.decomp():o.quickDecomp();for(var c=n.create(),r=0;r!==i.length;r++){for(var l=new a({vertices:i[r].vertices}),d=0;d!==l.vertices.length;d++){var h=l.vertices[d];n.sub(h,h,l.centerOfMass)}n.scale(c,l.centerOfMass,1),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),this.addShape(l,c)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0},n.fromValues(0,0);var E=n.fromValues(0,0),T=n.fromValues(0,0),A=n.fromValues(0,0);d.prototype.adjustCenterOfMass=function(){var e=0;n.set(T,0,0);for(var t=0;t!==this.shapes.length;t++){var i=this.shapes[t];n.scale(E,i.position,i.area),n.add(T,T,E),e+=i.area}n.scale(A,T,1/e);for(var t=0;t!==this.shapes.length;t++){var i=this.shapes[t];n.sub(i.position,i.position,A)}n.add(this.position,this.position,A);for(var t=0;this.concavePath&&t<this.concavePath.length;t++)n.sub(this.concavePath[t],this.concavePath[t],A);this.updateMassProperties(),this.updateBoundingRadius()},d.prototype.setZeroForce=function(){n.set(this.force,0,0),this.angularForce=0},d.prototype.resetConstraintVelocity=function(){var e=this.vlambda;n.set(e,0,0),this.wlambda=0},d.prototype.addConstraintVelocity=function(){var e=this.velocity;n.add(e,e,this.vlambda),this.angularVelocity+=this.wlambda},d.prototype.applyDamping=function(e){if(this.type===d.DYNAMIC){var t=this.velocity;n.scale(t,t,Math.pow(1-this.damping,e)),this.angularVelocity*=Math.pow(1-this.angularDamping,e)}},d.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=d.AWAKE,this.idleTime=0,e!==d.AWAKE&&this.emit(d.wakeUpEvent)},d.prototype.sleep=function(){this.sleepState=d.SLEEPING,this.angularVelocity=0,this.angularForce=0,n.set(this.velocity,0,0),n.set(this.force,0,0),this.emit(d.sleepEvent)},d.prototype.sleepTick=function(e,t,i){this.allowSleep&&this.type!==d.SLEEPING&&(this.wantsToSleep=!1,this.sleepState,n.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=d.AWAKE):(this.idleTime+=i,this.sleepState=d.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep()))},d.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)};var w=n.create(),S=n.create();d.prototype.integrate=function(e){var t=this.invMass,i=this.force,r=this.position,s=this.velocity;n.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e),n.scale(w,i,e*t),n.multiply(w,this.massMultiplier,w),n.add(s,w,s),!this.integrateToTimeOfImpact(e)&&(n.scale(S,s,e),n.add(r,r,S),this.fixedRotation||(this.angle+=this.angularVelocity*e)),this.aabbNeedsUpdate=!0};var C=new o,I=new h({mode:h.ALL}),_=n.create(),O=n.create(),P=n.create(),M=n.create();d.prototype.integrateToTimeOfImpact=function(e){if(this.ccdSpeedThreshold<0||n.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;n.normalize(_,this.velocity),n.scale(O,this.velocity,e),n.add(O,O,this.position),n.sub(P,O,this.position);var t,i=this.angularVelocity*e,r=n.length(P),s=1,a=this;if(C.reset(),I.callback=function(e){e.body!==a&&(t=e.body,e.getHitPoint(O,I),n.sub(P,O,a.position),s=n.length(P)/r,e.stop())},n.copy(I.from,this.position),n.copy(I.to,O),I.update(),this.world.raycast(C,I),!t)return!1;var o=this.angle;n.copy(M,this.position);for(var h=0,c=0,l=0,d=s;d>=c&&h<this.ccdIterations;)h++,l=(d-c)/2,n.scale(S,P,s),n.add(this.position,M,S),this.angle=o+i*s,this.updateAABB(),this.aabb.overlaps(t.aabb)&&this.world.narrowphase.bodiesOverlap(this,t)?c=l:d=l;return s=l,n.copy(this.position,M),this.angle=o,n.scale(S,P,s),n.add(this.position,this.position,S),this.fixedRotation||(this.angle+=i*s),!0},d.prototype.getVelocityAtPoint=function(e,t){return n.crossVZ(e,t,this.angularVelocity),n.subtract(e,this.velocity,e),e},d.sleepyEvent={type:"sleepy"},d.sleepEvent={type:"sleep"},d.wakeUpEvent={type:"wakeup"},d.DYNAMIC=1,d.STATIC=2,d.KINEMATIC=4,d.AWAKE=0,d.SLEEPY=1,d.SLEEPING=2},{e93126ba09caa5de:"6V1yH","75db1bf8b12d094":"1BDka","85daf14b1e993a58":"5RgQL",bca387afe93c506d:"g6dQ6","8404a18a841f8c6f":"6nuOx",b3d48c1afc29fb22:"iFKXP","1546b4044e1fff1d":"iK19H"}],"1BDka":[function(e,t,i,r){t.exports={Polygon:e("2eab5d17bb85406d"),Point:e("bd8f4793cca96f82")}},{"2eab5d17bb85406d":"iG67A",bd8f4793cca96f82:"eiy48"}],iG67A:[function(e,t,i,r){var n=e("d8008e40e643f58e"),s=e("27760a6f627f557e"),a=e("edd1be50e7a94605");function o(){this.vertices=[]}t.exports=o,o.prototype.at=function(e){var t=this.vertices,i=t.length;return t[e<0?e%i+i:e%i]},o.prototype.first=function(){return this.vertices[0]},o.prototype.last=function(){return this.vertices[this.vertices.length-1]},o.prototype.clear=function(){this.vertices.length=0},o.prototype.append=function(e,t,i){if(void 0===t)throw Error("From is not given!");if(void 0===i)throw Error("To is not given!");if(i-1<t)throw Error("lol1");if(i>e.vertices.length)throw Error("lol2");if(t<0)throw Error("lol3");for(var r=t;r<i;r++)this.vertices.push(e.vertices[r])},o.prototype.makeCCW=function(){for(var e=0,t=this.vertices,i=1;i<this.vertices.length;++i)(t[i][1]<t[e][1]||t[i][1]==t[e][1]&&t[i][0]>t[e][0])&&(e=i);s.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},o.prototype.reverse=function(){for(var e=[],t=0,i=this.vertices.length;t!==i;t++)e.push(this.vertices.pop());this.vertices=e},o.prototype.isReflex=function(e){return s.right(this.at(e-1),this.at(e),this.at(e+1))};var h=[],c=[];function l(e,t,i,r,n){n=n||0;var s=t[1]-e[1],o=e[0]-t[0],h=s*e[0]+o*e[1],c=r[1]-i[1],l=i[0]-r[0],d=c*i[0]+l*i[1],u=s*l-c*o;return a.eq(u,0,n)?[0,0]:[(l*h-o*d)/u,(s*d-c*h)/u]}o.prototype.canSee=function(e,t){var i,r;if(s.leftOn(this.at(e+1),this.at(e),this.at(t))&&s.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;r=s.sqdist(this.at(e),this.at(t));for(var a=0;a!==this.vertices.length;++a)if((a+1)%this.vertices.length!==e&&a!==e&&s.leftOn(this.at(e),this.at(t),this.at(a+1))&&s.rightOn(this.at(e),this.at(t),this.at(a))&&(h[0]=this.at(e),h[1]=this.at(t),c[0]=this.at(a),c[1]=this.at(a+1),i=n.lineInt(h,c),s.sqdist(this.at(e),i)<r))return!1;return!0},o.prototype.copy=function(e,t,i){var r=i||new o;if(r.clear(),e<t)for(var n=e;n<=t;n++)r.vertices.push(this.vertices[n]);else{for(var n=0;n<=t;n++)r.vertices.push(this.vertices[n]);for(var n=e;n<this.vertices.length;n++)r.vertices.push(this.vertices[n])}return r},o.prototype.getCutEdges=function(){for(var e=[],t=[],i=[],r=new o,n=Number.MAX_VALUE,s=0;s<this.vertices.length;++s)if(this.isReflex(s)){for(var a=0;a<this.vertices.length;++a)if(this.canSee(s,a)){t=this.copy(s,a,r).getCutEdges(),i=this.copy(a,s,r).getCutEdges();for(var h=0;h<i.length;h++)t.push(i[h]);t.length<n&&(e=t,n=t.length,e.push([this.at(s),this.at(a)]))}}return e},o.prototype.decomp=function(){var e=this.getCutEdges();return e.length>0?this.slice(e):[this]},o.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],i=0;i<e.length;i++)for(var r=e[i],n=0;n<t.length;n++){var s=t[n].slice(r);if(s){t.splice(n,1),t.push(s[0],s[1]);break}}return t}var r=e,i=this.vertices.indexOf(r[0]),n=this.vertices.indexOf(r[1]);return -1!=i&&-1!=n&&[this.copy(i,n),this.copy(n,i)]},o.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var i=0;i<t-1;i++)if(n.segmentsIntersect(e[t],e[t+1],e[i],e[i+1]))return!1;for(var t=1;t<e.length-2;t++)if(n.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},o.prototype.quickDecomp=function(e,t,i,r,n,a){n=n||100,a=a||0,r=r||25,e=void 0!==e?e:[],t=t||[],i=i||[];var h=[0,0],c=[0,0],d=[0,0],u=0,f=0,p=0,g=0,m=0,v=0,y=0,b=new o,x=new o,E=this.vertices;if(E.length<3)return e;if(++a>n)return console.warn("quickDecomp: max level ("+n+") reached."),e;for(var T=0;T<this.vertices.length;++T)if(this.isReflex(T)){t.push(this.vertices[T]),u=f=Number.MAX_VALUE;for(var A=0;A<this.vertices.length;++A)s.left(this.at(T-1),this.at(T),this.at(A))&&s.rightOn(this.at(T-1),this.at(T),this.at(A-1))&&(d=l(this.at(T-1),this.at(T),this.at(A),this.at(A-1)),s.right(this.at(T+1),this.at(T),d)&&(p=s.sqdist(this.vertices[T],d))<f&&(f=p,c=d,v=A)),s.left(this.at(T+1),this.at(T),this.at(A+1))&&s.rightOn(this.at(T+1),this.at(T),this.at(A))&&(d=l(this.at(T+1),this.at(T),this.at(A),this.at(A+1)),s.left(this.at(T-1),this.at(T),d)&&(p=s.sqdist(this.vertices[T],d))<u&&(u=p,h=d,m=A));if(v==(m+1)%this.vertices.length)d[0]=(c[0]+h[0])/2,d[1]=(c[1]+h[1])/2,i.push(d),T<m?(b.append(this,T,m+1),b.vertices.push(d),x.vertices.push(d),0!=v&&x.append(this,v,this.vertices.length),x.append(this,0,T+1)):(0!=T&&b.append(this,T,this.vertices.length),b.append(this,0,m+1),b.vertices.push(d),x.vertices.push(d),x.append(this,v,T+1));else{if(v>m&&(m+=this.vertices.length),g=Number.MAX_VALUE,m<v)return e;for(var A=v;A<=m;++A)s.leftOn(this.at(T-1),this.at(T),this.at(A))&&s.rightOn(this.at(T+1),this.at(T),this.at(A))&&(p=s.sqdist(this.at(T),this.at(A)))<g&&(g=p,y=A%this.vertices.length);T<y?(b.append(this,T,y+1),0!=y&&x.append(this,y,E.length),x.append(this,0,T+1)):(0!=T&&b.append(this,T,E.length),b.append(this,0,y+1),x.append(this,y,T+1))}return b.vertices.length<x.vertices.length?(b.quickDecomp(e,t,i,r,n,a),x.quickDecomp(e,t,i,r,n,a)):(x.quickDecomp(e,t,i,r,n,a),b.quickDecomp(e,t,i,r,n,a)),e}return e.push(this),e},o.prototype.removeCollinearPoints=function(e){for(var t=0,i=this.vertices.length-1;this.vertices.length>3&&i>=0;--i)s.collinear(this.at(i-1),this.at(i),this.at(i+1),e)&&(this.vertices.splice(i%this.vertices.length,1),i--,t++);return t}},{d8008e40e643f58e:"8k2Pj","27760a6f627f557e":"eiy48",edd1be50e7a94605:"53qYK"}],"8k2Pj":[function(e,t,i,r){var n=e("fea8e7ecc9e8fe4");function s(){}t.exports=s,s.lineInt=function(e,t,i){i=i||0;var r,s,a,o,h,c,l,d=[0,0];return r=e[1][1]-e[0][1],s=e[0][0]-e[1][0],a=r*e[0][0]+s*e[0][1],o=t[1][1]-t[0][1],h=t[0][0]-t[1][0],c=o*t[0][0]+h*t[0][1],l=r*h-o*s,n.eq(l,0,i)||(d[0]=(h*a-s*c)/l,d[1]=(r*c-o*a)/l),d},s.segmentsIntersect=function(e,t,i,r){var n=t[0]-e[0],s=t[1]-e[1],a=r[0]-i[0],o=r[1]-i[1];if(a*s-o*n==0)return!1;var h=(n*(i[1]-e[1])+s*(e[0]-i[0]))/(a*s-o*n),c=(a*(e[1]-i[1])+o*(i[0]-e[0]))/(o*n-a*s);return h>=0&&h<=1&&c>=0&&c<=1}},{fea8e7ecc9e8fe4:"53qYK"}],"53qYK":[function(e,t,i,r){function n(){}t.exports=n,n.eq=function(e,t,i){return Math.abs(e-t)<(i=i||0)}},{}],eiy48:[function(e,t,i,r){function n(){}t.exports=n,n.area=function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])},n.left=function(e,t,i){return n.area(e,t,i)>0},n.leftOn=function(e,t,i){return n.area(e,t,i)>=0},n.right=function(e,t,i){return 0>n.area(e,t,i)},n.rightOn=function(e,t,i){return 0>=n.area(e,t,i)};var s=[],a=[];n.collinear=function(e,t,i,r){return r?(s[0]=t[0]-e[0],s[1]=t[1]-e[1],a[0]=i[0]-t[0],a[1]=i[1]-t[1],Math.acos((s[0]*a[0]+s[1]*a[1])/(Math.sqrt(s[0]*s[0]+s[1]*s[1])*Math.sqrt(a[0]*a[0]+a[1]*a[1])))<r):0==n.area(e,t,i)},n.sqdist=function(e,t){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}},{}],"5RgQL":[function(e,t,i,r){var n=e("841fd986776e9f0c"),s=e("dcb74eb19e59e896"),a=e("84be6d54e4a9572e");function o(e){Array.isArray(arguments[0])&&(e={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),e=e||{},this.vertices=[];for(var t=void 0!==e.vertices?e.vertices:[],i=0;i<t.length;i++){var r=s.create();s.copy(r,t[i]),this.vertices.push(r)}if(this.axes=[],e.axes)for(var i=0;i<e.axes.length;i++){var a=s.create();s.copy(a,e.axes[i]),this.axes.push(a)}else for(var i=0;i<this.vertices.length;i++){var o=this.vertices[i],h=this.vertices[(i+1)%this.vertices.length],c=s.create();s.sub(c,h,o),s.rotate90cw(c,c),s.normalize(c,c),this.axes.push(c)}if(this.centerOfMass=s.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.type=n.CONVEX,n.call(this,e),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw Error("Convex vertices must be given in conter-clockwise winding.")}e("a884cbe4162e15c3"),t.exports=o,o.prototype=new n,o.prototype.constructor=o;var h=s.create(),c=s.create();o.prototype.projectOntoLocalAxis=function(e,t){for(var i,r,n=null,a=null,e=h,o=0;o<this.vertices.length;o++)i=this.vertices[o],r=s.dot(i,e),(null===n||r>n)&&(n=r),(null===a||r<a)&&(a=r);if(a>n){var c=a;a=n,n=c}s.set(t,a,n)},o.prototype.projectOntoWorldAxis=function(e,t,i,r){var n=c;this.projectOntoLocalAxis(e,r),0!==i?s.rotate(n,e,i):n=e;var a=s.dot(t,n);s.set(r,r[0]+a,r[1]+a)},o.prototype.updateTriangles=function(){this.triangles.length=0;for(var e=[],t=0;t<this.vertices.length;t++){var i=this.vertices[t];e.push(i[0],i[1])}for(var r=a.Triangulate(e),t=0;t<r.length;t+=3){var n=r[t],s=r[t+1],o=r[t+2];this.triangles.push([n,s,o])}};var l=s.create(),d=s.create(),u=s.create(),f=s.create(),p=s.create();s.create(),s.create(),s.create(),s.create(),o.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,i=this.centerOfMass,r=u,n=f,a=p;s.set(i,0,0);for(var h=0,c=0;c!==e.length;c++){var g=e[c],r=t[g[0]],n=t[g[1]],a=t[g[2]];s.centroid(l,r,n,a);var m=o.triangleArea(r,n,a);h+=m,s.scale(d,l,m),s.add(i,i,d)}s.scale(i,i,1/h)},o.prototype.computeMomentOfInertia=function(e){for(var t=0,i=0,r=this.vertices.length,n=r-1,a=0;a<r;n=a,a++){var o=this.vertices[n],h=this.vertices[a],c=Math.abs(s.crossLength(o,h));t+=c*(s.dot(h,h)+s.dot(h,o)+s.dot(o,o)),i+=c}return e/6*(t/i)},o.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,i=0;i!==e.length;i++){var r=s.squaredLength(e[i]);r>t&&(t=r)}this.boundingRadius=Math.sqrt(t)},o.triangleArea=function(e,t,i){return((t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1]))*.5},o.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,i=0;i!==e.length;i++){var r=e[i],n=t[r[0]],s=t[r[1]],a=t[r[2]],h=o.triangleArea(n,s,a);this.area+=h}},o.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)};var g=s.create(),m=s.create(),v=s.create();o.prototype.raycast=function(e,t,i,r){var n=this.vertices;s.toLocalFrame(g,t.from,i,r),s.toLocalFrame(m,t.to,i,r);for(var a=n.length,o=0;o<a&&!e.shouldStop(t);o++){var h=n[o],c=n[(o+1)%a],l=s.getLineSegmentsIntersectionFraction(g,m,h,c);l>=0&&(s.sub(v,c,h),s.rotate(v,v,-Math.PI/2+r),s.normalize(v,v),t.reportIntersection(e,l,v,o))}}},{"841fd986776e9f0c":"8r7K8",dcb74eb19e59e896:"6V1yH","84be6d54e4a9572e":"fhgGz",a884cbe4162e15c3:"1BDka"}],"8r7K8":[function(e,t,i,r){t.exports=s;var n=e("7f0647825fa1536d");function s(e){e=e||{},this.body=null,this.position=n.fromValues(0,0),e.position&&n.copy(this.position,e.position),this.angle=e.angle||0,this.type=e.type||0,this.id=s.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:1,this.material=e.material||null,this.area=0,this.sensor=void 0!==e.sensor&&e.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}s.idCounter=0,s.CIRCLE=1,s.PARTICLE=2,s.PLANE=4,s.CONVEX=8,s.LINE=16,s.BOX=32,Object.defineProperty(s,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),s.BOX}}),s.CAPSULE=64,s.HEIGHTFIELD=128,s.prototype.computeMomentOfInertia=function(e){},s.prototype.updateBoundingRadius=function(){},s.prototype.updateArea=function(){},s.prototype.computeAABB=function(e,t,i){},s.prototype.raycast=function(e,t,i,r){}},{"7f0647825fa1536d":"6V1yH"}],fhgGz:[function(e,t,i,r){var n={};n.GetArea=function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,r=0;r<t;r+=2)i+=(e[r+2]-e[r])*(e[r+1]+e[r+3]);return-(.5*(i+=(e[0]-e[t])*(e[t+1]+e[1])))},n.Triangulate=function(e){var t=e.length>>1;if(t<3)return[];for(var i=[],r=[],s=0;s<t;s++)r.push(s);for(var s=0,a=t;a>3;){var o=r[(s+0)%a],h=r[(s+1)%a],c=r[(s+2)%a],l=e[2*o],d=e[2*o+1],u=e[2*h],f=e[2*h+1],p=e[2*c],g=e[2*c+1],m=!1;if(n._convex(l,d,u,f,p,g)){m=!0;for(var v=0;v<a;v++){var y=r[v];if(y!=o&&y!=h&&y!=c&&n._PointInTriangle(e[2*y],e[2*y+1],l,d,u,f,p,g)){m=!1;break}}}if(m)i.push(o,h,c),r.splice((s+1)%a,1),a--,s=0;else if(s++>3*a)break}return i.push(r[0],r[1],r[2]),i},n._PointInTriangle=function(e,t,i,r,n,s,a,o){var h=a-i,c=o-r,l=n-i,d=s-r,u=e-i,f=t-r,p=h*h+c*c,g=h*l+c*d,m=h*u+c*f,v=l*l+d*d,y=l*u+d*f,b=1/(p*v-g*g),x=(v*m-g*y)*b,E=(p*y-g*m)*b;return x>=0&&E>=0&&x+E<1},n._convex=function(e,t,i,r,n,s){return(t-r)*(n-i)+(i-e)*(s-r)>=0},t.exports=n},{}],g6dQ6:[function(e,t,i,r){var n=e("ffed16535981586e"),s=e("b8c131fd689cab6d");function a(){this.normal=n.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}t.exports=a,a.prototype.reset=function(){n.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},a.prototype.getHitDistance=function(e){return n.distance(e.from,e.to)*this.fraction},a.prototype.hasHit=function(){return -1!==this.fraction},a.prototype.getHitPoint=function(e,t){n.lerp(e,t.from,t.to,this.fraction)},a.prototype.stop=function(){this.isStopped=!0},a.prototype.shouldStop=function(e){return this.isStopped||-1!==this.fraction&&e.mode===s.ANY},a.prototype.set=function(e,t,i,r,s){n.copy(this.normal,e),this.shape=t,this.body=i,this.fraction=r,this.faceIndex=s}},{ffed16535981586e:"6V1yH",b8c131fd689cab6d:"6nuOx"}],"6nuOx":[function(e,t,i,r){t.exports=s;var n=e("33edfb61f004dada");function s(e){e=e||{},this.from=e.from?n.fromValues(e.from[0],e.from[1]):n.create(),this.to=e.to?n.fromValues(e.to[0],e.to[1]):n.create(),this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,this.skipBackfaces=!!e.skipBackfaces,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:-1,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:-1,this.mode=void 0!==e.mode?e.mode:s.ANY,this.callback=e.callback||function(e){},this.direction=n.create(),this.length=1,this.update()}e("9e89c41e6357f79c"),e("197f77279886c828"),e("bb1f87d75f3ca6c0"),s.prototype.constructor=s,s.CLOSEST=1,s.ANY=2,s.ALL=4,s.prototype.update=function(){var e=this.direction;n.sub(e,this.to,this.from),this.length=n.length(e),n.normalize(e,e)},s.prototype.intersectBodies=function(e,t){for(var i=0,r=t.length;!e.shouldStop(this)&&i<r;i++){var n=t[i],s=n.getAABB();(s.overlapsRay(this)>=0||s.containsPoint(this.from))&&this.intersectBody(e,n)}};var a=n.create();s.prototype.intersectBody=function(e,t){var i=this.checkCollisionResponse;if(!i||t.collisionResponse)for(var r=0,s=t.shapes.length;r<s;r++){var o=t.shapes[r];if((!i||o.collisionResponse)&&(this.collisionGroup&o.collisionMask)!=0&&(o.collisionGroup&this.collisionMask)!=0){n.rotate(a,o.position,t.angle),n.add(a,a,t.position);var h=o.angle+t.angle;if(this.intersectShape(e,o,h,a,t),e.shouldStop(this))break}}},s.prototype.intersectShape=function(e,t,i,r,s){var a,c,l,d;a=this.from,c=this.direction,l=r,n.sub(o,l,a),d=n.dot(o,c),n.scale(h,c,d),n.add(h,h,a),n.squaredDistance(l,h)>t.boundingRadius*t.boundingRadius||(this._currentBody=s,this._currentShape=t,t.raycast(e,this,r,i),this._currentBody=this._currentShape=null)},s.prototype.getAABB=function(e){var t=this.to,i=this.from;n.set(e.lowerBound,Math.min(t[0],i[0]),Math.min(t[1],i[1])),n.set(e.upperBound,Math.max(t[0],i[0]),Math.max(t[1],i[1]))},n.create(),s.prototype.reportIntersection=function(e,t,i,r){this.from,this.to;var a=this._currentShape,o=this._currentBody;if(!(this.skipBackfaces&&n.dot(i,this.direction)>0))switch(this.mode){case s.ALL:e.set(i,a,o,t,r),this.callback(e);break;case s.CLOSEST:(t<e.fraction||!e.hasHit())&&e.set(i,a,o,t,r);break;case s.ANY:e.set(i,a,o,t,r)}};var o=n.create(),h=n.create()},{"33edfb61f004dada":"6V1yH","9e89c41e6357f79c":"g6dQ6","197f77279886c828":"8r7K8",bb1f87d75f3ca6c0:"iFKXP"}],iK19H:[function(e,t,i,r){var n=function(){};t.exports=n,n.prototype={constructor:n,on:function(e,t,i){t.context=i||this,void 0===this._listeners&&(this._listeners={});var r=this._listeners;return void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;if(t){if(void 0!==i[e]&&-1!==i[e].indexOf(t))return!0}else if(void 0!==i[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var i=this._listeners,r=i[e].indexOf(t);return -1!==r&&i[e].splice(r,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,r=t.length;i<r;i++){var n=t[i];n.call(n.context,e)}}return this}}},{}],"2rxxC":[function(e,t,i,r){var n=e("1627a00dfa455de0"),s=e("2a79571e0c411022");function a(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=a.AABB}t.exports=a,a.AABB=1,a.BOUNDING_CIRCLE=2,a.prototype.setWorld=function(e){this.world=e},a.prototype.getCollisionPairs=function(e){};var o=n.create();a.boundingRadiusCheck=function(e,t){n.sub(o,e.position,t.position);var i=n.squaredLength(o),r=e.boundingRadius+t.boundingRadius;return i<=r*r},a.aabbCheck=function(e,t){return e.getAABB().overlaps(t.getAABB())},a.prototype.boundingVolumeCheck=function(e,t){var i;switch(this.boundingVolumeType){case a.BOUNDING_CIRCLE:i=a.boundingRadiusCheck(e,t);break;case a.AABB:i=a.aabbCheck(e,t);break;default:throw Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},a.canCollide=function(e,t){var i=s.KINEMATIC,r=s.STATIC;return(e.type!==r||t.type!==r)&&(e.type!==i||t.type!==r)&&(e.type!==r||t.type!==i)&&(e.type!==i||t.type!==i)&&(e.sleepState!==s.SLEEPING||t.sleepState!==s.SLEEPING)&&(e.sleepState!==s.SLEEPING||t.type!==r)&&(t.sleepState!==s.SLEEPING||e.type!==r)&&!0},a.NAIVE=1,a.SAP=2},{"1627a00dfa455de0":"6V1yH","2a79571e0c411022":"174uM"}],c3xj1:[function(e,t,i,r){var n=e("9e9977082ca4fe14"),s=e("18975187aa31e1cf");function a(e){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(e={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),e=e||{},this.length=e.length||1,this.radius=e.radius||1,e.type=n.CAPSULE,n.call(this,e)}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(e){var t=this.radius,i=this.length+t,r=2*t;return e*(r*r+i*i)/12},a.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},a.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var o=s.create();a.prototype.computeAABB=function(e,t,i){var r=this.radius;s.set(o,this.length/2,0),0!==i&&s.rotate(o,o,i),s.set(e.upperBound,Math.max(o[0]+r,-o[0]+r),Math.max(o[1]+r,-o[1]+r)),s.set(e.lowerBound,Math.min(o[0]-r,-o[0]-r),Math.min(o[1]-r,-o[1]-r)),s.add(e.lowerBound,e.lowerBound,t),s.add(e.upperBound,e.upperBound,t)};var h=s.create(),c=s.create(),l=s.create(),d=s.create(),u=s.fromValues(0,1);a.prototype.raycast=function(e,t,i,r){var n=t.from,a=t.to;t.direction;for(var o=this.length/2,f=0;f<2;f++){var p=this.radius*(2*f-1);s.set(l,-o,p),s.set(d,o,p),s.toGlobalFrame(l,l,i,r),s.toGlobalFrame(d,d,i,r);var g=s.getLineSegmentsIntersectionFraction(n,a,l,d);if(g>=0&&(s.rotate(c,u,r),s.scale(c,c,2*f-1),t.reportIntersection(e,g,c,-1),e.shouldStop(t)))return}for(var m=Math.pow(this.radius,2)+Math.pow(o,2),f=0;f<2;f++){s.set(l,o*(2*f-1),0),s.toGlobalFrame(l,l,i,r);var v=Math.pow(a[0]-n[0],2)+Math.pow(a[1]-n[1],2),y=2*((a[0]-n[0])*(n[0]-l[0])+(a[1]-n[1])*(n[1]-l[1])),g=Math.pow(y,2)-4*v*(Math.pow(n[0]-l[0],2)+Math.pow(n[1]-l[1],2)-Math.pow(this.radius,2));if(!(g<0))if(0===g){if(s.lerp(h,n,a,g),s.squaredDistance(h,i)>m&&(s.sub(c,h,l),s.normalize(c,c),t.reportIntersection(e,g,c,-1),e.shouldStop(t)))return}else{var b=Math.sqrt(g),x=1/(2*v),E=(-y-b)*x,T=(-y+b)*x;if(E>=0&&E<=1&&(s.lerp(h,n,a,E),s.squaredDistance(h,i)>m)&&(s.sub(c,h,l),s.normalize(c,c),t.reportIntersection(e,E,c,-1),e.shouldStop(t))||T>=0&&T<=1&&(s.lerp(h,n,a,T),s.squaredDistance(h,i)>m)&&(s.sub(c,h,l),s.normalize(c,c),t.reportIntersection(e,T,c,-1),e.shouldStop(t)))return}}}},{"9e9977082ca4fe14":"8r7K8","18975187aa31e1cf":"6V1yH"}],hvGBf:[function(e,t,i,r){var n=e("7b96c457d59a0d0"),s=e("b89d644e39bbe061");function a(e){"number"==typeof arguments[0]&&(e={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),e=e||{},this.radius=e.radius||1,e.type=n.CIRCLE,n.call(this,e)}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},a.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},a.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},a.prototype.computeAABB=function(e,t,i){var r=this.radius;s.set(e.upperBound,r,r),s.set(e.lowerBound,-r,-r),t&&(s.add(e.lowerBound,e.lowerBound,t),s.add(e.upperBound,e.upperBound,t))};var o=s.create(),h=s.create();a.prototype.raycast=function(e,t,i,r){var n=t.from,a=t.to,c=this.radius,l=Math.pow(a[0]-n[0],2)+Math.pow(a[1]-n[1],2),d=2*((a[0]-n[0])*(n[0]-i[0])+(a[1]-n[1])*(n[1]-i[1])),u=Math.pow(d,2)-4*l*(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)-Math.pow(c,2));if(!(u<0))if(0===u)s.lerp(o,n,a,u),s.sub(h,o,i),s.normalize(h,h),t.reportIntersection(e,u,h,-1);else{var f=Math.sqrt(u),p=1/(2*l),g=(-d-f)*p,m=(-d+f)*p;if(g>=0&&g<=1&&(s.lerp(o,n,a,g),s.sub(h,o,i),s.normalize(h,h),t.reportIntersection(e,g,h,-1),e.shouldStop(t)))return;m>=0&&m<=1&&(s.lerp(o,n,a,m),s.sub(h,o,i),s.normalize(h,h),t.reportIntersection(e,m,h,-1))}}},{"7b96c457d59a0d0":"8r7K8",b89d644e39bbe061:"6V1yH"}],"1naZa":[function(e,t,i,r){t.exports=s;var n=e("72b9dd33e1ac0322");function s(e,t,i,r){this.type=i,r=n.defaults(r,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=r.collideConnected,r.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}s.prototype.update=function(){throw Error("method update() not implmemented in this Constraint subclass!")},s.DISTANCE=1,s.GEAR=2,s.LOCK=3,s.PRISMATIC=4,s.REVOLUTE=5,s.prototype.setStiffness=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var r=t[i];r.stiffness=e,r.needsUpdate=!0}},s.prototype.setRelaxation=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var r=t[i];r.relaxation=e,r.needsUpdate=!0}}},{"72b9dd33e1ac0322":"7LSYB"}],gMvS0:[function(e,t,i,r){var n=e("d1ef8939b96b621"),s=e("b8f27de80732e752");function a(e,t){n.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=s.create(),this.penetrationVec=s.create(),this.contactPointB=s.create(),this.normalA=s.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeB=function(e,t,i){var r,n,a=this.bodyA,o=this.bodyB,h=this.contactPointA,c=this.contactPointB,l=a.position,d=o.position,u=this.penetrationVec,f=this.normalA,p=this.G,g=s.crossLength(h,f),m=s.crossLength(c,f);return p[0]=-f[0],p[1]=-f[1],p[2]=-g,p[3]=f[0],p[4]=f[1],p[5]=m,s.add(u,d,c),s.sub(u,u,l),s.sub(u,u,h),this.firstImpact&&0!==this.restitution?(n=0,r=1/t*(1+this.restitution)*this.computeGW()):(n=s.dot(f,u)+this.offset,r=this.computeGW()),-n*e-r*t-i*this.computeGiMf()};var o=s.create(),h=s.create(),c=s.create();a.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(o,this.contactPointA),this.bodyB.getVelocityAtPoint(h,this.contactPointB),s.subtract(c,o,h),s.dot(this.normalA,c)}},{d1ef8939b96b621:"vy9Ac",b8f27de80732e752:"6V1yH"}],kVkx4:[function(e,t,i,r){var n=e("c9592f5c11436c3c"),s=e("16e85c8eda8f563e");function a(){s.apply(this,arguments)}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.create=function(){return new n},a.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{c9592f5c11436c3c:"gMvS0","16e85c8eda8f563e":"hpo2a"}],hpo2a:[function(e,t,i,r){function n(e){e=e||{},this.objects=[],void 0!==e.size&&this.resize(e.size)}t.exports=n,n.prototype.resize=function(e){for(var t=this.objects;t.length>e;)t.pop();for(;t.length<e;)t.push(this.create());return this},n.prototype.get=function(){var e=this.objects;return e.length?e.pop():this.create()},n.prototype.release=function(e){return this.destroy(e),this.objects.push(e),this}},{}],hoyOw:[function(e,t,i,r){var n=e("fc2def147583745d"),s=e("91d2d0213c5dc868");function a(e,t,i){if(i=i||{},!(e instanceof n)||!(t instanceof n))throw Error("First two arguments must be Material instances.");this.id=a.idCounter++,this.materialA=e,this.materialB=t,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):s.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):s.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):s.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):s.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}t.exports=a,a.idCounter=0},{fc2def147583745d:"h4UHn","91d2d0213c5dc868":"vy9Ac"}],h4UHn:[function(e,t,i,r){function n(e){this.id=e||n.idCounter++}t.exports=n,n.idCounter=0},{}],fHS5f:[function(e,t,i,r){var n=e("620aafee58b85d7b"),s=e("9a9c76eef024f50"),a=e("631888c66aae238e"),o=e("6fddc2832ed3f9f");function h(e,t,i){i=o.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),n.call(this,e,t,n.DISTANCE,i),this.localAnchorA=a.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=a.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var r,h=this.localAnchorA,c=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var l=a.create(),d=a.create(),u=a.create();a.rotate(l,h,e.angle),a.rotate(d,c,t.angle),a.add(u,t.position,d),a.sub(u,u,l),a.sub(u,u,e.position),this.distance=a.length(u)}var f=new s(e,t,-(r=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce),r);this.equations=[f],this.maxForce=r;var u=a.create(),p=a.create(),g=a.create(),m=this;f.computeGq=function(){var e=this.bodyA,t=this.bodyB,i=e.position,r=t.position;return a.rotate(p,h,e.angle),a.rotate(g,c,t.angle),a.add(u,r,g),a.sub(u,u,p),a.sub(u,u,i),a.length(u)-m.distance},this.setMaxForce(r),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}t.exports=h,h.prototype=new n,h.prototype.constructor=h;var c=a.create(),l=a.create(),d=a.create();h.prototype.update=function(){var e=this.equations[0],t=this.bodyA,i=this.bodyB,r=(this.distance,t.position),n=i.position,s=this.equations[0],o=e.G;a.rotate(l,this.localAnchorA,t.angle),a.rotate(d,this.localAnchorB,i.angle),a.add(c,n,d),a.sub(c,c,l),a.sub(c,c,r),this.position=a.length(c);var h=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(s.maxForce=0,s.minForce=-this.maxForce,this.distance=this.upperLimit,h=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(s.maxForce=this.maxForce,s.minForce=0,this.distance=this.lowerLimit,h=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!h){s.enabled=!1;return}s.enabled=!0,a.normalize(c,c);var u=a.crossLength(l,c),f=a.crossLength(d,c);o[0]=-c[0],o[1]=-c[1],o[2]=-u,o[3]=c[0],o[4]=c[1],o[5]=f},h.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},h.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"620aafee58b85d7b":"1naZa","9a9c76eef024f50":"vy9Ac","631888c66aae238e":"6V1yH","6fddc2832ed3f9f":"7LSYB"}],"1NlHz":[function(e,t,i,r){var n=e("b0acfea61f6f4161"),s=e("4a773823483ed44");function a(e,t,i){s.call(this,e,t,-i,i),this.contactPointA=n.create(),this.contactPointB=n.create(),this.t=n.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}e("981c32654f98c292"),t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},a.prototype.getSlipForce=function(){return this.maxForce},a.prototype.computeB=function(e,t,i){this.bodyA,this.bodyB;var r=this.contactPointA,s=this.contactPointB,a=this.t,o=this.G;return o[0]=-a[0],o[1]=-a[1],o[2]=-n.crossLength(r,a),o[3]=a[0],o[4]=a[1],o[5]=n.crossLength(s,a),-this.computeGW()*t-i*this.computeGiMf()}},{b0acfea61f6f4161:"6V1yH","4a773823483ed44":"vy9Ac","981c32654f98c292":"7LSYB"}],"7zO6n":[function(e,t,i,r){var n=e("4ef88f5abe9e17d5"),s=e("f82e12a03081c4a8");function a(){s.apply(this,arguments)}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.create=function(){return new n},a.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"4ef88f5abe9e17d5":"1NlHz",f82e12a03081c4a8:"hpo2a"}],hdQyd:[function(e,t,i,r){var n=e("73ca40a78930f02d"),s=(e("1e7494b86ac8914c"),e("c98a2cf2d75a2125"));function a(e,t,i){i=i||{},n.call(this,e,t,n.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:t.angle-this.ratio*e.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new s(e,t,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}e("5750fdd4fabd8533"),t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},a.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},a.prototype.getMaxTorque=function(e){return this.equations[0].maxForce}},{"73ca40a78930f02d":"1naZa","1e7494b86ac8914c":"vy9Ac",c98a2cf2d75a2125:"2H0WW","5750fdd4fabd8533":"6V1yH"}],aMqbT:[function(e,t,i,r){var n=e("5da883f1a169a767"),s=e("806c911d364412af"),a=e("860c6aa487698116"),o=e("407b0a2d87bc3b6e");function h(e){s.call(this,e,s.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-7,this.arrayStep=30,this.lambda=new a.ARRAY_TYPE(this.arrayStep),this.Bs=new a.ARRAY_TYPE(this.arrayStep),this.invCs=new a.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==e.frictionIterations?0:e.frictionIterations,this.usedIterations=0}t.exports=h,h.prototype=new s,h.prototype.constructor=h,h.prototype.solve=function(e,t){this.sortEquations();var i,r,s,c,l=0,d=this.iterations,u=this.frictionIterations,f=this.equations,p=f.length,g=Math.pow(this.tolerance*p,2),m=t.bodies,v=t.bodies.length,y=(n.add,n.set,this.useZeroRHS),b=this.lambda;if(this.usedIterations=0,p)for(var s=0;s!==v;s++){var x=m[s];x.updateSolveMassProperties()}b.length<p&&(b=this.lambda=new a.ARRAY_TYPE(p+this.arrayStep),this.Bs=new a.ARRAY_TYPE(p+this.arrayStep),this.invCs=new a.ARRAY_TYPE(p+this.arrayStep));for(var E=b,T=E.length;T--;)E[T]=0;for(var A=this.invCs,w=this.Bs,b=this.lambda,s=0;s!==f.length;s++){var i=f[s];(i.timeStep!==e||i.needsUpdate)&&(i.timeStep=e,i.update()),w[s]=i.computeB(i.a,i.b,e),A[s]=i.computeInvC(i.epsilon)}if(0!==p){for(s=0;s!==v;s++){var x=m[s];x.resetConstraintVelocity()}if(u){for(l=0;l!==u;l++){for(c=0,r=0;c!==p;c++){i=f[c];var S=h.iterateEquation(c,i,i.epsilon,w,A,b,y,e,l);r+=Math.abs(S)}if(this.usedIterations++,r*r<=g)break}for(h.updateMultipliers(f,b,1/e),c=0;c!==p;c++){var C=f[c];if(C instanceof o){for(var I=0,_=0;_!==C.contactEquations.length;_++)I+=C.contactEquations[_].multiplier;I*=C.frictionCoefficient/C.contactEquations.length,C.maxForce=I,C.minForce=-I}}}for(l=0;l!==d;l++){for(c=0,r=0;c!==p;c++){i=f[c];var S=h.iterateEquation(c,i,i.epsilon,w,A,b,y,e,l);r+=Math.abs(S)}if(this.usedIterations++,r*r<=g)break}for(s=0;s!==v;s++)m[s].addConstraintVelocity();h.updateMultipliers(f,b,1/e)}},h.updateMultipliers=function(e,t,i){for(var r=e.length;r--;)e[r].multiplier=t[r]*i},h.iterateEquation=function(e,t,i,r,n,s,a,o,h){var c=r[e],l=n[e],d=s[e],u=t.computeGWlambda(),f=t.maxForce,p=t.minForce;a&&(c=0);var g=l*(c-u-i*d),m=d+g;return m<p*o?g=p*o-d:m>f*o&&(g=f*o-d),s[e]+=g,t.addToWlambda(g),g}},{"5da883f1a169a767":"6V1yH","806c911d364412af":"fDYb8","860c6aa487698116":"7LSYB","407b0a2d87bc3b6e":"1NlHz"}],fDYb8:[function(e,t,i,r){e("ead7d6ca55bdfe1c");var n=e("d16ea32444765393");function s(e,t){e=e||{},n.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}t.exports=s,s.prototype=new n,s.prototype.constructor=s,s.prototype.solve=function(e,t){throw Error("Solver.solve should be implemented by subclasses!")};var a={bodies:[]};s.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),a.bodies.length=0,t.getBodies(a.bodies),a.bodies.length&&this.solve(e,a))},s.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},s.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},s.prototype.addEquations=function(e){for(var t=0,i=e.length;t!==i;t++){var r=e[t];r.enabled&&this.equations.push(r)}},s.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},s.prototype.removeAllEquations=function(){this.equations.length=0},s.GS=1,s.ISLAND=2},{ead7d6ca55bdfe1c:"7LSYB",d16ea32444765393:"iK19H"}],NRkh0:[function(e,t,i,r){var n=e("8b74883bebf2335f"),s=e("2a849db0ba73e95d");function a(e){if(Array.isArray(arguments[0])){if(e={heights:arguments[0]},"object"==typeof arguments[1])for(var t in arguments[1])e[t]=arguments[1][t];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}e=e||{},this.heights=e.heights?e.heights.slice(0):[],this.maxValue=e.maxValue||null,this.minValue=e.minValue||null,this.elementWidth=e.elementWidth||.1,(void 0===e.maxValue||void 0===e.minValue)&&this.updateMaxMinValues(),e.type=n.HEIGHTFIELD,n.call(this,e)}e("2dc7f9a400756551"),t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.updateMaxMinValues=function(){for(var e=this.heights,t=e[0],i=e[0],r=0;r!==e.length;r++){var n=e[r];n>t&&(t=n),n<i&&(i=n)}this.maxValue=t,this.minValue=i},a.prototype.computeMomentOfInertia=function(e){return Number.MAX_VALUE},a.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},a.prototype.updateArea=function(){for(var e=this.heights,t=0,i=0;i<e.length-1;i++)t+=(e[i]+e[i+1])/2*this.elementWidth;this.area=t};var o=[s.create(),s.create(),s.create(),s.create()];a.prototype.computeAABB=function(e,t,i){s.set(o[0],0,this.maxValue),s.set(o[1],this.elementWidth*this.heights.length,this.maxValue),s.set(o[2],this.elementWidth*this.heights.length,this.minValue),s.set(o[3],0,this.minValue),e.setFromPoints(o,t,i)},a.prototype.getLineSegment=function(e,t,i){var r=this.heights,n=this.elementWidth;s.set(e,i*n,r[i]),s.set(t,(i+1)*n,r[i+1])},a.prototype.getSegmentIndex=function(e){return Math.floor(e[0]/this.elementWidth)},a.prototype.getClampedSegmentIndex=function(e){var t=this.getSegmentIndex(e);return Math.min(this.heights.length,Math.max(t,0))},s.create();var h=s.create(),c=s.create(),l=s.create(),d=s.create(),u=s.create();s.fromValues(0,1),a.prototype.raycast=function(e,t,i,r){var n=t.from,a=t.to;t.direction,s.toLocalFrame(d,n,i,r),s.toLocalFrame(u,a,i,r);var o=this.getClampedSegmentIndex(d),f=this.getClampedSegmentIndex(u);if(o>f){var p=o;o=f,f=p}for(var g=0;g<this.heights.length-1;g++){this.getLineSegment(c,l,g);var m=s.getLineSegmentsIntersectionFraction(d,u,c,l);if(m>=0&&(s.sub(h,l,c),s.rotate(h,h,r+Math.PI/2),s.normalize(h,h),t.reportIntersection(e,m,h,-1),e.shouldStop(t)))return}}},{"8b74883bebf2335f":"8r7K8","2a849db0ba73e95d":"6V1yH","2dc7f9a400756551":"7LSYB"}],"7MGrW":[function(e,t,i,r){var n=e("e0cff235fc0213eb"),s=e("f3353cee691d66a4");function a(e){"number"==typeof arguments[0]&&(e={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),e=e||{},this.length=e.length||1,e.type=n.LINE,n.call(this,e)}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},a.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var o=[s.create(),s.create()];a.prototype.computeAABB=function(e,t,i){var r=this.length/2;s.set(o[0],-r,0),s.set(o[1],r,0),e.setFromPoints(o,t,i,0)},s.create();var h=s.create(),c=s.create(),l=s.create(),d=s.fromValues(0,1);a.prototype.raycast=function(e,t,i,r){var n=t.from,a=t.to,o=this.length/2;s.set(c,-o,0),s.set(l,o,0),s.toGlobalFrame(c,c,i,r),s.toGlobalFrame(l,l,i,r);var u=s.getLineSegmentsIntersectionFraction(c,l,n,a);u>=0&&(s.rotate(h,d,r),t.reportIntersection(e,u,h,-1))}},{e0cff235fc0213eb:"8r7K8",f3353cee691d66a4:"6V1yH"}],"7TLGq":[function(e,t,i,r){var n=e("97b5dc61d97fd4de"),s=e("48200108ddae2806"),a=e("6dd72d87868993d0");function o(e,t,i){i=i||{},n.call(this,e,t,n.LOCK,i);var r=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;i.localAngleB;var o=new a(e,t,-r,r),h=new a(e,t,-r,r),c=new a(e,t,-r,r),l=s.create(),d=s.create(),u=this;o.computeGq=function(){return s.rotate(l,u.localOffsetB,e.angle),s.sub(d,t.position,e.position),s.sub(d,d,l),d[0]},h.computeGq=function(){return s.rotate(l,u.localOffsetB,e.angle),s.sub(d,t.position,e.position),s.sub(d,d,l),d[1]};var f=s.create(),p=s.create();c.computeGq=function(){return s.rotate(f,u.localOffsetB,t.angle-u.localAngleB),s.scale(f,f,-1),s.sub(d,e.position,t.position),s.add(d,d,f),s.rotate(p,f,-Math.PI/2),s.normalize(p,p),s.dot(d,p)},this.localOffsetB=s.create(),i.localOffsetB?s.copy(this.localOffsetB,i.localOffsetB):(s.sub(this.localOffsetB,t.position,e.position),s.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=t.angle-e.angle,this.equations.push(o,h,c),this.setMaxForce(r)}t.exports=o,o.prototype=new n,o.prototype.constructor=o,o.prototype.setMaxForce=function(e){for(var t=this.equations,i=0;i<this.equations.length;i++)t[i].maxForce=e,t[i].minForce=-e},o.prototype.getMaxForce=function(){return this.equations[0].maxForce};var h=s.create(),c=s.create(),l=s.create(),d=s.fromValues(1,0),u=s.fromValues(0,1);o.prototype.update=function(){var e=this.equations[0],t=this.equations[1],i=this.equations[2],r=this.bodyA,n=this.bodyB;s.rotate(h,this.localOffsetB,r.angle),s.rotate(c,this.localOffsetB,n.angle-this.localAngleB),s.scale(c,c,-1),s.rotate(l,c,Math.PI/2),s.normalize(l,l),e.G[0]=-1,e.G[1]=0,e.G[2]=-s.crossLength(h,d),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-s.crossLength(h,u),t.G[4]=1,i.G[0]=-l[0],i.G[1]=-l[1],i.G[3]=l[0],i.G[4]=l[1],i.G[5]=s.crossLength(c,l)}},{"97b5dc61d97fd4de":"1naZa","48200108ddae2806":"6V1yH","6dd72d87868993d0":"vy9Ac"}],jfIHe:[function(e,t,i,r){var n=e("d204b374af39e639"),s=n.sub,a=n.add,o=n.dot,h=(e("20933053438ebab6"),e("d95153d3fb05b14")),c=e("f0516d5454f63cd7"),l=e("bfdf9baf3e6a5d5e"),d=e("bcecfc97841fc70f"),u=(e("4364ae5edbd1b6f2"),e("d45d0e6691fce04d"),e("ae87cd0523cc9ee0")),f=e("25f1c61bf04b8848"),p=e("6ee63ef2e0948d6f"),g=(e("390f12b6d811410f"),e("4ace90d86ba1ce1"));t.exports=N;var m=n.fromValues(0,1),v=n.fromValues(0,0),y=n.fromValues(0,0),b=n.fromValues(0,0),x=n.fromValues(0,0),E=n.fromValues(0,0),T=n.fromValues(0,0),A=n.fromValues(0,0),w=n.fromValues(0,0),S=n.fromValues(0,0),C=n.fromValues(0,0),I=n.fromValues(0,0),_=n.fromValues(0,0),O=n.fromValues(0,0),P=n.fromValues(0,0),M=n.fromValues(0,0),R=n.fromValues(0,0),L=n.fromValues(0,0),D=n.fromValues(0,0),k=[];function N(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new h({size:32}),this.frictionEquationPool=new c({size:64}),this.restitution=0,this.stiffness=d.DEFAULT_STIFFNESS,this.relaxation=d.DEFAULT_RELAXATION,this.frictionStiffness=d.DEFAULT_STIFFNESS,this.frictionRelaxation=d.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new l,this.contactSkinSize=.01}var F=n.create(),B=n.create();function U(e,t){n.set(e.vertices[0],-(.5*t.length),-t.radius),n.set(e.vertices[1],.5*t.length,-t.radius),n.set(e.vertices[2],.5*t.length,t.radius),n.set(e.vertices[3],-(.5*t.length),t.radius)}N.prototype.bodiesOverlap=function(e,t){for(var i=0,r=e.shapes.length;i!==r;i++){var n=e.shapes[i];e.toWorldFrame(F,n.position);for(var s=0,a=t.shapes.length;s!==a;s++){var o=t.shapes[s];if(t.toWorldFrame(B,o.position),this[n.type|o.type](e,n,F,n.angle+e.angle,t,o,B,o.angle+t.angle,!0))return!0}}return!1},N.prototype.collidedLastStep=function(e,t){var i=0|e.id,r=0|t.id;return!!this.collidingBodiesLastStep.get(i,r)},N.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var i=e[t],r=i.bodyA.id,n=i.bodyB.id;this.collidingBodiesLastStep.set(r,n,!0)}for(var s=this.contactEquations,a=this.frictionEquations,o=0;o<s.length;o++)this.contactEquationPool.release(s[o]);for(var o=0;o<a.length;o++)this.frictionEquationPool.release(a[o]);this.contactEquations.length=this.frictionEquations.length=0},N.prototype.createContactEquation=function(e,t,i,r){var n=this.contactEquationPool.get();return n.bodyA=e,n.bodyB=t,n.shapeA=i,n.shapeB=r,n.restitution=this.restitution,n.firstImpact=!this.collidedLastStep(e,t),n.stiffness=this.stiffness,n.relaxation=this.relaxation,n.needsUpdate=!0,n.enabled=this.enabledEquations,n.offset=this.contactSkinSize,n},N.prototype.createFrictionEquation=function(e,t,i,r){var n=this.frictionEquationPool.get();return n.bodyA=e,n.bodyB=t,n.shapeA=i,n.shapeB=r,n.setSlipForce(this.slipForce),n.frictionCoefficient=this.frictionCoefficient,n.relativeVelocity=this.surfaceVelocity,n.enabled=this.enabledEquations,n.needsUpdate=!0,n.stiffness=this.frictionStiffness,n.relaxation=this.frictionRelaxation,n.contactEquations.length=0,n},N.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return n.copy(t.contactPointA,e.contactPointA),n.copy(t.contactPointB,e.contactPointB),n.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},N.prototype.createFrictionFromAverage=function(e){var t=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),r=t.bodyA;t.bodyB,n.set(i.contactPointA,0,0),n.set(i.contactPointB,0,0),n.set(i.t,0,0);for(var s=0;s!==e;s++)(t=this.contactEquations[this.contactEquations.length-1-s]).bodyA===r?(n.add(i.t,i.t,t.normalA),n.add(i.contactPointA,i.contactPointA,t.contactPointA),n.add(i.contactPointB,i.contactPointB,t.contactPointB)):(n.sub(i.t,i.t,t.normalA),n.add(i.contactPointA,i.contactPointA,t.contactPointB),n.add(i.contactPointB,i.contactPointB,t.contactPointA)),i.contactEquations.push(t);var a=1/e;return n.scale(i.contactPointA,i.contactPointA,a),n.scale(i.contactPointB,i.contactPointB,a),n.normalize(i.t,i.t),n.rotate90cw(i.t,i.t),i},N.prototype[p.LINE|p.CONVEX]=N.prototype.convexLine=function(e,t,i,r,n,s,a,o,h){return!h&&0},N.prototype[p.LINE|p.BOX]=N.prototype.lineBox=function(e,t,i,r,n,s,a,o,h){return!h&&0};var G=new g({width:1,height:1}),V=n.create();N.prototype[p.CAPSULE|p.CONVEX]=N.prototype[p.CAPSULE|p.BOX]=N.prototype.convexCapsule=function(e,t,i,r,s,a,o,h,c){n.set(V,a.length/2,0),n.rotate(V,V,h),n.add(V,V,o);var l=this.circleConvex(s,a,V,h,e,t,i,r,c,a.radius);n.set(V,-a.length/2,0),n.rotate(V,V,h),n.add(V,V,o);var d=this.circleConvex(s,a,V,h,e,t,i,r,c,a.radius);return!!c&&(!!l||!!d)||(U(G,a),this.convexConvex(e,t,i,r,s,G,o,h,c)+l+d)},N.prototype[p.CAPSULE|p.LINE]=N.prototype.lineCapsule=function(e,t,i,r,n,s,a,o,h){return!h&&0};var Y=n.create(),j=n.create(),W=new g({width:1,height:1});N.prototype[p.CAPSULE|p.CAPSULE]=N.prototype.capsuleCapsule=function(e,t,i,r,s,a,o,h,c){for(var l,d=0,u=0;u<2;u++){n.set(Y,(0===u?-1:1)*t.length/2,0),n.rotate(Y,Y,r),n.add(Y,Y,i);for(var f=0;f<2;f++){n.set(j,(0===f?-1:1)*a.length/2,0),n.rotate(j,j,h),n.add(j,j,o),this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var p=this.circleCircle(e,t,Y,r,s,a,j,h,c,t.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=l),c&&p)return!0;d+=p}}this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1),U(W,t);var g=this.convexCapsule(e,W,i,r,s,a,o,h,c);if(this.enableFrictionReduction&&(this.enableFriction=l),c&&g)return!0;if(d+=g,this.enableFrictionReduction){var l=this.enableFriction;this.enableFriction=!1}U(W,a);var m=this.convexCapsule(s,W,o,h,e,t,i,r,c);return this.enableFrictionReduction&&(this.enableFriction=l),!!c&&!!m||(d+=m,this.enableFrictionReduction&&d&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(d)),d)},N.prototype[p.LINE|p.LINE]=N.prototype.lineLine=function(e,t,i,r,n,s,a,o,h){return!h&&0},N.prototype[p.PLANE|p.LINE]=N.prototype.planeLine=function(e,t,i,r,h,c,l,d,u){var f=0;n.set(v,-c.length/2,0),n.set(y,c.length/2,0),n.rotate(b,v,d),n.rotate(x,y,d),a(b,b,l),a(x,x,l),n.copy(v,b),n.copy(y,x),s(E,y,v),n.normalize(T,E),n.rotate90cw(S,T),n.rotate(w,m,r),k[0]=v,k[1]=y;for(var p=0;p<k.length;p++){var g=k[p];s(A,g,i);var C=o(A,w);if(C<0){if(u)return!0;var I=this.createContactEquation(e,h,t,c);f++,n.copy(I.normalA,w),n.normalize(I.normalA,I.normalA),n.scale(A,w,C),s(I.contactPointA,g,A),s(I.contactPointA,I.contactPointA,e.position),s(I.contactPointB,g,l),a(I.contactPointB,I.contactPointB,l),s(I.contactPointB,I.contactPointB,h.position),this.contactEquations.push(I),!this.enableFrictionReduction&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(I))}}return!u&&(!this.enableFrictionReduction&&f&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f)},N.prototype[p.PARTICLE|p.CAPSULE]=N.prototype.particleCapsule=function(e,t,i,r,n,s,a,o,h){return this.circleLine(e,t,i,r,n,s,a,o,h,s.radius,0)},N.prototype[p.CIRCLE|p.LINE]=N.prototype.circleLine=function(e,t,i,r,h,c,l,d,u,f,p){var f=f||0,p=void 0!==p?p:t.radius;n.set(w,-c.length/2,0),n.set(S,c.length/2,0),n.rotate(C,w,d),n.rotate(I,S,d),a(C,C,l),a(I,I,l),n.copy(w,C),n.copy(S,I),s(T,S,w),n.normalize(A,T),n.rotate90cw(E,A),s(_,i,w);var g=o(_,E);s(x,w,l),s(O,i,l);var m=p+f;if(Math.abs(g)<m){n.scale(v,E,g),s(b,i,v),n.scale(y,E,o(E,O)),n.normalize(y,y),n.scale(y,y,f),a(b,b,y);var M=o(A,b),R=o(A,w),L=o(A,S);if(M>R&&M<L){if(u)return!0;var D=this.createContactEquation(e,h,t,c);return n.scale(D.normalA,v,-1),n.normalize(D.normalA,D.normalA),n.scale(D.contactPointA,D.normalA,p),a(D.contactPointA,D.contactPointA,i),s(D.contactPointA,D.contactPointA,e.position),s(D.contactPointB,b,l),a(D.contactPointB,D.contactPointB,l),s(D.contactPointB,D.contactPointB,h.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}}k[0]=w,k[1]=S;for(var N=0;N<k.length;N++){var F=k[N];if(s(_,F,i),n.squaredLength(_)<Math.pow(m,2)){if(u)return!0;var D=this.createContactEquation(e,h,t,c);return n.copy(D.normalA,_),n.normalize(D.normalA,D.normalA),n.scale(D.contactPointA,D.normalA,p),a(D.contactPointA,D.contactPointA,i),s(D.contactPointA,D.contactPointA,e.position),s(D.contactPointB,F,l),n.scale(P,D.normalA,-f),a(D.contactPointB,D.contactPointB,P),a(D.contactPointB,D.contactPointB,l),s(D.contactPointB,D.contactPointB,h.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}}return 0},N.prototype[p.CIRCLE|p.CAPSULE]=N.prototype.circleCapsule=function(e,t,i,r,n,s,a,o,h){return this.circleLine(e,t,i,r,n,s,a,o,h,s.radius)},N.prototype[p.CIRCLE|p.CONVEX]=N.prototype[p.CIRCLE|p.BOX]=N.prototype.circleConvex=function(e,t,i,r,o,h,c,l,d,u){for(var u="number"==typeof u?u:t.radius,f=!1,p=Number.MAX_VALUE,g=h.vertices,m=0;m!==g.length+1;m++){var T=g[m%g.length],A=g[(m+1)%g.length];if(n.rotate(v,T,l),n.rotate(y,A,l),a(v,v,c),a(y,y,c),s(b,y,v),n.normalize(x,b),n.rotate90cw(E,x),n.scale(P,E,-t.radius),a(P,P,i),K(P,h,c,l)){n.sub(M,v,P);var w=Math.abs(n.dot(M,E));w<p&&(n.copy(R,P),p=w,n.scale(O,E,w),n.add(O,O,P),f=!0)}}if(f){if(d)return!0;var S=this.createContactEquation(e,o,t,h);return n.sub(S.normalA,R,i),n.normalize(S.normalA,S.normalA),n.scale(S.contactPointA,S.normalA,u),a(S.contactPointA,S.contactPointA,i),s(S.contactPointA,S.contactPointA,e.position),s(S.contactPointB,O,c),a(S.contactPointB,S.contactPointB,c),s(S.contactPointB,S.contactPointB,o.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S)),1}if(u>0)for(var m=0;m<g.length;m++){var _=g[m];if(n.rotate(I,_,l),a(I,I,c),s(C,I,i),n.squaredLength(C)<Math.pow(u,2)){if(d)return!0;var S=this.createContactEquation(e,o,t,h);return n.copy(S.normalA,C),n.normalize(S.normalA,S.normalA),n.scale(S.contactPointA,S.normalA,u),a(S.contactPointA,S.contactPointA,i),s(S.contactPointA,S.contactPointA,e.position),s(S.contactPointB,I,c),a(S.contactPointB,S.contactPointB,c),s(S.contactPointB,S.contactPointB,o.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S)),1}}return 0};var z=n.create(),H=n.create(),X=n.create(),q=n.create();function K(e,t,i,r){for(var o=t.vertices,h=null,c=0;c!==o.length+1;c++){var l=o[c%o.length],d=o[(c+1)%o.length];n.rotate(z,l,r),n.rotate(H,d,r),a(z,z,i),a(H,H,i),s(X,z,e),s(q,H,e);var u=n.crossLength(X,q);if(null===h&&(h=u),u*h<=0)return!1;h=u}return!0}N.prototype[p.PARTICLE|p.CONVEX]=N.prototype[p.PARTICLE|p.BOX]=N.prototype.particleConvex=function(e,t,i,r,h,c,l,d,u){var f=Number.MAX_VALUE,p=!1,g=c.vertices;if(!K(i,c,l,d))return 0;if(u)return!0;for(var m=0;m!==g.length+1;m++){var w=g[m%g.length],S=g[(m+1)%g.length];n.rotate(v,w,d),n.rotate(y,S,d),a(v,v,l),a(y,y,l),s(b,y,v),n.normalize(x,b),n.rotate90cw(E,x),s(C,i,v),o(C,E),s(T,v,l),s(A,i,l),n.sub(L,v,i);var I=Math.abs(n.dot(L,E));I<f&&(f=I,n.scale(O,E,I),n.add(O,O,i),n.copy(D,E),p=!0)}if(p){var _=this.createContactEquation(e,h,t,c);return n.scale(_.normalA,D,-1),n.normalize(_.normalA,_.normalA),n.set(_.contactPointA,0,0),a(_.contactPointA,_.contactPointA,i),s(_.contactPointA,_.contactPointA,e.position),s(_.contactPointB,O,l),a(_.contactPointB,_.contactPointB,l),s(_.contactPointB,_.contactPointB,h.position),this.contactEquations.push(_),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(_)),1}return 0},N.prototype[p.CIRCLE]=N.prototype.circleCircle=function(e,t,i,r,o,h,c,l,d,u,f){var u=u||t.radius,f=f||h.radius;s(v,i,c);var p=u+f;if(n.squaredLength(v)>Math.pow(p,2))return 0;if(d)return!0;var g=this.createContactEquation(e,o,t,h);return s(g.normalA,c,i),n.normalize(g.normalA,g.normalA),n.scale(g.contactPointA,g.normalA,u),n.scale(g.contactPointB,g.normalA,-f),a(g.contactPointA,g.contactPointA,i),s(g.contactPointA,g.contactPointA,e.position),a(g.contactPointB,g.contactPointB,c),s(g.contactPointB,g.contactPointB,o.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},N.prototype[p.PLANE|p.CONVEX]=N.prototype[p.PLANE|p.BOX]=N.prototype.planeConvex=function(e,t,i,r,h,c,l,d,u){var f=0;n.rotate(y,m,r);for(var p=0;p!==c.vertices.length;p++){var g=c.vertices[p];if(n.rotate(v,g,d),a(v,v,l),s(b,v,i),0>=o(b,y)){if(u)return!0;f++;var x=this.createContactEquation(e,h,t,c);s(b,v,i),n.copy(x.normalA,y);var E=o(b,x.normalA);n.scale(b,x.normalA,E),s(x.contactPointB,v,h.position),s(x.contactPointA,v,b),s(x.contactPointA,x.contactPointA,e.position),this.contactEquations.push(x),!this.enableFrictionReduction&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f},N.prototype[p.PARTICLE|p.PLANE]=N.prototype.particlePlane=function(e,t,i,r,a,h,c,l,d){l=l||0,s(v,i,c),n.rotate(y,m,l);var u=o(v,y);if(u>0)return 0;if(d)return!0;var f=this.createContactEquation(a,e,h,t);return n.copy(f.normalA,y),n.scale(v,f.normalA,u),s(f.contactPointA,i,v),s(f.contactPointA,f.contactPointA,a.position),s(f.contactPointB,i,e.position),this.contactEquations.push(f),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(f)),1},N.prototype[p.CIRCLE|p.PARTICLE]=N.prototype.circleParticle=function(e,t,i,r,o,h,c,l,d){if(s(v,c,i),n.squaredLength(v)>Math.pow(t.radius,2))return 0;if(d)return!0;var u=this.createContactEquation(e,o,t,h);return n.copy(u.normalA,v),n.normalize(u.normalA,u.normalA),n.scale(u.contactPointA,u.normalA,t.radius),a(u.contactPointA,u.contactPointA,i),s(u.contactPointA,u.contactPointA,e.position),s(u.contactPointB,c,o.position),this.contactEquations.push(u),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(u)),1};var J=new u({radius:1}),Q=n.create(),$=n.create();n.create(),N.prototype[p.PLANE|p.CAPSULE]=N.prototype.planeCapsule=function(e,t,i,r,s,o,h,c,l){n.set(Q,-o.length/2,0),n.rotate(Q,Q,c),a(Q,Q,h),n.set($,o.length/2,0),n.rotate($,$,c),a($,$,h),J.radius=o.radius,this.enableFrictionReduction&&(d=this.enableFriction,this.enableFriction=!1);var d,u=this.circlePlane(s,J,Q,0,e,t,i,r,l),f=this.circlePlane(s,J,$,0,e,t,i,r,l);if(this.enableFrictionReduction&&(this.enableFriction=d),l)return u||f;var p=u+f;return this.enableFrictionReduction&&p&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p},N.prototype[p.CIRCLE|p.PLANE]=N.prototype.circlePlane=function(e,t,i,r,h,c,l,d,u){var f=d;f=f||0,s(v,i,l),n.rotate(y,m,f);var p=o(y,v);if(p>t.radius)return 0;if(u)return!0;var g=this.createContactEquation(h,e,c,t);return n.copy(g.normalA,y),n.scale(g.contactPointB,g.normalA,-t.radius),a(g.contactPointB,g.contactPointB,i),s(g.contactPointB,g.contactPointB,e.position),n.scale(b,g.normalA,p),s(g.contactPointA,v,b),a(g.contactPointA,g.contactPointA,l),s(g.contactPointA,g.contactPointA,h.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},N.prototype[p.CONVEX]=N.prototype[p.CONVEX|p.BOX]=N.prototype[p.BOX]=N.prototype.convexConvex=function(e,t,i,r,h,c,l,d,u,f){var p=0,f="number"==typeof f?f:0;if(!N.findSeparatingAxis(t,i,r,c,l,d,v))return 0;s(w,l,i),o(v,w)>0&&n.scale(v,v,-1);var g=N.getClosestEdge(t,r,v,!0),m=N.getClosestEdge(c,d,v);if(-1===g||-1===m)return 0;for(var T=0;T<2;T++){var C,I=g,_=m,O=t,P=c,M=i,R=l,L=r,D=d,k=e,F=h;0===T&&(C=I,I=_,_=C,C=O,O=P,P=C,C=M,M=R,R=C,C=L,L=D,D=C,C=k,k=F,F=C);for(var B=_;B<_+2;B++){var U=P.vertices[(B+P.vertices.length)%P.vertices.length];n.rotate(y,U,D),a(y,y,R);for(var G=0,V=I-1;V<I+2;V++){var Y=O.vertices[(V+O.vertices.length)%O.vertices.length],j=O.vertices[(V+1+O.vertices.length)%O.vertices.length];n.rotate(b,Y,L),n.rotate(x,j,L),a(b,b,M),a(x,x,M),s(E,x,b),n.rotate90cw(S,E),n.normalize(S,S),s(w,y,b);var W=o(S,w);(V===I&&W<=f||V!==I&&W<=0)&&G++}if(G>=3){if(u)return!0;var z=this.createContactEquation(k,F,O,P);p++;var Y=O.vertices[I%O.vertices.length],j=O.vertices[(I+1)%O.vertices.length];n.rotate(b,Y,L),n.rotate(x,j,L),a(b,b,M),a(x,x,M),s(E,x,b),n.rotate90cw(z.normalA,E),n.normalize(z.normalA,z.normalA),s(w,y,b);var W=o(z.normalA,w);n.scale(A,z.normalA,W),s(z.contactPointA,y,M),s(z.contactPointA,z.contactPointA,A),a(z.contactPointA,z.contactPointA,M),s(z.contactPointA,z.contactPointA,k.position),s(z.contactPointB,y,R),a(z.contactPointB,z.contactPointB,R),s(z.contactPointB,z.contactPointB,F.position),this.contactEquations.push(z),!this.enableFrictionReduction&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(z))}}}return this.enableFrictionReduction&&this.enableFriction&&p&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p};var Z=n.fromValues(0,0);N.projectConvexOntoAxis=function(e,t,i,r,s){var a,h=null,c=null;n.rotate(Z,r,-i);for(var l=0;l<e.vertices.length;l++)a=o(e.vertices[l],Z),(null===h||a>h)&&(h=a),(null===c||a<c)&&(c=a);if(c>h){var d=c;c=h,h=d}var u=o(t,r);n.set(s,c+u,h+u)};var ee=n.fromValues(0,0),et=n.fromValues(0,0),ei=n.fromValues(0,0),er=n.fromValues(0,0),en=n.fromValues(0,0),es=n.fromValues(0,0);N.findSeparatingAxis=function(e,t,i,r,a,o,h){var c=null,l=!1,d=!1;if(e instanceof g&&r instanceof g)for(var u=0;2!==u;u++){var f=e,p=i;1===u&&(f=r,p=o);for(var m=0;2!==m;m++){0===m?n.set(er,0,1):1===m&&n.set(er,1,0),0!==p&&n.rotate(er,er,p),N.projectConvexOntoAxis(e,t,i,er,en),N.projectConvexOntoAxis(r,a,o,er,es);var v=en,y=es;en[0]>es[0]&&(y=en,v=es);var b=y[0]-v[1];l=b<=0,(null===c||b>c)&&(n.copy(h,er),c=b,d=l)}}else for(var u=0;2!==u;u++){var f=e,p=i;1===u&&(f=r,p=o);for(var m=0;m!==f.vertices.length;m++){n.rotate(et,f.vertices[m],p),n.rotate(ei,f.vertices[(m+1)%f.vertices.length],p),s(ee,ei,et),n.rotate90cw(er,ee),n.normalize(er,er),N.projectConvexOntoAxis(e,t,i,er,en),N.projectConvexOntoAxis(r,a,o,er,es);var v=en,y=es;en[0]>es[0]&&(y=en,v=es);var b=y[0]-v[1];l=b<=0,(null===c||b>c)&&(n.copy(h,er),c=b,d=l)}}return d};var ea=n.fromValues(0,0),eo=n.fromValues(0,0),eh=n.fromValues(0,0);N.getClosestEdge=function(e,t,i,r){n.rotate(ea,i,-t),r&&n.scale(ea,ea,-1);for(var a=-1,h=e.vertices.length,c=-1,l=0;l!==h;l++){s(eo,e.vertices[(l+1)%h],e.vertices[l%h]),n.rotate90cw(eh,eo),n.normalize(eh,eh);var d=o(eh,ea);(-1===a||d>c)&&(a=l%h,c=d)}return a};var ec=n.create(),el=n.create(),ed=n.create(),eu=n.create(),ef=n.create(),ep=n.create(),eg=n.create();N.prototype[p.CIRCLE|p.HEIGHTFIELD]=N.prototype.circleHeightfield=function(e,t,i,r,o,h,c,l,d,u){var f=h.heights,u=u||t.radius,p=h.elementWidth,g=Math.floor((i[0]-u-c[0])/p),m=Math.ceil((i[0]+u-c[0])/p);g<0&&(g=0),m>=f.length&&(m=f.length-1);for(var v=f[g],y=f[m],b=g;b<m;b++)f[b]<y&&(y=f[b]),f[b]>v&&(v=f[b]);if(i[1]-u>v)return!d&&0;for(var x=!1,b=g;b<m;b++){n.set(ed,b*p,f[b]),n.set(eu,(b+1)*p,f[b+1]),n.add(ed,ed,c),n.add(eu,eu,c),n.sub(ep,eu,ed),n.rotate(ep,ep,Math.PI/2),n.normalize(ep,ep),n.scale(ec,ep,-u),n.add(ec,ec,i),n.sub(el,ec,ed);var E=n.dot(el,ep);if(ec[0]>=ed[0]&&ec[0]<eu[0]&&E<=0){if(d)return!0;x=!0,n.scale(el,ep,-E),n.add(ef,ec,el),n.copy(eg,ep);var T=this.createContactEquation(o,e,h,t);n.copy(T.normalA,eg),n.scale(T.contactPointB,T.normalA,-u),a(T.contactPointB,T.contactPointB,i),s(T.contactPointB,T.contactPointB,e.position),n.copy(T.contactPointA,ef),n.sub(T.contactPointA,T.contactPointA,o.position),this.contactEquations.push(T),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T))}}if(x=!1,u>0){for(var b=g;b<=m;b++)if(n.set(ed,b*p,f[b]),n.add(ed,ed,c),n.sub(el,i,ed),n.squaredLength(el)<Math.pow(u,2)){if(d)return!0;x=!0;var T=this.createContactEquation(o,e,h,t);n.copy(T.normalA,el),n.normalize(T.normalA,T.normalA),n.scale(T.contactPointB,T.normalA,-u),a(T.contactPointB,T.contactPointB,i),s(T.contactPointB,T.contactPointB,e.position),s(T.contactPointA,ed,c),a(T.contactPointA,T.contactPointA,c),s(T.contactPointA,T.contactPointA,o.position),this.contactEquations.push(T),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(T))}}return+!!x};var em=n.create(),ev=n.create(),ey=n.create(),eb=new f({vertices:[n.create(),n.create(),n.create(),n.create()]});N.prototype[p.BOX|p.HEIGHTFIELD]=N.prototype[p.CONVEX|p.HEIGHTFIELD]=N.prototype.convexHeightfield=function(e,t,i,r,s,a,o,h,c){var l=a.heights,d=a.elementWidth,u=Math.floor((e.aabb.lowerBound[0]-o[0])/d),f=Math.ceil((e.aabb.upperBound[0]-o[0])/d);u<0&&(u=0),f>=l.length&&(f=l.length-1);for(var p=l[u],g=l[f],m=u;m<f;m++)l[m]<g&&(g=l[m]),l[m]>p&&(p=l[m]);if(e.aabb.lowerBound[1]>p)return!c&&0;for(var v=0,m=u;m<f;m++)n.set(em,m*d,l[m]),n.set(ev,(m+1)*d,l[m+1]),n.add(em,em,o),n.add(ev,ev,o),n.set(ey,(ev[0]+em[0])*.5,(ev[1]+em[1]-100)*.5),n.sub(eb.vertices[0],ev,ey),n.sub(eb.vertices[1],em,ey),n.copy(eb.vertices[2],eb.vertices[1]),n.copy(eb.vertices[3],eb.vertices[0]),eb.vertices[2][1]-=100,eb.vertices[3][1]-=100,v+=this.convexConvex(e,t,i,r,s,eb,ey,0,c);return v}},{d204b374af39e639:"6V1yH","20933053438ebab6":"7LSYB",d95153d3fb05b14:"kVkx4",f0516d5454f63cd7:"7zO6n",bfdf9baf3e6a5d5e:"7DBhB",bcecfc97841fc70f:"vy9Ac","4364ae5edbd1b6f2":"gMvS0",d45d0e6691fce04d:"1NlHz",ae87cd0523cc9ee0:"hvGBf","25f1c61bf04b8848":"5RgQL","6ee63ef2e0948d6f":"8r7K8","390f12b6d811410f":"174uM","4ace90d86ba1ce1":"8y4xs"}],"7DBhB":[function(e,t,i,r){var n=e("8f6c901d02437d27");function s(){this.data={},this.keys=[]}t.exports=s,s.prototype.getKey=function(e,t){return(0|(e|=0))==(0|(t|=0))?-1:((0|e)>(0|t)?e<<16|65535&t:t<<16|65535&e)|0},s.prototype.getByKey=function(e){return e|=0,this.data[e]},s.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},s.prototype.set=function(e,t,i){if(!i)throw Error("No data!");var r=this.getKey(e,t);return this.data[r]||this.keys.push(r),this.data[r]=i,r},s.prototype.reset=function(){for(var e=this.data,t=this.keys,i=t.length;i--;)delete e[t[i]];t.length=0},s.prototype.copy=function(e){this.reset(),n.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var i=e.keys[t];this.data[i]=e.data[i]}}},{"8f6c901d02437d27":"7LSYB"}],"8y4xs":[function(e,t,i,r){var n=e("57927c61fbcf992f"),s=e("1e621ded3903d68e"),a=e("a8501ada722b06e1");function o(e){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(e={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),e=e||{};var t=this.width=e.width||1,i=this.height=e.height||1,r=[n.fromValues(-t/2,-i/2),n.fromValues(t/2,-i/2),n.fromValues(t/2,i/2),n.fromValues(-t/2,i/2)],o=[n.fromValues(1,0),n.fromValues(0,1)];e.vertices=r,e.axes=o,e.type=s.BOX,a.call(this,e)}t.exports=o,o.prototype=new a,o.prototype.constructor=o,o.prototype.computeMomentOfInertia=function(e){var t=this.width,i=this.height;return e*(i*i+t*t)/12},o.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2},n.create(),n.create(),n.create(),n.create(),o.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)},o.prototype.updateArea=function(){this.area=this.width*this.height}},{"57927c61fbcf992f":"6V1yH","1e621ded3903d68e":"8r7K8",a8501ada722b06e1:"5RgQL"}],ljW8X:[function(e,t,i,r){e("852348000d7d6d69"),e("b1906358d63dd535"),e("2589eb1c960dc6a0"),e("41d1d194c5bc6ec2");var n=e("c59906df004f11c2");function s(){n.call(this,n.NAIVE)}e("3a4bfb1510f2f292"),t.exports=s,s.prototype=new n,s.prototype.constructor=s,s.prototype.getCollisionPairs=function(e){var t=e.bodies,i=this.result;i.length=0;for(var r=0,s=t.length;r!==s;r++)for(var a=t[r],o=0;o<r;o++){var h=t[o];n.canCollide(a,h)&&this.boundingVolumeCheck(a,h)&&i.push(a,h)}return i},s.prototype.aabbQuery=function(e,t,i){i=i||[];for(var r=e.bodies,n=0;n<r.length;n++){var s=r[n];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(t)&&i.push(s)}return i}},{"852348000d7d6d69":"hvGBf",b1906358d63dd535:"c8neT","2589eb1c960dc6a0":"8r7K8","41d1d194c5bc6ec2":"8rTjp",c59906df004f11c2:"2rxxC","3a4bfb1510f2f292":"6V1yH"}],c8neT:[function(e,t,i,r){var n=e("40d47a7ae5f74602"),s=e("d6a039ff95ed19ff");function a(e){(e=e||{}).type=n.PLANE,n.call(this,e)}e("99b09beaade4db61"),t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(e){return 0},a.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},a.prototype.computeAABB=function(e,t,i){var r=i%(2*Math.PI),n=s.set,a=e.lowerBound,o=e.upperBound;n(a,-1e7,-1e7),n(o,1e7,1e7),0===r?o[1]=0:r===Math.PI/2?a[0]=0:r===Math.PI?a[1]=0:r===3*Math.PI/2&&(o[0]=0)},a.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var o=s.create();s.create(),s.create();var h=s.create(),c=s.create();a.prototype.raycast=function(e,t,i,r){var n=t.from,a=t.to,l=t.direction;s.set(h,0,1),s.rotate(h,h,r),s.sub(c,n,i);var d=s.dot(c,h);if((s.sub(c,a,i),!(d*s.dot(c,h)>0))&&!(s.squaredDistance(n,a)<d*d)){var u=s.dot(h,l);s.sub(o,n,i);var f=-s.dot(h,o)/u/t.length;t.reportIntersection(e,f,h,-1)}}},{"40d47a7ae5f74602":"8r7K8",d6a039ff95ed19ff:"6V1yH","99b09beaade4db61":"7LSYB"}],"8rTjp":[function(e,t,i,r){var n=e("8c3c67d5ddbef9a9"),s=e("f808570b9798e32c");function a(e){(e=e||{}).type=n.PARTICLE,n.call(this,e)}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.computeMomentOfInertia=function(e){return 0},a.prototype.updateBoundingRadius=function(){this.boundingRadius=0},a.prototype.computeAABB=function(e,t,i){s.copy(e.lowerBound,t),s.copy(e.upperBound,t)}},{"8c3c67d5ddbef9a9":"8r7K8",f808570b9798e32c:"6V1yH"}],luGEt:[function(e,t,i,r){var n=e("7bb9001261b70165"),s=e("c254ded0f86d88a6"),a=e("782f46607b8e1f04"),o=e("2180020912c5d37f"),h=e("274a00bc1872e73d");t.exports=p;var c=h.create(),l=h.create(),d=h.fromValues(1,0),u=h.fromValues(0,1),f=h.create();function p(e,t,i){i=i||{},n.call(this,e,t,n.REVOLUTE,i);var r=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=h.create(),this.pivotB=h.create(),i.worldPivot?(h.sub(this.pivotA,i.worldPivot,e.position),h.sub(this.pivotB,i.worldPivot,t.position),h.rotate(this.pivotA,this.pivotA,-e.angle),h.rotate(this.pivotB,this.pivotB,-t.angle)):(h.copy(this.pivotA,i.localPivotA),h.copy(this.pivotB,i.localPivotB));var p=this.equations=[new s(e,t,-r,r),new s(e,t,-r,r)],g=p[0],m=p[1],v=this;g.computeGq=function(){return h.rotate(c,v.pivotA,e.angle),h.rotate(l,v.pivotB,t.angle),h.add(f,t.position,l),h.sub(f,f,e.position),h.sub(f,f,c),h.dot(f,d)},m.computeGq=function(){return h.rotate(c,v.pivotA,e.angle),h.rotate(l,v.pivotB,t.angle),h.add(f,t.position,l),h.sub(f,f,e.position),h.sub(f,f,c),h.dot(f,u)},m.minForce=g.minForce=-r,m.maxForce=g.maxForce=r,this.motorEquation=new a(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new o(e,t),this.lowerLimitEquation=new o(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}p.prototype=new n,p.prototype.constructor=p,p.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},p.prototype.update=function(){var e=this.bodyA,t=this.bodyB,i=this.pivotA,r=this.pivotB,n=this.equations,s=(n[0],n[1],n[0]),a=n[1],o=this.upperLimit,f=this.lowerLimit,p=this.upperLimitEquation,g=this.lowerLimitEquation,m=this.angle=t.angle-e.angle;if(this.upperLimitEnabled&&m>o)p.angle=o,-1===n.indexOf(p)&&n.push(p);else{var v=n.indexOf(p);-1!==v&&n.splice(v,1)}if(this.lowerLimitEnabled&&m<f)g.angle=f,-1===n.indexOf(g)&&n.push(g);else{var v=n.indexOf(g);-1!==v&&n.splice(v,1)}h.rotate(c,i,e.angle),h.rotate(l,r,t.angle),s.G[0]=-1,s.G[1]=0,s.G[2]=-h.crossLength(c,d),s.G[3]=1,s.G[4]=0,s.G[5]=h.crossLength(l,d),a.G[0]=0,a.G[1]=-1,a.G[2]=-h.crossLength(c,u),a.G[3]=0,a.G[4]=1,a.G[5]=h.crossLength(l,u)},p.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},p.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},p.prototype.motorIsEnabled=function(){return!!this.motorEnabled},p.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},p.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"7bb9001261b70165":"1naZa",c254ded0f86d88a6:"vy9Ac","782f46607b8e1f04":"84NSF","2180020912c5d37f":"bgo8Y","274a00bc1872e73d":"6V1yH"}],"84NSF":[function(e,t,i,r){var n=e("4035d4d99eba87f");function s(e,t){n.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}e("ee6b2fe68ba01697"),t.exports=s,s.prototype=new n,s.prototype.constructor=s,s.prototype.computeB=function(e,t,i){var r=this.G;r[2]=-1,r[5]=this.ratio;var n=this.computeGiMf();return-this.computeGW()*t-i*n}},{"4035d4d99eba87f":"vy9Ac",ee6b2fe68ba01697:"6V1yH"}],bgo8Y:[function(e,t,i,r){var n=e("d4425f27662d9010"),s=e("867c2e114efbe97f");function a(e,t,i){i=i||{},n.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var r=this.G;r[2]=1,r[5]=-1}t.exports=a,a.prototype=new n,a.prototype.constructor=a;var o=s.create(),h=s.create(),c=s.fromValues(1,0),l=s.fromValues(0,1);a.prototype.computeGq=function(){return s.rotate(o,c,this.bodyA.angle+this.angle),s.rotate(h,l,this.bodyB.angle),s.dot(o,h)}},{d4425f27662d9010:"vy9Ac","867c2e114efbe97f":"6V1yH"}],"601M4":[function(e,t,i,r){var n=e("1b130cbf15113819"),s=e("556121ab2e42c55f"),a=e("dad4f74d2d1bd1e4"),o=e("fdc2f7cc299227f5"),h=e("38523a5be66d6187");function c(e,t,i){i=i||{},n.call(this,e,t,n.PRISMATIC,i);var r=o.fromValues(0,0),c=o.fromValues(1,0),l=o.fromValues(0,0);i.localAnchorA&&o.copy(r,i.localAnchorA),i.localAxisA&&o.copy(c,i.localAxisA),i.localAnchorB&&o.copy(l,i.localAnchorB),this.localAnchorA=r,this.localAnchorB=l,this.localAxisA=c;var d=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE,u=new a(e,t,-d,d),f=new o.create,p=new o.create,g=new o.create,m=new o.create;if(u.computeGq=function(){return o.dot(g,m)},u.updateJacobian=function(){var i=this.G,n=e.position,s=t.position;o.rotate(f,r,e.angle),o.rotate(p,l,t.angle),o.add(g,s,p),o.sub(g,g,n),o.sub(g,g,f),o.rotate(m,c,e.angle+Math.PI/2),i[0]=-m[0],i[1]=-m[1],i[2]=-o.crossLength(f,m)+o.crossLength(m,g),i[3]=m[0],i[4]=m[1],i[5]=o.crossLength(p,m)},this.equations.push(u),!i.disableRotationalLock){var v=new h(e,t,-d,d);this.equations.push(v)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==i.lowerLimit,this.upperLimitEnabled=void 0!==i.upperLimit,this.lowerLimit=void 0!==i.lowerLimit?i.lowerLimit:0,this.upperLimit=void 0!==i.upperLimit?i.upperLimit:1,this.upperLimitEquation=new s(e,t),this.lowerLimitEquation=new s(e,t),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=d,this.motorEquation=new a(e,t),this.motorEnabled=!1,this.motorSpeed=0;var y=this,b=this.motorEquation;b.computeGW,b.computeGq=function(){return 0},b.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,r=t.velocity,n=i.velocity,s=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,r,s,n,a)+y.motorSpeed}}t.exports=c,c.prototype=new n,c.prototype.constructor=c;var l=o.create(),d=o.create(),u=o.create(),f=o.create(),p=o.create(),g=o.create();c.prototype.update=function(){var e=this.equations,t=e[0],i=this.upperLimit,r=this.lowerLimit,n=this.upperLimitEquation,s=this.lowerLimitEquation,a=this.bodyA,h=this.bodyB,c=this.localAxisA,m=this.localAnchorA,v=this.localAnchorB;t.updateJacobian(),o.rotate(l,c,a.angle),o.rotate(f,m,a.angle),o.add(d,f,a.position),o.rotate(p,v,h.angle),o.add(u,p,h.position);var y=this.position=o.dot(u,l)-o.dot(d,l);if(this.motorEnabled){var b=this.motorEquation.G;b[0]=l[0],b[1]=l[1],b[2]=o.crossLength(l,p),b[3]=-l[0],b[4]=-l[1],b[5]=-o.crossLength(l,f)}if(this.upperLimitEnabled&&y>i)o.scale(n.normalA,l,-1),o.sub(n.contactPointA,d,a.position),o.sub(n.contactPointB,u,h.position),o.scale(g,l,i),o.add(n.contactPointA,n.contactPointA,g),-1===e.indexOf(n)&&e.push(n);else{var x=e.indexOf(n);-1!==x&&e.splice(x,1)}if(this.lowerLimitEnabled&&y<r)o.scale(s.normalA,l,1),o.sub(s.contactPointA,d,a.position),o.sub(s.contactPointB,u,h.position),o.scale(g,l,r),o.sub(s.contactPointB,s.contactPointB,g),-1===e.indexOf(s)&&e.push(s);else{var x=e.indexOf(s);-1!==x&&e.splice(x,1)}},c.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},c.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},c.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"1b130cbf15113819":"1naZa","556121ab2e42c55f":"gMvS0",dad4f74d2d1bd1e4:"vy9Ac",fdc2f7cc299227f5:"6V1yH","38523a5be66d6187":"bgo8Y"}],"9tvAe":[function(e,t,i,r){var n=e("5f7fde3e1d0c7a5"),s=e("689fe0ee9da66c8a");function a(){s.call(this,s.SAP),this.axisList=[],this.axisIndex=0;var e=this;this._addBodyHandler=function(t){e.axisList.push(t.body)},this._removeBodyHandler=function(t){var i=e.axisList.indexOf(t.body);-1!==i&&e.axisList.splice(i,1)}}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.setWorld=function(e){this.axisList.length=0,n.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},a.sortAxisList=function(e,t){t|=0;for(var i=1,r=e.length;i<r;i++){for(var n=e[i],s=i-1;s>=0&&!(e[s].aabb.lowerBound[t]<=n.aabb.lowerBound[t]);s--)e[s+1]=e[s];e[s+1]=n}return e},a.prototype.sortList=function(){var e=this.axisList,t=this.axisIndex;a.sortAxisList(e,t)},a.prototype.getCollisionPairs=function(e){var t=this.axisList,i=this.result,r=this.axisIndex;i.length=0;for(var n=t.length;n--;){var a=t[n];a.aabbNeedsUpdate&&a.updateAABB()}this.sortList();for(var o=0,h=0|t.length;o!==h;o++)for(var c=t[o],l=o+1;l<h;l++){var d=t[l];if(!(d.aabb.lowerBound[r]<=c.aabb.upperBound[r]))break;s.canCollide(c,d)&&this.boundingVolumeCheck(c,d)&&i.push(c,d)}return i},a.prototype.aabbQuery=function(e,t,i){i=i||[],this.sortList();var r=this.axisIndex,n="x";1===r&&(n="y"),2===r&&(n="z");var s=this.axisList;t.lowerBound[n],t.upperBound[n];for(var a=0;a<s.length;a++){var o=s[a];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(t)&&i.push(o)}return i}},{"5f7fde3e1d0c7a5":"7LSYB","689fe0ee9da66c8a":"2rxxC"}],ayeEI:[function(e,t,i,r){e("c01443790b82d458");var n=e("3dbb7f02d0685adc");function s(e,t,i){i=n.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=e,this.bodyB=t}t.exports=s,s.prototype.applyForce=function(){}},{c01443790b82d458:"6V1yH","3dbb7f02d0685adc":"7LSYB"}],iaLOw:[function(e,t,i,r){var n=e("dd64cf8f6127747a");e("e3f3e8f2c9812e59");var s=e("e98c7cf86e72c936"),a=e("5dc61689b839dcb7"),o=e("cf0d23db120d4a5b");function h(e,t){t=t||{},this.chassisBody=e,this.wheels=[],this.groundBody=new o({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function c(e,t){t=t||{},this.vehicle=e,this.forwardEquation=new a(e.chassisBody,e.groundBody),this.sideEquation=new a(e.chassisBody,e.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==t.sideFriction?t.sideFriction:5),this.localForwardVector=n.fromValues(0,1),t.localForwardVector&&n.copy(this.localForwardVector,t.localForwardVector),this.localPosition=n.fromValues(0,0),t.localPosition&&n.copy(this.localPosition,t.localPosition),s.apply(this,e.chassisBody,e.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}t.exports=h,h.prototype.addToWorld=function(e){this.world=e,e.addBody(this.groundBody),e.on("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.addConstraint(i)}},h.prototype.removeFromWorld=function(){var e=this.world;e.removeBody(this.groundBody),e.off("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.removeConstraint(i)}this.world=null},h.prototype.addWheel=function(e){var t=new c(this,e);return this.wheels.push(t),t},h.prototype.update=function(){for(var e=0;e<this.wheels.length;e++)this.wheels[e].update()},c.prototype=new s,c.prototype.setBrakeForce=function(e){this.forwardEquation.setSlipForce(e)},c.prototype.setSideFriction=function(e){this.sideEquation.setSlipForce(e)};var l=n.create(),d=n.create();c.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(d,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,d),n.dot(l,d)};var u=n.create();c.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),n.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),n.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),n.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),n.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),n.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),n.normalize(u,this.forwardEquation.t),n.scale(u,u,this.engineForce),this.vehicle.chassisBody.applyForce(u,this.forwardEquation.contactPointA)}},{dd64cf8f6127747a:"6V1yH",e3f3e8f2c9812e59:"7LSYB",e98c7cf86e72c936:"1naZa","5dc61689b839dcb7":"1NlHz",cf0d23db120d4a5b:"174uM"}],dHnmB:[function(e,t,i,r){var n=e("5543f36d5db55575"),s=e("36cd71b80d3e81e");function a(e,t,i){i=i||{},s.call(this,e,t,i),this.localAnchorA=n.fromValues(0,0),this.localAnchorB=n.fromValues(0,0),i.localAnchorA&&n.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&n.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var r=n.create(),a=n.create();this.getWorldAnchorA(r),this.getWorldAnchorB(a);var o=n.distance(r,a);this.restLength="number"==typeof i.restLength?i.restLength:o}e("aabdc6762f524d"),t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},a.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},a.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},a.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var o=n.create(),h=n.create(),c=n.create(),l=n.create(),d=n.create(),u=n.create(),f=n.create(),p=n.create(),g=n.create();a.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restLength,r=this.bodyA,s=this.bodyB;this.getWorldAnchorA(d),this.getWorldAnchorB(u),n.sub(f,d,r.position),n.sub(p,u,s.position),n.sub(o,u,d);var a=n.len(o);n.normalize(h,o),n.sub(c,s.velocity,r.velocity),n.crossZV(g,s.angularVelocity,p),n.add(c,c,g),n.crossZV(g,r.angularVelocity,f),n.sub(c,c,g),n.scale(l,h,-e*(a-i)-t*n.dot(c,h)),n.sub(r.force,r.force,l),n.add(s.force,s.force,l);var m=n.crossLength(f,l),v=n.crossLength(p,l);r.angularForce-=m,s.angularForce+=v}},{"5543f36d5db55575":"6V1yH","36cd71b80d3e81e":"ayeEI",aabdc6762f524d:"7LSYB"}],"16mhl":[function(e,t,i,r){e("8946c1bacbbeb8d1");var n=e("28ac4889264da0ac");function s(e,t,i){i=i||{},n.call(this,e,t,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:t.angle-e.angle}t.exports=s,s.prototype=new n,s.prototype.constructor=s,s.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restAngle,r=this.bodyA,n=this.bodyB,s=-e*(n.angle-r.angle-i)-t*(n.angularVelocity-r.angularVelocity)*0;r.angularForce-=s,n.angularForce+=s}},{"8946c1bacbbeb8d1":"6V1yH","28ac4889264da0ac":"ayeEI"}],"4fdFK":[function(e,t,i,r){var n=e("89f95dae5663d69d"),s=(e("1597060712a09eda"),e("e52fd346faa95ec5"),e("69e4774cee40db6d")),a=e("99235bbf4c27bfa5"),o=e("1a98bd60511f77ed"),h=(e("cac3a7e4a83aa352"),e("355e7b17b84d94f5")),c=e("b52cd0c8b35d5ddf"),l=e("d925c0839ca7edb5"),d=e("5feecb4008ad1788"),u=e("1bbc320b09c5a9fc"),f=(e("57e0920a6ef810a1"),e("a1d53f66bd715fd"),e("a5a7fbc7f4141c89")),p=e("a0f61690d079281f"),g=(e("974f59d76858707e"),e("94a2df0e7bb7858a"),e("c35840d95975c61d"),e("8c79984d8ee97d1f"),e("e356359911ba3311"),e("cf18ab7ef6aa5886"),e("62007958f12ce1dc"),e("d719e11dcfb0a9b1"),e("6a5dc8c97e432e93")),m=e("c2de07faf4223809"),v=e("88208900f1c274d3"),y=e("6f27f3e1a911a2d9"),b=e("97b04d6bb659a62a"),x=e("7703c149f2b0dd53");function E(e){d.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new n,this.narrowphase=new v(this),this.islandManager=new x,this.gravity=s.fromValues(0,-9.78),e.gravity&&s.copy(this.gravity,e.gravity),this.frictionGravity=s.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=e.broadphase||new m,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new f,this.defaultContactMaterial=new p(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===e.islandSplit||!!e.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=E.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new b}e("ff1e4b24c7b18637"),t.exports=E,E.prototype=Object(d.prototype),E.prototype.constructor=E,E.NO_SLEEPING=1,E.BODY_SLEEPING=2,E.ISLAND_SLEEPING=4,E.prototype.addConstraint=function(e){this.constraints.push(e)},E.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},E.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&y.splice(this.contactMaterials,t,1)},E.prototype.getContactMaterial=function(e,t){for(var i=this.contactMaterials,r=0,n=i.length;r!==n;r++){var s=i[r];if(s.materialA.id===e.id&&s.materialB.id===t.id||s.materialA.id===t.id&&s.materialB.id===e.id)return s}return!1},E.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&y.splice(this.constraints,t,1)},s.create(),s.create(),s.create(),s.create(),s.create(),s.create();var T=s.create(),A=s.fromValues(0,0),w=s.fromValues(0,0);s.fromValues(0,0),s.fromValues(0,0),E.prototype.step=function(e,t,i){if(i=i||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{this.accumulator+=t;for(var r=0;this.accumulator>=e&&r<i;)this.internalStep(e),this.time+=e,this.accumulator-=e,r++;for(var n=this.accumulator%e/e,a=0;a!==this.bodies.length;a++){var o=this.bodies[a];s.lerp(o.interpolatedPosition,o.previousPosition,o.position,n),o.interpolatedAngle=o.previousAngle+n*(o.angle-o.previousAngle)}}};var S=[];E.prototype.internalStep=function(e){this.stepping=!0;var t=this.springs.length,i=this.springs,r=this.bodies,n=this.gravity,a=this.solver,o=this.bodies.length,h=this.broadphase,c=this.narrowphase,l=this.constraints,d=(s.scale,s.add),f=(s.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,this.useWorldGravityAsFrictionGravity){var p=s.length(this.gravity);0===p&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=p)}if(this.applyGravity)for(var g=0;g!==o;g++){var m=r[g],v=m.force;m.type===u.DYNAMIC&&m.sleepState!==u.SLEEPING&&(s.scale(T,n,m.mass*m.gravityScale),d(v,v,T))}if(this.applySpringForces)for(var g=0;g!==t;g++)i[g].applyForce();if(this.applyDamping)for(var g=0;g!==o;g++){var m=r[g];m.type===u.DYNAMIC&&m.applyDamping(e)}for(var b=h.getCollisionPairs(this),x=this.disabledBodyCollisionPairs,g=x.length-2;g>=0;g-=2)for(var A=b.length-2;A>=0;A-=2)(x[g]===b[A]&&x[g+1]===b[A+1]||x[g+1]===b[A]&&x[g]===b[A+1])&&b.splice(A,2);var w=l.length;for(g=0;g!==w;g++){var C=l[g];if(!C.collideConnected)for(var A=b.length-2;A>=0;A-=2)(C.bodyA===b[A]&&C.bodyB===b[A+1]||C.bodyB===b[A]&&C.bodyA===b[A+1])&&b.splice(A,2)}this.postBroadphaseEvent.pairs=b,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,c.reset(this);for(var g=0,I=b.length;g!==I;g+=2)for(var _=b[g],O=b[g+1],P=0,M=_.shapes.length;P!==M;P++)for(var R=_.shapes[P],L=R.position,D=R.angle,k=0,N=O.shapes.length;k!==N;k++){var F=O.shapes[k],B=F.position,U=F.angle,G=this.defaultContactMaterial;if(R.material&&F.material){var V=this.getContactMaterial(R.material,F.material);V&&(G=V)}this.runNarrowphase(c,_,R,L,D,O,F,B,U,G,this.frictionGravity)}for(var g=0;g!==o;g++){var Y=r[g];Y._wakeUpAfterNarrowphase&&(Y.wakeUp(),Y._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(S);for(var j=this.endContactEvent,k=S.length;k--;){var W=S[k];j.shapeA=W.shapeA,j.shapeB=W.shapeB,j.bodyA=W.bodyA,j.bodyB=W.bodyB,this.emit(j)}S.length=0}var z=this.preSolveEvent;z.contactEquations=c.contactEquations,z.frictionEquations=c.frictionEquations,this.emit(z),z.contactEquations=z.frictionEquations=null;var w=l.length;for(g=0;g!==w;g++)l[g].update();if(c.contactEquations.length||c.frictionEquations.length||w)if(this.islandSplit){for(f.equations.length=0,y.appendArray(f.equations,c.contactEquations),y.appendArray(f.equations,c.frictionEquations),g=0;g!==w;g++)y.appendArray(f.equations,l[g].equations);f.split(this);for(var g=0;g!==f.islands.length;g++){var H=f.islands[g];H.equations.length&&a.solveIsland(e,H)}}else{for(a.addEquations(c.contactEquations),a.addEquations(c.frictionEquations),g=0;g!==w;g++)a.addEquations(l[g].equations);this.solveConstraints&&a.solve(e,this),a.removeAllEquations()}for(var g=0;g!==o;g++){var Y=r[g];Y.integrate(e)}for(var g=0;g!==o;g++)r[g].setZeroForce();if(this.emitImpactEvent&&this.has("impact"))for(var X=this.impactEvent,g=0;g!==c.contactEquations.length;g++){var q=c.contactEquations[g];q.firstImpact&&(X.bodyA=q.bodyA,X.bodyB=q.bodyB,X.shapeA=q.shapeA,X.shapeB=q.shapeB,X.contactEquation=q,this.emit(X))}if(this.sleepMode===E.BODY_SLEEPING)for(g=0;g!==o;g++)r[g].sleepTick(this.time,!1,e);else if(this.sleepMode===E.ISLAND_SLEEPING&&this.islandSplit){for(g=0;g!==o;g++)r[g].sleepTick(this.time,!0,e);for(var g=0;g<this.islandManager.islands.length;g++){var H=this.islandManager.islands[g];H.wantsToSleep()&&H.sleep()}}this.stepping=!1;for(var K=this.bodiesToBeRemoved,g=0;g!==K.length;g++)this.removeBody(K[g]);K.length=0,this.emit(this.postStepEvent)},E.prototype.runNarrowphase=function(e,t,i,r,n,a,o,h,c,l,d){if((i.collisionGroup&o.collisionMask)!=0&&(o.collisionGroup&i.collisionMask)!=0){s.rotate(A,r,t.angle),s.rotate(w,h,a.angle),s.add(A,A,t.position),s.add(w,w,a.position);var f,p=n+t.angle,g=c+a.angle;e.enableFriction=l.friction>0,e.frictionCoefficient=l.friction,f=t.type===u.STATIC||t.type===u.KINEMATIC?a.mass:a.type===u.STATIC||a.type===u.KINEMATIC?t.mass:t.mass*a.mass/(t.mass+a.mass),e.slipForce=l.friction*d*f,e.restitution=l.restitution,e.surfaceVelocity=l.surfaceVelocity,e.frictionStiffness=l.frictionStiffness,e.frictionRelaxation=l.frictionRelaxation,e.stiffness=l.stiffness,e.relaxation=l.relaxation,e.contactSkinSize=l.contactSkinSize,e.enabledEquations=t.collisionResponse&&a.collisionResponse&&i.collisionResponse&&o.collisionResponse;var m=e[i.type|o.type],v=0;if(m){var y=i.sensor||o.sensor,b=e.frictionEquations.length;v=i.type<o.type?m.call(e,t,i,A,p,a,o,w,g,y):m.call(e,a,o,w,g,t,i,A,p,y);var x=e.frictionEquations.length-b;if(v){if(t.allowSleep&&t.type===u.DYNAMIC&&t.sleepState===u.SLEEPING&&a.sleepState===u.AWAKE&&a.type!==u.STATIC&&s.squaredLength(a.velocity)+Math.pow(a.angularVelocity,2)>=2*Math.pow(a.sleepSpeedLimit,2)&&(t._wakeUpAfterNarrowphase=!0),a.allowSleep&&a.type===u.DYNAMIC&&a.sleepState===u.SLEEPING&&t.sleepState===u.AWAKE&&t.type!==u.STATIC&&s.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2)>=2*Math.pow(t.sleepSpeedLimit,2)&&(a._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(t,i,a,o),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,o)){var E=this.beginContactEvent;if(E.shapeA=i,E.shapeB=o,E.bodyA=t,E.bodyB=a,E.contactEquations.length=0,"number"==typeof v)for(var T=e.contactEquations.length-v;T<e.contactEquations.length;T++)E.contactEquations.push(e.contactEquations[T]);this.emit(E)}if("number"==typeof v&&x>1)for(var T=e.frictionEquations.length-x;T<e.frictionEquations.length;T++){var S=e.frictionEquations[T];S.setSlipForce(S.getSlipForce()/x)}}}}},E.prototype.addSpring=function(e){this.springs.push(e);var t=this.addSpringEvent;t.spring=e,this.emit(t),t.spring=null},E.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&y.splice(this.springs,t,1)},E.prototype.addBody=function(e){if(-1===this.bodies.indexOf(e)){this.bodies.push(e),e.world=this;var t=this.addBodyEvent;t.body=e,this.emit(t),t.body=null}},E.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(y.splice(this.bodies,t,1),this.removeBodyEvent.body=e,e.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},E.prototype.getBodyById=function(e){for(var t=this.bodies,i=0;i<t.length;i++){var r=t[i];if(r.id===e)return r}return!1},E.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},E.prototype.enableBodyCollision=function(e,t){for(var i=this.disabledBodyCollisionPairs,r=0;r<i.length;r+=2)if(i[r]===e&&i[r+1]===t||i[r+1]===e&&i[r]===t)return void i.splice(r,2)},E.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;t>=0;t--)this.removeConstraint(e[t]);for(var i=this.bodies,t=i.length-1;t>=0;t--)this.removeBody(i[t]);for(var r=this.springs,t=r.length-1;t>=0;t--)this.removeSpring(r[t]);for(var n=this.contactMaterials,t=n.length-1;t>=0;t--)this.removeContactMaterial(n[t]);E.apply(this)};var C=s.create(),I=(s.fromValues(0,0),s.fromValues(0,0));E.prototype.hitTest=function(e,t,i){i=i||0;var r=new u({position:e}),n=new l;r.addShape(n);for(var d=this.narrowphase,f=[],p=0,g=t.length;p!==g;p++)for(var m=t[p],v=0,y=m.shapes.length;v!==y;v++){var b=m.shapes[v];s.rotate(C,b.position,m.angle),s.add(C,C,m.position);var x=b.angle+m.angle;(b instanceof a&&d.circleParticle(m,b,C,x,r,n,e,0,!0)||b instanceof o&&d.particleConvex(r,n,e,0,m,b,C,x,!0)||b instanceof h&&d.particlePlane(r,n,e,0,m,b,C,x,!0)||b instanceof c&&d.particleCapsule(r,n,e,0,m,b,C,x,!0)||b instanceof l&&s.squaredLength(s.sub(I,C,e))<i*i)&&f.push(m)}return f},E.prototype.setGlobalStiffness=function(e){for(var t=this.constraints,i=0;i!==t.length;i++)for(var r=t[i],n=0;n!==r.equations.length;n++){var s=r.equations[n];s.stiffness=e,s.needsUpdate=!0}for(var a=this.contactMaterials,i=0;i!==a.length;i++){var r=a[i];r.stiffness=r.frictionStiffness=e}var r=this.defaultContactMaterial;r.stiffness=r.frictionStiffness=e},E.prototype.setGlobalRelaxation=function(e){for(var t=0;t!==this.constraints.length;t++)for(var i=this.constraints[t],r=0;r!==i.equations.length;r++){var n=i.equations[r];n.relaxation=e,n.needsUpdate=!0}for(var t=0;t!==this.contactMaterials.length;t++){var i=this.contactMaterials[t];i.relaxation=i.frictionRelaxation=e}var i=this.defaultContactMaterial;i.relaxation=i.frictionRelaxation=e};var _=new g,O=[];E.prototype.raycast=function(e,t){return t.getAABB(_),this.broadphase.aabbQuery(this,_,O),t.intersectBodies(e,O),O.length=0,e.hasHit()}},{"89f95dae5663d69d":"aMqbT","1597060712a09eda":"fDYb8",e52fd346faa95ec5:"6nuOx","69e4774cee40db6d":"6V1yH","99235bbf4c27bfa5":"hvGBf","1a98bd60511f77ed":"5RgQL",cac3a7e4a83aa352:"7MGrW","355e7b17b84d94f5":"c8neT",b52cd0c8b35d5ddf:"c3xj1",d925c0839ca7edb5:"8rTjp","5feecb4008ad1788":"iK19H","1bbc320b09c5a9fc":"174uM","57e0920a6ef810a1":"8r7K8",a1d53f66bd715fd:"dHnmB",a5a7fbc7f4141c89:"h4UHn",a0f61690d079281f:"hoyOw","974f59d76858707e":"fHS5f","94a2df0e7bb7858a":"1naZa",c35840d95975c61d:"7TLGq","8c79984d8ee97d1f":"luGEt",e356359911ba3311:"601M4",cf18ab7ef6aa5886:"hdQyd","62007958f12ce1dc":"67vnr",d719e11dcfb0a9b1:"2rxxC","6a5dc8c97e432e93":"iFKXP",c2de07faf4223809:"9tvAe","88208900f1c274d3":"jfIHe","6f27f3e1a911a2d9":"7LSYB","97b04d6bb659a62a":"dRK8f","7703c149f2b0dd53":"9jujO",ff1e4b24c7b18637:"16mhl"}],"67vnr":[function(e,t,i,r){t.exports=JSON.parse('{"name":"p2","version":"0.7.1","description":"A JavaScript 2D physics engine.","author":"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)","keywords":["p2.js","p2","physics","engine","2d"],"main":"./src/p2.js","engines":{"node":"*"},"repository":{"type":"git","url":"https://github.com/schteppe/p2.js.git"},"bugs":{"url":"https://github.com/schteppe/p2.js/issues"},"licenses":[{"type":"MIT"}],"devDependencies":{"grunt":"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},"dependencies":{"poly-decomp":"0.1.1"}}')},{}],dRK8f:[function(e,t,i,r){var n=e("d1c511ff43075908");e("6ad6aae9d3178c1c");var s=e("ae69163b5e95d902");function a(){this.overlappingShapesLastState=new n,this.overlappingShapesCurrentState=new n,this.recordPool=new s({size:16}),this.tmpDict=new n,this.tmpArray1=[]}e("ca81eee98f7bd467"),t.exports=a,a.prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,i=e.keys.length;i--;){var r=e.keys[i],n=e.getByKey(r);t.getByKey(r),n&&this.recordPool.release(n)}e.reset(),e.copy(t),t.reset()},a.prototype.setOverlapping=function(e,t,i,r){this.overlappingShapesLastState;var n=this.overlappingShapesCurrentState;if(!n.get(t.id,r.id)){var s=this.recordPool.get();s.set(e,t,i,r),n.set(t.id,r.id,s)}},a.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},a.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},a.prototype.bodiesAreOverlapping=function(e,t){for(var i=this.overlappingShapesCurrentState,r=i.keys.length;r--;){var n=i.keys[r],s=i.data[n];if(s.bodyA===e&&s.bodyB===t||s.bodyA===t&&s.bodyB===e)return!0}return!1},a.prototype.getDiff=function(e,t,i){var i=i||[];i.length=0;for(var r=t.keys.length;r--;){var n=t.keys[r],s=t.data[n];if(!s)throw Error("Key "+n+" had no data!");e.data[n]||i.push(s)}return i},a.prototype.isNewOverlap=function(e,t){var i=0|e.id,r=0|t.id,n=this.overlappingShapesLastState,s=this.overlappingShapesCurrentState;return!n.get(i,r)&&!!s.get(i,r)},a.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},a.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},a.prototype.getBodyDiff=function(e,t){t=t||[];for(var i=this.tmpDict,r=e.length;r--;){var n=e[r];i.set(0|n.bodyA.id,0|n.bodyB.id,n)}for(r=i.keys.length;r--;){var n=i.getByKey(i.keys[r]);n&&t.push(n.bodyA,n.bodyB)}return i.reset(),t}},{d1c511ff43075908:"7DBhB","6ad6aae9d3178c1c":"cdaRM",ae69163b5e95d902:"8sADv",ca81eee98f7bd467:"7LSYB"}],cdaRM:[function(e,t,i,r){function n(e,t,i,r){this.shapeA=t,this.shapeB=r,this.bodyA=e,this.bodyB=i}t.exports=n,n.prototype.set=function(e,t,i,r){n.call(this,e,t,i,r)}},{}],"8sADv":[function(e,t,i,r){var n=e("ef39e4c8e830c20e"),s=e("6e41b1482492ad2f");function a(){s.apply(this,arguments)}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.create=function(){return new n},a.prototype.destroy=function(e){return e.bodyA=e.bodyB=e.shapeA=e.shapeB=null,this}},{ef39e4c8e830c20e:"cdaRM","6e41b1482492ad2f":"hpo2a"}],"9jujO":[function(e,t,i,r){e("f7108e810eaecffd"),e("50bfc1b1a312ac2f"),e("2f6d951f62024392");var n=e("9526c01719846e44"),s=e("82ea80983f48bd5f"),a=e("29efc1b1b871dc45");function o(e){this.nodePool=new n({size:16}),this.islandPool=new s({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t.exports=o,o.getUnvisitedNode=function(e){for(var t=e.length,i=0;i!==t;i++){var r=e[i];if(!r.visited&&r.body.type===a.DYNAMIC)return r}return!1},o.prototype.visit=function(e,t,i){t.push(e.body);for(var r=e.equations.length,n=0;n!==r;n++){var s=e.equations[n];-1===i.indexOf(s)&&i.push(s)}},o.prototype.bfs=function(e,t,i){var r=this.queue;for(r.length=0,r.push(e),e.visited=!0,this.visit(e,t,i);r.length;)for(var n,s=r.pop();n=o.getUnvisitedNode(s.neighbors);)n.visited=!0,this.visit(n,t,i),n.body.type===a.DYNAMIC&&r.push(n)},o.prototype.split=function(e){for(var t,i=e.bodies,r=this.nodes,n=this.equations;r.length;)this.nodePool.release(r.pop());for(var s=0;s!==i.length;s++){var a=this.nodePool.get();a.body=i[s],r.push(a)}for(var h=0;h!==n.length;h++){var c=n[h],s=i.indexOf(c.bodyA),l=i.indexOf(c.bodyB),d=r[s],u=r[l];d.neighbors.push(u),u.neighbors.push(d),d.equations.push(c),u.equations.push(c)}for(var f=this.islands,s=0;s<f.length;s++)this.islandPool.release(f[s]);for(f.length=0;t=o.getUnvisitedNode(r);){var p=this.islandPool.get();this.bfs(t,p.bodies,p.equations),f.push(p)}return f}},{f7108e810eaecffd:"6V1yH","50bfc1b1a312ac2f":"fX1TH","2f6d951f62024392":"gD4Ii","9526c01719846e44":"kaSOi","82ea80983f48bd5f":"hwWeI","29efc1b1b871dc45":"174uM"}],fX1TH:[function(e,t,i,r){var n=e("3a86c65cb2375424");function s(){this.equations=[],this.bodies=[]}t.exports=s,s.prototype.reset=function(){this.equations.length=this.bodies.length=0};var a=[];s.prototype.getBodies=function(e){var t=e||[],i=this.equations;a.length=0;for(var r=0;r!==i.length;r++){var n=i[r];-1===a.indexOf(n.bodyA.id)&&(t.push(n.bodyA),a.push(n.bodyA.id)),-1===a.indexOf(n.bodyB.id)&&(t.push(n.bodyB),a.push(n.bodyB.id))}return t},s.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===n.DYNAMIC&&!t.wantsToSleep)return!1}return!0},s.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].sleep();return!0}},{"3a86c65cb2375424":"174uM"}],gD4Ii:[function(e,t,i,r){function n(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=n,n.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],kaSOi:[function(e,t,i,r){var n=e("1eec35b5274cd8f"),s=e("d22686e86ec94159");function a(){s.apply(this,arguments)}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.create=function(){return new n},a.prototype.destroy=function(e){return e.reset(),this}},{"1eec35b5274cd8f":"gD4Ii",d22686e86ec94159:"hpo2a"}],hwWeI:[function(e,t,i,r){var n=e("ad7511310094aed1"),s=e("cb2242e59c24a87e");function a(){s.apply(this,arguments)}t.exports=a,a.prototype=new s,a.prototype.constructor=a,a.prototype.create=function(){return new n},a.prototype.destroy=function(e){return e.reset(),this}},{ad7511310094aed1:"fX1TH",cb2242e59c24a87e:"hpo2a"}],"4TtiY":[function(e,t,i,r){let{World:n,Body:s,Box:a}=e("3c2200220f941251"),{PhysicalBody:o}=e("4b7049ae5e46523"),{ObjectBodyState:h}=e("34cbd7d2d2f92135"),{PathFinder:c}=e("ba70a00f1537ba85"),{TypeDeterminer:l}=e("16abd6b172c3d32c"),{GameConst:d}=e("ee41822ed6c3ec8e"),{RoomsConst:u}=e("189081ce52e8ddcf"),{WorldConst:f}=e("94a66cf7ab1c33b1"),{ErrorManager:p,Logger:g,sc:m}=e("6022040d772fa14");t.exports.P2world=class extends n{constructor(e){super(e),this.events=m.get(e,"events",!1),this.roomId=m.get(e,"roomId",!1),this.sceneName=m.get(e,"sceneName",!1),this.sceneTiledMapFile=m.get(e,"roomMap",!1),this.config=m.get(e,"config",!1),this.validateRequiredProperties(e),this.mapJson=null,this.saveMapData(e),this.objectsManager=m.get(e,"objectsManager",!1),this.applyGravity=m.get(e.worldConfig,"applyGravity",!1),this.gravity=m.get(e.worldConfig,"gravity",[0,0]),this.globalStiffness=m.get(e.worldConfig,"globalStiffness",1e8),this.globalRelaxation=m.get(e.worldConfig,"globalRelaxation",10),this.useFixedWorldStep=m.get(e.worldConfig,"useFixedWorldStep",!0),this.timeStep=m.get(e.worldConfig,"timeStep",.04),this.maxSubSteps=m.get(e.worldConfig,"maxSubSteps",1),this.movementSpeed=m.get(e.worldConfig,"movementSpeed",180),this.allowPassWallsFromBelow=m.get(e.worldConfig,"allowPassWallsFromBelow",!1),this.jumpSpeed=m.get(e.worldConfig,"jumpSpeed",0),this.jumpTimeMs=m.get(e.worldConfig,"jumpTimeMs",0),this.tryClosestPath=m.get(e.worldConfig,"tryClosestPath",!1),this.onlyWalkable=m.get(e.worldConfig,"onlyWalkable",!1),this.wallsMassValue=m.get(e.worldConfig,"wallsMassValue",1),this.playerMassValue=m.get(e.worldConfig,"playerMassValue",1),this.bulletsStopOnPlayer=m.get(e.worldConfig,"bulletsStopOnPlayer",!0),this.bulletsStopOnObject=m.get(e.worldConfig,"bulletsStopOnObject",!0),this.disableObjectsCollisionsOnChase=m.get(e.worldConfig,"disableObjectsCollisionsOnChase",!1),this.disableObjectsCollisionsOnReturn=m.get(e.worldConfig,"disableObjectsCollisionsOnReturn",!0),this.collisionsGroupsByType=m.get(e.worldConfig,"collisionsGroupsByType",!0),this.groupWallsVertically=m.get(e.worldConfig,"groupWallsVertically",!1),this.groupWallsHorizontally=m.get(e.worldConfig,"groupWallsHorizontally",!1),this.allowSimultaneous=m.get(e,"allowSimultaneous",!1),this.allowChangePoints=m.get(e,"allowChangePoints",!0),this.allowRoomObjectsCreation=m.get(e,"allowRoomObjectsCreation",!0),this.allowBodiesWithState=m.get(e,"allowBodiesWithState",!0),this.usePathFinder=m.get(e,"usePathFinder",!0),this.respawnAreas=!1,this.removeBodies=[],this.removeBulletsStateIds=[],this.type=m.get(e,"type",f.WORLD_TYPES.NO_GRAVITY_2D),this.totalBodiesCount=0,this.totalBodiesCreated=0,this.queueBodies=[],this.pathFinder=!1,this.enablePathFinder(),this.worldDateTime=null,this.worldDateTimeInterval=null,this.enableWorldDateTime(),this.worldKey=m.randomChars(16),this.limitsBodyType=m.get(e.worldConfig,"limitsBodyType",s.STATIC),this.wallBodyType=m.get(e.worldConfig,"wallBodyType",s.STATIC),this.changePointsBodyType=m.get(e.worldConfig,"changePointsBodyType",s.STATIC),this.worldObjectBodyType=m.get(e.worldConfig,"worldObjectBodyType",s.DYNAMIC),this.playersBodyType=m.get(e.worldConfig,"playersBodyType",s.DYNAMIC),this.bulletsBodyType=m.get(e.worldConfig,"playersBodyType",s.DYNAMIC),this.bodyTypes={KINEMATIC:s.KINEMATIC,STATIC:s.STATIC,DYNAMIC:s.DYNAMIC},this.typeDeterminer=new l,this.playerAnimationBasedOnPress=this.config.get("client/players/animations/basedOnPress",!1),this.playerAnimationDiagonalHorizontal=this.config.get("client/players/animations/diagonalHorizontal",!1),this.usePlayerSpeedConfig=this.config.get("server/players/physicsBody/usePlayerSpeedConfig",!1),this.createdChangePoints={},this.changePoints={},this.playerMovementSpeed=0}saveMapData(e){this.mapJson=m.get(e,"mapJson"),!this.mapJson&&m.hasOwn(this.config,"server")&&m.hasOwn(this.config.server,"maps")&&(this.mapJson=m.get(this.config.server.maps,this.sceneTiledMapFile,!1)),this.mapJson||(g.critical('Map "'+this.sceneTiledMapFile+'" not found in server maps.',Object.keys(this.config.server.maps)),p.error('Map "'+this.sceneTiledMapFile+'" not found in server maps.'))}enableWorldDateTime(){this.worldDateTime=new Date,this.worldDateTimeInterval=setInterval(()=>{this.worldDateTime=new Date},1e3)}enablePathFinder(){this.usePathFinder&&(this.pathFinder=new c,this.pathFinder.world=this,this.pathFinder.createGridFromMap())}validateRequiredProperties(e){this.events||p.error("EventsManager undefined in P2world."),this.roomId&&this.sceneName&&this.sceneTiledMapFile||(g.critical("World creation missing data in options.",{roomId:this.roomId,sceneName:this.sceneName,sceneTiledMapFile:this.sceneTiledMapFile}),p.error("World creation missing data in options.")),this.config||p.error("Missing Config Manager.")}async createWorldContent(e){if(!this.validateMapData(this.mapJson))return void g.error("Missing map data.",this.mapJson);this.shouldGroupBodies()||g.warning("Group bodies fully disabled, this can impact performance."),this.changePoints=this.getSceneChangePoints(e);let t=this.mapJson.layers,i=[];for(let e of t){let t={layer:e,world:this};await this.events.emit("reldens.parsingMapLayerBefore",t),i.push(...await this.createLayerContents(t.layer)),await this.events.emit("reldens.parsingMapLayerAfter",t)}for(let e of i){let{layer:t,tileIndex:i,tileW:r,tileH:n,posX:s,posY:a}=e;await this.createRoomObjectBody(t,i,r,n,s,a)}for(let e of(this.processBodiesQueue(),t)){let t={layer:e,world:this};await this.events.emit("reldens.parsingMapLayersAfterBodiesQueue",t)}g.info("Total wall bodies found: "+this.totalBodiesCount,"Total wall bodies created: "+this.totalBodiesCreated)}processBodiesQueue(){for(let e of(this.queueBodies.sort((e,t)=>e.tileIndexes[0]-t.tileIndexes[0]),this.queueBodies))this.addBody(e);this.queueBodies=[]}async createLayerContents(e){let t=this.mapJson.tilewidth,i=this.mapJson.tileheight,r=t/2,n=i/2,s=-1!==e.name.indexOf("change-points"),a=-1!==e.name.indexOf("collisions"),o=[];for(let h=0;h<this.mapJson.width;h++){let c=h*t+r;for(let r=0;r<this.mapJson.height;r++){let l=r*i+n,d=this.tileIndexByRowAndColumn(r,h),u=0===Number(e.data[d]),f=!1,p=!1;!u&&(this.allowChangePoints&&s&&(f=this.createChangePoint(d,t,i,c,l),this.createdChangePoints[d]=f),a&&(p=this.createWallCollisionBody(d,this.determinePreviousTileIndexFromGroupingType(d,e,r,h),t,i,c,l))),this.usePathFinder&&this.markPathFinderTile(e,u,f,p,h,r),o.push({layer:e,tileIndex:d,tileW:t,tileH:i,posX:c,posY:l})}}return s&&this.createChangePointsFromStorage(),o}createChangePointsFromStorage(){for(let e of Object.keys(this.changePoints)){let t=this.changePoints[e];if(this.createdChangePoints[e]){g.debug("Change point already created on map.",e,t);continue}g.warning("Change point saved in the storage was does not exists in the map.",t);let{col:i,row:r}=this.fetchPositionFromTileIndex(e);if(!this.pathFinder.grid.isWalkableAt(i,r)){g.error("Missing change point on map cannot be created because node is not walkable.",{changePoint:t,tileIndex:e,col:i,row:r});continue}this.pathFinder.grid.setWalkableAt(i,r,!1),this.createdChangePoints[e]=this.createChangePoint(e,this.mapJson.tilewidth,this.mapJson.tileheight,i*this.mapJson.tilewidth,r*this.mapJson.tileheight),g.info("Created missing change point in map.",t,e,i,r)}}determinePreviousTileIndexFromGroupingType(e,t,i,r){return!!this.shouldGroupBodies()&&(this.groupWallsVertically?this.fetchPreviousWallTile(t,i,r):0!==e&&e-1)}fetchPreviousWallTile(e,t,i){if(0===t)return!1;let r=this.tileIndexByRowAndColumn(t-1,i);return 0!==Number(e.data[r])&&r}tileIndexByRowAndColumn(e,t){return e*this.mapJson.width+t}fetchPositionFromTileIndex(e){let t=Math.floor(e/this.mapJson.width);return{col:e%this.mapJson.width,row:t}}validateMapData(e){return 0<Number(e.width||0)&&0<Number(e.height||0)&&0<Number(e.tilewidth||0)&&0<Number(e.tileheight||0)}async createRoomObjectBody(e,t,i,r,n,s){if(!this.allowRoomObjectsCreation||!this.objectsManager)return;let a=e.name+t,o=this.objectsManager.getObjectData(a);if(o&&!o.multiple)return await this.createWorldObject(o,a,i,r,n,s)}markPathFinderTile(e,t,i,r,n,s){if(!this.pathFinder)return;let a=-1!==e.name.indexOf("pathfinder");(!t&&(i||r)||t&&a)&&this.pathFinder.grid.setWalkableAt(n,s,!1)}createWallCollisionBody(e,t,i,r,n,s){this.totalBodiesCount++;let a=!1!==t&&this.fetchBodyByTileIndexId(t);if(a){let t=a.tileIndexes;if(-1!==t.indexOf(e))return a;t.push(e);let o=this.createWall(this.determineShapeWidth(t,i),this.determineShapeHeight(t,r),this.determineBodyPositionX(a,i,n),this.determineBodyPositionY(a,r,s),this.wallBodyType);return o.tileIndexes=t,o.firstTileIndex=a.firstTileIndex,this.queueBodies.splice(this.queueBodies.indexOf(a),1),this.queueBodies.push(o),o}let o=this.createWall(i,r,n,s,this.wallBodyType);return o.tileIndexes=[e],o.firstTileIndex=e,this.shouldGroupBodies()?this.queueBodies.push(o):this.addBody(o),this.totalBodiesCreated++,o}shouldGroupBodies(){return this.groupWallsVertically||this.groupWallsHorizontally}determineBodyPositionY(e,t,i){return this.groupWallsVertically?e.position[1]+t/2:i}determineBodyPositionX(e,t,i){return this.groupWallsHorizontally?e.position[0]+t/2:i}determineShapeHeight(e,t){return this.groupWallsVertically?e.length*t:t}determineShapeWidth(e,t){return this.groupWallsHorizontally?e.length*t:t}fetchBodyByTileIndexId(e){for(let t of this.queueBodies)if(t.isWall&&t.tileIndexes&&-1!==t.tileIndexes.indexOf(e))return t;return!1}createChangePoint(e,t,i,r,n){let s=m.get(this.changePoints,e,null);if(null===s)return g.error("Change point data not found in this.changePoints for tileIndex:",e),!1;let a=this.createCollisionBody(t/2,i/2,r,n,this.changePointsBodyType);return a.changeScenePoint=s,this.addBody(a),g.info("Created change point on tileIndex: "+e,r,n),a}async createWorldObject(e,t,i,r,n,s,a=!1){n+=m.get(e,"xFix",0),s+=m.get(e,"yFix",0),e.x=n,e.y=s,this.objectsManager&&m.hasOwn(this.objectsManager.objectsAnimationsData,t)&&(this.objectsManager.objectsAnimationsData[t].x=n,this.objectsManager.objectsAnimationsData[t].y=s),e.interactionArea&&e.setupInteractionArea();let o=m.get(e,"bodyMass",1),h=m.get(e,"collisionResponse",!0),c=!!this.allowBodiesWithState&&m.get(e,"hasState",!1),l=m.get(e,"collisionType",this.worldObjectBodyType),d=m.get(e,"collisionGroup",f.COLLISIONS.OBJECT),u=this.createCollisionBody(i,r,n,s,l,d,o,h,c,t);return u.disableObjectsCollisionsOnChase=this.disableObjectsCollisionsOnChase,u.disableObjectsCollisionsOnReturn=this.disableObjectsCollisionsOnReturn,u.isRoomObject=!0,u.roomObject=e,this.usePathFinder&&a&&(u.pathFinder=a),this.addBody(u),e.state=u.bodyState,e.objectBody=u,g.info("Created object for objectIndex: "+t+" - At x/y: "+n+" / "+s+"."),await this.events.emit("reldens.createdWorldObject",{p2world:this,roomObject:e,bodyObject:u,bodyMass:o,collision:h,hasState:c,objectIndex:t,tileW:i,tileH:r,posX:n,posY:s,pathFinder:a}),e}createLimits(){let e=this.mapJson.tilewidth,t=this.mapJson.tileheight,i=this.mapJson.width*e,r=this.mapJson.height*t,n=i+e,s=r+t,a=this.createWall(n,1,i/2,1,this.limitsBodyType);a.isWorldWall=!0,this.addBody(a);let o=this.createWall(n,1,i/2,r-1,this.limitsBodyType);o.isWorldWall=!0,this.addBody(o);let h=this.createWall(1,s,1,r/2,this.limitsBodyType);h.isWorldWall=!0,this.addBody(h);let c=this.createWall(1,s,i-1,r/2,this.limitsBodyType);c.isWorldWall=!0,this.addBody(c)}createWall(e,t,i,r,n){let s=this.createCollisionBody(e,t,i,r,n,f.COLLISIONS.WALL,this.wallsMassValue);return s.isWall=!0,s}createCollisionBody(e,t,i,r,n,a=f.COLLISIONS.WALL,h=1,c=!0,l=!1,d=!1,u=!1){let p=this.createCollisionShape(e,t,a,c),g=new(l?o:s)({mass:h,position:[i,r],type:n,fixedRotation:!0,movementSpeed:this.movementSpeed,jumpSpeed:this.jumpSpeed,jumpTimeMs:this.jumpTimeMs});return l&&(g.bodyState=this.createBodyState(l,i,r,u,g,d)),g.originalCollisionGroup=a,g.addShape(p),g}createBodyState(e,t,i,r,n,s){return e instanceof o?e:new h({x:t,y:i,dir:r||d.DOWN,scene:this.sceneName,id:n.id,key:s||"",room_id:this.roomId})}createCollisionShape(e,t,i,r=!0,n=0,s=0){let o=new a({width:e,height:t,position:[n,s]});return o.collisionGroup=i,o.collisionMask=this.collisionsGroupsByType[i],o.collisionResponse=r,o}getSceneChangePoints(e){if(!e.changePoints)return{};let t=Object.keys(e.changePoints);if(0===t.length)return{};let i={};for(let r of t){let t=e.changePoints[r];i[t[u.TILE_INDEX]]=t[u.NEXT_SCENE]}return i}createPlayerBody(e){let t=this.createCollisionShape(e.width,e.height,f.COLLISIONS.PLAYER);this.playerMovementSpeed=this.fetchPlayerSpeed(e.speed);let i=new o({mass:this.playerMassValue,position:[e.bodyState.x,e.bodyState.y],type:this.playersBodyType,fixedRotation:!0,animationBasedOnPress:this.playerAnimationBasedOnPress,diagonalHorizontal:this.playerAnimationDiagonalHorizontal,movementSpeed:this.playerMovementSpeed});return i.playerId=e.id,i.collideWorldBounds=!0,i.isChangingScene=!1,i.isBlocked=!1,i.originalCollisionGroup=f.COLLISIONS.PLAYER,i.addShape(t),this.allowBodiesWithState&&(i.bodyState=e.bodyState),this.addBody(i),i}fetchPlayerSpeed(e){let t=this.movementSpeed;if(this.usePlayerSpeedConfig){let i=this.config.get("server/players/physicsBody/speed",e);0<i&&(t=i)}return g.debug("Use movement speed: "+t),t}shootBullet(e,t,i){let{objectWidth:r,objectHeight:n}=i,s=this.mapJson.tileheight/2+n/2,a=this.mapJson.tilewidth/2+r/2,o=e.y+(t.y>e.y?s:-s),h=e.x+(t.x>e.x?a:-a),c=Math.atan2(t.y-o,t.x-h),l=180*c/Math.PI,d=i.key?i.key:"",u=i.magnitude*Math.cos(c),p=i.magnitude*Math.sin(c),m=this.calculateDirection(i,e,t);g.debug('Shooting bullet "'+d+'":',{objectWidth:r,objectHeight:n,bulletY:o,bulletX:h,fromPosition:e,toPosition:t,bulletAngle:l,speedX:u,speedY:p});let v="BULLET_"+this.determineFromType(i),y=this.createCollisionBody(r,n,h,o,this.bulletsBodyType,f.COLLISIONS[v],1,!0,!0,d,m);y.updateMassProperties(),y.roomObject=i,y.hitPriority=i.hitPriority?i.hitPriority:2,y.isRoomObject=!0,y.isBullet=!0,y.key=""===d?"bullet-"+y.id:d,this.addBody(y);let b=d+"_bullet_"+y.id;return y.bodyStateId=b,i.room.state.addBodyToState(y.bodyState,b),y.angle=l,y.originalSpeed={x:u,y:p},y.velocity[0]=u,y.velocity[1]=p,y}determineFromType(e){return this.typeDeterminer.isPlayer(e.owner)?f.FROM_TYPES.PLAYER:this.typeDeterminer.isObject(e.owner)?f.FROM_TYPES.OBJECT:f.FROM_TYPES.OTHER}calculateDirection(e,t,i){return 3===m.get(e,"animDir",!1)?t.x<i.x?d.RIGHT:d.LEFT:t.y<i.y?d.DOWN:d.UP}removeBodiesFromWorld(){if(0!==this.removeBodies.length){for(let e of this.removeBodies)this.removeBody(e);this.removeBodies=[]}}}},{"3c2200220f941251":"6Ga10","4b7049ae5e46523":"8FFNP","34cbd7d2d2f92135":"jRKg2",ba70a00f1537ba85:"hJ0F0","16abd6b172c3d32c":"8i096",ee41822ed6c3ec8e:"z0nmL","189081ce52e8ddcf":"glvjH","94a66cf7ab1c33b1":"iDcNR","6022040d772fa14":"ijd9L"}],jRKg2:[function(e,t,i,r){let{type:n}=e("81074da3e2a28f41"),{BodyState:s}=e("45f557440fcabf20"),{sc:a}=e("ecc058b0615d66ff");class o extends s{constructor(e){super(e),this.id=e.id,this.autoDirection=a.get(e,"autoDirection",!0)}}n("number")(o.prototype,"id"),t.exports.ObjectBodyState=o},{"81074da3e2a28f41":"gmN8i","45f557440fcabf20":"62Mcy",ecc058b0615d66ff:"ijd9L"}],gmN8i:[function(e,t,i,r){var n=e("f05bfd4e2d75cd45").Buffer;(function(e){var t,i,r,s,a,o,h,c,l,d,u;e.OPERATION=void 0,(u=e.OPERATION||(e.OPERATION={}))[u.ADD=128]="ADD",u[u.REPLACE=0]="REPLACE",u[u.DELETE=64]="DELETE",u[u.DELETE_AND_MOVE=96]="DELETE_AND_MOVE",u[u.MOVE_AND_ADD=160]="MOVE_AND_ADD",u[u.DELETE_AND_ADD=192]="DELETE_AND_ADD",u[u.CLEAR=10]="CLEAR",u[u.REVERSE=15]="REVERSE",u[u.MOVE=32]="MOVE",u[u.DELETE_BY_REFID=33]="DELETE_BY_REFID",u[u.ADD_BY_REFID=129]="ADD_BY_REFID",Symbol.metadata??=Symbol.for("Symbol.metadata");let f="~track",p="~encoder",g="~decoder",m="~filter",v="~getByIndex",y="~deleteByIndex",b="~changes",x="~childType",E="~onEncodeEnd",T="~onDecodeEnd",A="~descriptors",w="~__numFields",S="~__refTypeFieldIndexes",C="~__viewFieldIndexes",I="$__fieldIndexesByViewTag";try{new TextEncoder}catch(e){}let _=new ArrayBuffer(8),O=new Int32Array(_),P=new Float32Array(_),M=new Float64Array(_),R=new BigInt64Array(_),L=void 0!==n&&n.byteLength?n.byteLength:function(e,t){for(var i=0,r=0,n=0,s=e.length;n<s;n++)(i=e.charCodeAt(n))<128?r+=1:i<2048?r+=2:i<55296||i>=57344?r+=3:(n++,r+=4);return r};function D(e,t,i){for(var r=0,n=0,s=t.length;n<s;n++)(r=t.charCodeAt(n))<128?e[i.offset++]=r:r<2048?(e[i.offset]=192|r>>6,e[i.offset+1]=128|63&r,i.offset+=2):r<55296||r>=57344?(e[i.offset]=224|r>>12,e[i.offset+1]=128|r>>6&63,e[i.offset+2]=128|63&r,i.offset+=3):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e[i.offset]=240|r>>18,e[i.offset+1]=128|r>>12&63,e[i.offset+2]=128|r>>6&63,e[i.offset+3]=128|63&r,i.offset+=4)}function k(e,t,i){e[i.offset++]=255&t}function N(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255}function F(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255}function B(e,t,i){e[i.offset++]=255&t,e[i.offset++]=t>>8&255,e[i.offset++]=t>>16&255,e[i.offset++]=t>>24&255}function U(e,t,i){e[i.offset++]=255&t,e[i.offset++]=255&t>>8,e[i.offset++]=255&t>>16,e[i.offset++]=255&t>>24}function G(e,t,i){let r=Math.floor(t/0x100000000);U(e,t>>>0,i),U(e,r,i)}function V(e,t,i){U(e,t>>>0,i),U(e,t/0x100000000|0,i)}function Y(e,t,i){P[0]=t,B(e,O[0],i)}function j(e,t,i){M[0]=t,B(e,O[0],i),B(e,O[1],i)}let W={int8:k,uint8:function(e,t,i){e[i.offset++]=255&t},int16:N,uint16:F,int32:B,uint32:U,int64:G,uint64:V,bigint64:function(e,t,i){R[0]=BigInt.asIntN(64,t),B(e,O[0],i),B(e,O[1],i)},biguint64:function(e,t,i){R[0]=BigInt.asIntN(64,t),B(e,O[0],i),B(e,O[1],i)},float32:Y,float64:j,boolean:function(e,t,i){e[i.offset++]=+!!t},string:function(e,t,i){t||(t="");let r=L(t,"utf8"),n=0;if(r<32)e[i.offset++]=160|r,n=1;else if(r<256)e[i.offset++]=217,e[i.offset++]=r%255,n=2;else if(r<65536)e[i.offset++]=218,F(e,r,i),n=3;else if(r<0x100000000)e[i.offset++]=219,U(e,r,i),n=5;else throw Error("String too long");return D(e,t,i),n+r},number:function e(t,i,r){if(isNaN(i))return e(t,0,r);if(!isFinite(i))return e(t,i>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER,r);if(i!==(0|i))return 34028235e31>=Math.abs(i)&&(P[0]=i,1e-4>Math.abs(Math.abs(P[0])-Math.abs(i)))?(t[r.offset++]=202,Y(t,i,r),5):(t[r.offset++]=203,j(t,i,r),9);return i>=0?i<128?(t[r.offset++]=255&i,1):i<256?(t[r.offset++]=204,t[r.offset++]=255&i,2):i<65536?(t[r.offset++]=205,F(t,i,r),3):i<0x100000000?(t[r.offset++]=206,U(t,i,r),5):(t[r.offset++]=207,V(t,i,r),9):i>=-32?(t[r.offset++]=224|i+32,1):i>=-128?(t[r.offset++]=208,k(t,i,r),2):i>=-32768?(t[r.offset++]=209,N(t,i,r),3):i>=-0x80000000?(t[r.offset++]=210,B(t,i,r),5):(t[r.offset++]=211,G(t,i,r),9)},utf8Write:D,utf8Length:L},z=new ArrayBuffer(8),H=new Int32Array(z),X=new Float32Array(z),q=new Float64Array(z),K=new BigUint64Array(z),J=new BigInt64Array(z);function Q(e,t,i){i>e.length-t.offset&&(i=e.length-t.offset);for(var r="",n=0,s=t.offset,a=t.offset+i;s<a;s++){var o=e[s];if((128&o)==0){r+=String.fromCharCode(o);continue}if((224&o)==192){r+=String.fromCharCode((31&o)<<6|63&e[++s]);continue}if((240&o)==224){r+=String.fromCharCode((15&o)<<12|(63&e[++s])<<6|63&e[++s]);continue}if((248&o)==240){(n=(7&o)<<18|(63&e[++s])<<12|(63&e[++s])<<6|63&e[++s])>=65536?(n-=65536,r+=String.fromCharCode((n>>>10)+55296,(1023&n)+56320)):r+=String.fromCharCode(n);continue}console.error("decode.utf8Read(): Invalid byte "+o+" at offset "+s+". Skip to end of string: "+(t.offset+i));break}return t.offset+=i,r}function $(e,t){return Z(e,t)<<24>>24}function Z(e,t){return e[t.offset++]}function ee(e,t){return et(e,t)<<16>>16}function et(e,t){return e[t.offset++]|e[t.offset++]<<8}function ei(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function er(e,t){return ei(e,t)>>>0}function en(e,t){return H[0]=ei(e,t),X[0]}function es(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),q[0]}function ea(e,t){let i=er(e,t);return 0x100000000*ei(e,t)+i}function eo(e,t){let i=er(e,t);return 0x100000000*er(e,t)+i}let eh={utf8Read:Q,int8:$,uint8:Z,int16:ee,uint16:et,int32:ei,uint32:er,float32:en,float64:es,int64:ea,uint64:eo,bigint64:function(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),J[0]},biguint64:function(e,t){return H[0]=ei(e,t),H[1]=ei(e,t),K[0]},boolean:function(e,t){return Z(e,t)>0},string:function(e,t){let i,r=e[t.offset++];return r<192?i=31&r:217===r?i=Z(e,t):218===r?i=et(e,t):219===r&&(i=er(e,t)),Q(e,t,i)},number:function(e,t){let i=e[t.offset++];if(i<128)return i;if(202===i)return en(e,t);if(203===i)return es(e,t);if(204===i)return Z(e,t);if(205===i)return et(e,t);else if(206===i)return er(e,t);else if(207===i)return eo(e,t);else if(208===i)return $(e,t);else if(209===i)return ee(e,t);else if(210===i)return ei(e,t);else if(211===i)return ea(e,t);else if(i>223)return-((255-i+1)*1)},stringCheck:function(e,t){let i=e[t.offset];return i<192&&i>160||217===i||218===i||219===i}},ec={},el=new Map;function ed(e,t){t.constructor&&(el.set(t.constructor,e),ec[e]=t),t.encode&&(W[e]=t.encode),t.decode&&(eh[e]=t.decode)}class eu{static{this.inheritedTypes=new Map}static{this.cachedContexts=new Map}static register(e){let t=Object.getPrototypeOf(e);if(t!==eU){let i=eu.inheritedTypes.get(t);i||(i=new Set,eu.inheritedTypes.set(t,i)),i.add(e)}}static cache(e){let t=eu.cachedContexts.get(e);return t||(t=new eu(e),eu.cachedContexts.set(e,t)),t}constructor(e){this.types={},this.schemas=new Map,this.hasFilters=!1,this.parentFiltered={},e&&this.discoverTypes(e)}has(e){return this.schemas.has(e)}get(e){return this.types[e]}add(e,t=this.schemas.size){return!this.schemas.has(e)&&(this.types[t]=e,void 0===e[Symbol.metadata]&&ep.initialize(e),this.schemas.set(e,t),!0)}getTypeId(e){return this.schemas.get(e)}discoverTypes(e,t,i,r){if(r&&this.registerFilteredByParent(e,t,i),!this.add(e))return;eu.inheritedTypes.get(e)?.forEach(e=>{this.discoverTypes(e,t,i,r)});let n=e;for(;(n=Object.getPrototypeOf(n))&&n!==eU&&n!==Function.prototype;)this.discoverTypes(n);let s=e[Symbol.metadata]??={};for(let t in s[C]&&(this.hasFilters=!0),s){let i=s[t].type,n=void 0!==s[t].tag;if("string"!=typeof i)if("function"==typeof i)this.discoverTypes(i,e,t,r||n);else{let s=Object.values(i)[0];if("string"==typeof s)continue;this.discoverTypes(s,e,t,r||n)}}}registerFilteredByParent(e,t,i){let r=this.schemas.get(e)??this.schemas.size,n=`${r}`;t&&(n+=`-${this.schemas.get(t)}`),n+=`-${i}`,this.parentFiltered[n]=!0}debug(){let e="";for(let t in this.parentFiltered){let i=t.split("-").map(Number),r=i.pop();e+=`
		${t}: ${i.reverse().map((e,t)=>{let i=this.types[e],n=i[Symbol.metadata],s=i.name;return 0===t&&(s+=`[${n[r].name}]`),`${s}`}).join(" -> ")}`}return`TypeContext ->
	Schema types: ${this.schemas.size}
	hasFilters: ${this.hasFilters}
	parentFiltered:${e}`}}function ef(e){if(Array.isArray(e))return{array:ef(e[0])};if(void 0!==e.type)return e.type;if(function(e){if("function"==typeof e&&e[Symbol.metadata])return!1;let t=Object.keys(e),i=t.filter(e=>/\d+/.test(e));return!!(i.length>0&&i.length===t.length/2&&e[e[i[0]]]==i[0]||t.length>0&&t.every(t=>"string"==typeof e[t]&&e[t]===t))}(e))return Object.keys(e).every(t=>"string"==typeof e[t])?"string":"number";if("object"==typeof e&&null!==e){let t=Object.keys(e).find(e=>void 0!==ec[e]);t&&(e[t]=ef(e[t]))}return e}let ep={addField(e,t,i,r,n){if(t>64)throw Error(`Can't define field '${i}'.
Schema instances may only have up to 64 fields.`);e[t]=Object.assign(e[t]||{},{type:ef(r),index:t,name:i}),Object.defineProperty(e,A,{value:e[A]||{},enumerable:!1,configurable:!0}),n?(e[A][i]=n,e[A][`_${i}`]={value:void 0,writable:!0,enumerable:!1,configurable:!0}):e[A][i]={value:void 0,writable:!0,enumerable:!0,configurable:!0},Object.defineProperty(e,w,{value:t,enumerable:!1,configurable:!0}),Object.defineProperty(e,i,{value:t,enumerable:!1,configurable:!0}),"string"!=typeof e[t].type&&(void 0===e[S]&&Object.defineProperty(e,S,{value:[],enumerable:!1,configurable:!0}),e[S].push(t))},setTag(e,t,i){let r=e[t];e[r].tag=i,e[C]||(Object.defineProperty(e,C,{value:[],enumerable:!1,configurable:!0}),Object.defineProperty(e,I,{value:{},enumerable:!1,configurable:!0})),e[C].push(r),e[I][i]||(e[I][i]=[]),e[I][i].push(r)},setFields(e,t){let i=e.prototype.constructor;eu.register(i);let r=Object.getPrototypeOf(i),n=r&&r[Symbol.metadata],s=ep.initialize(i);i[f]||(i[f]=eU[f]),i[p]||(i[p]=eU[p]),i[g]||(i[g]=eU[g]),i.prototype.toJSON||(i.prototype.toJSON=eU.prototype.toJSON);let a=s[w]??(n&&n[w])??-1;for(let e in a++,t){let i=ef(t[e]),r="string"==typeof Object.keys(i)[0]&&ec[Object.keys(i)[0]],n=r?Object.values(i)[0]:i;ep.addField(s,a,e,i,eF(`_${e}`,a,n,r)),a++}return e},isDeprecated:(e,t)=>!0===e[t].deprecated,init(e){let t={};e[Symbol.metadata]=t,Object.defineProperty(t,w,{value:0,enumerable:!1,configurable:!0})},initialize(e){let t=Object.getPrototypeOf(e),i=t[Symbol.metadata],r=e[Symbol.metadata]??Object.create(null);return t!==eU&&r===i&&(r=Object.create(null),i&&(Object.setPrototypeOf(r,i),Object.defineProperty(r,w,{value:i[w],enumerable:!1,configurable:!0,writable:!0}),void 0!==i[C]&&(Object.defineProperty(r,C,{value:[...i[C]],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r,I,{value:{...i[I]},enumerable:!1,configurable:!0,writable:!0})),void 0!==i[S]&&Object.defineProperty(r,S,{value:[...i[S]],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r,A,{value:{...i[A]},enumerable:!1,configurable:!0,writable:!0}))),Object.defineProperty(e,Symbol.metadata,{value:r,writable:!1,configurable:!0}),r},isValidInstance:e=>e.constructor[Symbol.metadata]&&Object.prototype.hasOwnProperty.call(e.constructor[Symbol.metadata],w),getFields(e){let t=e[Symbol.metadata],i={};for(let e=0;e<=t[w];e++)i[t[e].name]=t[e].type;return i},hasViewTagAtIndex:(e,t)=>e?.[C]?.includes(t)};function eg(e){return{indexes:{},operations:[],queueRootNode:e}}function em(){return{next:void 0,tail:void 0}}function ev(e,t){let i=e.indexes[t];void 0===i?e.indexes[t]=e.operations.push(t)-1:e.operations[i]=t}function ey(e,t){let i=e.indexes[t];void 0===i&&(i=Object.values(e.indexes).at(-1),t=Object.entries(e.indexes).find(([e,t])=>t===i)?.[0]),e.operations[i]=void 0,delete e.indexes[t]}class eb{constructor(e){this.isFiltered=!1,this.indexedOperations={},this.changes={indexes:{},operations:[]},this.allChanges={indexes:{},operations:[]},this.isNew=!0,this.ref=e,this.metadata=e.constructor[Symbol.metadata],this.metadata?.[C]&&(this.allFilteredChanges={indexes:{},operations:[]},this.filteredChanges={indexes:{},operations:[]})}setRoot(e){this.root=e;let t=this.root.add(this);this.checkIsFiltered(this.parent,this.parentIndex,t),t&&this.forEachChild((t,i)=>{t.root!==e?t.setRoot(e):e.add(t)})}setParent(e,t,i){if(this.addParent(e,i),!t)return;let r=t.add(this);t!==this.root&&(this.root=t,this.checkIsFiltered(e,i,r)),r&&this.forEachChild((e,i)=>{if(e.root===t){t.add(e),t.moveNextToParent(e);return}e.setParent(this.ref,t,i)})}forEachChild(e){if(this.ref[x]){if("string"!=typeof this.ref[x])for(let[t,i]of this.ref.entries())i&&e(i[b],this.indexes?.[t]??t)}else for(let t of this.metadata?.[S]??[]){let i=this.metadata[t],r=this.ref[i.name];r&&e(r[b],t)}}operation(e){void 0!==this.filteredChanges?(this.filteredChanges.operations.push(-e),this.root?.enqueueChangeTree(this,"filteredChanges")):(this.changes.operations.push(-e),this.root?.enqueueChangeTree(this,"changes"))}change(t,i=e.OPERATION.ADD){let r=this.isFiltered||this.metadata?.[t]?.tag!==void 0,n=r?this.filteredChanges:this.changes,s=this.indexedOperations[t];if(!s||s===e.OPERATION.DELETE){let r=s&&s===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:i;this.indexedOperations[t]=r}ev(n,t),r?(ev(this.allFilteredChanges,t),this.root&&(this.root.enqueueChangeTree(this,"filteredChanges"),this.root.enqueueChangeTree(this,"allFilteredChanges"))):(ev(this.allChanges,t),this.root?.enqueueChangeTree(this,"changes"))}shiftChangeIndexes(e){let t=this.isFiltered?this.filteredChanges:this.changes,i={},r={};for(let n in this.indexedOperations)i[Number(n)+e]=this.indexedOperations[n],r[Number(n)+e]=t.indexes[n];this.indexedOperations=i,t.indexes=r,t.operations=t.operations.map(t=>t+e)}shiftAllChangeIndexes(e,t=0){void 0!==this.filteredChanges&&this._shiftAllChangeIndexes(e,t,this.allFilteredChanges),this._shiftAllChangeIndexes(e,t,this.allChanges)}_shiftAllChangeIndexes(e,t=0,i){let r={},n=0;for(let e in i.indexes)r[n++]=i.indexes[e];i.indexes=r;for(let r=0;r<i.operations.length;r++){let n=i.operations[r];n>t&&(i.operations[r]=n+e)}}indexedOperation(e,t,i=e){this.indexedOperations[e]=t,void 0!==this.filteredChanges?(ev(this.allFilteredChanges,i),ev(this.filteredChanges,e),this.root?.enqueueChangeTree(this,"filteredChanges")):(ev(this.allChanges,i),ev(this.changes,e),this.root?.enqueueChangeTree(this,"changes"))}getType(e){return this.ref[x]||this.metadata[e].type}getChange(e){return this.indexedOperations[e]}getValue(e,t=!1){return this.ref[v](e,t)}delete(t,i,r=t){if(void 0===t){try{throw Error(`@colyseus/schema ${this.ref.constructor.name}: trying to delete non-existing index '${t}'`)}catch(e){console.warn(e)}return}let n=void 0!==this.filteredChanges?this.filteredChanges:this.changes;this.indexedOperations[t]=i??e.OPERATION.DELETE,ev(n,t),ey(this.allChanges,r);let s=this.getValue(t);return s&&s[b]&&this.root?.remove(s[b]),void 0!==this.filteredChanges?(ey(this.allFilteredChanges,r),this.root?.enqueueChangeTree(this,"filteredChanges")):this.root?.enqueueChangeTree(this,"changes"),s}endEncode(e){this.indexedOperations={},this[e]=eg(),this.ref[E]?.(),this.isNew=!1}discard(e=!1){this.ref[E]?.(),this.indexedOperations={},this.changes=eg(this.changes.queueRootNode),void 0!==this.filteredChanges&&(this.filteredChanges=eg(this.filteredChanges.queueRootNode)),e&&(this.allChanges=eg(this.allChanges.queueRootNode),void 0!==this.allFilteredChanges&&(this.allFilteredChanges=eg(this.allFilteredChanges.queueRootNode)))}discardAll(){let e=Object.keys(this.indexedOperations);for(let t=0,i=e.length;t<i;t++){let i=this.getValue(Number(e[t]));i&&i[b]&&i[b].discardAll()}this.discard()}get changed(){return Object.entries(this.indexedOperations).length>0}checkIsFiltered(e,t,i){this.root.types.hasFilters&&(this._checkFilteredByParent(e,t),void 0!==this.filteredChanges&&(this.root?.enqueueChangeTree(this,"filteredChanges"),i&&this.root?.enqueueChangeTree(this,"allFilteredChanges"))),!this.isFiltered&&(this.root?.enqueueChangeTree(this,"changes"),i&&this.root?.enqueueChangeTree(this,"allChanges"))}_checkFilteredByParent(e,t){let i;if(!e)return;let r=ep.isValidInstance(this.ref)?this.ref.constructor:this.ref[x],n=!ep.isValidInstance(e);n?(e=(i=e[b]).parent,t=i.parentIndex):i=e[b];let s=e.constructor,a=`${this.root.types.getTypeId(r)}`;s&&(a+=`-${this.root.types.schemas.get(s)}`),a+=`-${t}`;let o=ep.hasViewTagAtIndex(s?.[Symbol.metadata],t);this.isFiltered=e[b].isFiltered||this.root.types.parentFiltered[a]||o,this.isFiltered&&(this.isVisibilitySharedWithParent=i.isFiltered&&"string"!=typeof r&&!o&&n,this.filteredChanges||(this.filteredChanges=eg(),this.allFilteredChanges=eg()),this.changes.operations.length>0&&(this.changes.operations.forEach(e=>ev(this.filteredChanges,e)),this.allChanges.operations.forEach(e=>ev(this.allFilteredChanges,e)),this.changes=eg(),this.allChanges=eg()))}get parent(){return this.parentChain?.ref}get parentIndex(){return this.parentChain?.index}addParent(e,t){if(this.hasParent((t,i)=>t[b]===e[b])){this.parentChain.index=t;return}this.parentChain={ref:e,index:t,next:this.parentChain}}removeParent(e=this.parent){let t=this.parentChain,i=null;for(;t;){if(t.ref[b]===e[b])return i?i.next=t.next:this.parentChain=t.next,!0;i=t,t=t.next}return void 0===this.parentChain}findParent(e){let t=this.parentChain;for(;t;){if(e(t.ref,t.index))return t;t=t.next}}hasParent(e){return void 0!==this.findParent(e)}getAllParents(){let e=[],t=this.parentChain;for(;t;)e.push({ref:t.ref,index:t.index}),t=t.next;return e}}function ex(t,i,r,n,s,a){"string"==typeof r?W[r]?.(i,n,a):void 0!==r[Symbol.metadata]?(W.number(i,n[b].refId,a),(s&e.OPERATION.ADD)===e.OPERATION.ADD&&t.tryEncodeTypeId(i,r,n.constructor,a)):W.number(i,n[b].refId,a)}let eE=function(t,i,r,n,s,a,o,h,c){if(i[a.offset++]=(n|s)&255,s===e.OPERATION.DELETE)return;let l=r.ref,d=c[n];ex(t,i,c[n].type,l[d.name],s,a)},eT=function(t,i,r,n,s,a){if(i[a.offset++]=255&s,W.number(i,n,a),s===e.OPERATION.DELETE)return;let o=r.ref;if((s&e.OPERATION.ADD)===e.OPERATION.ADD&&"function"==typeof o.set){let e=r.ref.$indexes.get(n);W.string(i,e,a)}ex(t,i,o[x],o[v](n),s,a)},eA=function(t,i,r,n,s,a,o,h){let c,l=r.ref;if(h&&r.isFiltered&&"string"!=typeof r.getType(n)){let t=l.tmpItems[n];if(!t)return;c=t[b].refId,s===e.OPERATION.DELETE?s=e.OPERATION.DELETE_BY_REFID:s===e.OPERATION.ADD&&(s=e.OPERATION.ADD_BY_REFID)}else c=n;i[a.offset++]=255&s,W.number(i,c,a),s===e.OPERATION.DELETE||s===e.OPERATION.DELETE_BY_REFID||ex(t,i,r.getType(n),r.getValue(n,o),s,a)};function ew(t,i,r,n,s,a,o,h){let c,l=t.root,d=r[v](n);if((i&e.OPERATION.DELETE)===e.OPERATION.DELETE){let t=l.refIds.get(d);void 0!==t&&l.removeRef(t),i!==e.OPERATION.DELETE_AND_ADD&&r[y](n),c=void 0}if(i===e.OPERATION.DELETE);else if(eU.is(s)){let r=eh.number(a,o);if(c=l.refs.get(r),(i&e.OPERATION.ADD)===e.OPERATION.ADD){let n=t.getInstanceType(a,o,s);c||(c=t.createInstanceOfType(n)),l.addRef(r,c,c!==d||i===e.OPERATION.DELETE_AND_ADD&&c===d)}}else if("string"==typeof s)c=eh[s](a,o);else{let t=ec[Object.keys(s)[0]],r=eh.number(a,o),n=l.refs.has(r)?d||l.refs.get(r):new t.constructor;if((c=n.clone(!0))[x]=Object.values(s)[0],d){let t=l.refIds.get(d);if(void 0!==t&&r!==t){let i,r=d.entries();for(;(i=r.next())&&!i.done;){let[r,n]=i.value;"object"==typeof n&&(t=l.refIds.get(n),l.removeRef(t)),h.push({ref:d,refId:t,op:e.OPERATION.DELETE,field:r,value:void 0,previousValue:n})}}}l.addRef(r,c,n!==d||i===e.OPERATION.DELETE_AND_ADD&&n===d)}return{value:c,previousValue:d}}let eS=function(e,t,i,r,n){let s=t[i.offset++],a=r.constructor[Symbol.metadata],o=s>>6<<6,h=s%(o||255),c=a[h];if(void 0===c)return console.warn("@colyseus/schema: field not defined at",{index:h,ref:r.constructor.name,metadata:a}),-1;let{value:l,previousValue:d}=ew(e,o,r,h,c.type,t,i,n);null!=l&&(r[c.name]=l),d!==l&&n.push({ref:r,refId:e.currentRefId,op:o,field:c.name,value:l,previousValue:d})},eC=function(t,i,r,n,s){let a,o=i[r.offset++];if(o===e.OPERATION.CLEAR){t.removeChildRefs(n,s),n.clear();return}let h=eh.number(i,r),c=n[x];(o&e.OPERATION.ADD)===e.OPERATION.ADD?"function"==typeof n.set?(a=eh.string(i,r),n.setIndex(h,a)):a=h:a=n.getIndex(h);let{value:l,previousValue:d}=ew(t,o,n,h,c,i,r,s);if(null!=l){if("function"==typeof n.set)n.$items.set(a,l);else if("function"==typeof n.$setAt)n.$setAt(h,l,o);else if("function"==typeof n.add){let e=n.add(l);"number"==typeof e&&n.setIndex(e,e)}}d!==l&&s.push({ref:n,refId:t.currentRefId,op:o,field:"",dynamicIndex:a,value:l,previousValue:d})},eI=function(t,i,r,n,s){let a,o=i[r.offset++];if(o===e.OPERATION.CLEAR){t.removeChildRefs(n,s),n.clear();return}if(o===e.OPERATION.REVERSE)return void n.reverse();if(o===e.OPERATION.DELETE_BY_REFID){let o=eh.number(i,r),h=t.root.refs.get(o);a=n.findIndex(e=>e===h),n[y](a),s.push({ref:n,refId:t.currentRefId,op:e.OPERATION.DELETE,field:"",dynamicIndex:a,value:void 0,previousValue:h});return}if(o===e.OPERATION.ADD_BY_REFID){let e=eh.number(i,r),s=t.root.refs.get(e);s&&(a=n.findIndex(e=>e===s)),(-1===a||void 0===a)&&(a=n.length)}else a=eh.number(i,r);let h=n[x],c=a,{value:l,previousValue:d}=ew(t,o,n,a,h,i,r,s);null!=l&&l!==d&&n.$setAt(a,l,o),d!==l&&s.push({ref:n,refId:t.currentRefId,op:o,field:"",dynamicIndex:c,value:l,previousValue:d})};class e_ extends Error{}function eO(e,t,i,r){if(!(e instanceof t))throw new e_(`a '${t.name}' was expected, but '${e&&e.constructor.name}' was provided in ${i.constructor.name}#${r}`)}let eP=(e,t)=>{let i=e.toString(),r=t.toString();return i<r?-1:+(i>r)};class eM{static{this[t]=eA}static{this[i]=eI}static[(t=p,i=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible(e.tmpItems[t]?.[b])}static is(e){return Array.isArray(e)||void 0!==e.array}static from(e){return new eM(...Array.from(e))}constructor(...t){this.items=[],this.tmpItems=[],this.deletedIndexes={},this.isMovingItems=!1,Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0});let i=new Proxy(this,{get:(e,t)=>"symbol"==typeof t||isNaN(t)?Reflect.get(e,t):this.items[t],set:(t,i,r)=>{if("symbol"==typeof i||isNaN(i))return Reflect.set(t,i,r);if(null==r)t.$deleteAt(i);else{if(r[b]){eO(r,t[x],t,i);let n=t.items[i];t.isMovingItems?(void 0!==n?r[b].isNew?t[b].indexedOperation(Number(i),e.OPERATION.MOVE_AND_ADD):(t[b].getChange(Number(i))&e.OPERATION.DELETE)===e.OPERATION.DELETE?t[b].indexedOperation(Number(i),e.OPERATION.DELETE_AND_MOVE):t[b].indexedOperation(Number(i),e.OPERATION.MOVE):r[b].isNew&&t[b].indexedOperation(Number(i),e.OPERATION.ADD),r[b].setParent(this,t[b].root,i)):t.$changeAt(Number(i),r),void 0!==n&&n[b].root?.remove(n[b])}else t.$changeAt(Number(i),r);t.items[i]=r,t.tmpItems[i]=r}return!0},deleteProperty:(e,t)=>("number"==typeof t?e.$deleteAt(t):delete e[t],!0),has:(e,t)=>"symbol"==typeof t||isNaN(Number(t))?Reflect.has(e,t):Reflect.has(this.items,t)});return Object.defineProperty(this,b,{value:new eb(i),enumerable:!1,writable:!0}),t.length>0&&this.push(...t),i}set length(e){0===e?this.clear():e<this.items.length?this.splice(e,this.length-e):console.warn("ArraySchema: can't set .length to a higher value than its length.")}get length(){return this.items.length}push(...t){let i=this.tmpItems.length,r=this[b];for(let n=0,s=t.length;n<s;n++,i++){let s=t[n];if(null==s)return;"object"==typeof s&&this[x]&&eO(s,this[x],this,n),r.indexedOperation(i,e.OPERATION.ADD,this.items.length),this.items.push(s),this.tmpItems.push(s),s[b]?.setParent(this,r.root,i)}return i}pop(){let e=-1;for(let t=this.tmpItems.length-1;t>=0;t--)if(!0!==this.deletedIndexes[t]){e=t;break}if(!(e<0))return this[b].delete(e,void 0,this.items.length-1),this.deletedIndexes[e]=!0,this.items.pop()}at(e){return e<0&&(e+=this.length),this.items[e]}$changeAt(t,i){if(null==i)return void console.error("ArraySchema items cannot be null nor undefined; Use `deleteAt(index)` instead.");if(this.items[t]===i)return;let r=void 0!==this.items[t]?"object"==typeof i?e.OPERATION.DELETE_AND_ADD:e.OPERATION.REPLACE:e.OPERATION.ADD,n=this[b];n.change(t,r),i[b]?.setParent(this,n.root,t)}$deleteAt(e,t){this[b].delete(e,t)}$setAt(t,i,r){0===t&&r===e.OPERATION.ADD&&void 0!==this.items[t]?this.items.unshift(i):(r===e.OPERATION.DELETE_AND_MOVE&&this.items.splice(t,1),this.items[t]=i)}clear(){if(0===this.items.length)return;let t=this[b];t.forEachChild((e,i)=>{t.root?.remove(e)}),t.discard(!0),t.operation(e.OPERATION.CLEAR),this.items.length=0,this.tmpItems.length=0}concat(...e){return new eM(...this.items.concat(...e))}join(e){return this.items.join(e)}reverse(){return this[b].operation(e.OPERATION.REVERSE),this.items.reverse(),this.tmpItems.reverse(),this}shift(){if(0===this.items.length)return;let t=this[b],i=this.tmpItems.findIndex(e=>e===this.items[0]),r=this.items.findIndex(e=>e===this.items[0]);return t.delete(i,e.OPERATION.DELETE,r),t.shiftAllChangeIndexes(-1,r),this.deletedIndexes[i]=!0,this.items.shift()}slice(e,t){let i=new eM;return i.push(...this.items.slice(e,t)),i}sort(t=eP){this.isMovingItems=!0;let i=this[b];return this.items.sort(t).forEach((t,r)=>i.change(r,e.OPERATION.REPLACE)),this.tmpItems.sort(t),this.isMovingItems=!1,this}splice(t,i,...r){let n=this[b],s=this.items.length,a=this.tmpItems.length,o=r.length,h=[];for(let e=0;e<a;e++)!0!==this.deletedIndexes[e]&&h.push(e);if(s>t){void 0===i&&(i=s-t);for(let r=t;r<t+i;r++){let t=h[r];n.delete(t,e.OPERATION.DELETE),this.deletedIndexes[t]=!0}}else i=0;if(o>0){if(o>i)throw console.error("Inserting more elements than deleting during ArraySchema#splice()"),Error("ArraySchema#splice(): insertCount must be equal or lower than deleteCount.");for(let i=0;i<o;i++){let a=(h[t]??s)+i;n.indexedOperation(a,this.deletedIndexes[a]?e.OPERATION.DELETE_AND_ADD:e.OPERATION.ADD),r[i][b]?.setParent(this,n.root,a)}}return i>o&&n.shiftAllChangeIndexes(-(i-o),h[t+o]),void 0!==n.filteredChanges?n.root?.enqueueChangeTree(n,"filteredChanges"):n.root?.enqueueChangeTree(n,"changes"),this.items.splice(t,i,...r)}unshift(...t){let i=this[b];return i.shiftChangeIndexes(t.length),i.isFiltered?ev(i.filteredChanges,this.items.length):ev(i.allChanges,this.items.length),t.forEach((t,r)=>{i.change(r,e.OPERATION.ADD)}),this.tmpItems.unshift(...t),this.items.unshift(...t)}indexOf(e,t){return this.items.indexOf(e,t)}lastIndexOf(e,t=this.length-1){return this.items.lastIndexOf(e,t)}every(e,t){return this.items.every(e,t)}some(e,t){return this.items.some(e,t)}forEach(e,t){return this.items.forEach(e,t)}map(e,t){return this.items.map(e,t)}filter(e,t){return this.items.filter(e,t)}reduce(e,t){return this.items.reduce(e,t)}reduceRight(e,t){return this.items.reduceRight(e,t)}find(e,t){return this.items.find(e,t)}findIndex(e,t){return this.items.findIndex(e,t)}fill(e,t,i){throw Error("ArraySchema#fill() not implemented")}copyWithin(e,t,i){throw Error("ArraySchema#copyWithin() not implemented")}toString(){return this.items.toString()}toLocaleString(){return this.items.toLocaleString()}[Symbol.iterator](){return this.items[Symbol.iterator]()}static get[Symbol.species](){return eM}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}includes(e,t){return this.items.includes(e,t)}flatMap(e,t){throw Error("ArraySchema#flatMap() is not supported.")}flat(e){throw Error("ArraySchema#flat() is not supported.")}findLast(){return this.items.findLast.apply(this.items,arguments)}findLastIndex(){return this.items.findLastIndex.apply(this.items,arguments)}with(e,t){let i=this.items.slice();return e<0&&(e+=this.length),i[e]=t,new eM(...i)}toReversed(){return this.items.slice().reverse()}toSorted(e){return this.items.slice().sort(e)}toSpliced(e,t){return this.items.toSpliced.apply(copy,arguments)}shuffle(){return this.move(e=>{let t=this.items.length;for(;0!=t;){let e=Math.floor(Math.random()*t);t--,[this[t],this[e]]=[this[e],this[t]]}})}move(e){return this.isMovingItems=!0,e(this),this.isMovingItems=!1,this}[v](e,t=!1){return t||this.deletedIndexes[e]?this.items[e]:this.tmpItems[e]||this.items[e]}[y](e){this.items[e]=void 0,this.tmpItems[e]=void 0}[E](){this.tmpItems=this.items.slice(),this.deletedIndexes={}}[T](){this.items=this.items.filter(e=>void 0!==e),this.tmpItems=this.items.slice()}toArray(){return this.items.slice(0)}toJSON(){return this.toArray().map(e=>"function"==typeof e.toJSON?e.toJSON():e)}clone(e){let t;return e?(t=new eM).push(...this.items):t=new eM(...this.map(e=>e[b]?e.clone():e)),t}}ed("array",{constructor:eM});class eR{static{this[r]=eT}static{this[s]=eC}static[(r=p,s=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.map}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={};let t=new eb(this);if(t.indexes={},Object.defineProperty(this,b,{value:t,enumerable:!1,writable:!0}),e)if(e instanceof Map||e instanceof eR)e.forEach((e,t)=>this.set(t,e));else for(let t in e)this.set(t,e[t]);Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}[Symbol.iterator](){return this.$items[Symbol.iterator]()}get[Symbol.toStringTag](){return this.$items[Symbol.toStringTag]}static get[Symbol.species](){return eR}set(t,i){let r,n;if(null==i)throw Error(`MapSchema#set('${t}', ${i}): trying to set ${i} value on '${t}'.`);"object"==typeof i&&this[x]&&eO(i,this[x],this,t),t=t.toString();let s=this[b],a=void 0!==i[b];if(void 0!==s.indexes[t]){r=s.indexes[t],n=e.OPERATION.REPLACE;let o=this.$items.get(t);if(o===i)return;a&&(n=e.OPERATION.DELETE_AND_ADD,void 0!==o&&o[b].root?.remove(o[b])),this.deletedItems[r]&&delete this.deletedItems[r]}else r=s.indexes[w]??0,n=e.OPERATION.ADD,this.$indexes.set(r,t),s.indexes[t]=r,s.indexes[w]=r+1;return this.$items.set(t,i),s.change(r,n),a&&i[b].setParent(this,s.root,r),this}get(e){return this.$items.get(e)}delete(e){if(!this.$items.has(e))return!1;let t=this[b].indexes[e];return this.deletedItems[t]=this[b].delete(t),this.$items.delete(e)}clear(){let t=this[b];t.discard(!0),t.indexes={},t.forEachChild((e,i)=>{t.root?.remove(e)}),this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){return this.$items.has(e)}forEach(e){this.$items.forEach(e)}entries(){return this.$items.entries()}keys(){return this.$items.keys()}values(){return this.$items.values()}get size(){return this.$items.size}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){let e=this[b];for(let t in this.deletedItems){let i=parseInt(t),r=this.$indexes.get(i);delete e.indexes[r],this.$indexes.delete(i)}this.deletedItems={}}toJSON(){let e={};return this.forEach((t,i)=>{e[i]="function"==typeof t.toJSON?t.toJSON():t}),e}clone(e){let t;return e?t=Object.assign(new eR,this):(t=new eR,this.forEach((e,i)=>{e[b]?t.set(i,e.clone()):t.set(i,e)})),t}}ed("map",{constructor:eR});class eL{static{this[a]=eT}static{this[o]=eC}static[(a=p,o=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.isChangeTreeVisible((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.collection}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={},this.$refId=0,this[b]=new eb(this),this[b].indexes={},e&&e.forEach(e=>this.add(e)),Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}add(e){let t=this.$refId++;return void 0!==e[b]&&e[b].setParent(this,this[b].root,t),this[b].indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this[b].change(t),t}at(e){let t=Array.from(this.$items.keys())[e];return this.$items.get(t)}entries(){return this.$items.entries()}delete(e){let t,i,r=this.$items.entries();for(;(i=r.next())&&!i.done;)if(e===i.value[1]){t=i.value[0];break}return void 0!==t&&(this.deletedItems[t]=this[b].delete(t),this.$indexes.delete(t),this.$items.delete(t))}clear(){let t=this[b];t.discard(!0),t.indexes={},t.forEachChild((e,i)=>{t.root?.remove(e)}),this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){return Array.from(this.$items.values()).some(t=>t===e)}forEach(e){this.$items.forEach((t,i,r)=>e(t,i,this))}values(){return this.$items.values()}get size(){return this.$items.size}[Symbol.iterator](){return this.$items.values()}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){this.deletedItems={}}toArray(){return Array.from(this.$items.values())}toJSON(){let e=[];return this.forEach((t,i)=>{e.push("function"==typeof t.toJSON?t.toJSON():t)}),e}clone(e){let t;return e?t=Object.assign(new eL,this):(t=new eL,this.forEach(e=>{e[b]?t.add(e.clone()):t.add(e)})),t}}ed("collection",{constructor:eL});class eD{static{this[h]=eT}static{this[c]=eC}static[(h=p,c=g,m)](e,t,i){return!i||"string"==typeof e[x]||i.visible.has((e[v](t)??e.deletedItems[t])[b])}static is(e){return void 0!==e.set}constructor(e){this.$items=new Map,this.$indexes=new Map,this.deletedItems={},this.$refId=0,this[b]=new eb(this),this[b].indexes={},e&&e.forEach(e=>this.add(e)),Object.defineProperty(this,x,{value:void 0,enumerable:!1,writable:!0,configurable:!0})}add(t){if(this.has(t))return!1;let i=this.$refId++;void 0!==t[b]&&t[b].setParent(this,this[b].root,i);let r=this[b].indexes[i]?.op??e.OPERATION.ADD;return this[b].indexes[i]=i,this.$indexes.set(i,i),this.$items.set(i,t),this[b].change(i,r),i}entries(){return this.$items.entries()}delete(e){let t,i,r=this.$items.entries();for(;(i=r.next())&&!i.done;)if(e===i.value[1]){t=i.value[0];break}return void 0!==t&&(this.deletedItems[t]=this[b].delete(t),this.$indexes.delete(t),this.$items.delete(t))}clear(){let t=this[b];t.discard(!0),t.indexes={},this.$indexes.clear(),this.$items.clear(),t.operation(e.OPERATION.CLEAR)}has(e){let t,i=this.$items.values(),r=!1;for(;(t=i.next())&&!t.done;)if(e===t.value){r=!0;break}return r}forEach(e){this.$items.forEach((t,i,r)=>e(t,i,this))}values(){return this.$items.values()}get size(){return this.$items.size}[Symbol.iterator](){return this.$items.values()}setIndex(e,t){this.$indexes.set(e,t)}getIndex(e){return this.$indexes.get(e)}[v](e){return this.$items.get(this.$indexes.get(e))}[y](e){let t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)}[E](){this.deletedItems={}}toArray(){return Array.from(this.$items.values())}toJSON(){let e=[];return this.forEach((t,i)=>{e.push("function"==typeof t.toJSON?t.toJSON():t)}),e}clone(e){let t;return e?t=Object.assign(new eD,this):(t=new eD,this.forEach(e=>{e[b]?t.add(e.clone()):t.add(e)})),t}}function ek(e=-1){return function(t,i){let r=t.constructor,n=Object.getPrototypeOf(r)[Symbol.metadata],s=r[Symbol.metadata]??=Object.assign({},r[Symbol.metadata],n??Object.create(null));ep.setTag(s,i,e)}}function eN(e,t){return function(i,r){let n=i.constructor;if(!e)throw Error(`${n.name}: @type() reference provided for "${r}" is undefined. Make sure you don't have any circular dependencies.`);e=ef(e),eu.register(n);let s=Object.getPrototypeOf(n)[Symbol.metadata],a=ep.initialize(n),o=a[r];if(void 0!==a[o]){if(a[o].deprecated)return;else if(void 0!==a[o].type)try{throw Error(`@colyseus/schema: Duplicate '${r}' definition on '${n.name}'.
Check @type() annotation`)}catch(t){let e=t.stack.split("\n")[4].trim();throw Error(`${t.message} ${e}`)}}else o=a[w]??(s&&s[w])??-1,o++;if(t&&t.manual)ep.addField(a,o,r,e,{enumerable:!0,configurable:!0,writable:!0});else{let t="string"==typeof Object.keys(e)[0]&&ec[Object.keys(e)[0]],i=t?Object.values(e)[0]:e;ep.addField(a,o,r,e,eF(`_${r}`,o,i,t))}}}function eF(t,i,r,n){return{get:function(){return this[t]},set:function(s){let a=this[t]??void 0;if(s!==a){if(null!=s){n?(n.constructor!==eM||s instanceof eM||(s=new eM(...s)),n.constructor!==eR||s instanceof eR||(s=new eR(s)),s[x]=r):"string"!=typeof r?eO(s,r,this,t.substring(1)):function(e,t,i,r){let n,s=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":n="number",isNaN(e)&&console.log(`trying to encode "NaN" in ${i.constructor.name}#${r}`);break;case"bigint64":case"biguint64":n="bigint";break;case"string":n="string",s=!0;break;default:return}if(typeof e!==n&&(!s||s&&null!==e)){let t=`'${JSON.stringify(e)}'${e&&e.constructor&&` (${e.constructor.name})`||""}`;throw new e_(`a '${n}' was expected, but ${t} was provided in ${i.constructor.name}#${r}`)}}(s,r,this,t.substring(1));let o=this[b];void 0!==a&&a[b]?(o.root?.remove(a[b]),this.constructor[f](o,i,e.OPERATION.DELETE_AND_ADD)):this.constructor[f](o,i,e.OPERATION.ADD),s[b]?.setParent(this,o.root,i)}else void 0!==a&&this[b].delete(i);this[t]=s}},enumerable:!0,configurable:!0}}function eB(e){return Array(e).fill(0).map((t,i)=>i===e-1?`\u{2514}\u{2500} `:"   ").join("")}ed("set",{constructor:eD});class eU{static{this[l]=eE}static{this[d]=eS}static initialize(e){Object.defineProperty(e,b,{value:new eb(e),enumerable:!1,writable:!0}),Object.defineProperties(e,e.constructor[Symbol.metadata]?.[A]||{})}static is(e){return"object"==typeof e[Symbol.metadata]}static[(l=p,d=g,f)](t,i,r=e.OPERATION.ADD){t.change(i,r)}static[m](e,t,i){let r=e.constructor[Symbol.metadata],n=r[t]?.tag;if(void 0===i)return void 0===n;{if(void 0===n)return!0;if(-1===n)return i.isChangeTreeVisible(e[b]);let t=i.tags?.get(e[b]);return t&&t.has(n)}}constructor(e){eU.initialize(this),e&&Object.assign(this,e)}assign(e){return Object.assign(this,e),this}setDirty(e,t){let i=this.constructor[Symbol.metadata];this[b].change(i[i[e]].index,t)}clone(){let e=Object.create(this.constructor.prototype);eU.initialize(e);let t=this.constructor[Symbol.metadata];for(let i in t){let r=t[i].name;"object"==typeof this[r]&&"function"==typeof this[r]?.clone?e[r]=this[r].clone():e[r]=this[r]}return e}toJSON(){let e={},t=this.constructor[Symbol.metadata];for(let i in t){let r=t[i],n=r.name;r.deprecated||null===this[n]||void 0===this[n]||(e[n]="function"==typeof this[n].toJSON?this[n].toJSON():this[n])}return e}discardAllChanges(){this[b].discardAll()}[v](e){return this[this.constructor[Symbol.metadata][e].name]}[y](e){this[this.constructor[Symbol.metadata][e].name]=void 0}static debugRefIds(e,t=!1,i=0,r,n=""){let s=t?` - ${JSON.stringify(e.toJSON())}`:"",a=e[b],o=r?r.root.refIds.get(e):a.refId,h=r?r.root:a.root,c=h?.refCount?.[o]>1?` [\xd7${h.refCount[o]}]`:"",l=`${eB(i)}${n}${e.constructor.name} (refId: ${o})${c}${s}
`;return a.forEachChild((n,s)=>{let a=s;"number"==typeof s&&e.$indexes&&(a=e.$indexes.get(s)??s);let o=void 0!==e.forEach&&void 0!==a?`["${a}"]: `:"";l+=this.debugRefIds(n.ref,t,i+1,r,o)}),l}static debugRefIdEncodingOrder(e,t="allChanges"){let i=[],r=e[b].root[t].next;for(;r;)r.changeTree&&i.push(r.changeTree.refId),r=r.next;return i}static debugRefIdsFromDecoder(e){return this.debugRefIds(e.state,!1,0,e)}static debugChanges(t,i=!1){let r=t[b],n=i?r.allChanges:r.changes,s=i?"allChanges":"changes",a=`${t.constructor.name} (${r.refId}) -> .${s}:
`;function o(t){t.operations.filter(e=>e).forEach(t=>{let n=r.indexedOperations[t];a+=`- [${t}]: ${e.OPERATION[n]} (${JSON.stringify(r.getValue(Number(t),i))})
`})}return o(n),!i&&r.filteredChanges&&r.filteredChanges.operations.filter(e=>e).length>0&&(a+=`${t.constructor.name} (${r.refId}) -> .filteredChanges:
`,o(r.filteredChanges)),i&&r.allFilteredChanges&&r.allFilteredChanges.operations.filter(e=>e).length>0&&(a+=`${t.constructor.name} (${r.refId}) -> .allFilteredChanges:
`,o(r.allFilteredChanges)),a}static debugChangesDeep(t,i="changes"){let r="",n=t[b],s=n.root,a=new Map,o=[],h=0;for(let[e,r]of Object.entries(s[i])){let i=s.changeTrees[e];if(!i)continue;let c=!1,l=[],d=i.parent?.[b];if(i===n)c=!0;else for(;void 0!==d;){if(l.push(d),d.ref===t){c=!0;break}d=d.parent?.[b]}c&&(o.push(i.refId),h+=Object.keys(r).length,a.set(i,l.reverse()))}r+=`---
root refId: ${n.refId}
Total instances: ${o.length} (refIds: ${o.join(", ")})
Total changes: ${h}
---
`;let c=new WeakSet;for(let[t,i]of a.entries()){i.forEach((e,t)=>{c.has(e)||(r+=`${eB(t)}${e.ref.constructor.name} (refId: ${e.refId})
`,c.add(e))});let n=t.indexedOperations,s=i.length,a=eB(s),o=s>0?`(${t.parentIndex}) `:"";for(let i in r+=`${a}${o}${t.ref.constructor.name} (refId: ${t.refId}) - changes: ${Object.keys(n).length}
`,n){let t=n[i];r+=`${eB(s+1)}${e.OPERATION[t]}: ${i}
`}}return`${r}`}}function eG(e,t,i,r){var n,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}"function"==typeof SuppressedError&&SuppressedError;class eV{constructor(e){this.types=e,this.nextUniqueId=0,this.refCount={},this.changeTrees={},this.allChanges=em(),this.allFilteredChanges=em(),this.changes=em(),this.filteredChanges=em()}getNextUniqueId(){return this.nextUniqueId++}add(t){void 0===t.refId&&(t.refId=this.getNextUniqueId());let i=void 0===this.changeTrees[t.refId];i&&(this.changeTrees[t.refId]=t);let r=this.refCount[t.refId];if(0===r){let i=t.allChanges.operations,r=i.length;for(;r--;)t.indexedOperations[i[r]]=e.OPERATION.ADD,ev(t.changes,r)}return this.refCount[t.refId]=(r||0)+1,i}remove(e){let t=this.refCount[e.refId]-1;return t<=0?(e.root=void 0,delete this.changeTrees[e.refId],this.removeChangeFromChangeSet("allChanges",e),this.removeChangeFromChangeSet("changes",e),e.filteredChanges&&(this.removeChangeFromChangeSet("allFilteredChanges",e),this.removeChangeFromChangeSet("filteredChanges",e)),this.refCount[e.refId]=0,e.forEachChild((t,i)=>{t.removeParent(e.ref)&&(void 0===t.parentChain||t.parentChain&&this.refCount[t.refId]>0?this.remove(t):t.parentChain&&this.moveNextToParent(t))})):(this.refCount[e.refId]=t,this.recursivelyMoveNextToParent(e)),t}recursivelyMoveNextToParent(e){this.moveNextToParent(e),e.forEachChild((e,t)=>this.recursivelyMoveNextToParent(e))}moveNextToParent(e){e.filteredChanges?(this.moveNextToParentInChangeTreeList("filteredChanges",e),this.moveNextToParentInChangeTreeList("allFilteredChanges",e)):(this.moveNextToParentInChangeTreeList("changes",e),this.moveNextToParentInChangeTreeList("allChanges",e))}moveNextToParentInChangeTreeList(e,t){let i=this[e],r=t[e].queueRootNode;if(!r)return;let n=t.parent;if(!n||!n[b])return;let s=n[b][e]?.queueRootNode;if(!s||s===r)return;let a=s.position;r.position>a||(r.prev?r.prev.next=r.next:i.next=r.next,r.next?r.next.prev=r.prev:i.tail=r.prev,r.prev=s,r.next=s.next,s.next?s.next.prev=r:i.tail=r,s.next=r,this.updatePositionsAfterMove(i,r,a+1))}enqueueChangeTree(e,t,i=e[t].queueRootNode){i||(e[t].queueRootNode=this.addToChangeTreeList(this[t],e))}addToChangeTreeList(e,t){let i={changeTree:t,next:void 0,prev:void 0,position:e.tail?e.tail.position+1:0};return e.next?(i.prev=e.tail,e.tail.next=i):e.next=i,e.tail=i,i}updatePositionsAfterRemoval(e,t){let i=e.next,r=0;for(;i;)r>=t&&(i.position=r),i=i.next,r++}updatePositionsAfterMove(e,t,i){let r=e.next,n=0;for(;r;)r.position=n,r=r.next,n++}removeChangeFromChangeSet(e,t){let i=this[e],r=t[e].queueRootNode;if(r&&r.changeTree===t){let n=r.position;return r.prev?r.prev.next=r.next:i.next=r.next,r.next?r.next.prev=r.prev:i.tail=r.prev,this.updatePositionsAfterRemoval(i,n),t[e].queueRootNode=void 0,!0}return!1}}class eY{static{this.BUFFER_SIZE=void 0!==n&&n.poolSize||8192}constructor(e){this.sharedBuffer=n.allocUnsafe(eY.BUFFER_SIZE),this.context=eu.cache(e.constructor),this.root=new eV(this.context),this.setState(e)}setState(e){this.state=e,this.state[b].setRoot(this.root)}encode(t={offset:0},i,r=this.sharedBuffer,s="changes",a="allChanges"===s,o=t.offset){let h=void 0!==i,c=this.state[b],l=this.root[s];for(;l=l.next;){let n=l.changeTree;if(h){if(!i.isChangeTreeVisible(n)){i.invisible.add(n);continue}i.invisible.delete(n)}let d=n[s],u=n.ref,f=d.operations.length;if(0===f)continue;let g=u.constructor,v=g[p],y=g[m],b=g[Symbol.metadata];(h||t.offset>o||n!==c)&&(r[t.offset++]=255,W.number(r,n.refId,t));for(let s=0;s<f;s++){let o=d.operations[s];if(o<0){r[t.offset++]=255&Math.abs(o);continue}let c=a?e.OPERATION.ADD:n.indexedOperations[o];void 0!==o&&void 0!==c&&(!y||y(u,o,i))&&v(this,r,n,o,c,t,a,h,b)}}if(!(t.offset>r.byteLength))return r.subarray(0,t.offset);{let e=Math.ceil(t.offset/(n.poolSize??8192))*(n.poolSize??8192);return console.warn(`@colyseus/schema buffer overflow. Encoded state is higher than default BUFFER_SIZE. Use the following to increase default BUFFER_SIZE:

    import { Encoder } from "@colyseus/schema";
    Encoder.BUFFER_SIZE = ${Math.round(e/1024)} * 1024; // ${Math.round(e/1024)} KB
`),(r=n.alloc(e,r))===this.sharedBuffer&&(this.sharedBuffer=r),this.encode({offset:o},i,r,s,a)}}encodeAll(e={offset:0},t=this.sharedBuffer){return this.encode(e,void 0,t,"allChanges",!0)}encodeAllView(e,t,i,r=this.sharedBuffer){let s=i.offset;return this.encode(i,e,r,"allFilteredChanges",!0,s),n.concat([r.subarray(0,t),r.subarray(s,i.offset)])}encodeView(t,i,r,s=this.sharedBuffer){let a=r.offset;for(let[i,n]of t.changes){let a=this.root.changeTrees[i];if(void 0===a){t.changes.delete(i);continue}let o=Object.keys(n);if(0===o.length)continue;let h=a.ref.constructor,c=h[p],l=h[Symbol.metadata];s[r.offset++]=255,W.number(s,a.refId,r);for(let t=0,i=o.length;t<i;t++){let i=Number(o[t]),h=void 0!==a.ref[v](i)&&n[i]||e.OPERATION.DELETE;c(this,s,a,i,h,r,!1,!0,l)}}return t.changes.clear(),this.encode(r,t,s,"filteredChanges",!1,a),n.concat([s.subarray(0,i),s.subarray(a,r.offset)])}discardChanges(){let e=this.root.changes.next;for(;e;)e.changeTree.endEncode("changes"),e=e.next;for(this.root.changes=em(),e=this.root.filteredChanges.next;e;)e.changeTree.endEncode("filteredChanges"),e=e.next;this.root.filteredChanges=em()}tryEncodeTypeId(e,t,i,r){let n=this.context.getTypeId(t),s=this.context.getTypeId(i);void 0===s?console.warn(`@colyseus/schema WARNING: Class "${i.name}" is not registered on TypeRegistry - Please either tag the class with @entity or define a @type() field.`):n!==s&&(e[r.offset++]=213,W.number(e,s,r))}get hasChanges(){return void 0!==this.root.changes.next||void 0!==this.root.filteredChanges.next}}function ej(e,t){if(-1===t||t>=e.length)return!1;let i=e.length-1;for(let r=t;r<i;r++)e[r]=e[r+1];return e.length=i,!0}class eW extends Error{constructor(e){super(e),this.name="DecodingWarning"}}class ez{constructor(){this.refs=new Map,this.refIds=new WeakMap,this.refCount={},this.deletedRefs=new Set,this.callbacks={},this.nextUniqueId=0}getNextUniqueId(){return this.nextUniqueId++}addRef(e,t,i=!0){this.refs.set(e,t),this.refIds.set(t,e),i&&(this.refCount[e]=(this.refCount[e]||0)+1),this.deletedRefs.has(e)&&this.deletedRefs.delete(e)}removeRef(e){let t=this.refCount[e];if(void 0===t){try{throw new eW("trying to remove refId that doesn't exist: "+e)}catch(e){console.warn(e)}return}if(0===t){try{let t=this.refs.get(e);throw new eW(`trying to remove refId '${e}' with 0 refCount (${t.constructor.name}: ${JSON.stringify(t)})`)}catch(e){console.warn(e)}return}(this.refCount[e]=t-1)<=0&&this.deletedRefs.add(e)}clearRefs(){this.refs.clear(),this.deletedRefs.clear(),this.callbacks={},this.refCount={}}garbageCollectDeletedRefs(){this.deletedRefs.forEach(e=>{if(this.refCount[e]>0)return;let t=this.refs.get(e);if(void 0!==t.constructor[Symbol.metadata]){let e=t.constructor[Symbol.metadata];for(let i in e){let r=e[i].name,n="object"==typeof t[r]&&this.refIds.get(t[r]);n&&!this.deletedRefs.has(n)&&this.removeRef(n)}}else"function"==typeof t[x]&&Array.from(t.values()).forEach(e=>{let t=this.refIds.get(e);this.deletedRefs.has(t)||this.removeRef(t)});this.refs.delete(e),delete this.refCount[e],delete this.callbacks[e]}),this.deletedRefs.clear()}addCallback(t,i,r){if(void 0===t){let t="number"==typeof i?e.OPERATION[i]:i;throw Error(`Can't addCallback on '${t}' (refId is undefined)`)}return this.callbacks[t]||(this.callbacks[t]={}),this.callbacks[t][i]||(this.callbacks[t][i]=[]),this.callbacks[t][i].push(r),()=>this.removeCallback(t,i,r)}removeCallback(e,t,i){let r=this.callbacks?.[e]?.[t]?.indexOf(i);void 0!==r&&-1!==r&&ej(this.callbacks[e][t],r)}}class eH{constructor(e,t){this.currentRefId=0,this.setState(e),this.context=t||new eu(e.constructor)}setState(e){this.state=e,this.root=new ez,this.root.addRef(0,e)}decode(e,t={offset:0},i=this.state){let r=[],n=this.root,s=e.byteLength,a=i.constructor[g];for(this.currentRefId=0;t.offset<s;){if(255==e[t.offset]){t.offset++,i[T]?.();let r=eh.number(e,t),o=n.refs.get(r);o?(a=(i=o).constructor[g],this.currentRefId=r):(console.error(`"refId" not found: ${r}`,{previousRef:i,previousRefId:this.currentRefId}),console.warn("Please report this issue to the developers."),this.skipCurrentStructure(e,t,s));continue}if(-1===a(this,e,t,i,r)){console.warn("@colyseus/schema: definition mismatch"),this.skipCurrentStructure(e,t,s);continue}}return i[T]?.(),this.triggerChanges?.(r),n.garbageCollectDeletedRefs(),r}skipCurrentStructure(e,t,i){let r={offset:t.offset};for(;t.offset<i&&!(255===e[t.offset]&&(r.offset=t.offset+1,this.root.refs.has(eh.number(e,r))));)t.offset++}getInstanceType(e,t,i){let r;if(213===e[t.offset]){t.offset++;let i=eh.number(e,t);r=this.context.get(i)}return r||i}createInstanceOfType(e){return new e}removeChildRefs(t,i){let r="string"!=typeof t[x],n=this.root.refIds.get(t);t.forEach((s,a)=>{i.push({ref:t,refId:n,op:e.OPERATION.DELETE,field:a,value:void 0,previousValue:s}),r&&this.root.removeRef(this.root.refIds.get(s))})}}class eX extends eU{}eG([eN("string")],eX.prototype,"name",void 0),eG([eN("string")],eX.prototype,"type",void 0),eG([eN("number")],eX.prototype,"referencedType",void 0);class eq extends eU{constructor(){super(...arguments),this.fields=new eM}}eG([eN("number")],eq.prototype,"id",void 0),eG([eN("number")],eq.prototype,"extendsId",void 0),eG([eN([eX])],eq.prototype,"fields",void 0);class eK extends eU{constructor(){super(...arguments),this.types=new eM}static encode(e,t={offset:0}){let i=e.context,r=new eK,n=new eY(r),s=i.schemas.get(e.state.constructor);s>0&&(r.rootType=s);let a=new Set,o={},h=e=>{if(void 0===e.extendsId||a.has(e.extendsId)){a.add(e.id),r.types.push(e);let t=o[e.id];void 0!==t&&(delete o[e.id],t.forEach(e=>h(e)))}else void 0===o[e.extendsId]&&(o[e.extendsId]=[]),o[e.extendsId].push(e)};for(let e in i.schemas.forEach((e,t)=>{let r=new eq;r.id=Number(e);let n=Object.getPrototypeOf(t);n!==eU&&(r.extendsId=i.schemas.get(n));let s=t[Symbol.metadata];if(s!==n[Symbol.metadata])for(let e in s){let t,n=Number(e),a=s[n].name;if(!Object.prototype.hasOwnProperty.call(s,a))continue;let o=new eX;o.name=a;let h=s[n];if("string"==typeof h.type)t=h.type;else{let e;eU.is(h.type)?(t="ref",e=h.type):(t=Object.keys(h.type)[0],"string"==typeof h.type[t]?t+=":"+h.type[t]:e=h.type[t]),o.referencedType=e?i.getTypeId(e):-1}o.type=t,r.fields.push(o)}h(r)}),o)o[e].forEach(e=>r.types.push(e));return n.encodeAll(t).slice(0,t.offset)}static decode(e,t){let i=new eK;new eH(i).decode(e,t);let r=new eu;return i.types.forEach(e=>{let t=r.get(e.extendsId)??eU,i=class extends t{};eu.register(i),r.add(i,e.id)},{}),i.types.forEach(e=>{let t=r.get(e.id),n=ep.initialize(t),s=[],a=e;do s.push(a),a=i.types.find(e=>e.id===a.extendsId);while(a)let o=0;s.reverse().forEach(e=>{var t;t=o,e.fields.forEach((e,i)=>{let s=t+i;if(void 0!==e.referencedType){let t=e.type,i=r.get(e.referencedType);if(!i){let r=e.type.split(":");t=r[0],i=r[1]}"ref"===t?ep.addField(n,s,e.name,i):ep.addField(n,s,e.name,{[t]:i})}else ep.addField(n,s,e.name,e.type)}),o+=e.fields.length})}),new eH(new(r.get(i.rootType||0)),r)}}eG([eN([eq])],eK.prototype,"types",void 0),eG([eN("number")],eK.prototype,"rootType",void 0),ed("map",{constructor:eR}),ed("array",{constructor:eM}),ed("set",{constructor:eD}),ed("collection",{constructor:eL}),e.$changes=b,e.$childType=x,e.$decoder=g,e.$deleteByIndex=y,e.$encoder=p,e.$filter=m,e.$getByIndex=v,e.$track=f,e.ArraySchema=eM,e.ChangeTree=eb,e.CollectionSchema=eL,e.Decoder=eH,e.Encoder=eY,e.MapSchema=eR,e.Metadata=ep,e.Reflection=eK,e.ReflectionField=eX,e.ReflectionType=eq,e.Schema=eU,e.SetSchema=eD,e.StateView=class{constructor(e=!1){this.iterable=e,this.visible=new WeakSet,this.invisible=new WeakSet,this.changes=new Map,e&&(this.items=[])}add(t,i=-1,r=!0){let n=t?.[b],s=n.parent;if(!n)return console.warn("StateView#add(), invalid object:",t),!1;if(!s&&0!==n.refId)throw Error(`Cannot add a detached instance to the StateView. Make sure to assign the "${n.ref.constructor.name}" instance to the state before calling view.add()`);let a=t.constructor[Symbol.metadata];this.visible.add(n),this.iterable&&r&&this.items.push(t),r&&s&&this.addParentOf(n,i);let o=this.changes.get(n.refId);void 0===o&&(o={},this.changes.set(n.refId,o));let h=!1;if(n.forEachChild((e,t)=>{(!a||void 0===a[t].tag||a[t].tag===i)&&this.add(e.ref,i,!1)&&(h=!0)}),-1!==i){let t;this.tags||(this.tags=new WeakMap),this.tags.has(n)?t=this.tags.get(n):(t=new Set,this.tags.set(n,t)),t.add(i),a?.[I]?.[i]?.forEach(t=>{n.getChange(t)!==e.OPERATION.DELETE&&(o[t]=e.OPERATION.ADD)})}else if(!n.isNew||h){let t=void 0!==n.filteredChanges?n.allFilteredChanges:n.allChanges,r=this.invisible.has(n);for(let s=0,c=t.operations.length;s<c;s++){let c=t.operations[s];if(void 0===c)continue;let l=n.indexedOperations[c]??e.OPERATION.ADD,d=a?.[c].tag;l!==e.OPERATION.DELETE&&(r||void 0===d||d===i)&&(o[c]=l,h=!0)}}return h}addParentOf(t,i){let r=t.parent[b],n=t.parentIndex;if(!this.visible.has(r)){this.visible.add(r);let e=r.parent?.[b];e&&void 0!==e.filteredChanges&&this.addParentOf(r,i)}if(r.getChange(n)!==e.OPERATION.DELETE){let t,s=this.changes.get(r.refId);void 0===s&&(s={},this.changes.set(r.refId,s)),this.tags||(this.tags=new WeakMap),this.tags.has(r)?t=this.tags.get(r):(t=new Set,this.tags.set(r,t)),t.add(i),s[n]=e.OPERATION.ADD}}remove(t,i=-1,r=!1){let n=t[b];if(!n)return console.warn("StateView#remove(), invalid object:",t),this;this.visible.delete(n),this.iterable&&!r&&ej(this.items,this.items.indexOf(t));let s=n.ref.constructor[Symbol.metadata],a=this.changes.get(n.refId);if(void 0===a&&(a={},this.changes.set(n.refId,a)),-1===i){let t=n.parent;if(t&&!ep.isValidInstance(t)&&n.isFiltered){let i=t[b],r=this.changes.get(i.refId);void 0===r?(r={},this.changes.set(i.refId,r)):r[n.parentIndex]===e.OPERATION.ADD&&this.changes.delete(n.refId),r[n.parentIndex]=e.OPERATION.DELETE,this._recursiveDeleteVisibleChangeTree(n)}else s?.[C]?.forEach(t=>a[t]=e.OPERATION.DELETE)}else s?.[I][i].forEach(t=>a[t]=e.OPERATION.DELETE);if(this.tags&&this.tags.has(n)){let e=this.tags.get(n);void 0===i?this.tags.delete(n):(e.delete(i),0===e.size&&this.tags.delete(n))}return this}has(e){return this.visible.has(e[b])}hasTag(e,t=-1){let i=this.tags?.get(e[b]);return i?.has(t)??!1}clear(){if(!this.iterable)throw Error("StateView#clear() is only available for iterable StateView's. Use StateView(iterable: true) constructor.");for(let e=0,t=this.items.length;e<t;e++)this.remove(this.items[e],-1,!0);this.items.length=0}isChangeTreeVisible(e){let t=this.visible.has(e);return!t&&e.isVisibilitySharedWithParent&&this.visible.has(e.parent[b])&&(this.visible.add(e),t=!0),t}_recursiveDeleteVisibleChangeTree(e){e.forEachChild(e=>{this.visible.delete(e),this._recursiveDeleteVisibleChangeTree(e)})}},e.TypeContext=eu,e.decode=eh,e.decodeKeyValueOperation=eC,e.decodeSchemaOperation=eS,e.defineCustomTypes=function(e){for(let t in e)ed(t,e[t]);return e=>eN(e)},e.defineTypes=function(e,t,i){for(let r in t)eN(t[r],i)(e.prototype,r);return e},e.deprecated=function(e=!0){return function(t,i){let r=t.constructor,n=Object.getPrototypeOf(r)[Symbol.metadata],s=r[Symbol.metadata]??=Object.assign({},r[Symbol.metadata],n??Object.create(null)),a=s[i];s[a].deprecated=!0,e&&(s[A]??={},s[A][i]={get:function(){throw Error(`${i} is deprecated.`)},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(s,a,{value:s[a],enumerable:!1,configurable:!0})}},e.dumpChanges=function(t){let i=t[b].root,r={ops:{},refs:[]},n=i.changes.next;for(;n;){let t=n.changeTree;if(void 0===t){n=n.next;continue}let i=t.indexedOperations;for(let n in r.refs.push(`refId#${t.refId}`),i){let t=i[n],s=e.OPERATION[t];r.ops[s]||(r.ops[s]=0),r.ops[e.OPERATION[t]]++}n=n.next}return r},e.encode=W,e.encodeArray=eA,e.encodeKeyValueOperation=eT,e.encodeSchemaOperation=eE,e.entity=function(e){return eu.register(e),e},e.getDecoderStateCallbacks=function(t){let i,r=t.root,n=r.callbacks,s=new WeakMap;return t.triggerChanges=function(t){let i=new Set;for(let s=0,a=t.length;s<a;s++){let a=t[s],o=a.refId,h=a.ref,c=n[o];if(c){if((a.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&a.previousValue instanceof eU){let t=n[r.refIds.get(a.previousValue)]?.[e.OPERATION.DELETE];for(let e=t?.length-1;e>=0;e--)t[e]()}if(h instanceof eU){if(!i.has(o)){let t=c?.[e.OPERATION.REPLACE];for(let e=t?.length-1;e>=0;e--)t[e]()}if(c.hasOwnProperty(a.field)){let e=c[a.field];for(let t=e?.length-1;t>=0;t--)e[t](a.value,a.previousValue)}}else{if((a.op&e.OPERATION.DELETE)===e.OPERATION.DELETE){if(void 0!==a.previousValue){let t=c[e.OPERATION.DELETE];for(let e=t?.length-1;e>=0;e--)t[e](a.previousValue,a.dynamicIndex??a.field)}if((a.op&e.OPERATION.ADD)===e.OPERATION.ADD){let t=c[e.OPERATION.ADD];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}}else if((a.op&e.OPERATION.ADD)===e.OPERATION.ADD&&a.previousValue!==a.value){let t=c[e.OPERATION.ADD];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}if(a.value!==a.previousValue&&(void 0!==a.value||void 0!==a.previousValue)){let t=c[e.OPERATION.REPLACE];for(let e=t?.length-1;e>=0;e--)t[e](a.value,a.dynamicIndex??a.field)}}i.add(o)}}},function t(n){return function n(a,o){let h=o.instance?.constructor[Symbol.metadata]||a,c=o.instance&&"function"==typeof o.instance.forEach||a&&void 0===a[Symbol.metadata];if(h&&!c){let a=function(e,t,n,a){return a&&void 0!==o.instance[t]&&!s.has(i)&&n(o.instance[t],void 0),r.addCallback(r.refIds.get(e),t,n)};return new Proxy({listen:function(e,t,r=!0){if(o.instance)return a(o.instance,e,t,r);{let n=()=>{};return o.onInstanceAvailable((o,h)=>{n=a(o,e,t,r&&h&&!s.has(i))}),()=>n()}},onChange:function(t){return r.addCallback(r.refIds.get(o.instance),e.OPERATION.REPLACE,t)},bindTo:function(t,i){return i||(i=Object.keys(h).map(e=>h[e].name)),r.addCallback(r.refIds.get(o.instance),e.OPERATION.REPLACE,()=>{i.forEach(e=>t[e]=o.instance[e])})}},{get(e,i){let s=h[h[i]];if(!s)return e[i];{let e=o.instance?.[i];return n(s.type,{instance:r.refIds.get(e)&&e,parentInstance:o.instance,onInstanceAvailable:n=>{let s=t(o.instance).listen(i,(e,t)=>{n(e,!1),s?.()},!1);void 0!==r.refIds.get(e)&&n(e,!0)}})}},has:(e,t)=>void 0!==h[t],set(e,t,i){throw Error("not allowed")},deleteProperty(e,t){throw Error("not allowed")}})}{let t=function(t,n,a){return a&&t.forEach((e,t)=>n(e,t)),r.addCallback(r.refIds.get(t),e.OPERATION.ADD,(e,t)=>{s.set(n,!0),i=n,n(e,t),s.delete(n),i=void 0})},n=function(t,i){return r.addCallback(r.refIds.get(t),e.OPERATION.DELETE,i)},a=function(t,i){return r.addCallback(r.refIds.get(t),e.OPERATION.REPLACE,i)};return new Proxy({onAdd:function(e,r=!0){if(o.instance)return t(o.instance,e,r&&!s.has(i));if(o.onInstanceAvailable){let n=()=>{};return o.onInstanceAvailable((a,o)=>{n=t(a,e,r&&o&&!s.has(i))}),()=>n()}},onRemove:function(e){if(o.instance)return n(o.instance,e);if(o.onInstanceAvailable){let t=()=>{};return o.onInstanceAvailable(i=>{t=n(i,e)}),()=>t()}},onChange:function(e){if(o.instance)return a(o.instance,e);if(o.onInstanceAvailable){let t=()=>{};return o.onInstanceAvailable(i=>{t=a(i,e)}),()=>t()}}},{get(e,t){if(!e[t])throw Error(`Can't access '${t}' through callback proxy. access the instance directly.`);return e[t]},has:(e,t)=>void 0!==e[t],set(e,t,i){throw Error("not allowed")},deleteProperty(e,t){throw Error("not allowed")}})}}(void 0,{instance:n})}},e.getRawChangesCallback=function(e,t){e.triggerChanges=t},e.registerType=ed,e.schema=function e(t,i,r=eU){let n={},s={},a={},o={};for(let e in t){let i=t[e];"object"==typeof i?(void 0!==i.view&&(o[e]="boolean"==typeof i.view?-1:i.view),n[e]=ef(i),Object.prototype.hasOwnProperty.call(i,"default")?a[e]=i.default:Array.isArray(i)||void 0!==i.array?a[e]=new eM:void 0!==i.map?a[e]=new eR:void 0!==i.collection?a[e]=new eL:void 0!==i.set?a[e]=new eD:void 0!==i.type&&eU.is(i.type)&&(!i.type.prototype.initialize||0===i.type.prototype.initialize.length)&&(a[e]=new i.type)):"function"==typeof i?eU.is(i)?(i.prototype.initialize&&0!==i.prototype.initialize.length||(a[e]=new i),n[e]=ef(i)):s[e]=i:n[e]=ef(i)}let h=()=>{let e={};for(let t in a){let i=a[t];i&&"function"==typeof i.clone?e[t]=i.clone():e[t]=i}return e},c=ep.setFields(class extends r{constructor(...e){s.initialize&&"function"==typeof s.initialize?(super(Object.assign({},h(),(e=>{let t=Object.keys(n),i={};for(let r in e)t.includes(r)||(i[r]=e[r]);return i})(e[0]||{}))),new.target===c&&s.initialize.apply(this,e)):super(Object.assign({},h(),e[0]||{}))}},n);for(let e in c._getDefaultValues=h,Object.assign(c.prototype,s),o)ek(o[e])(c.prototype,e);return i&&Object.defineProperty(c,"name",{value:i}),c.extends=(t,i)=>e(t,i,c),c},e.type=eN,e.view=ek})(i)},{f05bfd4e2d75cd45:"4N3Kx"}],"62Mcy":[function(e,t,i,r){let{Schema:n,type:s}=e("5cb6ab681f3bf25c"),{GameConst:a}=e("eff2e21bf6452f35");class o extends n{constructor(e){super(),this.room_id=e.room_id,this.scene=e.scene,this.key=e.key||"",this.x=parseFloat(e.x),this.y=parseFloat(e.y),this.dir=e.dir,this.mov=!1,this.inState=e.inState||a.STATUS.ACTIVE}sync(e){return this.room_id=e.room_id,this.scene=e.scene,this.key=e.key,this.x=parseFloat(e.x),this.y=parseFloat(e.y),this.dir=e.dir,this.mov=e.mov,this.inState=e.inState,this}}s("number")(o.prototype,"room_id"),s("string")(o.prototype,"scene"),s("string")(o.prototype,"key"),s("number")(o.prototype,"x"),s("number")(o.prototype,"y"),s("string")(o.prototype,"dir"),s("boolean")(o.prototype,"mov"),s("number")(o.prototype,"inState"),t.exports.BodyState=o},{"5cb6ab681f3bf25c":"gmN8i",eff2e21bf6452f35:"z0nmL"}],hJ0F0:[function(e,t,i,r){let{sc:n}=e("d026eb33ec4f8a6d"),{Grid:s,AStarFinder:a}=e("8e5cc24e68f2d485");t.exports.PathFinder=class{constructor(){this.finder=new a,this.world=!1,this.grid=!1,this.bodies={}}createGridFromMap(){this.grid=new s(this.world.mapJson.width+1,this.world.mapJson.height+1)}addBodyToProcess(e){this.bodies[e.id]=e}findPath(e,t){if(this.world.onlyWalkable){let e=!1;try{e=!!n.hasOwn(this.grid,"nodes")&&this.grid.getNodeAt(t[0],t[1])}catch(e){}if(!e||!e.walkable)return!1}let i=this.grid.clone(),r=this.finder.findPath(e[0],e[1],t[0],t[1],i);if(!r.length&&this.world.tryClosestPath){let n=[1,1];e[0]<t[0]&&(n[0]=-1),e[1]<t[1]&&(n[1]=-1);let s=this.world.mapJson.width,a=this.world.mapJson.height,o=t[0]+n[0]>s?t[0]+n[0]:s,h=t[1]+n[1]>a?t[1]+n[1]:a,c=t[0]-n[0]<0?t[0]-n[0]:0,l=t[1]-n[1]<0?t[1]-n[1]:0,d=this.grid.getNodeAt(o,t[1]),u=[[t[0],h],[o,h],[c,t[1]],[t[0],l],[c,l],[c,h],[o,l]];if(d&&!d.walkable){for(let[e,t]of u)if((d=this.grid.getNodeAt(e,t))&&d.walkable)break}d&&d.walkable&&(i=this.grid.clone(),r=this.finder.findPath(e[0],e[1],d.x,d.y,i))}return r}}},{d026eb33ec4f8a6d:"ijd9L","8e5cc24e68f2d485":"5hktF"}],"5hktF":[function(e,t,i,r){t.exports=e("c08c5d893d481d77")},{c08c5d893d481d77:"2KlCn"}],"2KlCn":[function(e,t,i,r){t.exports={Heap:e("a11c2d2f6228b64d"),Node:e("5d6357416bae419"),Grid:e("eb2500554bbf40a2"),Util:e("b8fdf53e7c2bda86"),DiagonalMovement:e("ea6942fe46b7874a"),Heuristic:e("cc79ac15c71b85de"),AStarFinder:e("92550c19cc8290da"),BestFirstFinder:e("8fe7b6287e43173"),BreadthFirstFinder:e("49f4cbf7cb03de5a"),DijkstraFinder:e("f055f2df42298a76"),BiAStarFinder:e("ae88c656fdc0b402"),BiBestFirstFinder:e("6dfdccafa1ea046a"),BiBreadthFirstFinder:e("4f4a8a58aa00c271"),BiDijkstraFinder:e("f9f2731f8e4ac9f4"),IDAStarFinder:e("548d4f7f580680d4"),JumpPointFinder:e("c94d58273ef6271a")}},{a11c2d2f6228b64d:"56zBc","5d6357416bae419":"4UMcP",eb2500554bbf40a2:"cjybB",b8fdf53e7c2bda86:"2QugM",ea6942fe46b7874a:"2yvvA",cc79ac15c71b85de:"1AVtU","92550c19cc8290da":"1tisc","8fe7b6287e43173":"jiux9","49f4cbf7cb03de5a":"l7vvg",f055f2df42298a76:"7sgMi",ae88c656fdc0b402:"1LXtH","6dfdccafa1ea046a":"eA7lU","4f4a8a58aa00c271":"YVDOQ",f9f2731f8e4ac9f4:"fwzml","548d4f7f580680d4":"98Wyz",c94d58273ef6271a:"p4Pc0"}],"56zBc":[function(e,t,i,r){t.exports=e("30b1093da33c692b")},{"30b1093da33c692b":"2ZoZT"}],"2ZoZT":[function(e,t,i,r){(function(){var e,i,r,n,s,a,o,h,c,l,d,u,f,p,g;r=Math.floor,l=Math.min,i=function(e,t){return e<t?-1:+(e>t)},c=function(e,t,n,s,a){var o;if(null==n&&(n=0),null==a&&(a=i),n<0)throw Error("lo must be non-negative");for(null==s&&(s=e.length);n<s;)0>a(t,e[o=r((n+s)/2)])?s=o:n=o+1;return[].splice.apply(e,[n,n-n].concat(t)),t},a=function(e,t,r){return null==r&&(r=i),e.push(t),p(e,0,e.length-1,r)},s=function(e,t){var r,n;return null==t&&(t=i),r=e.pop(),e.length?(n=e[0],e[0]=r,g(e,0,t)):n=r,n},h=function(e,t,r){var n;return null==r&&(r=i),n=e[0],e[0]=t,g(e,0,r),n},o=function(e,t,r){var n;return null==r&&(r=i),e.length&&0>r(e[0],t)&&(t=(n=[e[0],t])[0],e[0]=n[1],g(e,0,r)),t},n=function(e,t){var n,s,a,o,h,c;for(null==t&&(t=i),o=(function(){c=[];for(var t=0,i=r(e.length/2);0<=i?t<i:t>i;0<=i?t++:t--)c.push(t);return c}).apply(this).reverse(),h=[],s=0,a=o.length;s<a;s++)n=o[s],h.push(g(e,n,t));return h},f=function(e,t,r){var n;if(null==r&&(r=i),-1!==(n=e.indexOf(t)))return p(e,0,n,r),g(e,n,r)},d=function(e,t,r){var s,a,h,c;if(null==r&&(r=i),!(s=e.slice(0,t)).length)return s;for(n(s,r),a=0,h=(c=e.slice(t)).length;a<h;a++)o(s,c[a],r);return s.sort(r).reverse()},u=function(e,t,r){var a,o,h,d,u,f,p,g,m;if(null==r&&(r=i),10*t<=e.length){if(!(h=e.slice(0,t).sort(r)).length)return h;for(d=0,o=h[h.length-1],f=(p=e.slice(t)).length;d<f;d++)0>r(a=p[d],o)&&(c(h,a,0,null,r),h.pop(),o=h[h.length-1]);return h}for(n(e,r),m=[],u=0,g=l(t,e.length);0<=g?u<g:u>g;0<=g?++u:--u)m.push(s(e,r));return m},p=function(e,t,r,n){var s,a,o;for(null==n&&(n=i),s=e[r];r>t;){if(0>n(s,a=e[o=r-1>>1])){e[r]=a,r=o;continue}break}return e[r]=s},g=function(e,t,r){var n,s,a,o,h;for(null==r&&(r=i),s=e.length,h=t,a=e[t],n=2*t+1;n<s;)(o=n+1)<s&&!(0>r(e[n],e[o]))&&(n=o),e[t]=e[n],n=2*(t=n)+1;return e[t]=a,p(e,h,t,r)},e=function(){function e(e){this.cmp=null!=e?e:i,this.nodes=[]}return e.push=a,e.pop=s,e.replace=h,e.pushpop=o,e.heapify=n,e.updateItem=f,e.nlargest=d,e.nsmallest=u,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return s(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return -1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return h(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return n(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],"4UMcP":[function(e,t,i,r){t.exports=function(e,t,i){this.x=e,this.y=t,this.walkable=void 0===i||i}},{}],cjybB:[function(e,t,i,r){var n=e("3debe8dfc5f4b19"),s=e("1630f01fef4aa0f7");function a(e,t,i){var r;"object"!=typeof e?r=e:(t=e.length,r=e[0].length,i=e),this.width=r,this.height=t,this.nodes=this._buildNodes(r,t,i)}a.prototype._buildNodes=function(e,t,i){var r,s,a=Array(t);for(r=0;r<t;++r)for(s=0,a[r]=Array(e);s<e;++s)a[r][s]=new n(s,r);if(void 0===i)return a;if(i.length!==t||i[0].length!==e)throw Error("Matrix size does not fit");for(r=0;r<t;++r)for(s=0;s<e;++s)i[r][s]&&(a[r][s].walkable=!1);return a},a.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},a.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},a.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},a.prototype.setWalkableAt=function(e,t,i){this.nodes[t][e].walkable=i},a.prototype.getNeighbors=function(e,t){var i=e.x,r=e.y,n=[],a=!1,o=!1,h=!1,c=!1,l=!1,d=!1,u=!1,f=!1,p=this.nodes;if(this.isWalkableAt(i,r-1)&&(n.push(p[r-1][i]),a=!0),this.isWalkableAt(i+1,r)&&(n.push(p[r][i+1]),h=!0),this.isWalkableAt(i,r+1)&&(n.push(p[r+1][i]),l=!0),this.isWalkableAt(i-1,r)&&(n.push(p[r][i-1]),u=!0),t===s.Never)return n;if(t===s.OnlyWhenNoObstacles)o=u&&a,c=a&&h,d=h&&l,f=l&&u;else if(t===s.IfAtMostOneObstacle)o=u||a,c=a||h,d=h||l,f=l||u;else if(t===s.Always)o=!0,c=!0,d=!0,f=!0;else throw Error("Incorrect value of diagonalMovement");return o&&this.isWalkableAt(i-1,r-1)&&n.push(p[r-1][i-1]),c&&this.isWalkableAt(i+1,r-1)&&n.push(p[r-1][i+1]),d&&this.isWalkableAt(i+1,r+1)&&n.push(p[r+1][i+1]),f&&this.isWalkableAt(i-1,r+1)&&n.push(p[r+1][i-1]),n},a.prototype.clone=function(){var e,t,i=this.width,r=this.height,s=this.nodes,o=new a(i,r),h=Array(r);for(e=0;e<r;++e)for(t=0,h[e]=Array(i);t<i;++t)h[e][t]=new n(t,e,s[e][t].walkable);return o.nodes=h,o},t.exports=a},{"3debe8dfc5f4b19":"4UMcP","1630f01fef4aa0f7":"2yvvA"}],"2yvvA":[function(e,t,i,r){t.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],"2QugM":[function(e,t,i,r){function n(e){for(var t=[[e.x,e.y]];e.parent;)t.push([(e=e.parent).x,e.y]);return t.reverse()}function s(e,t,i,r){var n,s,a,o,h,c,l=Math.abs,d=[];for(a=l(i-e),o=l(r-t),n=e<i?1:-1,s=t<r?1:-1,h=a-o;d.push([e,t]),e!==i||t!==r;)(c=2*h)>-o&&(h-=o,e+=n),c<a&&(h+=a,t+=s);return d}i.backtrace=n,i.biBacktrace=function(e,t){var i=n(e),r=n(t);return i.concat(r.reverse())},i.pathLength=function(e){var t,i,r,n,s,a=0;for(t=1;t<e.length;++t)i=e[t-1],r=e[t],a+=Math.sqrt((n=i[0]-r[0])*n+(s=i[1]-r[1])*s);return a},i.interpolate=s,i.expandPath=function(e){var t,i,r,n,a,o,h=[],c=e.length;if(c<2)return h;for(a=0;a<c-1;++a)for(o=0,t=e[a],i=e[a+1],n=(r=s(t[0],t[1],i[0],i[1])).length;o<n-1;++o)h.push(r[o]);return h.push(e[c-1]),h},i.smoothenPath=function(e,t){var i,r,n,a,o,h,c,l,d,u=t.length,f=t[0][0],p=t[0][1],g=t[u-1][0],m=t[u-1][1];for(a=2,n=[[i=f,r=p]];a<u;++a){for(o=1,c=s(i,r,(h=t[a])[0],h[1]),d=!1;o<c.length;++o)if(l=c[o],!e.isWalkableAt(l[0],l[1])){d=!0;break}d&&(lastValidCoord=t[a-1],n.push(lastValidCoord),i=lastValidCoord[0],r=lastValidCoord[1])}return n.push([g,m]),n},i.compressPath=function(e){if(e.length<3)return e;var t,i,r,n,s,a,o=[],h=e[0][0],c=e[0][1],l=e[1][0],d=e[1][1],u=l-h,f=d-c;for(s=Math.sqrt(u*u+f*f),u/=s,f/=s,o.push([h,c]),a=2;a<e.length;a++)t=l,i=d,r=u,n=f,l=e[a][0],d=e[a][1],s=Math.sqrt((u=l-t)*u+(f=d-i)*f),u/=s,f/=s,(u!==r||f!==n)&&o.push([t,i]);return o.push([l,d]),o}},{}],"1AVtU":[function(e,t,i,r){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var i=Math.SQRT2-1;return e<t?i*e+t:i*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],"1tisc":[function(e,t,i,r){var n=e("b757ea534d669965"),s=e("754f144f9fe03b61"),a=e("89babbb01a8c7621"),o=e("253ad51195869677");function h(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}h.prototype.findPath=function(e,t,i,r,a){var o,h,c,l,d,u,f,p,g=new n(function(e,t){return e.f-t.f}),m=a.getNodeAt(e,t),v=a.getNodeAt(i,r),y=this.heuristic,b=this.diagonalMovement,x=this.weight,E=Math.abs,T=Math.SQRT2;for(m.g=0,m.f=0,g.push(m),m.opened=!0;!g.empty();){if((o=g.pop()).closed=!0,o===v)return s.backtrace(v);for(l=0,d=(h=a.getNeighbors(o,b)).length;l<d;++l)(c=h[l]).closed||(u=c.x,f=c.y,p=o.g+(u-o.x==0||f-o.y==0?1:T),(!c.opened||p<c.g)&&(c.g=p,c.h=c.h||x*y(E(u-i),E(f-r)),c.f=c.g+c.h,c.parent=o,c.opened?g.updateItem(c):(g.push(c),c.opened=!0)))}return[]},t.exports=h},{b757ea534d669965:"56zBc","754f144f9fe03b61":"2QugM","89babbb01a8c7621":"1AVtU","253ad51195869677":"2yvvA"}],jiux9:[function(e,t,i,r){var n=e("b7db616f6e486e56");function s(e){n.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}s.prototype=new n,s.prototype.constructor=s,t.exports=s},{b7db616f6e486e56:"1tisc"}],l7vvg:[function(e,t,i,r){var n=e("6cf07efeb8a2810"),s=e("4df4f7ec3660ef9c");function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}a.prototype.findPath=function(e,t,i,r,s){var a,o,h,c,l,d=[],u=this.diagonalMovement,f=s.getNodeAt(e,t),p=s.getNodeAt(i,r);for(d.push(f),f.opened=!0;d.length;){if((h=d.shift()).closed=!0,h===p)return n.backtrace(p);for(c=0,l=(a=s.getNeighbors(h,u)).length;c<l;++c)(o=a[c]).closed||o.opened||(d.push(o),o.opened=!0,o.parent=h)}return[]},t.exports=a},{"6cf07efeb8a2810":"2QugM","4df4f7ec3660ef9c":"2yvvA"}],"7sgMi":[function(e,t,i,r){var n=e("45c604de4657667e");function s(e){n.call(this,e),this.heuristic=function(e,t){return 0}}s.prototype=new n,s.prototype.constructor=s,t.exports=s},{"45c604de4657667e":"1tisc"}],"1LXtH":[function(e,t,i,r){var n=e("108c6be25fad91af"),s=e("243c1e91777c041a"),a=e("cd71f9bf8d3d1dc4"),o=e("413e1b12231275fd");function h(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}h.prototype.findPath=function(e,t,i,r,a){var o,h,c,l,d,u,f,p,g=function(e,t){return e.f-t.f},m=new n(g),v=new n(g),y=a.getNodeAt(e,t),b=a.getNodeAt(i,r),x=this.heuristic,E=this.diagonalMovement,T=this.weight,A=Math.abs,w=Math.SQRT2;for(y.g=0,y.f=0,m.push(y),y.opened=1,b.g=0,b.f=0,v.push(b),b.opened=2;!m.empty()&&!v.empty();){for(l=0,(o=m.pop()).closed=!0,d=(h=a.getNeighbors(o,E)).length;l<d;++l)if(!(c=h[l]).closed){if(2===c.opened)return s.biBacktrace(o,c);u=c.x,f=c.y,p=o.g+(u-o.x==0||f-o.y==0?1:w),(!c.opened||p<c.g)&&(c.g=p,c.h=c.h||T*x(A(u-i),A(f-r)),c.f=c.g+c.h,c.parent=o,c.opened?m.updateItem(c):(m.push(c),c.opened=1))}for(l=0,(o=v.pop()).closed=!0,d=(h=a.getNeighbors(o,E)).length;l<d;++l)if(!(c=h[l]).closed){if(1===c.opened)return s.biBacktrace(c,o);u=c.x,f=c.y,p=o.g+(u-o.x==0||f-o.y==0?1:w),(!c.opened||p<c.g)&&(c.g=p,c.h=c.h||T*x(A(u-e),A(f-t)),c.f=c.g+c.h,c.parent=o,c.opened?v.updateItem(c):(v.push(c),c.opened=2))}}return[]},t.exports=h},{"108c6be25fad91af":"56zBc","243c1e91777c041a":"2QugM",cd71f9bf8d3d1dc4:"1AVtU","413e1b12231275fd":"2yvvA"}],eA7lU:[function(e,t,i,r){var n=e("a6760298dc2ae1e2");function s(e){n.call(this,e);var t=this.heuristic;this.heuristic=function(e,i){return 1e6*t(e,i)}}s.prototype=new n,s.prototype.constructor=s,t.exports=s},{a6760298dc2ae1e2:"1LXtH"}],YVDOQ:[function(e,t,i,r){var n=e("e34624d6ddfc3286"),s=e("3a2b331c44f27e4");function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}a.prototype.findPath=function(e,t,i,r,s){var a,o,h,c,l,d=s.getNodeAt(e,t),u=s.getNodeAt(i,r),f=[],p=[],g=this.diagonalMovement;for(f.push(d),d.opened=!0,d.by=0,p.push(u),u.opened=!0,u.by=1;f.length&&p.length;){for(c=0,(h=f.shift()).closed=!0,l=(a=s.getNeighbors(h,g)).length;c<l;++c)if(!(o=a[c]).closed){if(o.opened){if(1===o.by)return n.biBacktrace(h,o);continue}f.push(o),o.parent=h,o.opened=!0,o.by=0}for(c=0,(h=p.shift()).closed=!0,l=(a=s.getNeighbors(h,g)).length;c<l;++c)if(!(o=a[c]).closed){if(o.opened){if(0===o.by)return n.biBacktrace(o,h);continue}p.push(o),o.parent=h,o.opened=!0,o.by=1}}return[]},t.exports=a},{e34624d6ddfc3286:"2QugM","3a2b331c44f27e4":"2yvvA"}],fwzml:[function(e,t,i,r){var n=e("4d2eb37086fd0a4d");function s(e){n.call(this,e),this.heuristic=function(e,t){return 0}}s.prototype=new n,s.prototype.constructor=s,t.exports=s},{"4d2eb37086fd0a4d":"1LXtH"}],"98Wyz":[function(e,t,i,r){e("c0387396fce16765");var n=e("dde77a9c5fac2972"),s=e("a8074282e5d01edd"),a=e("19018cfbc93f15b2");function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||n.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=e.heuristic||n.manhattan:this.heuristic=e.heuristic||n.octile}o.prototype.findPath=function(e,t,i,r,n){var a,o,h,c=0,l=new Date().getTime(),d=(function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}).bind(this),u=(function(e,t,i,r,a){if(c++,this.timeLimit>0&&new Date().getTime()-l>1e3*this.timeLimit)return 1/0;var o,h,f,g,m,v=t+d(e,p)*this.weight;if(v>i)return v;if(e==p)return r[a]=[e.x,e.y],e;var y=n.getNeighbors(e,this.diagonalMovement);for(g=0,h=1/0;m=y[g];++g){if(this.trackRecursion&&(m.retainCount=m.retainCount+1||1,!0!==m.tested&&(m.tested=!0)),(f=u(m,t+(o=m,e.x===o.x||e.y===o.y?1:Math.SQRT2),i,r,a+1))instanceof s)return r[a]=[e.x,e.y],f;this.trackRecursion&&0==--m.retainCount&&(m.tested=!1),f<h&&(h=f)}return h}).bind(this),f=n.getNodeAt(e,t),p=n.getNodeAt(i,r),g=d(f,p);for(a=0;(h=u(f,0,g,o=[],0))!==1/0;++a){if(h instanceof s)return o;g=h}return[]},t.exports=o},{c0387396fce16765:"2QugM",dde77a9c5fac2972:"1AVtU",a8074282e5d01edd:"4UMcP","19018cfbc93f15b2":"2yvvA"}],p4Pc0:[function(e,t,i,r){var n=e("2891a3456c178f83"),s=e("4bebb1dfbb208333"),a=e("2a49f576027a63b9"),o=e("4870319ec82eda68"),h=e("434359508a2431a3");t.exports=function(e){return(e=e||{}).diagonalMovement===n.Never?new s(e):e.diagonalMovement===n.Always?new a(e):e.diagonalMovement===n.OnlyWhenNoObstacles?new o(e):new h(e)}},{"2891a3456c178f83":"2yvvA","4bebb1dfbb208333":"dWSPH","2a49f576027a63b9":"70Xll","4870319ec82eda68":"bRU9o","434359508a2431a3":"8j8bm"}],dWSPH:[function(e,t,i,r){var n=e("98703dbb8710efff"),s=e("6cca3053e9062116");function a(e){n.call(this,e)}a.prototype=new n,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,r){var n=this.grid,s=e-i,a=t-r;if(!n.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(e,t).tested=!0),n.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==s){if(n.isWalkableAt(e,t-1)&&!n.isWalkableAt(e-s,t-1)||n.isWalkableAt(e,t+1)&&!n.isWalkableAt(e-s,t+1))return[e,t]}else if(0!==a){if(n.isWalkableAt(e-1,t)&&!n.isWalkableAt(e-1,t-a)||n.isWalkableAt(e+1,t)&&!n.isWalkableAt(e+1,t-a)||this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}else throw Error("Only horizontal and vertical movements are allowed");return this._jump(e+s,t+a,e,t)},a.prototype._findNeighbors=function(e){var t,i,r,n,a,o,h,c,l=e.parent,d=e.x,u=e.y,f=this.grid,p=[];if(l)t=l.x,i=l.y,r=(d-t)/Math.max(Math.abs(d-t),1),n=(u-i)/Math.max(Math.abs(u-i),1),0!==r?(f.isWalkableAt(d,u-1)&&p.push([d,u-1]),f.isWalkableAt(d,u+1)&&p.push([d,u+1]),f.isWalkableAt(d+r,u)&&p.push([d+r,u])):0!==n&&(f.isWalkableAt(d-1,u)&&p.push([d-1,u]),f.isWalkableAt(d+1,u)&&p.push([d+1,u]),f.isWalkableAt(d,u+n)&&p.push([d,u+n]));else for(h=0,c=(a=f.getNeighbors(e,s.Never)).length;h<c;++h)p.push([(o=a[h]).x,o.y]);return p},t.exports=a},{"98703dbb8710efff":"9igQ4","6cca3053e9062116":"2yvvA"}],"9igQ4":[function(e,t,i,r){var n=e("8b7979f4607e3762"),s=e("179c54d27a93ac47"),a=e("b48b48ed099ac50b");function o(e){e=e||{},this.heuristic=e.heuristic||a.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}e("f5a1fa39fcf9e158"),o.prototype.findPath=function(e,t,i,r,a){var o,h=this.openList=new n(function(e,t){return e.f-t.f}),c=this.startNode=a.getNodeAt(e,t),l=this.endNode=a.getNodeAt(i,r);for(this.grid=a,c.g=0,c.f=0,h.push(c),c.opened=!0;!h.empty();){if((o=h.pop()).closed=!0,o===l)return s.expandPath(s.backtrace(l));this._identifySuccessors(o)}return[]},o.prototype._identifySuccessors=function(e){var t,i,r,n,s,o,h,c,l,d,u=this.grid,f=this.heuristic,p=this.openList,g=this.endNode.x,m=this.endNode.y,v=e.x,y=e.y,b=Math.abs;for(n=0,s=(t=this._findNeighbors(e)).length;n<s;++n)if(i=t[n],r=this._jump(i[0],i[1],v,y)){if(o=r[0],h=r[1],(d=u.getNodeAt(o,h)).closed)continue;c=a.octile(b(o-v),b(h-y)),l=e.g+c,(!d.opened||l<d.g)&&(d.g=l,d.h=d.h||f(b(o-g),b(h-m)),d.f=d.g+d.h,d.parent=e,d.opened?p.updateItem(d):(p.push(d),d.opened=!0))}},t.exports=o},{"8b7979f4607e3762":"56zBc","179c54d27a93ac47":"2QugM",b48b48ed099ac50b:"1AVtU",f5a1fa39fcf9e158:"2yvvA"}],"70Xll":[function(e,t,i,r){var n=e("f54d43a0156dd491"),s=e("c0fd5fc87fc6e982");function a(e){n.call(this,e)}a.prototype=new n,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,r){var n=this.grid,s=e-i,a=t-r;if(!n.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(e,t).tested=!0),n.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==s&&0!==a){if(n.isWalkableAt(e-s,t+a)&&!n.isWalkableAt(e-s,t)||n.isWalkableAt(e+s,t-a)&&!n.isWalkableAt(e,t-a)||this._jump(e+s,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==s){if(n.isWalkableAt(e+s,t+1)&&!n.isWalkableAt(e,t+1)||n.isWalkableAt(e+s,t-1)&&!n.isWalkableAt(e,t-1))return[e,t]}else if(n.isWalkableAt(e+1,t+a)&&!n.isWalkableAt(e+1,t)||n.isWalkableAt(e-1,t+a)&&!n.isWalkableAt(e-1,t))return[e,t];return this._jump(e+s,t+a,e,t)},a.prototype._findNeighbors=function(e){var t,i,r,n,a,o,h,c,l=e.parent,d=e.x,u=e.y,f=this.grid,p=[];if(l)t=l.x,i=l.y,r=(d-t)/Math.max(Math.abs(d-t),1),n=(u-i)/Math.max(Math.abs(u-i),1),0!==r&&0!==n?(f.isWalkableAt(d,u+n)&&p.push([d,u+n]),f.isWalkableAt(d+r,u)&&p.push([d+r,u]),f.isWalkableAt(d+r,u+n)&&p.push([d+r,u+n]),f.isWalkableAt(d-r,u)||p.push([d-r,u+n]),f.isWalkableAt(d,u-n)||p.push([d+r,u-n])):0===r?(f.isWalkableAt(d,u+n)&&p.push([d,u+n]),f.isWalkableAt(d+1,u)||p.push([d+1,u+n]),f.isWalkableAt(d-1,u)||p.push([d-1,u+n])):(f.isWalkableAt(d+r,u)&&p.push([d+r,u]),f.isWalkableAt(d,u+1)||p.push([d+r,u+1]),f.isWalkableAt(d,u-1)||p.push([d+r,u-1]));else for(h=0,c=(a=f.getNeighbors(e,s.Always)).length;h<c;++h)p.push([(o=a[h]).x,o.y]);return p},t.exports=a},{f54d43a0156dd491:"9igQ4",c0fd5fc87fc6e982:"2yvvA"}],bRU9o:[function(e,t,i,r){var n=e("671509dd03a8d8cf"),s=e("8726ce1aeaa16523");function a(e){n.call(this,e)}a.prototype=new n,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,r){var n=this.grid,s=e-i,a=t-r;if(!n.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(e,t).tested=!0),n.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==s&&0!==a){if(this._jump(e+s,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==s){if(n.isWalkableAt(e,t-1)&&!n.isWalkableAt(e-s,t-1)||n.isWalkableAt(e,t+1)&&!n.isWalkableAt(e-s,t+1))return[e,t]}else if(0!==a&&(n.isWalkableAt(e-1,t)&&!n.isWalkableAt(e-1,t-a)||n.isWalkableAt(e+1,t)&&!n.isWalkableAt(e+1,t-a)))return[e,t];return n.isWalkableAt(e+s,t)&&n.isWalkableAt(e,t+a)?this._jump(e+s,t+a,e,t):null},a.prototype._findNeighbors=function(e){var t,i,r,n,a,o,h,c,l,d=e.parent,u=e.x,f=e.y,p=this.grid,g=[];if(d){if(i=d.x,r=d.y,n=(u-i)/Math.max(Math.abs(u-i),1),a=(f-r)/Math.max(Math.abs(f-r),1),0!==n&&0!==a)p.isWalkableAt(u,f+a)&&g.push([u,f+a]),p.isWalkableAt(u+n,f)&&g.push([u+n,f]),p.isWalkableAt(u,f+a)&&p.isWalkableAt(u+n,f)&&g.push([u+n,f+a]);else if(0!==n){t=p.isWalkableAt(u+n,f);var m=p.isWalkableAt(u,f+1),v=p.isWalkableAt(u,f-1);t&&(g.push([u+n,f]),m&&g.push([u+n,f+1]),v&&g.push([u+n,f-1])),m&&g.push([u,f+1]),v&&g.push([u,f-1])}else if(0!==a){t=p.isWalkableAt(u,f+a);var y=p.isWalkableAt(u+1,f),b=p.isWalkableAt(u-1,f);t&&(g.push([u,f+a]),y&&g.push([u+1,f+a]),b&&g.push([u-1,f+a])),y&&g.push([u+1,f]),b&&g.push([u-1,f])}}else for(c=0,l=(o=p.getNeighbors(e,s.OnlyWhenNoObstacles)).length;c<l;++c)h=o[c],g.push([h.x,h.y]);return g},t.exports=a},{"671509dd03a8d8cf":"9igQ4","8726ce1aeaa16523":"2yvvA"}],"8j8bm":[function(e,t,i,r){var n=e("f2c8225bd6d92e42"),s=e("30a82af97f1647c1");function a(e){n.call(this,e)}a.prototype=new n,a.prototype.constructor=a,a.prototype._jump=function(e,t,i,r){var n=this.grid,s=e-i,a=t-r;if(!n.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(n.getNodeAt(e,t).tested=!0),n.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==s&&0!==a){if(n.isWalkableAt(e-s,t+a)&&!n.isWalkableAt(e-s,t)||n.isWalkableAt(e+s,t-a)&&!n.isWalkableAt(e,t-a)||this._jump(e+s,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==s){if(n.isWalkableAt(e+s,t+1)&&!n.isWalkableAt(e,t+1)||n.isWalkableAt(e+s,t-1)&&!n.isWalkableAt(e,t-1))return[e,t]}else if(n.isWalkableAt(e+1,t+a)&&!n.isWalkableAt(e+1,t)||n.isWalkableAt(e-1,t+a)&&!n.isWalkableAt(e-1,t))return[e,t];return n.isWalkableAt(e+s,t)||n.isWalkableAt(e,t+a)?this._jump(e+s,t+a,e,t):null},a.prototype._findNeighbors=function(e){var t,i,r,n,a,o,h,c,l=e.parent,d=e.x,u=e.y,f=this.grid,p=[];if(l)t=l.x,i=l.y,r=(d-t)/Math.max(Math.abs(d-t),1),n=(u-i)/Math.max(Math.abs(u-i),1),0!==r&&0!==n?(f.isWalkableAt(d,u+n)&&p.push([d,u+n]),f.isWalkableAt(d+r,u)&&p.push([d+r,u]),(f.isWalkableAt(d,u+n)||f.isWalkableAt(d+r,u))&&p.push([d+r,u+n]),!f.isWalkableAt(d-r,u)&&f.isWalkableAt(d,u+n)&&p.push([d-r,u+n]),!f.isWalkableAt(d,u-n)&&f.isWalkableAt(d+r,u)&&p.push([d+r,u-n])):0===r?f.isWalkableAt(d,u+n)&&(p.push([d,u+n]),f.isWalkableAt(d+1,u)||p.push([d+1,u+n]),f.isWalkableAt(d-1,u)||p.push([d-1,u+n])):f.isWalkableAt(d+r,u)&&(p.push([d+r,u]),f.isWalkableAt(d,u+1)||p.push([d+r,u+1]),f.isWalkableAt(d,u-1)||p.push([d+r,u-1]));else for(h=0,c=(a=f.getNeighbors(e,s.IfAtMostOneObstacle)).length;h<c;++h)p.push([(o=a[h]).x,o.y]);return p},t.exports=a},{f2c8225bd6d92e42:"9igQ4","30a82af97f1647c1":"2yvvA"}],"8i096":[function(e,t,i,r){let{sc:n}=e("e99a0c8899f6ae88");t.exports.TypeDeterminer=class{isPlayer(e){return n.hasOwn(e,"sessionId")}isObject(e){return n.hasOwn(e,"key")}}},{e99a0c8899f6ae88:"ijd9L"}],iDcNR:[function(e,t,i,r){t.exports.WorldConst={WORLD_TYPES:{NO_GRAVITY_2D:"NO_GRAVITY_2D",TOP_DOWN_WITH_GRAVITY:"TOP_DOWN_WITH_GRAVITY"},COLLISIONS:{PLAYER:1,OBJECT:2,WALL:4,BULLET_PLAYER:8,BULLET_OBJECT:16,BULLET_OTHER:32,DROP:64},FROM_TYPES:{PLAYER:"PLAYER",OBJECT:"OBJECT",OTHER:"OTHER"}}},{}],eFP7h:[function(e,t,i,r){t.exports.WorldPointsValidator=class{constructor(e,t){this.worldWidth=e,this.worldHeight=t}makeValidPoints(e){return e.column=e.column<0?0:e.column,e.column=e.column>this.worldWidth?this.worldWidth:e.column,e.row=e.row<0?0:e.row,e.row=e.row>this.worldHeight?this.worldHeight:e.row,e}}},{}],"4O4zD":[function(e,t,i,r){let{Logger:n,sc:s}=e("9b59b4ef27f548b6");t.exports.WorldTimer=class{constructor(e){this.clockInstance=s.get(e,"clockInstance",!1),this.callbacks=s.get(e,"callbacks",[]),this.worldTimer={},this.paused=!1,this.lastCallTime=0,this.stepTime=0,this.startedTime=new Date().getTime(),this.currentTime=this.startedTime}startWorldSteps(e){if(!e)return void n.error("World instance invalid.",{world:e});if(this.stepTime=1e3*e.timeStep,this.clockInstance){this.worldTimer=this.clockInstance.setInterval(()=>{this.setIntervalCallback(e)},this.stepTime);return}this.worldTimer=setInterval(()=>{this.setIntervalCallback(e)},this.stepTime)}setIntervalCallback(e){this.paused||(this.currentTime+=this.stepTime,this.stepWorld(e),this.executeCallbacks())}stepWorld(e){e.useFixedWorldStep?e.step(e.timeStep):this.stepWorldWithSubSteps(e)}executeCallbacks(){if(0!==this.callbacks.length)for(let e of this.callbacks)e()}stepWorldWithSubSteps(e){let t=Date.now()/1e3-this.lastCallTime;e.step(e.timeStep,t,e.maxSubSteps)}}},{"9b59b4ef27f548b6":"ijd9L"}],gOWjM:[function(e,t,i,r){let{PlayerEnginePrediction:n}=e("35dabd79ba23aa99"),{SceneDynamic:s}=e("caa2ee44a66bdd90");t.exports.RoomEventsOverride=class{createCurrentPlayerOverride(e){e.createCurrentPlayer=async(t,i,r)=>{e.engineStarted=!0,await e.startEngineScene(t,e.room,i);let n=e.getActiveScene();if(!e.isValidScene(n,t))return!1;for(let s of(await e.events.emit("reldens.playersQueueBefore",t,r,i,e),Object.keys(e.playersQueue)))n.player.addPlayer(s,e.playersQueue[s]);n.experimentalClientPrediction&&(n.player.positionFromServer=t);let s={player:t,key:r,previousScene:i,roomEvents:e};return await e.events.emit("reldens.createCurrentPlayer",s),s}}playerOnChangeOverride(e){e.playersOnChange=(t,i,r)=>{if(t.state.scene!==e.roomName)return;let n=e.getActiveScene();if(e.playerExists(n,i)){if(n.experimentalClientPrediction&&e.isCurrentPlayer(i)){n.player.positionFromServer=t;return}n.player.updatePlayer(i,t)}}}createSceneInstanceOverride(e){e.createSceneInstance=(e,t,i)=>{let r=new s(e,t,i);return r.experimentalClientPrediction=i.config.get("client/general/engine/experimentalClientPrediction"),r.worldPrediction=!1,r}}createPlayerEngineInstanceOverride(e){e.createPlayerEngineInstance=(e,t,i,r)=>new n({scene:e,playerData:t,gameManager:i,room:r})}}},{"35dabd79ba23aa99":"1euYP",caa2ee44a66bdd90:"1uB65"}],"1euYP":[function(e,t,i,r){let{PlayerEngine:n}=e("a2861f4cd568519f"),{GameConst:s}=e("78935193245f5a91");t.exports.PlayerEnginePrediction=class extends n{constructor(e){super(e),this.predictionBody=!1,this.positionFromServer=!1;let t=this.gameManager.config.get("client/players/reconciliation/timeOutMs");this.reconciliationTimeOutMs=!1===t?1e3:Number(t)}left(){if("pressed"===this.lastKeyState[s.LEFT])return;let e={dir:s.LEFT};this.lastKeyState[s.LEFT]="pressed",this.predictionBody&&(e.time=this.scene.worldPredictionTimer.currentTime,this.predictionBody.initMove(s.LEFT,!0)),this.roomEvents.send(e)}right(){if("pressed"===this.lastKeyState[s.RIGHT])return;this.lastKeyState[s.RIGHT]="pressed";let e={dir:s.RIGHT};this.predictionBody&&(e.time=this.scene.worldPredictionTimer.currentTime,this.predictionBody.initMove(s.RIGHT,!0)),this.roomEvents.send(e)}up(){if("pressed"===this.lastKeyState[s.UP])return;this.lastKeyState[s.UP]="pressed";let e={dir:s.UP};this.predictionBody&&(e.time=this.scene.worldPredictionTimer.currentTime,this.predictionBody.initMove(s.UP,!0)),this.roomEvents.send(e)}down(){if("pressed"===this.lastKeyState[s.DOWN])return;this.lastKeyState[s.DOWN]="pressed";let e={dir:s.DOWN};this.predictionBody&&(e.time=this.scene.worldPredictionTimer.currentTime,this.predictionBody.initMove(s.DOWN,!0)),this.roomEvents.send(e)}stop(){this.lastKeyState[s.LEFT]="",this.lastKeyState[s.RIGHT]="",this.lastKeyState[s.UP]="",this.lastKeyState[s.DOWN]="";let e={act:s.STOP};this.predictionBody&&(e.time=this.scene.worldPredictionTimer.currentTime,this.reconcilePosition()),this.roomEvents.send(e)}reconcilePosition(){this.predictionBody&&this.positionFromServer&&(this.predictionBody.stopFull(),setTimeout(()=>{this.predictionBody.position[0]=this.positionFromServer.state.x,this.predictionBody.position[1]=this.positionFromServer.state.y,this.predictionBody.dir=this.positionFromServer.state.dir,this.updatePlayer(this.playerId,this.positionFromServer)},this.reconciliationByTimeOutMs()))}reconciliationTimeOutCallBack(){return!1}reconciliationByTimeOutMs(){let e=this.reconciliationTimeOutCallBack();return Number(!1!==e?e:this.reconciliationTimeOutMs)}moveToPointer(e){this.lastKeyState[s.LEFT]="",this.lastKeyState[s.RIGHT]="",this.lastKeyState[s.UP]="",this.lastKeyState[s.DOWN]="";let t={act:s.POINTER,column:e.worldColumn,row:e.worldRow,x:e.worldX-this.leftOff,y:e.worldY-this.topOff};if(this.predictionBody&&this.pointsValidator){this.reconcilePosition();let e=Object.assign({},t);e=this.pointsValidator.makeValidPoints(e),this.predictionBody.moveToPoint(e)}this.roomEvents.send(t)}}},{a2861f4cd568519f:"idUM5","78935193245f5a91":"z0nmL"}],cbRZ3:[function(e,t,i,r){let{PluginInterface:n}=e("ff0cd3a039680b50"),{TargetBoxEnricher:s}=e("bc896f1b30e26c8b"),{TeamMessageListener:a}=e("b9e6a2d82debed5b"),{ClanMessageListener:o}=e("d88cac34aed27f09"),{MessageProcessor:h}=e("187e0a90a62f31a1"),{TemplatesHandler:c}=e("a77183244ab38ca1"),{TeamsConst:l}=e("817bd734dbf4f984"),{Logger:d,sc:u}=e("5bd001817d1a1fe2");t.exports.TeamsPlugin=class extends n{async setup(e){return(this.gameManager=u.get(e,"gameManager",!1),this.gameManager)?(this.events=u.get(e,"events",!1),this.events)?(this.teamMessageListener=new a,this.clanMessageListener=new o,this.listenEvents(),this.listenMessages(),!0):(d.error("EventsManager undefined in TeamsPlugin."),!1):(d.error("Game Manager undefined in TeamsPlugin."),!1)}listenMessages(){this.gameManager&&this.events&&(this.gameManager.config.client.message.listeners[l.KEY]=this.teamMessageListener,this.gameManager.config.client.message.listeners[l.CLAN_KEY]=this.clanMessageListener)}listenEvents(){this.events&&(this.events.on("reldens.createEngineSceneDone",e=>{let t=e.roomEvents;if(!t)return d.critical("RoomEvents undefined for process Team messages queue on TeamsPlugin.",e),!1;h.processClanMessagesQueue(t,this.clanMessageListener),h.processTeamMessagesQueue(t,this.teamMessageListener)}),this.events.on("reldens.preloadUiScene",e=>{c.preloadTemplates(e)}),this.events.on("reldens.gameEngineShowTarget",(e,t,i,r)=>{s.appendClanInviteButton(this.gameManager,t,i,r),s.appendTeamInviteButton(this.gameManager,t,i,r)}))}fetchTeamPlayerBySessionId(e){let t=this.gameManager.gameEngine.uiScene.currentTeam;if(!t)return!1;for(let i of Object.keys(t)){let r=t[i];if(r.sessionId===e)return r}return!1}}},{ff0cd3a039680b50:"9RjlI",bc896f1b30e26c8b:"2kCFV",b9e6a2d82debed5b:"8DD28",d88cac34aed27f09:"kIwKU","187e0a90a62f31a1":"gLnZK",a77183244ab38ca1:"8TXfd","817bd734dbf4f984":"eLG0L","5bd001817d1a1fe2":"ijd9L"}],"2kCFV":[function(e,t,i,r){let{TeamsConst:n}=e("813960296055cff0"),{GameConst:s}=e("26255ed26260a75a"),{Logger:a,sc:o}=e("603fc0fc02377d1b");t.exports.TargetBoxEnricher=class{static appendClanInviteButton(e,t,i,r){let n=e?.gameEngine?.uiScene?.currentClan;if(!n)return!1;if(!n.ownerId)return a.error("Current clan missing owner.",n),!1;if(this.playerBySessionId(n,t.id))return!1;let s=e.getCurrentPlayer();if(!this.targetIsValidPlayer(t,s))return!1;let o=e.config.getWithoutLogs("client/clan/general/openInvites",!1);return(e.playerData.id.toString()===n.ownerId.toString()||!!o)&&this.appendInviteButton("clan",t,e,r)}static appendTeamInviteButton(e,t,i,r){return!(!this.targetIsValidPlayer(t,e.getCurrentPlayer())||e.getFeature("teams").fetchTeamPlayerBySessionId(t.id))&&this.appendInviteButton("team",t,e,r)}static appendInviteButton(e,t,i,r){let s=i.gameEngine.uiScene;if(!1===o.get(s,"uiTarget",!1))return a.critical('Missing "uiTarget" on uiScene.'),!1;let h=s.cache.html.get(e+"PlayerInvite");if(!h)return a.critical('Template "'+e+'PlayerInvite" not found.'),!1;i.gameDom.appendToElement("#target-container",i.gameEngine.parseTemplate(h,{playerName:r,playerId:t.player_id,inviteLabel:i.config.getWithoutLogs(e+"/labels/inviteLabel",n.LABELS[e.toUpperCase()].INVITE_BUTTON_LABEL)}));let c=i.gameDom.getElement("."+e+"-invite-"+t.player_id+" button");c?.addEventListener("click",()=>{let r={act:n.ACTIONS[e.toUpperCase()+"_INVITE"],id:t.player_id};i.activeRoomEvents.send(r),c.style.display="none",i.gameEngine.clearTarget()})}static targetIsValidPlayer(e,t){return s.TYPE_PLAYER===e.type&&t.playerId!==e.id}static playerBySessionId(e,t){let i=Object.keys(e.players);if(0===i.length)return!1;for(let r of i)if(e.players[r].sessionId===t)return e.players[r];return!1}}},{"813960296055cff0":"eLG0L","26255ed26260a75a":"z0nmL","603fc0fc02377d1b":"ijd9L"}],eLG0L:[function(e,t,i,r){let n="cln.";t.exports.TeamsConst={KEY:"teams",CLAN_KEY:"clan",TEAM_PREF:"tm.",CLAN_PREF:n,NAME_LIMIT:50,CLAN_STARTING_POINTS:1,VALIDATION:{SUCCESS:1,NAME_EXISTS:2,LEVEL_ISSUE:3,CREATE_ERROR:4,CREATE_OWNER_ERROR:5},ACTIONS:{TEAM_INVITE:"tm.inv",TEAM_ACCEPTED:"tm.acp",TEAM_LEAVE:"tm.lev",TEAM_UPDATE:"tm.upd",TEAM_LEFT:"tm.lef",TEAM_REMOVE:"tm.rem",CLAN_INITIALIZE:n+"ini",CLAN_CREATE:n+"new",CLAN_INVITE:n+"inv",CLAN_ACCEPTED:n+"acp",CLAN_LEAVE:n+"lev",CLAN_UPDATE:n+"upd",CLAN_LEFT:n+"lef",CLAN_REMOVE:n+"rem",CLAN_REMOVED:n+"remd",CLAN_NAME:n+"nam"},LABELS:{TEAM:{INVITE_BUTTON_LABEL:"Team - Invite",REQUEST_FROM:"Accept team request from:",LEADER_NAME_TITLE:"Team leader: %leaderName",DISBAND:"Disband Team",LEAVE:"Leave Team",PROPERTY_MAX_VALUE:"/ %propertyMaxValue"},CLAN:{CREATE_CLAN_TITLE:"Clan - Creation",INVITE_BUTTON_LABEL:"Clan - Invite",REQUEST_FROM:"Accept clan request from:",CLAN_TITLE:"Clan: %clanName - Leader: %leaderName",NAME_PLACEHOLDER:"Choose a clan name...",CREATE:"Create",DISBAND:"Disband Clan",LEAVE:"Leave Clan",PROPERTY_MAX_VALUE:"/ %propertyMaxValue",PLAYERS_TITLE:"Connected Players:",MEMBERS_TITLE:"Clan Members:",NONE_CONNECTED:"None"}},CHAT:{MESSAGE:{INVITE_ACCEPTED:"%playerName has accepted your invitation.",INVITE_REJECTED:"%playerName has rejected your invitation.",DISBANDED:"%playerName has disbanded the %groupName.",LEFT:"You left the %groupName.",LEAVE:"%playerName has left the %groupName.",REMOVED:"%playerName has been removed from the %groupName.",ENTER:"%playerName has enter the %groupName.",NOT_ENOUGH_PLAYERS:"The team was disbanded due to a lack of players."}}}},{}],"8DD28":[function(e,t,i,r){let{TeamMessageHandler:n}=e("6d14aca88eebc089"),{TeamsConst:s}=e("2253975335b3fdcf"),{Logger:a,sc:o}=e("d3f666b286aee6e5");t.exports.TeamMessageListener=class{async executeClientMessageActions(e){let t=o.get(e,"message",!1);if(!t)return a.error("Missing message data on TeamMessageListener.",e),!1;let i=o.get(e,"roomEvents",!1);if(!i)return a.error("Missing RoomEvents on TeamMessageListener.",e),!1;let r=new n({roomEvents:i,message:t});return r.validate()?!!this.isTeamMessage(t)&&this.handleTeamMessage(t,r):(this.isTeamMessage(t)&&(i.teamMessagesQueue||(i.teamMessagesQueue=[]),i.teamMessagesQueue.push(t)),a.error("Invalid TeamMessageHandler",r),!1)}handleTeamMessage(e,t){return s.ACTIONS.TEAM_INVITE===e.act?t.showTeamRequest():s.ACTIONS.TEAM_UPDATE===e.act?t.showTeamBox():s.ACTIONS.TEAM_LEFT!==e.act||t.removeTeamUi()}isTeamMessage(e){return 0===e.act?.indexOf(s.TEAM_PREF)}}},{"6d14aca88eebc089":"3cpG0","2253975335b3fdcf":"eLG0L",d3f666b286aee6e5:"ijd9L"}],"3cpG0":[function(e,t,i,r){let{UserInterface:n}=e("640ee5228c27b39"),{TeamsConst:s}=e("e52de429595682ab"),{Logger:a,sc:o}=e("3da1dc36372a33e1");t.exports.TeamMessageHandler=class{constructor(e){this.roomEvents=o.get(e,"roomEvents",!1),this.message=o.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.uiScene=this.gameManager?.gameEngine?.uiScene}validate(){return this.roomEvents?this.message?this.gameManager?this.uiScene:(a.info("Missing GameManager on TeamMessageHandler."),!1):(a.info("Missing message on TeamMessageHandler."),!1):(a.info("Missing RoomEvents on TeamMessageHandler."),!1)}showTeamRequest(){this.createTeamUi(this.teamUiKey()),this.roomEvents.initUi({id:this.teamUiKey(),title:this.gameManager.config.getWithoutLogs("client/team/labels/requestFromTitle",s.LABELS.TEAM.REQUEST_FROM),content:this.message.from,options:this.gameManager.config.get("client/ui/options/acceptOrDecline"),overrideSendOptions:{act:s.ACTIONS.TEAM_ACCEPTED,id:this.message.id}}),this.gameDom.getElement("#opt-1-"+this.teamUiKey())?.addEventListener("click",()=>{this.gameDom.removeElement(".team-invite")}),this.gameDom.getElement("#opt-2-"+this.teamUiKey())?.addEventListener("click",()=>{this.removeTeamUi()})}removeTeamUi(){let e=this.gameManager.getUiElement(this.teamUiKey());if(!e)return a.error('UI Element not found by team UI key "'+this.teamUiKey()+'".'),!1;e.removeElement(),delete this.uiScene.userInterfaces[this.teamUiKey()],delete this.uiScene.elementsUi[this.teamUiKey()],this.uiScene.currentTeam=!1}teamUiKey(){return s.KEY+this.message.id}showTeamBox(){let e=this.teamUiKey();this.createTeamUi(e);let t=this.gameManager.config.getWithoutLogs("client/team/labels/leaderNameTitle",s.LABELS.TEAM.LEADER_NAME_TITLE).replace("%leaderName",this.message.leaderName),i=this.gameManager.gameDom.getElement("#box-"+e+" .box-content");if(!i)return a.error('Missing container: "#box-'+e+' .box-content".'),!1;let r=this.uiScene.elementsUi[e];this.roomEvents.uiSetTitle(r,{title:t}),this.roomEvents.uiSetContent(r,{content:""},this.uiScene);let n=o.get(this.message,"players",!1);this.uiScene.currentTeam=n,this.updateTeamBox(n,i)}createTeamUi(e){let t=o.get(this.uiScene.userInterfaces,e);return t||(this.uiScene.userInterfaces||(this.uiScene.userInterfaces={}),this.uiScene.userInterfaces[e]=new n(this.gameManager,{id:e,type:s.KEY,defaultOpen:!0,defaultClose:!0},"/assets/features/teams/templates/ui-teams.html",s.KEY),this.uiScene.userInterfaces[e].createUiElement(this.uiScene,s.KEY),this.uiScene.userInterfaces[e])}updateTeamBox(e,t){if(!e)return void a.error("Players not defined.",e);let i="";for(let t of Object.keys(e))i+=this.createTeamMemberBox(e[t]);t.innerHTML=this.createTeamContainer(i),this.activateTeamPlayerActions(e),this.activateTeamLeaveButtonAction()}createTeamContainer(e){let t=this.uiScene.cache.html.get("teamContainer");if(!t)return a.error('Missing template "teamContainer".'),"";let i=this.gameManager.playerData.id.toString(),r=i===this.message.id.toString(),n="client/team/labels/",o=r?this.gameManager.config.getWithoutLogs(n+"disbandLabel",s.LABELS.TEAM.DISBAND):this.gameManager.config.getWithoutLogs(n+"leaveLabel",s.LABELS.TEAM.LEAVE),h={teamId:this.message.id,playerId:i,leaveActionLabel:o,teamMembers:e};return this.gameManager.gameEngine.parseTemplate(t,h)}activateTeamLeaveButtonAction(){let e=this.gameManager.gameDom.getElement(".leave-"+this.gameManager.playerData.id.toString());e?.addEventListener("click",()=>{this.roomEvents.send({act:s.ACTIONS.TEAM_LEAVE,id:this.message.id})})}createTeamMemberBox(e){let t=this.uiScene.cache.html.get("teamPlayerData");if(!t)return a.error('Missing template "teamPlayerData".'),"";let i=this.gameManager.playerData.id.toString()===this.message.id.toString();return this.gameManager.gameEngine.parseTemplate(t,{playerId:e.player_id,playerName:e.name,playerProperties:this.createSharedPropertiesContent(e.sharedProperties),playerRemove:i?this.createDismissPlayerButton(e):""})}createDismissPlayerButton(e){let t=this.uiScene.cache.html.get("teamRemove");return t?this.gameManager.gameEngine.parseTemplate(t,{playerId:e.player_id}):(a.error('Missing template "teamRemove".'),"")}createSharedPropertiesContent(e){let t=this.uiScene.cache.html.get("teamsSharedProperty");if(!t)return a.error('Missing template "teamsSharedProperty".'),"";let i="";for(let r of Object.keys(e)){t=this.uiScene.cache.html.get("teamsSharedProperty");let n=e[r],a=o.get(n,"max","");""!==a&&(a=this.gameManager.config.getWithoutLogs("client/team/labels/propertyMaxValue",s.LABELS.TEAM.PROPERTY_MAX_VALUE).replace("%propertyMaxValue",a)),i+=this.gameManager.gameEngine.parseTemplate(t,{key:r,label:n.label,value:n.value,max:a})}return i}activateTeamPlayerActions(e){for(let t of Object.keys(e)){let i=e[t],r=".team-player-"+i.player_id+" .player-name";this.gameDom.getElement(r)?.addEventListener("click",()=>{this.gameManager.getCurrentPlayer().setTargetPlayerById(i.sessionId)});let n=".team-player-"+i.player_id+" .properties-list-container";this.gameDom.getElement(n)?.addEventListener("click",()=>{this.gameManager.getCurrentPlayer().setTargetPlayerById(i.sessionId)});let a=".team-player-"+i.player_id+" .team-remove-button";this.gameDom.getElement(a)?.addEventListener("click",()=>{this.roomEvents.send({act:s.ACTIONS.TEAM_REMOVE,id:this.message.id,remove:i.player_id})})}}}},{"640ee5228c27b39":"azIQk",e52de429595682ab:"eLG0L","3da1dc36372a33e1":"ijd9L"}],kIwKU:[function(e,t,i,r){let{ClanMessageHandler:n}=e("ffee11c5f30da2da"),{TeamsConst:s}=e("80c3d53d947c2511"),{Logger:a,sc:o}=e("b7dc8fe4d702b1c7");t.exports.ClanMessageListener=class{async executeClientMessageActions(e){let t=o.get(e,"message",!1);if(!t)return a.error("Missing message data on ClanMessageListener.",e),!1;let i=o.get(e,"roomEvents",!1);if(!i)return a.error("Missing RoomEvents on ClanMessageListener.",e),!1;let r=new n({roomEvents:i,message:t});return r.validate()?!!this.isClanMessage(t)&&this.handleClanMessage(t,r):(this.isClanMessage(t)&&(i.clanMessagesQueue||(i.clanMessagesQueue=[]),i.clanMessagesQueue.push(t)),!1)}handleClanMessage(e,t){return s.ACTIONS.CLAN_INITIALIZE===e.act?t.initializeClanUi():s.ACTIONS.CLAN_CREATE===e.act?s.VALIDATION.SUCCESS===e.result?t.showNewClan():t.initializeClanUi():s.ACTIONS.CLAN_INVITE===e.act?t.showClanRequest():s.ACTIONS.CLAN_UPDATE===e.act?t.showClanBox():s.ACTIONS.CLAN_LEFT===e.act?t.removeClanUi():!s.ACTIONS.CLAN_REMOVED||(t.removeClanUi(),t.initializeClanUi())}isClanMessage(e){return 0===e.act?.indexOf(s.CLAN_PREF)}}},{ffee11c5f30da2da:"hMHWV","80c3d53d947c2511":"eLG0L",b7dc8fe4d702b1c7:"ijd9L"}],hMHWV:[function(e,t,i,r){let{UserInterface:n}=e("2dee0f2dc70de1b2"),{TeamsConst:s}=e("435f9309a487dcac"),{Logger:a,sc:o}=e("937cade469140286");t.exports.ClanMessageHandler=class{constructor(e){this.roomEvents=o.get(e,"roomEvents",!1),this.message=o.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.uiScene=this.gameManager?.gameEngine?.uiScene}validate(){return this.roomEvents?this.message?this.gameManager?!!this.uiScene&&this.gameManager.playerData?.id:(a.info("Missing GameManager on ClanMessageHandler."),!1):(a.info("Missing message on ClanMessageHandler."),!1):(a.info("Missing RoomEvents on ClanMessageHandler."),!1)}initializeClanUi(){this.uiScene.currentClan=!1;let e=this.createClanUi(),t=this.gameManager.config.getWithoutLogs("client/clan/labels/createClanTitle",s.LABELS.CLAN.CREATE_CLAN_TITLE),i=this.gameManager.gameDom.getElement(".clan-dialog-box .box-content");if(!i)return a.error('Missing container: "#box-clan .box-content".'),!1;let r=this.uiScene.elementsUi[s.CLAN_KEY];if(!r)return a.error("Clan UI box not found.",{clanUi:e,container:i,uiBox:r}),!1;this.roomEvents.uiSetTitle(r,{title:t}),this.roomEvents.uiSetContent(r,{content:this.createClanContent()},this.uiScene),this.activateCreateButton(),this.addAndRemoveCaptureKeys()}showNewClan(){let e=this.createClanUi(),t=this.gameManager.config.getWithoutLogs("client/clan/labels/clanTitle",s.LABELS.CLAN.CLAN_TITLE).replace("%clanName",this.message.clanName).replace("%leaderName",this.gameManager.currentPlayerName()),i=this.gameManager.gameDom.getElement(".clan-dialog-box .box-content");if(!i)return a.error('Missing container: ".clan-dialog-box .box-content".'),!1;let r=this.uiScene.elementsUi[s.CLAN_KEY];if(!r)return a.error("Clan UI box not found.",{clanUi:e,container:i,uiBox:r}),!1;this.roomEvents.uiSetTitle(r,{title:t}),this.roomEvents.uiSetContent(r,{content:""},this.uiScene),this.updateClanBox(i),this.setClanFromMessage()}showClanRequest(){this.createClanUi(),this.roomEvents.initUi({id:s.CLAN_KEY,title:this.gameManager.config.getWithoutLogs("client/clan/labels/requestFromTitle",s.LABELS.CLAN.REQUEST_FROM),content:this.message.from,options:this.gameManager.config.get("client/ui/options/acceptOrDecline"),overrideSendOptions:{act:s.ACTIONS.CLAN_ACCEPTED,id:this.message.id}}),this.gameDom.getElement("#opt-2-clan")?.addEventListener("click",()=>{this.initializeClanUi()})}showClanBox(){this.createClanUi();let e=this.gameManager.config.getWithoutLogs("client/clan/labels/clanTitle",s.LABELS.CLAN.CLAN_TITLE).replace("%clanName",this.message.clanName).replace("%leaderName",this.message.leaderName),t=this.gameManager.gameDom.getElement("#box-clan .box-content");if(!t)return a.error('Missing container: "#box-clan .box-content".'),!1;let i=this.uiScene.elementsUi[s.CLAN_KEY];this.roomEvents.uiSetTitle(i,{title:e}),this.roomEvents.uiSetContent(i,{content:""},this.uiScene),this.setClanFromMessage(),this.updateClanBox(t)}setClanFromMessage(){let e=o.get(this.message,"players",!1),t=o.get(this.message,"members",!1);this.uiScene.currentClan={id:this.message.id,name:this.message.clanName,leader:this.message.leaderName,ownerId:this.message.ownerId,players:e,members:t}}removeClanUi(){let e=this.gameManager.getUiElement(s.CLAN_KEY);if(!e)return a.error("Clan UI Element not found for remove."),!1;e.removeElement(),delete this.uiScene.userInterfaces[s.CLAN_KEY],delete this.uiScene.elementsUi[s.CLAN_KEY]}createClanUi(){let e=o.get(this.uiScene.userInterfaces,s.CLAN_KEY);return e||(this.uiScene.userInterfaces||(this.uiScene.userInterfaces={}),this.uiScene.userInterfaces[s.CLAN_KEY]=new n(this.gameManager,{id:s.CLAN_KEY,type:s.CLAN_KEY,defaultOpen:!0,defaultClose:!0},"/assets/features/teams/templates/ui-clan.html",s.CLAN_KEY),this.uiScene.userInterfaces[s.CLAN_KEY].createUiElement(this.uiScene,s.CLAN_KEY),this.uiScene.userInterfaces[s.CLAN_KEY])}createClanContent(){let e=this.uiScene.cache.html.get("clanCreate");if(!e)return a.error('Missing template "clanCreate".'),"";let t={playerId:this.gameManager.playerData.id.toString(),createLabel:this.gameManager.config.getWithoutLogs("client/clan/labels/createLabel",s.LABELS.CLAN.CREATE),clanNamePlaceholder:this.gameManager.config.getWithoutLogs("client/clan/labels/namePlaceholder",s.LABELS.CLAN.NAME_PLACEHOLDER)};return this.gameManager.gameEngine.parseTemplate(e,t)}activateCreateButton(){let e=this.gameManager.gameDom.getElement(".clan-dialog-box .submit-clan-create");if(!e)return a.warning('Clan create button not found by ".clan-dialog-box .clan-create".'),!1;let t=this.gameManager.gameDom.getElement(".clan-dialog-box .clan-name-input");if(!t)return a.warning('Clan create button not found by ".clan-dialog-box .clan-name-input".'),!1;e.addEventListener("click",()=>{if(0===t.value.length)return!1;this.gameManager.gameDom.updateContent(".clan-dialog-box .box-content",this.uiScene.cache.html.get("uiLoading")),this.gameManager.activeRoomEvents.send({act:s.ACTIONS.CLAN_CREATE,[s.ACTIONS.CLAN_NAME]:t.value})})}updateClanBox(e){let t=o.get(this.message,"players",[]),i=Object.keys(t),r=0===i.length?this.gameManager.config.getWithoutLogs("client/clan/labels/noneConnected",s.LABELS.CLAN.NONE_CONNECTED):"";for(let e of i)r+=this.createClanPlayerBox(t[e]);let n=this.gameManager.playerData.id.toString()===this.message.ownerId.toString(),a=o.get(this.message,"members",[]),h="";for(let e of Object.keys(a))h+=this.createClanMemberBox(a[e],n);e.innerHTML=this.createClanContainer(r,h),this.activateClanPlayersActions(t),this.activateClanMembersActions(a),this.activateClanLeaveButtonAction()}addAndRemoveCaptureKeys(){let e=this.gameManager.getActiveScene(),t=e.availableControllersKeyCodes(),i=this.gameManager.gameDom.getElement(".clan-name-input");e.addAndRemoveCapture(t,i)}createClanContainer(e,t){let i=this.uiScene.cache.html.get("clanContainer");if(!i)return a.error('Missing template "clanContainer".'),"";let r=this.gameManager.playerData.id.toString()===this.message.ownerId.toString()?this.gameManager.config.getWithoutLogs("client/clan/labels/disbandLabel",s.LABELS.CLAN.DISBAND):this.gameManager.config.getWithoutLogs("client/clan/labels/leaveLabel",s.LABELS.CLAN.LEAVE),n={clanId:this.message.id,playerId:this.gameManager.playerData.id.toString(),leaveActionLabel:r,clanPlayersTitle:this.gameManager.config.getWithoutLogs("client/clan/labels/clanPlayersTitle",s.LABELS.CLAN.PLAYERS_TITLE),clanPlayers:e,clanMembersTitle:this.gameManager.config.getWithoutLogs("client/clan/labels/clanMembersTitle",s.LABELS.CLAN.MEMBERS_TITLE),clanMembers:t};return this.gameManager.gameEngine.parseTemplate(i,n)}activateClanLeaveButtonAction(){let e=this.gameManager.gameDom.getElement(".leave-"+this.message.id);e?.addEventListener("click",()=>{let e={act:s.ACTIONS.CLAN_LEAVE,id:this.message.id};this.gameManager.activeRoomEvents.send(e)})}createClanPlayerBox(e){let t=this.uiScene.cache.html.get("clanPlayerData");return t?this.gameManager.gameEngine.parseTemplate(t,{playerId:e.player_id,playerName:e.name,playerProperties:this.createSharedPropertiesContent(e.sharedProperties)}):(a.error('Missing template "clanPlayerData".'),"")}createClanMemberBox(e,t){let i=this.uiScene.cache.html.get("clanMemberData");if(!i)return a.error('Missing template "clanMemberData".'),"";let r=e.id.toString()!==this.message.ownerId.toString();return this.gameManager.gameEngine.parseTemplate(i,{playerId:e.id.toString(),playerName:e.name,clanRemove:t&&r?this.createDismissPlayerButton(e):""})}createDismissPlayerButton(e){let t=this.uiScene.cache.html.get("clanRemove");return t?this.gameManager.gameEngine.parseTemplate(t,{playerId:e.id.toString()}):(a.error('Missing template "clanRemove".'),"")}createSharedPropertiesContent(e){let t=this.uiScene.cache.html.get("teamsSharedProperty");if(!t)return a.error('Missing template "teamsSharedProperty".'),"";let i="";for(let r of Object.keys(e)){t=this.uiScene.cache.html.get("teamsSharedProperty");let n=e[r],a=o.get(n,"max","");""!==a&&(a=this.gameManager.config.getWithoutLogs("client/clan/labels/propertyMaxValue",s.LABELS.CLAN.PROPERTY_MAX_VALUE).replace("%propertyMaxValue",a)),i+=this.gameManager.gameEngine.parseTemplate(t,{key:r,label:n.label,value:n.value,max:a})}return i}activateClanPlayersActions(e){for(let t of Object.keys(e)){let i=e[t],r=".clan-player-"+t+" .player-name",n=".clan-player-"+t+" .properties-list-container",s=this.gameDom.getElement(r);s||a.notice("Player name element not found.",r),s?.addEventListener("click",()=>{this.gameManager.getCurrentPlayer().setTargetPlayerById(i.sessionId)});let o=this.gameDom.getElement(n);s||a.notice("Player properties element not found.",n),o?.addEventListener("click",()=>{this.gameManager.getCurrentPlayer().setTargetPlayerById(i.sessionId)})}}activateClanMembersActions(e){for(let t of Object.keys(e)){let i=e[t],r=".clan-member-"+i.id+" .clan-remove-button";this.gameDom.getElement(r)?.addEventListener("click",()=>{this.gameManager.activeRoomEvents.send({act:s.ACTIONS.CLAN_REMOVE,id:this.message.id,remove:i.id})})}}}},{"2dee0f2dc70de1b2":"azIQk","435f9309a487dcac":"eLG0L","937cade469140286":"ijd9L"}],gLnZK:[function(e,t,i,r){let{ClanMessageHandler:n}=e("b6102a2bc5547886"),{TeamMessageHandler:s}=e("8b82527a10949305"),{sc:a}=e("600e9765de53cf98");t.exports.MessageProcessor=class{static processClanMessagesQueue(e,t){if(a.isArray(e.clanMessagesQueue)&&0!==e.clanMessagesQueue.length){for(let i of e.clanMessagesQueue)t.handleClanMessage(i,new n({roomEvents:e,message:i}));e.clanMessagesQueue=[]}}static processTeamMessagesQueue(e,t){if(a.isArray(e.teamMessagesQueue)&&0!==e.teamMessagesQueue.length){for(let i of e.teamMessagesQueue)t.handleTeamMessage(i,new s({roomEvents:e,message:i}));e.teamMessagesQueue=[]}}}},{b6102a2bc5547886:"hMHWV","8b82527a10949305":"3cpG0","600e9765de53cf98":"ijd9L"}],"8TXfd":[function(e,t,i,r){let{TeamsConst:n}=e("7ae425e7585f8b77");t.exports.TemplatesHandler=class{static preloadTemplates(e){let t="/assets/features/teams/templates/";e.load.html(n.KEY,t+"ui-teams.html"),e.load.html(n.CLAN_KEY,t+"ui-clan.html"),e.load.html("teamPlayerInvite",t+"team-invite.html"),e.load.html("teamPlayerAccept",t+"team-accept.html"),e.load.html("teamRemove",t+"team-remove.html"),e.load.html("teamContainer",t+"team-container.html"),e.load.html("teamPlayerData",t+"team-player-data.html"),e.load.html("clanCreate",t+"clan-create.html"),e.load.html("clanPlayerInvite",t+"clan-invite.html"),e.load.html("clanPlayerAccept",t+"clan-accept.html"),e.load.html("clanRemove",t+"clan-remove.html"),e.load.html("clanContainer",t+"clan-container.html"),e.load.html("clanPlayerData",t+"clan-player-data.html"),e.load.html("clanMemberData",t+"clan-member-data.html"),e.load.html("teamsSharedProperty",t+"shared-property.html")}}},{"7ae425e7585f8b77":"eLG0L"}],bYrQj:[function(e,t,i,r){let{Translator:n}=e("c0b37a63a164ee2"),{SnippetsUi:s}=e("248d3f3dadbe8854"),{TemplatesHandler:a}=e("1f76a945ba4ca26b"),{TranslationsMapper:o}=e("9f2145cb2c70fb80"),h=e("3cdaeb7ca281fdbe"),{SnippetsConst:c}=e("12b107607eac2374"),{PluginInterface:l}=e("b68fb0c66be53b"),{Logger:d,sc:u}=e("b6c13c4a8fae8965");t.exports.SnippetsPlugin=class extends l{async setup(e){return(this.gameManager=u.get(e,"gameManager",!1),this.gameManager)?(this.events=u.get(e,"events",!1),this.events||d.error("EventsManager undefined in InventoryPlugin."),o.forConfig(this.gameManager.config.client,h),this.activeLocale=this.gameManager.initialGameData?.userLocale?.locale.locale||c.DEFAULT_LOCALE,this.gameManager.services.translator=new n({snippets:Object.assign({},this.gameManager.config.client.snippets),dataValues:Object.assign({},this.gameManager.config.client.snippetsDataValues),locale:c.DEFAULT_LOCALE,activeLocale:this.activeLocale}),this.listenEvents()):(d.error("Game Manager undefined in InventoryPlugin."),!1)}listenEvents(){return!!this.events&&(this.events.on("reldens.startEngineScene",async(e,t,i,r)=>{this.gameManager.services.translator.snippets=Object.assign(this.gameManager.services.translator.snippets,this.gameManager.config.client.snippets)}),this.events.on("reldens.preloadUiScene",e=>{a.preloadTemplates(e)}),this.events.on("reldens.createUiScene",e=>{this.uiManager=new s(e),this.uiManager.createUi()}),!0)}}},{c0b37a63a164ee2:"h9tvD","248d3f3dadbe8854":"bVeyo","1f76a945ba4ca26b":"cfDMK","9f2145cb2c70fb80":"62bet","3cdaeb7ca281fdbe":"bVY5Q","12b107607eac2374":"af6n1",b68fb0c66be53b:"9RjlI",b6c13c4a8fae8965:"ijd9L"}],h9tvD:[function(e,t,i,r){let{SnippetsConst:n}=e("f53f6da57661aae5"),{sc:s}=e("ca9a001439841d68");t.exports.Translator=class{constructor(e){this.snippets=s.get(e,"snippets",{}),this.dataValues=s.get(e,"dataValues",{}),this.locale=s.get(e,"locale",n.DEFAULT_LOCALE),this.activeLocale=s.get(e,"activeLocale",n.DEFAULT_LOCALE)}translate(e,t={},i=!1){i||(i=this.activeLocale);let r=s.get(this.snippets[i],e,e);if(e===r)return e;if(!s.isObject(t))return r;let n=Object.keys(t);if(0===n.length)return r;let a=this.snippetNameSpace(e);for(let e of n){let i=t[e],n="%"+((this.dataValues[a]||{})[e]||e);for(;-1!==r.indexOf(n);)r=r.replace(n,i)}return r}snippetNameSpace(e){let t=e.split(".");return 1===t.length?n.DATA_VALUES_DEFAULT_NAMESPACE:t[0]}t(e,t={},i=!1){return this.translate(e,t,i)}}},{f53f6da57661aae5:"af6n1",ca9a001439841d68:"ijd9L"}],bVeyo:[function(e,t,i,r){let{SnippetsConst:n}=e("9095968e9689ed1b"),{Logger:s,sc:a}=e("4383b901c356e103");t.exports.SnippetsUi=class{constructor(e){this.uiScene=e,this.gameManager=this.uiScene.gameManager,this.translator=this.gameManager.services.translator,this.locales={}}createUi(){this.locales=a.get(this.gameManager.config.client,"locales",{});let e=Object.keys(this.locales);if(1>=e.length)return!1;let t=this.gameManager.gameEngine.parseTemplate(this.uiScene.cache.html.get(n.KEY),{snippetsTitle:this.translator.t("translator.title"),snippetsLabel:this.translator.t("translator.label"),snippetsNotification:this.translator.t("translator.notification")});if(!this.gameManager.gameDom.appendToElement("#settings-dynamic",t))return s.warning("Could not append snippets settings."),!1;let i=this.gameManager.gameDom.getElement(".snippets-setting");if(!i)return s.warning("Snippets settings container not available."),!1;for(let t of e){let e=this.locales[t],r=this.gameManager.gameDom.createElement("option");r.value=e.id,r.innerHTML=e.country_code,i.appendChild(r)}return i.addEventListener("change",async()=>{this.gameManager.activeRoomEvents.send({act:n.ACTIONS.UPDATE,up:i.value})}),!0}}},{"9095968e9689ed1b":"af6n1","4383b901c356e103":"ijd9L"}],cfDMK:[function(e,t,i,r){let{SnippetsConst:n}=e("da1bec0d581b3bb0");t.exports.TemplatesHandler=class{static preloadTemplates(e){e.load.html(n.KEY,"/assets/features/snippets/templates/ui-snippets.html")}}},{da1bec0d581b3bb0:"af6n1"}],bVY5Q:[function(e,t,i,r){t.exports={translator:{title:"Languages Settings",label:"Choose your language:",notification:"Changes will take place after next login."}}},{}],"3TJog":[function(e,t,i,r){let{MessagesListener:n}=e("85a323b712a32599"),{SdkHandler:s}=e("1313cc258c10bcc1"),{ProvidersList:a}=e("939d602a1b11a3bf"),o=e("e0bd7042f0c03284"),{TranslationsMapper:h}=e("ae904a587e959599"),{AdsConst:c}=e("b33cf15ea82be794"),{PluginInterface:l}=e("9d441f820e5e636d"),{Logger:d,sc:u}=e("d2d2d55e6ca71f4b");t.exports.AdsPlugin=class extends l{setup(e){this.gameManager=u.get(e,"gameManager",!1),this.gameManager||d.error("Game Manager undefined in AdsPlugin."),this.events=u.get(e,"events",!1),this.events||d.error("EventsManager undefined in AdsPlugin."),this.config={},this.activeProviders={},this.playedAds=null,this.setConfig(),this.setSkdHandler(),this.fetchActiveProviders(),this.setTranslations(),this.listenEvents()}setConfig(){this.config=!!this.gameManager&&this.gameManager.config.get("client/ads/general",{})}setSkdHandler(){let e=this.gameManager?.gameDom;this.sdkHandler=!!e&&new s({gameDom:e,config:this.config})}fetchActiveProviders(){let e=u.get(this.config,"providers",{}),t=Object.keys(e);if(0===t.length)return!1;for(let i of t){let t=e[i];t.enabled&&(t.classDefinition=u.get(a,i,!1),this.activeProviders[i]=t)}}setTranslations(){if(!this.gameManager)return!1;h.forConfig(this.gameManager.config.client,o,c.MESSAGE.DATA_VALUES)}listenEvents(){if(!this.events||!this.gameManager||!this.sdkHandler)return d.error("Missing properties for AdsPlugin."),!1;this.events.on("reldens.beforeCreateEngine",async(e,t)=>{this.sdkHandler?await this.sdkHandler.setupProvidersSdk(this.activeProviders,t):d.info("Undefined SDK Handler.")}),this.events.on("reldens.joinedRoom",async e=>{await n.listenMessages(e,this)})}}},{"85a323b712a32599":"kIDdx","1313cc258c10bcc1":"1O55Q","939d602a1b11a3bf":"lKx9F",e0bd7042f0c03284:"8uifG",ae904a587e959599:"62bet",b33cf15ea82be794:"cm3M5","9d441f820e5e636d":"9RjlI",d2d2d55e6ca71f4b:"ijd9L"}],kIDdx:[function(e,t,i,r){let{AdsConst:n}=e("4348dc3fba513ca9"),{Logger:s}=e("c1c750da7e6bb927");t.exports.MessagesListener=class{static async listenMessages(e,t){e.onMessage("*",e=>{if(n.ACTIONS.ADS_PLAYED!==e.act)return!1;if(t.playedAds={},!e.playedAdsModels)return s.info("None played ads.",e),!1;for(let i of e.playedAdsModels)t.playedAds[i.ads_id]=i;return!0})}}},{"4348dc3fba513ca9":"cm3M5",c1c750da7e6bb927:"ijd9L"}],cm3M5:[function(e,t,i,r){t.exports.AdsConst={ENVIRONMENTS:{DISABLED:"disabled"},ADS_TYPES:{EVENT_VIDEO:"eventVideo",BANNER:"banner"},ACTIONS:{ADS_PLAYED:"adsP",AD_STARTED:"adS",AD_ENDED:"adE"},MESSAGE:{DATA_VALUES:{NAMESPACE:"ads"}},AWAIT_ADS_TIME:1e3,VIDEOS_MINIMUM_DURATION:3e3}},{}],"1O55Q":[function(e,t,i,r){let{Logger:n,sc:s}=e("e03372517c231481");t.exports.SdkHandler=class{constructor(e){this.gameDom=s.get(e,"gameDom",!1)}async setupProvidersSdk(e,t){if(!this.gameDom)return n.error("Undefined GameDOM on SdkHandler."),!1;if(!s.isObject(e))return!1;let i=Object.keys(e);if(0===i.length)return!1;for(let r of i){let i=e[r];await this.appendSdk(i),await this.activateSdkInstance(i,t),n.info("Activated Ads SDK: "+i.key,i)}}async appendSdk(e){let t=s.get(e,"sdkUrl","");if(""===t)return!1;let i=this.gameDom.getElement("body"),r=this.gameDom.createElement("script");return r.src=t,i.append(r),!0}async activateSdkInstance(e,t){e.classDefinition&&(e.service=new e.classDefinition(e,t,e.activeAds)),s.isFunction(e.service?.activate)&&await e.service.activate()}}},{e03372517c231481:"ijd9L"}],lKx9F:[function(e,t,i,r){let{CrazyGames:n}=e("e56ab7764646c7b3"),{GameMonetize:s}=e("1a058a436deb6e61"),{GoogleAdSense:a}=e("e8b34c41dab1ace");t.exports.ProvidersList={crazyGames:n,gameMonetize:s,googleAdSense:a}},{e56ab7764646c7b3:"dJB6F","1a058a436deb6e61":"aB49P",e8b34c41dab1ace:"Rg4T4"}],dJB6F:[function(e,t,i,r){let{BannersHandler:n}=e("f96686ce9c54877d"),{VideosHandler:s}=e("786a85289268fabd"),{AdsProvider:a}=e("25abe1dccff858a9"),{AdsConst:o}=e("9c8391f4374e1d6f"),{Logger:h}=e("ff1ebd8b8b8b16e6");t.exports.CrazyGames=class{constructor(e,t){this.gameManager=t,this.gameDom=t?.gameDom,this.events=t?.events,this.window=t?.gameDom?.getWindow(),this.metaData=e,this.sdk=this.window?.CrazyGames?.SDK,this.retry=0,this.environment=o.ENVIRONMENTS.DISABLED,this.metaData.sdkRetryTime||(this.metaData.sdkRetryTime=500),this.metaData.sdkMaxRetries||(this.metaData.sdkMaxRetries=10),this.metaData.sdkBannerRefreshTime||(this.metaData.sdkBannerRefreshTime=6e4),this.activeAds=this.fetchActiveAds(e);let i={gameManager:t,metaData:e,sdk:this.sdk,hasAdblock:this.hasAdblock,isEnabled:this.isEnabled};this.bannersHandler=new n(i),this.videosHandler=new s(i)}fetchActiveAds(e){return this.gameManager?.config?a.fetchActiveAdsByProviderId(e.id,this.validAdsTypes(),this.gameManager.config.get("client/ads/collection",{})):{}}validAdsTypes(){return[o.ADS_TYPES.BANNER,o.ADS_TYPES.EVENT_VIDEO]}async activate(){return this.sdk?(this.environment=await this.sdk.getEnvironment(),this.bannersHandler.sdk=this.sdk,this.videosHandler.sdk=this.sdk,!await this.hasAdblock()&&void await this.activateAds()):(this.retry===this.metaData.sdkMaxRetries?h.critical("CrazyGames required object."):this.retry<this.metaData.sdkMaxRetries&&setTimeout(()=>{this.retry++,h.info("CrazyGames required object, retry #"+this.retry+"."),this.sdk=this.window?.CrazyGames?.SDK,this.sdk&&h.info("CrazyGames object found."),this.activate()},this.metaData.sdkRetryTime),!1)}async hasAdblock(){try{let e=await this.sdk.ad.hasAdblock();return e&&h.critical("Adblock detected, please disable."),e}catch(e){h.info("SDK detected error.",e)}return!1}async isEnabled(){return o.ENVIRONMENTS.DISABLED!==await this.sdk.getEnvironment()}async activateAds(){let e=Object.keys(this.activeAds);if(0===e.length)return!1;for(let t of e){let e=this.activeAds[t];o.ADS_TYPES.BANNER===e.type.key&&await this.bannersHandler.activateAdBanner(e),o.ADS_TYPES.EVENT_VIDEO===e.type.key&&await this.videosHandler.activateAdVideo(e)}}}},{f96686ce9c54877d:"bE3uy","786a85289268fabd":"j9I9j","25abe1dccff858a9":"aIs5j","9c8391f4374e1d6f":"cm3M5",ff1ebd8b8b8b16e6:"ijd9L"}],bE3uy:[function(e,t,i,r){let{Validator:n}=e("3e58599d4b199bfe"),{Logger:s,sc:a}=e("16dda0dd59cf6195");t.exports.BannersHandler=class{constructor(e){this.gameManager=a.get(e,"gameManager",!1),this.metaData=a.get(e,"metaData",{}),this.gameDom=this.gameManager?.gameDom,this.events=this.gameManager?.events,this.sdk=a.get(e,"sdk",!1),this.hasAdblock=a.get(e,"hasAdblock",!1),this.isEnabled=a.get(e,"isEnabled",!1),this.activeBanners={},this.validator=new n}availableBanners(){return["728x90","300x250","320x50","468x60","320x100"]}availableResponsiveBanners(){return["970x90","320x50","160x600","336x280","728x90","300x600","468x60","970x250","300x250","250x250","120x600"]}validBannerSize(e){return -1!==this.availableBanners().indexOf(e)}validResponsiveBannerSize(e){return -1!==this.availableResponsiveBanners().indexOf(e)}async activateAdBanner(e){if(!e)return s.info("Missing activate ad.",e),!1;if(!this.validator.validate(this))return s.info("Invalid banner."),!1;let t=e.bannerData;if(!t)return s.info("No banner data."),!1;let i=a.get(t,"fullTime",!1),r=a.get(t,"responsive",!1);if(i)return await this.handleBannerType(r,e);let n=a.get(t,"uiReferenceIds",[]);if(0===n.length)return s.warning("Missing banner reference ID."),!1;this.events.on("reldens.openUI",async t=>{if(-1!==n.indexOf("ANY")||-1!==n.indexOf(t.openButton.id)){let i=e.id+"-"+t.openButton.id,n=new Date().getTime(),s=a.get(this.activeBanners,i,!1);if(s&&n<s.createdAt+this.metaData.sdkBannerRefreshTime)return void s.banner.classList.remove("hidden");s&&s.banner.remove();let o=await this.handleBannerType(r,e,i);this.activeBanners[i]={createdAt:n,banner:o}}}),this.events.on("reldens.closeUI",async t=>{let i=e.id+"-"+t.openButton.id,r=a.get(this.activeBanners,i,!1);r&&r.banner.classList.add("hidden")})}async handleBannerType(e,t,i){return e?this.createResponsiveBanner(t,i):await this.createBanner(t,i)}async createBanner(e,t){if(!this.validator.validate(this)||!await this.validator.canBeActivated(this))return!1;if(!this.isEnabled())return s.info("SDK not enabled."),!1;try{let i=a.get(e.styles,"width","300"),r=a.get(e.styles,"height","250");if(!this.validBannerSize(i+"x"+r))return s.info("CrazyGames - Invalid Banner size."),!1;let n=t||e.id;if(!n)return s.info("CrazyGames - Missing container ID.",e,t),!1;let o=this.gameDom.createElement("div","banner-container-"+n);this.gameDom.getElement("body")?.append(o),await this.isEnabled()&&await this.sdk.banner.requestBanner({id:o.id,width:i,height:r});let h=this.mapStylesWithValues(Object.assign({width:i,height:r},e));return this.gameDom.setElementStyles(o,h),o.classList.add("ads-banner-container"),o}catch(e){return s.critical("CrazyGames - Error on banner request.",e),!1}}mapStylesWithValues(e){let t={"z-index":2e8,width:a.get(e,"width",300),height:a.get(e,"height",250),position:""===a.get(e.styles,"position","")?e.position:"absolute"},i=a.get(e.styles,"top",null);null!==i&&(t.top=i);let r=a.get(e.styles,"bottom",null);null!==r&&(t.bottom=r);let n=a.get(e.styles,"left",null);null!==n&&(t.left=n);let s=a.get(e.styles,"right",null);return null!==s&&(t.right=s),t}async createResponsiveBanner(e,t){if(!this.validator.validate(this)||!await this.validator.canBeActivated(this))return!1;if(!this.isEnabled())return s.info("SDK not enabled."),!1;try{let i=t||e.id;if(!i)return s.info("CrazyGames - Missing container ID.",e,t),!1;let r=this.gameDom.createElement("div","responsive-banner-container-"+i),n=this.mapStylesWithValues(e);return delete n.width,delete n.height,this.gameDom.setElementStyles(r,n),this.gameDom.getElement("body").append(r),await this.isEnabled()&&await this.sdk.banner.requestResponsiveBanner(r.id),r.classList.add("ads-banner-container"),r}catch(e){return s.critical("CrazyGames - Error on banner request.",e),!1}}}},{"3e58599d4b199bfe":"cWmXK","16dda0dd59cf6195":"ijd9L"}],cWmXK:[function(e,t,i,r){let{Logger:n,sc:s}=e("11b40ed905e7acf1");t.exports.Validator=class{validate(e){return e.gameManager?e.sdk?(e.hasAdblock&&s.isFunction(e.hasAdblock)||n.warning("Missing or invalid hasAdblock function on Validator.",e),!!e.isEnabled&&!!s.isFunction(e.isEnabled)||(n.error("Missing or invalid isEnabled function on Validator.",e),!1)):(n.error("Missing SDK on Validator.",e),!1):(n.error("Missing Game Manager on Validator.",e),!1)}async canBeActivated(e){return!(!s.isFunction(e.hasAdblock)||await e.hasAdblock())||(n.info("AdBlocker detected."),!1)}}},{"11b40ed905e7acf1":"ijd9L"}],j9I9j:[function(e,t,i,r){let{Validator:n}=e("eb221c6f45d898b0"),{AdsConst:s}=e("ff99f7bef03d711b"),{Logger:a,sc:o}=e("111cbb28b14bd31b");t.exports.VideosHandler=class{constructor(e){this.gameManager=o.get(e,"gameManager",!1),this.gameDom=this.gameManager?.gameDom,this.events=this.gameManager?.events,this.sdk=o.get(e,"sdk",!1),this.hasAdblock=o.get(e,"hasAdblock",!1),this.isEnabled=o.get(e,"isEnabled",!1),this.validator=new n,this.isPlayingAd=!1,this.setConfig()}setConfig(){this.videoMinimumDuration=this.gameManager?this.gameManager.config.getWithoutLogs("client/ads/general/providers/crazyGames/videoMinimumDuration",s.VIDEOS_MINIMUM_DURATION):s.VIDEOS_MINIMUM_DURATION,this.awaitAdsTime=this.gameManager?this.gameManager.config.getWithoutLogs("client/ads/general/providers/crazyGames/awaitAdsTime",s.AWAIT_ADS_TIME):s.AWAIT_ADS_TIME}async activateAdVideo(e){let t=o.get(e,"eventKey",!1);if(!t)return a.warning("Missing event key.",e),!1;this.events.on(t,async t=>this.isPlayingAd?(a.info("CrazyGames - Another ad is been played."),!1):this.validator.validate(this)&&await this.validator.canBeActivated(this)?this.isEnabled()?await this.tryRePlay(e):(a.info("CrazyGames - SDK not enabled."),!1):(a.error("CrazyGames - Ad can not be activated."),!1))}async tryRePlay(e){let t=this.gameManager.getFeature("ads");if(null===t.playedAds)return setTimeout(()=>{this.tryRePlay(e)},this.awaitAdsTime),!1;if(o.get(t?.playedAds,e.id,!1)&&!e.replay)return a.info("Ad already played",e),!1;let i=o.get(e,"adStartedCallback",()=>{this.isPlayingAd=!0,a.info("CrazyGames - Ad-started callback.",new Date().getTime()),this.send({act:s.ACTIONS.AD_STARTED,ads_id:e.id})}),r=o.get(e,"adFinishedCallback",async()=>{this.isPlayingAd=!1,a.info("CrazyGames - Ad-finished callback.",new Date().getTime()),this.send({act:s.ACTIONS.AD_ENDED,ads_id:e.id}),await this.gameManager.audioManager.changeMuteState(!1,!1)}),n=o.get(e,"adErrorCallback",async t=>{this.isPlayingAd=!1,a.info("CrazyGames - Ad-error callback.",t,new Date().getTime()),this.send({act:s.ACTIONS.AD_ENDED,ads_id:e.id,error:t}),await this.gameManager.audioManager.changeMuteState(!1,!1)}),h=o.get(e,"rewardItemKey",!1);await this.gameManager.audioManager.changeMuteState(!0,!0),await this.sdk.ad.requestAd(h?"rewarded":"midgame",{adStarted:i,adFinished:r,adError:n})}send(e){let t=this.gameManager?.activeRoomEvents;return t?t?.send(e):(a.warning("CrazyGames - RoomEvents undefined to send an Ad Video message."),!1)}}},{eb221c6f45d898b0:"cWmXK",ff99f7bef03d711b:"cm3M5","111cbb28b14bd31b":"ijd9L"}],aIs5j:[function(e,t,i,r){let{Logger:n}=e("55d686c62dfd5353");t.exports.AdsProvider=class{static fetchActiveAdsByProviderId(e,t,i){if(!e)return{};let r=Object.keys(i);if(0===r.length)return{};let s={};for(let a of r){let r=i[a];if(e===r.provider.id){if(!r.enabled){n.info("Ad not enabled.",r);continue}if(-1===t.indexOf(r.type.key)){n.info("Invalid ad type.",r);continue}s[a]=r}}return n.info({providerId:e,activeProviderAds:s}),s}}},{"55d686c62dfd5353":"ijd9L"}],aB49P:[function(e,t,i,r){let{AdsProvider:n}=e("f98142cce04e846c"),{AdsConst:s}=e("44a48259b87a5721"),{Logger:a,sc:o}=e("b637051a2a3ead94");t.exports.GameMonetize=class{constructor(e,t){this.gameManager=t,this.gameDom=t?.gameDom,this.events=t?.events,this.window=t?.gameDom?.getWindow(),this.metaData=e,this.setSdkOptions(),this.sdk=this.window?.sdk,this.retry=0,this.isPlayingAd=!1,this.environment=s.ENVIRONMENTS.DISABLED,this.metaData.sdkRetryTime||(this.metaData.sdkRetryTime=500),this.metaData.sdkMaxRetries||(this.metaData.sdkMaxRetries=10),this.activeAds=this.fetchActiveAds(e),this.activeAdBeenPlayed=!1,this.setConfig()}fetchActiveAds(e){return this.gameManager?.config?n.fetchActiveAdsByProviderId(e.id,this.validAdsTypes(),this.gameManager.config.get("client/ads/collection",{})):{}}eventKeys(){return{sdkAdStarted:"CONTENT_PAUSE_REQUESTED",sdkAdEnded:"SDK_GAME_START",sdkReady:"SDK_READY"}}setSdkOptions(){return!!this.gameDom&&(this.metaData.gameId?void(this.gameDom.getWindow().SDK_OPTIONS={gameId:this.metaData.gameId,onEvent:async e=>{switch(a.info("GameMonetize - SDK event fired: "+e.name),e.name){case this.eventKeys().sdkAdStarted:await this.adStartedCallback(e);break;case this.eventKeys().sdkAdEnded:await this.adEndedCallback(e);break;case this.eventKeys().sdkReady:await this.sdkReadyCallback(e)}}}):(a.error("GameMonetize - Game ID undefined."),!1))}setConfig(){this.videoMinimumDuration=this.gameManager?this.gameManager.config.getWithoutLogs("client/ads/general/providers/gameMonetize/videoMinimumDuration",s.VIDEOS_MINIMUM_DURATION):s.VIDEOS_MINIMUM_DURATION,this.awaitAdsTime=this.gameManager?this.gameManager.config.getWithoutLogs("client/ads/general/providers/gameMonetize/awaitAdsTime",s.AWAIT_ADS_TIME):s.AWAIT_ADS_TIME}validAdsTypes(){return[s.ADS_TYPES.EVENT_VIDEO]}async adStartedCallback(e){if(this.isPlayingAd=!0,await this.gameManager.audioManager.changeMuteState(!0,!0),!this.activeAdBeenPlayed)return a.info("AdStartedCallback undefined activeAd.",e,this.activeAdBeenPlayed),!1;a.info("GameMonetize - Ad-started callback.",new Date().getTime()),this.send({act:s.ACTIONS.AD_STARTED,ads_id:this.activeAdBeenPlayed.id})}async adEndedCallback(e){if(this.isPlayingAd=!1,await this.gameManager.audioManager.changeMuteState(!1,!1),!this.activeAdBeenPlayed)return a.info("AdEndedCallback undefined activeAd.",e,this.activeAdBeenPlayed),!1;a.info("GameMonetize - Ad-finished callback.",new Date().getTime()),this.send({act:s.ACTIONS.AD_ENDED,ads_id:this.activeAdBeenPlayed.id})}async sdkReadyCallback(e){this.sdk=this.window.sdk}async activate(){if(!this.sdk)return this.retry===this.metaData.sdkMaxRetries?a.critical("GameMonetize required object."):this.retry<this.metaData.sdkMaxRetries&&setTimeout(()=>{this.retry++,a.info("GameMonetize required object, retry #"+this.retry+"."),this.sdk=this.window?.sdk,this.sdk&&a.info("GameMonetize object found."),this.activate()},this.metaData.sdkRetryTime),!1;await this.activateAds()}async activateAds(){let e=Object.keys(this.activeAds);if(0===e.length)return a.info("None active ads."),!1;for(let t of e){let e=this.activeAds[t];if(s.ADS_TYPES.EVENT_VIDEO!==e.type.key)continue;let i=o.get(e,"eventKey",!1);if(!i)return a.warning("Missing event key.",e),!1;this.events.on(i,async t=>(a.info("GameMonetize - Video event fired, playing ad.",t,e),this.isPlayingAd)?(a.info("GameMonetize - Ad is been played."),!1):await this.tryRePlay(e))}}async tryRePlay(e){return null===this.gameManager.getFeature("ads").playedAds?(setTimeout(()=>{this.tryRePlay(e)},this.awaitAdsTime),!1):(this.activeAdBeenPlayed=e,o.isObjectFunction(this.sdk,"showBanner"))?void await this.sdk.showBanner():(a.critical("GameMonetize SDK not ready."),!1)}send(e){let t=this.gameManager?.activeRoomEvents;return t?t.send(e):(a.warning("GameMonetize - RoomEvents undefined to send an Ad Video message."),!1)}}},{f98142cce04e846c:"aIs5j","44a48259b87a5721":"cm3M5",b637051a2a3ead94:"ijd9L"}],Rg4T4:[function(e,t,i,r){t.exports.GoogleAdSense=class{constructor(e,t){this.gameManager=t,this.gameDom=t?.gameDom,this.events=t?.events,this.window=t?.gameDom?.getWindow(),this.metaData=e}}},{}],"8uifG":[function(e,t,i,r){t.exports={ads:{}}},{}],"37V8i":[function(e,t,i,r){let{DebugWorldCreator:n}=e("2f104c4a1fe36eaf"),{PluginInterface:s}=e("c03d54e76a300c60"),{Logger:a,sc:o}=e("56ce9c7fd2ae3df6");t.exports.WorldPlugin=class extends s{async setup(e){this.gameManager=o.get(e,"gameManager",!1),this.events=o.get(e,"events",!1),this.debugWorldCreator=!1,this.validateProperties()&&this.setupDebugMode()}validateProperties(){return this.gameManager?!!this.events||(a.error("EventsManager undefined in PredictionPlugin."),!1):(a.error("Game Manager undefined in PredictionPlugin."),!1)}setupDebugMode(){if(!this.gameManager.config.getWithoutLogs("client/world/debug/enabled",!1))return!1;this.debugWorldCreator=new n,this.events.on("reldens.createEngineSceneDone",async e=>{await this.debugWorldCreator.createSceneWorld(e.currentScene)})}}},{"2f104c4a1fe36eaf":"jJQh7",c03d54e76a300c60:"9RjlI","56ce9c7fd2ae3df6":"ijd9L"}],jJQh7:[function(e,t,i,r){let{Renderer:n}=e("7f57d693a727d80"),{P2world:s}=e("56e554b827a8b617"),{WorldTimer:a}=e("b75a99257129c956"),{Logger:o}=e("493b121a06799e1e");t.exports.DebugWorldCreator=class{async createSceneWorld(e){let t=this.findValidLayers(e),i=this.cloneMapJson(e,t),r={sceneName:e.key,roomId:e.params.roomId,roomMap:e.params.roomName,mapJson:i,config:e.configManager,events:e.eventsManager,allowSimultaneous:e.configManager.get("client/general/controls/allowSimultaneousKeys",!0),worldConfig:e.gameManager.activeRoomEvents.roomData?.worldConfig||e.worldConfig};e.debugWorld=this.createWorldInstance(r),e.debugWorld.createLimits(),await e.debugWorld.createWorldContent({}),e.debugWorldTimer=new a({callbacks:[()=>{e.debugWorld?e.debugWorld.removeBodiesFromWorld():o.error("Scene World not longer exists.",e.roomWorld)}]}),e.debugWorldTimer.startWorldSteps(e.debugWorld),e.debugWorldRenderer=new n(e)}cloneMapJson(e,t){let i=e.tilesets[0];return i?Object.assign({},e.cache?.tilemap?.entries?.entries[i.name]?.data||{},{layers:t}):{}}findValidLayers(e){let t=[],i=e.tilesets[0];if(!i)return t;for(let r of e.cache.tilemap.entries.entries[i.name].data.layers)-1!==r.name.indexOf("collision")&&t.push(r);return t}createWorldInstance(e){return new s(e)}}},{"7f57d693a727d80":"1ZgI8","56e554b827a8b617":"4TtiY",b75a99257129c956:"4O4zD","493b121a06799e1e":"ijd9L"}],"1ZgI8":[function(e,t,i,r){let{Box:n}=e("43cbaab4204b970");t.exports.Renderer=class{constructor(e){this.scene=e,this.gameDom=e.gameManager.gameDom,this.world=e.debugWorld,this.canvasElement=!1,this.canvasContext=!1}fetchCanvasContext(){this.canvasContext=this.canvasElement.getContext("2d")}createCanvas(e,t){this.canvasElement=this.gameDom.createElement("canvas"),this.canvasElement.width=e,this.canvasElement.height=t,this.canvasElement.id="physicsCanvas",this.gameDom.getDocument().body.appendChild(this.canvasElement),this.fetchCanvasContext()}renderLoop(){this.canvasContext.clearRect(0,0,this.canvasElement.width,this.canvasElement.height),this.renderP2World(),this.gameDom.getWindow().requestAnimationFrame(this.renderLoop.bind(this))}renderP2World(){let e=this.canvasContext;for(let t=0;t<this.world.bodies.length;t++){let i=this.world.bodies[t];if(!i.isWall)continue;let r=i.shapes[0];if(e.fillStyle="#2f7dde",e.strokeStyle="#333333",r instanceof n){let t=i.position[0],n=i.position[1],s=r.width,a=r.height;e.save(),e.translate(t,n),e.rotate(i.angle),e.beginPath(),e.rect(-s/2,-a/2,s,a),e.closePath(),e.fill(),e.stroke(),e.restore()}e.closePath(),e.fill(),e.stroke()}for(let t=0;t<this.world.bodies.length;t++){let i=this.world.bodies[t];if(!i.isWall)continue;let r=i.shapes[0];if(r instanceof n){let t=i.firstTileIndex||0;e.fillStyle="#000000",e.font="9px Arial";let n=t.toString()+" / "+r.width+" / "+i.position[0],s=i.position[0],a=i.position[1],o=s-e.measureText(n).width/2;e.textAlign="left",e.textBaseline="middle",e.fillText(n,o,a)}}}debugWorld(){this.gameDom.getElement(".wrapper").style.display="none",this.createCanvas(this.scene.map.width*this.scene.map.tileWidth,this.scene.map.height*this.scene.map.tileHeight),this.renderP2World()}}},{"43cbaab4204b970":"6Ga10"}],l2gjI:[function(e,t,i,r){let{PreloaderHandler:n}=e("3b8c6a6b532efef7"),{ScoresMessageListener:s}=e("886a0d766603abc"),{MessageProcessor:a}=e("e89935d10dce4cba"),{ScoresConst:o}=e("e991266a552fb051"),h=e("b0db3ae90acf0cc5"),{TranslationsMapper:c}=e("e0289d80f135b58e"),{PluginInterface:l}=e("84d6714fa827e3e1"),{Logger:d,sc:u}=e("f46d2ddbf227db3d");t.exports.ScoresPlugin=class extends l{async setup(e){this.gameManager=u.get(e,"gameManager",!1),this.events=u.get(e,"events",!1),this.preloaderHandler=new n,this.scoresMessageListener=new s,this.validateProperties()&&(this.setTranslations(),this.listenEvents(),this.listenMessages())}validateProperties(){return this.gameManager?!!this.events||(d.error("EventsManager undefined in ScoresPlugin."),!1):(d.error("Game Manager undefined in ScoresPlugin."),!1)}setTranslations(){if(!this.gameManager)return!1;c.forConfig(this.gameManager.config.client,h,o.MESSAGE.DATA_VALUES)}listenEvents(){this.events?(this.events.on("reldens.preloadUiScene",e=>{this.preloaderHandler.loadContents(e)}),this.events.on("reldens.createEngineSceneDone",e=>{let t=e?.roomEvents;if(!t)return d.critical("RoomEvents undefined for process Scores messages queue on ScoresPlugin.",e),!1;a.processScoresMessagesQueue(t,this.scoresMessageListener)})):d.error('EventsManager undefined in ScoresPlugin for "listenEvents".')}listenMessages(){this.gameManager&&this.events?this.gameManager.config.client.message.listeners[o.KEY]=this.scoresMessageListener:d.error('Game Manager or EventsManager undefined in ScoresPlugin for "listenMessages".')}}},{"3b8c6a6b532efef7":"gfh28","886a0d766603abc":"88BYA",e89935d10dce4cba:"1MOHX",e991266a552fb051:"1t1jh",b0db3ae90acf0cc5:"MQBUb",e0289d80f135b58e:"62bet","84d6714fa827e3e1":"9RjlI",f46d2ddbf227db3d:"ijd9L"}],gfh28:[function(e,t,i,r){let{ScoresConst:n}=e("fc16b961896d9e7e");t.exports.PreloaderHandler=class{loadContents(e){let t="/assets/features/scores/templates/";e.load.html(n.KEY,t+"ui-scores.html"),e.load.html(n.TEMPLATES.SCORES_TABLE,t+"ui-scores-table.html")}}},{fc16b961896d9e7e:"1t1jh"}],"1t1jh":[function(e,t,i,r){let n="scores.";t.exports.ScoresConst={KEY:"scores",PREFIX:"sco",ACTIONS:{UPDATE:"scoUp",TOP_SCORES_UPDATE:"scoTops"},TEMPLATES:{SCORES_TABLE:"scoresTable"},MESSAGE:{DATA_VALUES:{NAMESPACE:"scores"}},SNIPPETS:{PREFIX:n,TITLE:n+"scoresTitle",CONTENT:n+"scoresContent",MY_SCORE:n+"myScore"}}},{}],"88BYA":[function(e,t,i,r){let{ScoresMessageHandler:n}=e("d156c5882f191e51"),{ScoresConst:s}=e("2e4cd336beabe6ca"),{Logger:a,sc:o}=e("aebac8790f258c87");t.exports.ScoresMessageListener=class{async executeClientMessageActions(e){let t=o.get(e,"message",!1);if(!t)return a.error("Missing message data on ScoresMessageListener.",e),!1;let i=o.get(e,"roomEvents",!1);if(!i)return a.error("Missing RoomEvents on ScoresMessageListener.",e),!1;let r=new n({roomEvents:i,message:t});return r.validate()?!!this.isScoresMessage(t)&&this.handleScoresMessage(t,r):this.isScoresMessage(t)?(i.scoresMessagesQueue||(i.scoresMessagesQueue=[]),i.scoresMessagesQueue.push(t),!0):(a.error("Invalid ScoresMessageHandler",r),!1)}handleScoresMessage(e,t){return s.ACTIONS.UPDATE===e.act?t.updatePlayerScore():s.ACTIONS.TOP_SCORES_UPDATE!==e.act||t.updateScoresBox()}isScoresMessage(e){return 0===e.act?.indexOf(s.PREFIX)}}},{d156c5882f191e51:"441TH","2e4cd336beabe6ca":"1t1jh",aebac8790f258c87:"ijd9L"}],"441TH":[function(e,t,i,r){let{UserInterface:n}=e("a45d421f329cd9bb"),{ScoresConst:s}=e("78e1225607fe67de"),{Logger:a,sc:o}=e("98287ac0824fa508");t.exports.ScoresMessageHandler=class{constructor(e){this.roomEvents=o.get(e,"roomEvents",!1),this.message=o.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.uiScene=this.gameManager?.gameEngine?.uiScene}validate(){return this.roomEvents?this.message?this.gameManager?this.uiScene:(a.info("Missing GameManager on ScoresMessageHandler."),!1):(a.info("Missing message on ScoresMessageHandler."),!1):(a.info("Missing RoomEvents on ScoresMessageHandler."),!1)}createScoresUi(){let e=o.get(this.uiScene.userInterfaces,s.KEY);if(e)return e;this.uiScene.userInterfaces||(this.uiScene.userInterfaces={});let t=new n(this.gameManager,{id:s.KEY,type:s.KEY,defaultOpen:!0,defaultClose:!0},"/assets/features/scores/templates/ui-scores.html",s.KEY);t.createUiElement(this.uiScene,s.KEY);let i=this.uiScene.elementsUi[s.KEY];if(!i)return a.error("Scores UI box not found.",{uiScores:t,uiBox:i}),!1;let r=this.gameManager.services.translator.t(this.gameManager.config.getWithoutLogs("client/scores/labels/title",s.SNIPPETS.TITLE)),h=this.gameManager.services.translator.t(this.gameManager.config.getWithoutLogs("client/scores/labels/content",s.SNIPPETS.CONTENT));return this.roomEvents.uiSetTitleAndContent(i,{title:r,content:h},this.uiScene),this.uiScene.userInterfaces[s.KEY]=t,this.uiScene.userInterfaces[s.KEY]}updatePlayerScore(){this.createScoresUi();let e=o.get(this.message,"newTotalScore",!1);e?(this.uiScene.currentPlayerScore=e,this.roomEvents.uiSetContent(this.uiScene.elementsUi[s.KEY],{content:this.createContentsUpdate()},this.uiScene)):a.debug("Missing new total score on update message.")}updateScoresBox(){this.createScoresUi();let e=o.get(this.message,"scores",!1);e?(this.uiScene.scores=e,this.roomEvents.uiSetContent(this.uiScene.elementsUi[s.KEY],{content:this.createContentsUpdate()},this.uiScene)):a.debug("Missing scores data on message.")}createContentsUpdate(){let e=this.uiScene.cache.html.get(s.TEMPLATES.SCORES_TABLE);if(!e)return a.error('Missing template "'+s.TEMPLATES.SCORES_TABLE+'".'),"";let t={scores:this.uiScene.scores,showCurrentPlayer:!0,currentPlayerScore:this.gameManager.services.translator.t(this.gameManager.config.getWithoutLogs("client/scores/labels/myScore",s.SNIPPETS.MY_SCORE),{myScore:this.uiScene.currentPlayerScore||"0"})};return this.gameManager.gameEngine.parseTemplate(e,t)}}},{a45d421f329cd9bb:"azIQk","78e1225607fe67de":"1t1jh","98287ac0824fa508":"ijd9L"}],"1MOHX":[function(e,t,i,r){let{ScoresMessageHandler:n}=e("45ab9844bbd919a8"),{sc:s}=e("d9c441fdb0377cf");t.exports.MessageProcessor=class{static processScoresMessagesQueue(e,t){if(s.isArray(e.scoresMessagesQueue)&&0!==e.scoresMessagesQueue.length){for(let i of e.scoresMessagesQueue)t.handleScoresMessage(i,new n({roomEvents:e,message:i}));e.scoresMessagesQueue=[]}}}},{"45ab9844bbd919a8":"441TH",d9c441fdb0377cf:"ijd9L"}],MQBUb:[function(e,t,i,r){t.exports={scores:{scoresTitle:"Top Players Scores",scoresContent:"No scores available.",myScore:"My score: %myScore"}}},{}],"6qovx":[function(e,t,i,r){let{PreloaderHandler:n}=e("efc9996b9ceaadce"),{MessageListener:s}=e("ef29ab05ba87fd5"),{MessageProcessor:a}=e("bd6312294795cf1c"),{RewardsConst:o}=e("a60c417cf40e6e4e"),h=e("702d39ed6c29ddf6"),{TranslationsMapper:c}=e("e6ea40ce120e2033"),{PluginInterface:l}=e("78f7099074cee28a"),{Logger:d,sc:u}=e("76d1b05ad0acce3a");t.exports.RewardsPlugin=class extends l{async setup(e){this.gameManager=u.get(e,"gameManager",!1),this.events=u.get(e,"events",!1),this.preloaderHandler=new n,this.messageListener=new s,this.validateProperties()&&(this.setTranslations(),this.listenEvents(),this.listenMessages(),d.debug("Plugin READY: Rewards"))}validateProperties(){return this.gameManager?!!this.events||(d.error("EventsManager undefined in RewardsPlugin."),!1):(d.error("Game Manager undefined in RewardsPlugin."),!1)}setTranslations(){if(!this.gameManager)return!1;c.forConfig(this.gameManager.config.client,h,o.MESSAGE.DATA_VALUES)}listenEvents(){this.events?(this.events.on("reldens.preloadUiScene",e=>{this.preloaderHandler.loadContents(e)}),this.events.on("reldens.createEngineSceneDone",e=>{a.processRewardsMessagesQueue(e,this)})):d.error('EventsManager undefined in RewardsPlugin for "listenEvents".')}listenMessages(){this.gameManager&&this.events?this.gameManager.config.client.message.listeners[o.KEY]=this.messageListener:d.error('Game Manager or EventsManager undefined in RewardsPlugin for "listenMessages".')}}},{efc9996b9ceaadce:"hCfzo",ef29ab05ba87fd5:"g3HUU",bd6312294795cf1c:"i7Scz",a60c417cf40e6e4e:"6Qxr2","702d39ed6c29ddf6":"gGfUk",e6ea40ce120e2033:"62bet","78f7099074cee28a":"9RjlI","76d1b05ad0acce3a":"ijd9L"}],hCfzo:[function(e,t,i,r){let{RewardsConst:n}=e("c14067eab2e5b23e");t.exports.PreloaderHandler=class{loadContents(e){let t="/assets/features/rewards/templates/";e.load.html(n.KEY,t+"ui-rewards.html"),e.load.html(n.TEMPLATES.REWARDS_LIST,t+"ui-rewards-list.html")}}},{c14067eab2e5b23e:"6Qxr2"}],"6Qxr2":[function(e,t,i,r){let n="rewards.";t.exports.RewardsConst={KEY:"rewards",PREFIX:"rwd",ACTIONS:{INITIALIZE:"rwdIni",UPDATE:"rwdUp",ACCEPT_REWARD:"rwdAcpt",ACCEPTED_REWARD:"rwdAcpted"},SPLIT_EXPERIENCE:{ALL:0,PROPORTIONAL_BY_LEVEL:1},SPLIT_MODIFIER:{ALL:0,RANDOM:1},SPLIT_ITEMS:{DROP_KEEPS:0,RANDOM:1},MESSAGE:{DATA:{LABEL:"rlbl",DESCRIPTION:"rdes",POSITION:"rpos",SHOW_REWARD_IMAGE:"srimg",REWARD_IMAGE:"rimg",REWARD_IMAGE_PATH:"rimgp",EVENT_DATA:"redt",STATE_DATA:"resd",ITEMS_DATA:"rmid",ITEM_KEY:"rikey",ITEM_LABEL:"rilbl",ITEM_DESCRIPTION:"rides",ITEM_QUANTITY:"riqty"},DATA_VALUES:{NAMESPACE:"rewards"}},TEMPLATES:{REWARDS_LIST:"rewardsList"},SNIPPETS:{PREFIX:n,TITLE:n+"title",ACCEPTED_REWARD:n+"acceptedReward"}}},{}],g3HUU:[function(e,t,i,r){let{MessageHandler:n}=e("4d23f5e42478957c"),{RewardsConst:s}=e("bda46dc94809b55d"),{Logger:a,sc:o}=e("a4007c1db9e3ae27");t.exports.MessageListener=class{async executeClientMessageActions(e){let t=o.get(e,"message",!1);if(!t)return a.error("Missing message data on RewardsMessageListener.",e),!1;let i=o.get(e,"roomEvents",!1);if(!i)return a.error("Missing RoomEvents on RewardsMessageListener.",e),!1;if(!this.isRewardsMessage(t))return!1;let r=new n({roomEvents:i,message:t});return r.validate()?this.handleRewardsMessage(t,r):(i.rewardsMessagesQueue||(i.rewardsMessagesQueue=[]),i.rewardsMessagesQueue.push(t),!0)}handleRewardsMessage(e,t){return s.ACTIONS.UPDATE===e.act?t.updateRewardsBox():s.ACTIONS.ACCEPTED_REWARD!==e.act||t.showAcceptedReward()}isRewardsMessage(e){return 0===e.act?.indexOf(s.PREFIX)}}},{"4d23f5e42478957c":"gJrpr",bda46dc94809b55d:"6Qxr2",a4007c1db9e3ae27:"ijd9L"}],gJrpr:[function(e,t,i,r){let{UserInterface:n}=e("8d4a3a8b8eeaff6"),{RewardsConst:s}=e("677bd2d65b92e557"),{GameConst:a}=e("7a270c9c6c08724"),{Logger:o,sc:h}=e("70b77844d02b2070");t.exports.MessageHandler=class{constructor(e){this.roomEvents=h.get(e,"roomEvents",!1),this.message=h.get(e,"message",!1),this.gameManager=this.roomEvents?.gameManager,this.gameDom=this.gameManager?.gameDom,this.config=this.gameManager?.config,this.translator=this.gameManager?.services?.translator,this.uiScene=this.gameManager?.gameEngine?.uiScene}validate(){return this.roomEvents?this.message?this.gameManager?this.uiScene:(o.info("Missing GameManager on RewardsMessageHandler."),!1):(o.info("Missing message on RewardsMessageHandler."),!1):(o.info("Missing RoomEvents on RewardsMessageHandler."),!1)}createRewardsUi(e){let t=h.get(this.uiScene.userInterfaces,e);if(t)return t;this.uiScene.userInterfaces||(this.uiScene.userInterfaces={});let i=new n(this.gameManager,{id:e,type:e,defaultOpen:!0,defaultClose:!0},"/assets/features/rewards/templates/ui-rewards.html",e);i.createUiElement(this.uiScene,e),i.closeButton.addEventListener("click",()=>{this.gameDom.emptyElement(".accepted-reward")});let r=this.uiScene.elementsUi[e];if(!r)return o.error("Scores UI box not found.",{uiRewards:i,uiBox:r}),!1;let a=this.translator.t(this.config.getWithoutLogs("client/rewards/labels/title",s.SNIPPETS.TITLE));return this.roomEvents.uiSetTitleAndContent(r,{title:a},this.uiScene),this.uiScene.userInterfaces[e]=i,this.uiScene.userInterfaces[e]}updateRewardsBox(){this.createRewardsUi(s.KEY);let e=h.get(this.message,"rewards",!1);return e?(this.enrichForDisplay(e),this.uiScene.rewards=e,this.roomEvents.uiSetContent(this.uiScene.elementsUi[s.KEY],{content:this.createUpdateContent()},this.uiScene),this.showRewardsNotificationBalloon(),this.activateRewardsAction()):o.debug("Missing rewards data on message."),!1}showAcceptedReward(){this.createRewardsUi(s.KEY);let e=h.get(this.message,"acceptedReward",!1);return e?(this.enrichForDisplay([e]),this.uiScene.acceptedReward=e,this.roomEvents.uiSetContent(this.uiScene.elementsUi[s.KEY],{content:this.createUpdateContent()},this.uiScene),!0):(o.debug("Missing rewards on update message."),!1)}createUpdateContent(){let e=this.uiScene.cache.html.get(s.TEMPLATES.REWARDS_LIST);if(!e)return o.error('Missing template "'+s.TEMPLATES.REWARDS_LIST+'".'),"";let t=this.uiScene.acceptedReward,i=t?this.translator.t(this.config.getWithoutLogs("client/rewards/labels/acceptedReward",s.SNIPPETS.ACCEPTED_REWARD),{rewardLabel:t.translated.label}):"",r={rewards:this.uiScene.rewards,acceptedReward:t,acceptedRewardMessage:i};return this.gameManager.gameEngine.parseTemplate(e,r)}enrichForDisplay(e){for(let t of e){let e=this.translator.t(t[s.MESSAGE.DATA.DESCRIPTION]||"",{loginCount:t[s.MESSAGE.DATA.EVENT_DATA]?.days||""});this.config.getWithoutLogs("client/rewards/labels/includeItemsDescription",!0)&&(e+=this.mapItemsText(t));let i=this.translator.t(t[s.MESSAGE.DATA.LABEL]||"",{loginCount:t[s.MESSAGE.DATA.EVENT_DATA]?.days||""});t.translated={label:i,description:e};let r=t[s.MESSAGE.DATA.STATE_DATA];t.activeClass=r?.ready&&!r?.complete?"active":"inactive",t.showRewardImage=t[s.MESSAGE.DATA.SHOW_REWARD_IMAGE]||"",t.rewardImage=t[s.MESSAGE.DATA.REWARD_IMAGE]||"",t.rewardImagePath=t[s.MESSAGE.DATA.REWARD_IMAGE_PATH]||""}return e}mapItemsText(e){let t=this.config.getWithoutLogs("client/rewards/labels/itemsSeparator","<br/>"),i=this.config.getWithoutLogs("client/rewards/labels/itemsTemplate","%label (%quantity)");return t+e[s.MESSAGE.DATA.ITEMS_DATA]?.map(e=>i=(i=i.replace("%label",e[s.MESSAGE.DATA.ITEM_LABEL])).replace("%quantity",e[s.MESSAGE.DATA.ITEM_QUANTITY])).join(t)}showRewardsNotificationBalloon(){let e=this.gameDom.getElement("#rewards-notification-balloon"),t=this.gameDom.getElements(".reward-active");e&&t&&0<t.label?e.classList.remove("hidden"):e.classList.add("hidden")}activateRewardsAction(){for(let e of this.gameDom.getElements(".reward-active"))e.addEventListener("click",()=>{this.gameManager.activeRoomEvents.send({[a.ACTION_KEY]:s.ACTIONS.ACCEPT_REWARD,id:e.dataset.rewardId})})}}},{"8d4a3a8b8eeaff6":"azIQk","677bd2d65b92e557":"6Qxr2","7a270c9c6c08724":"z0nmL","70b77844d02b2070":"ijd9L"}],i7Scz:[function(e,t,i,r){let{MessageHandler:n}=e("31470942304bd302"),{Logger:s,sc:a}=e("32739ae155fa16f3");t.exports.MessageProcessor=class{static processRewardsMessagesQueue(e,t){let i=e?.roomEvents;if(!i)return s.critical("RoomEvents undefined for process Rewards messages queue on RewardsPlugin.",e),!1;if(!a.isArray(i.rewardsMessagesQueue)||0===i.rewardsMessagesQueue.length)return!1;for(let e of i.rewardsMessagesQueue)t.messageListener?.handleRewardsMessage(e,new n({roomEvents:i,message:e}));return i.rewardsMessagesQueue=[],!0}}},{"31470942304bd302":"gJrpr","32739ae155fa16f3":"ijd9L"}],gGfUk:[function(e,t,i,r){t.exports={rewards:{title:"Rewards",dailyLogin:"Daily Login",dailyDescription:"Login every day and claim your reward",straightDaysLogin:"%loginCount Days Login",straightDaysDescription:"Login every day for %loginCount days and claim your reward",acceptedReward:'You accepted the "%rewardLabel" reward!'}}},{}],"7w641":[function(e,t,i,r){let n=e("e6a5960c3a99bcc9").default,s=e("d306a7719b3b609a"),a=e("4ec569fe0c629c93"),{ErrorsBlockHandler:o}=e("6645d49b0b5d816f"),{GameConst:h}=e("89df318e7a41c05a"),{ErrorManager:c,Logger:l,sc:d}=e("bf14904e4b931b12");t.exports.FirebaseConnector=class{constructor(e){e||c.error("FirebaseConnector - Missing game manager."),this.gameManager=e,this.gameDom=this.gameManager.gameDom,this.analytics=s,this.app=n,this.auth=a,this.initializedApp=!1,this.isActive=!1,this.containerId="#firebase-auth-container",this.activeProviders={},this.defaultProviders={},this.gameManager.events.on("reldens.beforeJoinGame",e=>{"firebase-login"===e.formData.formId&&(e.gameManager.userData.isFirebaseLogin=!0)})}fetchDefaultProviders(){return{google:{label:"Sign in with Google",authMethod:new this.app.auth.GoogleAuthProvider},facebook:{label:"Sign in with Facebook",authMethod:new this.app.auth.FacebookAuthProvider},github:{label:"Sign in with GitHub",authMethod:new this.app.auth.GithubAuthProvider}}}startFirebase(){let e=this.gameManager.appServerUrl+h.ROUTE_PATHS.FIREBASE;this.gameDom.getJSON(e,(e,t)=>{if(!t.enabled)return!1;let i=t.firebaseConfig;this.initAuth(i),this.gameDom.getWindow().addEventListener("beforeunload",()=>{this.isActive&&this.initializedApp.firebase.auth().signOut()}),this.initializedApp.firebase.auth().onAuthStateChanged(e=>(e?this.setActiveUser(e):this.setupAuthButtons(t.providersKeys),!1));let r=this.gameDom.getElement("#firebase-login");r&&this.activateLoginBehavior(r)})}activateLoginBehavior(e){e.addEventListener("submit",t=>{if(t.preventDefault(),!e.checkValidity())return!1;this.gameDom.getElement(".firebase-row-container").classList.remove("hidden")});let t=this.gameDom.getElement("#firebase-username");if(!t)return!1;this.gameDom.getElement(".firebase-row-container").classList.remove("hidden"),t.addEventListener("change",()=>{o.reset(e)}),t.addEventListener("focus",()=>{o.reset(e)})}setupAuthButtons(e){this.isActive=!1;let t=this.gameDom.getElement(this.containerId);if(!t||(t.innerHTML="",0===e.length))return!1;for(let i of(this.defaultProviders=this.fetchDefaultProviders(),e)){let e=d.get(this.activeProviders,i,!1);if(e||(e=this.defaultProviders[i]),!e)return!1;let r=this.createAuthButton(i,e.label);r.addEventListener("click",()=>{this.signInWithProvider(e.authMethod)}),t.appendChild(r)}}createAuthButton(e,t){let i=document.createElement("button");return i.type="button",i.className="firebase-auth-btn firebase-"+e+"-btn",i.innerHTML=t,i}signInWithProvider(e){if(!e)return!1;this.initializedApp.firebase.auth().signInWithPopup(e).catch(e=>{l.error("Firebase authentication error:",e);let t=this.gameDom.getElement("#firebase-login .response-error");t&&(t.textContent="Authentication error.")})}setActiveUser(e){this.isActive=!0;let t=this.gameDom.getElement("#firebase-username");if(!t||""===t.value.trim()){let e=this.gameDom.getElement("#firebase-login .response-error");return e&&(e.textContent="Please enter a username."),!1}let i={formId:"firebase-login",email:e.email,username:t.value,password:e.uid};this.gameManager.startGame(i,!0)}initAuth(e){if(!e)return l.error("Missing firebase configuration."),!1;this.firebaseConfig=e,this.initializedApp=this.app.initializeApp(this.firebaseConfig),d.hasOwn(this.firebaseConfig,"measurementId")&&this.initializedApp.firebase.analytics()}}},{e6a5960c3a99bcc9:"fEFy6",d306a7719b3b609a:"3rlQI","4ec569fe0c629c93":"i1fsJ","6645d49b0b5d816f":"botqX","89df318e7a41c05a":"z0nmL",bf14904e4b931b12:"ijd9L"}],fEFy6:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"default",()=>a.default);var s=e("@firebase/app-compat"),a=n.interopDefault(s);a.default.registerVersion("firebase","12.7.0","app-compat")},{"@firebase/app-compat":"iSRwc","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],iSRwc:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"default",()=>f);var s=e("@firebase/util"),a=e("@firebase/component"),o=e("@firebase/app"),h=e("@firebase/logger");class c{constructor(e,t){this._delegate=e,this.firebase=t,(0,o._addComponent)(e,new(0,a.Component)("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,o.deleteApp)(this._delegate)))}_getService(e,t=o._DEFAULT_ENTRY_NAME){this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return i.isInitialized()||i.getComponent()?.instantiationMode!=="EXPLICIT"||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=o._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,o._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,o._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}let l=new(0,s.ErrorFactory)("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),d=function e(){let t=function(e){let t={},i={__esModule:!0,initializeApp:function(r,n={}){let a=o.initializeApp(r,n);if((0,s.contains)(t,a.name))return t[a.name];let h=new e(a,i);return t[a.name]=h,h},app:r,registerVersion:o.registerVersion,setLogLevel:o.setLogLevel,onLog:o.onLog,apps:null,SDK_VERSION:o.SDK_VERSION,INTERNAL:{registerComponent:function(t){let n=t.name,a=n.replace("-compat","");if(o._registerComponent(t)&&"PUBLIC"===t.type){let o=(e=r())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==t.serviceProps&&(0,s.deepExtend)(o,t.serviceProps),i[a]=o,e.prototype[a]=function(...e){return this._getService.bind(this,n).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?i[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:o}};function r(e){if(e=e||o._DEFAULT_ENTRY_NAME,!(0,s.contains)(t,e))throw l.create("no-app",{appName:e});return t[e]}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,i}(c);return t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:e,extendNamespace:function(e){(0,s.deepExtend)(t,e)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend},t}(),u=new(0,h.Logger)("@firebase/app-compat");try{let e=(0,s.getGlobal)();if(void 0!==e.firebase){u.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&u.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}let f=d;(0,o.registerVersion)("@firebase/app-compat","0.5.6",void 0)},{"@firebase/util":"hDH52","@firebase/component":"lCYJy","@firebase/app":"ac8fF","@firebase/logger":"8Ggjd","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],hDH52:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"CONSTANTS",()=>o),n.export(i,"DecodeBase64StringError",()=>f),n.export(i,"Deferred",()=>S),n.export(i,"ErrorFactory",()=>J),n.export(i,"FirebaseError",()=>K),n.export(i,"MAX_VALUE_MILLIS",()=>eC),n.export(i,"RANDOM_FACTOR",()=>eI),n.export(i,"Sha1",()=>ep),n.export(i,"areCookiesEnabled",()=>q),n.export(i,"assert",()=>h),n.export(i,"assertionError",()=>c),n.export(i,"async",()=>ev),n.export(i,"base64",()=>u),n.export(i,"base64Decode",()=>m),n.export(i,"base64Encode",()=>p),n.export(i,"base64urlEncodeWithoutPadding",()=>g),n.export(i,"calculateBackoffMillis",()=>e_),n.export(i,"contains",()=>es),n.export(i,"createMockUserToken",()=>_),n.export(i,"createSubscribe",()=>eg),n.export(i,"decode",()=>ee),n.export(i,"deepCopy",()=>v),n.export(i,"deepEqual",()=>function e(t,i){if(t===i)return!0;let r=Object.keys(t),n=Object.keys(i);for(let s of r){if(!n.includes(s))return!1;let r=t[s],a=i[s];if(ec(r)&&ec(a)){if(!e(r,a))return!1}else if(r!==a)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}),n.export(i,"deepExtend",()=>y),n.export(i,"errorPrefix",()=>ex),n.export(i,"extractQuerystring",()=>ef),n.export(i,"getDefaultAppConfig",()=>A),n.export(i,"getDefaultEmulatorHost",()=>E),n.export(i,"getDefaultEmulatorHostnameAndPort",()=>T),n.export(i,"getDefaults",()=>x),n.export(i,"getExperimentalSetting",()=>w),n.export(i,"getGlobal",()=>b),n.export(i,"getModularInstance",()=>eP),n.export(i,"getUA",()=>R),n.export(i,"isAdmin",()=>en),n.export(i,"isBrowser",()=>k),n.export(i,"isBrowserExtension",()=>B),n.export(i,"isCloudWorkstation",()=>C),n.export(i,"isCloudflareWorker",()=>F),n.export(i,"isElectron",()=>G),n.export(i,"isEmpty",()=>eo),n.export(i,"isIE",()=>V),n.export(i,"isIndexedDBAvailable",()=>H),n.export(i,"isMobileCordova",()=>L),n.export(i,"isNode",()=>D),n.export(i,"isNodeSdk",()=>j),n.export(i,"isReactNative",()=>U),n.export(i,"isSafari",()=>W),n.export(i,"isSafariOrWebkit",()=>z),n.export(i,"isUWP",()=>Y),n.export(i,"isValidFormat",()=>er),n.export(i,"isValidTimestamp",()=>et),n.export(i,"isWebWorker",()=>N),n.export(i,"issuedAtTime",()=>ei),n.export(i,"jsonEval",()=>$),n.export(i,"map",()=>eh),n.export(i,"ordinal",()=>eO),n.export(i,"pingServer",()=>I),n.export(i,"promiseWithTimeout",()=>el),n.export(i,"querystring",()=>ed),n.export(i,"querystringDecode",()=>eu),n.export(i,"safeGet",()=>ea),n.export(i,"stringLength",()=>eS),n.export(i,"stringToByteArray",()=>ew),n.export(i,"stringify",()=>Z),n.export(i,"updateEmulatorBanner",()=>M),n.export(i,"validateArgCount",()=>eb),n.export(i,"validateCallback",()=>eT),n.export(i,"validateContextObject",()=>eA),n.export(i,"validateIndexedDBOpenable",()=>X),n.export(i,"validateNamespace",()=>eE);var s=e("./postinstall.mjs"),a=arguments[3];let o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},h=function(e,t){if(!e)throw c(t)},c=function(e){return Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},l=function(e){let t=[],i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:((64512&n)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128)}return t},d=function(e){let t=[],i=0,r=0;for(;i<e.length;){let n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[i++];t[r++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{let s=e[i++],a=e[i++];t[r++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a)}}return t.join("")},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,h=o?e[t+2]:0,c=n>>2,l=(3&n)<<4|a>>4,d=(15&a)<<2|h>>6,u=63&h;!o&&(u=64,s||(d=64)),r.push(i[c],i[l],i[d],i[u])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):d(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let n=i[e.charAt(t++)],s=t<e.length?i[e.charAt(t)]:0,a=++t<e.length?i[e.charAt(t)]:64,o=++t<e.length?i[e.charAt(t)]:64;if(++t,null==n||null==s||null==a||null==o)throw new f;let h=n<<2|s>>4;if(r.push(h),64!==a){let e=s<<4&240|a>>2;if(r.push(e),64!==o){let e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let p=function(e){let t=l(e);return u.encodeByteArray(t,!0)},g=function(e){return p(e).replace(/\./g,"")},m=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function v(e){return y(void 0,e)}function y(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let i in t)t.hasOwnProperty(i)&&"__proto__"!==i&&(e[i]=y(e[i],t[i]));return e}function b(){if("u">typeof self)return self;if("u">typeof window)return window;if(void 0!==a)return a;throw Error("Unable to locate global object.")}let x=()=>{try{return(0,s.getDefaultsFromPostinstall)()||b().__FIREBASE_DEFAULTS__||(()=>{let e;if("u"<typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&m(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},E=e=>x()?.emulatorHosts?.[e],T=e=>{let t=E(e);if(!t)return;let i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),r]:[t.substring(0,i),r]},A=()=>x()?.config,w=e=>x()?.[`_${e}`];class S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function C(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function I(e){return(await fetch(e,{credentials:"include"})).ok}function _(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let i=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}},...e};return[g(JSON.stringify({alg:"none",type:"JWT"})),g(JSON.stringify(s)),""].join(".")}let O={},P=!1;function M(e,t){if("u"<typeof window||"u"<typeof document||!C(window.location.host)||O[e]===t||O[e]||P)return;function i(e){return`__firebase__banner__${e}`}O[e]=t;let r="__firebase__banner",n=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(O))O[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(r),t=!1,e||((e=document.createElement("div")).setAttribute("id",r),t=!0),{created:t,element:e}),a=i("text"),o=document.getElementById(a)||document.createElement("span"),h=i("learnmore"),c=document.getElementById(h)||document.createElement("a"),l=i("preprendIcon"),d=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",c.setAttribute("id",h),c.innerText="Learn more",c.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",c.setAttribute("target","__blank"),c.style.paddingLeft="5px",c.style.textDecoration="underline";let i=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;P=!0,(e=document.getElementById(r))&&e.remove()},e);d.setAttribute("width","24"),d.setAttribute("id",l),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px",t.append(d,o,c,i),document.body.appendChild(t)}n?(o.innerText="Preview backend disconnected.",d.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(d.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,o.innerText="Preview backend running in this workspace."),o.setAttribute("id",a)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function R(){return"u">typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function L(){return"u">typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function D(){let e=x()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(a.process)}catch(e){return!1}}function k(){return"u">typeof window||N()}function N(){return"u">typeof WorkerGlobalScope&&"u">typeof self&&self instanceof WorkerGlobalScope}function F(){return"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function B(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function U(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function G(){return R().indexOf("Electron/")>=0}function V(){let e=R();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Y(){return R().indexOf("MSAppHost/")>=0}function j(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN}function W(){return!D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return!D()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function H(){try{return"object"==typeof indexedDB}catch(e){return!1}}function X(){return new Promise((e,t)=>{try{let i=!0,r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{t(n.error?.message||"")}}catch(e){t(e)}})}function q(){return!("u"<typeof navigator)&&!!navigator.cookieEnabled}class K extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J.prototype.create)}}class J{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){var i,r;let n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(i=a,r=n,i.replace(Q,(e,t)=>{let i=r[t];return null!=i?String(i):`<${t}?>`})):"Error",h=`${this.serviceName}: ${o} (${s}).`;return new K(s,h,n)}}let Q=/\{\$([^}]+)}/g;function $(e){return JSON.parse(e)}function Z(e){return JSON.stringify(e)}let ee=function(e){let t={},i={},r={},n="";try{let s=e.split(".");t=$(m(s[0])||""),i=$(m(s[1])||""),n=s[2],r=i.d||{},delete i.d}catch(e){}return{header:t,claims:i,data:r,signature:n}},et=function(e){let t=ee(e).claims,i=Math.floor(new Date().getTime()/1e3),r=0,n=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),n=t.hasOwnProperty("exp")?t.exp:r+86400),!!i&&!!r&&!!n&&i>=r&&i<=n},ei=function(e){let t=ee(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},er=function(e){let t=ee(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},en=function(e){let t=ee(e).claims;return"object"==typeof t&&!0===t.admin};function es(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ea(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function eo(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function eh(e,t,i){let r={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=t.call(i,e[n],n,e));return r}function ec(e){return null!==e&&"object"==typeof e}function el(e,t=2e3){let i=new S;return setTimeout(()=>i.reject("timeout!"),t),e.then(i.resolve,i.reject),i.promise}function ed(e){let t=[];for(let[i,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function eu(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[i,r]=e.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function ef(e){let t=e.indexOf("?");if(!t)return"";let i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}class ep{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=0x67452301,this.chain_[1]=0xefcdab89,this.chain_[2]=0x98badcfe,this.chain_[3]=0x10325476,this.chain_[4]=0xc3d2e1f0,this.inbuf_=0,this.total_=0}compress_(e,t){let i,r;t||(t=0);let n=this.W_;if("string"==typeof e)for(let i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=(t<<1|t>>>31)&0xffffffff}let s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],h=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(i=h^a&(o^h),r=0x5a827999):(i=a^o^h,r=0x6ed9eba1):e<60?(i=a&o|h&(a|o),r=0x8f1bbcdc):(i=a^o^h,r=0xca62c1d6);let t=(s<<5|s>>>27)+i+c+r+n[e]|0;c=h,h=o,o=(a<<30|a>>>2)&0xffffffff,a=s,s=t}this.chain_[0]=this.chain_[0]+s|0,this.chain_[1]=this.chain_[1]+a|0,this.chain_[2]=this.chain_[2]+o|0,this.chain_[3]=this.chain_[3]+h|0,this.chain_[4]=this.chain_[4]+c|0}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let i=t-this.blockSize,r=0,n=this.buf_,s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(n[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(n),s=0;break}}else for(;r<t;)if(n[s]=e[r],++s,++r,s===this.blockSize){this.compress_(n),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[t]>>r&255,++i;return e}}function eg(e,t){let i=new em(e,t);return i.subscribe.bind(i)}class em{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:i}:e).next&&(r.next=ey),void 0===r.error&&(r.error=ey),void 0===r.complete&&(r.complete=ey);let n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"u">typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ev(e,t){return(...i)=>{Promise.resolve(!0).then(()=>{e(...i)}).catch(e=>{t&&t(e)})}}function ey(){}let eb=function(e,t,i,r){let n;if(r<t?n="at least "+t:r>i&&(n=0===i?"none":"no more than "+i),n)throw Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+n+".")};function ex(e,t){return`${e} failed: ${t} argument `}function eE(e,t,i){if((!i||t)&&"string"!=typeof t)throw Error(ex(e,"namespace")+"must be a valid firebase namespace.")}function eT(e,t,i,r){if((!r||i)&&"function"!=typeof i)throw Error(ex(e,t)+"must be a valid function.")}function eA(e,t,i,r){if((!r||i)&&("object"!=typeof i||null===i))throw Error(ex(e,t)+"must be a valid context object.")}let ew=function(e){let t=[],i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){let t=n-55296;h(++r<e.length,"Surrogate pair missing trail surrogate."),n=65536+(t<<10)+(e.charCodeAt(r)-56320)}n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return t},eS=function(e){let t=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t},eC=144e5,eI=.5;function e_(e,t=1e3,i=2){let r=t*Math.pow(i,e),n=Math.round(eI*r*(Math.random()-.5)*2);return Math.min(eC,r+n)}function eO(e){return Number.isFinite(e)?e+function(e){let t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";let i=e%10;return 1===i?"st":2===i?"nd":3===i?"rd":"th"}(e):`${e}`}function eP(e){return e&&e._delegate?e._delegate:e}},{"./postinstall.mjs":"aFjCJ","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],aFjCJ:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"getDefaultsFromPostinstall",()=>s);let s=()=>void 0},{"@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"71j05":[function(e,t,i,r){i.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},i.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.exportAll=function(e,t){return Object.keys(e).forEach(function(i){"default"===i||"__esModule"===i||Object.prototype.hasOwnProperty.call(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[i]}})}),t},i.export=function(e,t,i){Object.defineProperty(e,t,{enumerable:!0,get:i})}},{}],lCYJy:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"Component",()=>a),n.export(i,"ComponentContainer",()=>c),n.export(i,"Provider",()=>h);var s=e("@firebase/util");class a{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let o="[DEFAULT]";class h{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new(0,s.Deferred);if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(i)return null;throw e}if(i)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=o){return this.instances.has(e)}getOptions(e=o){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[e,t]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let n=this.instances.get(i);return n&&e(n,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var i;let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e)===o?void 0:i,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=o){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class c{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new h(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},{"@firebase/util":"hDH52","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],ac8fF:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"FirebaseError",()=>o.FirebaseError),n.export(i,"SDK_VERSION",()=>M),n.export(i,"_DEFAULT_ENTRY_NAME",()=>f),n.export(i,"_addComponent",()=>y),n.export(i,"_addOrOverwriteComponent",()=>b),n.export(i,"_apps",()=>g),n.export(i,"_clearComponents",()=>C),n.export(i,"_components",()=>v),n.export(i,"_getProvider",()=>E),n.export(i,"_isFirebaseApp",()=>A),n.export(i,"_isFirebaseServerApp",()=>S),n.export(i,"_isFirebaseServerAppSettings",()=>w),n.export(i,"_registerComponent",()=>x),n.export(i,"_removeServiceInstance",()=>T),n.export(i,"_serverApps",()=>m),n.export(i,"deleteApp",()=>N),n.export(i,"getApp",()=>D),n.export(i,"getApps",()=>k),n.export(i,"initializeApp",()=>R),n.export(i,"initializeServerApp",()=>L),n.export(i,"onLog",()=>B),n.export(i,"registerVersion",()=>F),n.export(i,"setLogLevel",()=>U);var s=e("@firebase/component"),a=e("@firebase/logger"),o=e("@firebase/util"),h=e("idb");class c{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let l="@firebase/app",d="0.14.6",u=new(0,a.Logger)("@firebase/app"),f="[DEFAULT]",p={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},g=new Map,m=new Map,v=new Map;function y(e,t){try{e.container.addComponent(t)}catch(i){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function b(e,t){e.container.addOrOverwriteComponent(t)}function x(e){let t=e.name;if(v.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;for(let i of(v.set(t,e),g.values()))y(i,e);for(let t of m.values())y(t,e);return!0}function E(e,t){let i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function T(e,t,i=f){E(e,t).clearInstance(i)}function A(e){return void 0!==e.options}function w(e){return!A(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function S(e){return null!=e&&void 0!==e.settings}function C(){v.clear()}let I=new(0,o.ErrorFactory)("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new(0,s.Component)("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw I.create("app-deleted",{appName:this._name})}}function O(e,t){let i=(0,o.base64Decode)(e.split(".")[1]);null===i?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(i).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(i).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class P extends _{constructor(e,t,i,r){let n=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:i,automaticDataCollectionEnabled:n};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig={automaticDataCollectionEnabled:n,...t},this._serverConfig.authIdToken&&O(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&O(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"u">typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,F(l,d,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){N(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw I.create("server-app-deleted")}}let M="12.6.0";function R(e,t={}){let i=e;"object"!=typeof t&&(t={name:t});let r={name:f,automaticDataCollectionEnabled:!0,...t},n=r.name;if("string"!=typeof n||!n)throw I.create("bad-app-name",{appName:String(n)});if(i||(i=(0,o.getDefaultAppConfig)()),!i)throw I.create("no-options");let a=g.get(n);if(a)if((0,o.deepEqual)(i,a.options)&&(0,o.deepEqual)(r,a.config))return a;else throw I.create("duplicate-app",{appName:n});let h=new(0,s.ComponentContainer)(n);for(let e of v.values())h.addComponent(e);let c=new _(i,r,h);return g.set(n,c),c}function L(e,t={}){let i;if((0,o.isBrowser)()&&!(0,o.isWebWorker)())throw I.create("invalid-server-app-environment");let r=t||{};if(e&&(A(e)?i=e.options:w(e)?r=e:i=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),i||(i=(0,o.getDefaultAppConfig)()),!i)throw I.create("no-options");let n={...r,...i};if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==r.releaseOnDeref&&"u"<typeof FinalizationRegistry)throw I.create("finalization-registry-not-supported",{});let a=""+[...JSON.stringify(n)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),h=m.get(a);if(h)return h.incRefCount(r.releaseOnDeref),h;let c=new(0,s.ComponentContainer)(a);for(let e of v.values())c.addComponent(e);let l=new P(i,r,a,c);return m.set(a,l),l}function D(e=f){let t=g.get(e);if(!t&&e===f&&(0,o.getDefaultAppConfig)())return R();if(!t)throw I.create("no-app",{appName:e});return t}function k(){return Array.from(g.values())}async function N(e){let t=!1,i=e.name;g.has(i)?(t=!0,g.delete(i)):m.has(i)&&0>=e.decRefCount()&&(m.delete(i),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function F(e,t,i){let r=p[e]??e;i&&(r+=`-${i}`);let n=r.match(/\s|\//),a=t.match(/\s|\//);if(n||a){let e=[`Unable to register library "${r}" with version "${t}":`];n&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),n&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),u.warn(e.join(" "));return}x(new(0,s.Component)(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function B(e,t){if(null!==e&&"function"!=typeof e)throw I.create("invalid-log-argument");(0,a.setUserLogHandler)(e,t)}function U(e){(0,a.setLogLevel)(e)}let G="firebase-heartbeat-store",V=null;function Y(){return V||(V=(0,h.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(G)}catch(e){console.warn(e)}}}).catch(e=>{throw I.create("idb-open",{originalErrorMessage:e.message})})),V}async function j(e){try{let t=(await Y()).transaction(G),i=await t.objectStore(G).get(z(e));return await t.done,i}catch(e){if(e instanceof o.FirebaseError)u.warn(e.message);else{let t=I.create("idb-get",{originalErrorMessage:e?.message});u.warn(t.message)}}}async function W(e,t){try{let i=(await Y()).transaction(G,"readwrite"),r=i.objectStore(G);await r.put(t,z(e)),await i.done}catch(e){if(e instanceof o.FirebaseError)u.warn(e.message);else{let t=I.create("idb-set",{originalErrorMessage:e?.message});u.warn(t.message)}}}function z(e){return`${e.name}!${e.options.appId}`}class H{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new q(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=X();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){u.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=X(),{heartbeatsToSend:t,unsentEntries:i}=function(e,t=1024){let i=[],r=e.slice();for(let n of e){let e=i.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),K(i)>t){e.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),K(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return u.warn(e),""}}}function X(){return new Date().toISOString().substring(0,10)}class q{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.isIndexedDBAvailable)()&&(0,o.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await j(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return W(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return W(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function K(e){return(0,o.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}x(new(0,s.Component)("platform-logger",e=>new c(e),"PRIVATE")),x(new(0,s.Component)("heartbeat",e=>new H(e),"PRIVATE")),F(l,d,""),F(l,d,"esm2020"),F("fire-js","")},{"@firebase/component":"lCYJy","@firebase/logger":"8Ggjd","@firebase/util":"hDH52",idb:"4U9ZZ","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"8Ggjd":[function(e,t,i,r){var n,s,a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"LogLevel",()=>s),a.export(i,"Logger",()=>u),a.export(i,"setLogLevel",()=>f),a.export(i,"setUserLogHandler",()=>p);let o=[];(n=s||(s={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT";let h={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,l={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},d=(e,t,...i)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),n=l[t];if(n)console[n](`[${r}]  ${e.name}:`,...i);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class u{constructor(e){this.name=e,this._logLevel=c,this._logHandler=d,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?h[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...e),this._logHandler(this,s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...e),this._logHandler(this,s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,s.INFO,...e),this._logHandler(this,s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,s.WARN,...e),this._logHandler(this,s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...e),this._logHandler(this,s.ERROR,...e)}}function f(e){o.forEach(t=>{t.setLogLevel(e)})}function p(e,t){for(let i of o){let r=null;t&&t.level&&(r=h[t.level]),null===e?i.userLogHandler=null:i.userLogHandler=(t,i,...n)=>{let a=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(r??t.logLevel)&&e({level:s[i].toLowerCase(),message:a,args:n,type:t.name})}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"4U9ZZ":[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"unwrap",()=>s.u),n.export(i,"wrap",()=>s.w),n.export(i,"deleteDB",()=>o),n.export(i,"openDB",()=>a);var s=e("./wrap-idb-value.js");function a(e,t,{blocked:i,upgrade:r,blocking:n,terminated:o}={}){let h=indexedDB.open(e,t),c=(0,s.w)(h);return r&&h.addEventListener("upgradeneeded",e=>{r((0,s.w)(h.result),e.oldVersion,e.newVersion,(0,s.w)(h.transaction),e)}),i&&h.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),c.then(e=>{o&&e.addEventListener("close",()=>o()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),c}function o(e,{blocked:t}={}){let i=indexedDB.deleteDatabase(e);return t&&i.addEventListener("blocked",e=>t(e.oldVersion,e)),(0,s.w)(i).then(()=>void 0)}let h=["get","getKey","getAll","getAllKeys","count"],c=["put","add","delete","clear"],l=new Map;function d(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(l.get(t))return l.get(t);let i=t.replace(/FromIndex$/,""),r=t!==i,n=c.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(n||h.includes(i)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[i](...t),n&&s.done]))[0]};return l.set(t,s),s}(0,s.r)(e=>({...e,get:(t,i,r)=>d(t,i)||e.get(t,i,r),has:(t,i)=>!!d(t,i)||e.has(t,i)}))},{"./wrap-idb-value.js":"78EvF","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"78EvF":[function(e,t,i,r){let n,s;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"a",()=>u),a.export(i,"i",()=>o),a.export(i,"r",()=>p),a.export(i,"u",()=>m),a.export(i,"w",()=>g);let o=(e,t)=>t.some(t=>e instanceof t),h=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,u=new WeakMap,f={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return g(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){f=e(f)}function g(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(g(e.result)),r()},s=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&h.set(t,e)}).catch(()=>{}),u.set(t,e),t}if(d.has(e))return d.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),g(h.get(this))}:function(...t){return g(e.apply(m(this),t))}:function(t,...i){let r=e.call(m(this),t,...i);return l.set(r,t.sort?t.sort():[t]),g(r)};return(e instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),r()},s=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});c.set(e,t)}(e),o(e,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,f):e}(e);return t!==e&&(d.set(e,t),u.set(t,e)),t}let m=e=>u.get(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"3rlQI":[function(e,t,i,r){e("@firebase/analytics-compat")},{"@firebase/analytics-compat":"g3Qpn"}],g3Qpn:[function(e,t,i,r){var n,s,a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"registerAnalytics",()=>f);var o=e("@firebase/app-compat"),h=a.interopDefault(o),c=e("@firebase/analytics"),l=e("@firebase/component");class d{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,i){(0,c.logEvent)(this._delegate,e,t,i)}setCurrentScreen(e,t){(0,c.setCurrentScreen)(this._delegate,e,t)}setUserId(e,t){(0,c.setUserId)(this._delegate,e,t)}setUserProperties(e,t){(0,c.setUserProperties)(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){(0,c.setAnalyticsCollectionEnabled)(this._delegate,e)}}(n=s||(s={})).ADD_SHIPPING_INFO="add_shipping_info",n.ADD_PAYMENT_INFO="add_payment_info",n.ADD_TO_CART="add_to_cart",n.ADD_TO_WISHLIST="add_to_wishlist",n.BEGIN_CHECKOUT="begin_checkout",n.CHECKOUT_PROGRESS="checkout_progress",n.EXCEPTION="exception",n.GENERATE_LEAD="generate_lead",n.LOGIN="login",n.PAGE_VIEW="page_view",n.PURCHASE="purchase",n.REFUND="refund",n.REMOVE_FROM_CART="remove_from_cart",n.SCREEN_VIEW="screen_view",n.SEARCH="search",n.SELECT_CONTENT="select_content",n.SELECT_ITEM="select_item",n.SELECT_PROMOTION="select_promotion",n.SET_CHECKOUT_OPTION="set_checkout_option",n.SHARE="share",n.SIGN_UP="sign_up",n.TIMING_COMPLETE="timing_complete",n.VIEW_CART="view_cart",n.VIEW_ITEM="view_item",n.VIEW_ITEM_LIST="view_item_list",n.VIEW_PROMOTION="view_promotion",n.VIEW_SEARCH_RESULTS="view_search_results";let u=e=>new d(e.getProvider("app-compat").getImmediate(),e.getProvider("analytics").getImmediate());function f(){let e={Analytics:d,settings:c.settings,isSupported:c.isSupported,EventName:s};h.default.INTERNAL.registerComponent(new(0,l.Component)("analytics-compat",u,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}f(),h.default.registerVersion("@firebase/analytics-compat","0.2.25")},{"@firebase/app-compat":"iSRwc","@firebase/analytics":"8jrfp","@firebase/component":"lCYJy","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"8jrfp":[function(e,t,i,r){let n,s,a,o;var h=e("@parcel/transformer-js/src/esmodule-helpers.js");h.defineInteropFlag(i),h.export(i,"getAnalytics",()=>Y),h.export(i,"getGoogleAnalyticsClientId",()=>H),h.export(i,"initializeAnalytics",()=>j),h.export(i,"isSupported",()=>W),h.export(i,"logEvent",()=>Q),h.export(i,"setAnalyticsCollectionEnabled",()=>K),h.export(i,"setConsent",()=>$),h.export(i,"setCurrentScreen",()=>z),h.export(i,"setDefaultEventParameters",()=>J),h.export(i,"setUserId",()=>X),h.export(i,"setUserProperties",()=>q),h.export(i,"settings",()=>V);var c=e("@firebase/app"),l=e("@firebase/logger"),d=e("@firebase/util"),u=e("@firebase/component");e("@firebase/installations");let f="analytics",p="https://www.googletagmanager.com/gtag/js",g=new(0,l.Logger)("@firebase/analytics"),m=new(0,d.ErrorFactory)("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function v(e){if(!e.startsWith(p)){let t=m.create("invalid-gtag-resource",{gtagURL:e});return g.warn(t.message),""}return e}function y(e){return Promise.all(e.map(e=>e.catch(e=>e)))}async function b(e,t,i,r,n,s){let a=r[n];try{if(a)await t[a];else{let e=(await y(i)).find(e=>e.measurementId===n);e&&await t[e.appId]}}catch(e){g.error(e)}e("config",n,s)}async function x(e,t,i,r,n){try{let s=[];if(n&&n.send_to){let e=n.send_to;Array.isArray(e)||(e=[e]);let r=await y(i);for(let i of e){let e=r.find(e=>e.measurementId===i),n=e&&t[e.appId];if(n)s.push(n);else{s=[];break}}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,n||{})}catch(e){g.error(e)}}let E=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};async function T(e){let{appId:t,apiKey:i}=e,r={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(n,r);if(200!==s.status&&304!==s.status){let e="";try{let t=await s.json();t.error?.message&&(e=t.error.message)}catch(e){}throw m.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}async function A(e,t=E,i){let{appId:r,apiKey:n,measurementId:s}=e.options;if(!r)throw m.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw m.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new S;return setTimeout(async()=>{o.abort()},void 0!==i?i:6e4),w({appId:r,apiKey:n,measurementId:s},a,o,t)}async function w(e,{throttleEndTimeMillis:t,backoffCount:i},r,n=E){let{appId:s,measurementId:a}=e;try{var o,h;await (o=r,h=t,new Promise((e,t)=>{let i=setTimeout(e,Math.max(h-Date.now(),0));o.addEventListener(()=>{clearTimeout(i),t(m.create("fetch-throttle",{throttleEndTimeMillis:h}))})}))}catch(e){if(a)return g.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:s,measurementId:a};throw e}try{let t=await T(e);return n.deleteThrottleMetadata(s),t}catch(h){if(!function(e){if(!(e instanceof d.FirebaseError)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(h)){if(n.deleteThrottleMetadata(s),a)return g.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:s,measurementId:a};throw h}let t=503===Number(h?.customData?.httpStatus)?(0,d.calculateBackoffMillis)(i,n.intervalMillis,30):(0,d.calculateBackoffMillis)(i,n.intervalMillis),o={throttleEndTimeMillis:Date.now()+t,backoffCount:i+1};return n.setThrottleMetadata(s,o),g.debug(`Calling attemptFetch again in ${t} millis`),w(e,o,r,n)}}class S{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function C(e,t,i,r,n){if(n&&n.global)return void e("event",i,r);{let n=await t;e("event",i,{...r,send_to:n})}}async function I(e,t,i,r){if(r&&r.global)return e("set",{screen_name:i}),Promise.resolve();e("config",await t,{update:!0,screen_name:i})}async function _(e,t,i,r){if(r&&r.global)return e("set",{user_id:i}),Promise.resolve();e("config",await t,{update:!0,user_id:i})}async function O(e,t,i,r){if(r&&r.global){let t={};for(let e of Object.keys(i))t[`user_properties.${e}`]=i[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:i})}async function P(e,t){let i=await t;return new Promise((t,r)=>{e("get",i,"client_id",e=>{e||r(m.create("no-client-id")),t(e)})})}async function M(e,t){let i=await e;window[`ga-disable-${i}`]=!t}async function R(){if(!(0,d.isIndexedDBAvailable)())return g.warn(m.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await (0,d.validateIndexedDBOpenable)()}catch(e){return g.warn(m.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}async function L(e,t,i,r,a,o,h){var c,l;let d,u,f,m,y=A(e);y.then(t=>{i[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&g.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>g.error(e)),t.push(y);let b=R().then(e=>e?r.getId():void 0),[x,E]=await Promise.all([y,b]);!function(e){for(let t of Object.values(window.document.getElementsByTagName("script")))if(t.src&&t.src.includes(p)&&t.src.includes(e))return t;return null}(o)&&(c=x.measurementId,l={createScriptURL:v},window.trustedTypes&&(d=window.trustedTypes.createPolicy("firebase-js-sdk-policy",l)),u=d,f=document.createElement("script"),m=`${p}?l=${o}&id=${c}`,f.src=u?u?.createScriptURL(m):m,f.async=!0,document.head.appendChild(f)),s&&(a("consent","default",s),s=void 0),a("js",new Date);let T=h?.config??{};return T.origin="firebase",T.update=!0,null!=E&&(T.firebase_id=E),a("config",x.measurementId,T),n&&(a("set",n),n=void 0),x.measurementId}class D{constructor(e){this.app=e}_delete(){return delete k[this.app.options.appId],Promise.resolve()}}let k={},N=[],F={},B="dataLayer",U="gtag",G=!1;function V(e){if(G)throw m.create("already-initialized");e.dataLayerName&&(B=e.dataLayerName),e.gtagName&&(U=e.gtagName)}function Y(e=(0,c.getApp)()){e=(0,d.getModularInstance)(e);let t=(0,c._getProvider)(e,f);return t.isInitialized()?t.getImmediate():j(e)}function j(e,t={}){let i=(0,c._getProvider)(e,f);if(i.isInitialized()){let e=i.getImmediate();if((0,d.deepEqual)(t,i.getOptions()))return e;throw m.create("already-initialized")}return i.initialize({options:t})}async function W(){if((0,d.isBrowserExtension)()||!(0,d.areCookiesEnabled)()||!(0,d.isIndexedDBAvailable)())return!1;try{return await (0,d.validateIndexedDBOpenable)()}catch(e){return!1}}function z(e,t,i){e=(0,d.getModularInstance)(e),I(o,k[e.app.options.appId],t,i).catch(e=>g.error(e))}async function H(e){return e=(0,d.getModularInstance)(e),P(o,k[e.app.options.appId])}function X(e,t,i){e=(0,d.getModularInstance)(e),_(o,k[e.app.options.appId],t,i).catch(e=>g.error(e))}function q(e,t,i){e=(0,d.getModularInstance)(e),O(o,k[e.app.options.appId],t,i).catch(e=>g.error(e))}function K(e,t){M(k[(e=(0,d.getModularInstance)(e)).app.options.appId],t).catch(e=>g.error(e))}function J(e){o?o("set",e):n=e}function Q(e,t,i,r){e=(0,d.getModularInstance)(e),C(o,k[e.app.options.appId],t,i,r).catch(e=>g.error(e))}function $(e){o?o("consent","update",e):s=e}let Z="@firebase/analytics",ee="0.10.19";(0,c._registerComponent)(new(0,u.Component)(f,(e,{options:t})=>(function(e,t,i){let r=[];if((0,d.isBrowserExtension)()&&r.push("This is a browser extension environment."),(0,d.areCookiesEnabled)()||r.push("Cookies are not available."),r.length>0){let e=r.map((e,t)=>`(${t+1}) ${e}`).join(" "),t=m.create("invalid-analytics-context",{errorInfo:e});g.warn(t.message)}let n=e.options.appId;if(!n)throw m.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)g.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw m.create("no-api-key");if(null!=k[n])throw m.create("already-exists",{id:n});if(!G){var s,h,c,l;let e,t;s=B,e=[],Array.isArray(window[s])?e=window[s]:window[s]=e;let{wrappedGtag:i,gtagCore:r}=(h=B,c=U,t=function(){window[h].push(arguments)},window[c]&&"function"==typeof window[c]&&(t=window[c]),window[c]=(l=t,async function(e,...t){try{if("event"===e){let[e,i]=t;await x(l,k,N,e,i)}else if("config"===e){let[e,i]=t;await b(l,k,N,F,e,i)}else if("consent"===e){let[e,i]=t;l("consent",e,i)}else if("get"===e){let[e,i,r]=t;l("get",e,i,r)}else if("set"===e){let[e]=t;l("set",e)}else l(e,...t)}catch(e){g.error(e)}}),{gtagCore:t,wrappedGtag:window[c]});o=i,a=r,G=!0}return k[n]=L(e,N,F,t,a,B,i),new D(e)})(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,c._registerComponent)(new(0,u.Component)("analytics-internal",function(e){try{let t=e.getProvider(f).getImmediate();return{logEvent:(e,i,r)=>Q(t,e,i,r),setUserProperties:(e,i)=>q(t,e,i)}}catch(e){throw m.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),(0,c.registerVersion)(Z,ee),(0,c.registerVersion)(Z,ee,"esm2020")},{"@firebase/app":"ac8fF","@firebase/logger":"8Ggjd","@firebase/util":"hDH52","@firebase/component":"lCYJy","@firebase/installations":"cMpcY","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],cMpcY:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"deleteInstallations",()=>$),n.export(i,"getId",()=>q),n.export(i,"getInstallations",()=>ee),n.export(i,"getToken",()=>K),n.export(i,"onIdChange",()=>Z);var s=e("@firebase/app"),a=e("@firebase/component"),o=e("@firebase/util"),h=e("idb");let c="@firebase/installations",l="0.6.19",d=`w:${l}`,u="FIS_v2",f=new(0,o.ErrorFactory)("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function p(e){return e instanceof o.FirebaseError&&e.code.includes("request-failed")}function g({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function m(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function v(e,t){let i=(await t.json()).error;return f.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function b(e,{refreshToken:t}){var i;let r=y(e);return r.append("Authorization",(i=t,`${u} ${i}`)),r}async function x(e){let t=await e();return t.status>=500&&t.status<600?e():t}async function E({appConfig:e,heartbeatServiceProvider:t},{fid:i}){let r=g(e),n=y(e),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let a={method:"POST",headers:n,body:JSON.stringify({fid:i,authVersion:u,appId:e.appId,sdkVersion:d})},o=await x(()=>fetch(r,a));if(o.ok){let e=await o.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:m(e.authToken)}}throw await v("Create Installation",o)}function T(e){return new Promise(t=>{setTimeout(t,e)})}let A=/^[cdef][\w-]{21}$/;function w(e){return`${e.appName}!${e.appId}`}let S=new Map;function C(e,t){var i,r;let n,s=w(e);I(s,t),i=s,r=t,(n=O())&&n.postMessage({key:i,fid:r}),P()}function I(e,t){let i=S.get(e);if(i)for(let e of i)e(t)}let _=null;function O(){return!_&&"BroadcastChannel"in self&&((_=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{I(e.data.key,e.data.fid)}),_}function P(){0===S.size&&_&&(_.close(),_=null)}let M="firebase-installations-store",R=null;function L(){return R||(R=(0,h.openDB)("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(M)}})),R}async function D(e,t){let i=w(e),r=(await L()).transaction(M,"readwrite"),n=r.objectStore(M),s=await n.get(i);return await n.put(t,i),await r.done,s&&s.fid===t.fid||C(e,t.fid),t}async function k(e){let t=w(e),i=(await L()).transaction(M,"readwrite");await i.objectStore(M).delete(t),await i.done}async function N(e,t){let i=w(e),r=(await L()).transaction(M,"readwrite"),n=r.objectStore(M),s=await n.get(i),a=t(s);return void 0===a?await n.delete(i):await n.put(a,i),await r.done,a&&(!s||s.fid!==a.fid)&&C(e,a.fid),a}async function F(e){let t,i=await N(e.appConfig,i=>{let r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(f.create("app-offline"))};let i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=B(e,i);return{installationEntry:i,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:U(e)}:{installationEntry:t}}(e,V(i||{fid:function(){try{var e;let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let i=(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return A.test(i)?i:""}catch{return""}}(),registrationStatus:0}));return t=r.registrationPromise,r.installationEntry});return""===i.fid?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}async function B(e,t){try{let i=await E(e,t);return D(e.appConfig,i)}catch(i){throw p(i)&&409===i.customData.serverCode?await k(e.appConfig):await D(e.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function U(e){let t=await G(e.appConfig);for(;1===t.registrationStatus;)await T(100),t=await G(e.appConfig);if(0===t.registrationStatus){let{installationEntry:t,registrationPromise:i}=await F(e);return i||t}return t}function G(e){return N(e,e=>{if(!e)throw f.create("installation-not-found");return V(e)})}function V(e){var t;return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function Y({appConfig:e,heartbeatServiceProvider:t},i){let r=function(e,{fid:t}){return`${g(e)}/${t}/authTokens:generate`}(e,i),n=b(e,i),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let a={method:"POST",headers:n,body:JSON.stringify({installation:{sdkVersion:d,appId:e.appId}})},o=await x(()=>fetch(r,a));if(o.ok)return m(await o.json());throw await v("Generate Auth Token",o)}async function j(e,t=!1){let i,r=await N(e.appConfig,r=>{var n,s,a;let o;if(!X(r))throw f.create("not-registered");let h=r.authToken;if(!t&&2===(n=h).requestStatus&&(s=n,!((o=Date.now())<s.creationTime)&&!(s.creationTime+s.expiresIn<o+36e5)))return r;if(1===h.requestStatus)return i=W(e,t),r;{let t;if(!navigator.onLine)throw f.create("app-offline");let n=(a=r,t={requestStatus:1,requestTime:Date.now()},{...a,authToken:t});return i=H(e,n),n}});return i?await i:r.authToken}async function W(e,t){let i=await z(e.appConfig);for(;1===i.authToken.requestStatus;)await T(100),i=await z(e.appConfig);let r=i.authToken;return 0===r.requestStatus?j(e,t):r}function z(e){return N(e,e=>{var t;if(!X(e))throw f.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?{...e,authToken:{requestStatus:0}}:e})}async function H(e,t){try{let i=await Y(e,t),r={...t,authToken:i};return await D(e.appConfig,r),i}catch(i){if(p(i)&&(401===i.customData.serverCode||404===i.customData.serverCode))await k(e.appConfig);else{let i={...t,authToken:{requestStatus:0}};await D(e.appConfig,i)}throw i}}function X(e){return void 0!==e&&2===e.registrationStatus}async function q(e){let{installationEntry:t,registrationPromise:i}=await F(e);return i?i.catch(console.error):j(e).catch(console.error),t.fid}async function K(e,t=!1){return await J(e),(await j(e,t)).token}async function J(e){let{registrationPromise:t}=await F(e);t&&await t}async function Q(e,t){let i=function(e,{fid:t}){return`${g(e)}/${t}`}(e,t),r={method:"DELETE",headers:b(e,t)},n=await x(()=>fetch(i,r));if(!n.ok)throw await v("Delete Installation",n)}async function $(e){let{appConfig:t}=e,i=await N(t,e=>{if(!e||0!==e.registrationStatus)return e});if(i){if(1===i.registrationStatus)throw f.create("delete-pending-registration");else if(2===i.registrationStatus)if(navigator.onLine)await Q(t,i),await k(t);else throw f.create("app-offline")}}function Z(e,t){let i,r,{appConfig:n}=e;return O(),i=w(n),(r=S.get(i))||(r=new Set,S.set(i,r)),r.add(t),()=>{let e,i;e=w(n),(i=S.get(e))&&(i.delete(t),0===i.size&&S.delete(e),P())}}function ee(e=(0,s.getApp)()){return(0,s._getProvider)(e,"installations").getImmediate()}function et(e){return f.create("missing-app-config-values",{valueName:e})}let ei="installations";(0,s._registerComponent)(new(0,a.Component)(ei,e=>{let t=e.getProvider("app").getImmediate(),i=function(e){if(!e||!e.options)throw et("App Configuration");if(!e.name)throw et("App Name");for(let t of["projectId","apiKey","appId"])if(!e.options[t])throw et(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r=(0,s._getProvider)(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},"PUBLIC")),(0,s._registerComponent)(new(0,a.Component)("installations-internal",e=>{let t=e.getProvider("app").getImmediate(),i=(0,s._getProvider)(t,ei).getImmediate();return{getId:()=>q(i),getToken:e=>K(i,e)}},"PRIVATE")),(0,s.registerVersion)(c,l),(0,s.registerVersion)(c,l,"esm2020")},{"@firebase/app":"ac8fF","@firebase/component":"lCYJy","@firebase/util":"hDH52",idb:"4U9ZZ","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],i1fsJ:[function(e,t,i,r){e("@firebase/auth-compat")},{"@firebase/auth-compat":"4WtMY"}],"4WtMY":[function(e,t,i,r){var n,s=e("@parcel/transformer-js/src/esmodule-helpers.js"),a=e("@firebase/app-compat"),o=s.interopDefault(a),h=e("@firebase/auth/internal"),c=e("@firebase/component"),l=e("@firebase/util"),d=arguments[3];function u(){return self?.location?.protocol||null}function f(e=(0,l.getUA)()){return!!(("file:"===u()||"ionic:"===u()||"capacitor:"===u())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function p(){try{let e=self.localStorage,t=h._generateEventId();if(e){if(e.setItem(t,"1"),e.removeItem(t),function(e=(0,l.getUA)()){return(0,l.isIE)()&&document?.documentMode===11||function(e=(0,l.getUA)()){return/Edge\/\d+/.test(e)}(e)}())return(0,l.isIndexedDBAvailable)();return!0}}catch(e){return g()&&(0,l.isIndexedDBAvailable)()}return!1}function g(){return void 0!==d&&"WorkerGlobalScope"in d&&"importScripts"in d}function m(){return("http:"===u()||"https:"===u()||(0,l.isBrowserExtension)()||f())&&!((0,l.isReactNative)()||(0,l.isNode)())&&p()&&!g()}function v(){return f()&&"u">typeof document}async function y(){return!!v()&&new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}let b={LOCAL:"local",NONE:"none",SESSION:"session"},x=h._assert,E="persistence";async function T(e){await e._initializationPromise;let t=A(),i=h._persistenceKeyName(E,e.config.apiKey,e.name);t&&t.setItem(i,e._getPersistenceType())}function A(){try{return("u">typeof window?window:null)?.sessionStorage||null}catch(e){return null}}let w=h._assert;class S{constructor(){this.browserResolver=h._getInstance(h.browserPopupRedirectResolver),this.cordovaResolver=h._getInstance(h.cordovaPopupRedirectResolver),this.underlyingResolver=null,this._redirectPersistence=h.browserSessionPersistence,this._completeRedirectFn=h._getRedirectResult,this._overrideRedirectResult=h._overrideRedirectResult}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,r)}async _openRedirect(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return v()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return w(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await y();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function C(e){let t,{_tokenResponse:i}=e instanceof l.FirebaseError?e.customData:e;if(!i)return null;if(!(e instanceof l.FirebaseError)&&"temporaryProof"in i&&"phoneNumber"in i)return h.PhoneAuthProvider.credentialFromResult(e);let r=i.providerId;if(!r||r===h.ProviderId.PASSWORD)return null;switch(r){case h.ProviderId.GOOGLE:t=h.GoogleAuthProvider;break;case h.ProviderId.FACEBOOK:t=h.FacebookAuthProvider;break;case h.ProviderId.GITHUB:t=h.GithubAuthProvider;break;case h.ProviderId.TWITTER:t=h.TwitterAuthProvider;break;default:let{oauthIdToken:n,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=i;if(!s&&!a&&!n&&!o)return null;if(o)if(r.startsWith("saml."))return h.SAMLAuthCredential._create(r,o);else return h.OAuthCredential._fromParams({providerId:r,signInMethod:r,pendingToken:o,idToken:n,accessToken:s});return new h.OAuthProvider(r).credential({idToken:n,accessToken:s,rawNonce:c})}return e instanceof l.FirebaseError?t.credentialFromError(e):t.credentialFromResult(e)}function I(e,t){return t.catch(t=>{throw t instanceof l.FirebaseError&&function(e,t){let i=t.customData?._tokenResponse;if(t?.code==="auth/multi-factor-auth-required")t.resolver=new O(e,h.getMultiFactorResolver(e,t));else if(i){let e=C(t);e&&(t.credential=e,t.tenantId=i.tenantId||void 0,t.email=i.email||void 0,t.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{let t=e.operationType,i=e.user;return{operationType:t,credential:C(e),additionalUserInfo:h.getAdditionalUserInfo(e),user:P.getOrCreate(i)}})}async function _(e,t){let i=await t;return{verificationId:i.verificationId,confirm:t=>I(e,i.confirm(t))}}class O{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return I(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}class P{constructor(e){this._delegate=e,this.multiFactor=h.multiFactor(e)}static getOrCreate(e){return P.USER_MAP.has(e)||P.USER_MAP.set(e,new P(e)),P.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return I(this.auth,h.linkWithCredential(this._delegate,e))}async linkWithPhoneNumber(e,t){return _(this.auth,h.linkWithPhoneNumber(this._delegate,e,t))}async linkWithPopup(e){return I(this.auth,h.linkWithPopup(this._delegate,e,S))}async linkWithRedirect(e){return await T(h._castAuth(this.auth)),h.linkWithRedirect(this._delegate,e,S)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return I(this.auth,h.reauthenticateWithCredential(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return _(this.auth,h.reauthenticateWithPhoneNumber(this._delegate,e,t))}reauthenticateWithPopup(e){return I(this.auth,h.reauthenticateWithPopup(this._delegate,e,S))}async reauthenticateWithRedirect(e){return await T(h._castAuth(this.auth)),h.reauthenticateWithRedirect(this._delegate,e,S)}sendEmailVerification(e){return h.sendEmailVerification(this._delegate,e)}async unlink(e){return await h.unlink(this._delegate,e),this}updateEmail(e){return h.updateEmail(this._delegate,e)}updatePassword(e){return h.updatePassword(this._delegate,e)}updatePhoneNumber(e){return h.updatePhoneNumber(this._delegate,e)}updateProfile(e){return h.updateProfile(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return h.verifyBeforeUpdateEmail(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}P.USER_MAP=new WeakMap;let M=h._assert;class R{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:i}=e.options;M(i,"invalid-api-key",{appName:e.name}),M(i,"invalid-api-key",{appName:e.name});let r="u">typeof window?S:void 0;this._delegate=t.initialize({options:{persistence:function(e,t){let i=function(e,t){let i=A();if(!i)return[];let r=h._persistenceKeyName(E,e,t);switch(i.getItem(r)){case b.NONE:return[h.inMemoryPersistence];case b.LOCAL:return[h.indexedDBLocalPersistence,h.browserSessionPersistence];case b.SESSION:return[h.browserSessionPersistence];default:return[]}}(e,t);if("u">typeof self&&!i.includes(h.indexedDBLocalPersistence)&&i.push(h.indexedDBLocalPersistence),"u">typeof window)for(let e of[h.browserLocalPersistence,h.browserSessionPersistence])i.includes(e)||i.push(e);return i.includes(h.inMemoryPersistence)||i.push(h.inMemoryPersistence),i}(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(h.debugErrorMap),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?P.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){h.connectAuthEmulator(this._delegate,e,t)}applyActionCode(e){return h.applyActionCode(this._delegate,e)}checkActionCode(e){return h.checkActionCode(this._delegate,e)}confirmPasswordReset(e,t){return h.confirmPasswordReset(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return I(this._delegate,h.createUserWithEmailAndPassword(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return h.fetchSignInMethodsForEmail(this._delegate,e)}isSignInWithEmailLink(e){return h.isSignInWithEmailLink(this._delegate,e)}async getRedirectResult(){M(m(),this._delegate,"operation-not-supported-in-this-environment");let e=await h.getRedirectResult(this._delegate,S);return e?I(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){h.addFrameworkForLogging(this._delegate,e)}onAuthStateChanged(e,t,i){let{next:r,error:n,complete:s}=L(e,t,i);return this._delegate.onAuthStateChanged(r,n,s)}onIdTokenChanged(e,t,i){let{next:r,error:n,complete:s}=L(e,t,i);return this._delegate.onIdTokenChanged(r,n,s)}sendSignInLinkToEmail(e,t){return h.sendSignInLinkToEmail(this._delegate,e,t)}sendPasswordResetEmail(e,t){return h.sendPasswordResetEmail(this._delegate,e,t||void 0)}async setPersistence(e){var t;let i;switch(t=this._delegate,(x(Object.values(b).includes(e),t,"invalid-persistence-type"),(0,l.isReactNative)())?x(e!==b.SESSION,t,"unsupported-persistence-type"):(0,l.isNode)()?x(e===b.NONE,t,"unsupported-persistence-type"):g()?x(e===b.NONE||e===b.LOCAL&&(0,l.isIndexedDBAvailable)(),t,"unsupported-persistence-type"):x(e===b.NONE||p(),t,"unsupported-persistence-type"),e){case b.SESSION:i=h.browserSessionPersistence;break;case b.LOCAL:i=await h._getInstance(h.indexedDBLocalPersistence)._isAvailable()?h.indexedDBLocalPersistence:h.browserLocalPersistence;break;case b.NONE:i=h.inMemoryPersistence;break;default:return h._fail("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(i)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return I(this._delegate,h.signInAnonymously(this._delegate))}signInWithCredential(e){return I(this._delegate,h.signInWithCredential(this._delegate,e))}signInWithCustomToken(e){return I(this._delegate,h.signInWithCustomToken(this._delegate,e))}signInWithEmailAndPassword(e,t){return I(this._delegate,h.signInWithEmailAndPassword(this._delegate,e,t))}signInWithEmailLink(e,t){return I(this._delegate,h.signInWithEmailLink(this._delegate,e,t))}signInWithPhoneNumber(e,t){return _(this._delegate,h.signInWithPhoneNumber(this._delegate,e,t))}async signInWithPopup(e){return M(m(),this._delegate,"operation-not-supported-in-this-environment"),I(this._delegate,h.signInWithPopup(this._delegate,e,S))}async signInWithRedirect(e){return M(m(),this._delegate,"operation-not-supported-in-this-environment"),await T(this._delegate),h.signInWithRedirect(this._delegate,e,S)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return h.verifyPasswordResetCode(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function L(e,t,i){let r=e;"function"!=typeof e&&({next:r,error:t,complete:i}=e);let n=r;return{next:e=>n(e&&P.getOrCreate(e)),error:t,complete:i}}R.Persistence=b;class D{static credential(e,t){return h.PhoneAuthProvider.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new h.PhoneAuthProvider(o.default.auth().unwrap())}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}D.PHONE_SIGN_IN_METHOD=h.PhoneAuthProvider.PHONE_SIGN_IN_METHOD,D.PROVIDER_ID=h.PhoneAuthProvider.PROVIDER_ID;let k=h._assert;(n=o.default).INTERNAL.registerComponent(new(0,c.Component)("auth-compat",e=>new R(e.getProvider("app-compat").getImmediate(),e.getProvider("auth")),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:h.ActionCodeOperation.EMAIL_SIGNIN,PASSWORD_RESET:h.ActionCodeOperation.PASSWORD_RESET,RECOVER_EMAIL:h.ActionCodeOperation.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:h.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:h.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:h.ActionCodeOperation.VERIFY_EMAIL}},EmailAuthProvider:h.EmailAuthProvider,FacebookAuthProvider:h.FacebookAuthProvider,GithubAuthProvider:h.GithubAuthProvider,GoogleAuthProvider:h.GoogleAuthProvider,OAuthProvider:h.OAuthProvider,SAMLAuthProvider:h.SAMLAuthProvider,PhoneAuthProvider:D,PhoneMultiFactorGenerator:h.PhoneMultiFactorGenerator,RecaptchaVerifier:class e{constructor(e,t,i=o.default.app()){k(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new h.RecaptchaVerifier(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:h.TwitterAuthProvider,Auth:R,AuthCredential:h.AuthCredential,Error:l.FirebaseError}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion("@firebase/auth-compat","0.6.2")},{"@firebase/app-compat":"iSRwc","@firebase/auth/internal":"fyeNN","@firebase/component":"lCYJy","@firebase/util":"hDH52","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],fyeNN:[function(e,t,i,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"ActionCodeOperation",()=>s.A),n.export(i,"ActionCodeURL",()=>s.aj),n.export(i,"AuthCredential",()=>s.M),n.export(i,"AuthErrorCodes",()=>s.J),n.export(i,"AuthImpl",()=>s.aM),n.export(i,"AuthPopup",()=>s.aP),n.export(i,"EmailAuthCredential",()=>s.N),n.export(i,"EmailAuthProvider",()=>s.W),n.export(i,"FacebookAuthProvider",()=>s.X),n.export(i,"FactorId",()=>s.F),n.export(i,"FetchProvider",()=>s.aQ),n.export(i,"GithubAuthProvider",()=>s.Z),n.export(i,"GoogleAuthProvider",()=>s.Y),n.export(i,"OAuthCredential",()=>s.Q),n.export(i,"OAuthProvider",()=>s._),n.export(i,"OperationType",()=>s.O),n.export(i,"PhoneAuthCredential",()=>s.U),n.export(i,"PhoneAuthProvider",()=>s.P),n.export(i,"PhoneMultiFactorGenerator",()=>s.n),n.export(i,"ProviderId",()=>s.q),n.export(i,"RecaptchaVerifier",()=>s.R),n.export(i,"SAMLAuthCredential",()=>s.aR),n.export(i,"SAMLAuthProvider",()=>s.$),n.export(i,"SignInMethod",()=>s.S),n.export(i,"TotpMultiFactorGenerator",()=>s.T),n.export(i,"TotpSecret",()=>s.o),n.export(i,"TwitterAuthProvider",()=>s.a0),n.export(i,"UserImpl",()=>s.aL),n.export(i,"_assert",()=>s.aD),n.export(i,"_castAuth",()=>s.aK),n.export(i,"_fail",()=>s.ay),n.export(i,"_generateEventId",()=>s.aO),n.export(i,"_getClientVersion",()=>s.aN),n.export(i,"_getInstance",()=>s.aF),n.export(i,"_getRedirectResult",()=>s.aH),n.export(i,"_overrideRedirectResult",()=>s.aI),n.export(i,"_persistenceKeyName",()=>s.aG),n.export(i,"applyActionCode",()=>s.a8),n.export(i,"beforeAuthStateChanged",()=>s.y),n.export(i,"browserCookiePersistence",()=>s.a),n.export(i,"browserLocalPersistence",()=>s.b),n.export(i,"browserPopupRedirectResolver",()=>s.m),n.export(i,"browserSessionPersistence",()=>s.c),n.export(i,"checkActionCode",()=>s.a9),n.export(i,"confirmPasswordReset",()=>s.a7),n.export(i,"connectAuthEmulator",()=>s.L),n.export(i,"createUserWithEmailAndPassword",()=>s.ab),n.export(i,"debugErrorMap",()=>s.H),n.export(i,"deleteUser",()=>s.G),n.export(i,"fetchSignInMethodsForEmail",()=>s.ag),n.export(i,"getAdditionalUserInfo",()=>s.ar),n.export(i,"getAuth",()=>s.p),n.export(i,"getIdToken",()=>s.ao),n.export(i,"getIdTokenResult",()=>s.ap),n.export(i,"getMultiFactorResolver",()=>s.at),n.export(i,"getRedirectResult",()=>s.k),n.export(i,"inMemoryPersistence",()=>s.V),n.export(i,"indexedDBLocalPersistence",()=>s.i),n.export(i,"initializeAuth",()=>s.K),n.export(i,"initializeRecaptchaConfig",()=>s.v),n.export(i,"isSignInWithEmailLink",()=>s.ae),n.export(i,"linkWithCredential",()=>s.a3),n.export(i,"linkWithPhoneNumber",()=>s.l),n.export(i,"linkWithPopup",()=>s.e),n.export(i,"linkWithRedirect",()=>s.h),n.export(i,"multiFactor",()=>s.au),n.export(i,"onAuthStateChanged",()=>s.z),n.export(i,"onIdTokenChanged",()=>s.x),n.export(i,"parseActionCodeURL",()=>s.ak),n.export(i,"prodErrorMap",()=>s.I),n.export(i,"reauthenticateWithCredential",()=>s.a4),n.export(i,"reauthenticateWithPhoneNumber",()=>s.r),n.export(i,"reauthenticateWithPopup",()=>s.f),n.export(i,"reauthenticateWithRedirect",()=>s.j),n.export(i,"reload",()=>s.as),n.export(i,"revokeAccessToken",()=>s.E),n.export(i,"sendEmailVerification",()=>s.ah),n.export(i,"sendPasswordResetEmail",()=>s.a6),n.export(i,"sendSignInLinkToEmail",()=>s.ad),n.export(i,"setPersistence",()=>s.t),n.export(i,"signInAnonymously",()=>s.a1),n.export(i,"signInWithCredential",()=>s.a2),n.export(i,"signInWithCustomToken",()=>s.a5),n.export(i,"signInWithEmailAndPassword",()=>s.ac),n.export(i,"signInWithEmailLink",()=>s.af),n.export(i,"signInWithPhoneNumber",()=>s.s),n.export(i,"signInWithPopup",()=>s.d),n.export(i,"signInWithRedirect",()=>s.g),n.export(i,"signOut",()=>s.D),n.export(i,"unlink",()=>s.aq),n.export(i,"updateCurrentUser",()=>s.C),n.export(i,"updateEmail",()=>s.am),n.export(i,"updatePassword",()=>s.an),n.export(i,"updatePhoneNumber",()=>s.u),n.export(i,"updateProfile",()=>s.al),n.export(i,"useDeviceLanguage",()=>s.B),n.export(i,"validatePassword",()=>s.w),n.export(i,"verifyBeforeUpdateEmail",()=>s.ai),n.export(i,"verifyPasswordResetCode",()=>s.aa),n.export(i,"addFrameworkForLogging",()=>b),n.export(i,"cordovaPopupRedirectResolver",()=>v);var s=e("./index-36fcbc82.js"),a=e("@firebase/util");function o(){return window}async function h(e,t,i){let{BuildInfo:r}=o();(0,s.av)(t.sessionId,"AuthEvent did not contain a session ID");let n=await d(t.sessionId),a={};return(0,s.aw)()?a.ibi=r.packageName:(0,s.ax)()?a.apn=r.packageName:(0,s.ay)(e,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=n,(0,s.az)(e,i,t.type,void 0,t.eventId??void 0,a)}async function c(e){let{BuildInfo:t}=o(),i={};(0,s.aw)()?i.iosBundleId=t.packageName:(0,s.ax)()?i.androidPackageName=t.packageName:(0,s.ay)(e,"operation-not-supported-in-this-environment"),await (0,s.aA)(e,i)}async function l(e,t,i){let{cordova:r}=o(),n=()=>{};try{await new Promise((a,o)=>{let h=null;function c(){a();let e=r.plugins.browsertab?.close;"function"==typeof e&&e(),"function"==typeof i?.close&&i.close()}function l(){h||(h=window.setTimeout(()=>{o((0,s.aC)(e,"redirect-cancelled-by-user"))},2e3))}function d(){document?.visibilityState==="visible"&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),(0,s.ax)()&&document.addEventListener("visibilitychange",d,!1),n=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",d,!1),h&&window.clearTimeout(h)}})}finally{n()}}async function d(e){let t=function(e){if((0,s.av)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"u">typeof TextEncoder)return new TextEncoder().encode(e);let t=new Uint8Array(new ArrayBuffer(e.length));for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}e("@firebase/app"),e("@firebase/logger"),e("@firebase/component");class u extends s.aE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function f(e){let t=await p()._get(g(e));return t&&await p()._remove(g(e)),t}function p(){return(0,s.aF)(s.b)}function g(e){return(0,s.aG)("authEvent",e.config.apiKey,e.name)}function m(e){if(!e?.includes("?"))return{};let[t,...i]=e.split("?");return(0,a.querystringDecode)(i.join("?"))}let v=class{constructor(){this._redirectPersistence=s.c,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aH,this._overrideRedirectResult=s.aI}async _initialize(e){let t=e._key(),i=this.eventManagers.get(t);return i||(i=new u(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){(0,s.ay)(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,r){let n;n=o(),(0,s.aD)("function"==typeof n?.universalLinks?.subscribe,e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.aD)(void 0!==n?.BuildInfo?.packageName,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.aD)("function"==typeof n?.cordova?.plugins?.browsertab?.openUrl,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aD)("function"==typeof n?.cordova?.plugins?.browsertab?.isAvailable,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aD)("function"==typeof n?.cordova?.InAppBrowser?.open,e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"});let a=await this._initialize(e);await a.initialized(),a.resetRedirect(),(0,s.aJ)(),await this._originValidation(e);let c=function(e,t,i=null){return{type:t,eventId:i,urlResponse:null,sessionId:function(){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<20;i++){let i=Math.floor(Math.random()*t.length);e.push(t.charAt(i))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:(0,s.aC)(e,"no-auth-event")}}(e,i,r);await p()._set(g(e),c);let d=await h(e,c,t);return l(e,a,await function(e){let{cordova:t}=o();return new Promise(i=>{t.plugins.browsertab.isAvailable(r=>{let n=null;r?t.plugins.browsertab.openUrl(e):n=t.InAppBrowser.open(e,(0,s.aB)()?"_blank":"_system","location=yes"),i(n)})})}(d))}_isIframeWebStorageSupported(e,t){throw Error("Method not implemented.")}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){let{universalLinks:i,handleOpenURL:r,BuildInfo:n}=o(),a=setTimeout(async()=>{await f(e),t.onEvent(y())},500),h=async i=>{clearTimeout(a);let r=await f(e),n=null;r&&i?.url&&(n=function(e,t){var i;let r,n,a,o,h=(n=(r=m(i=t)).link?decodeURIComponent(r.link):void 0,a=m(n).link,m(o=r.deep_link_id?decodeURIComponent(r.deep_link_id):void 0).link||o||a||n||i);if(h.includes("/__/auth/callback")){let t=m(h),i=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,r=i?.code?.split("auth/")?.[1],n=r?(0,s.aC)(r):null;return n?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:n,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:h,postBody:null}}return null}(r,i.url)),t.onEvent(n||y())};void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,h);let c=`${n.packageName.toLowerCase()}://`;o().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&h({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}}}};function y(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.aC)("no-auth-event")}}function b(e,t){(0,s.aK)(e)._logFramework(t)}},{"./index-36fcbc82.js":"dlBCn","@firebase/util":"hDH52","@firebase/app":"ac8fF","@firebase/logger":"8Ggjd","@firebase/component":"lCYJy","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],dlBCn:[function(e,t,i,r){var n,s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(i),s.export(i,"$",()=>tC),s.export(i,"A",()=>p),s.export(i,"B",()=>ix),s.export(i,"C",()=>iE),s.export(i,"D",()=>iT),s.export(i,"E",()=>iA),s.export(i,"F",()=>l),s.export(i,"G",()=>iw),s.export(i,"H",()=>m),s.export(i,"I",()=>v),s.export(i,"J",()=>b),s.export(i,"K",()=>e0),s.export(i,"L",()=>e1),s.export(i,"M",()=>e3),s.export(i,"N",()=>to),s.export(i,"O",()=>f),s.export(i,"P",()=>rl),s.export(i,"Q",()=>tc),s.export(i,"R",()=>ri),s.export(i,"S",()=>u),s.export(i,"T",()=>r6),s.export(i,"U",()=>tg),s.export(i,"V",()=>eE),s.export(i,"W",()=>ty),s.export(i,"X",()=>tT),s.export(i,"Y",()=>tA),s.export(i,"Z",()=>tw),s.export(i,"_",()=>tE),s.export(i,"a",()=>iU),s.export(i,"a0",()=>tI),s.export(i,"a1",()=>tM),s.export(i,"a2",()=>tG),s.export(i,"a3",()=>tV),s.export(i,"a4",()=>tY),s.export(i,"a5",()=>tW),s.export(i,"a6",()=>tJ),s.export(i,"a7",()=>tQ),s.export(i,"a8",()=>t$),s.export(i,"a9",()=>tZ),s.export(i,"aA",()=>rY),s.export(i,"aB",()=>eL),s.export(i,"aC",()=>A),s.export(i,"aD",()=>_),s.export(i,"aE",()=>rU),s.export(i,"aF",()=>eb),s.export(i,"aG",()=>eT),s.export(i,"aH",()=>rF),s.export(i,"aI",()=>rI),s.export(i,"aJ",()=>rC),s.export(i,"aK",()=>eG),s.export(i,"aL",()=>ev),s.export(i,"aM",()=>eU),s.export(i,"aN",()=>ek),s.export(i,"aO",()=>ij),s.export(i,"aP",()=>r0),s.export(i,"aQ",()=>N),s.export(i,"aR",()=>tS),s.export(i,"aa",()=>t0),s.export(i,"ab",()=>t1),s.export(i,"ac",()=>t2),s.export(i,"ad",()=>t5),s.export(i,"ae",()=>t3),s.export(i,"af",()=>t4),s.export(i,"ag",()=>t8),s.export(i,"ah",()=>t6),s.export(i,"ai",()=>t7),s.export(i,"aj",()=>tm),s.export(i,"ak",()=>tv),s.export(i,"al",()=>it),s.export(i,"am",()=>ii),s.export(i,"an",()=>ir),s.export(i,"ao",()=>ei),s.export(i,"ap",()=>er),s.export(i,"aq",()=>tk),s.export(i,"ar",()=>iu),s.export(i,"as",()=>ed),s.export(i,"at",()=>iI),s.export(i,"au",()=>iM),s.export(i,"av",()=>P),s.export(i,"aw",()=>eR),s.export(i,"ax",()=>eO),s.export(i,"ay",()=>T),s.export(i,"az",()=>r2),s.export(i,"b",()=>ik),s.export(i,"c",()=>iV),s.export(i,"d",()=>ry),s.export(i,"e",()=>rx),s.export(i,"f",()=>rb),s.export(i,"g",()=>rP),s.export(i,"h",()=>rD),s.export(i,"i",()=>i3),s.export(i,"j",()=>rR),s.export(i,"k",()=>rN),s.export(i,"l",()=>rs),s.export(i,"m",()=>r3),s.export(i,"n",()=>r8),s.export(i,"o",()=>ne),s.export(i,"p",()=>no),s.export(i,"q",()=>d),s.export(i,"r",()=>ra),s.export(i,"s",()=>rn),s.export(i,"t",()=>ip),s.export(i,"u",()=>rh),s.export(i,"v",()=>ig),s.export(i,"w",()=>im),s.export(i,"x",()=>iv),s.export(i,"y",()=>iy),s.export(i,"z",()=>ib);var a=e("@firebase/app"),o=e("@firebase/util"),h=e("@firebase/logger"),c=e("@firebase/component");let l={PHONE:"phone",TOTP:"totp"},d={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},f={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},p={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function g(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let m=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},v=g,y=new(0,o.ErrorFactory)("auth","Firebase",g()),b={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"},x=new(0,h.Logger)("@firebase/auth");function E(e,...t){x.logLevel<=h.LogLevel.ERROR&&x.error(`Auth (${a.SDK_VERSION}): ${e}`,...t)}function T(e,...t){throw I(e,...t)}function A(e,...t){return I(e,...t)}function w(e,t,i){let r={...v(),[t]:i};return new(0,o.ErrorFactory)("auth","Firebase",r).create(t,{appName:e.name})}function S(e){return w(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C(e,t,i){if(!(t instanceof i))throw i.name!==t.constructor.name&&T(e,"argument-error"),w(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I(e,...t){if("string"!=typeof e){let i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(i,...r)}return y.create(e,...t)}function _(e,t,...i){if(!e)throw I(t,...i)}function O(e){let t="INTERNAL ASSERTION FAILED: "+e;throw E(t),Error(t)}function P(e,t){e||O(t)}function M(){return"u">typeof self&&self.location?.href||""}function R(){return"http:"===L()||"https:"===L()}function L(){return"u">typeof self&&self.location?.protocol||null}class D{constructor(e,t){this.shortDelay=e,this.longDelay=t,P(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,o.isMobileCordova)()||(0,o.isReactNative)()}get(){return!("u">typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(R()||(0,o.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function k(e,t){P(e.emulator,"Emulator should always be set here");let{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class N{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"u">typeof self&&"fetch"in self?self.fetch:"u">typeof globalThis&&globalThis.fetch?globalThis.fetch:"u">typeof fetch?fetch:void O("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"u">typeof self&&"Headers"in self?self.Headers:"u">typeof globalThis&&globalThis.Headers?globalThis.Headers:"u">typeof Headers?Headers:void O("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"u">typeof self&&"Response"in self?self.Response:"u">typeof globalThis&&globalThis.Response?globalThis.Response:"u">typeof Response?Response:void O("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let F={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},B=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U=new D(3e4,6e4);function G(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function V(e,t,i,r,n={}){return Y(e,n,async()=>{let n={},s={};r&&("GET"===t?s=r:n={body:JSON.stringify(r)});let a=(0,o.querystring)({key:e.config.apiKey,...s}).slice(1),h=await e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);let c={method:t,headers:h,...n};return(0,o.isCloudflareWorker)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,o.isCloudWorkstation)(e.emulatorConfig.host)&&(c.credentials="include"),N.fetch()(await W(e,e.config.apiHost,i,a),c)})}async function Y(e,t,i){e._canInitEmulator=!1;let r={...F,...t};try{let t=new z(e),n=await Promise.race([i(),t.promise]);t.clearNetworkTimeout();let s=await n.json();if("needConfirmation"in s)throw H(e,"account-exists-with-different-credential",s);if(n.ok&&!("errorMessage"in s))return s;{let[t,i]=(n.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw H(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw H(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw H(e,"user-disabled",s);let a=r[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw w(e,a,i);T(e,a)}}catch(t){if(t instanceof o.FirebaseError)throw t;T(e,"network-request-failed",{message:String(t)})}}async function j(e,t,i,r,n={}){let s=await V(e,t,i,r,n);return"mfaPendingCredential"in s&&T(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function W(e,t,i,r){let n=`${t}${i}?${r}`,s=e.config.emulator?k(e.config,n):`${e.config.apiScheme}://${n}`;return B.includes(i)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(A(this.auth,"network-request-failed")),U.get())})}}function H(e,t,i){let r={appName:e.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);let n=A(e,t,r);return n.customData._tokenResponse=i,n}function X(e){return void 0!==e&&void 0!==e.getResponse}function q(e){return void 0!==e&&void 0!==e.enterprise}class K{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function J(e){return(await V(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Q(e,t){return V(e,"GET","/v2/recaptchaConfig",G(e,t))}async function $(e,t){return V(e,"POST","/v1/accounts:delete",t)}async function Z(e,t){return V(e,"POST","/v1/accounts:update",t)}async function ee(e,t){return V(e,"POST","/v1/accounts:lookup",t)}function et(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ei(e,t=!1){return(0,o.getModularInstance)(e).getIdToken(t)}async function er(e,t=!1){let i=(0,o.getModularInstance)(e),r=await i.getIdToken(t),n=es(r);_(n&&n.exp&&n.auth_time&&n.iat,i.auth,"internal-error");let s="object"==typeof n.firebase?n.firebase:void 0,a=s?.sign_in_provider;return{claims:n,token:r,authTime:et(en(n.auth_time)),issuedAtTime:et(en(n.iat)),expirationTime:et(en(n.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function en(e){return 1e3*Number(e)}function es(e){let[t,i,r]=e.split(".");if(void 0===t||void 0===i||void 0===r)return E("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,o.base64Decode)(i);if(!e)return E("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return E("Caught error parsing JWT payload as JSON",e?.toString()),null}}function ea(e){let t=es(e);return _(t,"internal-error"),_(void 0!==t.exp,"internal-error"),_(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function eo(e,t,i=!1){if(i)return t;try{return await t}catch(t){throw t instanceof o.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class eh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(!e)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ec{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=et(this.lastLoginAt),this.creationTime=et(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function el(e){var t,i;let r=e.auth,n=await e.getIdToken(),s=await eo(e,ee(r,{idToken:n}));_(s?.users.length,r,"internal-error");let a=s.users[0];e._notifyReloadListener(a);let o=a.providerUserInfo?.length?eu(a.providerUserInfo):[],h=(t=e.providerData,i=o,[...t.filter(e=>!i.some(t=>t.providerId===e.providerId)),...i]),c=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!h?.length;Object.assign(e,{uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new ec(a.createdAt,a.lastLoginAt),isAnonymous:!!c&&l})}async function ed(e){let t=(0,o.getModularInstance)(e);await el(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function eu(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function ef(e,t){let i=await Y(e,{},async()=>{let i=(0,o.querystring)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:n}=e.config,s=await W(e,r,"/v1/token",`key=${n}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let h={method:"POST",headers:a,body:i};return e.emulatorConfig&&(0,o.isCloudWorkstation)(e.emulatorConfig.host)&&(h.credentials="include"),N.fetch()(s,h)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function ep(e,t){return V(e,"POST","/v2/accounts:revokeToken",G(e,t))}class eg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_(void 0!==e.idToken,"internal-error"),_(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ea(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_(0!==e.length,"internal-error");let t=ea(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(_(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:n}=await ef(e,t);this.updateTokensAndExpiration(i,r,Number(n))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:n}=t,s=new eg;return i&&(_("string"==typeof i,"internal-error",{appName:e}),s.refreshToken=i),r&&(_("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),n&&(_("number"==typeof n,"internal-error",{appName:e}),s.expirationTime=n),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eg,this.toJSON())}_performRefresh(){return O("not implemented")}}function em(e,t){_("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ev{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new eh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ec(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await eo(this,this.stsTokenManager.getToken(this.auth,e));return _(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return er(this,e)}reload(){return ed(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new ev({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await el(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,a._isFirebaseServerApp)(this.auth.app))return Promise.reject(S(this.auth));let e=await this.getIdToken();return await eo(this,$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,n=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,h=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:l,emailVerified:d,isAnonymous:u,providerData:f,stsTokenManager:p}=t;_(l&&p,e,"internal-error");let g=eg.fromJSON(this.name,p);_("string"==typeof l,e,"internal-error"),em(i,e.name),em(r,e.name),_("boolean"==typeof d,e,"internal-error"),_("boolean"==typeof u,e,"internal-error"),em(n,e.name),em(s,e.name),em(a,e.name),em(o,e.name),em(h,e.name),em(c,e.name);let m=new ev({uid:l,auth:e,email:r,emailVerified:d,displayName:i,isAnonymous:u,photoURL:s,phoneNumber:n,tenantId:a,stsTokenManager:g,createdAt:h,lastLoginAt:c});return f&&Array.isArray(f)&&(m.providerData=f.map(e=>({...e}))),o&&(m._redirectEventId=o),m}static async _fromIdTokenResponse(e,t,i=!1){let r=new eg;r.updateFromServerResponse(t);let n=new ev({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await el(n),n}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];_(void 0!==r.localId,"internal-error");let n=void 0!==r.providerUserInfo?eu(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!n?.length,a=new eg;a.updateFromIdToken(i);let o=new ev({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:n,metadata:new ec(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!n?.length}),o}}let ey=new Map;function eb(e){P(e instanceof Function,"Expected a class definition");let t=ey.get(e);return t?P(t instanceof e,"Instance stored in cache mismatched with class"):(t=new e,ey.set(e,t)),t}class ex{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ex.type="NONE";let eE=ex;function eT(e,t,i){return`firebase:${e}:${t}:${i}`}class eA{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:n}=this.auth;this.fullUserKey=eT(this.userKey,r.apiKey,n),this.fullPersistenceKey=eT("persistence",r.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await ee(this.auth,{idToken:e}).catch(()=>void 0);return t?ev._fromGetAccountInfoResponse(this.auth,t,e):null}return ev._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new eA(eb(eE),e,i);let r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),n=r[0]||eb(eE),s=eT(i,e.config.apiKey,e.name),a=null;for(let i of t)try{let t=await i._get(s);if(t){let r;if("string"==typeof t){let i=await ee(e,{idToken:t}).catch(()=>void 0);if(!i)break;r=await ev._fromGetAccountInfoResponse(e,i,t)}else r=ev._fromJSON(e,t);i!==n&&(a=r),n=i;break}}catch{}let o=r.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&o.length&&(n=o[0],a&&await n._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==n)try{await e._remove(s)}catch{}}))),new eA(n,e,i)}}function ew(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(e_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(eP(t))return"Blackberry";if(eM(t))return"Webos";if(eC(t))return"Safari";if((t.includes("chrome/")||eI(t))&&!t.includes("edge/"))return"Chrome";if(eO(t))return"Android";let i=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(i?.length===2)return i[1]}return"Other"}function eS(e=(0,o.getUA)()){return/firefox\//i.test(e)}function eC(e=(0,o.getUA)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eI(e=(0,o.getUA)()){return/crios\//i.test(e)}function e_(e=(0,o.getUA)()){return/iemobile/i.test(e)}function eO(e=(0,o.getUA)()){return/android/i.test(e)}function eP(e=(0,o.getUA)()){return/blackberry/i.test(e)}function eM(e=(0,o.getUA)()){return/webos/i.test(e)}function eR(e=(0,o.getUA)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eL(e=(0,o.getUA)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function eD(e=(0,o.getUA)()){return eR(e)||eO(e)||eM(e)||eP(e)||/windows phone/i.test(e)||e_(e)}function ek(e,t=[]){let i;switch(e){case"Browser":i=ew((0,o.getUA)());break;case"Worker":i=`${ew((0,o.getUA)())}-${e}`;break;default:i=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${a.SDK_VERSION}/${r}`}class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=t=>new Promise((i,r)=>{try{let r=e(t);i(r)}catch(e){r(e)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}async function eF(e,t={}){return V(e,"GET","/v2/passwordPolicy",G(e,t))}class eB{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let i;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}class eU{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eV(this),this.idTokenSubscription=new eV(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eb(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await eA.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await ee(this,{idToken:e}),i=await ev._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,a._isFirebaseServerApp)(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,n=i?._redirectEventId,s=await this.tryRedirectSignIn(e);(!t||t===n)&&s?.user&&(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await el(e)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("u"<typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,a._isFirebaseServerApp)(this.app))return Promise.reject(S(this));let t=e?(0,o.getModularInstance)(e):null;return t&&_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,a._isFirebaseServerApp)(this.app)?Promise.reject(S(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,a._isFirebaseServerApp)(this.app)?Promise.reject(S(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eb(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new eB(await eF(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new(0,o.ErrorFactory)("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await ep(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&eb(e)||this._popupRedirectResolver;_(t,this,"argument-error"),this.redirectPersistenceManager=await eA.create(this,[eb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e)?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let n="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_(a,this,"internal-error"),a.then(()=>{s||n(this.currentUser)}),"function"==typeof t){let n=e.addObserver(t,i,r);return()=>{s=!0,n()}}{let i=e.addObserver(t);return()=>{s=!0,i()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if((0,a._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&function(e,...t){x.logLevel<=h.LogLevel.WARN&&x.warn(`Auth (${a.SDK_VERSION}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eG(e){return(0,o.getModularInstance)(e)}class eV{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,o.createSubscribe)(e=>this.observer=e)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eY={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ej(e){return eY.loadJS(e)}function eW(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ez{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){let i=this.counter;return this._widgets.set(i,new eq(e,this.auth.name,t||{})),this.counter++,i}reset(e){let t=e||1e12;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){return this._widgets.get(e||1e12)?.getResponse()||""}async execute(e){return this._widgets.get(e||1e12)?.execute(),""}}class eH{constructor(){this.enterprise=new eX}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eX{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eq{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r="string"==typeof e?document.getElementById(e):e;_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let t=[],i="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(i.charAt(Math.floor(Math.random()*i.length)));return t.join("")}(50);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}let eK="NO_RECAPTCHA";class eJ{constructor(e){this.type="recaptcha-enterprise",this.auth=eG(e)}async verify(e="verify",t=!1){async function i(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,i)=>{Q(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)i(Error("recaptcha Enterprise site key undefined"));else{let i=new K(r);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}}).catch(e=>{i(e)})})}function r(t,i,r){let n=window.grecaptcha;q(n)?n.enterprise.ready(()=>{n.enterprise.execute(t,{action:e}).then(e=>{i(e)}).catch(()=>{i(eK)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eH().execute("siteKey",{action:"verify"}):new Promise((e,n)=>{i(this.auth).then(i=>{if(!t&&q(window.grecaptcha))r(i,e,n);else{if("u"<typeof window)return void n(Error("RecaptchaVerifier is only supported in browser"));let t=eY.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ej(t).then(()=>{r(i,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function eQ(e,t,i,r=!1,n=!1){let s,a=new eJ(e);if(n)s=eK;else try{s=await a.verify(i)}catch(e){s=await a.verify(i,!0)}let o={...t};if("mfaSmsEnrollment"===i||"mfaSmsSignIn"===i){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function e$(e,t,i,r,n){if("EMAIL_PASSWORD_PROVIDER"===n)if(!e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return r(e,t).catch(async n=>{if("auth/missing-recaptcha-token"!==n.code)return Promise.reject(n);{console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let n=await eQ(e,t,i,"getOobCode"===i);return r(e,n)}});else{let n=await eQ(e,t,i,"getOobCode"===i);return r(e,n)}if("PHONE_PROVIDER"!==n)return Promise.reject(n+" provider is not supported.");if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let n=await eQ(e,t,i);return r(e,n).catch(async n=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===n.code||"auth/invalid-app-credential"===n.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${i} flow.`);let n=await eQ(e,t,i,!1,!0);return r(e,n)}return Promise.reject(n)})}{let n=await eQ(e,t,i,!1,!0);return r(e,n)}}async function eZ(e){let t=eG(e),i=new K(await Q(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new eJ(t).verify()}function e0(e,t){let i=(0,a._getProvider)(e,"auth");if(i.isInitialized()){let e=i.getImmediate(),r=i.getOptions();if((0,o.deepEqual)(r,t??{}))return e;T(e,"already-initialized")}return i.initialize({options:t})}function e1(e,t,i){let r=eG(e);_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let n=!!i?.disableWarnings,s=e2(t),{host:a,port:h}=function(e){let t=e2(e),i=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!i)return{host:"",port:null};let r=i[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){let e=n[1];return{host:e,port:e5(r.substr(e.length+1))}}{let[e,t]=r.split(":");return{host:e,port:e5(t)}}}(t),c=null===h?"":`:${h}`,l={url:`${s}//${a}${c}/`},d=Object.freeze({host:a,port:h,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator){_(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_((0,o.deepEqual)(l,r.config.emulator)&&(0,o.deepEqual)(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,o.isCloudWorkstation)(a)?((0,o.pingServer)(`${s}//${a}${c}`),(0,o.updateEmulatorBanner)("Auth",!0)):n||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"u">typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"u">typeof window&&"u">typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function e2(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function e5(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class e3{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return O("not implemented")}_getIdTokenResponse(e){return O("not implemented")}_linkToIdToken(e,t){return O("not implemented")}_getReauthenticationResolver(e){return O("not implemented")}}async function e4(e,t){return V(e,"POST","/v1/accounts:resetPassword",G(e,t))}async function e9(e,t){return V(e,"POST","/v1/accounts:update",t)}async function e8(e,t){return V(e,"POST","/v1/accounts:signUp",t)}async function e6(e,t){return V(e,"POST","/v1/accounts:update",G(e,t))}async function e7(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",G(e,t))}async function te(e,t){return V(e,"POST","/v1/accounts:sendOobCode",G(e,t))}async function tt(e,t){return te(e,t)}async function ti(e,t){return te(e,t)}async function tr(e,t){return te(e,t)}async function tn(e,t){return te(e,t)}async function ts(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",G(e,t))}async function ta(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",G(e,t))}class to extends e3{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new to(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new to(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return e$(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",e7,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ts(e,{email:this._email,oobCode:this._password});default:T(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return e$(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ta(e,{idToken:t,email:this._email,oobCode:this._password});default:T(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function th(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",G(e,t))}class tc extends e3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new tc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):T("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let{providerId:t,signInMethod:i,...r}="string"==typeof e?JSON.parse(e):e;if(!t||!i)return null;let n=new tc(t,i);return n.idToken=r.idToken||void 0,n.accessToken=r.accessToken||void 0,n.secret=r.secret,n.nonce=r.nonce,n.pendingToken=r.pendingToken||null,n}_getIdTokenResponse(e){return th(e,this.buildRequest())}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,th(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,th(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,o.querystring)(t)}return e}}async function tl(e,t){return V(e,"POST","/v1/accounts:sendVerificationCode",G(e,t))}async function td(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",G(e,t))}async function tu(e,t){let i=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",G(e,t));if(i.temporaryProof)throw H(e,"account-exists-with-different-credential",i);return i}let tf={USER_NOT_FOUND:"user-not-found"};async function tp(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",G(e,{...t,operation:"REAUTH"}),tf)}class tg extends e3{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new tg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return td(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return tu(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return tp(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}=e;return i||t||r||n?new tg({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}):null}}class tm{constructor(e){let t=(0,o.querystringDecode)((0,o.extractQuerystring)(e)),i=t.apiKey??null,r=t.oobCode??null,n=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);_(i&&r&&n,"argument-error"),this.apiKey=i,this.operation=n,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t,i,r,n=(i=(t=(0,o.querystringDecode)((0,o.extractQuerystring)(e)).link)?(0,o.querystringDecode)((0,o.extractQuerystring)(t)).deep_link_id:null,((r=(0,o.querystringDecode)((0,o.extractQuerystring)(e)).deep_link_id)?(0,o.querystringDecode)((0,o.extractQuerystring)(r)).link:null)||r||i||t||e);try{return new tm(n)}catch{return null}}}function tv(e){return tm.parseLink(e)}class ty{constructor(){this.providerId=ty.PROVIDER_ID}static credential(e,t){return to._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let i=tm.parseLink(t);return _(i,"argument-error"),to._fromEmailAndCode(e,i.code,i.tenantId)}}ty.PROVIDER_ID="password",ty.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ty.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tx extends tb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tE extends tx{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return _("providerId"in t&&"signInMethod"in t,"argument-error"),tc._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return _(e.idToken||e.accessToken,"argument-error"),tc._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return tE.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tE.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:n,nonce:s,providerId:a}=e;if(!i&&!r&&!t&&!n||!a)return null;try{return new tE(a)._credential({idToken:t,accessToken:i,nonce:s,pendingToken:n})}catch(e){return null}}}class tT extends tx{constructor(){super("facebook.com")}static credential(e){return tc._fromParams({providerId:tT.PROVIDER_ID,signInMethod:tT.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tT.credentialFromTaggedObject(e)}static credentialFromError(e){return tT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tT.credential(e.oauthAccessToken)}catch{return null}}}tT.FACEBOOK_SIGN_IN_METHOD="facebook.com",tT.PROVIDER_ID="facebook.com";class tA extends tx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tc._fromParams({providerId:tA.PROVIDER_ID,signInMethod:tA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return tA.credentialFromTaggedObject(e)}static credentialFromError(e){return tA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return tA.credential(t,i)}catch{return null}}}tA.GOOGLE_SIGN_IN_METHOD="google.com",tA.PROVIDER_ID="google.com";class tw extends tx{constructor(){super("github.com")}static credential(e){return tc._fromParams({providerId:tw.PROVIDER_ID,signInMethod:tw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tw.credentialFromTaggedObject(e)}static credentialFromError(e){return tw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tw.credential(e.oauthAccessToken)}catch{return null}}}tw.GITHUB_SIGN_IN_METHOD="github.com",tw.PROVIDER_ID="github.com";class tS extends e3{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return th(e,this.buildRequest())}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,th(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,th(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let{providerId:t,signInMethod:i,pendingToken:r}="string"==typeof e?JSON.parse(e):e;return t&&i&&r&&t===i?new tS(t,r):null}static _create(e,t){return new tS(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class tC extends tb{constructor(e){_(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return tC.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return tC.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=tS.fromJSON(e);return _(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return tS._create(i,t)}catch(e){return null}}}class tI extends tx{constructor(){super("twitter.com")}static credential(e,t){return tc._fromParams({providerId:tI.PROVIDER_ID,signInMethod:tI.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tI.credentialFromTaggedObject(e)}static credentialFromError(e){return tI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return tI.credential(t,i)}catch{return null}}}async function t_(e,t){return j(e,"POST","/v1/accounts:signUp",G(e,t))}tI.TWITTER_SIGN_IN_METHOD="twitter.com",tI.PROVIDER_ID="twitter.com";class tO{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){return new tO({user:await ev._fromIdTokenResponse(e,i,r),providerId:tP(i),_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){return await e._updateTokensIfNecessary(i,!0),new tO({user:e,providerId:tP(i),_tokenResponse:i,operationType:t})}}function tP(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function tM(e){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let t=eG(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new tO({user:t.currentUser,providerId:null,operationType:"signIn"});let i=await t_(t,{returnSecureToken:!0}),r=await tO._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(r.user),r}class tR extends o.FirebaseError{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,tR.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new tR(e,t,i,r)}}function tL(e,t,i,r){return("reauthenticate"===t?i._getReauthenticationResolver(e):i._getIdTokenResponse(e)).catch(i=>{if("auth/multi-factor-auth-required"===i.code)throw tR._fromErrorAndOperation(e,i,t,r);throw i})}function tD(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function tk(e,t){let i=(0,o.getModularInstance)(e);await tF(!0,i,t);let{providerUserInfo:r}=await Z(i.auth,{idToken:await i.getIdToken(),deleteProvider:[t]}),n=tD(r||[]);return i.providerData=i.providerData.filter(e=>n.has(e.providerId)),n.has("phone")||(i.phoneNumber=null),await i.auth._persistUserIfCurrent(i),i}async function tN(e,t,i=!1){let r=await eo(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return tO._forOperation(e,"link",r)}async function tF(e,t,i){await el(t),_(tD(t.providerData).has(i)===e,t.auth,!1===e?"provider-already-linked":"no-such-provider")}async function tB(e,t,i=!1){let{auth:r}=e;if((0,a._isFirebaseServerApp)(r.app))return Promise.reject(S(r));let n="reauthenticate";try{let s=await eo(e,tL(r,n,t,e),i);_(s.idToken,r,"internal-error");let a=es(s.idToken);_(a,r,"internal-error");let{sub:o}=a;return _(e.uid===o,r,"user-mismatch"),tO._forOperation(e,n,s)}catch(e){throw e?.code==="auth/user-not-found"&&T(r,"user-mismatch"),e}}async function tU(e,t,i=!1){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r="signIn",n=await tL(e,r,t),s=await tO._fromIdTokenResponse(e,r,n);return i||await e._updateCurrentUser(s.user),s}async function tG(e,t){return tU(eG(e),t)}async function tV(e,t){let i=(0,o.getModularInstance)(e);return await tF(!1,i,t.providerId),tN(i,t)}async function tY(e,t){return tB((0,o.getModularInstance)(e),t)}async function tj(e,t){return j(e,"POST","/v1/accounts:signInWithCustomToken",G(e,t))}async function tW(e,t){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let i=eG(e),r=await tj(i,{token:t,returnSecureToken:!0}),n=await tO._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(n.user),n}class tz{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tH._fromServerResponse(e,t):"totpInfo"in t?tX._fromServerResponse(e,t):T(e,"internal-error")}}class tH extends tz{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tH(t)}}class tX extends tz{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tX(t)}}function tq(e,t,i){_(i.url?.length>0,e,"invalid-continue-uri"),_(void 0===i.dynamicLinkDomain||i.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),_(void 0===i.linkDomain||i.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=i.url,t.dynamicLinkDomain=i.dynamicLinkDomain,t.linkDomain=i.linkDomain,t.canHandleCodeInApp=i.handleCodeInApp,i.iOS&&(_(i.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=i.iOS.bundleId),i.android&&(_(i.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=i.android.installApp,t.androidMinimumVersionCode=i.android.minimumVersion,t.androidPackageName=i.android.packageName)}async function tK(e){let t=eG(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function tJ(e,t,i){let r=eG(e),n={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};i&&tq(r,n,i),await e$(r,n,"getOobCode",ti,"EMAIL_PASSWORD_PROVIDER")}async function tQ(e,t,i){await e4((0,o.getModularInstance)(e),{oobCode:t,newPassword:i}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tK(e),t})}async function t$(e,t){await e6((0,o.getModularInstance)(e),{oobCode:t})}async function tZ(e,t){let i=(0,o.getModularInstance)(e),r=await e4(i,{oobCode:t}),n=r.requestType;switch(_(n,i,"internal-error"),n){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_(r.mfaInfo,i,"internal-error");default:_(r.email,i,"internal-error")}let s=null;return r.mfaInfo&&(s=tz._fromServerResponse(eG(i),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:n}}async function t0(e,t){let{data:i}=await tZ((0,o.getModularInstance)(e),t);return i.email}async function t1(e,t,i){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r=eG(e),n=e$(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t_,"EMAIL_PASSWORD_PROVIDER"),s=await n.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tK(e),t}),o=await tO._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function t2(e,t,i){return(0,a._isFirebaseServerApp)(e.app)?Promise.reject(S(e)):tG((0,o.getModularInstance)(e),ty.credential(t,i)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tK(e),t})}async function t5(e,t,i){let r=eG(e),n={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};_(i.handleCodeInApp,r,"argument-error"),i&&tq(r,n,i),await e$(r,n,"getOobCode",tr,"EMAIL_PASSWORD_PROVIDER")}function t3(e,t){let i=tm.parseLink(t);return i?.operation==="EMAIL_SIGNIN"}async function t4(e,t,i){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r=(0,o.getModularInstance)(e),n=ty.credentialWithLink(t,i||M());return _(n._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),tG(r,n)}async function t9(e,t){return V(e,"POST","/v1/accounts:createAuthUri",G(e,t))}async function t8(e,t){let i=R()?M():"http://localhost",{signinMethods:r}=await t9((0,o.getModularInstance)(e),{identifier:t,continueUri:i});return r||[]}async function t6(e,t){let i=(0,o.getModularInstance)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&tq(i.auth,r,t);let{email:n}=await tt(i.auth,r);n!==e.email&&await e.reload()}async function t7(e,t,i){let r=(0,o.getModularInstance)(e),n={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};i&&tq(r.auth,n,i);let{email:s}=await tn(r.auth,n);s!==e.email&&await e.reload()}async function ie(e,t){return V(e,"POST","/v1/accounts:update",t)}async function it(e,{displayName:t,photoURL:i}){if(void 0===t&&void 0===i)return;let r=(0,o.getModularInstance)(e),n=await r.getIdToken(),s=await eo(r,ie(r.auth,{idToken:n,displayName:t,photoUrl:i,returnSecureToken:!0}));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;let a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function ii(e,t){let i=(0,o.getModularInstance)(e);return(0,a._isFirebaseServerApp)(i.auth.app)?Promise.reject(S(i.auth)):is(i,t,null)}function ir(e,t){return is((0,o.getModularInstance)(e),null,t)}async function is(e,t,i){let{auth:r}=e,n={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(n.email=t),i&&(n.password=i);let s=await eo(e,e9(r,n));await e._updateTokensIfNecessary(s,!0)}class ia{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class io extends ia{constructor(e,t,i,r){super(e,t,i),this.username=r}}class ih extends ia{constructor(e,t){super(e,"facebook.com",t)}}class ic extends io{constructor(e,t){super(e,"github.com",t,"string"==typeof t?.login?t?.login:null)}}class il extends ia{constructor(e,t){super(e,"google.com",t)}}class id extends io{constructor(e,t,i){super(e,"twitter.com",t,i)}}function iu(e){let{user:t,_tokenResponse:i}=e;return t.isAnonymous&&!i?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;let{providerId:t}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&e?.idToken){let t=es(e.idToken)?.firebase?.sign_in_provider;if(t)return new ia(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new ih(r,i);case"github.com":return new ic(r,i);case"google.com":return new il(r,i);case"twitter.com":return new id(r,i,e.screenName||null);case"custom":case"anonymous":return new ia(r,null);default:return new ia(r,t,i)}}(i)}function ip(e,t){return(0,o.getModularInstance)(e).setPersistence(t)}function ig(e){return eZ(e)}async function im(e,t){return eG(e).validatePassword(t)}function iv(e,t,i,r){return(0,o.getModularInstance)(e).onIdTokenChanged(t,i,r)}function iy(e,t,i){return(0,o.getModularInstance)(e).beforeAuthStateChanged(t,i)}function ib(e,t,i,r){return(0,o.getModularInstance)(e).onAuthStateChanged(t,i,r)}function ix(e){(0,o.getModularInstance)(e).useDeviceLanguage()}function iE(e,t){return(0,o.getModularInstance)(e).updateCurrentUser(t)}function iT(e){return(0,o.getModularInstance)(e).signOut()}function iA(e,t){return eG(e).revokeAccessToken(t)}async function iw(e){return(0,o.getModularInstance)(e).delete()}class iS{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new iS("enroll",e,t)}static _fromMfaPendingCredential(e){return new iS("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return iS._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);else if(e.multiFactorSession?.idToken)return iS._fromIdtoken(e.multiFactorSession.idToken)}return null}}class iC{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){let i=eG(e),r=t.customData._serverResponse,n=(r.mfaInfo||[]).map(e=>tz._fromServerResponse(i,e));_(r.mfaPendingCredential,i,"internal-error");let s=iS._fromMfaPendingCredential(r.mfaPendingCredential);return new iC(s,n,async e=>{let n=await e._process(i,s);delete r.mfaInfo,delete r.mfaPendingCredential;let a={...r,idToken:n.idToken,refreshToken:n.refreshToken};switch(t.operationType){case"signIn":let o=await tO._fromIdTokenResponse(i,t.operationType,a);return await i._updateCurrentUser(o.user),o;case"reauthenticate":return _(t.user,i,"internal-error"),tO._forOperation(t.user,t.operationType,a);default:T(i,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}function iI(e,t){let i=(0,o.getModularInstance)(e);return _(t.customData.operationType,i,"argument-error"),_(t.customData._serverResponse?.mfaPendingCredential,i,"argument-error"),iC._fromError(i,t)}function i_(e,t){return V(e,"POST","/v2/accounts/mfaEnrollment:start",G(e,t))}class iO{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>tz._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new iO(e)}async getSession(){return iS._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let i=await this.getSession(),r=await eo(this.user,e._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,i=await this.user.getIdToken();try{var r,n;let e=await eo(this.user,(r=this.user.auth,n={idToken:i,mfaEnrollmentId:t},V(r,"POST","/v2/accounts/mfaEnrollment:withdraw",G(r,n))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}let iP=new WeakMap;function iM(e){let t=(0,o.getModularInstance)(e);return iP.has(t)||iP.set(t,iO._fromUser(t)),iP.get(t)}let iR="__sak";class iL{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(iR,"1"),this.storage.removeItem(iR),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class iD extends iL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,i)=>{this.notifyListeners(e,i)});let i=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(i);(t||this.localCache[i]!==e)&&this.notifyListeners(i,e)},n=this.storage.getItem(i);(0,o.isIE)()&&10===document.documentMode&&n!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iD.type="LOCAL";let ik=iD;function iN(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${t}=([^;]+)`);return document.cookie.match(i)?.[1]??null}function iF(e){let t="http:"===window.location.protocol;return`${t?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class iB{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"==typeof isSecureContext&&!isSecureContext||"u"<typeof navigator||"u"<typeof document)&&(navigator.cookieEnabled??!0)}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=iF(e);if(window.cookieStore){let e=await window.cookieStore.get(t);return e?.value}return iN(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=iF(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let i=iF(e);if(window.cookieStore){let e=e=>{let r=e.changed.find(e=>e.name===i);r&&t(r.value),e.deleted.find(e=>e.name===i)&&t(null)};return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener("change",e)),window.cookieStore.addEventListener("change",e)}let r=iN(i),n=setInterval(()=>{let e=iN(i);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(n))}_removeListener(e,t){let i=this.listenerUnsubscribes.get(t);i&&(i(),this.listenerUnsubscribes.delete(t))}}iB.type="COOKIE";let iU=iB;class iG extends iL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iG.type="SESSION";let iV=iG;class iY{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let i=new iY(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:i,data:r}=e.data,n=this.handlersMap[i];if(!n?.size)return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:i});let s=Array.from(n).map(async t=>t(e.origin,r)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ij(e="",t=10){let i="";for(let e=0;e<t;e++)i+=Math.floor(10*Math.random());return e+i}iY.receivers=[];class iW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r,n,s="u">typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let h=ij("",20);s.port1.start();let c=setTimeout(()=>{o(Error("unsupported_event"))},i);n={messageChannel:s,onMessage(e){if(e.data.eventId===h)switch(e.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(e.data.response);break;default:clearTimeout(c),clearTimeout(r),o(Error("invalid_response"))}}},this.handlers.add(n),s.port1.addEventListener("message",n.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{n&&this.removeMessageHandler(n)})}}function iz(){return window}function iH(){return void 0!==iz().WorkerGlobalScope&&"function"==typeof iz().importScripts}async function iX(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let iq="firebaseLocalStorageDb",iK="firebaseLocalStorage",iJ="fbase_key";class iQ{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function i$(e,t){return e.transaction([iK],t?"readwrite":"readonly").objectStore(iK)}function iZ(){let e=indexedDB.open(iq,1);return new Promise((t,i)=>{e.addEventListener("error",()=>{i(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(iK,{keyPath:iJ})}catch(e){i(e)}}),e.addEventListener("success",async()=>{let i=e.result;i.objectStoreNames.contains(iK)?t(i):(i.close(),await new iQ(indexedDB.deleteDatabase(iq)).toPromise(),t(await iZ()))})})}async function i0(e,t,i){return new iQ(i$(e,!0).put({[iJ]:t,value:i})).toPromise()}async function i1(e,t){let i=i$(e,!1).get(t),r=await new iQ(i).toPromise();return void 0===r?null:r.value}function i2(e,t){return new iQ(i$(e,!0).delete(t)).toPromise()}class i5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await iZ()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iY._getInstance(iH()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iX(),!this.activeServiceWorker)return;this.sender=new iW(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await iZ();return await i0(e,iR,"1"),await i2(e,iR),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>i0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>i1(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>i2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new iQ(i$(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],i=new Set;if(0!==e.length)for(let{fbase_key:r,value:n}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(n)&&(this.notifyListeners(r,n),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!i.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}i5.type="LOCAL";let i3=i5;function i4(e,t){return V(e,"POST","/v2/accounts/mfaSignIn:start",G(e,t))}let i9=eW("rcb"),i8=new D(3e4,6e4);class i6{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!iz().grecaptcha?.render}load(e,t=""){var i;return(_((i=t).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(i),e,"argument-error"),this.shouldResolveImmediately(t)&&X(iz().grecaptcha))?Promise.resolve(iz().grecaptcha):new Promise((i,r)=>{let n=iz().setTimeout(()=>{r(A(e,"network-request-failed"))},i8.get());iz()[i9]=()=>{iz().clearTimeout(n),delete iz()[i9];let s=iz().grecaptcha;if(!s||!X(s))return void r(A(e,"internal-error"));let a=s.render;s.render=(e,t)=>{let i=a(e,t);return this.counter++,i},this.hostLanguage=t,i(s)},ej(`${eY.recaptchaV2Script}?${(0,o.querystring)({onload:i9,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(n),r(A(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!iz().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class i7{async load(e){return new ez(e)}clearedOneInstance(){}}let re="recaptcha",rt={theme:"light",type:"image"};class ri{constructor(e,t,i={...rt}){this.parameters=i,this.type=re,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=eG(e),this.isInvisible="invisible"===this.parameters.size,_("u">typeof document,this.auth,"operation-not-supported-in-this-environment");let r="string"==typeof t?document.getElementById(t):t;_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new i7:new i6,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(i=>{let r=e=>{e&&(this.tokenChangeListeners.delete(r),i(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_(!this.parameters.sitekey,this.auth,"argument-error"),_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_("u">typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){let i=iz()[e];"function"==typeof i&&i(t)}}}assertNotDestroyed(){_(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;_(R()&&!iH(),this.auth,"internal-error"),await (e=null,new Promise(t=>{"complete"===document.readyState?t():(e=()=>t(),window.addEventListener("load",e))}).catch(t=>{throw e&&window.removeEventListener("load",e),t})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let t=await J(this.auth);_(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return _(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=tg._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function rn(e,t,i){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r=eG(e);return new rr(await ro(r,t,(0,o.getModularInstance)(i)),e=>tG(r,e))}async function rs(e,t,i){let r=(0,o.getModularInstance)(e);return await tF(!1,r,"phone"),new rr(await ro(r.auth,t,(0,o.getModularInstance)(i)),e=>tV(r,e))}async function ra(e,t,i){let r=(0,o.getModularInstance)(e);return(0,a._isFirebaseServerApp)(r.auth.app)?Promise.reject(S(r.auth)):new rr(await ro(r.auth,t,(0,o.getModularInstance)(i)),e=>tY(r,e))}async function ro(e,t,i){if(!e._getRecaptchaConfig())try{await eZ(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"==typeof t?{phoneNumber:t}:t,"session"in r){let t=r.session;if("phoneNumber"in r){_("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===eK){_(i?.type===re,e,"argument-error");let r=await rc(e,t,i);return i_(e,r)}return i_(e,t)},a=e$(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{_("signin"===t.type,e,"internal-error");let n=r.multiFactorHint?.uid||r.multiFactorUid;_(n,e,"missing-multi-factor-info");let s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===eK){_(i?.type===re,e,"argument-error");let r=await rc(e,t,i);return i4(e,r)}return i4(e,t)},o=e$(e,s,"mfaSmsSignIn",a,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===eK){_(i?.type===re,e,"argument-error");let r=await rc(e,t,i);return tl(e,r)}return tl(e,t)},s=e$(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{i?._reset()}}async function rh(e,t){let i=(0,o.getModularInstance)(e);if((0,a._isFirebaseServerApp)(i.auth.app))return Promise.reject(S(i.auth));await tN(i,t)}async function rc(e,t,i){_(i.type===re,e,"argument-error");let r=await i.verify();_("string"==typeof r,e,"argument-error");let n={...t};if("phoneEnrollmentInfo"in n){let e=n.phoneEnrollmentInfo.phoneNumber,t=n.phoneEnrollmentInfo.captchaResponse,i=n.phoneEnrollmentInfo.clientType,s=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:i,recaptchaVersion:s}}),n}if(!("phoneSignInInfo"in n))return Object.assign(n,{recaptchaToken:r}),n;{let e=n.phoneSignInInfo.captchaResponse,t=n.phoneSignInInfo.clientType,i=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:i}}),n}}class rl{constructor(e){this.providerId=rl.PROVIDER_ID,this.auth=eG(e)}verifyPhoneNumber(e,t){return ro(this.auth,e,(0,o.getModularInstance)(t))}static credential(e,t){return tg._fromVerification(e,t)}static credentialFromResult(e){return rl.credentialFromTaggedObject(e)}static credentialFromError(e){return rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:i}=e;return t&&i?tg._fromTokenResponse(t,i):null}}function rd(e,t){return t?eb(t):(_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rl.PROVIDER_ID="phone",rl.PHONE_SIGN_IN_METHOD="phone";class ru extends e3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return th(e,this._buildIdpRequest())}_linkToIdToken(e,t){return th(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return th(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rf(e){return tU(e.auth,new ru(e),e.bypassAuthState)}function rp(e){let{auth:t,user:i}=e;return _(i,t,"internal-error"),tB(i,new ru(e),e.bypassAuthState)}async function rg(e){let{auth:t,user:i}=e;return _(i,t,"internal-error"),tN(i,new ru(e),e.bypassAuthState)}class rm{constructor(e,t,i,r,n=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:n,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:i,tenantId:n||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rf;case"linkViaPopup":case"linkViaRedirect":return rg;case"reauthViaPopup":case"reauthViaRedirect":return rp;default:T(this.auth,"internal-error")}}resolve(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let rv=new D(2e3,1e4);async function ry(e,t,i){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(A(e,"operation-not-supported-in-this-environment"));let r=eG(e);C(e,t,tb);let n=rd(r,i);return new rE(r,"signInViaPopup",t,n).executeNotNull()}async function rb(e,t,i){let r=(0,o.getModularInstance)(e);if((0,a._isFirebaseServerApp)(r.auth.app))return Promise.reject(A(r.auth,"operation-not-supported-in-this-environment"));C(r.auth,t,tb);let n=rd(r.auth,i);return new rE(r.auth,"reauthViaPopup",t,n,r).executeNotNull()}async function rx(e,t,i){let r=(0,o.getModularInstance)(e);C(r.auth,t,tb);let n=rd(r.auth,i);return new rE(r.auth,"linkViaPopup",t,n,r).executeNotNull()}class rE extends rm{constructor(e,t,i,r,n){super(e,t,r,n),this.provider=i,this.authWindow=null,this.pollId=null,rE.currentPopupAction&&rE.currentPopupAction.cancel(),rE.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return _(e,this.auth,"internal-error"),e}async onExecution(){P(1===this.filter.length,"Popup operations only handle one event");let e=ij();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(A(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(A(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rE.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(A(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rv.get())};e()}}rE.currentPopupAction=null;let rT=new Map;class rA extends rm{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rT.get(this.auth._key());if(!e){try{let t=await rw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}rT.set(this.auth._key(),e)}return this.bypassAuthState||rT.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rw(e,t){let i=rO(t),r=r_(e);if(!await r._isAvailable())return!1;let n=await r._get(i)==="true";return await r._remove(i),n}async function rS(e,t){return r_(e)._set(rO(t),"true")}function rC(){rT.clear()}function rI(e,t){rT.set(e._key(),t)}function r_(e){return eb(e._redirectPersistence)}function rO(e){return eT("pendingRedirect",e.config.apiKey,e.name)}function rP(e,t,i){return rM(e,t,i)}async function rM(e,t,i){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r=eG(e);C(e,t,tb),await r._initializationPromise;let n=rd(r,i);return await rS(n,r),n._openRedirect(r,t,"signInViaRedirect")}function rR(e,t,i){return rL(e,t,i)}async function rL(e,t,i){let r=(0,o.getModularInstance)(e);if(C(r.auth,t,tb),(0,a._isFirebaseServerApp)(r.auth.app))return Promise.reject(S(r.auth));await r.auth._initializationPromise;let n=rd(r.auth,i);await rS(n,r.auth);let s=await rB(r);return n._openRedirect(r.auth,t,"reauthViaRedirect",s)}function rD(e,t,i){return rk(e,t,i)}async function rk(e,t,i){let r=(0,o.getModularInstance)(e);C(r.auth,t,tb),await r.auth._initializationPromise;let n=rd(r.auth,i);await tF(!1,r,t.providerId),await rS(n,r.auth);let s=await rB(r);return n._openRedirect(r.auth,t,"linkViaRedirect",s)}async function rN(e,t){return await eG(e)._initializationPromise,rF(e,t,!1)}async function rF(e,t,i=!1){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(S(e));let r=eG(e),n=rd(r,t),s=new rA(r,n,i),o=await s.execute();return o&&!i&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function rB(e){let t=ij(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class rU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rV(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rV(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(A(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rG(e))}saveEventToCache(e){this.cachedEventUids.add(rG(e)),this.lastProcessedEventTime=Date.now()}}function rG(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rV({type:e,error:t}){return"unknown"===e&&t?.code==="auth/no-auth-event"}async function rY(e,t={}){return V(e,"GET","/v1/projects",t)}let rj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rW=/^https?/;async function rz(e){if(e.config.emulator)return;let{authorizedDomains:t}=await rY(e);for(let e of t)try{if(function(e){let t=M(),{protocol:i,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let n=new URL(e);return""===n.hostname&&""===r?"chrome-extension:"===i&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===i&&n.hostname===r}if(!rW.test(i))return!1;if(rj.test(e))return r===e;let n=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}(e))return}catch{}T(e,"unauthorized-domain")}let rH=new D(3e4,6e4);function rX(){let e=iz().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let rq=null,rK=new D(5e3,15e3),rJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function r$(e){let t,i,r,n,s,h=await (rq=rq||new Promise((t,i)=>{function r(){rX(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rX(),i(A(e,"network-request-failed"))},timeout:rH.get()})}if(iz().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(iz().gapi?.load)r();else{let t=eW("iframefcb");return iz()[t]=()=>{gapi.load?r():i(A(e,"network-request-failed"))},ej(`${eY.gapiScript}?onload=${t}`).catch(e=>i(e))}}).catch(e=>{throw rq=null,e})),c=iz().gapi;return _(c,e,"internal-error"),h.open({where:document.body,url:(_((t=e.config).authDomain,e,"auth-domain-config-required"),i=t.emulator?k(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:a.SDK_VERSION},(n=rQ.get(e.config.apiHost))&&(r.eid=n),(s=e._getFrameworks()).length&&(r.fw=s.join(",")),`${i}?${(0,o.querystring)(r).slice(1)}`),messageHandlersFilter:c.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rJ,dontclear:!0},t=>new Promise(async(i,r)=>{await t.restyle({setHideOnLeave:!1});let n=A(e,"network-request-failed"),s=iz().setTimeout(()=>{r(n)},rK.get());function a(){iz().clearTimeout(s),i(t)}t.ping(a).then(a,()=>{r(n)})}))}let rZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class r0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let r1=encodeURIComponent("fac");async function r2(e,t,i,r,n,s){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");let h={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:r,v:a.SDK_VERSION,eventId:n};if(t instanceof tb)for(let[i,r]of(t.setDefaultLanguage(e.languageCode),h.providerId=t.providerId||"",(0,o.isEmpty)(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))h[i]=r;if(t instanceof tx){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(h.scopes=e.join(","))}for(let t of(e.tenantId&&(h.tid=e.tenantId),Object.keys(h)))void 0===h[t]&&delete h[t];let c=await e._getAppCheckToken(),l=c?`#${r1}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?k(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,o.querystring)(h).slice(1)}${l}`}let r5="webStorageSupport",r3=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iV,this._completeRedirectFn=rF,this._overrideRedirectResult=rI}async _openPopup(e,t,i,r){P(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let n=await r2(e,t,i,M(),r);return function(e,t,i,r=500,n=600){let s=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",c={...rZ,width:r.toString(),height:n.toString(),top:s,left:a},l=(0,o.getUA)().toLowerCase();i&&(h=eI(l)?"_blank":i),eS(l)&&(t=t||"http://localhost",c.scrollbars="yes");let d=Object.entries(c).reduce((e,[t,i])=>`${e}${t}=${i},`,"");if(function(e=(0,o.getUA)()){return eR(e)&&!!window.navigator?.standalone}(l)&&"_self"!==h){var u,f;let e,i;return u=t||"",f=h,(e=document.createElement("a")).href=u,e.target=f,(i=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i),new r0(null)}let p=window.open(t||"",h,d);_(p,e,"popup-blocked");try{p.focus()}catch(e){}return new r0(p)}(e,n,ij())}async _openRedirect(e,t,i,r){var n;return await this._originValidation(e),n=await r2(e,t,i,M(),r),iz().location.href=n,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:i}=this.eventManagers[t];return e?Promise.resolve(e):(P(i,"If manager is not set, promise should be"),i)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await r$(e),i=new rU(e);return t.register("authEvent",t=>(_(t?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r5,{type:r5},i=>{let r=i?.[0]?.[r5];void 0!==r&&t(!!r),T(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eD()||eC()||eR()}};class r4{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return O("unexpected MultiFactorSessionType")}}}class r9 extends r4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new r9(e)}_finalizeEnroll(e,t,i){return V(e,"POST","/v2/accounts/mfaEnrollment:finalize",G(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return V(e,"POST","/v2/accounts/mfaSignIn:finalize",G(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class r8{static assertion(e){return r9._fromCredential(e)}}r8.FACTOR_ID="phone";class r6{static assertionForEnrollment(e,t){return r7._fromSecret(e,t)}static assertionForSignIn(e,t){return r7._fromEnrollmentId(e,t)}static async generateSecret(e){var t;_(void 0!==e.user?.auth,"internal-error");let i=await V(t=e.user.auth,"POST","/v2/accounts/mfaEnrollment:start",G(t,{idToken:e.credential,totpEnrollmentInfo:{}}));return ne._fromStartTotpMfaEnrollmentResponse(i,e.user.auth)}}r6.FACTOR_ID="totp";class r7 extends r4{constructor(e,t,i){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=i}static _fromSecret(e,t){return new r7(t,void 0,e)}static _fromEnrollmentId(e,t){return new r7(t,e)}async _finalizeEnroll(e,t,i){return _(void 0!==this.secret,e,"argument-error"),V(e,"POST","/v2/accounts/mfaEnrollment:finalize",G(e,{idToken:t,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){_(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let i={verificationCode:this.otp};return V(e,"POST","/v2/accounts/mfaSignIn:finalize",G(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i}))}}class ne{constructor(e,t,i,r,n,s,a){this.sessionInfo=s,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=i,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=n}static _fromStartTotpMfaEnrollmentResponse(e,t){return new ne(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let i=!1;return(nt(e)||nt(t))&&(i=!0),i&&(nt(e)&&(e=this.auth.currentUser?.email||"unknownuser"),nt(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function nt(e){return void 0===e||e?.length===0}var ni="@firebase/auth",nr="1.12.0";class nn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let ns=(0,o.getExperimentalSetting)("authIdTokenMaxAge")||300,na=null;function no(e=(0,a.getApp)()){let t=(0,a._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();let i=e0(e,{popupRedirectResolver:r3,persistence:[i3,ik,iV]}),r=(0,o.getExperimentalSetting)("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t,r=(t=e.toString(),async e=>{let i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>ns)return;let n=i?.token;na!==n&&(na=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});iy(i,r,()=>r(i.currentUser)),iv(i,e=>r(e))}}let n=(0,o.getDefaultEmulatorHost)("auth");return n&&e1(i,`http://${n}`),i}eY={loadJS:e=>new Promise((t,i)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{let t=A("internal-error");t.customData=e,i(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},n="Browser",(0,a._registerComponent)(new(0,c.Component)("auth",(e,{options:t})=>{let i,r,s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:h,authDomain:c}=s.options;_(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});let l=new eU(s,a,o,{apiKey:h,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ek(n)});return r=(Array.isArray(i=t?.persistence||[])?i:[i]).map(eb),t?.errorMap&&l._updateErrorMap(t.errorMap),l._initializeWithPersistence(r,t?.popupRedirectResolver),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),(0,a._registerComponent)(new(0,c.Component)("auth-internal",e=>new nn(eG(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,a.registerVersion)(ni,nr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),(0,a.registerVersion)(ni,nr,"esm2020")},{"@firebase/app":"ac8fF","@firebase/util":"hDH52","@firebase/logger":"8Ggjd","@firebase/component":"lCYJy","@parcel/transformer-js/src/esmodule-helpers.js":"71j05"}],"2nxjP":[function(e,t,i,r){let{ConfigProcessor:n}=e("1b38e883cd2322cc");t.exports.ConfigManager=class extends n{constructor(){super(),this.client={customClasses:{message:{listeners:{}}},message:{listeners:{}}}}}},{"1b38e883cd2322cc":"3drMl"}],"3drMl":[function(e,t,i,r){let{Logger:n,sc:s}=e("15f3555561ca9b15");t.exports.ConfigProcessor=class{constructor(){this.avoidLog=!1}get(e,t){let i=void 0!==t&&t,r=e.split("/");if(2>r.length)return this.avoidLog||n.error("Path level is too low:",e),i;let a=this[r[0]]||{};for(let t=1;t<r.length;t++){if(!s.hasOwn(a,r[t])){this.avoidLog||n.error("Configuration level "+t+' > "'+r[t]+'" not defined: '+e),a=i;break}a=a[r[t]]}return a}getWithoutLogs(e,t=!1){this.avoidLog=!0;let i=this.get(e,t);return this.avoidLog=!1,i}}},{"15f3555561ca9b15":"ijd9L"}],"5RyyZ":[function(e,t,i,r){t.exports={game:{passwordConfirmationNotMatch:"Password and confirmation does not match.",pleaseReadTermsAndConditions:"Please read and accept the terms and conditions and continue.",sessionEnded:"Your session ended, please login again.",errors:{missingClasses:"None configured classes available.",missingPlayerData:"Missing player data.",joiningRoom:'There was an error while joining the room "%joinRoomName", please try again later.',joiningFeatureRoom:'There was an error while joining the feature room "%joinRoomName".',reconnectClient:"Reconnect Game Client error.",sessionEnded:"Your session ended, please login again.",connectionLost:"Connection lost, please login again.",serverDown:"Server is offline."},pleaseSelectScene:"Please select a Scene"}}},{}],"4CxZf":[function(e,t,i,r){let{sc:n}=e("a70c9540271e3b88");t.exports.GameDom=new class{constructor(){this.styleSuffix={width:"px",height:"px",top:"px",bottom:"px",left:"px",right:"px"}}getWindow(){return window}getDocument(){return window.document}getElement(e,t=!1){return e?(t||document).querySelector(e):null}getElements(e,t){return e?(t||document).querySelectorAll(e):null}emptyElement(e,t=!1){let i=this.getElement(e,t);i&&(i.innerHTML="")}appendToElement(e,t){let i=this.getElement(e);if(!i||!t)return!1;let r=document.createElement("template");r.innerHTML=t;for(let e=0;e<r.content.childNodes.length;e++)i.appendChild(r.content.childNodes[e]);return i}updateContent(e,t){let i=this.getElement(e);return!!i&&(i.innerHTML=t,i)}removeElement(e){this.getElement(e)?.remove()}createElement(e,t="",i){let r=document.createElement(e);if(""!==t&&(r.id=t),n.isArray(i))for(let e of i)r.classList.add(e);return r}setElementStyles(e,t){if(!e||!t)return!1;for(let i of Object.keys(t)){let r=t[i],s=n.get(this.styleSuffix,i,"");""!==s&&(r+=s),e.style[i]=r}return!0}createElementWithStyles(e,t="",i={}){let r=this.createElement(e,t);return this.setElementStyles(r,i),r}activeElement(){return document.activeElement}insideInput(){return"input"===this.activeElement().tagName.toLowerCase()}getJSON(e,t){let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.onload=()=>{let e=i.status;200===e?t(null,i.response):t(e)},i.send()}alertReload(e){return alert(e),this.getWindow().location.reload(),!1}}},{a70c9540271e3b88:"ijd9L"}],aHFje:[function(e,t,i,r){let{PluginInterface:n}=e("8f2a44c89127a9b3"),{Npc1:s}=e("66950fed6ab0bf91");t.exports.ClientPlugin=class extends n{setup(e){this.events=e.events,this.events.on("reldens.beforeJoinGame",e=>{this.defineCustomClasses(e)})}defineCustomClasses(e){let t=e.gameManager.config.client.customClasses;t.objects||(t.objects={}),t.objects.people_town_1=s}}},{"8f2a44c89127a9b3":"9RjlI","66950fed6ab0bf91":"aCHk0"}],aCHk0:[function(e,t,i,r){let{AnimationEngine:n}=e("f305cb70a71f8491");t.exports.Npc1=class extends n{constructor(e,t,i){super(e,t,i)}}},{f305cb70a71f8491:"6Buma"}]},["1eaQK"],"1eaQK","parcelRequire0bd7",{});